{"version":3,"file":"scrollbar.js","sourceRoot":"","sources":["../../src/component/scrollbar.ts"],"names":[],"mappings":"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","sourcesContent":["import { h, Element } from './element';\r\nimport { px, emptyFn } from '../utils';\r\n\r\ndeclare type Direction = 'vertical' | 'horizontal';\r\ndeclare interface Slider {\r\n    color?: string;\r\n}\r\n\r\nexport interface ScrollBarValue {\r\n    direction: Direction;\r\n    position: number;\r\n    deltaX: number;\r\n    deltaY: number;\r\n}\r\nexport interface ScrollBarProps {\r\n    size: number;\r\n    scrollSize: number;\r\n    slider: Slider;\r\n    direction: Direction;\r\n    startScroll?: Function;\r\n    onScoll?: Function;\r\n    endScroll?: Function;\r\n}\r\nexport class ScrollBar {\r\n    public el: Element;\r\n    private size: number;\r\n    private sliderSize: number;\r\n    private scrollSize: number;\r\n    private sliderEl: Element;\r\n    private direction: Direction;\r\n    private state: boolean;\r\n    private position: number;\r\n    private startPosition: number;\r\n    private isOver = false;\r\n    private timer: number;\r\n    private autoShow = true;\r\n    private minScrollBarLength = 24;\r\n    private moveOutside: boolean;\r\n    private cachePosition: number;\r\n\r\n    private startTrigger: Function;\r\n    private scrollTrigger: Function;\r\n    private endTrigger: Function;\r\n    public constructor(props: ScrollBarProps) {\r\n        this.direction = props.direction;\r\n        this.state = false;\r\n        this.position = 0;\r\n        this.startPosition = 0;\r\n        this.size = props.size;\r\n        this.scrollSize = props.scrollSize;\r\n        this.sliderSize = this.getScrollBarLength();\r\n\r\n        this.startTrigger = props.startScroll || emptyFn;\r\n        this.scrollTrigger = props.onScoll || emptyFn;\r\n        this.endTrigger = props.endScroll || emptyFn;\r\n\r\n        this.el = h('div', `sheet-scrollbar sheet-scrollbar-${this.vertical() ? 'y' : 'x'}`);\r\n        this.sliderEl = h('div', 'sheet-scrollbar-slider');\r\n\r\n        this.el.css(this.vertical() ? 'height' : 'width', px(props.size));\r\n        this.sliderEl.css(this.vertical() ? 'height' : 'width', px(this.sliderSize));\r\n\r\n        this.el.children(this.sliderEl);\r\n\r\n        this._initEvent();\r\n        this.sliderEl.hide();\r\n        this.checkScrollSize();\r\n    }\r\n\r\n    private _initEvent(): void {\r\n        this.el.on('mousedown', (e: Event): void => {\r\n            e.preventDefault();\r\n        });\r\n        this.el.on('mouseover', () => {\r\n            this.isOver = true;\r\n            this.checkScrollSize();\r\n            this.sliderEl.show();\r\n        });\r\n        this.el.on('mouseleave', () => {\r\n            this.isOver = false;\r\n            !this.state && this._resetTimeout();\r\n        });\r\n\r\n        // 点击slider，开始滑动\r\n        this.sliderEl.on('mousedown', (e: Event): void => {\r\n            this._startScroll(e as MouseEvent);\r\n            e.preventDefault();\r\n        });\r\n        this.sliderEl.on('touchstart', (e: TouchEvent): void => {\r\n            this.state = true;\r\n            this.sliderEl.show();\r\n            this._startScroll(e.targetTouches[0]);\r\n        });\r\n\r\n        this.sliderEl.on('mousemove', (e: Event): void => {\r\n            this._scroll(e as MouseEvent);\r\n        });\r\n        this.sliderEl.on('touchmove', (e: TouchEvent): void => {\r\n            this._scroll(e.targetTouches[0]);\r\n        });\r\n        this.sliderEl.on('touchend', (): void => {\r\n            this.state = false;\r\n            this._resetTimeout();\r\n        });\r\n        document.addEventListener('mousemove', (e): void => {\r\n            this._scroll(e as MouseEvent);\r\n        });\r\n        this.sliderEl.on('mouseup', (e): void => {\r\n            this._endScroll(e as MouseEvent);\r\n        });\r\n        document.addEventListener('mouseup', (e): void => {\r\n            this._endScroll(e as MouseEvent);\r\n        });\r\n        // REPORT-31335 防止点击拖动时鼠标移出iframe会监听不到document的mousemove事件出现卡顿\r\n        // REPORT-50429 因为跨域iframe下调用window.parent.xxx会报错，并且现在写法有内存泄露问题，这里先注释掉，卡顿的问题以后再找解决方法\r\n        // try {\r\n        //     window.parent.addEventListener(\r\n        //         'mousemove',\r\n        //         (e): void => {\r\n        //             this._scroll(e as MouseEvent);\r\n        //         }\r\n        //     );\r\n        //     window.parent.addEventListener(\r\n        //         'mouseup',\r\n        //         (e): void => {\r\n        //             this._endScroll(e as MouseEvent);\r\n        //         }\r\n        //     );\r\n        // } catch (err) {}\r\n\r\n        document.addEventListener('mouseleave', (e): void => {\r\n            this._endScroll(e as MouseEvent);\r\n            // this.moveOutside = true;\r\n            // this.cachePosition = this.vertical() ? e.clientY : e.clientX;\r\n        });\r\n        // document.addEventListener(\r\n        //     'mouseenter',\r\n        //     (e): void => {\r\n        //         this.moveOutside = false;\r\n        //         this.startPosition = this.vertical() ? e.clientY : e.clientX;\r\n        //     }\r\n        // );\r\n    }\r\n\r\n    private _startScroll(e: MouseEvent | Touch): void {\r\n        this.startPosition = this.vertical() ? e.clientY : e.clientX;\r\n        this.state = true;\r\n        this.el.addClass('active');\r\n        this.startTrigger();\r\n    }\r\n\r\n    private _scroll(e: MouseEvent | Touch): void {\r\n        if (!this.state) {\r\n            return;\r\n        }\r\n\r\n        if (this.moveOutside) {\r\n            if (this.vertical()) {\r\n                this.startPosition = this.startPosition + e.clientY - this.cachePosition;\r\n            } else {\r\n                this.startPosition = this.startPosition + e.clientX - this.cachePosition;\r\n            }\r\n            this.moveOutside = false;\r\n        }\r\n\r\n        let newX = 0,\r\n            newY = 0;\r\n\r\n        if (this.vertical()) {\r\n            newY = e.clientY - this.startPosition + this.position;\r\n            this.startPosition = e.clientY;\r\n        } else {\r\n            newX = e.clientX - this.startPosition + this.position;\r\n            this.startPosition = e.clientX;\r\n        }\r\n        newX = Math.round(Math.max(0, Math.min(newX, this.size - this.sliderSize)));\r\n        newY = Math.round(Math.max(0, Math.min(newY, this.size - this.sliderSize)));\r\n\r\n        const origin = this.position;\r\n        this.position = newX || newY;\r\n\r\n        const delta = (this.position - origin) * this.scrollSize / (this.size - this.sliderSize);\r\n\r\n        this._scrollTo(newX, newY);\r\n\r\n        delta === 0 && this.adjustScroll(newX, newY);\r\n\r\n        this.scrollTrigger(this.vertical() ? 0 : delta, this.vertical() ? delta : 0);\r\n    }\r\n\r\n    /**\r\n     * 防止滚动条滚动到头时报表未能滚动到顶部\r\n     */\r\n    private adjustScroll(newX: number, newY: number) {\r\n        const adjustSize = 5;\r\n        const position = this.vertical() ? newY : newX;\r\n        const adjustX = this.vertical() ? 0 : adjustSize;\r\n        const adjustY = this.vertical() ? adjustSize : 0;\r\n\r\n        if (position === 0) {\r\n            this.scrollTrigger(0 - adjustX, 0 - adjustY);\r\n        }\r\n        if (position === this.size - this.sliderSize) {\r\n            this.scrollTrigger(adjustX, adjustY);\r\n        }\r\n    }\r\n\r\n    private _endScroll(e: MouseEvent): void {\r\n        if (!this.state) {\r\n            return;\r\n        }\r\n        this.state = false;\r\n        this.el.removeClass('active');\r\n        this._resetTimeout();\r\n\r\n        this.endTrigger();\r\n        e.preventDefault();\r\n    }\r\n\r\n    private _scrollTo(x: number = 0, y: number = 0): void {\r\n        this.sliderEl.css({\r\n            transform: `translate(${px(x)}, ${px(y)})`,\r\n            '-webkit-transform': `translate(${px(x)}, ${px(y)})`,\r\n            '-moz-transform': `translate(${px(x)}, ${px(y)})`,\r\n            '-o-transform': `translate(${px(x)}, ${px(y)})`,\r\n            '-ms-transform': `translate(${px(x)}, ${px(y)})`,\r\n        });\r\n    }\r\n\r\n    private checkScrollSize() {\r\n        this.autoShow && (this.scrollSize <= 0 ? this.el.hide() : this.el.show());\r\n    }\r\n\r\n    public vertical(): boolean {\r\n        return this.direction === 'vertical';\r\n    }\r\n\r\n    public inScrollBounds(e: MouseEvent): boolean {\r\n        const startPosition = this.sliderSize / 2;\r\n        const endPosition = this.size - this.sliderSize / 2;\r\n        const position = this.vertical() ? e.clientY : e.clientX;\r\n\r\n        return position >= startPosition && position <= endPosition;\r\n    }\r\n\r\n    private _resetTimeout(): void {\r\n        this.timer && window.clearTimeout(this.timer);\r\n        this.timer = this.sliderElHide();\r\n    }\r\n\r\n    public scroll(distance: number, showScrollBar = true): void {\r\n        if (!this.isOver && this.scrollSize > 0 && showScrollBar) {\r\n            this.sliderEl.show();\r\n            this._resetTimeout();\r\n        }\r\n        distance = distance * (this.size - this.sliderSize) / this.scrollSize;\r\n        const x = this.vertical() ? 0 : distance;\r\n        const y = this.vertical() ? distance : 0;\r\n        this.position = distance;\r\n        this._scrollTo(x, y);\r\n    }\r\n\r\n    public update(props) {\r\n        this.state = false;\r\n        this.startPosition = 0;\r\n        this.size = props.size;\r\n        this.scrollSize = props.scrollSize;\r\n        this.sliderSize = this.getScrollBarLength();\r\n\r\n        const newX = this.vertical() ? 0 : Math.min(this.position, this.size - this.sliderSize);\r\n        const newY = this.vertical() ? Math.min(this.position, this.size - this.sliderSize) : 0;\r\n        this.position = newX || newY;\r\n\r\n        this.el.css(this.vertical() ? 'height' : 'width', px(props.size));\r\n        this.sliderEl.css(this.vertical() ? 'height' : 'width', px(this.sliderSize));\r\n\r\n        this._scrollTo(newX, newY);\r\n        this.scrollTrigger(0, 0, { force: true });\r\n        this.checkScrollSize();\r\n        this.sliderEl.hide();\r\n    }\r\n\r\n    private getScrollBarLength() {\r\n        const sliderSize = Math.round(Math.pow(this.size, 2) / (this.scrollSize + this.size));\r\n\r\n        return this.size < this.minScrollBarLength ? sliderSize : Math.max(sliderSize, this.minScrollBarLength);\r\n    }\r\n\r\n    public setVisible(visible: boolean) {\r\n        visible ? this.el.show() : this.el.hide();\r\n        visible ? this.sliderEl.show() : this.sliderEl.hide();\r\n        this.autoShow = false;\r\n    }\r\n\r\n    private sliderElHide() {\r\n        return window.setTimeout(() => {\r\n            !this.state && this.autoShow && this.sliderEl.hide();\r\n            // REPORT-61933 修改为无操作5s后隐藏滚动条\r\n        }, 5000);\r\n    }\r\n}\r\n"]}