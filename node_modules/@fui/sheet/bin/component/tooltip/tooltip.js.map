{"version":3,"file":"tooltip.js","sourceRoot":"","sources":["../../../src/component/tooltip/tooltip.ts"],"names":[],"mappings":"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","sourcesContent":["import { Element, h } from '../element';\r\nexport class ToolTip {\r\n    public el: Element;\r\n    private isShow: boolean;\r\n    private timeOut: NodeJS.Timeout;\r\n    public constructor() {\r\n        this.el = h('div', 'sheet-tooltip');\r\n        this.hideEl();\r\n        this.isShow = false;\r\n        document.body.appendChild(this.el.el);\r\n    }\r\n\r\n    public show(text: string, x: number, y: number) {\r\n        let top = y + 10,\r\n            left = x + 10;\r\n\r\n        this.el.text(text);\r\n\r\n        const width = this.el.el.clientWidth;\r\n        let height = this.el.el.clientHeight;\r\n\r\n        // 高度大于窗口高度的话，比较左右侧空间，选择大的一方宽度直接拉满\r\n        if (height > window.innerHeight) {\r\n            const lleft = x - 10,\r\n                lright = window.innerWidth - x - 10;\r\n\r\n            if (lleft > lright) {\r\n                this.el.css('max-width', `${lleft}px`);\r\n                left = 0;\r\n            } else {\r\n                this.el.css('max-width', `${lright}px`);\r\n                left = x + 10;\r\n            }\r\n\r\n            height = this.el.el.clientHeight;\r\n\r\n            top = y + 10 - height;\r\n        } else {\r\n            // 高度不够就往上\r\n            if (window.innerHeight - y <= height) {\r\n                top -= height + 15;\r\n            }\r\n\r\n            // 宽度不够就往左\r\n            if (window.innerWidth - x <= width) {\r\n                left -= width + 10;\r\n            }\r\n        }\r\n\r\n        // 如果top小于0，则把top置为0\r\n        top = Math.max(top, 0);\r\n\r\n        // 如果left小于0，则把left置为0\r\n        left = Math.max(left, 0);\r\n\r\n        this.el.offset({ left, top });\r\n\r\n        if (!this.isShow) {\r\n            this.isShow = true;\r\n            this.timeOut = setTimeout(() => {\r\n                this.showEl();\r\n            }, 900);\r\n        }\r\n    }\r\n\r\n    public hide() {\r\n        this.timeOut && clearTimeout(this.timeOut);\r\n        this.hideEl();\r\n        this.isShow = false;\r\n    }\r\n\r\n    private showEl() {\r\n        this.el.css('visibility', 'visible');\r\n        this.el.css('opacity', 'inherit');\r\n    }\r\n\r\n    private hideEl() {\r\n        this.el.css('visibility', 'hidden');\r\n        this.el.css('opacity', '0');\r\n    }\r\n\r\n    public tear() {\r\n        document.body.removeChild(this.el.el);\r\n    }\r\n}\r\n"]}