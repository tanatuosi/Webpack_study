{"version":3,"file":"OB.js","sourceRoot":"","sources":["../../src/utils/OB.ts"],"names":[],"mappings":"AAEA;;GAEG;AACH,MAAM,OAAO,EAAE;IAEX;QACI,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;IACvB,CAAC;IACM,EAAE,CAAC,KAAY,EAAE,EAAY;QAChC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;QAClD,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;IAClC,CAAC;IAEM,GAAG,CAAC,KAAY,EAAE,EAAY;QACjC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;QAClD,MAAM,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;QAC/C,IAAI,KAAK,KAAK,CAAC,CAAC,EAAE;YACd,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,MAAM,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;SAC7C;IACL,CAAC;IACM,IAAI,CAAC,KAAY,EAAE,SAAgB,EAAE;QACxC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC;YAChB,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,OAAO,CAAC,CAAC,EAAE,EAAQ,EAAE;gBACtC,EAAE,CAAC,IAAI,CAAC,IAAI,EAAE,GAAG,MAAM,CAAC,CAAC;YAC7B,CAAC,CAAC,CAAC;IACX,CAAC;CACJ","sourcesContent":["import { Event } from '../../types';\r\n\r\n/*\r\n  全局的事件注册管理\r\n */\r\nexport class OB {\r\n    private readonly eventMap: { [key in Event]?: Function[] };\r\n    public constructor() {\r\n        this.eventMap = {};\r\n    }\r\n    public on(event: Event, cb: Function): void {\r\n        this.eventMap[event] = this.eventMap[event] || [];\r\n        this.eventMap[event].push(cb);\r\n    }\r\n\r\n    public off(event: Event, cb: Function): void {\r\n        this.eventMap[event] = this.eventMap[event] || [];\r\n        const index = this.eventMap[event].indexOf(cb);\r\n        if (index !== -1) {\r\n            this.eventMap[event].splice(index, index);\r\n        }\r\n    }\r\n    public emit(event: Event, params: any[] = []): void {\r\n        this.eventMap[event] &&\r\n            this.eventMap[event].forEach((cb): void => {\r\n                cb.call(null, ...params);\r\n            });\r\n    }\r\n}\r\n"]}