{"version":3,"file":"canvas.service.js","sourceRoot":"","sources":["../../../src/renderer/canvas/canvas.service.ts"],"names":[],"mappings":"AAEA,MAAM,UAAU,iBAAiB,CAAC,EAC9B,MAAM,EACN,CAAC,EACD,CAAC,EACD,KAAK,EACL,MAAM,EACN,SAAS,EACT,WAAW,EACX,QAAQ,GAUX;IAMG,MAAM,OAAO,GAAG,CAAC,GAAG,MAAM,GAAG,CAAC,GAAG,WAAW,GAAG,CAAC,CAAC;IACjD,MAAM,UAAU,GAAG,CAAC,GAAG,MAAM,GAAG,CAAC,GAAG,WAAW,GAAG,CAAC,CAAC;IAEpD,IAAI,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,GAAG,EAAE,IAAI,SAAS,KAAK,QAAQ,EAAE;QACjD,OAAO;YACH,KAAK,EAAE,CAAC,GAAG,KAAK,GAAG,CAAC,GAAG,QAAQ;YAC/B,KAAK,EAAE,CAAC,GAAG,MAAM,GAAG,CAAC;YACrB,YAAY,EAAE,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,QAAQ;YAC3C,SAAS,EAAE,QAAQ;SACtB,CAAC;KACL;IAED,IAAI,SAAS,KAAK,MAAM,EAAE;QACtB,OAAO;YACH,KAAK,EAAE,CAAC;YACR,KAAK,EAAE,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,UAAU;YACxC,YAAY,EAAE,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,QAAQ;YAC3C,SAAS;SACZ,CAAC;KACL;IAED,IAAI,SAAS,KAAK,OAAO,EAAE;QACvB,OAAO;YACH,KAAK,EAAE,CAAC,GAAG,KAAK;YAChB,KAAK,EAAE,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,OAAO;YACxC,YAAY,EAAE,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,KAAK;YAC3C,SAAS;SACZ,CAAC;KACL;IAED,OAAO;QACH,KAAK,EAAE,CAAC;QACR,KAAK,EAAE,CAAC;QACR,YAAY,EAAE,QAAQ;QACtB,SAAS,EAAE,MAAM;KACpB,CAAC;AACN,CAAC","sourcesContent":["import { TextAlign } from '../../../types';\r\n\r\nexport function getRotatePosition({\r\n    rotate,\r\n    x,\r\n    y,\r\n    width,\r\n    height,\r\n    textAlign,\r\n    boundsWidth,\r\n    baseline,\r\n}: {\r\n    rotate: number;\r\n    x: number;\r\n    y: number;\r\n    width: number;\r\n    height: number;\r\n    textAlign: TextAlign;\r\n    boundsWidth: number;\r\n    baseline: number;\r\n}): {\r\n    baseX: number;\r\n    baseY: number;\r\n    textBaseline: CanvasTextBaseline;\r\n    textAlign: CanvasTextAlign;\r\n} {\r\n    const topLine = y + height / 2 - boundsWidth / 2;\r\n    const bottomLine = y + height / 2 + boundsWidth / 2;\r\n\r\n    if (Math.abs(rotate) < 80 || textAlign === 'center') {\r\n        return {\r\n            baseX: x + width / 2 - baseline,\r\n            baseY: y + height / 2,\r\n            textBaseline: rotate > 0 ? 'top' : 'bottom',\r\n            textAlign: 'center',\r\n        };\r\n    }\r\n\r\n    if (textAlign === 'left') {\r\n        return {\r\n            baseX: x,\r\n            baseY: rotate < 0 ? topLine : bottomLine,\r\n            textBaseline: rotate > 0 ? 'top' : 'bottom',\r\n            textAlign,\r\n        };\r\n    }\r\n\r\n    if (textAlign === 'right') {\r\n        return {\r\n            baseX: x + width,\r\n            baseY: rotate < 0 ? bottomLine : topLine,\r\n            textBaseline: rotate > 0 ? 'bottom' : 'top',\r\n            textAlign,\r\n        };\r\n    }\r\n\r\n    return {\r\n        baseX: x,\r\n        baseY: y,\r\n        textBaseline: 'bottom',\r\n        textAlign: 'left',\r\n    };\r\n}\r\n"]}