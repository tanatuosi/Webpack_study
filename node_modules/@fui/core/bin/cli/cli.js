#!/usr/bin/env node
const yargs = require('yargs/yargs');
const { hideBin } = require('yargs/helpers');

const workerCmd = require('./worker/cli.worker');

const argv = yargs(hideBin(process.argv)).argv;

const cmd = argv._[0];

const cmds = new Map([
    ['worker', workerCmd],
]);

if (!cmd) throw new Error('Command is undefined!');

if (cmds.has(cmd)) {
    cmds.get(cmd)?.exec(argv);
} else {
    throw new Error(`Command ${cmd} not supported`);
}
