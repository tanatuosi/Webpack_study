import { WorkerAbilityTestActionType } from '../../utils/action_type';
import { WorkerAbilityTestPayload, WorkerAbilityTestReponse } from '../../utils/payload_type';

export class WorkerAbilityTestWorkerThreadAction extends BI.Workers.WorkerBaseAction {
    protected addActionHandler(): void {
        this.controller.addActionHandler(
            WorkerAbilityTestActionType.CommunicationTest,
            this.communicationTest.bind(this)
        );
    }

    /**
     * 通信能力检测的处理器
     */
    private communicationTest(
        payload: WorkerAbilityTestPayload['CommunicationTest']
    ): WorkerAbilityTestReponse['CommunicationTest'] {
        const mainThreadPostTime = payload;
        // 收到主线程信息的耗时
        const workerGetMessageDuration = Date.now() - mainThreadPostTime;

        return workerGetMessageDuration;
    }
}
