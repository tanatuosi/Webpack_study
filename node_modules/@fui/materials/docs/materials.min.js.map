{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/lodash/isArray.js","webpack:///./typescript/core/decorator.ts","webpack:///./node_modules/@chevrotain/gast/lib/src/api.js","webpack:///./node_modules/lodash/forEach.js","webpack:///./node_modules/lodash/map.js","webpack:///./node_modules/lodash/keys.js","webpack:///./node_modules/chevrotain/lib/src/parse/parser/parser.js","webpack:///./node_modules/lodash/has.js","webpack:///./node_modules/lodash/isArrayLike.js","webpack:///./node_modules/lodash/isEmpty.js","webpack:///./node_modules/lodash/_root.js","webpack:///./node_modules/lodash/isObject.js","webpack:///./node_modules/lodash/isObjectLike.js","webpack:///./node_modules/lodash/_baseIteratee.js","webpack:///./typescript/foundation/parameter/parameter_input/input/input.service.ts","webpack:///./node_modules/lodash/values.js","webpack:///./node_modules/lodash/flatten.js","webpack:///./node_modules/lodash/clone.js","webpack:///./node_modules/lodash/includes.js","webpack:///./node_modules/lodash/_getNative.js","webpack:///./node_modules/lodash/_baseGetTag.js","webpack:///./node_modules/lodash/_baseEach.js","webpack:///./node_modules/lodash/isUndefined.js","webpack:///./node_modules/lodash/reduce.js","webpack:///./node_modules/lodash/_getTag.js","webpack:///./node_modules/lodash/_Symbol.js","webpack:///./node_modules/chevrotain/lib/src/scan/tokens_public.js","webpack:///./node_modules/chevrotain/lib/src/scan/tokens.js","webpack:///./typescript/foundation/formula/inserter/inserter.basic.ts","webpack:///./node_modules/lodash/_isPrototype.js","webpack:///./node_modules/lodash/isFunction.js","webpack:///./node_modules/lodash/_baseUnary.js","webpack:///./node_modules/lodash/_arrayMap.js","webpack:///./node_modules/lodash/eq.js","webpack:///./node_modules/lodash/_toKey.js","webpack:///./node_modules/lodash/identity.js","webpack:///./node_modules/lodash/_copyObject.js","webpack:///./node_modules/@chevrotain/utils/lib/src/api.js","webpack:///./node_modules/lodash/toInteger.js","webpack:///./node_modules/lodash/isString.js","webpack:///./node_modules/lodash/first.js","webpack:///./node_modules/chevrotain/lib/src/parse/exceptions_public.js","webpack:///./src/js/components/foundation/table/widget/stickytable/stickytable.row.js","webpack:///./src/js/components/foundation/editor/formula/token.js","webpack:///(webpack)/buildin/module.js","webpack:///./typescript/foundation/formula/formula.service.ts","webpack:///./typescript/foundation/formula/formula.constants.ts","webpack:///./node_modules/chevrotain/lib/src/api.js","webpack:///./node_modules/lodash/isArguments.js","webpack:///./node_modules/lodash/isBuffer.js","webpack:///./node_modules/lodash/_nodeUtil.js","webpack:///./node_modules/lodash/_ListCache.js","webpack:///./node_modules/lodash/_assocIndexOf.js","webpack:///./node_modules/lodash/_nativeCreate.js","webpack:///./node_modules/lodash/_getMapData.js","webpack:///./node_modules/lodash/_isIndex.js","webpack:///./node_modules/lodash/_castPath.js","webpack:///./node_modules/lodash/isSymbol.js","webpack:///./node_modules/lodash/_assignValue.js","webpack:///./node_modules/lodash/keysIn.js","webpack:///./node_modules/lodash/assign.js","webpack:///./node_modules/lodash/_isIterateeCall.js","webpack:///./node_modules/lodash/every.js","webpack:///./node_modules/chevrotain/lib/src/scan/lexer_public.js","webpack:///./node_modules/lodash/compact.js","webpack:///./node_modules/chevrotain/lib/src/parse/errors_public.js","webpack:///./node_modules/chevrotain/lib/src/parse/grammar/lookahead.js","webpack:///./node_modules/chevrotain/lib/src/parse/grammar/interpreter.js","webpack:///(webpack)/buildin/global.js","webpack:///./src/js/components/foundation/editor/formula/FormulaParser.js","webpack:///./src/js/components/foundation/editor/formula/FormulaInterpreter.js","webpack:///./src/js/components/foundation/table/widget/stickytable/stickytable.header.js","webpack:///./src/js/components/foundation/table/widget/stickytable/stickytable.layout.js","webpack:///./node_modules/lodash/_baseKeys.js","webpack:///./node_modules/lodash/_Map.js","webpack:///./node_modules/lodash/isLength.js","webpack:///./node_modules/lodash/isTypedArray.js","webpack:///./node_modules/lodash/_Stack.js","webpack:///./node_modules/lodash/_MapCache.js","webpack:///./node_modules/lodash/_SetCache.js","webpack:///./node_modules/lodash/_cacheHas.js","webpack:///./node_modules/lodash/_setToArray.js","webpack:///./node_modules/lodash/_arrayPush.js","webpack:///./node_modules/lodash/_getSymbols.js","webpack:///./node_modules/lodash/_arrayFilter.js","webpack:///./node_modules/lodash/get.js","webpack:///./node_modules/lodash/_baseGet.js","webpack:///./node_modules/lodash/_isKey.js","webpack:///./node_modules/lodash/_baseAssignValue.js","webpack:///./node_modules/lodash/_cloneArrayBuffer.js","webpack:///./node_modules/chevrotain/lib/src/parse/grammar/rest.js","webpack:///./node_modules/lodash/drop.js","webpack:///./node_modules/lodash/_baseSlice.js","webpack:///./node_modules/@chevrotain/gast/lib/src/model.js","webpack:///./node_modules/lodash/_baseRest.js","webpack:///./node_modules/lodash/some.js","webpack:///./node_modules/lodash/_baseIndexOf.js","webpack:///./node_modules/lodash/_baseFlatten.js","webpack:///./node_modules/lodash/uniq.js","webpack:///./node_modules/lodash/noop.js","webpack:///./node_modules/regexp-to-ast/lib/regexp-to-ast.js","webpack:///./node_modules/lodash/reject.js","webpack:///./node_modules/lodash/difference.js","webpack:///./node_modules/lodash/find.js","webpack:///./node_modules/lodash/filter.js","webpack:///./node_modules/chevrotain/lib/src/scan/reg_exp_parser.js","webpack:///./node_modules/lodash/last.js","webpack:///./node_modules/lodash/dropRight.js","webpack:///./node_modules/chevrotain/lib/src/parse/grammar/keys.js","webpack:///./node_modules/lodash/_hasUnicode.js","webpack:///./typescript/foundation/parameter/parameter_header/parameter_header.constant.ts","webpack:///./src/js/components/foundation/editor/formula/FormulaCheck.js","webpack:///./src/js/components/foundation/editor/formula/FunctionCheck.js","webpack:///./src/js/components/foundation.js","webpack:///./src/js/components/core/proto/date.js","webpack:///./src/js/components/core/proto/function.js","webpack:///./src/js/components/core/proto/number.js","webpack:///./src/js/components/core/proto/string.js","webpack:///./src/js/components/core/utils/bom.js","webpack:///./src/js/components/core/utils/md5.js","webpack:///./src/js/components/core/utils/sm4.js","webpack:///./src/js/components/core/utils/validator.js","webpack:///./src/js/components/foundation/combo/searchicontextvaluecombo/searchicontextvaluecombo.js","webpack:///./src/js/components/foundation/combo/searchicontextvaluecombo/trigger.searchicontextvaluecombo.js","webpack:///./src/js/components/foundation/controller/controller.fullscreen.js","webpack:///./src/js/components/foundation/filter/abstractitem/filter.abstract.item.js","webpack:///./src/js/components/foundation/filter/expander/and.or.expander.js","webpack:///./src/js/components/foundation/filter/expander/filter.expander.js","webpack:///./src/js/components/foundation/filter/filter.js","webpack:///./src/js/components/foundation/filter/filter.list.js","webpack:///./src/js/components/foundation/filter/filter.model.js","webpack:///./src/js/components/foundation/filter/operation/filter.operation.js","webpack:///./src/js/components/foundation/filter/operation/filter.operation.model.js","webpack:///./src/js/components/foundation/filter/operation/filter.operation.switcher.js","webpack:///./src/js/components/foundation/filter/pane/filter.pane.js","webpack:///./src/js/components/foundation/form/form.js","webpack:///./src/js/components/foundation/form/item/error.item.js","webpack:///./src/js/components/foundation/form/item/form.item.js","webpack:///./src/js/components/foundation/function.js","webpack:///./src/js/components/foundation/label/warning.label.js","webpack:///./src/js/components/foundation/linesegmentbutton/line_segment_button.js","webpack:///./src/js/components/foundation/list/item/tree.item.js","webpack:///./src/js/components/foundation/list/list.grid.js","webpack:///./src/js/components/foundation/list/list.tree.js","webpack:///./src/js/components/foundation/list/node/tree.node.js","webpack:///./src/js/components/foundation/pane/loading.pane.js","webpack:///./src/js/components/foundation/resize/resizecontainer.htape.js","webpack:///./src/js/components/foundation/resize/resizecontainer.js","webpack:///./src/js/components/foundation/resize/resizecontainer.vtape.js","webpack:///./src/js/components/foundation/scrollbar/scrolbar.container.js","webpack:///./src/js/components/foundation/select/color/combo/item/select.color.item.js","webpack:///./src/js/components/foundation/select/color/combo/popup/select.color.popup.js","webpack:///./src/js/components/foundation/select/color/combo/select.color.combo.js","webpack:///./src/js/components/foundation/select/color/combo/select.color.combo.model.js","webpack:///./src/js/components/foundation/select/color/combo/trigger/select.color.trigger.js","webpack:///./src/js/components/foundation/select/color/combo/wrapper/select.color.item.wrapper.js","webpack:///./src/js/components/foundation/step/item/steps.item.js","webpack:///./src/js/components/foundation/step/steps.constant.js","webpack:///./src/js/components/foundation/step/steps.js","webpack:///./src/js/components/foundation/table/base/charwidth/charwidth.constant.js","webpack:///./src/js/components/foundation/table/base/collection.dynamic.js","webpack:///./src/js/components/foundation/table/base/native.scrollbar.js","webpack:///./src/js/components/foundation/table/base/sortable/table.sortable.js","webpack:///./src/js/components/foundation/table/base/sortable/table.sortable.quickselect.js","webpack:///./src/js/components/foundation/table/base/sortable/table.sortable.scrollauto.js","webpack:///./src/js/components/foundation/table/base/sortable/table.sortable.style.js","webpack:///./src/js/components/foundation/table/base/table.cell.js","webpack:///./src/js/components/foundation/table/base/table.collection.cell.js","webpack:///./src/js/components/foundation/table/base/table.collection.js","webpack:///./src/js/components/foundation/table/base/table.collection.quick.js","webpack:///./src/js/components/foundation/table/base/table.collection2.autoheight.js","webpack:///./src/js/components/foundation/table/base/table.dynamic.collection.js","webpack:///./src/js/components/foundation/table/base/table.grid.cell.js","webpack:///./src/js/components/foundation/table/base/table.grid.js","webpack:///./src/js/components/foundation/table/base/table.grid.quick.js","webpack:///./src/js/components/foundation/table/base/table.grid.scrollbar.js","webpack:///./src/js/components/foundation/table/base/table.grid2.autoheight.js","webpack:///./src/js/components/foundation/table/base/table.header.cell.js","webpack:///./src/js/components/foundation/table/base/table.js","webpack:///./src/js/components/foundation/table/base/table.resizable.cell.js","webpack:///./src/js/components/foundation/table/base/table.resizable.js","webpack:///./src/js/components/foundation/table/case/table.adaptive.columnsize.js","webpack:///./src/js/components/foundation/table/case/table.adaptive.js","webpack:///./src/js/components/foundation/table/case/table.dynamicsummarylayertree.js","webpack:///./src/js/components/foundation/table/case/table.dynamicsummarytree.js","webpack:///./src/js/components/foundation/table/case/table.layertree.cell.js","webpack:///./src/js/components/foundation/table/case/table.layertree.js","webpack:///./src/js/components/foundation/table/case/table.style.cell.js","webpack:///./src/js/components/foundation/table/case/table.tree.js","webpack:///./src/js/components/foundation/table/component/style_table.js","webpack:///./src/js/components/foundation/table/helper.scroll.js","webpack:///./src/js/components/foundation/table/sequencetable/base/treenumber.sequencetable.js","webpack:///./src/js/components/foundation/table/sequencetable/dynamicnumber.sequencetable.js","webpack:///./src/js/components/foundation/table/widget/pagetable/pagetable.cell.js","webpack:///./src/js/components/foundation/table/widget/pagetable/pagetable.js","webpack:///./src/js/components/foundation/table/widget/previewtable/previewtable.cell.js","webpack:///./src/js/components/foundation/table/widget/previewtable/previewtable.header.cell.js","webpack:///./src/js/components/foundation/table/widget/previewtable/previewtable.js","webpack:///./src/js/components/foundation/table/widget/sequence_table/listnumber.sequencetable.js","webpack:///./src/js/components/foundation/table/widget/sequence_table/sequencetable.js","webpack:///./src/js/components/foundation/table/widget/spread_table/sequencetable.grid.spread.js","webpack:///./src/js/components/foundation/table/widget/spread_table/sequencetable.layer.spread.js","webpack:///./src/js/components/foundation/table/widget/spread_table/sequencetable.list.spread.js","webpack:///./src/js/components/foundation/table/widget/spread_table/sequencetable.spread.js","webpack:///./src/js/components/foundation/table/widget/stickytable/stickytable.js","webpack:///./src/js/components/foundation/watermark/canvas/watermark.canvas.js","webpack:///./src/js/components/foundation/watermark/div/watermark.div.js","webpack:///./node_modules/script-loader/addScript.js","webpack:///./node_modules/chevrotain/lib/src/version.js","webpack:///./node_modules/lodash/_overArg.js","webpack:///./node_modules/lodash/_freeGlobal.js","webpack:///./node_modules/lodash/_toSource.js","webpack:///./node_modules/lodash/_Set.js","webpack:///./node_modules/lodash/_baseIsEqual.js","webpack:///./node_modules/lodash/_equalArrays.js","webpack:///./node_modules/lodash/_arraySome.js","webpack:///./node_modules/lodash/_Uint8Array.js","webpack:///./node_modules/lodash/_getAllKeys.js","webpack:///./node_modules/lodash/_baseGetAllKeys.js","webpack:///./node_modules/lodash/stubArray.js","webpack:///./node_modules/lodash/_arrayLikeKeys.js","webpack:///./node_modules/lodash/_isStrictComparable.js","webpack:///./node_modules/lodash/_matchesStrictComparable.js","webpack:///./node_modules/lodash/toString.js","webpack:///./node_modules/lodash/_hasPath.js","webpack:///./node_modules/lodash/_baseProperty.js","webpack:///./node_modules/lodash/_arrayEach.js","webpack:///./node_modules/lodash/_defineProperty.js","webpack:///./node_modules/lodash/_getSymbolsIn.js","webpack:///./node_modules/lodash/_getPrototype.js","webpack:///./node_modules/lodash/_getAllKeysIn.js","webpack:///./node_modules/lodash/isRegExp.js","webpack:///./node_modules/lodash/pickBy.js","webpack:///./node_modules/lodash/_baseFindIndex.js","webpack:///./node_modules/chevrotain/lib/src/parse/grammar/first.js","webpack:///./node_modules/lodash/_arrayIncludes.js","webpack:///./node_modules/lodash/_arrayIncludesWith.js","webpack:///./node_modules/chevrotain/lib/src/parse/constants.js","webpack:///./node_modules/chevrotain/lib/src/scan/lexer.js","webpack:///./node_modules/lodash/_baseFilter.js","webpack:///./node_modules/lodash/findIndex.js","webpack:///./node_modules/lodash/defaults.js","webpack:///./node_modules/chevrotain/lib/src/scan/lexer_errors_public.js","webpack:///./node_modules/chevrotain/lib/src/parse/grammar/checks.js","webpack:///./node_modules/lodash/groupBy.js","webpack:///./node_modules/chevrotain/lib/src/parse/parser/traits/recoverable.js","webpack:///./src/js/constant/enum.js","webpack:///./src/js/components/config.js","webpack:///./src/js/components/foundation/clipboard/clipboard.js","webpack:///./src/js/components/foundation/clipboard/index.js","webpack:///./src/js/components/foundation/draggable/draggable.js","webpack:///./src/js/components/foundation/editor/code/editor.code.js","webpack:///./src/js/components/foundation/editor/formula/codemirror/extension/beautify/beautify.js","webpack:///./src/js/components/foundation/editor/formula/codemirror/extension/beautify/output.js","webpack:///./src/js/components/foundation/editor/formula/codemirror/extension/beautify/token.js","webpack:///./src/js/components/foundation/editor/formula/codemirror/extension/hint/formula-hint.js","webpack:///./src/js/components/foundation/editor/formula/codemirror/extension/hint/show-hint.js","webpack:///./src/js/components/foundation/editor/formula/codemirror/extension/matchbrackets/matchbrackets.js","webpack:///./src/js/components/foundation/editor/formula/codemirror/formula-mode.js","webpack:///./src/js/components/foundation/editor/formula/config.js","webpack:///./src/js/components/foundation/editor/formula/formulaeditor.js","webpack:///./src/js/components/foundation/editor/richeditor/bar/action.richeditor.js","webpack:///./src/js/components/foundation/editor/richeditor/bar/action.richeditor.param.js","webpack:///./src/js/components/foundation/editor/richeditor/bar/texttoolbar.js","webpack:///./src/js/components/foundation/editor/richeditor/niceditor/niceditor.js","webpack:///./src/js/components/foundation/editor/richeditor/plugins/backgroundchooser/trigger.backgroundchooser.js","webpack:///./src/js/components/foundation/editor/richeditor/plugins/button.align.center.js","webpack:///./src/js/components/foundation/editor/richeditor/plugins/button.align.left.js","webpack:///./src/js/components/foundation/editor/richeditor/plugins/button.align.right.js","webpack:///./src/js/components/foundation/editor/richeditor/plugins/button.bold.js","webpack:///./src/js/components/foundation/editor/richeditor/plugins/button.italic.js","webpack:///./src/js/components/foundation/editor/richeditor/plugins/button.param.js","webpack:///./src/js/components/foundation/editor/richeditor/plugins/button.underline.js","webpack:///./src/js/components/foundation/editor/richeditor/plugins/colorchooser/trigger.colorchooser.js","webpack:///./src/js/components/foundation/editor/richeditor/plugins/combo.backgroundcolorchooser.js","webpack:///./src/js/components/foundation/editor/richeditor/plugins/combo.colorchooser.js","webpack:///./src/js/components/foundation/editor/richeditor/plugins/combo.fontfamily.js","webpack:///./src/js/components/foundation/editor/richeditor/plugins/combo.sizechooser.js","webpack:///./src/js/components/foundation/editor/richeditor/plugins/richeditor.constants.js","webpack:///./src/js/components/foundation/editor/richeditor/richeditor.js","webpack:///./src/js/components/foundation/editor/sql/codemirrior/sql-hint.js","webpack:///./src/js/components/foundation/editor/sql/codemirrior/sql-mode.js","webpack:///./src/js/components/foundation/editor/sql/editor.sql.js","webpack:///./src/js/components/foundation/formulainsert/fieldpane/pane.field.js","webpack:///./src/js/components/foundation/formulainsert/fieldpane/pane.field.model.js","webpack:///./src/js/components/foundation/formulainsert/fieldpane/tree.field.item.js","webpack:///./src/js/components/foundation/formulainsert/fieldpane/tree.field.js","webpack:///./src/js/components/foundation/formulainsert/functiondescribe/pane.functiondescribe.js","webpack:///./src/js/components/foundation/formulainsert/functionpane/function/tree.function.item.js","webpack:///./src/js/components/foundation/formulainsert/functionpane/function/tree.function.js","webpack:///./src/js/components/foundation/formulainsert/functionpane/function/tree.function.model.js","webpack:///./src/js/components/foundation/formulainsert/functionpane/pane.function.js","webpack:///./src/js/components/foundation/formulainsert/functionpane/pane.function.model.js","webpack:///./src/js/components/foundation/formulainsert/group.symbol.js","webpack:///./src/js/components/foundation/formulainsert/insert.formula.js","webpack:///./src/js/components/foundation/formulainsert/insert.formula.model.js","webpack:///./src/js/components/foundation/formulainsert/insert.formula.service.js","webpack:///./src/js/components/foundation/formulainsert/textfuncbutton.js","webpack:///./src/js/components/foundation/svg/raphael.js","webpack:///./src/js/components/foundation/svg/svg.js","webpack:///./node_modules/@shopify/draggable/lib/draggable.bundle.js","webpack:///./typescript/bundle.ts","webpack:///external \"BI.CodeMirror\"","webpack:///./typescript/foundation/formula/item/item.function.ts","webpack:///./typescript/foundation/formula/item/item.var.ts","webpack:///./typescript/foundation/formula/inserter/inserter.complex.ts","webpack:///./typescript/foundation/formula/inserter/inserter.regular.ts","webpack:///./typescript/foundation/formula/formula.ts","webpack:///./typescript/foundation/formula/formula.model.ts","webpack:///./typescript/foundation/parameter/parameter.ts","webpack:///./typescript/foundation/parameter/parameter.model.ts","webpack:///./typescript/foundation/parameter/parameter_input/parameter_input.ts","webpack:///./typescript/foundation/parameter/parameter_input/input/input.ts","webpack:///./typescript/foundation/parameter/parameter_input/input/input_boolean.ts","webpack:///./typescript/foundation/parameter/parameter_input/input/input_date.ts","webpack:///./typescript/foundation/parameter/parameter_input/input/input_int.ts","webpack:///./typescript/foundation/parameter/parameter_input/input/input_double.ts","webpack:///./typescript/foundation/parameter/parameter_input/input/input_string.ts","webpack:///./typescript/foundation/parameter/parameter_input/input/input_formula.ts","webpack:///./typescript/foundation/parameter/parameter_input/parameter_input.model.ts","webpack:///./typescript/foundation/parameter/parameter_header/parameter_header.ts","webpack:///./typescript/utils/socket.ts","webpack:///./src/js/components/foundation/editor/formula/codemirror/codemirror.js","webpack:///./src/js/components/foundation/editor/formula/codemirror/codemirror.js?dc20","webpack:///./node_modules/lodash/_nativeKeys.js","webpack:///./node_modules/lodash/_DataView.js","webpack:///./node_modules/lodash/_baseIsNative.js","webpack:///./node_modules/lodash/_getRawTag.js","webpack:///./node_modules/lodash/_objectToString.js","webpack:///./node_modules/lodash/_isMasked.js","webpack:///./node_modules/lodash/_coreJsData.js","webpack:///./node_modules/lodash/_getValue.js","webpack:///./node_modules/lodash/_Promise.js","webpack:///./node_modules/lodash/_WeakMap.js","webpack:///./node_modules/lodash/_baseIsArguments.js","webpack:///./node_modules/lodash/stubFalse.js","webpack:///./node_modules/lodash/_baseIsTypedArray.js","webpack:///./node_modules/lodash/_baseMatches.js","webpack:///./node_modules/lodash/_baseIsMatch.js","webpack:///./node_modules/lodash/_listCacheClear.js","webpack:///./node_modules/lodash/_listCacheDelete.js","webpack:///./node_modules/lodash/_listCacheGet.js","webpack:///./node_modules/lodash/_listCacheHas.js","webpack:///./node_modules/lodash/_listCacheSet.js","webpack:///./node_modules/lodash/_stackClear.js","webpack:///./node_modules/lodash/_stackDelete.js","webpack:///./node_modules/lodash/_stackGet.js","webpack:///./node_modules/lodash/_stackHas.js","webpack:///./node_modules/lodash/_stackSet.js","webpack:///./node_modules/lodash/_mapCacheClear.js","webpack:///./node_modules/lodash/_Hash.js","webpack:///./node_modules/lodash/_hashClear.js","webpack:///./node_modules/lodash/_hashDelete.js","webpack:///./node_modules/lodash/_hashGet.js","webpack:///./node_modules/lodash/_hashHas.js","webpack:///./node_modules/lodash/_hashSet.js","webpack:///./node_modules/lodash/_mapCacheDelete.js","webpack:///./node_modules/lodash/_isKeyable.js","webpack:///./node_modules/lodash/_mapCacheGet.js","webpack:///./node_modules/lodash/_mapCacheHas.js","webpack:///./node_modules/lodash/_mapCacheSet.js","webpack:///./node_modules/lodash/_baseIsEqualDeep.js","webpack:///./node_modules/lodash/_setCacheAdd.js","webpack:///./node_modules/lodash/_setCacheHas.js","webpack:///./node_modules/lodash/_equalByTag.js","webpack:///./node_modules/lodash/_mapToArray.js","webpack:///./node_modules/lodash/_equalObjects.js","webpack:///./node_modules/lodash/_baseTimes.js","webpack:///./node_modules/lodash/_getMatchData.js","webpack:///./node_modules/lodash/_baseMatchesProperty.js","webpack:///./node_modules/lodash/_stringToPath.js","webpack:///./node_modules/lodash/_memoizeCapped.js","webpack:///./node_modules/lodash/memoize.js","webpack:///./node_modules/lodash/_baseToString.js","webpack:///./node_modules/lodash/hasIn.js","webpack:///./node_modules/lodash/_baseHasIn.js","webpack:///./node_modules/lodash/property.js","webpack:///./node_modules/lodash/_basePropertyDeep.js","webpack:///./node_modules/lodash/_baseMap.js","webpack:///./node_modules/lodash/_baseForOwn.js","webpack:///./node_modules/lodash/_baseFor.js","webpack:///./node_modules/lodash/_createBaseFor.js","webpack:///./node_modules/lodash/_createBaseEach.js","webpack:///./node_modules/lodash/_castFunction.js","webpack:///./node_modules/lodash/_baseValues.js","webpack:///./node_modules/lodash/_baseHas.js","webpack:///./node_modules/lodash/_baseClone.js","webpack:///./node_modules/lodash/_baseAssign.js","webpack:///./node_modules/lodash/_baseAssignIn.js","webpack:///./node_modules/lodash/_baseKeysIn.js","webpack:///./node_modules/lodash/_nativeKeysIn.js","webpack:///./node_modules/lodash/_cloneBuffer.js","webpack:///./node_modules/lodash/_copyArray.js","webpack:///./node_modules/lodash/_copySymbols.js","webpack:///./node_modules/lodash/_copySymbolsIn.js","webpack:///./node_modules/lodash/_initCloneArray.js","webpack:///./node_modules/lodash/_initCloneByTag.js","webpack:///./node_modules/lodash/_cloneDataView.js","webpack:///./node_modules/lodash/_cloneRegExp.js","webpack:///./node_modules/lodash/_cloneSymbol.js","webpack:///./node_modules/lodash/_cloneTypedArray.js","webpack:///./node_modules/lodash/_initCloneObject.js","webpack:///./node_modules/lodash/_baseCreate.js","webpack:///./node_modules/lodash/isMap.js","webpack:///./node_modules/lodash/_baseIsMap.js","webpack:///./node_modules/lodash/isSet.js","webpack:///./node_modules/lodash/_baseIsSet.js","webpack:///./node_modules/@chevrotain/utils/lib/src/print.js","webpack:///./node_modules/@chevrotain/utils/lib/src/timer.js","webpack:///./node_modules/@chevrotain/utils/lib/src/to-fast-properties.js","webpack:///./node_modules/chevrotain/lib/src/parse/grammar/follow.js","webpack:///./node_modules/lodash/toFinite.js","webpack:///./node_modules/lodash/toNumber.js","webpack:///./node_modules/lodash/_baseTrim.js","webpack:///./node_modules/lodash/_trimmedEndIndex.js","webpack:///./node_modules/lodash/_baseIsRegExp.js","webpack:///./node_modules/lodash/_basePickBy.js","webpack:///./node_modules/lodash/_baseSet.js","webpack:///./node_modules/lodash/_createAssigner.js","webpack:///./node_modules/lodash/_overRest.js","webpack:///./node_modules/lodash/_apply.js","webpack:///./node_modules/lodash/_setToString.js","webpack:///./node_modules/lodash/_baseSetToString.js","webpack:///./node_modules/lodash/constant.js","webpack:///./node_modules/lodash/_shortOut.js","webpack:///./node_modules/@chevrotain/gast/lib/src/visitor.js","webpack:///./node_modules/@chevrotain/gast/lib/src/helpers.js","webpack:///./node_modules/lodash/_baseSome.js","webpack:///./node_modules/lodash/_arrayEvery.js","webpack:///./node_modules/lodash/_baseEvery.js","webpack:///./node_modules/lodash/_baseIsNaN.js","webpack:///./node_modules/lodash/_strictIndexOf.js","webpack:///./node_modules/lodash/_isFlattenable.js","webpack:///./node_modules/lodash/_baseUniq.js","webpack:///./node_modules/lodash/_createSet.js","webpack:///./node_modules/lodash/head.js","webpack:///./node_modules/lodash/negate.js","webpack:///./node_modules/lodash/_baseDifference.js","webpack:///./node_modules/lodash/isArrayLikeObject.js","webpack:///./node_modules/lodash/indexOf.js","webpack:///./node_modules/lodash/_createFind.js","webpack:///./node_modules/lodash/_arrayReduce.js","webpack:///./node_modules/lodash/_baseReduce.js","webpack:///./node_modules/chevrotain/lib/src/scan/reg_exp.js","webpack:///./node_modules/chevrotain/lib/src/parse/grammar/gast/gast_resolver_public.js","webpack:///./node_modules/chevrotain/lib/src/parse/grammar/resolver.js","webpack:///./node_modules/lodash/_createAggregator.js","webpack:///./node_modules/lodash/_arrayAggregator.js","webpack:///./node_modules/lodash/_baseAggregator.js","webpack:///./node_modules/lodash/flatMap.js","webpack:///./node_modules/chevrotain/lib/src/parse/parser/traits/looksahead.js","webpack:///./node_modules/chevrotain/lib/src/parse/parser/traits/tree_builder.js","webpack:///./node_modules/chevrotain/lib/src/parse/cst/cst.js","webpack:///./node_modules/chevrotain/lib/src/parse/cst/cst_visitor.js","webpack:///./node_modules/chevrotain/lib/src/lang/lang_extensions.js","webpack:///./node_modules/chevrotain/lib/src/parse/parser/traits/lexer_adapter.js","webpack:///./node_modules/chevrotain/lib/src/parse/parser/traits/recognizer_api.js","webpack:///./node_modules/chevrotain/lib/src/parse/parser/traits/recognizer_engine.js","webpack:///./node_modules/chevrotain/lib/src/parse/parser/traits/error_handler.js","webpack:///./node_modules/chevrotain/lib/src/parse/parser/traits/context_assist.js","webpack:///./node_modules/chevrotain/lib/src/parse/parser/traits/gast_recorder.js","webpack:///./node_modules/chevrotain/lib/src/parse/parser/traits/perf_tracer.js","webpack:///./node_modules/chevrotain/lib/src/parse/parser/utils/apply_mixins.js","webpack:///./node_modules/@chevrotain/cst-dts-gen/lib/src/api.js","webpack:///./node_modules/@chevrotain/cst-dts-gen/lib/src/model.js","webpack:///./node_modules/@chevrotain/cst-dts-gen/lib/src/generate.js","webpack:///./node_modules/lodash/upperFirst.js","webpack:///./node_modules/lodash/_createCaseFirst.js","webpack:///./node_modules/lodash/_castSlice.js","webpack:///./node_modules/lodash/_stringToArray.js","webpack:///./node_modules/lodash/_asciiToArray.js","webpack:///./node_modules/lodash/_unicodeToArray.js","webpack:///./node_modules/chevrotain/lib/src/diagrams/render_public.js","webpack:///./node_modules/lodash/size.js","webpack:///./node_modules/lodash/_stringSize.js","webpack:///./node_modules/lodash/_asciiSize.js","webpack:///./node_modules/lodash/_unicodeSize.js","webpack:///./src/js/components/foundation/svg/raphael.js?7fb9","webpack:///./ui/js/index.js"],"names":["installedModules","__webpack_require__","moduleId","module","i","l","exports","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","isArray","Array","BI","Decorators","shortcut","Model","model","store","isSequenceProd","isBranchingProd","isOptionalProd","getProductionDslName","GAstVisitor","serializeProduction","serializeGrammar","Alternative","Alternation","RepetitionWithSeparator","RepetitionMandatoryWithSeparator","RepetitionMandatory","Repetition","Option","NonTerminal","Terminal","Rule","model_1","require","visitor_1","helpers_1","arrayEach","baseEach","castFunction","collection","iteratee","arrayMap","baseIteratee","baseMap","arrayLikeKeys","baseKeys","isArrayLike","extendStatics","b","setPrototypeOf","__extends","TypeError","String","__","this","constructor","__importDefault","mod","isEmpty_1","EmbeddedActionsParser","CstParser","Parser","EMPTY_ALT","ParserDefinitionErrorType","DEFAULT_RULE_CONFIG","DEFAULT_PARSER_CONFIG","END_OF_FILE","map_1","forEach_1","values_1","has_1","clone_1","utils_1","follow_1","tokens_public_1","errors_public_1","gast_resolver_public_1","recoverable_1","looksahead_1","tree_builder_1","lexer_adapter_1","recognizer_api_1","recognizer_engine_1","error_handler_1","context_assist_1","gast_recorder_1","perf_tracer_1","apply_mixins_1","createTokenInstance","EOF","NaN","freeze","recoveryEnabled","maxLookahead","dynamicTokensEnabled","outputCst","errorMessageProvider","defaultParserErrorProvider","nodeLocationTracking","traceInitPerf","skipValidations","recoveryValueFunc","undefined","resyncEnabled","performSelfAnalysis","parserInstance","Error","_this","TRACE_INIT","selfAnalysisDone","defErrorsMsgs","className","resolverErrors","toFastProperties","enableRecording","definedRulesNames","currRuleName","recordedRuleGast","originalGrammarAction","concat","topLevelRuleRecord","gastProductionsCache","disableRecording","resolveGrammar","rules","definitionErrors","validationErrors","validateGrammar","tokenTypes","tokensMap","errMsgProvider","defaultGrammarValidatorErrorProvider","grammarName","allFollows","computeAllProdsFollows","resyncFollows","preComputeLookaheadFunctions","DEFER_DEFINITION_ERRORS_HANDLING","defError","message","join","tokenVocabulary","config","that","initErrorHandler","initLexerAdapter","initLooksAhead","initRecognizerEngine","initRecoverable","initTreeBuilder","initContentAssist","initGastRecorder","initPerformanceTracer","applyMixins","Recoverable","LooksAhead","TreeBuilder","LexerAdapter","RecognizerEngine","RecognizerApi","ErrorHandler","ContentAssist","GastRecorder","PerformanceTracer","_super","configClone","baseHas","hasPath","path","isFunction","isLength","length","getTag","isArguments","isBuffer","isPrototype","isTypedArray","splice","tag","size","freeGlobal","freeSelf","self","root","Function","type","baseMatches","baseMatchesProperty","identity","inputWidget","inputs","isNull","xtype","target","baseValues","keys","baseFlatten","array","baseClone","baseIndexOf","isString","toInteger","values","nativeMax","Math","max","fromIndex","guard","indexOf","baseIsNative","getValue","getRawTag","objectToString","symToStringTag","baseForOwn","arrayReduce","baseReduce","accumulator","func","initAccum","arguments","DataView","Map","Promise","Set","WeakMap","baseGetTag","toSource","mapTag","promiseTag","setTag","weakMapTag","dataViewTag","dataViewCtorString","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","ArrayBuffer","resolve","result","Ctor","ctorString","isString_1","tokenMatcher","createToken","hasTokenLabel","tokenName","tokenLabel","isUndefined_1","lexer_public_1","tokens_1","obj","LABEL","tokType","PARENT","CATEGORIES","GROUP","PUSH_MODE","POP_MODE","LONGER_ALT","LINE_BREAKS","START_CHARS_HINT","createTokenInternal","pattern","tokenType","PATTERN","augmentTokenTypes","Lexer","NA","image","startOffset","endOffset","startLine","endLine","startColumn","endColumn","tokenTypeIdx","token","tokenStructuredMatcher","isTokenType","hasExtendingTokensTypesMapProperty","hasExtendingTokensTypesProperty","hasCategoriesProperty","hasShortKeyProperty","singleAssignCategoriesToksMap","assignCategoriesMapProp","assignCategoriesTokensProp","assignTokenDefaultProps","expandCategories","tokenIdxToClass","tokenShortNameIdx","tokenStructuredMatcherNoCategories","compact_1","isArray_1","flatten_1","difference_1","includes_1","categories","searching","currTokType","newCategories","categoryMatches","categoryMatchesMap","val","push","nextNode","pathNode","nextCategory","newPath","tokInstance","tokConstructor","instanceType","isParent","tokenTypesAndParents","paramRegex","FormulaInserter","formula","getToolbarLayout","Layout","render","VTapeLayout","items","el","FormulaEditor","cls","ref","_ref","formulaEditor","watermark","i18nText","listeners","eventName","EVENT_CHANGE","action","validate","list","fireEvent","first","hint","height","mounted","setValue","options","insertFunction","insertField","hideTip","setValidation","data","validation","showTip","refresh","insertFormula","analyzeContent","v","match","paramFormatter","getVarDisplayNameByValue","position","fieldArray","functionArray","lineNum","offset","valueString","wrapChar","isNotNull","line","ch","getParamWrap","forEach","str","fieldId","formattedParam","fieldName","fromPos","endPos","test","substring","replaceAll","CodeMirror","Pos","from","to","invalid","text","isBelong2FormulaFunction","insertString","each","_idx","field","markField","markFunction","Widget","objectProto","isObject","index","other","isSymbol","assignValue","baseAssignValue","source","props","customizer","isNew","newValue","timer","PRINT_ERROR","PRINT_WARNING","print_1","timer_1","to_fast_properties_1","toFinite","remainder","isObjectLike","EarlyExitException","NotAllInputParsedException","NoViableAltException","MismatchedTokenException","isRecognitionException","MISMATCHED_TOKEN_EXCEPTION","NO_VIABLE_ALT_EXCEPTION","EARLY_EXIT_EXCEPTION","NOT_ALL_INPUT_PARSED_EXCEPTION","RECOGNITION_EXCEPTION_NAMES","error","RecognitionException","_newTarget","resyncedTokens","captureStackTrace","previousToken","DEFAULT_CONFIG","lineHeight","textAlign","whiteSpace","expandIcon","collapseIcon","sortableIcon","StickyTableRow","inherit","baseCls","tagName","id","dimension","layer","columnSize","minColumnSize","maxColumnSize","freezeCols","draggable","checkable","checked","half","prevComponent","layout","getItems","createWidget","includes","css","minWidth","maxWidth","extraCls","width","_lgap","arrow","handler","Controller","open","Events","COLLAPSE","EXPAND","iconCls","_getExpandIcon","checkbox","selected","halfSelected","iconWrapperWidth","MultiSelectBar","CHANGE","map","item","isFirstCols","extend","doRedMark","apply","unRedMark","shouldUpdate","opt","some","idx","update","element","removeClass","addClass","setText","setIcon","populate","setSelected","setHalfSelected","Unary","Addition","Multiplication","Equal","Compare","WhiteSpace","group","SKIPPED","Number","Date","Boolean","Empty","Comma","Func","LParen","RParen","LSquare","RSquare","Plus","Minus","Multi","Div","LessOrEqual","GreaterOrEqual","Less","Greater","NotEqualStrict","EqualLoose","NotEqualLoose","EqualStrict","LogicNot","LogicAnd","LogicOr","BitAnd","allTokens","webpackPolyfill","deprecate","paths","children","functionName","formulaJSON","formulaJSONs","find","def","keyword","getSearchResult","transformFormulaJSONs2FunctionNames","sort","a","varName","formulaVarItem","formulaVarItemsCache","varItem","toLowerCase","isCached","vars","FormulaJSONs","JSONs","FormulaCollections","reduce","json","toUpperCase","resultMap","title","hgap","nodeLeavesMap","leaf","FORMULA_VAR_NODES","node","nodeType","pId","nodeLeaves","UUID","lgap","layoutType","LastTreeLeafItem","MidTreeLeafItem","FormulaVarItem","functionType","FormulaFunctionItem","FORMULA_VAR_TYPES","DATA_ITEMS","VARS","DATA_SET_VARS","REPORT_VARS","GLOBAL_VARS","IconArrowNode","createSyntaxDiagramsCode","clearCache","generateCstDts","defaultLexerErrorProvider","LexerDefinitionErrorType","VERSION","version_1","parser_1","exceptions_public_1","lexer_errors_public_1","gast_1","gast_2","cst_dts_gen_1","console","warn","render_public_1","baseIsArguments","propertyIsEnumerable","stubFalse","freeExports","freeModule","Buffer","nativeIsBuffer","freeProcess","process","nodeUtil","types","binding","e","listCacheClear","listCacheDelete","listCacheGet","listCacheHas","listCacheSet","ListCache","entries","clear","entry","set","has","eq","nativeCreate","isKeyable","__data__","reIsUint","isKey","stringToPath","toString","objValue","baseKeysIn","copyObject","createAssigner","assign","isIndex","arrayEvery","baseEvery","isIterateeCall","predicate","lexer_1","noop_1","last_1","reject_1","keys_1","identity_1","assign_1","reduce_1","reg_exp_parser_1","DEFAULT_LEXER_CONFIG","deferDefinitionErrorsHandling","positionTracking","lineTerminatorsPattern","lineTerminatorCharacters","ensureOptimizations","safeMode","lexerDefinition","lexerDefinitionErrors","lexerDefinitionWarning","patternIdxToConfig","charCodeToPatternIdxToConfig","modes","emptyGroups","trackStartLines","trackEndLines","hasCustom","canModeBeOptimized","phaseDesc","phaseImpl","indent","time","traceMethod","traceInitIndent","traceInitMaxIdent","log","_a","traceInitVal","Infinity","actualDefinition","allErrMessagesString","hasOnlySingleMode","allModeNames","LineTerminatorOptimizedTester","defaultMode","DEFAULT_MODE","performRuntimeChecks","performWarningRuntimeChecks","currModeValue","currModeName","currModDef","currModName","currAnalyzeResult_1","validatePatterns","analyzeTokenTypes","tracer","canBeOptimized","warningDescriptor","SUPPORT_STICKY","chopInput","matchWithTest","updateLastIndex","matchWithExec","handleModes","computeNewColumn","updateTokenEndLineColumnLocation","createFullToken","createStartOnlyToken","createOffsetOnlyToken","addToken","addTokenUsingPush","handlePayload","handlePayloadWithCustom","addTokenUsingMemberAccess","handlePayloadNoCustom","unOptimizedModes","cannotBeOptimized","modeName","clearRegExpParserCache","tokenize","initialMode","tokenizeInternal","j","matchAltImage","longerAlt","newToken","errLength","msg","getPossiblePatterns","orgText","orgLength","matchedTokensIndex","guessedNumberOfTokens","floor","matchedTokens","errors","column","groups","cloneEmptyGroups","trackLines","lineTerminatorPattern","currModePatternsLength","currCharCodeToPatternIdxToConfig","modeStack","emptyArray","getPossiblePatternsSlow","getPossiblePatternsOptimized","charCode","optimizedCharIdx","charCodeToOptimizedIndex","possiblePatterns","pop_mode","popToken","modeCanBeOptimized","msg_1","buildUnableToPopLexerModeMessage","pop","newMode","push_mode","matchedImage","nextCharCode","charCodeAt","chosenPatternIdxToConfig","chosenPatternsLength","currConfig","currPattern","payload","singleCharCode","isCustom","exec","longerAltLength","k","longerAltConfig","longerAltPattern","altPayload","imageLength","canLineTerminator","foundTerminator","numOfLTsInMatch","lastLTEndOffset","lastIndex","errorStartOffset","errorLine","errorColumn","foundResyncPoint","currConfig_1","buildUnexpectedCharactersMessage","tokens","pushMode","regExp","newLastIndex","lastLTIdx","fixForEndingInLT","lastCharIsLT","oldColumn","tokenVector","tokenToAdd","regExpArray","resIndex","defaultGrammarResolverErrorProvider","first_1","buildMismatchTokenMessage","expected","actual","expectedMsg","previous","ruleName","buildNotAllInputParsedMessage","firstRedundant","buildNoViableAltMessage","expectedPathsPerAlt","customUserDescription","errPrefix","errSuffix","allLookAheadPaths","currAltPaths","nextValidTokenSequences","currPath","currTokenType","nextValidSequenceItems","itemMsg","buildEarlyExitMessage","expectedIterationPaths","buildRuleNotFoundError","topLevelRule","undefinedRule","nonTerminalName","buildDuplicateFoundError","duplicateProds","topLevelName","duplicateProd","dslName","extraArgument","prod","terminalType","hasExplicitIndex","replace","buildNamespaceConflictError","rule","buildAlternationPrefixAmbiguityError","pathMsg","prefixPath","currTok","occurrence","alternation","ambiguityIndices","buildAlternationAmbiguityError","currtok","currMessage","buildEmptyRepetitionError","repetition","buildTokenNameError","buildEmptyAlternationError","emptyChoiceIdx","buildTooManyAlternativesError","definition","buildLeftRecursionError","pathNames","leftRecursionPath","currRule","leftRecursivePath","buildInvalidRuleNameError","buildDuplicateRuleNameError","PROD_TYPE","areTokenCategoriesNotUsed","isStrictPrefixOfPath","containsPath","getLookaheadPathsForOptionalProd","getLookaheadPathsForOr","lookAheadSequenceFromAlternatives","buildSingleAlternativeLookaheadFunction","buildAlternativesLookAheadFunc","buildLookaheadFuncForOptionalProd","buildLookaheadFuncForOr","getProdType","every_1","interpreter_1","rest_1","OPTION","REPETITION","REPETITION_MANDATORY","REPETITION_MANDATORY_WITH_SEPARATOR","REPETITION_WITH_SEPARATOR","ALTERNATION","ruleGrammar","hasPredicates","laFuncBuilder","lookAheadPaths","prodType","lookaheadBuilder","alts","choiceToAlt_1","numOfAlts","areAllOneTokenLookahead","currAlt","orAlts","predicates","GATE","currNumOfPaths","currPredicate","nextPath","currPathLength","nextToken","LA","singleTokenAlts","currExtendingType","alt","expectedTokenUniqueKey_1","choiceToAlt_2","numOfPaths","singleTokensTypes","RestWalker","RestDefinitionFinderWalker","startWalking","walk","topProd","restDef","checkIsTarget","expectedProdType","currRest","prevRest","targetOccurrence","targetProdType","walkOption","optionProd","walkAtLeastOne","atLeastOneProd","walkAtLeastOneSep","atLeastOneSepProd","walkMany","manyProd","walkManySep","manySepProd","InsideDefinitionFinderVisitor","expectedProdName","targetRef","visitOption","visitRepetition","visitRepetitionMandatory","visitRepetitionMandatoryWithSeparator","visitRepetitionWithSeparator","visitAlternation","initializeArrayOfArrays","pathToHashKeys","longerKeys","currShorterKey","categoriesKeySuffix","altsDefs","partialAlts","possiblePathsFrom","finalResult","altsHashes","dict","partialPath","currKey","newData","pathLength","currDataset","_loop_1","altIdx","currAltPathsAndSuffixes","currPathIdx","currPathPrefix","suffixDef","prefixKeys","altKnownPathsKeys","searchPathKeys","currAltIdx","otherAltKnownPathsKeys","searchIdx","currAltResult","newPartialPathsAndSuffixes","orProd","visitor","accept","insideDefVisitor","insideDef","afterDef","alternative","searchPath","compareOtherPath","otherPath","searchTok","otherTok","singleAltPaths","singlePath","prefix","otherTokType","nextPossibleTokensAfter","NextTerminalAfterAtLeastOneSepWalker","NextTerminalAfterAtLeastOneWalker","NextTerminalAfterManySepWalker","NextTerminalAfterManyWalker","AbstractNextTerminalAfterProductionWalker","NextAfterTokenWalker","AbstractNextPossibleTokensWalker","dropRight_1","drop_1","first_2","found","ruleStack","reverse","occurrenceStack","updateExpectedNext","possibleTokTypes","walkProdRef","refProd","referencedRule","nextProductionName","nextProductionOccurrence","fullRest","isAtEndOfPath","walkTerminal","terminal","nextTerminalName","nextTerminalOccurrence","restProd","lastTok","lastTokOccurrence","topRule","isEndOfRule","firstAfterMany","firstAfterManySep","firstAfterAtLeastOne","atleastOneSepProd","firstAfterfirstAfterAtLeastOneSep","targetDef","maxLength","getAlternativesForProd","alternatives","newDef","separator","initialDef","tokMatcher","maxLookAhead","EXIT_NON_TERMINAL","EXIT_NON_TERMINAL_ARR","EXIT_ALTERNATIVE","foundCompletePath","tokenVectorLength","minimalAlternativesIndex","possiblePaths","currDef","currIdx","currRuleStack","currOccurrenceStack","nextIdx","nextTokenType","nextTokenOccurrence","newRuleStack","newOccurrenceStack","nextPathWithout","nextPathWith","secondIteration","separatorGast","nthRepetition","currAltPath","newCurrOccurrenceStack","g","window","FormulaParser","RULE","SUBRULE","commaExpression","binaryExpression","MANY","CONSUME","SUBRULE2","unaryExpression","OR","c1","ALT","atomicExpression","c2","base","expr","MANY_SEP","SEP","DEF","AT_LEAST_ONE_SEP","c3","getFormulaParser","concatTokens","tokensList","sortTokensByPosition","transformType","op","left","right","isStringType","isAnyType","isNumberType","isDateType","JSON","stringify","errorType","errorText","consumeBinaryToken","sortedTokens","operands","consumeToken","resultTokens","slice","resultOperands","tempOperands","tokenMap","getType","isBooleanType","getFormulaInterpreter","BaseCstVisitorConstructor","getBaseCstVisitorConstructor","setFormula","f","applyFunc","args","funcKeys","findIndex","interpreter","validateVisitor","ctx","visit","lastCstNode","binaryTokens","tempTokens","ret","signs","sign","bol","num","date","param","startWith","isArrayType","StickyTableHeader","header","headerRowSize","sortable","tds","_formatItems","_populate","setColumnSize","getRealColumnSize","td","StickyTableLayout","mirror","table","sum","border","borderSpacing","borderCollapse","tableLayout","colgroup","_formatCol","lastDragElement","lock","lockFn","Draggable","handle","classes","debounce","on","style","transform","transitionDuration","EVENT_START_DRAG","getAttribute","sourceId","parentElement","childNodes","visibility","sourceContainer","contains","originalSource","remove","EVENT_STOP_DRAG","over","filterNodes","getFilterNodes","nextSibling","previousSibling","startPush","isNeedFreeze","attributes","dataid","setWidth","addItems","nativeKeys","baseIsTypedArray","baseUnary","nodeIsTypedArray","stackClear","stackDelete","stackGet","stackHas","stackSet","Stack","mapCacheClear","mapCacheDelete","mapCacheGet","mapCacheHas","mapCacheSet","MapCache","setCacheAdd","setCacheHas","SetCache","add","cache","arrayFilter","stubArray","nativeGetSymbols","getOwnPropertySymbols","symbol","baseGet","defaultValue","castPath","toKey","reIsDeepProp","reIsPlainProp","Uint8Array","arrayBuffer","byteLength","restForRepetitionWithSeparator","repSepProd","subProd","walkFlat","walkOr","flatProd","fullOrRest","fullAtLeastOneRest","fullAtLeastOneSepRest","fullManyRest","fullManySepRest","prodWrapper","baseSlice","start","end","AbstractProduction","isRegExp_1","pickBy_1","_definition","configurable","ignoreAmbiguities","convertDefinition","serializedTerminal","serializedNonTerminal","label","terminalLabel","topRules","overRest","setToString","arraySome","baseSome","baseFindIndex","baseIsNaN","strictIndexOf","arrayPush","isFlattenable","depth","isStrict","baseUniq","RegExpParser","saveState","input","groupIdx","restoreState","newState","consumeChar","disjunction","flags","loc","begin","global","ignoreCase","multiLine","unicode","sticky","isRegExpFlag","popChar","addFlag","peekChar","terms","isTerm","term","isAssertion","assertion","atom","ASSERT_EXISTS","ASSERT_NEVER_REACH_HERE","quantifier","isBacktracking","range","atLeast","atMost","integerIncludingZero","isDigit","greedy","dotAll","atomEscape","characterClass","isPatternCharacter","patternCharacter","isQuantifier","complement","cc","decimalEscapeAtom","characterClassEscape","controlEscapeAtom","controlLetterEscapeAtom","nulCharacterAtom","hexEscapeSequenceAtom","regExpUnicodeEscapeSequenceAtom","identityEscapeAtom","positiveInteger","digitsCharCodes","whitespaceCodes","wordCharCodes","escapeCode","letter","letterCode","parseHexDigits","escapedChar","classPatternCharacterAtom","nextChar","isClassAtom","classAtom","isFromSingleChar","isRangeDash","isToSingleChar","insertToSet","classEscape","capturing","groupAst","number","decimalPatternNoZero","decimalPattern","parseInt","howMuch","isAtom","prevState","howMany","hexString","hexChar","hexDigitPattern","char","subItem","flagObj","flagKey","BaseRegExpVisitor","visitChildren","child","subChild","visitPattern","visitFlags","visitDisjunction","visitAlternative","visitStartAnchor","visitEndAnchor","visitWordBoundary","visitNonWordBoundary","visitLookahead","visitNegativeLookahead","visitCharacter","visitSet","visitGroup","visitGroupBackReference","visitQuantifier","baseFilter","negate","baseDifference","baseRest","isArrayLikeObject","difference","getRegExpAst","regexp_to_ast_1","regExpAstCache","regExpParser","regExpAst","regExpStr","getKeyForAutomaticLookahead","AT_LEAST_ONE_SEP_IDX","MANY_SEP_IDX","AT_LEAST_ONE_IDX","MANY_IDX","OPTION_IDX","OR_IDX","BITS_FOR_ALT_IDX","BITS_FOR_RULE_IDX","BITS_FOR_OCCURRENCE_IDX","BITS_FOR_METHOD_TYPE","ruleIdx","dslMethodIdx","reHasUnicode","RegExp","string","event","FormulaCheck","checker","lexer","parser","parse","FunctionCheck","lexResult","cst","tempCheckers","checkParamsType","params","checkFunction","minCount","optionalCount","paramType","LOG","MAX","MIN","paramCount","RAND","TRUNC","DATE","DATEDELTA","DATEDIF","DATESUBDATE","DATETONUMBER","DAY","DAYS360","DAYSOFMONTH","DAYSOFQUARTER","DAYVALUE","HOUR","LUNAR","MINUTE","MONTH","MONTHDELTA","NOW","QUARTER","SECOND","TIME","TODATE","TODAY","WEEK","WEEKDATE","WEEKDAY","YEAR","YEARDELTA","CHAR","CODE","CONCATENATE","ENDWITH","EXACT","FIND","FORMAT","INDEXOF","LEFT","LEN","LOWER","MID","NUMTO","PROPER","REGEXP","REPEAT","REPLACE","RIGHT","SPLIT","STARTWITH","SUBSTITUTE","TODOUBLE","TOINTEGER","TRIM","UPPER","AND","IF","SWITCH","ISNULL","NVL","checkers","Providers","getProvider","isUndefined","needCheckCount","supportDynamic","isSupportDynamic","paramIndex","_global","prepares","getTimezone","month","getMonthDays","getLastDateOfMonth","getDayOfYear","getWeekNumber","getQuarter","getOffsetDate","getOffsetQuarter","getQuarterStartDate","getQuarterEndDate","getOffsetMonth","getWeekStartDate","getWeekEndDate","print","before","beforeFunc","after","afterFunc","arg","sub","mul","div","_","startTag","endWith","endTag","getQuery","appendQuery","paras","s1","s2","perfectStart","allIndexOf","openWindow","strUrl","strWindowName","windowFeatures","windowObjectReference","top","MD5","hexcase","b64pad","chrsz","hex_md5","binl2hex","core_md5","str2binl","hex_md5_salt","md5ed","items1","items2","charAt","b64_md5","binl2b64","hex_hmac_md5","core_hmac_md5","b64_hmac_md5","calcMD5","x","len","olda","oldb","oldc","oldd","md5_ff","md5_gg","md5_hh","md5_ii","safe_add","md5_cmn","q","bit_rol","bkey","ipad","opad","hash","y","lsw","cnt","bin","mask","binarray","hex_tab","triplet","rotl","byteSub","Sbox","l1","l2","sm4","inArray","cryptFlag","mid","outArray","point","roundKey","ROUND","tmp","CK","DECRYPT","output","inLen","BLOCK","sms4Crypt","padding","lastIndexOf","paddingLen","arrayBuffer2Base64","buffer","binary","fromCharCode","encode","rest","b64","bitmap","base642ArrayBuffer","r1","r2","arr","hex2Array","hex","substr","SM4","ecbEncrypt","unescape","encodeURIComponent","words","ecbDecrypt","arrayToUtf8","utf8Byte","latin1Chars","decodeURIComponent","escape","_start","stop","approved","res","ruleMap","constraint","pars","expects","isNotEmptyArray","expect","isRegExp","option","errMsg","validator","required","isNotEmptyString","isNotEmptyObject","isNumeric","min","equal","isEqual","regex","init","addRule","SearchIconTextValueCombo","tipType","warningTitle","tabIndex","container","adjustLength","toggle","combo","simple","trigger","SearchTextValueTrigger","hideView","popup","chooseType","ButtonGroup","CHOOSE_TYPE_SINGLE","getSearcher","setAdapter","TextValueComboPopup","maxHeight","Combo","EVENT_AFTER_HIDEVIEW","stopEditing","EVENT_BEFORE_POPUPVIEW","hideChecker","triggerBtn","bottom","isViewVisible","showView","_checkError","attr","Trigger","_digistIcon","icon","disableSelected","vgap","searcher","isAutoSearch","editor","defaultText","_getText","tipText","onSearch","callback","finding","matched","Searcher","wrapper","_setState","setState","_digest","vals","formatItems","Tree","transformToArrayFormat","deepContains","any","stopSearch","iconItem","resize","FullScreenController","_init","superclass","exitHandlers","requestFullScreen","complete","exitHandler","support","_checkSupportScreenHandler","isWidget","_launchFullScreen","Msg","toast","level","getFullScreenElement","document","fullscreenElement","webkitFullscreenElement","msFullscreenElement","mozFullScreenElement","isFullScreen","doc","exitFullScreen","_existFullscreenHandler","exitFullscreen","mozCancelFullScreen","webkitExitFullscreen","msExitFullscreen","requestFullscreen","mozRequestFullScreen","msRequestFullscreen","webkitRequestFullscreen","webkitRequestFullScreen","$","unbind","body","fullscreenEnabled","mozFullScreenEnabled","webkitFullscreenEnabled","msFullscreenEnabled","FullScreen","AbstractFilterItem","isSelectedCondition","emptyItem","isVisible","setSelectedCondition","scrolly","setVisible","FILTER_OPERATION_FORMULA","FILTER_OPERATION_CONDITION","FILTER_OPERATION_CONDITION_AND","FILTER_OPERATION_CONDITION_OR","FILTER_OPERATION_FORMULA_AND","FILTER_OPERATION_FORMULA_OR","FILTER_OPERATION_SHAKE","AndOrFilterExpander","switchable","expander","filterType","filterValue","FilterExpander","_constant","EXPANDER_WIDTH","horizontalAlign","HorizontalAlign","Stretch","verticalAlign","VerticalAlign","Middle","$testId","TextButton","CLICK","invisible","stopPropagation","switchText","conditionsView","Filter","FILTER_TYPE","constants","FIELD_TYPE_NUMBER","FIELD_TYPE_STRING","FIELD_TYPE_DATE","itemCreator","empty","_store","Models","getModel","watch","shakeTree","addWarningTitle","addCondition","_addAndOrCondition","EMPTY_CONDITION","addAndCondition","addOrCondition","addFormula","EMPTY_FORMULA","addAndFormula","addOrFormula","_removeCondition","_switchConditionLink","_checkBeautifyLevelNecessary","filter","tree","initTree","toJSONWithNode","setBeautifyButtonVisible","_checkLevelStructure","getRoot","pnode","getChildren","pdata","finded","search","_createEmptyNode","Node","_insertAndOrCondition","formulaOrField","parent","andor","ANDOR","getParent","getChildIndex","addNode","removeChildByIndex","addChild","removeChild","getChildrenLength","prev","getFirstChild","currentSelectItem","getCurrentSelectItem","getLastChild","_shakeTree","removeIndex","count","childCount","cNode","defaultState","traversal","conditions","FORMULA","FilterList","ButtonTree","_createBtns","buttons","createWidgets","createItems","once","stripEL","zipObject","setNotSelectedValue","linkHashMap","LinkHashMap","willCreated","newBtns","ob","_btnsCreator","packages","button","DOM","hang","_packageItems","_packageBtns","_packageLayout","getIndexByValue","Fix","state","childContext","computed","actions","FilterOperation","_defaultConfig","FORMULA_COMBO","CONDITION_COMBO","logic","dynamic","selections","itemsCreator","emptyFn","currentSelected","_buildOperationButton","beautifyButton","IconButton","lrgap","rrgap","tgap","DESTROY","rgap","scrollable","combos","addType","doAdd","context","FilterOperationSwitch","Single","_getShowText","_getDefaultValue","addButton","_getItemsByType","FilterPane","CHOOSE_TYPE_DEFAULT","layouts","Form","_createItems","_itemsCreator","formItems","btn","_packageItemLayout","it","_packageSimpleItems","nodes","packBtns","makeArrayByArray","clone","deepClone","lay","formatEL","isEmpty","_isSimpleLayout","submit","isEnabled","getValidations","showError","hideError","getNodeByName","getFormValue","setEnabledItems","setEnable","getAllItems","getIndexByName","destroy","Item","_formItem","textHeight","Bubbles","show","getName","hide","_validate","paintWaterMark","canvas","conf","markConfig","fontSize","fontFamily","color","opacity","angle","fontWeight","horizontalGap","verticalGap","deg","PI","watermarkCanvas","createEmptyCanvas","cheight","cwidth","texts","split","actualWidth","cos","sin","actualHeight","watermarkCtx","getContext","maxTextWidth","rotate","font","fillStyle","globalAlpha","measureText","markWidth","getTextSizeHeight","markHeight","col","row","fillLeft","tan","textLen","fillText","ctxr","createPattern","fillRect","createElement","G_vmlCanvasManager","initElement","WarningLabel","forceCenter","textWidth","bgap","htmlEncode","ori","html","getText","LineSegmentButton","BasicButton","readonly","VirtaulTreeListItem","py","doHighLight","unHighLight","getId","getPId","doClick","isSelected","GridList","itemHeight","showLoader","onLoaded","hasNext","overscanRowCount","overflowX","overflowY","_resizeHandler","_getListWidth","_getListHeight","getWidth","getHeight","removeListener","ResizeDetector","addResizeListener","times","loaderStatus","estimatedRowSize","estimatedColumnSize","itemFormatter","rowHeightGetter","columnWidthGetter","listWidth","getScrollWidth","GridView","EVENT_SCROLL","sc","scrollTop","setEstimatedColumnSize","setHeight","_hasNext","setEnd","setLoaded","setLoading","_nextLoad","_addItems","isNumber","setScrollTop","destroyed","VirtualTreeList","rowHeight","_getNodes","treeList","overscanHeight","blockSize","_initTree","transformToTreeFormat","_fillTree","parentNode","tNode","_cutTree","recursion","_wrapperEvent","_triggerNode","_triggerNodeChecked","queue","shift","listener","EVENT_NODE_CHANGE","getTree","move","node1","node2","indexStart","indexEnd","setOpened","nodeId","openTree","scrollToViewPosition","currentScrollTop","itemPosition","VirtualTreeListNode","NodeButton","narrowIcon","triggerExpand","triggerCollapse","LoadingPane","Pane","ResizeContainerHtape","minSize","maxSize","initLeftSize","content","_resizeContainer","contianer","EVENT_RESIZE","ResizableContainer","direction","MAX_VALUE","resizable","startDragging","broadCastResize","startDrag","optimizeSize","clamp","defaultSize","_createHandle","_stared","mouseMoveTracker","MouseMoveTracker","deltaX","deltaY","isDragging","_isHorizontalResize","_getDefaultSize","releaseMouseMoves","captureMouseMoves","_getHandlePosition","setMinSize","setMaxSize","setResizable","reset","ResizeContainerVtape","initTopSize","ScrollbarContainer","verticalScrollbar","GridTableScrollbar","orientation","horizontalScrollbar","scrollLeft","_handleResize","scrollHeight","setContentSize","setSize","setPosition","scrollWidth","scroll","resizeObserver","MutationObserver","mutationObserver","observe","childList","subtree","verticalPopper","Popper","createPopper","placement","strategy","modifiers","enabled","horizontalPopper","disconnect","isIE","SelectColorItem","colors","SelectColorPopup","SelectColorCombo","selectedColor","setSelectedColor","EVENT_AFTER_INIT","SelectColorComboModel","SelectColorTrigger","colorContainer","down","SelectColorItemWrapper","stepWidth","stepHeight","showLine","constant","Constants","getConstant","status","NEXT","iconWidth","iconHeight","setStatus","CURR","PREV","Steps","stepItems","grid","steps","currStep","_createStep","rows","columns","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","isNeedMerge","mergeCols","mergeRule","stopScrollEvent","trRenderer","created","renderedIndex","trCache","_debounceRelease","_scrollLock","marginLeft","colGroup","topBlank","bottomBlank","_calculateBlocksToRender","_renderMoreIf","lastHeight","minContentHeight","getElementHeight","spanSizeTo","mergeRows","itemsMap","__mergeRows","spanTo","addedHeight","_addItem","rowSizeGetter","rowspan","colspan","__mergeCols","_serialize","preCol","preRow","summaryColumnSize","mergeRow","mergeCol","_width","createOneEl","_row","_col","cols","isNeedMergeRow","isNeedMergeCol","startIndex","fragment","_renderEngine","createFragment","tr","appendChild","append","minContentHeightFrom","minContentHeightTo","greatestLowerBound","leastUpperBound","needDestroyed","firstFragment","lastFragment","currentFragment","prepend","sumTo","_destroy","h","PrefixIntervalTree","ceil","addItem","_clearChildren","setRegionColumnSize","regionColumnSize","getMaxScrollTop","getScrollTop","getScrollLeft","setScrollLeft","restore","NativeTableScrollbar","contentSize","defaultPosition","throttle","leading","inner","NativeTableHorizontalScrollbar","scrollx","SortableTable","cell","quickSelectHelper","QuickSelectHelper","styleHelper","StyleHelper","_getCell","rowSize","_formatHeader","_formatCell","Table","EVENT_TABLE_SCROLL","EVENT_TABLE_AFTER_REGION_RESIZE","EVENT_TABLE_AFTER_COLUMN_RESIZE","autoScrollHelper","AutoScrollHelper","_onAutoScroll","_getColumnsLeftPosition","columnSizes","getColumnSize","_exchangeItemsAndHeaderPosition","sourceIndexes","targetIndex","deleteIndexes","unzip","sourceIndex","_dealExchangeConfig","targets","sourceTargets","unshift","removeAt","customCell","hasClass","hasSelected","disableSelectText","getSelectedColumns","_clickSelectColumn","_prepareDrag","selectCell","_initDrag","columnIndex","setInVisibility","selectColumns","selectColumn","lastRowCell","_drop","indexes","selectedCols","splitIndex","firstSelectCol","insertIndex","newColumnIndex","_shouldStartDrag","curPosX","startPosX","abs","disable","tracker","preventDefault","startX","oStartX","pageX","startY","pageY","boundingClientRect","getBoundingClientRect","positions","offsetX","offsetHeight","offsetWidth","widths","tableWidth","tableHeight","containerBoundingRect","minTranslateX","maxTranslateX","initialScrollX","getActualRightHorizontalScroll","_updateHelperPosition","_animateColumns","_autoScroll","dragHelper","sortBy","_stopDrag","off","zIndex","zIndex_layer","translateX","setColumnInVisibility","setColumnDisabled","_getOtherSelectedColumns","setTranslateX","sortingOffset","colKey","translate","rowKey","setTransitionDuration","setColumnTranslateX","clearColumns","ctrlKey","setVerticalScroll","setLeftHorizontalScroll","setRightHorizontalScroll","getFirstColumnHeaderRowSize","getFirstColumnRowSize","getRegionColumnSize","getVerticalScroll","getLeftHorizontalScroll","getRightHorizontalScroll","setSortable","headers","selectedColumns","lastSelectedColumn","MOUSE_EVENT_KEY","getMouseHotKey","endIndex","sliceStartIndex","sliceEndIndex","uniq","metaKey","shiftKey","CONTROL_CLICK","SHIFT_CLICK","onScrollCallback","autoScroll","interval","setInterval","initialScrollLeft","clearInterval","cells","cellWrapperGetter","widget","widgetWrapper","setDraggingStyle","disabled","columnIndexes","duration","cIdx","cursor","TableCell","CollectionTableCell","_left","_top","firstRowTopLine","firstColumnLeftLine","CollectionTable","_height","topLeftCollection","isFireFox","cellSizeAndPositionGetter","topLeftItems","CollectionView","bottomLeftCollection","_populateScrollbar","topRightCollection","topRightItems","bottomRightCollection","bottomLeftItems","bottomRightItems","topLeft","topRight","bottomLeft","bottomRight","shadow","contextLayout","topScrollbar","SIZE","leftScrollbar","rightScrollbar","scrollBarLayout","isChrome","isWindows","isEdge","_getFreezeColLength","_getFreezeHeaderHeight","_getActualItems","_getContentHeight","regionSize","getRegionSize","totalLeftColumnSize","totalRightColumnSize","freezeHeaderHeight","topScrollbarSize","leftScrollLeft","rightScrollLeft","shadowVisible","firstColumnSize","contentHeight","_populateTable","run","otlw","otlh","otrw","otrh","oblw","oblh","obrw","obrh","scrollBarSize","tlw","tlh","trw","trh","blw","blh","brw","brh","digest","overflow","leftHeader","rightHeader","leftItems","rightItems","rendered","_rowIndex","_columnIndex","_syncScroll","freezeColLength","serialize","_isNeedDigest","getLastColumnRowSize","_restore","startCol","endCol","rowHeightsGetter","QuickCollectionTable","setOverflowX","setOverflowY","_topLeftWheelHandler","WheelHandler","_onWheelLeft","_shouldHandleLeftX","_shouldHandleY","_topRightWheelHandler","_onWheelRight","_shouldHandleRightX","_bottomLeftWheelHandler","_bottomRightWheelHandler","mousewheel","onWheel","originalEvent","delta","getMaxScrollLeft","getTextLines","getCellRowHeight","cellWidth","maxLines","lines","charWidth","rowGap","AutoHeightCollectionTable","isAutoHeight","isHeaderAutoHeight","fontLineHeight","columnGaps","headerFontSize","headerFontLineHeight","headerColumnGaps","headerRowGap","maxRowSize","headerIntervalTree","allHeaderHeight","sumUntil","intervalTree","_getOneRowHeight","heightCache","cellHeight","mergeRules","columnGap","_getOneHeaderRowHeight","headerHeightCache","headerMergeRules","_getActualRowHeights","_getActualHeaderRowHeights","allHeightCache","headerAllHeightCache","itemHeightCache","itemAllHeightCache","GridTable","DynamicCollectionTable","headerEl","bodyEl","bordered","renderMore","GridTableCell","columnLeftWidthGetter","columnRightWidthGetter","topLeftGrid","_headerRowHeightGetter","bottomLeftGrid","topRightGrid","bottomRightGrid","_rowHeightGetter","GridTableHorizontalScrollbar","_getHeader","_getItems","setEstimatedRowSize","setColumnCount","tableItems","headerChanged","itemsChanged","QuickGridTable","_const","FACE_MARGIN","FACE_MARGIN_2","FACE_SIZE_MIN","KEYBOARD_SCROLL_AMOUNT","isOpaque","focused","face","_isHorizontal","_onWheelX","_onWheelY","_wheelHandler","_shouldHandleX","_mouseMoveTracker","_onMouseMove","_onMouseMoveEnd","_onMouseDown","_onKeyDown","_getScale","scale","_getFaceSize","faceSize","_shouldHandleChange","_onWheel","maxPosition","offsetY","focus","Keys","keyCode","distance","isHorizontal","isActive","scrollbar","AutoHeightGridTable","_getHeaderContentHeight","estimatedRowHeight","estimatedHeaderRowHeight","TableHeaderCell","row1","row2","footerRowSize","stripe","hover","footer","_calculateWidth","parseFloat","_calculateHeight","_isColumnSizeValid","_isRightFreeze","_createTopLeft","w","isValid","isRight","topLeftColGroupTds","topLeftBodyTds","topLeftBodyItems","_table","_createColGroup","columnLeft","topLeftBody","_body","_createHeaderCells","mergeLeft","topLeftContainer","_createTopRight","topRightColGroupTds","topRightBodyTds","topRightBodyItems","columnRight","topRightBody","mergeRight","topRightContainer","_createBottomLeft","bottomLeftColGroupTds","bottomLeftBodyTds","bottomLeftBodyItems","_createBottomLeftBody","bottomLeftContainer","bottomLeftBody","_createCells","_createBottomRight","bottomRightColGroupTds","bottomRightBodyTds","bottomRightBodyItems","_createBottomRightBody","bottomRightContainer","bottomRightBody","_createFreezeTable","_split","leftWidth","scrollTopLeft","scrollTopRight","scrollBottomLeft","scrollBottomRight","_resize","is","hasHorizonScroll","hasVerticalScroll","_initFreezeScroll","EVENT_TABLE_RESIZE","EVENT_TABLE_AFTER_INIT","scrollElement","scrollTopElement","otherElement","TDs","Ws","isHeader","preRW","preCW","frag","createDocumentFragment","pushDistinct","addWidget","_mount","_createColGroupCells","_createFooterCells","widgets","_colgroup","_createHeader","_header","headerTds","headerItems","_createFooter","_footer","footerTds","footerItems","_createBody","bodyTds","bodyItems","_createNormalTable","colgroupTds","tableContainer","_initNormalScroll","attribute","cellspacing","cellpadding","topleft","topright","bottomleft","bottomright","lw","rw","lValid","rValid","sizes","getCalculateColumnSize","setHeaderColumnSize","cW","getCalculateRegionColumnSize","getCalculateRegionRowSize","getClientRegionColumnSize","clientWidth","getClientRegionRowSize","clientHeight","getScrollRegionColumnSize","getScrollRegionRowSize","getColumns","EVENT_TABLE_BEFORE_COLUMN_RESIZE","EVENT_TABLE_COLUMN_RESIZE","EVENT_TABLE_BEFORE_REGION_RESIZE","EVENT_TABLE_REGION_RESIZE","ResizableTableCell","ResizableTable","isNeedResize","_mergeRule","_createResizerHandler","resizer","regionResizerHandler","_setRegionResizerHandlerPosition","_getRegionSize","_setResizerPosition","_getHeaderHeight","headerHeights","_getItemsHeight","_getRegionRowSize","headerHeight","_getFreezeColumnSize","_getResizerLeft","resizeObj","tableOffsetLeft","freezeContainerWidth","unFreezeContainerWidth","totalColumnWidth","remainWidth","columnWidth","increaseWidth","suitableSize","ColumnSizeAdaptiveTable","crossHeader","crossItems","emptyColumns","allColumnSize","emptyColumnSize","summaryFreezeColumnSize","rs","actualSize","AdaptiveTable","DynamicSummaryLayerTreeTable","rowHeaderCreator","headerCellStyleGetter","summaryCellStyleGetter","sequenceCellStyleGetter","tableStyleCellStoreGetter","summaryText","rowPosition","colPosition","_getVDeep","_getHDeep","TableTree","maxDeep","vDeep","formatCrossItems4Special","sumPosition","formatCrossItems","newHeader","_formatColumns","styleGetter","deep","next","track","DynamicSummaryTreeTable","formatSummaryItems","_formatFreezeCols","_formatColumnSize","_recomputeColumnSize","deletedCols","rowHeights","groupedHeight","summaryCellCreator","showInnerSummary","makeArray","formatHeader","formatHorizontalItems","last","isCross","cloneNode","cloneArray","totalLength","summaryClone","summary","styles","nHeader","nItems","nNode","LayerTreeTableCell","LayerTreeTable","pre","TableStyleCell","belowMouse","_digestStyle","hDeep","formatItems4Special","StyleTable","userSelectable","showSequence","seqWidth","showPartData","columnSortable","columnSelectable","tipPosition","zebraVeins","needFormat","_getTableWidth","_getTableHeight","_createTable","valid","tip","sortableTable","_getGridConfig","_calculateColumnSize","totalColumnSize","surplus","getColumnSizes","average","adaptSize","getSimulationWidth","getGBWidth","Format","numberFormat","freezeScroll","scrollLeftIndex","setHorizontalScroll","NO_ROWS_SCROLL_RESULT","TableScrollHelper","rowCount","defaultRowHeight","viewportHeight","_rowOffsets","uniform","_storedHeights","_rowCount","_position","_contentHeight","_defaultRowHeight","_viewportHeight","_updateHeightsInViewport","setRowHeightGetter","setViewportHeight","getContentHeight","firstRowIndex","firstRowOffset","_updateRowHeight","_updateHeightsAboveViewport","rowIndex","newHeight","change","getRowPosition","scrollBy","firstRow","firstRowPosition","rowHeightChange","visibleRowHeight","invisibleRowHeight","_getRowAtEndPosition","currentRowIndex","scrollTo","scrollToRow","scrollRowIntoView","rowBegin","rowEnd","SequenceTableTreeNumber","startSequence","headerRowSizeGetter","sequenceHeaderCreator","sequenceSummaryText","vCurr","hCurr","tasks","gridView","columnCount","headerContainer","_nextState","_getNextSequence","_getCacheKey","_getStart","_formatNumber","BICst","DESIGN","TABLE_ROW_SUM_POSITION","TOP","isSummary","getLeafCount","_layout","numbers","_prevState","firstChild","_calculateChildrenToRender","nullKey","task","setVPage","setHPage","SequenceTableDynamicNumber","PageTableCell","PageTable","minScrollWidth","pager","horizontal","pages","curr","hasPrev","firstPage","lastPage","vertical","Pager","vpage","getVPage","hpage","getCurrentPage","getHPage","showPager","isShowPager","hasHNext","hasHPrev","hasVNext","hasVPrev","PreviewTableCell","PreviewTableHeaderCell","PreviewTable","_adjustColumns","_hasAdaptCol","_isPercentage","findCols","remain","freezeSize","notFreezeSize","sumFreezeSize","sumNotFreezeSize","SequenceTableListNumber","pageSize","setPagesize","SequenceTable","sequence","htape","hasLeftHorizontalScroll","hasRightHorizontalScroll","page","lists","headerRow","_formatMergeCols","headerSeq","_digestTable","_serializeItems","lastLayer","stacks","isLastNode","createNode","isPlus","getSummaryRow","getLeaves","leaves","isSummarySeq","_createNode","hasIcon","createNodes","current","getNext","FreezeTable","headerColletion","configRender","tableColletion","appendTo","nextTick","_scrollHandler","containerWidth","_freeHandler","realColumnSize","_hasOtherFreezeCol","firstRowLength","setProperty","others","TableComponnet","innerTable","WaterMark","paper","pointerEvents","_paint","_initCanvas","containerHeight","_initSvg","svgImage","imgURL","toDataURL","DivWaterMark","_showWatermark","getTextSizeWidth","watermarkContainer","_getContainerSize","watermarkHeight","_addFilterForOldIE","rowItems","markItem","_getContainerLeft","_getContainerBottom","rad","m11","isIE9Below","src","execScript","attachEvent","addEventListener","eval","funcToString","baseIsEqualDeep","baseIsEqual","bitmask","stack","cacheHas","equalFunc","isPartial","arrLength","othLength","arrStacked","othStacked","seen","compared","arrValue","othValue","othIndex","baseGetAllKeys","getSymbols","keysFunc","symbolsFunc","baseTimes","inherited","isArr","isArg","isBuff","isType","skipIndexes","srcValue","baseToString","hasFunc","getNative","getPrototype","getPrototypeOf","getSymbolsIn","keysIn","baseIsRegExp","nodeIsRegExp","basePickBy","getAllKeysIn","prop","fromRight","firstForTerminal","firstForBranching","firstForSequence","uniq_1","currSubProd","firstSet","seq","nextSubProdIdx","hasInnerProdsRemaining","isLastInnerProdOptional","allAlternativesFirsts","comparator","IN","minOptimizationVal","buildLineBreakIssueMessage","isShortPattern","isCustomPattern","addStickyFlag","addStartOfInput","findUnreachablePatterns","findModesThatDoNotExist","findInvalidGroupType","findDuplicatePatterns","findUnsupportedFlags","findStartOfInputAnchor","findEmptyMatchRegExps","findEndOfInputAnchor","findInvalidPatterns","findMissingPatterns","enableSticky","disableSticky","MODES","indexOf_1","isFunction_1","find_1","filter_1","defaults_1","reg_exp_1","tokenTypesWithMissingPattern","currType","MISSING_PATTERN","tokenTypesWithInvalidPattern","INVALID_PATTERN","useSticky","debug","charCodeToOptimizedIdxMap","onlyRelevantTypes","allTransformedPatterns","patternIdxToType","patternIdxToGroup","patternIdxToLongerAltIdxArr","patternIdxToPushMode","patternIdxToPopMode","patternIdxToCanLineTerminator","patternIdxToIsCustom","patternIdxToShort","escapedRegExpString","regExpSource","wrappedRegExp","clazz","groupName","longerAltType","lineTerminatorCharCodes","getCharCodes","checkLineBreaksIssues","canMatchCharCode","acc","short","lastOptimizedIdx_1","optimizedCodes","optimizedIdx","addToMapOfArrays","charOrInt","currOptimizedIdx","failedOptimizationPrefixMsg","getOptimizedStartCodesIndices","code","validModesNames","missingResult","validTokenTypes","invalidResult","withRegExpPatterns","end_of_input","EndAnchorFinder","invalidRegex","regexpAst","endAnchorVisitor","EOI_ANCHOR_FOUND","matchesEmptyString","EMPTY_MATCH_PATTERN","start_of_input","StartAnchorFinder","startAnchorVisitor","SOI_ANCHOR_FOUND","invalidFlags","multiline","UNSUPPORTED_FLAGS_FOUND","identicalPatterns","outerType","innerType","duplicatePatterns","currIdenticalSet","setOfIdentical","tokenTypeNames","dupPatternSrc","DUPLICATE_PATTERNS_FOUND","invalidTypes","INVALID_GROUP_TYPE_FOUND","validModes","invalidModes","PUSH_MODE_DOES_NOT_EXIST","canBeTested","testIdx","UNREACHABLE_PATTERN","issue","IDENTIFY_TERMINATOR","CUSTOM_LINE_BREAK","details","charsOrCodes","numOrString","MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE","MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY","MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST","LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED","currLongerAlt","MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE","warnings","hasAnyLineBreak","allTokenTypes","concreteTokenTypes","terminatorCharCodes","currIssue","NO_LINE_BREAKS_FLAGS","clonedResult","groupKeys","currGroupValue","defaults","sources","propsIndex","propsLength","fullText","checkPrefixAlternativesAmbiguities","validateSomeNonEmptyLookaheadPath","validateTooManyAlts","RepetitionCollector","validateAmbiguousAlternationAlternatives","validateEmptyOrAlternative","getFirstNoneTerminal","validateNoLeftRecursion","validateRuleIsOverridden","validateRuleDoesNotAlreadyExist","OccurrenceValidationCollector","identifyProductionForDuplicates","groupBy_1","flatMap_1","lookahead_1","gast_3","getExtraProductionArgument","topLevels","globalMaxLookahead","tokenNames","duplicateErrors","currTopLevel","collectorVisitor","allRuleProductions","allProductions","productionGroups","duplicates","currGroup","currDuplicates","firstProd","DUPLICATE_PRODUCTIONS","parameter","leftRecursionErrors","currTopRule","emptyAltErrors","ambiguousAltsErrors","emptyRepetitionErrors","termsNamespaceConflictErrors","currToken","CONFLICT_TOKENS_RULES_NAMESPACE","tooManyAltsErrors","curRule","duplicateRulesError","visitNonTerminal","subrule","manySep","atLeastOne","atLeastOneSep","many","or","visitTerminal","allRules","DUPLICATE_RULE_NAME","validNextSteps","nextNonTerminals","LEFT_RECURSION","errorsFromNextSteps","currRefRule","currSubDef","isFirstOptional","hasMore","INVALID_RULE_OVERRIDE","OrCollector","alternations","orCollector","ors","currOr","exceptLast","currAlternative","possibleFirstInAlt","NONE_LAST_EMPTY_ALT","foundAmbiguousPaths","currOccurrence","actualMaxLookahead","altsAmbiguityErrors","identicalAmbiguities","altsCurrPathAppearsIn","currOtherAlt","currOtherAltIdx","currAmbDescriptor","ambgIndices","AMBIGUOUS_ALTS","altsPrefixAmbiguityErrors","TOO_MANY_ALTS","topLevelRules","currProd","pathsInsideProduction","NO_NON_EMPTY_LOOKAHEAD","pathsAndIndices","currPathsAndIdx","currPathAndIdx","targetIdx","targetPath","prefixAmbiguitiesPathsAndIndices","searchPathAndIdx","currAmbPathAndIdx","AMBIGUOUS_PREFIX_ALTS","createAggregator","groupBy","attemptInRepetitionRecovery","InRuleRecoveryException","IN_RULE_RECOVERY_EXCEPTION","EOF_FOLLOW_KEY","constants_1","prodFunc","lookaheadFunc","prodOccurrence","nextToksWalker","notStuck","firstAfterRepInfo","firstAfterRepMap","expectTokAfterLastMatch","getCurrRuleFullName","getGAstProductions","nextTokIdx","RULE_STACK","shouldInRepetitionRecoveryBeTried","tryInRepetitionRecovery","getTokenToInsert","tokToInsert","isInsertedInRecovery","canTokenTypeBeInsertedInRecovery","canTokenTypeBeDeletedInRecovery","grammarRule","grammarRuleArgs","lookAheadFunc","expectedTokType","reSyncTokType","findReSyncTokenType","savedLexerState","exportLexerState","passedResyncPoint","nextTokenWithoutResync","generateErrorMessage","SAVE_ERROR","SKIP_TOKEN","addToResyncTokens","importLexerState","isBackTracking","canPerformInRuleRecovery","getFollowsForInRuleRecovery","tokIdxInRule","grammarPath","getCurrentGrammarPath","getNextPossibleTokenTypes","tryInRuleRecovery","follows","canRecoverWithSingleTokenInsertion","canRecoverWithSingleTokenDeletion","nextTok","expectedToken","mismatchedTok","possibleFollowsTokType","isInCurrentRuleReSyncSet","followKey","getCurrFollowKey","currentRuleReSyncSet","getFollowSetFromFollowKey","allPossibleReSyncTokTypes","flattenFollowSet","foundMatch","resyncTokType","currRuleShortName","currRuleIdx","prevRuleShortName","getLastExplicitRuleShortName","getLastExplicitRuleOccurrenceIndex","getPreviousExplicitRuleShortName","shortRuleNameToFullName","idxInCallingRule","inRule","buildFullFollowKeyStack","explicitRuleStack","explicitOccurrenceStack","RULE_OCCURRENCE_STACK","followStack","followName","resyncTokens","reSyncTo","getHumanReadableRuleStack","currShortName","FORMULA_STATE","VALID","INVALID","AGG_INVALID","FIXED_INVALID","RAPID_INVALID","FIELD_MISS","NOT_SUPPORT_STRING_OR_DATE","DETAIL_FILTER_NOT_SUPPORT","FORMULA_WIDGET_FIELD_TYPE","STRING","NUMBER","BOTTOM","FORMULA_KEYWORD_TYPE","KEYWORD","FUNCTION","PARAM","Clipboard","u","1","proto","Element","matches","matchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector","selector","2","closest","useCapture","listenerFn","delegateTarget","removeEventListener","3","HTMLElement","nodeList","fn","4","delegate","5","selection","selectedText","nodeName","isReadOnly","hasAttribute","setAttribute","select","setSelectionRange","removeAttribute","getSelection","createRange","selectNodeContents","removeAllRanges","addRange","6","E","emit","evtArr","evts","liveEvents","7","factory","_select","_select2","_typeof","iterator","defineProperties","descriptor","writable","Constructor","protoProps","staticProps","ClipboardAction","emitter","selectFake","selectTarget","isRTL","documentElement","yPosition","removeFake","fakeHandlerCallback","fakeHandler","fakeElem","margin","pageYOffset","copyText","succeeded","execCommand","err","handleResult","clearSelection","blur","_action","_target","resolveOptions","initSelection","clipboardAction","8","_clipboardAction","_tinyEmitter","_goodListener","_clipboardAction2","_interopRequireDefault","_tinyEmitter2","_goodListener2","_createClass","_inherits","subClass","superClass","defaultAction","defaultTarget","_this2","onClick","currentTarget","getAttributeValue","querySelector","queryCommandSupported","_classCallCheck","ReferenceError","__proto__","listenClick","suffix","tinyEmitter","goodListener","clipboard","ClipBoard","copy","afterCopy","clipboardData","setData","onDragStart","onDrag","onDragEnd","W","H","bounds","mousedown","pos","CodeEditor","readOnly","lineNumbers","paramMatch","lineWrapping","specialChars","cursorBlinkRate","cm","origin","_checkWaterMark","EVENT_FOCUS","isEmptyString","EVENT_BLUR","info","replaceSelection","getDoc","getCursor","replaceRange","stopEvent","setStyle","_setEnable","setOption","visible","_insertParam","atomic","replacedWith","markText","_insertString","_analyzeContent","markedSpans","ms","marker","fieldNameLength","insertParam","getInputField","getStyle","Beautify","lastToken","indentationLevel","flagsStore","valueGetter","getOutput","beautify","currentToken","handleToken","getResult","handleString","handleField","handleComma","handleBracket","handleWord","handleKeyword","handleOperator","handleCommon","checkNeedSpace","addSpaceBeforeToken","addNewLine","setIndent","deIndent","defineExtension","getTokens","Output","previousLine","currentLine","nextLine","Line","addOutputLine","_indent_count","addText","force","justAddedNewline","cloneEmpty","Token","peek","flatten","lineCount","getLineTokens","registerHelper","keywords","getToken","cur","innerMode","getMode","tprop","foundText","makeFirstPY","splitChar","upperPy","results","typeExist","isEmptyArray","keywordsGetter","getTokenAt","HINT_ELEMENT_CLASS","ACTIVE_HINT_ELEMENT_CLASS","Completion","tick","startPos","startLen","getLine","activityFunc","cursorActivity","showHint","getHints","async","newOpts","parseOptions","listSelections","somethingSelected","supportsSelection","head","anchor","completionActive","close","completion","signal","requestAnimationFrame","setTimeout","cancelAnimationFrame","clearTimeout","hintOptions","out","defaultOptions","buildKeyMap","Up","moveFocus","Down","PageUp","menuSize","PageDown","Home","setFocus","End","Enter","pick","Tab","Esc","custom","customKeys","ourMap","addBinding","bound","extra","extraKeys","getHintElement","hintsElement","picked","ownerDocument","parentWindow","defaultView","hints","hintsWidget","selectedHint","completions","eltLists","elt","eltObj","displayText","hintId","cursorCoords","alignWithWord","below","winW","innerWidth","winH","innerHeight","box","overlapY","scrolls","startScroll","getScrollInfo","curTop","overlapX","paddingRight","display","nativeBarWidth","addKeyMap","keyMap","avoidWrap","changeActive","screenAmount","closeOnUnfocus","closingOnBlur","onBlur","onFocus","onScroll","curScroll","getWrapperElement","newTop","srcElement","completeOnSingleClick","applicableHelpers","helpers","fetchHints","then","resolveAutoHints","getHelpers","resolved","app","getHelper","fromList","anyword","active","setCursor","fieldFormattedName","showName","handleMouseEvents","startStyle","endStyle","closeCharacters","myTick","finishUpdate","completeSingle","removeKeyMap","offsetTop","word","commands","autocomplete","auto","defineOption","bracketRegex","findMatchingBracket","where","getLineHandle","afterCursor","re","matching","dir","strict","getTokenTypeAt","scanForBracket","forward","maxScanLen","maxScanLineLength","maxScanLines","lineEnd","lastLine","firstLine","lineNo","matchBrackets","autoclear","maxHighlightLen","maxHighlightLineLength","marks","ranges","ie_lt8","operation","navigator","userAgent","documentMode","old","defer","doMatchBrackets","currentlyHighlighted","Init","oldConfig","defineMode","wordObj","atoms","tokenBase","stream","eatSpace","nextUntilUnescaped","eatWhile","escaped","startState","fold","defineMIME","Provider","addChecker","$get","provider","formulaChecker","paramTypeGetter","formulaHint","errorTipText","_isEditing","comp","configureMouse","addNew","KEYMAP","hasFocus","_getSelection","tips","_setValue","_removeInvisibleChar","keyboard","EVENT_KEY_UP","EVENT_CURSOR_ACTIVITY","errorTip","normalTip","selectString","adaptCopyWidget","paramArray","matchStr","click","disabledWaterMark","selectAll","disableWaterMark","getTip","_insertField","_insertFunction","_isFunction","_setFunction","_insertOperator","insertOperator","getFormulaString","getUsedFields","fields","dId","getCheckString","groupStr","nextStr","check","formulaCheck","RichEditorAction","command","used","NicEditor","EVENT_SELECTED","focusNode","checkNodes","elm","tags","activate","itm","_getDomStyle","deactivate","keydown","hideIf","restoreRng","doCommand","nicCommand","nodeStyle","_getDomColor","innerText","hex2rgb","RichEditorParamAction","addParam","encodeFn","instance","Image","attrs","getImage","insertHTML","RichEditorTextToolbar","_noSelect","isIE11Below","getIEVersion","SPECIAL_TAGS","formatType","attrWhiteList","sizeMap","SUPPORTED_TAGS","SUPPORTED_STYLE","SUPPORTED_ATTR","cleanNode","formatNode","pasteHandler","nicEditorInstance","\"","NORMAL","ESCAPE","scrollOpt","selectCheck","addInstance","newInstance","ne","singleLine","contentEditable","opera","insertElem","$elem","selectedInstance","cmd","checkToolbar","saveRng","lastSelectedInstance","bindToolbar","toolbar","setContent","setJSONValue","getEscapeContent","getJSONValue","getContent","getInstance","EVENT_KEYDOWN","EVENT_KEYUP","htmlDecode","FormatType","cssText","replaceChild","createTextNode","replaceHtmlSymbol","_cleanBlockAttr","styleFilterConfig","jNode","allAttributes","removeAttr","childNode","_formatAttr","formatAttr","align","getPasteHtml","pasteContent","pasteText","nodeValue","outerHTML","getFormatHtml","initValue","minHeight","outline","wordBreak","Text","formatText","instanceDoc","keyDown","paste","getSel","getRng","rangeCount","getRangeAt","getSavedRng","savedRange","selRng","rng","selElm","startContainer","contain","cloneContents","selectNode","compareBoundaryPoints","Range","START_TO_START","END_TO_END","_isChildOf","getSelectionContainerElem","collapsed","savedSel","elem","commonAncestorContainer","nodeLenght","lastNode","contents","sel","setEndAfter","collapse","moveStart","removeRng","restoreRngAndClearRange","setStart","endContainer","trim","selInstance","isFocused","newLine","_getNewLine","pasteHtml","getData","_pasteByBin","pasteBin","ex","saveContent","getElm","convert2HTML","propFix","for","class","attrNames","propName","getParseContent","dom2JSON","JSON2HTML","insertNode","deleteContents","insert","pasteHTML","newLineHtml","RichEditorBackgroundChooserTrigger","underline","RichEditorAlignCenterButton","getComputedStyle","RichEditorBoldButton","RichEditorAlignLeftButton","RichEditorAlignRightButton","bold","queryCommandState","RichEditorItalicButton","fontStyle","italic","RichEditorParamButton","Button","RichEditorUnderlineButton","RichEditorColorChooserTrigger","RichEditorBackgroundColorChooser","colorchooser","destroyWhenHide","recommendColorsGetter","ColorChooser","backgroundColor","EVENT_AFTER_POPUPVIEW","RichEditorColorChooser","rgb","delay","rgb2hex","isRGBColor","rgba2json","RichEditorFontChooser","RichEditorSizeChooser","triggerWidth","_formatArray","fontList","FontFamily","DEFAULT","SIM_HEI","SIM_SUN","FANG_SONG","KAI_TI","YOU_SHE","PANG_MEM","ARIAL","HELVETICA_NEUE","VERDANA","TIMES_NEW_ROMAN","DIGITAL_NUMBERS","POPPINS_BOLD","doAction","getElementsByTagName","parents","cleanFontSize","RichEditor","adjustXOffset","adjustYOffset","EVENT_CONFIRM","isNeedAdjustWidth","isNeedAdjustHeight","getEditor","wrapTable","getTable","tables","shallowClone","addMatches","wordlist","formatter","insertIdentifierQuotes","nameParts","identifierQuote","findTableByAlias","alias","fullQuery","aliasUpperCase","previousWord","validRange","indexOfSeparator","CONS","QUERY_DIV","posFromIndex","prevItem","cmpPos","query","getRange","lineText","wordUpperCase","ALIAS_KEYWORD","defaultTable","defaultTableName","disableKeywords","keywordsCount","modeOption","resolveMode","functions","supportFunction","lowerCase","upperCase","useIdentifierQuotes","cont","aliasTable","oldTable","tableInsert","parserConfig","client","builtin","operatorChars","hooks","dateSQL","timestamp","hexNumber","binaryNumber","decimallessFloat","eol","eat","doubleQuote","tokenLiteral","nCharCast","charsetCast","commentSlashSlash","skipToEnd","commentHash","commentSpaceRequired","tokenComment","zerolessFloat","ODBCdotTable","quote","pushContext","indentation","popContext","sol","tok","textAfter","cx","Pass","closing","indentUnit","blockCommentStart","blockCommentEnd","lineComment","hookIdentifier","backUp","hookIdentifierDoublequote","hookVar","hookClient","sqlKeywords","makeObject","SQLEditor","supportParam","sqlHint","FormulaFieldPane","searcherHeight","searcherGap","leafItemHeight","fieldTreeHgap","nodeGap","fieldKeyword","_search","SearchEditor","setKeyword","EVENT_RESPONSE_TIME","EVENT_CLEAR","redmark","fieldTree","FormulaFieldsTree","getAllLeaves","EVENT_SEARCH","leafGap","isDefaultInit","behaviors","fieldtree","LevelTree","_getFieldNum","fieldtype","openWhenNotEmpty","typeItem","getSortedResult","fieldType","COLUMN","CALCULATE","typeItems","doBehavior","getNodeByValue","setTriggerExpand","getNodeById","setTriggerCollapse","expandAll","FunctionDescribe","expandable","defaultHyperLink","expanderTrigger","describeButton","lhgap","rhgap","describeGroup","href","description","hyperlink","TreeTextLeafItem","FormulaFunctionsTree","_getFormatNodes","_getSelectItem","isOpen","templateNodes","MATH","TEXT","ARRAY","LOGIC","ANALYSIS","OTHER","AGG","TABLE_CAL","COMMON","FIXED_CAL","availableFunctionValues","EVENT_HOVER","service","Services","getService","functionTypes","getFunctionValueByType","FormulaFunctionPane","functionTreeHgap","functionKeyword","resultArray","functionTree","EVENT_INSET","EVENT_CLOSE","SymbolGroup","enableSwitcher","FORMULA_GENERATE_TYPE","AUTO","layoutItems","forceNotSelected","symbolgroup","iconCombo","IconCombo","llgap","FormulaInsert","button_bottom","pane_bottom","MORE_FUNCTION","RETRACT","retract_width","more_width","function_pane_width","field_pane_width","describe_height","describe_retract_height","abandonFunctions","functionRegex","fieldItems","fieldItemsCreator","errorFieldItems","validationChecker","formulaJSONGetter","checkFormulaValidation","functionPaneOpened","autoCheck","FormulaOriginCollections","availableFunctions","fieldPane","formulaedit","_bindFieldDragEvent","EVENT_TYPE_CHANGE","_paramFormatter","_valueGetter","fieldsDetailMap","_getSortedResult","_getIconCls","_checkValidation","checkValidation","setTitle","getErrorText","inputOperator","_getFunction","describePane","functionpane","functionbutton","functionTriggerBtn","isOpened","_closeFunctionPane","_openFunctionPane","functionItems","_bindFunctionDragEvent","droppable","drop","ui","helper","insertDragField","insertDragFunction","formulaPane","itemArray","fieldErrorValueTextMap","fieldValueTextMap","fieldErrorTextValueMap","fieldTextValueMap","_getFunctionItems","valueObj","_reHsize","lowerString","upperString","allValidIds","checkId","usedFields","allInvalidIds","isAllFieldNotInErrorFields","fId","isAllFieldValid","setLastCheckId","checkResult","errorInfo","_dealCheckResult","errorCode","errorMessage","fieldsMap","response","EVENT_ERROR","validState","lastCheckId","ErrorCode","FORMULA_ERROR","DIS_AGGRESSIVE_FUNCTION_HAS_FIELD_WITH_DETAIL_FILTER","EVENT_VALID","_createFieldTextValueMap","fieldMap","fieldItem","_createErrorTextValueMap","_createErrorValueTextMap","_createFieldValueTextMap","_createFieldDetailMap","fType","isAgg","hasDetailFilter","freeAggregate","cursorAt","setFormulaFieldType","getFormulaFieldType","allFieldItems","numberFieldItems","numberFieldIds","stringFieldItems","stringFieldIds","dateFieldItems","dateFieldIds","functionObjs","functionObj","addFunctionType","Service","OB","Svg","Raphael","customAttributes","ca","raphael","rect","circle","ellipse","setFinish","setViewBox","getById","getElementByPoint","getElementsByPoint","getFont","_AbstractEvent","_AbstractEvent2","default","_AbstractPlugin","_AbstractPlugin2","_closest","_requestNextAnimationFrame","_SensorEvent","_Sensor","_Sensor2","_DragEvent","_DraggableEvent","_Plugins","_Sensors","_Draggable","_Draggable2","_MouseSensor","_TouchSensor","_DragSensor","_ForceTouchSensor","_SnappableEvent","_CollidableEvent","_SortableEvent","_SwappableEvent","_DroppableEvent","_Announcement","_Focusable","_Mirror","_Scrollable","_extends","onSortableSorted","easingFunction","SwapAnimation","getOptions","lastAnimationFrame","attach","detach","swapAnimation","oldIndex","newIndex","dragEvent","animate","resetElementOnTransitionEnd","transition","_SwapAnimation","_SwapAnimation2","onDragStop","onDragOver","onDragOut","onMirrorCreated","onMirrorDestroy","Snappable","firstSource","canceled","snapInEvent","SnapInEvent","snappable","classList","getClassNameFor","placedTimeout","snapOutEvent","SnapOutEvent","SnapEvent","cancelable","_Snappable","_Snappable2","_utils","ResizeMirror","lastWidth","resizeMirror","overContainer","overElement","getDraggableElementsForContainer","requestNextAnimationFrame","overRect","_ResizeMirror","_ResizeMirror2","onDragMove","onRequestAnimationFrame","Collidable","currentlyCollidingElement","lastCollidingElement","currentAnimationFrame","getCollidables","collidables","querySelectorAll","NodeList","sensorEvent","collidableInEvent","cancel","CollidableInEvent","collidingElement","collidableOutEvent","CollidableOutEvent","enteringCollidable","leavingCollidable","CollidableEvent","_Collidable","_Collidable2","onDragOverContainer","defaultAnnouncements","overText","sourceText","textContent","isFollowing","compareDocumentPosition","DOCUMENT_POSITION_FOLLOWING","Sortable","containers","announcements","sortableStartEvent","SortableStartEvent","oldContainer","newContainer","sortableSortedEvent","sortableSortEvent","SortableSortEvent","currentIndex","moves","SortableSortedEvent","sortableStopEvent","SortableStopEvent","emptyOverContainer","differentContainer","sameContainer","insertBefore","nextElementSibling","SortableEvent","_Sortable","_Sortable2","swappedElement","Swappable","lastOver","_onDragStart","_onDragOver","_onDragStop","swappableStartEvent","SwappableStartEvent","swappableSwappedEvent","swappableSwapEvent","SwappableSwapEvent","swap","SwappableSwappedEvent","swappableStopEvent","SwappableStopEvent","tmpElement","overParent","sourceParent","SwappableEvent","_Swappable","_Swappable2","dropInDropzone","returnToOriginalDropzone","closestDropzone","getDropzones","dropzone","dropzoneText","defaultClasses","Droppable","dropzones","lastDropzone","initialDropzone","droppableStartEvent","DroppableStartEvent","dropzoneElement","droppableStopEvent","DroppableStopEvent","occupiedClass","droppableDroppedEvent","DroppableDroppedEvent","droppableReturnedEvent","DroppableReturnedEvent","DroppableEvent","_Droppable","_Droppable2","callbacks","caughtErrors","_Emitter","_Emitter2","onDragPressure","plugins","sensors","dragging","defaultPlugins","Plugins","Plugin","defaultSensors","MouseSensor","TouchSensor","addPlugin","addSensor","draggableInitializedEvent","DraggableInitializedEvent","draggableDestroyEvent","DraggableDestroyEvent","removePlugin","plugin","removeSensor","sensor","activePlugins","activeSensors","Sensor","addContainer","removeContainer","getDraggableElements","childElement","getSensorEvent","lastPlacedSource","lastPlacedContainer","placedTimeoutID","DragStartEvent","applyUserSelect","newSensorEvent","detail","isOverContainer","isOverDraggable","dragOverContainerEvent","dragOverEvent","dragMoveEvent","DragMoveEvent","withinCorrectContainer","isLeavingContainer","currentOverContainer","isLeavingDraggable","currentOver","dragOutEvent","DragOutEvent","dragOutContainerEvent","DragOutContainerEvent","DragOverContainerEvent","DragOverEvent","dragStopEvent","DragStopEvent","dragPressureEvent","DragPressureEvent","pressure","webkitUserSelect","mozUserSelect","msUserSelect","oUserSelect","userSelect","Announcement","Focusable","Mirror","Scrollable","onMouseForceWillBegin","onMouseForceDown","onMouseDown","onMouseForceChange","onMouseMove","onMouseUp","onMouseForceGlobalChange","ForceTouchSensor","mightDrag","dragStartEvent","elementFromPoint","clientX","clientY","DragStartSensorEvent","currentContainer","DragStopSensorEvent","stopImmediatePropagation","DragMoveSensorEvent","DragPressureSensorEvent","webkitForce","_ForceTouchSensor2","onDrop","DragSensor","mouseDownTimeout","draggableElement","nativeDraggableElement","dataTransfer","effectAllowed","dropEffect","form","contenteditable","_DragSensor2","onTouchStart","onTouchHold","onTouchEnd","onTouchMove","preventScrolling","passive","currentScrollableParent","tapTimeout","touchMoved","onContextMenu","touch","touches","changedTouches","scrollX","scrollY","_TouchSensor2","SensorEvent","onContextMenuWhileDragging","mouseDown","openedContextMenu","preventNativeDragStart","_MouseSensor2","createEvent","initEvent","dispatchEvent","lastEvent","_requestNextAnimationFrame2","singleElement","isSelector","isNodeList","isElement","currentElement","matchFunction","correspondingUseElement","correspondingElement","_closest2","speed","sensitivity","scrollableElements","currentMousePosition","scrollAnimationFrame","scrollableElement","findScrollableElementFrame","getScrollableElement","excludeStaticParents","hasDefinedScrollableElements","getPropertyValue","computedStyles","getDocumentScrollingElement","scrollOffset","pageXOffset","documentScrollingElement","bottomCutOff","topCutOff","scrollingElement","_Scrollable2","MirrorDestroyEvent","MirrorMoveEvent","MirrorAttachedEvent","MirrorCreatedEvent","MirrorCreateEvent","MirrorEvent","_MirrorEvent","getAppendableContainer","onMirrorMove","_objectWithoutProperties","constrainDimensions","xAxis","yAxis","cursorOffsetX","cursorOffsetY","initialScrollOffset","appendableContainer","mirrorCreatedEvent","mirrorAttachedEvent","mirrorCreateEvent","mirrorMoveEvent","mirrorDestroyEvent","mirrorOffset","initialX","initialY","initialState","mirrorClass","computeMirrorDimensions","calculateMirrorOffset","resetMirror","addMirrorClasses","positionMirror","initial","removeMirrorID","mirrorEvent","raf","_ref2","withPromise","sourceRect","_ref3","_ref4","computedSourceStyles","_ref5","_ref6","withFrame","_ref7","frame","reject","_Mirror2","onInitialize","onDestroy","focusable","getElements","elementsWithMissingTabIndex","tabIndexElementPosition","_Focusable2","announceEvent","announceMessage","expire","originalTriggerMethod","liveRegion","_Announcement2","DraggableEvent","AbstractEvent","DragEvent","Sensors","BasePlugin","BaseEvent","_interopRequireWildcard","newObj","ComplexFormulaInserter","RegularFormulaInserter","FormulaOpeartingPanel","ParameterEditor","initSocket","HTapeLayout","Label","flag","keepFormulaWhenExportOrEdit","keepFormulaWhenReportOrAnalyze","VerticalAdaptLayout","MultiSelectItem","exportOrEditCheckbox","reportOrAnalyzeCheckbox","AbsoluteLayout","FormulaModel","inserterType","configLoader","functionNames","functionNameGroup","scrollFunctionName2View","selectedFunctionNameOrVarName","selectedFunctionType","functionTypeGroup","functionDescription","descriptionLabel","relatedFunctionNames","relatedFunctionName","relatedFunctionNameGroup","setSelectedFunctionName","transformFormulaJSONs2FunctionTypes","varTree","transformFormulaVarItems","LeftRightVerticalAdaptLayout","searchEditor","searchPaneWidth","EVENT_ENTER","EVENT_EMPTY","VerticalLayout","setSelectedFunctionType","_type","_widget","CustomTree","Selection","setSelectedVarName","beforeRender","isFormulaConfigCached","loading","loaded","setFormulaConfigCache","DEFAULT_FUNCTION_NAME","functionNameWidget","needScrollToView","getAllButtons","scrollIntoView","loadConfigData","getFunctionDescriptionByFunctionName","getVarDescriptionByVarName","getSearchedFunctionNames","_functionName","speculatedFunctionType","getFunctionTypeByFunctionName","DEFAULT_FUNCTION_TYPE","ParameterModel","defaultHeaderItems","parameters","parameterInputs","renderParameterInputs","selectedId","setDefaultValue","renderHeader","CenterLayout","ParameterHeader","removeSelectedItem","moveUp","moveDown","setParameters","confirm","removeSelectedParameter","alert","ParameterInput","inputName","inputValue","inputType","oldItem","ParameterInputModel","Editor","allowBlank","parameterName","TextEditor","tab","setSelect","setParameterName","setSelectedId","single","showIndex","cardCreator","renderInputs","getInput","renderDownList","typeValue","setParameterValue","InputBoolean","InputDate","dates","DynamicDateCombo","year","day","InputInt","isInteger","InputDouble","InputString","InputFormula","thisParameter","getParameter","renderItem","headerItemsData","initJavaxWebSocket","requestUrl","contextPath","webSocketNameSpace","extraOptions","contextName","socket","io","location","port","transports","timeout","fallback","initFallbackWebSocket","ports","webSocketPort","webSocketContextName","opts","uri","connect","manager","cb","useJavaxWebSocket","isMasked","reIsHostCtor","funcProto","reIsNative","nativeObjectToString","isOwn","unmasked","coreJsData","maskSrcKey","uid","IE_PROTO","typedArrayTags","baseIsMatch","getMatchData","matchesStrictComparable","matchData","noCustomizer","COMPARE_PARTIAL_FLAG","assocIndexOf","pairs","LARGE_ARRAY_SIZE","Hash","hashClear","hashDelete","hashGet","hashHas","hashSet","getMapData","equalArrays","equalByTag","equalObjects","argsTag","arrayTag","objectTag","objIsArr","othIsArr","objTag","othTag","objIsObj","othIsObj","isSameTag","objIsWrapped","othIsWrapped","mapToArray","setToArray","symbolProto","symbolValueOf","valueOf","byteOffset","convert","stacked","getAllKeys","objProps","objLength","objStacked","skipCtor","objCtor","othCtor","isStrictComparable","hasIn","memoizeCapped","rePropName","reEscapeChar","subString","memoize","resolver","memoized","Cache","symbolToString","baseHasIn","baseProperty","basePropertyDeep","baseFor","iterable","eachFunc","baseAssign","baseAssignIn","cloneBuffer","copyArray","copySymbols","copySymbolsIn","initCloneArray","initCloneByTag","initCloneObject","isMap","isSet","funcTag","cloneableTags","isDeep","isFlat","isFull","isFunc","subValue","nativeKeysIn","isProto","allocUnsafe","cloneArrayBuffer","cloneDataView","cloneRegExp","cloneSymbol","cloneTypedArray","dataView","reFlags","regexp","typedArray","baseCreate","objectCreate","baseIsMap","nodeIsMap","baseIsSet","nodeIsSet","getTime","toBecomeFast","FakeConstructor","fakeInstance","fakeAccess","bar","buildInProdFollowPrefix","buildBetweenProdsFollowPrefix","ResyncFollowsWalker","t_in_topProd_follows","occurenceInParent","topProductions","reSyncFollows","currRefsFollow","toNumber","baseTrim","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","isBinary","trimmedEndIndex","reTrimStart","reWhitespace","baseSet","nested","assigner","otherArgs","thisArg","baseSetToString","nativeNow","now","lastCalled","stamp","remaining","nodeAny","visitRule","some_1","alreadyVisited","spreadableSymbol","isConcatSpreadable","arrayIncludes","arrayIncludesWith","createSet","isCommon","outer","seenIndex","noop","valuesLength","valuesIndex","findIndexFunc","firstCharOptimizedIndices","complementErrorMessage","ast","addOptimizedIdxToResult","rangeCode","minUnOptVal","maxUnOptVal","minOptIdx","maxOptIdx","currOptIdx","isOptionalQuantifier","isWholeOptional","upperChar","lowerChar","findCode","setNode","targetCharCodes","codeOrRange","range_1","targetCode","msgSuffix","CharCodeFinder","charCodes","charCodeFinder","resolver_1","checks_1","actualOptions","topRulesTable","GastRefResolverVisitor","refResolver","resolveRefs","nameToTopRule","UNRESOLVED_SUBRULE_REF","unresolvedRefName","arrayAggregator","baseAggregator","setter","initializer","collectMethods","DslMethodsCollectorVisitor","dslMethods","repetitionWithSeparator","repetitionMandatory","repetitionMandatoryWithSeparator","lookAheadFuncsCache","prodIdx","laFunc","lookAheadBuilderForAlternatives","fullRuleNameToShort","setLaFuncCache","computeLookaheadFunc","prodKey","prodMaxLookahead","dslMethodName","lookAheadBuilderForOptional","getLaFuncFromCache","cst_1","cst_visitor_1","CST_STACK","setNodeLocationFromToken","setNodeLocationFull","setNodeLocationFromNode","cstPostRule","setInitialNodeLocation","setInitialNodeLocationFullRecovery","cstPostRuleFull","setInitialNodeLocationFullRegular","setNodeLocationOnlyOffset","setInitialNodeLocationOnlyOffsetRecovery","cstPostRuleOnlyOffset","setInitialNodeLocationOnlyOffsetRegular","cstInvocationStateUpdate","cstFinallyStateUpdate","cstPostTerminal","cstPostNonTerminal","cstNode","fullRuleName","ruleCstNode","prevToken","consumedToken","rootCst","addTerminalToCst","ruleCstResult","preCstNode","addNoneTerminalToCst","newBaseCstVisitorConstructor","baseCstVisitorConstructor","createBaseSemanticVisitorConstructor","getBaseCstVisitorConstructorWithDefaults","newConstructor","baseCstVisitorWithDefaultsConstructor","createBaseVisitorConstructorWithDefaults","currNodeLocation","newLocationInfo","isNaN","tokenTypeName","ruleResult","CstVisitorDefinitionError","validateMissingCstMethods","defaultVisit","lang_extensions_1","childrenNames","childrenNamesLength","currChildArray","currChildArrayLength","currChild","visitorInstance","ruleNames","missingRuleNames","MISSING_METHOD","methodName","derivedConstructor","defineNameProp","semanticDefinitionErrors","errorMessages","currDefError","_RULE_NAMES","baseConstructor","withDefaultsProto","nameValue","tokVector","tokVectorLength","newInput","soughtIdx","resetLexerState","moveToTerminatedState","getLexerPosition","ACTION","impl","consume","consumeInternal","ruleToCall","subruleInternal","actionORMethodDef","optionInternal","altsOrOpts","orInternal","manyInternal","atLeastOneInternal","CONSUME1","CONSUME2","CONSUME3","CONSUME4","CONSUME5","CONSUME6","CONSUME7","CONSUME8","CONSUME9","SUBRULE1","SUBRULE3","SUBRULE4","SUBRULE5","SUBRULE6","SUBRULE7","SUBRULE8","SUBRULE9","OPTION1","OPTION2","OPTION3","OPTION4","OPTION5","OPTION6","OPTION7","OPTION8","OPTION9","OR1","OR2","OR3","OR4","OR5","OR6","OR7","OR8","OR9","MANY1","MANY2","MANY3","MANY4","MANY5","MANY6","MANY7","MANY8","MANY9","manySepFirstInternal","MANY_SEP1","MANY_SEP2","MANY_SEP3","MANY_SEP4","MANY_SEP5","MANY_SEP6","MANY_SEP7","MANY_SEP8","MANY_SEP9","AT_LEAST_ONE","AT_LEAST_ONE1","AT_LEAST_ONE2","AT_LEAST_ONE3","AT_LEAST_ONE4","AT_LEAST_ONE5","AT_LEAST_ONE6","AT_LEAST_ONE7","AT_LEAST_ONE8","AT_LEAST_ONE9","atLeastOneSepFirstInternal","AT_LEAST_ONE_SEP1","AT_LEAST_ONE_SEP2","AT_LEAST_ONE_SEP3","AT_LEAST_ONE_SEP4","AT_LEAST_ONE_SEP5","AT_LEAST_ONE_SEP6","AT_LEAST_ONE_SEP7","AT_LEAST_ONE_SEP8","AT_LEAST_ONE_SEP9","implementation","ruleImplementation","defineRule","OVERRIDE_RULE","ruleErrors","BACKTRACK","isBackTrackingStack","orgState","saveRecogState","reloadRecogState","getSerializedGastProductions","isObject_1","shortRuleNameToFull","ruleShortNameIdx","subruleIdx","allTokenTypes_1","uniqueTokens","noTokenCategoriesUsed","tokenConstructor","invokeRuleWithTry","shortName","_i","ruleInvocationStateUpdate","invokeRuleCatch","ruleFinallyStateUpdate","resyncEnabledConfig","isFirstInvokedRule","reSyncEnabled","recogError","partialCstResult","recoveredNode","optionInternalLogic","predicate_1","orgLookaheadFunction_1","laKey","atLeastOneInternalLogic","predicate_2","orgLookaheadFunction_2","raiseEarlyExitException","ERR_MSG","doSingleRepetition","atLeastOneSepFirstInternalLogic","separatorLookAheadFunc","repetitionSepSecondInternal","manyInternalLogic","predicate_3","orgLookaheadFunction_3","lookaheadFunction","manySepFirstInternalLogic","nextTerminalAfterWalker","beforeIteration","altIdxToTake","raiseNoAltException","firstRedundantTok","isAtEndOfInput","ARGS","subruleInternalError","consumeInternalError","eFromConsumption","consumeInternalRecovery","eFromInRuleRecovery","savedErrors","savedRuleStack","lexerState","fullName","_errors","ruleOccurrenceStack","newErrors","userDefinedErrMsg","insideProdPaths","actualTokens","errMsgTypes","lookAheadPathsPerAlternative","computeContentAssist","startRuleName","precedingInput","startRuleGast","topRuleName","topProduction","RECORDING_NULL_OBJECT","MAX_METHOD_IDX","pow","RFT","RECORDING_PHASE_TOKEN","RECORDING_PHASE_CSTNODE","recordProd","prodConstructor","mainProdArg","handleSep","assertMethodIdxIsValid","prevProd","recordingProdStack","grammarAction","newProd","MAX_LOOKAHEAD","getIdxSuffix","KNOWN_RECORDER_ERROR","RECORDING_PHASE","arg1","arg2","consumeInternalRecord","subruleInternalRecord","optionInternalRecord","orInternalRecord","manyInternalRecord","manySepFirstInternalRecord","atLeastOneInternalRecord","atLeastOneSepFirstInternalRecord","ACTION_RECORD","BACKTRACK_RECORD","LA_RECORD","newTopLevelRule","originalError","mutabilityError","hasOptions","newOrProd","IGNORE_AMBIGUITIES","currAltFlat","newNoneTerminal","traceIsNumber","userTraceInitPerf","derivedCtor","baseCtors","baseCtor","baseProto","getOwnPropertyNames","basePropDescriptor","getOwnPropertyDescriptor","__assign","generate_1","includeVisitorInterface","visitorInterfaceName","productions","effectiveOptions","buildModel","genDts","generator","CstNodeDefinitionGenerator","rawElements","visitEach","grouped","propertyName","properties","allNullable","canBeNull","propertyType","optional","visitEachAndOverrideWith","override","production","kind","upperFirst_1","getTypeString","getNodeInterfaceName","getNodeChildrenTypeName","contentParts","nodeCstInterface","nodeInterfaceName","childrenTypeName","nodeChildrenInterface","typeName","typeNames","upperFirst","castSlice","hasUnicode","stringToArray","strSymbols","chr","trailing","asciiToArray","unicodeToArray","rsAstralRange","rsAstral","rsCombo","rsFitz","rsNonAstral","rsRegional","rsSurrPair","reOptMod","rsModifier","rsOptVar","rsSeq","rsSymbol","reUnicode","grammar","resourceBase","_c","_b","_d","stringSize","asciiSize","unicodeSize","resourceURL"],"mappings":"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","file":"materials.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 543);\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nmodule.exports = isArray;\n","export const { shortcut, Model, model, store } = BI.Decorators;\r\n\r\nexport type Constructor<T> = new(...args: any[]) => T;\r\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isSequenceProd = exports.isBranchingProd = exports.isOptionalProd = exports.getProductionDslName = exports.GAstVisitor = exports.serializeProduction = exports.serializeGrammar = exports.Alternative = exports.Alternation = exports.RepetitionWithSeparator = exports.RepetitionMandatoryWithSeparator = exports.RepetitionMandatory = exports.Repetition = exports.Option = exports.NonTerminal = exports.Terminal = exports.Rule = void 0;\nvar model_1 = require(\"./model\");\nObject.defineProperty(exports, \"Rule\", { enumerable: true, get: function () { return model_1.Rule; } });\nObject.defineProperty(exports, \"Terminal\", { enumerable: true, get: function () { return model_1.Terminal; } });\nObject.defineProperty(exports, \"NonTerminal\", { enumerable: true, get: function () { return model_1.NonTerminal; } });\nObject.defineProperty(exports, \"Option\", { enumerable: true, get: function () { return model_1.Option; } });\nObject.defineProperty(exports, \"Repetition\", { enumerable: true, get: function () { return model_1.Repetition; } });\nObject.defineProperty(exports, \"RepetitionMandatory\", { enumerable: true, get: function () { return model_1.RepetitionMandatory; } });\nObject.defineProperty(exports, \"RepetitionMandatoryWithSeparator\", { enumerable: true, get: function () { return model_1.RepetitionMandatoryWithSeparator; } });\nObject.defineProperty(exports, \"RepetitionWithSeparator\", { enumerable: true, get: function () { return model_1.RepetitionWithSeparator; } });\nObject.defineProperty(exports, \"Alternation\", { enumerable: true, get: function () { return model_1.Alternation; } });\nObject.defineProperty(exports, \"Alternative\", { enumerable: true, get: function () { return model_1.Alternative; } });\nObject.defineProperty(exports, \"serializeGrammar\", { enumerable: true, get: function () { return model_1.serializeGrammar; } });\nObject.defineProperty(exports, \"serializeProduction\", { enumerable: true, get: function () { return model_1.serializeProduction; } });\nvar visitor_1 = require(\"./visitor\");\nObject.defineProperty(exports, \"GAstVisitor\", { enumerable: true, get: function () { return visitor_1.GAstVisitor; } });\nvar helpers_1 = require(\"./helpers\");\nObject.defineProperty(exports, \"getProductionDslName\", { enumerable: true, get: function () { return helpers_1.getProductionDslName; } });\nObject.defineProperty(exports, \"isOptionalProd\", { enumerable: true, get: function () { return helpers_1.isOptionalProd; } });\nObject.defineProperty(exports, \"isBranchingProd\", { enumerable: true, get: function () { return helpers_1.isBranchingProd; } });\nObject.defineProperty(exports, \"isSequenceProd\", { enumerable: true, get: function () { return helpers_1.isSequenceProd; } });\n","var arrayEach = require('./_arrayEach'),\n    baseEach = require('./_baseEach'),\n    castFunction = require('./_castFunction'),\n    isArray = require('./isArray');\n\n/**\n * Iterates over elements of `collection` and invokes `iteratee` for each element.\n * The iteratee is invoked with three arguments: (value, index|key, collection).\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * **Note:** As with other \"Collections\" methods, objects with a \"length\"\n * property are iterated like arrays. To avoid this behavior use `_.forIn`\n * or `_.forOwn` for object iteration.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @alias each\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Array|Object} Returns `collection`.\n * @see _.forEachRight\n * @example\n *\n * _.forEach([1, 2], function(value) {\n *   console.log(value);\n * });\n * // => Logs `1` then `2`.\n *\n * _.forEach({ 'a': 1, 'b': 2 }, function(value, key) {\n *   console.log(key);\n * });\n * // => Logs 'a' then 'b' (iteration order is not guaranteed).\n */\nfunction forEach(collection, iteratee) {\n  var func = isArray(collection) ? arrayEach : baseEach;\n  return func(collection, castFunction(iteratee));\n}\n\nmodule.exports = forEach;\n","var arrayMap = require('./_arrayMap'),\n    baseIteratee = require('./_baseIteratee'),\n    baseMap = require('./_baseMap'),\n    isArray = require('./isArray');\n\n/**\n * Creates an array of values by running each element in `collection` thru\n * `iteratee`. The iteratee is invoked with three arguments:\n * (value, index|key, collection).\n *\n * Many lodash methods are guarded to work as iteratees for methods like\n * `_.every`, `_.filter`, `_.map`, `_.mapValues`, `_.reject`, and `_.some`.\n *\n * The guarded methods are:\n * `ary`, `chunk`, `curry`, `curryRight`, `drop`, `dropRight`, `every`,\n * `fill`, `invert`, `parseInt`, `random`, `range`, `rangeRight`, `repeat`,\n * `sampleSize`, `slice`, `some`, `sortBy`, `split`, `take`, `takeRight`,\n * `template`, `trim`, `trimEnd`, `trimStart`, and `words`\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n * @example\n *\n * function square(n) {\n *   return n * n;\n * }\n *\n * _.map([4, 8], square);\n * // => [16, 64]\n *\n * _.map({ 'a': 4, 'b': 8 }, square);\n * // => [16, 64] (iteration order is not guaranteed)\n *\n * var users = [\n *   { 'user': 'barney' },\n *   { 'user': 'fred' }\n * ];\n *\n * // The `_.property` iteratee shorthand.\n * _.map(users, 'user');\n * // => ['barney', 'fred']\n */\nfunction map(collection, iteratee) {\n  var func = isArray(collection) ? arrayMap : baseMap;\n  return func(collection, baseIteratee(iteratee, 3));\n}\n\nmodule.exports = map;\n","var arrayLikeKeys = require('./_arrayLikeKeys'),\n    baseKeys = require('./_baseKeys'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\nmodule.exports = keys;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EmbeddedActionsParser = exports.CstParser = exports.Parser = exports.EMPTY_ALT = exports.ParserDefinitionErrorType = exports.DEFAULT_RULE_CONFIG = exports.DEFAULT_PARSER_CONFIG = exports.END_OF_FILE = void 0;\nvar isEmpty_1 = __importDefault(require(\"lodash/isEmpty\"));\nvar map_1 = __importDefault(require(\"lodash/map\"));\nvar forEach_1 = __importDefault(require(\"lodash/forEach\"));\nvar values_1 = __importDefault(require(\"lodash/values\"));\nvar has_1 = __importDefault(require(\"lodash/has\"));\nvar clone_1 = __importDefault(require(\"lodash/clone\"));\nvar utils_1 = require(\"@chevrotain/utils\");\nvar follow_1 = require(\"../grammar/follow\");\nvar tokens_public_1 = require(\"../../scan/tokens_public\");\nvar errors_public_1 = require(\"../errors_public\");\nvar gast_resolver_public_1 = require(\"../grammar/gast/gast_resolver_public\");\nvar recoverable_1 = require(\"./traits/recoverable\");\nvar looksahead_1 = require(\"./traits/looksahead\");\nvar tree_builder_1 = require(\"./traits/tree_builder\");\nvar lexer_adapter_1 = require(\"./traits/lexer_adapter\");\nvar recognizer_api_1 = require(\"./traits/recognizer_api\");\nvar recognizer_engine_1 = require(\"./traits/recognizer_engine\");\nvar error_handler_1 = require(\"./traits/error_handler\");\nvar context_assist_1 = require(\"./traits/context_assist\");\nvar gast_recorder_1 = require(\"./traits/gast_recorder\");\nvar perf_tracer_1 = require(\"./traits/perf_tracer\");\nvar apply_mixins_1 = require(\"./utils/apply_mixins\");\nexports.END_OF_FILE = (0, tokens_public_1.createTokenInstance)(tokens_public_1.EOF, \"\", NaN, NaN, NaN, NaN, NaN, NaN);\nObject.freeze(exports.END_OF_FILE);\nexports.DEFAULT_PARSER_CONFIG = Object.freeze({\n    recoveryEnabled: false,\n    maxLookahead: 3,\n    dynamicTokensEnabled: false,\n    outputCst: true,\n    errorMessageProvider: errors_public_1.defaultParserErrorProvider,\n    nodeLocationTracking: \"none\",\n    traceInitPerf: false,\n    skipValidations: false\n});\nexports.DEFAULT_RULE_CONFIG = Object.freeze({\n    recoveryValueFunc: function () { return undefined; },\n    resyncEnabled: true\n});\nvar ParserDefinitionErrorType;\n(function (ParserDefinitionErrorType) {\n    ParserDefinitionErrorType[ParserDefinitionErrorType[\"INVALID_RULE_NAME\"] = 0] = \"INVALID_RULE_NAME\";\n    ParserDefinitionErrorType[ParserDefinitionErrorType[\"DUPLICATE_RULE_NAME\"] = 1] = \"DUPLICATE_RULE_NAME\";\n    ParserDefinitionErrorType[ParserDefinitionErrorType[\"INVALID_RULE_OVERRIDE\"] = 2] = \"INVALID_RULE_OVERRIDE\";\n    ParserDefinitionErrorType[ParserDefinitionErrorType[\"DUPLICATE_PRODUCTIONS\"] = 3] = \"DUPLICATE_PRODUCTIONS\";\n    ParserDefinitionErrorType[ParserDefinitionErrorType[\"UNRESOLVED_SUBRULE_REF\"] = 4] = \"UNRESOLVED_SUBRULE_REF\";\n    ParserDefinitionErrorType[ParserDefinitionErrorType[\"LEFT_RECURSION\"] = 5] = \"LEFT_RECURSION\";\n    ParserDefinitionErrorType[ParserDefinitionErrorType[\"NONE_LAST_EMPTY_ALT\"] = 6] = \"NONE_LAST_EMPTY_ALT\";\n    ParserDefinitionErrorType[ParserDefinitionErrorType[\"AMBIGUOUS_ALTS\"] = 7] = \"AMBIGUOUS_ALTS\";\n    ParserDefinitionErrorType[ParserDefinitionErrorType[\"CONFLICT_TOKENS_RULES_NAMESPACE\"] = 8] = \"CONFLICT_TOKENS_RULES_NAMESPACE\";\n    ParserDefinitionErrorType[ParserDefinitionErrorType[\"INVALID_TOKEN_NAME\"] = 9] = \"INVALID_TOKEN_NAME\";\n    ParserDefinitionErrorType[ParserDefinitionErrorType[\"NO_NON_EMPTY_LOOKAHEAD\"] = 10] = \"NO_NON_EMPTY_LOOKAHEAD\";\n    ParserDefinitionErrorType[ParserDefinitionErrorType[\"AMBIGUOUS_PREFIX_ALTS\"] = 11] = \"AMBIGUOUS_PREFIX_ALTS\";\n    ParserDefinitionErrorType[ParserDefinitionErrorType[\"TOO_MANY_ALTS\"] = 12] = \"TOO_MANY_ALTS\";\n})(ParserDefinitionErrorType = exports.ParserDefinitionErrorType || (exports.ParserDefinitionErrorType = {}));\nfunction EMPTY_ALT(value) {\n    if (value === void 0) { value = undefined; }\n    return function () {\n        return value;\n    };\n}\nexports.EMPTY_ALT = EMPTY_ALT;\nvar Parser = /** @class */ (function () {\n    function Parser(tokenVocabulary, config) {\n        this.definitionErrors = [];\n        this.selfAnalysisDone = false;\n        var that = this;\n        that.initErrorHandler(config);\n        that.initLexerAdapter();\n        that.initLooksAhead(config);\n        that.initRecognizerEngine(tokenVocabulary, config);\n        that.initRecoverable(config);\n        that.initTreeBuilder(config);\n        that.initContentAssist();\n        that.initGastRecorder(config);\n        that.initPerformanceTracer(config);\n        if ((0, has_1.default)(config, \"ignoredIssues\")) {\n            throw new Error(\"The <ignoredIssues> IParserConfig property has been deprecated.\\n\\t\" +\n                \"Please use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.\\n\\t\" +\n                \"See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES\\n\\t\" +\n                \"For further details.\");\n        }\n        this.skipValidations = (0, has_1.default)(config, \"skipValidations\")\n            ? config.skipValidations // casting assumes the end user passing the correct type\n            : exports.DEFAULT_PARSER_CONFIG.skipValidations;\n    }\n    /**\n     *  @deprecated use the **instance** method with the same name instead\n     */\n    Parser.performSelfAnalysis = function (parserInstance) {\n        throw Error(\"The **static** `performSelfAnalysis` method has been deprecated.\" +\n            \"\\t\\nUse the **instance** method with the same name instead.\");\n    };\n    Parser.prototype.performSelfAnalysis = function () {\n        var _this = this;\n        this.TRACE_INIT(\"performSelfAnalysis\", function () {\n            var defErrorsMsgs;\n            _this.selfAnalysisDone = true;\n            var className = _this.className;\n            _this.TRACE_INIT(\"toFastProps\", function () {\n                // Without this voodoo magic the parser would be x3-x4 slower\n                // It seems it is better to invoke `toFastProperties` **before**\n                // Any manipulations of the `this` object done during the recording phase.\n                (0, utils_1.toFastProperties)(_this);\n            });\n            _this.TRACE_INIT(\"Grammar Recording\", function () {\n                try {\n                    _this.enableRecording();\n                    // Building the GAST\n                    (0, forEach_1.default)(_this.definedRulesNames, function (currRuleName) {\n                        var wrappedRule = _this[currRuleName];\n                        var originalGrammarAction = wrappedRule[\"originalGrammarAction\"];\n                        var recordedRuleGast;\n                        _this.TRACE_INIT(\"\".concat(currRuleName, \" Rule\"), function () {\n                            recordedRuleGast = _this.topLevelRuleRecord(currRuleName, originalGrammarAction);\n                        });\n                        _this.gastProductionsCache[currRuleName] = recordedRuleGast;\n                    });\n                }\n                finally {\n                    _this.disableRecording();\n                }\n            });\n            var resolverErrors = [];\n            _this.TRACE_INIT(\"Grammar Resolving\", function () {\n                resolverErrors = (0, gast_resolver_public_1.resolveGrammar)({\n                    rules: (0, values_1.default)(_this.gastProductionsCache)\n                });\n                _this.definitionErrors = _this.definitionErrors.concat(resolverErrors);\n            });\n            _this.TRACE_INIT(\"Grammar Validations\", function () {\n                // only perform additional grammar validations IFF no resolving errors have occurred.\n                // as unresolved grammar may lead to unhandled runtime exceptions in the follow up validations.\n                if ((0, isEmpty_1.default)(resolverErrors) && _this.skipValidations === false) {\n                    var validationErrors = (0, gast_resolver_public_1.validateGrammar)({\n                        rules: (0, values_1.default)(_this.gastProductionsCache),\n                        maxLookahead: _this.maxLookahead,\n                        tokenTypes: (0, values_1.default)(_this.tokensMap),\n                        errMsgProvider: errors_public_1.defaultGrammarValidatorErrorProvider,\n                        grammarName: className\n                    });\n                    _this.definitionErrors = _this.definitionErrors.concat(validationErrors);\n                }\n            });\n            // this analysis may fail if the grammar is not perfectly valid\n            if ((0, isEmpty_1.default)(_this.definitionErrors)) {\n                // The results of these computations are not needed unless error recovery is enabled.\n                if (_this.recoveryEnabled) {\n                    _this.TRACE_INIT(\"computeAllProdsFollows\", function () {\n                        var allFollows = (0, follow_1.computeAllProdsFollows)((0, values_1.default)(_this.gastProductionsCache));\n                        _this.resyncFollows = allFollows;\n                    });\n                }\n                _this.TRACE_INIT(\"ComputeLookaheadFunctions\", function () {\n                    _this.preComputeLookaheadFunctions((0, values_1.default)(_this.gastProductionsCache));\n                });\n            }\n            if (!Parser.DEFER_DEFINITION_ERRORS_HANDLING &&\n                !(0, isEmpty_1.default)(_this.definitionErrors)) {\n                defErrorsMsgs = (0, map_1.default)(_this.definitionErrors, function (defError) { return defError.message; });\n                throw new Error(\"Parser Definition Errors detected:\\n \".concat(defErrorsMsgs.join(\"\\n-------------------------------\\n\")));\n            }\n        });\n    };\n    // Set this flag to true if you don't want the Parser to throw error when problems in it's definition are detected.\n    // (normally during the parser's constructor).\n    // This is a design time flag, it will not affect the runtime error handling of the parser, just design time errors,\n    // for example: duplicate rule names, referencing an unresolved subrule, ect...\n    // This flag should not be enabled during normal usage, it is used in special situations, for example when\n    // needing to display the parser definition errors in some GUI(online playground).\n    Parser.DEFER_DEFINITION_ERRORS_HANDLING = false;\n    return Parser;\n}());\nexports.Parser = Parser;\n(0, apply_mixins_1.applyMixins)(Parser, [\n    recoverable_1.Recoverable,\n    looksahead_1.LooksAhead,\n    tree_builder_1.TreeBuilder,\n    lexer_adapter_1.LexerAdapter,\n    recognizer_engine_1.RecognizerEngine,\n    recognizer_api_1.RecognizerApi,\n    error_handler_1.ErrorHandler,\n    context_assist_1.ContentAssist,\n    gast_recorder_1.GastRecorder,\n    perf_tracer_1.PerformanceTracer\n]);\nvar CstParser = /** @class */ (function (_super) {\n    __extends(CstParser, _super);\n    function CstParser(tokenVocabulary, config) {\n        if (config === void 0) { config = exports.DEFAULT_PARSER_CONFIG; }\n        var configClone = (0, clone_1.default)(config);\n        configClone.outputCst = true;\n        return _super.call(this, tokenVocabulary, configClone) || this;\n    }\n    return CstParser;\n}(Parser));\nexports.CstParser = CstParser;\nvar EmbeddedActionsParser = /** @class */ (function (_super) {\n    __extends(EmbeddedActionsParser, _super);\n    function EmbeddedActionsParser(tokenVocabulary, config) {\n        if (config === void 0) { config = exports.DEFAULT_PARSER_CONFIG; }\n        var configClone = (0, clone_1.default)(config);\n        configClone.outputCst = false;\n        return _super.call(this, tokenVocabulary, configClone) || this;\n    }\n    return EmbeddedActionsParser;\n}(Parser));\nexports.EmbeddedActionsParser = EmbeddedActionsParser;\n","var baseHas = require('./_baseHas'),\n    hasPath = require('./_hasPath');\n\n/**\n * Checks if `path` is a direct property of `object`.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n * @example\n *\n * var object = { 'a': { 'b': 2 } };\n * var other = _.create({ 'a': _.create({ 'b': 2 }) });\n *\n * _.has(object, 'a');\n * // => true\n *\n * _.has(object, 'a.b');\n * // => true\n *\n * _.has(object, ['a', 'b']);\n * // => true\n *\n * _.has(other, 'a');\n * // => false\n */\nfunction has(object, path) {\n  return object != null && hasPath(object, path, baseHas);\n}\n\nmodule.exports = has;\n","var isFunction = require('./isFunction'),\n    isLength = require('./isLength');\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\nmodule.exports = isArrayLike;\n","var baseKeys = require('./_baseKeys'),\n    getTag = require('./_getTag'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isArrayLike = require('./isArrayLike'),\n    isBuffer = require('./isBuffer'),\n    isPrototype = require('./_isPrototype'),\n    isTypedArray = require('./isTypedArray');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    setTag = '[object Set]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if `value` is an empty object, collection, map, or set.\n *\n * Objects are considered empty if they have no own enumerable string keyed\n * properties.\n *\n * Array-like values such as `arguments` objects, arrays, buffers, strings, or\n * jQuery-like collections are considered empty if they have a `length` of `0`.\n * Similarly, maps and sets are considered empty if they have a `size` of `0`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is empty, else `false`.\n * @example\n *\n * _.isEmpty(null);\n * // => true\n *\n * _.isEmpty(true);\n * // => true\n *\n * _.isEmpty(1);\n * // => true\n *\n * _.isEmpty([1, 2, 3]);\n * // => false\n *\n * _.isEmpty({ 'a': 1 });\n * // => false\n */\nfunction isEmpty(value) {\n  if (value == null) {\n    return true;\n  }\n  if (isArrayLike(value) &&\n      (isArray(value) || typeof value == 'string' || typeof value.splice == 'function' ||\n        isBuffer(value) || isTypedArray(value) || isArguments(value))) {\n    return !value.length;\n  }\n  var tag = getTag(value);\n  if (tag == mapTag || tag == setTag) {\n    return !value.size;\n  }\n  if (isPrototype(value)) {\n    return !baseKeys(value).length;\n  }\n  for (var key in value) {\n    if (hasOwnProperty.call(value, key)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nmodule.exports = isEmpty;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","var baseMatches = require('./_baseMatches'),\n    baseMatchesProperty = require('./_baseMatchesProperty'),\n    identity = require('./identity'),\n    isArray = require('./isArray'),\n    property = require('./property');\n\n/**\n * The base implementation of `_.iteratee`.\n *\n * @private\n * @param {*} [value=_.identity] The value to convert to an iteratee.\n * @returns {Function} Returns the iteratee.\n */\nfunction baseIteratee(value) {\n  // Don't store the `typeof` result in a variable to avoid a JIT bug in Safari 9.\n  // See https://bugs.webkit.org/show_bug.cgi?id=156034 for more details.\n  if (typeof value == 'function') {\n    return value;\n  }\n  if (value == null) {\n    return identity;\n  }\n  if (typeof value == 'object') {\n    return isArray(value)\n      ? baseMatchesProperty(value[0], value[1])\n      : baseMatches(value);\n  }\n  return property(value);\n}\n\nmodule.exports = baseIteratee;\n","import { inputTypes } from \"../../parameter\";\r\n\r\nconst inputs: {\r\n    [key: string]: any;\r\n} = {};\r\n\r\nexport function input(key: inputTypes): ClassDecorator {\r\n    return (target: object) => {\r\n        inputs[key] = target;\r\n    };\r\n}\r\n\r\nexport function getInput(type: inputTypes): string {\r\n    const inputWidget = inputs[type];\r\n    if (BI.isNull(inputWidget)) {\r\n        throw new TypeError();\r\n    }\r\n\r\n    return inputWidget.xtype;\r\n}\r\n","var baseValues = require('./_baseValues'),\n    keys = require('./keys');\n\n/**\n * Creates an array of the own enumerable string keyed property values of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property values.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.values(new Foo);\n * // => [1, 2] (iteration order is not guaranteed)\n *\n * _.values('hi');\n * // => ['h', 'i']\n */\nfunction values(object) {\n  return object == null ? [] : baseValues(object, keys(object));\n}\n\nmodule.exports = values;\n","var baseFlatten = require('./_baseFlatten');\n\n/**\n * Flattens `array` a single level deep.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to flatten.\n * @returns {Array} Returns the new flattened array.\n * @example\n *\n * _.flatten([1, [2, [3, [4]], 5]]);\n * // => [1, 2, [3, [4]], 5]\n */\nfunction flatten(array) {\n  var length = array == null ? 0 : array.length;\n  return length ? baseFlatten(array, 1) : [];\n}\n\nmodule.exports = flatten;\n","var baseClone = require('./_baseClone');\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * Creates a shallow clone of `value`.\n *\n * **Note:** This method is loosely based on the\n * [structured clone algorithm](https://mdn.io/Structured_clone_algorithm)\n * and supports cloning arrays, array buffers, booleans, date objects, maps,\n * numbers, `Object` objects, regexes, sets, strings, symbols, and typed\n * arrays. The own enumerable properties of `arguments` objects are cloned\n * as plain objects. An empty object is returned for uncloneable values such\n * as error objects, functions, DOM nodes, and WeakMaps.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to clone.\n * @returns {*} Returns the cloned value.\n * @see _.cloneDeep\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var shallow = _.clone(objects);\n * console.log(shallow[0] === objects[0]);\n * // => true\n */\nfunction clone(value) {\n  return baseClone(value, CLONE_SYMBOLS_FLAG);\n}\n\nmodule.exports = clone;\n","var baseIndexOf = require('./_baseIndexOf'),\n    isArrayLike = require('./isArrayLike'),\n    isString = require('./isString'),\n    toInteger = require('./toInteger'),\n    values = require('./values');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * Checks if `value` is in `collection`. If `collection` is a string, it's\n * checked for a substring of `value`, otherwise\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * is used for equality comparisons. If `fromIndex` is negative, it's used as\n * the offset from the end of `collection`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object|string} collection The collection to inspect.\n * @param {*} value The value to search for.\n * @param {number} [fromIndex=0] The index to search from.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.reduce`.\n * @returns {boolean} Returns `true` if `value` is found, else `false`.\n * @example\n *\n * _.includes([1, 2, 3], 1);\n * // => true\n *\n * _.includes([1, 2, 3], 1, 2);\n * // => false\n *\n * _.includes({ 'a': 1, 'b': 2 }, 1);\n * // => true\n *\n * _.includes('abcd', 'bc');\n * // => true\n */\nfunction includes(collection, value, fromIndex, guard) {\n  collection = isArrayLike(collection) ? collection : values(collection);\n  fromIndex = (fromIndex && !guard) ? toInteger(fromIndex) : 0;\n\n  var length = collection.length;\n  if (fromIndex < 0) {\n    fromIndex = nativeMax(length + fromIndex, 0);\n  }\n  return isString(collection)\n    ? (fromIndex <= length && collection.indexOf(value, fromIndex) > -1)\n    : (!!length && baseIndexOf(collection, value, fromIndex) > -1);\n}\n\nmodule.exports = includes;\n","var baseIsNative = require('./_baseIsNative'),\n    getValue = require('./_getValue');\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\nmodule.exports = getNative;\n","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","var baseForOwn = require('./_baseForOwn'),\n    createBaseEach = require('./_createBaseEach');\n\n/**\n * The base implementation of `_.forEach` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array|Object} Returns `collection`.\n */\nvar baseEach = createBaseEach(baseForOwn);\n\nmodule.exports = baseEach;\n","/**\n * Checks if `value` is `undefined`.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is `undefined`, else `false`.\n * @example\n *\n * _.isUndefined(void 0);\n * // => true\n *\n * _.isUndefined(null);\n * // => false\n */\nfunction isUndefined(value) {\n  return value === undefined;\n}\n\nmodule.exports = isUndefined;\n","var arrayReduce = require('./_arrayReduce'),\n    baseEach = require('./_baseEach'),\n    baseIteratee = require('./_baseIteratee'),\n    baseReduce = require('./_baseReduce'),\n    isArray = require('./isArray');\n\n/**\n * Reduces `collection` to a value which is the accumulated result of running\n * each element in `collection` thru `iteratee`, where each successive\n * invocation is supplied the return value of the previous. If `accumulator`\n * is not given, the first element of `collection` is used as the initial\n * value. The iteratee is invoked with four arguments:\n * (accumulator, value, index|key, collection).\n *\n * Many lodash methods are guarded to work as iteratees for methods like\n * `_.reduce`, `_.reduceRight`, and `_.transform`.\n *\n * The guarded methods are:\n * `assign`, `defaults`, `defaultsDeep`, `includes`, `merge`, `orderBy`,\n * and `sortBy`\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @returns {*} Returns the accumulated value.\n * @see _.reduceRight\n * @example\n *\n * _.reduce([1, 2], function(sum, n) {\n *   return sum + n;\n * }, 0);\n * // => 3\n *\n * _.reduce({ 'a': 1, 'b': 2, 'c': 1 }, function(result, value, key) {\n *   (result[value] || (result[value] = [])).push(key);\n *   return result;\n * }, {});\n * // => { '1': ['a', 'c'], '2': ['b'] } (iteration order is not guaranteed)\n */\nfunction reduce(collection, iteratee, accumulator) {\n  var func = isArray(collection) ? arrayReduce : baseReduce,\n      initAccum = arguments.length < 3;\n\n  return func(collection, baseIteratee(iteratee, 4), accumulator, initAccum, baseEach);\n}\n\nmodule.exports = reduce;\n","var DataView = require('./_DataView'),\n    Map = require('./_Map'),\n    Promise = require('./_Promise'),\n    Set = require('./_Set'),\n    WeakMap = require('./_WeakMap'),\n    baseGetTag = require('./_baseGetTag'),\n    toSource = require('./_toSource');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    setTag = '[object Set]',\n    weakMapTag = '[object WeakMap]';\n\nvar dataViewTag = '[object DataView]';\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\nmodule.exports = getTag;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.tokenMatcher = exports.createTokenInstance = exports.EOF = exports.createToken = exports.hasTokenLabel = exports.tokenName = exports.tokenLabel = void 0;\nvar isString_1 = __importDefault(require(\"lodash/isString\"));\nvar has_1 = __importDefault(require(\"lodash/has\"));\nvar isUndefined_1 = __importDefault(require(\"lodash/isUndefined\"));\nvar lexer_public_1 = require(\"./lexer_public\");\nvar tokens_1 = require(\"./tokens\");\nfunction tokenLabel(tokType) {\n    if (hasTokenLabel(tokType)) {\n        return tokType.LABEL;\n    }\n    else {\n        return tokType.name;\n    }\n}\nexports.tokenLabel = tokenLabel;\nfunction tokenName(tokType) {\n    return tokType.name;\n}\nexports.tokenName = tokenName;\nfunction hasTokenLabel(obj) {\n    return (0, isString_1.default)(obj.LABEL) && obj.LABEL !== \"\";\n}\nexports.hasTokenLabel = hasTokenLabel;\nvar PARENT = \"parent\";\nvar CATEGORIES = \"categories\";\nvar LABEL = \"label\";\nvar GROUP = \"group\";\nvar PUSH_MODE = \"push_mode\";\nvar POP_MODE = \"pop_mode\";\nvar LONGER_ALT = \"longer_alt\";\nvar LINE_BREAKS = \"line_breaks\";\nvar START_CHARS_HINT = \"start_chars_hint\";\nfunction createToken(config) {\n    return createTokenInternal(config);\n}\nexports.createToken = createToken;\nfunction createTokenInternal(config) {\n    var pattern = config.pattern;\n    var tokenType = {};\n    tokenType.name = config.name;\n    if (!(0, isUndefined_1.default)(pattern)) {\n        tokenType.PATTERN = pattern;\n    }\n    if ((0, has_1.default)(config, PARENT)) {\n        throw (\"The parent property is no longer supported.\\n\" +\n            \"See: https://github.com/chevrotain/chevrotain/issues/564#issuecomment-349062346 for details.\");\n    }\n    if ((0, has_1.default)(config, CATEGORIES)) {\n        // casting to ANY as this will be fixed inside `augmentTokenTypes``\n        tokenType.CATEGORIES = config[CATEGORIES];\n    }\n    (0, tokens_1.augmentTokenTypes)([tokenType]);\n    if ((0, has_1.default)(config, LABEL)) {\n        tokenType.LABEL = config[LABEL];\n    }\n    if ((0, has_1.default)(config, GROUP)) {\n        tokenType.GROUP = config[GROUP];\n    }\n    if ((0, has_1.default)(config, POP_MODE)) {\n        tokenType.POP_MODE = config[POP_MODE];\n    }\n    if ((0, has_1.default)(config, PUSH_MODE)) {\n        tokenType.PUSH_MODE = config[PUSH_MODE];\n    }\n    if ((0, has_1.default)(config, LONGER_ALT)) {\n        tokenType.LONGER_ALT = config[LONGER_ALT];\n    }\n    if ((0, has_1.default)(config, LINE_BREAKS)) {\n        tokenType.LINE_BREAKS = config[LINE_BREAKS];\n    }\n    if ((0, has_1.default)(config, START_CHARS_HINT)) {\n        tokenType.START_CHARS_HINT = config[START_CHARS_HINT];\n    }\n    return tokenType;\n}\nexports.EOF = createToken({ name: \"EOF\", pattern: lexer_public_1.Lexer.NA });\n(0, tokens_1.augmentTokenTypes)([exports.EOF]);\nfunction createTokenInstance(tokType, image, startOffset, endOffset, startLine, endLine, startColumn, endColumn) {\n    return {\n        image: image,\n        startOffset: startOffset,\n        endOffset: endOffset,\n        startLine: startLine,\n        endLine: endLine,\n        startColumn: startColumn,\n        endColumn: endColumn,\n        tokenTypeIdx: tokType.tokenTypeIdx,\n        tokenType: tokType\n    };\n}\nexports.createTokenInstance = createTokenInstance;\nfunction tokenMatcher(token, tokType) {\n    return (0, tokens_1.tokenStructuredMatcher)(token, tokType);\n}\nexports.tokenMatcher = tokenMatcher;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isTokenType = exports.hasExtendingTokensTypesMapProperty = exports.hasExtendingTokensTypesProperty = exports.hasCategoriesProperty = exports.hasShortKeyProperty = exports.singleAssignCategoriesToksMap = exports.assignCategoriesMapProp = exports.assignCategoriesTokensProp = exports.assignTokenDefaultProps = exports.expandCategories = exports.augmentTokenTypes = exports.tokenIdxToClass = exports.tokenShortNameIdx = exports.tokenStructuredMatcherNoCategories = exports.tokenStructuredMatcher = void 0;\nvar isEmpty_1 = __importDefault(require(\"lodash/isEmpty\"));\nvar compact_1 = __importDefault(require(\"lodash/compact\"));\nvar isArray_1 = __importDefault(require(\"lodash/isArray\"));\nvar flatten_1 = __importDefault(require(\"lodash/flatten\"));\nvar difference_1 = __importDefault(require(\"lodash/difference\"));\nvar map_1 = __importDefault(require(\"lodash/map\"));\nvar forEach_1 = __importDefault(require(\"lodash/forEach\"));\nvar has_1 = __importDefault(require(\"lodash/has\"));\nvar includes_1 = __importDefault(require(\"lodash/includes\"));\nvar clone_1 = __importDefault(require(\"lodash/clone\"));\nfunction tokenStructuredMatcher(tokInstance, tokConstructor) {\n    var instanceType = tokInstance.tokenTypeIdx;\n    if (instanceType === tokConstructor.tokenTypeIdx) {\n        return true;\n    }\n    else {\n        return (tokConstructor.isParent === true &&\n            tokConstructor.categoryMatchesMap[instanceType] === true);\n    }\n}\nexports.tokenStructuredMatcher = tokenStructuredMatcher;\n// Optimized tokenMatcher in case our grammar does not use token categories\n// Being so tiny it is much more likely to be in-lined and this avoid the function call overhead\nfunction tokenStructuredMatcherNoCategories(token, tokType) {\n    return token.tokenTypeIdx === tokType.tokenTypeIdx;\n}\nexports.tokenStructuredMatcherNoCategories = tokenStructuredMatcherNoCategories;\nexports.tokenShortNameIdx = 1;\nexports.tokenIdxToClass = {};\nfunction augmentTokenTypes(tokenTypes) {\n    // collect the parent Token Types as well.\n    var tokenTypesAndParents = expandCategories(tokenTypes);\n    // add required tokenType and categoryMatches properties\n    assignTokenDefaultProps(tokenTypesAndParents);\n    // fill up the categoryMatches\n    assignCategoriesMapProp(tokenTypesAndParents);\n    assignCategoriesTokensProp(tokenTypesAndParents);\n    (0, forEach_1.default)(tokenTypesAndParents, function (tokType) {\n        tokType.isParent = tokType.categoryMatches.length > 0;\n    });\n}\nexports.augmentTokenTypes = augmentTokenTypes;\nfunction expandCategories(tokenTypes) {\n    var result = (0, clone_1.default)(tokenTypes);\n    var categories = tokenTypes;\n    var searching = true;\n    while (searching) {\n        categories = (0, compact_1.default)((0, flatten_1.default)((0, map_1.default)(categories, function (currTokType) { return currTokType.CATEGORIES; })));\n        var newCategories = (0, difference_1.default)(categories, result);\n        result = result.concat(newCategories);\n        if ((0, isEmpty_1.default)(newCategories)) {\n            searching = false;\n        }\n        else {\n            categories = newCategories;\n        }\n    }\n    return result;\n}\nexports.expandCategories = expandCategories;\nfunction assignTokenDefaultProps(tokenTypes) {\n    (0, forEach_1.default)(tokenTypes, function (currTokType) {\n        if (!hasShortKeyProperty(currTokType)) {\n            exports.tokenIdxToClass[exports.tokenShortNameIdx] = currTokType;\n            currTokType.tokenTypeIdx = exports.tokenShortNameIdx++;\n        }\n        // CATEGORIES? : TokenType | TokenType[]\n        if (hasCategoriesProperty(currTokType) &&\n            !(0, isArray_1.default)(currTokType.CATEGORIES)\n        // &&\n        // !isUndefined(currTokType.CATEGORIES.PATTERN)\n        ) {\n            currTokType.CATEGORIES = [currTokType.CATEGORIES];\n        }\n        if (!hasCategoriesProperty(currTokType)) {\n            currTokType.CATEGORIES = [];\n        }\n        if (!hasExtendingTokensTypesProperty(currTokType)) {\n            currTokType.categoryMatches = [];\n        }\n        if (!hasExtendingTokensTypesMapProperty(currTokType)) {\n            currTokType.categoryMatchesMap = {};\n        }\n    });\n}\nexports.assignTokenDefaultProps = assignTokenDefaultProps;\nfunction assignCategoriesTokensProp(tokenTypes) {\n    (0, forEach_1.default)(tokenTypes, function (currTokType) {\n        // avoid duplications\n        currTokType.categoryMatches = [];\n        (0, forEach_1.default)(currTokType.categoryMatchesMap, function (val, key) {\n            currTokType.categoryMatches.push(exports.tokenIdxToClass[key].tokenTypeIdx);\n        });\n    });\n}\nexports.assignCategoriesTokensProp = assignCategoriesTokensProp;\nfunction assignCategoriesMapProp(tokenTypes) {\n    (0, forEach_1.default)(tokenTypes, function (currTokType) {\n        singleAssignCategoriesToksMap([], currTokType);\n    });\n}\nexports.assignCategoriesMapProp = assignCategoriesMapProp;\nfunction singleAssignCategoriesToksMap(path, nextNode) {\n    (0, forEach_1.default)(path, function (pathNode) {\n        nextNode.categoryMatchesMap[pathNode.tokenTypeIdx] = true;\n    });\n    (0, forEach_1.default)(nextNode.CATEGORIES, function (nextCategory) {\n        var newPath = path.concat(nextNode);\n        // avoids infinite loops due to cyclic categories.\n        if (!(0, includes_1.default)(newPath, nextCategory)) {\n            singleAssignCategoriesToksMap(newPath, nextCategory);\n        }\n    });\n}\nexports.singleAssignCategoriesToksMap = singleAssignCategoriesToksMap;\nfunction hasShortKeyProperty(tokType) {\n    return (0, has_1.default)(tokType, \"tokenTypeIdx\");\n}\nexports.hasShortKeyProperty = hasShortKeyProperty;\nfunction hasCategoriesProperty(tokType) {\n    return (0, has_1.default)(tokType, \"CATEGORIES\");\n}\nexports.hasCategoriesProperty = hasCategoriesProperty;\nfunction hasExtendingTokensTypesProperty(tokType) {\n    return (0, has_1.default)(tokType, \"categoryMatches\");\n}\nexports.hasExtendingTokensTypesProperty = hasExtendingTokensTypesProperty;\nfunction hasExtendingTokensTypesMapProperty(tokType) {\n    return (0, has_1.default)(tokType, \"categoryMatchesMap\");\n}\nexports.hasExtendingTokensTypesMapProperty = hasExtendingTokensTypesMapProperty;\nfunction isTokenType(tokType) {\n    return (0, has_1.default)(tokType, \"tokenTypeIdx\");\n}\nexports.isTokenType = isTokenType;\n","import { shortcut } from \"../../../core/decorator\";\r\nimport * as CodeMirror from \"codemirror\";\r\nimport { getVarDisplayNameByValue, isBelong2FormulaFunction } from \"../formula.service\";\r\n\r\nconst paramRegex = /(\\$[{][^}]*[}])/;\r\n\r\n@shortcut()\r\nexport class FormulaInserter extends BI.Widget {\r\n    static xtype = \"bi.formula_operating_panel.inserter\";\r\n\r\n    protected getToolbarLayout(): {[key: string]: any;} {\r\n        return {\r\n            type: BI.Layout.xtype,\r\n        };\r\n    }\r\n\r\n    protected formulaEditor: any;\r\n\r\n    props = {\r\n        value: {\r\n            formula: \"\",\r\n        },\r\n    }\r\n\r\n    render() {\r\n        return {\r\n            type: BI.VTapeLayout.xtype,\r\n            items: [{\r\n                el: {\r\n                    type: BI.FormulaEditor.xtype,\r\n                    cls: \"bi-border\",\r\n                    ref: (_ref: any) => {\r\n                        this.formulaEditor = _ref;\r\n                    },\r\n                    watermark: BI.i18nText(\"BI-Basic_Formula_Watermark\"),\r\n                    listeners: [{\r\n                        eventName: BI.FormulaEditor.EVENT_CHANGE,\r\n                        action: () => {\r\n                            this.validate();\r\n                        },\r\n                    }, {\r\n                        eventName: \"EVENT_SHOW_HINT\",\r\n                        action: (list: string[]) => {\r\n                            this.fireEvent(\"EVENT_SHOW_HINT\", BI.first(list));\r\n                        },\r\n                    }, {\r\n                        eventName: \"EVENT_SELECT_HINT\",\r\n                        action: (hint: string) => {\r\n                            this.fireEvent(\"EVENT_SELECT_HINT\", hint);\r\n                        },\r\n                    }],\r\n                },\r\n                height: 155,\r\n            }, this.getToolbarLayout()],\r\n        };\r\n    }\r\n\r\n    mounted() {\r\n        this.setValue(this.options.value.formula);\r\n    }\r\n\r\n    /**\r\n     * 插入function\r\n     * @param val function值\r\n     */\r\n    insertFunction(val: string) {\r\n        this.formulaEditor.insertFunction(val);\r\n    }\r\n\r\n    /**\r\n     * 插入字段\r\n     * @param val 字段值\r\n     */\r\n    insertField(val: string) {\r\n        this.formulaEditor.insertField(val, true);\r\n    }\r\n\r\n    getValue() {\r\n        return {\r\n            formula: this.formulaEditor.getValue() as string,\r\n        };\r\n    }\r\n\r\n    /**\r\n     * 校验\r\n     */\r\n    validate(): void {\r\n        const val: string = this.formulaEditor.getValue();\r\n\r\n        if (val === \"\") {\r\n            this.formulaEditor.hideTip();\r\n\r\n            return;\r\n        }\r\n\r\n        this.fireEvent(\"EVENT_VALIDATE\");\r\n    }\r\n\r\n    setValidation(data: {\r\n        validation: boolean;\r\n    }) {\r\n        data.validation ? this.formulaEditor.hideTip() : this.formulaEditor.showTip(BI.i18nText(\"BI-Basic_Formula_Invalid\"));\r\n    }\r\n\r\n    setValue(value: string) {\r\n        this.formulaEditor.refresh();\r\n            \r\n        this.formulaEditor.setValue(\"\");\r\n\r\n        this.insertFormula(value);\r\n\r\n        this.validate();\r\n    }\r\n\r\n    /**\r\n     * 分割字符串\r\n     * @param v 字符串\r\n     */\r\n    private analyzeContent(v: string) {\r\n        // \\w*\\w 这是干啥呢, 至少匹配一次\\w ? 那可以用\\w+\r\n        const regx = /\\$[{][^}]*[}]|\\w+|\\$\\{[^$()+\\-*/)$,]*\\w\\}|\\$\\{[^$()+\\-*/]*\\w\\}|\\$\\{[^$()+\\-*/]*[\\u4e00-\\u9fa5]\\}|\\w|(.)|\\n/g;\r\n\r\n        return v.match(regx);\r\n    }\r\n\r\n    /**\r\n     * 参数转译为显示值\r\n     * @param v 实际值\r\n     */\r\n    private paramFormatter(v: string) {\r\n        return getVarDisplayNameByValue(v);\r\n    }\r\n\r\n    /**\r\n     * 插入公式\r\n     * @param value 公式值\r\n     * @param position 位置\r\n     */\r\n    private insertFormula(value: string = \"\", position?: CodeMirror.Position) {\r\n        const result = this.analyzeContent(value) || [];\r\n\r\n        const fieldArray: {\r\n            from: CodeMirror.Position,\r\n            to: CodeMirror.Position,\r\n            value: string,\r\n            invalid: boolean,\r\n            text: string,\r\n        }[] = [], functionArray: {\r\n            from: CodeMirror.Position,\r\n            to: CodeMirror.Position,\r\n            value: string,\r\n        }[] = [];\r\n\r\n        let lineNum = 0, offset = 0, valueString = \"\";\r\n\r\n        if (BI.isNotNull(position)) {\r\n            lineNum = position.line;\r\n            offset = position.ch;\r\n        }\r\n\r\n        const wrapChar: string = this.formulaEditor.getParamWrap();\r\n\r\n        result.forEach(str => {\r\n            if (paramRegex.test(str)) {\r\n                // 是函数\r\n                const fieldId = str.substring(2, str.length - 1);\r\n\r\n                const formattedParam = this.paramFormatter(fieldId);\r\n\r\n                const fieldName = wrapChar + formattedParam.replaceAll(\"^<!.*!>$\", str => str.substring(2, str.length - 2)) + wrapChar;\r\n\r\n                const fromPos = CodeMirror.Pos(lineNum, offset);\r\n\r\n                valueString += fieldName;\r\n\r\n                offset += fieldName.length;\r\n\r\n                const endPos = CodeMirror.Pos(lineNum, offset);\r\n                fieldArray.push({\r\n                    from: fromPos,\r\n                    to: endPos,\r\n                    value: fieldId,\r\n                    invalid: /^<!.*!>$/.test(formattedParam),\r\n                    text: fieldName,\r\n                });\r\n            } else {\r\n                if (BI.isNotNull(isBelong2FormulaFunction(str))) {\r\n                    const fromPos = CodeMirror.Pos(lineNum, offset);\r\n\r\n                    const endPos = CodeMirror.Pos(lineNum, offset + str.length);\r\n\r\n                    functionArray.push({\r\n                        from: fromPos,\r\n                        to: endPos,\r\n                        value: str,\r\n                    });\r\n                }\r\n\r\n                if (str === \"\\n\") {\r\n                    lineNum++;\r\n\r\n                    offset = 0;\r\n                }\r\n                valueString += str;\r\n                str !== \"\\n\" && (offset += str.length);\r\n            }\r\n        });\r\n\r\n        this.formulaEditor.insertString(valueString);\r\n\r\n        BI.each(fieldArray, (_idx, field) => {\r\n            this.formulaEditor.markField(field);\r\n        });\r\n\r\n        BI.each(functionArray, (_idx, field) => {\r\n            this.formulaEditor.markFunction(field);\r\n        });\r\n    }\r\n}\r\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\nmodule.exports = isPrototype;\n","var baseGetTag = require('./_baseGetTag'),\n    isObject = require('./isObject');\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nmodule.exports = isFunction;\n","/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nmodule.exports = baseUnary;\n","/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nmodule.exports = arrayMap;\n","/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nmodule.exports = eq;\n","var isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = toKey;\n","/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nmodule.exports = identity;\n","var assignValue = require('./_assignValue'),\n    baseAssignValue = require('./_baseAssignValue');\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  var isNew = !object;\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    if (newValue === undefined) {\n      newValue = source[key];\n    }\n    if (isNew) {\n      baseAssignValue(object, key, newValue);\n    } else {\n      assignValue(object, key, newValue);\n    }\n  }\n  return object;\n}\n\nmodule.exports = copyObject;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.toFastProperties = exports.timer = exports.PRINT_ERROR = exports.PRINT_WARNING = void 0;\nvar print_1 = require(\"./print\");\nObject.defineProperty(exports, \"PRINT_WARNING\", { enumerable: true, get: function () { return print_1.PRINT_WARNING; } });\nObject.defineProperty(exports, \"PRINT_ERROR\", { enumerable: true, get: function () { return print_1.PRINT_ERROR; } });\nvar timer_1 = require(\"./timer\");\nObject.defineProperty(exports, \"timer\", { enumerable: true, get: function () { return timer_1.timer; } });\nvar to_fast_properties_1 = require(\"./to-fast-properties\");\nObject.defineProperty(exports, \"toFastProperties\", { enumerable: true, get: function () { return to_fast_properties_1.toFastProperties; } });\n","var toFinite = require('./toFinite');\n\n/**\n * Converts `value` to an integer.\n *\n * **Note:** This method is loosely based on\n * [`ToInteger`](http://www.ecma-international.org/ecma-262/7.0/#sec-tointeger).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted integer.\n * @example\n *\n * _.toInteger(3.2);\n * // => 3\n *\n * _.toInteger(Number.MIN_VALUE);\n * // => 0\n *\n * _.toInteger(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toInteger('3.2');\n * // => 3\n */\nfunction toInteger(value) {\n  var result = toFinite(value),\n      remainder = result % 1;\n\n  return result === result ? (remainder ? result - remainder : result) : 0;\n}\n\nmodule.exports = toInteger;\n","var baseGetTag = require('./_baseGetTag'),\n    isArray = require('./isArray'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar stringTag = '[object String]';\n\n/**\n * Checks if `value` is classified as a `String` primitive or object.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a string, else `false`.\n * @example\n *\n * _.isString('abc');\n * // => true\n *\n * _.isString(1);\n * // => false\n */\nfunction isString(value) {\n  return typeof value == 'string' ||\n    (!isArray(value) && isObjectLike(value) && baseGetTag(value) == stringTag);\n}\n\nmodule.exports = isString;\n","module.exports = require('./head');\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EarlyExitException = exports.NotAllInputParsedException = exports.NoViableAltException = exports.MismatchedTokenException = exports.isRecognitionException = void 0;\nvar includes_1 = __importDefault(require(\"lodash/includes\"));\nvar MISMATCHED_TOKEN_EXCEPTION = \"MismatchedTokenException\";\nvar NO_VIABLE_ALT_EXCEPTION = \"NoViableAltException\";\nvar EARLY_EXIT_EXCEPTION = \"EarlyExitException\";\nvar NOT_ALL_INPUT_PARSED_EXCEPTION = \"NotAllInputParsedException\";\nvar RECOGNITION_EXCEPTION_NAMES = [\n    MISMATCHED_TOKEN_EXCEPTION,\n    NO_VIABLE_ALT_EXCEPTION,\n    EARLY_EXIT_EXCEPTION,\n    NOT_ALL_INPUT_PARSED_EXCEPTION\n];\nObject.freeze(RECOGNITION_EXCEPTION_NAMES);\n// hacks to bypass no support for custom Errors in javascript/typescript\nfunction isRecognitionException(error) {\n    // can't do instanceof on hacked custom js exceptions\n    return (0, includes_1.default)(RECOGNITION_EXCEPTION_NAMES, error.name);\n}\nexports.isRecognitionException = isRecognitionException;\nvar RecognitionException = /** @class */ (function (_super) {\n    __extends(RecognitionException, _super);\n    function RecognitionException(message, token) {\n        var _newTarget = this.constructor;\n        var _this = _super.call(this, message) || this;\n        _this.token = token;\n        _this.resyncedTokens = [];\n        // fix prototype chain when typescript target is ES5\n        Object.setPrototypeOf(_this, _newTarget.prototype);\n        /* istanbul ignore next - V8 workaround to remove constructor from stacktrace when typescript target is ES5 */\n        if (Error.captureStackTrace) {\n            Error.captureStackTrace(_this, _this.constructor);\n        }\n        return _this;\n    }\n    return RecognitionException;\n}(Error));\nvar MismatchedTokenException = /** @class */ (function (_super) {\n    __extends(MismatchedTokenException, _super);\n    function MismatchedTokenException(message, token, previousToken) {\n        var _this = _super.call(this, message, token) || this;\n        _this.previousToken = previousToken;\n        _this.name = MISMATCHED_TOKEN_EXCEPTION;\n        return _this;\n    }\n    return MismatchedTokenException;\n}(RecognitionException));\nexports.MismatchedTokenException = MismatchedTokenException;\nvar NoViableAltException = /** @class */ (function (_super) {\n    __extends(NoViableAltException, _super);\n    function NoViableAltException(message, token, previousToken) {\n        var _this = _super.call(this, message, token) || this;\n        _this.previousToken = previousToken;\n        _this.name = NO_VIABLE_ALT_EXCEPTION;\n        return _this;\n    }\n    return NoViableAltException;\n}(RecognitionException));\nexports.NoViableAltException = NoViableAltException;\nvar NotAllInputParsedException = /** @class */ (function (_super) {\n    __extends(NotAllInputParsedException, _super);\n    function NotAllInputParsedException(message, token) {\n        var _this = _super.call(this, message, token) || this;\n        _this.name = NOT_ALL_INPUT_PARSED_EXCEPTION;\n        return _this;\n    }\n    return NotAllInputParsedException;\n}(RecognitionException));\nexports.NotAllInputParsedException = NotAllInputParsedException;\nvar EarlyExitException = /** @class */ (function (_super) {\n    __extends(EarlyExitException, _super);\n    function EarlyExitException(message, token, previousToken) {\n        var _this = _super.call(this, message, token) || this;\n        _this.previousToken = previousToken;\n        _this.name = EARLY_EXIT_EXCEPTION;\n        return _this;\n    }\n    return EarlyExitException;\n}(RecognitionException));\nexports.EarlyExitException = EarlyExitException;\n","/**\r\n * @author guy\r\n * @version 2.0\r\n * Created by guy on 2022/9/25\r\n */\r\n\r\nexport const DEFAULT_CONFIG = {\r\n    type: \"bi.pure_text\",\r\n    lineHeight: 30,\r\n    textAlign: \"left\",\r\n    whiteSpace: \"normal\",\r\n    expandIcon: \"expander-down-font\",\r\n    collapseIcon: \"expander-right-font\",\r\n    sortableIcon: \"text-align-center-font\"\r\n};\r\n\r\nconst StickyTableRow = BI.inherit(BI.Widget, {\r\n    props: {\r\n        baseCls: 'bi-sticky-table-row',\r\n        tagName: \"tr\",\r\n        id: \"\",\r\n        dimension: DEFAULT_CONFIG,\r\n        layer: 0,\r\n        columnSize: [],\r\n        minColumnSize: [],\r\n        maxColumnSize: [],\r\n        freezeCols: [],\r\n        items:[],\r\n        draggable: true,\r\n        checkable: true,\r\n\r\n        checked: false,\r\n        half: false,\r\n\r\n        prevComponent: null\r\n    },\r\n\r\n    render: function () {\r\n        return {\r\n            type: 'bi.adaptive',\r\n            cls: this.options.draggable ? \"enabled\": \"\",\r\n            ref: (_ref) => {\r\n                this.layout = _ref;\r\n            },\r\n            items: this.getItems()\r\n        }\r\n    },\r\n\r\n    getItems: function () {\r\n        var self = this, o = this.options;\r\n        var dimension = {\r\n            ...DEFAULT_CONFIG,\r\n            ...o.dimension\r\n        };\r\n        this.text = BI.createWidget(dimension);\r\n\r\n        return [{\r\n            type: \"bi.adaptive\",\r\n            tagName: \"td\",\r\n            cls: `${(o.freezeCols.includes(0) ? \"sticky-table-fix-first-col\": \"\")} first-col`,\r\n            items: [{\r\n                type: \"bi.vertical_adapt\",\r\n                css: {\r\n                    minWidth: o.minColumnSize[0],\r\n                    maxWidth: o.maxColumnSize[0]\r\n                },\r\n                items: [o.prevComponent, o.draggable ? {\r\n                    type: \"bi.icon_label\",\r\n                    extraCls: \"bi-sticky-table-draggable-handler\",\r\n                    cls: dimension.sortableIcon,\r\n                    width: 30,\r\n                    height: 30\r\n                } : null, o.isParent ? {\r\n                    _lgap: o.layer * 30,\r\n                    type: \"bi.icon_change_button\",\r\n                    ref: (_ref) => {\r\n                        this.arrow = _ref;\r\n                    },\r\n                    handler: () => {\r\n                        this.fireEvent(BI.Controller.EVENT_CHANGE, o.open ? BI.Events.COLLAPSE : BI.Events.EXPAND);\r\n                    },\r\n                    iconCls: this._getExpandIcon(),\r\n                    width: 30,\r\n                    height: 30\r\n                } : null, o.checkable ? {\r\n                    _lgap: !o.isParent ? (o.layer + 0.5) * 30 : 0,\r\n                    type: \"bi.multi_select_bar\",\r\n                    ref: (_ref) => {\r\n                        this.checkbox = _ref;\r\n                    },\r\n                    selected: o.checked,\r\n                    halfSelected: o.half,\r\n                    width: 30,\r\n                    iconWrapperWidth: 30,\r\n                    height: 30,\r\n                    text: \"\",\r\n                    listeners: {\r\n                        [BI.MultiSelectBar.EVENT_CHANGE]: function (v) {\r\n                            self.fireEvent(BI.Controller.EVENT_CHANGE, BI.Events.CHANGE, v);\r\n                        }\r\n                    },\r\n                }: null, {\r\n                    _lgap: !o.checkable && !o.isParent ? o.layer * 30 : 0,\r\n                    width: \"fill\",\r\n                    el: this.text\r\n                }],\r\n            }]\r\n        }].concat(BI.map(o.items, (i, item) => {\r\n            const isFirstCols = o.freezeCols.includes(i + 1) && (i < o.items.length - 1);\r\n            const isLastCols = o.freezeCols.includes(i + 1) && (i === o.items.length - 1);\r\n            return {\r\n                type: \"bi.adaptive\",\r\n                extraCls: isLastCols ? \"sticky-table-fix-last-col\" : (isFirstCols ? \"sticky-table-fix-first-col\": \"\"),\r\n                cls: `sticky-table-fix-index-${i + 1}-col`,\r\n                css: {\r\n                    // left: isFirstCols ? o.columnSize.slice(0, i + 1).reduce((item, sum) => sum + item, 0) : \"\",\r\n                    minWidth: o.minColumnSize[i + 1],\r\n                    maxWidth: o.maxColumnSize[i + 1]\r\n                },\r\n                tagName: \"td\",\r\n                items: [{\r\n                    ...DEFAULT_CONFIG,\r\n                    ...item\r\n                }]\r\n            }\r\n        }));\r\n    },\r\n\r\n    _getExpandIcon: function () {\r\n        var self = this, o = this.options;\r\n        var dimension = BI.extend({}, DEFAULT_CONFIG, o.dimension);\r\n        return o.open ? dimension.expandIcon : dimension.collapseIcon;\r\n    },\r\n\r\n    doRedMark: function () {\r\n        this.text.doRedMark.apply(this.text, arguments);\r\n    },\r\n\r\n    unRedMark: function () {\r\n        this.text.unRedMark.apply(this.text, arguments);\r\n    },\r\n\r\n    shouldUpdate: function (opt) {\r\n        var o = this.options;\r\n\r\n        var keys = [\"open\", \"layer\", \"pId\", \"id\", \"dimension\", \"items\", \"draggable\", \"prevComponent\", \"columnSize\", \"checked\", \"half\", \"cls\"];\r\n\r\n        return BI.some(keys, function (idx, key) {\r\n            return opt[key] !== o[key];\r\n        });\r\n    },\r\n\r\n    update: function (opt) {\r\n        var o = this.options;\r\n        if (opt.prevComponent !== o.prevComponent) {\r\n            o.prevComponent = opt.prevComponent;\r\n        }\r\n        if (opt.cls !== o.cls) {\r\n            this.element.removeClass(o.cls).addClass(opt.cls);\r\n            o.cls = opt.cls;\r\n        }\r\n        if (BI.isNotNull(opt.draggable) && opt.draggable !== o.draggable) {\r\n            this.element[opt.draggable ? \"addClass\" : \"removeClass\"](\"enabled\");\r\n        }\r\n        if (opt.dimension !== o.dimension) {\r\n            this.text.setText(opt.dimension.text || opt.dimension.value);\r\n            o.dimension = opt.dimension;\r\n        }\r\n        if (opt.open !== o.open) {\r\n            o.open = opt.open;\r\n            this.arrow && this.arrow.setIcon(this._getExpandIcon());\r\n        }\r\n        if (opt.items !== o.items || (BI.isNotNull(opt.draggable) && opt.draggable !== o.draggable)) {\r\n            o.items = opt.items;\r\n            o.draggable = opt.draggable;\r\n            this.layout.populate(this.getItems())\r\n        }\r\n        if (opt.checked !== o.checked || opt.half !== o.half) {\r\n            o.checked = opt.checked;\r\n            o.half = opt.half;\r\n            this.checkbox && this.checkbox.setSelected(o.checked);\r\n            this.checkbox && this.checkbox.setHalfSelected(o.half);\r\n        }\r\n    }\r\n});\r\n\r\nBI.shortcut(\"bi.sticky_table_row\", StickyTableRow);\r\n","import { createToken, Lexer } from \"chevrotain\";\r\n\r\n// Token 分组\r\nconst Unary = createToken({ name: \"Unary\", pattern: Lexer.NA });\r\nconst Addition = createToken({ name: \"Addition\", pattern: Lexer.NA });\r\nconst Multiplication = createToken({\r\n  name: \"Multiplication\",\r\n  pattern: Lexer.NA\r\n});\r\nconst Equal = createToken({ name: \"Equal\", pattern: Lexer.NA });\r\nconst Compare = createToken({ name: \"Compare\", pattern: Lexer.NA });\r\n\r\nconst token = {\r\n  WhiteSpace: createToken({\r\n    name: \"WhiteSpace\",\r\n    pattern: /\\s+/,\r\n    group: Lexer.SKIPPED\r\n  }),\r\n  // 基本类型\r\n  String: createToken({\r\n    name: \"String\",\r\n    pattern: /(\"(\\\\\\\\|\\\\\"|[^\"])*\"|'(\\\\\\\\|\\\\'|[^'])*')/\r\n  }),\r\n  Number: createToken({\r\n    name: \"Number\",\r\n    pattern: /[0-9]+(\\.[0-9]+)?(e[+-]?[0-9]+)?/i\r\n  }),\r\n  Date: createToken({\r\n    name: \"Date\",\r\n    pattern: /(\"bi-date-place-holder\"|'bi-date-place-holder')/\r\n  }),\r\n  Boolean: createToken({\r\n    name: \"Boolean\",\r\n    pattern: /(true|false)/i\r\n  }),\r\n  Empty: createToken({\r\n    name: \"Empty\",\r\n    pattern: /(null|undefined)/i\r\n  }),\r\n  NaN: createToken({\r\n    name: \"NaN\",\r\n    pattern: /NaN/\r\n  }),\r\n  // 运算符\r\n  Comma: createToken({ name: \"Comma\", pattern: /,/ }),\r\n  Func: createToken({ name: \"Func\", pattern: /[A-Za-z0-9_.]+/ }),\r\n  LParen: createToken({ name: \"LParen\", pattern: /\\(/ }),\r\n  RParen: createToken({ name: \"RParen\", pattern: /\\)/ }),\r\n  LSquare: createToken({ name: \"LSquare\", pattern: /\\[/ }),\r\n  RSquare: createToken({ name: \"RSquare\", pattern: /]/ }),\r\n  Plus: createToken({\r\n    name: \"Plus\",\r\n    pattern: /\\+(?!\\+)/,\r\n    categories: [Unary, Addition]\r\n  }),\r\n  Minus: createToken({\r\n    name: \"Minus\",\r\n    pattern: /-(?!-)/,\r\n    categories: [Unary, Addition]\r\n  }),\r\n  Unary: Unary,\r\n  Addition: Addition,\r\n  Multi: createToken({\r\n    name: \"Multi\",\r\n    pattern: /\\*/,\r\n    categories: [Multiplication]\r\n  }),\r\n  Div: createToken({\r\n    name: \"Div\",\r\n    pattern: /\\//,\r\n    categories: [Multiplication]\r\n  }),\r\n  Multiplication: Multiplication,\r\n  LessOrEqual: createToken({\r\n    name: \"LessOrEqual\",\r\n    pattern: /<=/,\r\n    categories: [Compare]\r\n  }),\r\n  GreaterOrEqual: createToken({\r\n    name: \"GreaterOrEqual\",\r\n    pattern: />=/,\r\n    categories: [Compare]\r\n  }),\r\n  Less: createToken({ name: \"Less\", pattern: /</, categories: [Compare] }),\r\n  Greater: createToken({\r\n    name: \"Greater\",\r\n    pattern: />/,\r\n    categories: [Compare]\r\n  }),\r\n  Compare: Compare,\r\n  NotEqualStrict: createToken({\r\n    name: \"NotEqualStrict\",\r\n    pattern: /!==/,\r\n    categories: [Equal]\r\n  }),\r\n  EqualLoose: createToken({\r\n    name: \"EqualLoose\",\r\n    pattern: /==/,\r\n    categories: [Equal]\r\n  }),\r\n  NotEqualLoose: createToken({\r\n    name: \"NotEqualLoose\",\r\n    pattern: /!=/,\r\n    categories: [Equal]\r\n  }),\r\n  Equal: Equal,\r\n  EqualStrict: createToken({\r\n    name: \"EqualStrict\",\r\n    pattern: /=/,\r\n    categories: [Equal]\r\n  }),\r\n  LogicNot: createToken({\r\n    name: \"LogicNot\",\r\n    pattern: /!/,\r\n    categories: [Unary]\r\n  }),\r\n  LogicAnd: createToken({ name: \"LogicAnd\", pattern: /&&/ }),\r\n  LogicOr: createToken({ name: \"LogicOr\", pattern: /\\|\\|/ }),\r\n  BitAnd: createToken({ name: \"BitAnd\", pattern: /&/ }),\r\n  // BitAnd: createToken({ name: \"BitAnd\", pattern: /&/ }),\r\n  // BitOr: createToken({ name: \"BitOr\", pattern: /\\|/ })\r\n};\r\n\r\nconst allTokens = [\r\n  token.WhiteSpace,\r\n  token.Date,\r\n  token.String,\r\n  token.Number,\r\n  token.NaN,\r\n  token.Boolean,\r\n  token.Empty,\r\n  token.Func,\r\n  token.LParen,\r\n  token.RParen,\r\n  token.LSquare,\r\n  token.RSquare,\r\n  token.Plus,\r\n  token.Minus,\r\n  token.Addition,\r\n  token.Unary,\r\n  token.Multi,\r\n  token.Div,\r\n  token.Multiplication,\r\n  token.LessOrEqual,\r\n  token.GreaterOrEqual,\r\n  token.Less,\r\n  token.Greater,\r\n  token.Compare,\r\n  token.NotEqualStrict,\r\n  token.EqualLoose,\r\n  token.NotEqualLoose,\r\n  token.Equal,\r\n  token.EqualStrict,\r\n  token.LogicNot,\r\n  token.LogicAnd,\r\n  token.LogicOr,\r\n  token.BitAnd,\r\n  // token.BitOr,\r\n  token.Comma\r\n];\r\n\r\nexport { token, allTokens };\r\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","import { FormulaFunctionItem } from \"./item/item.function\";\r\nimport { FORMULA_VAR_NODES } from \"./formula.constants\";\r\nimport { FormulaVarItem } from \"./item/item.var\";\r\n\r\nlet isCached = false;\r\n\r\nlet formulaVarItemsCache:{\r\n    text: string;\r\n    value: string;\r\n    type: string;\r\n    def: string;\r\n}[] = [];\r\n\r\nlet formulaJSONs: {\r\n    def: string;\r\n    name: string;\r\n    type: string;\r\n}[] = [];\r\n\r\n/**\r\n * 查看是否已经缓存\r\n */\r\nexport function isFormulaConfigCached(): boolean {\r\n    return isCached;\r\n}\r\n\r\n/**\r\n * 获取公式参数显示值\r\n * @param v 参数实际值\r\n */\r\nexport function getVarDisplayNameByValue(v: string) {\r\n    const varItem = formulaVarItemsCache.find(varItem => varItem.value === v);\r\n\r\n    return varItem ? varItem.text : \"undefined\";\r\n}\r\n\r\n/**\r\n * 缓存配置\r\n * @param config 所需配置信息\r\n */\r\nexport function setFormulaConfigCache(config: {\r\n    vars: {\r\n        text: string;\r\n        value: string;\r\n        type: string;\r\n        def: string;\r\n    }[];\r\n    JSONs: {\r\n        def: string;\r\n        name: string;\r\n        type: string;\r\n    }[];\r\n}): void {\r\n    isCached = true;\r\n    formulaVarItemsCache = config.vars;\r\n    BI.FormulaJSONs = config.JSONs;\r\n    BI.FormulaCollections = config.JSONs.reduce((result, json) => {\r\n        result.push(json.name.toLowerCase(), json.name.toUpperCase());\r\n\r\n        return result;\r\n    }, [] as string[]);\r\n    formulaJSONs = config.JSONs;\r\n}\r\n\r\n/**\r\n * 获取所有FunctionTypes\r\n */\r\nexport function transformFormulaJSONs2FunctionTypes(): {\r\n    text: string;\r\n    value: string;\r\n    title: string;\r\n}[] {\r\n    return Object\r\n        .keys(\r\n            formulaJSONs.reduce((resultMap, formulaJSON) => {\r\n                if (!(formulaJSON.type in resultMap)) {\r\n                    resultMap[formulaJSON.type] = [];\r\n                }\r\n        \r\n                return resultMap;\r\n            }, {} as {[key: string]: []})\r\n        )\r\n        .map(type => {\r\n            return {\r\n                text: type,\r\n                title: type,\r\n                value: type,\r\n                cls: \"bi-list-item-select\",\r\n                textAlign: \"left\",\r\n                height: 20,\r\n                hgap: 5,\r\n            };\r\n        });\r\n}\r\n\r\n/**\r\n * 获取所有FunctionNames\r\n * @param functionType 方法类型\r\n */\r\nexport function transformFormulaJSONs2FunctionNames(functionType?: string): {\r\n    text: string;\r\n    value: string;\r\n    title: string;\r\n}[] {\r\n    return Object\r\n        .keys(\r\n            formulaJSONs.reduce((resultMap, formulaJSON) => {\r\n                if (!(formulaJSON.name in resultMap) && (!functionType || formulaJSON.type === functionType)) {\r\n                    resultMap[formulaJSON.name] = [];\r\n                }\r\n        \r\n                return resultMap;\r\n            }, {} as {[key: string]: []})\r\n        )\r\n        .map(type => {\r\n            return {\r\n                type: FormulaFunctionItem.xtype,\r\n                text: type,\r\n                title: type,\r\n                value: type,\r\n                height: 20,\r\n            };\r\n        });\r\n}\r\n\r\n/**\r\n * 根据方法名获取方法类型\r\n * @param functionName 方法名\r\n */\r\nexport function getFunctionTypeByFunctionName(functionName: string): string | null {\r\n    const formulaJSON = formulaJSONs\r\n        .find(formulaJSON => formulaJSON.name === functionName);\r\n\r\n    if (BI.isNotNull(formulaJSON)) {\r\n        return formulaJSON.type;\r\n    }\r\n\r\n    return null;\r\n}\r\n\r\n/**\r\n * 根据方法名获取方法类型\r\n * @param functionName 方法名\r\n */\r\nexport function getFunctionDescriptionByFunctionName(functionName: string): string {\r\n    const formulaJSON = formulaJSONs\r\n        .find(formulaJSON => formulaJSON.name === functionName);\r\n\r\n    return BI.isNotNull(formulaJSON) ? formulaJSON.def : \"\";\r\n}\r\n\r\n/**\r\n * 根据关键字搜索functionNames\r\n * @param keyword 关键字\r\n */\r\nexport function getSearchedFunctionNames(keyword: string): {\r\n    text: string;\r\n    value: string;\r\n    title: string;\r\n}[] {\r\n    if (keyword === \"\") {\r\n        return [];\r\n    }\r\n\r\n    const { match, find }: { match: {\r\n        text: string;\r\n        value: string;\r\n        title: string;\r\n    }[], find: {\r\n        text: string;\r\n        value: string;\r\n        title: string;\r\n    }[] } = BI.Func.getSearchResult(transformFormulaJSONs2FunctionNames(), keyword, \"val\");\r\n\r\n    match.sort((a, b) => a.value > b.value ? 1 : -1);\r\n    find.sort((a, b) => a.value > b.value ? 1 : -1);\r\n\r\n    return [...match, ...find];\r\n}\r\n\r\n/**\r\n * 获取公式框变量结构\r\n */\r\nexport function transformFormulaVarItems(): {\r\n    id: string;\r\n    pId: string;\r\n    open?: boolean;\r\n    text: string;\r\n    value: string;\r\n    height: number;\r\n    type: string;\r\n}[] {\r\n    if (!isCached) {\r\n        return [];\r\n    }\r\n\r\n    const nodeLeavesMap: {[key: string]: {\r\n        text: string;\r\n        value: string;\r\n        type: string;\r\n    }[]} = {}, height = 25;\r\n\r\n    const leaves = formulaVarItemsCache;\r\n\r\n    leaves.forEach(leaf => {\r\n        if (leaf.type in nodeLeavesMap) {\r\n            nodeLeavesMap[leaf.type].push(leaf);\r\n        } else {\r\n            nodeLeavesMap[leaf.type] = [leaf];\r\n        }\r\n    });\r\n\r\n    const items: {\r\n        id: string;\r\n        pId: string;\r\n        open?: boolean;\r\n        text: string;\r\n        value: string;\r\n        height: number;\r\n        type: string;\r\n    }[] = FORMULA_VAR_NODES.map(node => {\r\n        const size = BI.size(nodeLeavesMap[node.value]);\r\n\r\n        return {\r\n            ...node,\r\n            open: true,\r\n            height,\r\n            text: BI.i18nText(node.i18nText) + (size > 0 ? ` - [${size}]` : \"\"),\r\n        };\r\n    });\r\n\r\n    Object.keys(nodeLeavesMap)\r\n        .forEach(nodeType => {\r\n            const node = FORMULA_VAR_NODES.find(node => node.value === nodeType);\r\n\r\n            if (!node) {\r\n                return;\r\n            }\r\n\r\n            const pId = node.id, nodeLeaves = nodeLeavesMap[nodeType], size = BI.size(nodeLeaves);\r\n            \r\n            items.push(...nodeLeaves.map((leaf, index) => {\r\n                return {\r\n                    pId,\r\n                    id: BI.UUID(),\r\n                    text: leaf.text,\r\n                    value: leaf.value,\r\n                    lgap: 16,\r\n                    layoutType: index === size - 1\r\n                        ? BI.LastTreeLeafItem.xtype\r\n                        : BI.MidTreeLeafItem.xtype,\r\n                    type: FormulaVarItem.xtype,\r\n                    height,\r\n                };\r\n            }));\r\n        });\r\n\r\n    return items;\r\n}\r\n\r\n/**\r\n * 根据变量名获取方法类型\r\n * @param varName 变量名\r\n */\r\nexport function getVarDescriptionByVarName(varName: string): string {\r\n    const formulaVarItem = formulaVarItemsCache\r\n        .find(formulaVarItem => formulaVarItem.value === varName);\r\n\r\n    return BI.isNotNull(formulaVarItem) ? formulaVarItem.def : \"\";\r\n}\r\n\r\n/**\r\n * 检查字符串是否是公式方法名\r\n * @param str 字符串\r\n */\r\nexport function isBelong2FormulaFunction(str: string): {\r\n    text: string;\r\n    value: string;\r\n    title: string;\r\n} | undefined {\r\n    return transformFormulaJSONs2FunctionNames()\r\n        .find(item => item.text.toLowerCase() === str.toLowerCase());\r\n}\r\n","export const DEFAULT_FUNCTION_NAME = \"ABS\";\r\nexport const DEFAULT_FUNCTION_TYPE = \"MATH\";\r\nexport const FORMULA_VAR_TYPES = {\r\n    DATA_ITEMS: \"DATA_ITEMS\",\r\n    VARS: \"VARS\",\r\n    DATA_SET_VARS: \"DATA_SET_VARS\",\r\n    REPORT_VARS: \"REPORT_VARS\",\r\n    GLOBAL_VARS: \"GLOBAL_VARS\",\r\n};\r\nexport const FORMULA_VAR_NODES = [{\r\n    id: \"1\",\r\n    pId: \"-1\",\r\n    i18nText: \"BI-Basic_Formula_Data_Items\",\r\n    value: FORMULA_VAR_TYPES.DATA_ITEMS,\r\n    type: BI.IconArrowNode.xtype,\r\n    iconCls: \"search-font\",\r\n}, {\r\n    id: \"2\",\r\n    pId: \"-1\",\r\n    i18nText: \"BI-Basic_Formula_Vars\",\r\n    value: FORMULA_VAR_TYPES.VARS,\r\n    type: BI.IconArrowNode.xtype,\r\n    iconCls: \"search-font\",\r\n}, {\r\n    id: \"3\",\r\n    pId: \"-1\",\r\n    i18nText: \"BI-Basic_Formula_Data_Set_Vars\",\r\n    value: FORMULA_VAR_TYPES.DATA_SET_VARS,\r\n    type: BI.IconArrowNode.xtype,\r\n    iconCls: \"search-font\",\r\n}, {\r\n    id: \"4\",\r\n    pId: \"-1\",\r\n    i18nText: \"BI-Basic_Formula_Report_Vars\",\r\n    value: FORMULA_VAR_TYPES.REPORT_VARS,\r\n    type: BI.IconArrowNode.xtype,\r\n    iconCls: \"search-font\",\r\n}, {\r\n    id: \"5\",\r\n    pId: \"-1\",\r\n    i18nText: \"BI-Basic_Formula_Global_Vars\",\r\n    value: FORMULA_VAR_TYPES.GLOBAL_VARS,\r\n    type: BI.IconArrowNode.xtype,\r\n    iconCls: \"search-font\",\r\n}];\r\n","\"use strict\";\n/* istanbul ignore file - tricky to import some things from this module during testing */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Parser = exports.createSyntaxDiagramsCode = exports.clearCache = exports.generateCstDts = exports.GAstVisitor = exports.serializeProduction = exports.serializeGrammar = exports.Terminal = exports.Rule = exports.RepetitionWithSeparator = exports.RepetitionMandatoryWithSeparator = exports.RepetitionMandatory = exports.Repetition = exports.Option = exports.NonTerminal = exports.Alternative = exports.Alternation = exports.defaultLexerErrorProvider = exports.NoViableAltException = exports.NotAllInputParsedException = exports.MismatchedTokenException = exports.isRecognitionException = exports.EarlyExitException = exports.defaultParserErrorProvider = exports.tokenName = exports.tokenMatcher = exports.tokenLabel = exports.EOF = exports.createTokenInstance = exports.createToken = exports.LexerDefinitionErrorType = exports.Lexer = exports.EMPTY_ALT = exports.ParserDefinitionErrorType = exports.EmbeddedActionsParser = exports.CstParser = exports.VERSION = void 0;\n// semantic version\nvar version_1 = require(\"./version\");\nObject.defineProperty(exports, \"VERSION\", { enumerable: true, get: function () { return version_1.VERSION; } });\nvar parser_1 = require(\"./parse/parser/parser\");\nObject.defineProperty(exports, \"CstParser\", { enumerable: true, get: function () { return parser_1.CstParser; } });\nObject.defineProperty(exports, \"EmbeddedActionsParser\", { enumerable: true, get: function () { return parser_1.EmbeddedActionsParser; } });\nObject.defineProperty(exports, \"ParserDefinitionErrorType\", { enumerable: true, get: function () { return parser_1.ParserDefinitionErrorType; } });\nObject.defineProperty(exports, \"EMPTY_ALT\", { enumerable: true, get: function () { return parser_1.EMPTY_ALT; } });\nvar lexer_public_1 = require(\"./scan/lexer_public\");\nObject.defineProperty(exports, \"Lexer\", { enumerable: true, get: function () { return lexer_public_1.Lexer; } });\nObject.defineProperty(exports, \"LexerDefinitionErrorType\", { enumerable: true, get: function () { return lexer_public_1.LexerDefinitionErrorType; } });\n// Tokens utilities\nvar tokens_public_1 = require(\"./scan/tokens_public\");\nObject.defineProperty(exports, \"createToken\", { enumerable: true, get: function () { return tokens_public_1.createToken; } });\nObject.defineProperty(exports, \"createTokenInstance\", { enumerable: true, get: function () { return tokens_public_1.createTokenInstance; } });\nObject.defineProperty(exports, \"EOF\", { enumerable: true, get: function () { return tokens_public_1.EOF; } });\nObject.defineProperty(exports, \"tokenLabel\", { enumerable: true, get: function () { return tokens_public_1.tokenLabel; } });\nObject.defineProperty(exports, \"tokenMatcher\", { enumerable: true, get: function () { return tokens_public_1.tokenMatcher; } });\nObject.defineProperty(exports, \"tokenName\", { enumerable: true, get: function () { return tokens_public_1.tokenName; } });\n// Other Utilities\nvar errors_public_1 = require(\"./parse/errors_public\");\nObject.defineProperty(exports, \"defaultParserErrorProvider\", { enumerable: true, get: function () { return errors_public_1.defaultParserErrorProvider; } });\nvar exceptions_public_1 = require(\"./parse/exceptions_public\");\nObject.defineProperty(exports, \"EarlyExitException\", { enumerable: true, get: function () { return exceptions_public_1.EarlyExitException; } });\nObject.defineProperty(exports, \"isRecognitionException\", { enumerable: true, get: function () { return exceptions_public_1.isRecognitionException; } });\nObject.defineProperty(exports, \"MismatchedTokenException\", { enumerable: true, get: function () { return exceptions_public_1.MismatchedTokenException; } });\nObject.defineProperty(exports, \"NotAllInputParsedException\", { enumerable: true, get: function () { return exceptions_public_1.NotAllInputParsedException; } });\nObject.defineProperty(exports, \"NoViableAltException\", { enumerable: true, get: function () { return exceptions_public_1.NoViableAltException; } });\nvar lexer_errors_public_1 = require(\"./scan/lexer_errors_public\");\nObject.defineProperty(exports, \"defaultLexerErrorProvider\", { enumerable: true, get: function () { return lexer_errors_public_1.defaultLexerErrorProvider; } });\n// grammar reflection API\nvar gast_1 = require(\"@chevrotain/gast\");\nObject.defineProperty(exports, \"Alternation\", { enumerable: true, get: function () { return gast_1.Alternation; } });\nObject.defineProperty(exports, \"Alternative\", { enumerable: true, get: function () { return gast_1.Alternative; } });\nObject.defineProperty(exports, \"NonTerminal\", { enumerable: true, get: function () { return gast_1.NonTerminal; } });\nObject.defineProperty(exports, \"Option\", { enumerable: true, get: function () { return gast_1.Option; } });\nObject.defineProperty(exports, \"Repetition\", { enumerable: true, get: function () { return gast_1.Repetition; } });\nObject.defineProperty(exports, \"RepetitionMandatory\", { enumerable: true, get: function () { return gast_1.RepetitionMandatory; } });\nObject.defineProperty(exports, \"RepetitionMandatoryWithSeparator\", { enumerable: true, get: function () { return gast_1.RepetitionMandatoryWithSeparator; } });\nObject.defineProperty(exports, \"RepetitionWithSeparator\", { enumerable: true, get: function () { return gast_1.RepetitionWithSeparator; } });\nObject.defineProperty(exports, \"Rule\", { enumerable: true, get: function () { return gast_1.Rule; } });\nObject.defineProperty(exports, \"Terminal\", { enumerable: true, get: function () { return gast_1.Terminal; } });\n// GAST Utilities\nvar gast_2 = require(\"@chevrotain/gast\");\nObject.defineProperty(exports, \"serializeGrammar\", { enumerable: true, get: function () { return gast_2.serializeGrammar; } });\nObject.defineProperty(exports, \"serializeProduction\", { enumerable: true, get: function () { return gast_2.serializeProduction; } });\nObject.defineProperty(exports, \"GAstVisitor\", { enumerable: true, get: function () { return gast_2.GAstVisitor; } });\nvar cst_dts_gen_1 = require(\"@chevrotain/cst-dts-gen\");\nObject.defineProperty(exports, \"generateCstDts\", { enumerable: true, get: function () { return cst_dts_gen_1.generateCstDts; } });\n/* istanbul ignore next */\nfunction clearCache() {\n    console.warn(\"The clearCache function was 'soft' removed from the Chevrotain API.\" +\n        \"\\n\\t It performs no action other than printing this message.\" +\n        \"\\n\\t Please avoid using it as it will be completely removed in the future\");\n}\nexports.clearCache = clearCache;\nvar render_public_1 = require(\"./diagrams/render_public\");\nObject.defineProperty(exports, \"createSyntaxDiagramsCode\", { enumerable: true, get: function () { return render_public_1.createSyntaxDiagramsCode; } });\nvar Parser = /** @class */ (function () {\n    function Parser() {\n        throw new Error(\"The Parser class has been deprecated, use CstParser or EmbeddedActionsParser instead.\\t\\n\" +\n            \"See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_7-0-0\");\n    }\n    return Parser;\n}());\nexports.Parser = Parser;\n","var baseIsArguments = require('./_baseIsArguments'),\n    isObjectLike = require('./isObjectLike');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\nmodule.exports = isArguments;\n","var root = require('./_root'),\n    stubFalse = require('./stubFalse');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\nmodule.exports = isBuffer;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\nmodule.exports = nodeUtil;\n","var listCacheClear = require('./_listCacheClear'),\n    listCacheDelete = require('./_listCacheDelete'),\n    listCacheGet = require('./_listCacheGet'),\n    listCacheHas = require('./_listCacheHas'),\n    listCacheSet = require('./_listCacheSet');\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\nmodule.exports = ListCache;\n","var eq = require('./eq');\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = assocIndexOf;\n","var getNative = require('./_getNative');\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = getNative(Object, 'create');\n\nmodule.exports = nativeCreate;\n","var isKeyable = require('./_isKeyable');\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\nmodule.exports = getMapData;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\nmodule.exports = isIndex;\n","var isArray = require('./isArray'),\n    isKey = require('./_isKey'),\n    stringToPath = require('./_stringToPath'),\n    toString = require('./toString');\n\n/**\n * Casts `value` to a path array if it's not one.\n *\n * @private\n * @param {*} value The value to inspect.\n * @param {Object} [object] The object to query keys on.\n * @returns {Array} Returns the cast property path array.\n */\nfunction castPath(value, object) {\n  if (isArray(value)) {\n    return value;\n  }\n  return isKey(value, object) ? [value] : stringToPath(toString(value));\n}\n\nmodule.exports = castPath;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n","var baseAssignValue = require('./_baseAssignValue'),\n    eq = require('./eq');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nmodule.exports = assignValue;\n","var arrayLikeKeys = require('./_arrayLikeKeys'),\n    baseKeysIn = require('./_baseKeysIn'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n}\n\nmodule.exports = keysIn;\n","var assignValue = require('./_assignValue'),\n    copyObject = require('./_copyObject'),\n    createAssigner = require('./_createAssigner'),\n    isArrayLike = require('./isArrayLike'),\n    isPrototype = require('./_isPrototype'),\n    keys = require('./keys');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns own enumerable string keyed properties of source objects to the\n * destination object. Source objects are applied from left to right.\n * Subsequent sources overwrite property assignments of previous sources.\n *\n * **Note:** This method mutates `object` and is loosely based on\n * [`Object.assign`](https://mdn.io/Object/assign).\n *\n * @static\n * @memberOf _\n * @since 0.10.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @see _.assignIn\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * function Bar() {\n *   this.c = 3;\n * }\n *\n * Foo.prototype.b = 2;\n * Bar.prototype.d = 4;\n *\n * _.assign({ 'a': 0 }, new Foo, new Bar);\n * // => { 'a': 1, 'c': 3 }\n */\nvar assign = createAssigner(function(object, source) {\n  if (isPrototype(source) || isArrayLike(source)) {\n    copyObject(source, keys(source), object);\n    return;\n  }\n  for (var key in source) {\n    if (hasOwnProperty.call(source, key)) {\n      assignValue(object, key, source[key]);\n    }\n  }\n});\n\nmodule.exports = assign;\n","var eq = require('./eq'),\n    isArrayLike = require('./isArrayLike'),\n    isIndex = require('./_isIndex'),\n    isObject = require('./isObject');\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n *  else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n        ? (isArrayLike(object) && isIndex(index, object.length))\n        : (type == 'string' && index in object)\n      ) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\nmodule.exports = isIterateeCall;\n","var arrayEvery = require('./_arrayEvery'),\n    baseEvery = require('./_baseEvery'),\n    baseIteratee = require('./_baseIteratee'),\n    isArray = require('./isArray'),\n    isIterateeCall = require('./_isIterateeCall');\n\n/**\n * Checks if `predicate` returns truthy for **all** elements of `collection`.\n * Iteration is stopped once `predicate` returns falsey. The predicate is\n * invoked with three arguments: (value, index|key, collection).\n *\n * **Note:** This method returns `true` for\n * [empty collections](https://en.wikipedia.org/wiki/Empty_set) because\n * [everything is true](https://en.wikipedia.org/wiki/Vacuous_truth) of\n * elements of empty collections.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n * @returns {boolean} Returns `true` if all elements pass the predicate check,\n *  else `false`.\n * @example\n *\n * _.every([true, 1, null, 'yes'], Boolean);\n * // => false\n *\n * var users = [\n *   { 'user': 'barney', 'age': 36, 'active': false },\n *   { 'user': 'fred',   'age': 40, 'active': false }\n * ];\n *\n * // The `_.matches` iteratee shorthand.\n * _.every(users, { 'user': 'barney', 'active': false });\n * // => false\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.every(users, ['active', false]);\n * // => true\n *\n * // The `_.property` iteratee shorthand.\n * _.every(users, 'active');\n * // => false\n */\nfunction every(collection, predicate, guard) {\n  var func = isArray(collection) ? arrayEvery : baseEvery;\n  if (guard && isIterateeCall(collection, predicate, guard)) {\n    predicate = undefined;\n  }\n  return func(collection, baseIteratee(predicate, 3));\n}\n\nmodule.exports = every;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Lexer = exports.LexerDefinitionErrorType = void 0;\nvar lexer_1 = require(\"./lexer\");\nvar noop_1 = __importDefault(require(\"lodash/noop\"));\nvar isEmpty_1 = __importDefault(require(\"lodash/isEmpty\"));\nvar isArray_1 = __importDefault(require(\"lodash/isArray\"));\nvar last_1 = __importDefault(require(\"lodash/last\"));\nvar reject_1 = __importDefault(require(\"lodash/reject\"));\nvar map_1 = __importDefault(require(\"lodash/map\"));\nvar forEach_1 = __importDefault(require(\"lodash/forEach\"));\nvar keys_1 = __importDefault(require(\"lodash/keys\"));\nvar isUndefined_1 = __importDefault(require(\"lodash/isUndefined\"));\nvar identity_1 = __importDefault(require(\"lodash/identity\"));\nvar assign_1 = __importDefault(require(\"lodash/assign\"));\nvar reduce_1 = __importDefault(require(\"lodash/reduce\"));\nvar clone_1 = __importDefault(require(\"lodash/clone\"));\nvar utils_1 = require(\"@chevrotain/utils\");\nvar tokens_1 = require(\"./tokens\");\nvar lexer_errors_public_1 = require(\"./lexer_errors_public\");\nvar reg_exp_parser_1 = require(\"./reg_exp_parser\");\nvar LexerDefinitionErrorType;\n(function (LexerDefinitionErrorType) {\n    LexerDefinitionErrorType[LexerDefinitionErrorType[\"MISSING_PATTERN\"] = 0] = \"MISSING_PATTERN\";\n    LexerDefinitionErrorType[LexerDefinitionErrorType[\"INVALID_PATTERN\"] = 1] = \"INVALID_PATTERN\";\n    LexerDefinitionErrorType[LexerDefinitionErrorType[\"EOI_ANCHOR_FOUND\"] = 2] = \"EOI_ANCHOR_FOUND\";\n    LexerDefinitionErrorType[LexerDefinitionErrorType[\"UNSUPPORTED_FLAGS_FOUND\"] = 3] = \"UNSUPPORTED_FLAGS_FOUND\";\n    LexerDefinitionErrorType[LexerDefinitionErrorType[\"DUPLICATE_PATTERNS_FOUND\"] = 4] = \"DUPLICATE_PATTERNS_FOUND\";\n    LexerDefinitionErrorType[LexerDefinitionErrorType[\"INVALID_GROUP_TYPE_FOUND\"] = 5] = \"INVALID_GROUP_TYPE_FOUND\";\n    LexerDefinitionErrorType[LexerDefinitionErrorType[\"PUSH_MODE_DOES_NOT_EXIST\"] = 6] = \"PUSH_MODE_DOES_NOT_EXIST\";\n    LexerDefinitionErrorType[LexerDefinitionErrorType[\"MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE\"] = 7] = \"MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE\";\n    LexerDefinitionErrorType[LexerDefinitionErrorType[\"MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY\"] = 8] = \"MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY\";\n    LexerDefinitionErrorType[LexerDefinitionErrorType[\"MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST\"] = 9] = \"MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST\";\n    LexerDefinitionErrorType[LexerDefinitionErrorType[\"LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED\"] = 10] = \"LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED\";\n    LexerDefinitionErrorType[LexerDefinitionErrorType[\"SOI_ANCHOR_FOUND\"] = 11] = \"SOI_ANCHOR_FOUND\";\n    LexerDefinitionErrorType[LexerDefinitionErrorType[\"EMPTY_MATCH_PATTERN\"] = 12] = \"EMPTY_MATCH_PATTERN\";\n    LexerDefinitionErrorType[LexerDefinitionErrorType[\"NO_LINE_BREAKS_FLAGS\"] = 13] = \"NO_LINE_BREAKS_FLAGS\";\n    LexerDefinitionErrorType[LexerDefinitionErrorType[\"UNREACHABLE_PATTERN\"] = 14] = \"UNREACHABLE_PATTERN\";\n    LexerDefinitionErrorType[LexerDefinitionErrorType[\"IDENTIFY_TERMINATOR\"] = 15] = \"IDENTIFY_TERMINATOR\";\n    LexerDefinitionErrorType[LexerDefinitionErrorType[\"CUSTOM_LINE_BREAK\"] = 16] = \"CUSTOM_LINE_BREAK\";\n    LexerDefinitionErrorType[LexerDefinitionErrorType[\"MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE\"] = 17] = \"MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE\";\n})(LexerDefinitionErrorType = exports.LexerDefinitionErrorType || (exports.LexerDefinitionErrorType = {}));\nvar DEFAULT_LEXER_CONFIG = {\n    deferDefinitionErrorsHandling: false,\n    positionTracking: \"full\",\n    lineTerminatorsPattern: /\\n|\\r\\n?/g,\n    lineTerminatorCharacters: [\"\\n\", \"\\r\"],\n    ensureOptimizations: false,\n    safeMode: false,\n    errorMessageProvider: lexer_errors_public_1.defaultLexerErrorProvider,\n    traceInitPerf: false,\n    skipValidations: false,\n    recoveryEnabled: true\n};\nObject.freeze(DEFAULT_LEXER_CONFIG);\nvar Lexer = /** @class */ (function () {\n    function Lexer(lexerDefinition, config) {\n        if (config === void 0) { config = DEFAULT_LEXER_CONFIG; }\n        var _this = this;\n        this.lexerDefinition = lexerDefinition;\n        this.lexerDefinitionErrors = [];\n        this.lexerDefinitionWarning = [];\n        this.patternIdxToConfig = {};\n        this.charCodeToPatternIdxToConfig = {};\n        this.modes = [];\n        this.emptyGroups = {};\n        this.trackStartLines = true;\n        this.trackEndLines = true;\n        this.hasCustom = false;\n        this.canModeBeOptimized = {};\n        // Duplicated from the parser's perf trace trait to allow future extraction\n        // of the lexer to a separate package.\n        this.TRACE_INIT = function (phaseDesc, phaseImpl) {\n            // No need to optimize this using NOOP pattern because\n            // It is not called in a hot spot...\n            if (_this.traceInitPerf === true) {\n                _this.traceInitIndent++;\n                var indent = new Array(_this.traceInitIndent + 1).join(\"\\t\");\n                if (_this.traceInitIndent < _this.traceInitMaxIdent) {\n                    console.log(\"\".concat(indent, \"--> <\").concat(phaseDesc, \">\"));\n                }\n                var _a = (0, utils_1.timer)(phaseImpl), time = _a.time, value = _a.value;\n                /* istanbul ignore next - Difficult to reproduce specific performance behavior (>10ms) in tests */\n                var traceMethod = time > 10 ? console.warn : console.log;\n                if (_this.traceInitIndent < _this.traceInitMaxIdent) {\n                    traceMethod(\"\".concat(indent, \"<-- <\").concat(phaseDesc, \"> time: \").concat(time, \"ms\"));\n                }\n                _this.traceInitIndent--;\n                return value;\n            }\n            else {\n                return phaseImpl();\n            }\n        };\n        if (typeof config === \"boolean\") {\n            throw Error(\"The second argument to the Lexer constructor is now an ILexerConfig Object.\\n\" +\n                \"a boolean 2nd argument is no longer supported\");\n        }\n        // todo: defaults func?\n        this.config = (0, assign_1.default)({}, DEFAULT_LEXER_CONFIG, config);\n        var traceInitVal = this.config.traceInitPerf;\n        if (traceInitVal === true) {\n            this.traceInitMaxIdent = Infinity;\n            this.traceInitPerf = true;\n        }\n        else if (typeof traceInitVal === \"number\") {\n            this.traceInitMaxIdent = traceInitVal;\n            this.traceInitPerf = true;\n        }\n        this.traceInitIndent = -1;\n        this.TRACE_INIT(\"Lexer Constructor\", function () {\n            var actualDefinition;\n            var hasOnlySingleMode = true;\n            _this.TRACE_INIT(\"Lexer Config handling\", function () {\n                if (_this.config.lineTerminatorsPattern ===\n                    DEFAULT_LEXER_CONFIG.lineTerminatorsPattern) {\n                    // optimized built-in implementation for the defaults definition of lineTerminators\n                    _this.config.lineTerminatorsPattern = lexer_1.LineTerminatorOptimizedTester;\n                }\n                else {\n                    if (_this.config.lineTerminatorCharacters ===\n                        DEFAULT_LEXER_CONFIG.lineTerminatorCharacters) {\n                        throw Error(\"Error: Missing <lineTerminatorCharacters> property on the Lexer config.\\n\" +\n                            \"\\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS\");\n                    }\n                }\n                if (config.safeMode && config.ensureOptimizations) {\n                    throw Error('\"safeMode\" and \"ensureOptimizations\" flags are mutually exclusive.');\n                }\n                _this.trackStartLines = /full|onlyStart/i.test(_this.config.positionTracking);\n                _this.trackEndLines = /full/i.test(_this.config.positionTracking);\n                // Convert SingleModeLexerDefinition into a IMultiModeLexerDefinition.\n                if ((0, isArray_1.default)(lexerDefinition)) {\n                    actualDefinition = {\n                        modes: { defaultMode: (0, clone_1.default)(lexerDefinition) },\n                        defaultMode: lexer_1.DEFAULT_MODE\n                    };\n                }\n                else {\n                    // no conversion needed, input should already be a IMultiModeLexerDefinition\n                    hasOnlySingleMode = false;\n                    actualDefinition = (0, clone_1.default)(lexerDefinition);\n                }\n            });\n            if (_this.config.skipValidations === false) {\n                _this.TRACE_INIT(\"performRuntimeChecks\", function () {\n                    _this.lexerDefinitionErrors = _this.lexerDefinitionErrors.concat((0, lexer_1.performRuntimeChecks)(actualDefinition, _this.trackStartLines, _this.config.lineTerminatorCharacters));\n                });\n                _this.TRACE_INIT(\"performWarningRuntimeChecks\", function () {\n                    _this.lexerDefinitionWarning = _this.lexerDefinitionWarning.concat((0, lexer_1.performWarningRuntimeChecks)(actualDefinition, _this.trackStartLines, _this.config.lineTerminatorCharacters));\n                });\n            }\n            // for extra robustness to avoid throwing an none informative error message\n            actualDefinition.modes = actualDefinition.modes\n                ? actualDefinition.modes\n                : {};\n            // an error of undefined TokenTypes will be detected in \"performRuntimeChecks\" above.\n            // this transformation is to increase robustness in the case of partially invalid lexer definition.\n            (0, forEach_1.default)(actualDefinition.modes, function (currModeValue, currModeName) {\n                actualDefinition.modes[currModeName] = (0, reject_1.default)(currModeValue, function (currTokType) { return (0, isUndefined_1.default)(currTokType); });\n            });\n            var allModeNames = (0, keys_1.default)(actualDefinition.modes);\n            (0, forEach_1.default)(actualDefinition.modes, function (currModDef, currModName) {\n                _this.TRACE_INIT(\"Mode: <\".concat(currModName, \"> processing\"), function () {\n                    _this.modes.push(currModName);\n                    if (_this.config.skipValidations === false) {\n                        _this.TRACE_INIT(\"validatePatterns\", function () {\n                            _this.lexerDefinitionErrors = _this.lexerDefinitionErrors.concat((0, lexer_1.validatePatterns)(currModDef, allModeNames));\n                        });\n                    }\n                    // If definition errors were encountered, the analysis phase may fail unexpectedly/\n                    // Considering a lexer with definition errors may never be used, there is no point\n                    // to performing the analysis anyhow...\n                    if ((0, isEmpty_1.default)(_this.lexerDefinitionErrors)) {\n                        (0, tokens_1.augmentTokenTypes)(currModDef);\n                        var currAnalyzeResult_1;\n                        _this.TRACE_INIT(\"analyzeTokenTypes\", function () {\n                            currAnalyzeResult_1 = (0, lexer_1.analyzeTokenTypes)(currModDef, {\n                                lineTerminatorCharacters: _this.config.lineTerminatorCharacters,\n                                positionTracking: config.positionTracking,\n                                ensureOptimizations: config.ensureOptimizations,\n                                safeMode: config.safeMode,\n                                tracer: _this.TRACE_INIT\n                            });\n                        });\n                        _this.patternIdxToConfig[currModName] =\n                            currAnalyzeResult_1.patternIdxToConfig;\n                        _this.charCodeToPatternIdxToConfig[currModName] =\n                            currAnalyzeResult_1.charCodeToPatternIdxToConfig;\n                        _this.emptyGroups = (0, assign_1.default)({}, _this.emptyGroups, currAnalyzeResult_1.emptyGroups);\n                        _this.hasCustom = currAnalyzeResult_1.hasCustom || _this.hasCustom;\n                        _this.canModeBeOptimized[currModName] =\n                            currAnalyzeResult_1.canBeOptimized;\n                    }\n                });\n            });\n            _this.defaultMode = actualDefinition.defaultMode;\n            if (!(0, isEmpty_1.default)(_this.lexerDefinitionErrors) &&\n                !_this.config.deferDefinitionErrorsHandling) {\n                var allErrMessages = (0, map_1.default)(_this.lexerDefinitionErrors, function (error) {\n                    return error.message;\n                });\n                var allErrMessagesString = allErrMessages.join(\"-----------------------\\n\");\n                throw new Error(\"Errors detected in definition of Lexer:\\n\" + allErrMessagesString);\n            }\n            // Only print warning if there are no errors, This will avoid pl\n            (0, forEach_1.default)(_this.lexerDefinitionWarning, function (warningDescriptor) {\n                (0, utils_1.PRINT_WARNING)(warningDescriptor.message);\n            });\n            _this.TRACE_INIT(\"Choosing sub-methods implementations\", function () {\n                // Choose the relevant internal implementations for this specific parser.\n                // These implementations should be in-lined by the JavaScript engine\n                // to provide optimal performance in each scenario.\n                if (lexer_1.SUPPORT_STICKY) {\n                    _this.chopInput = identity_1.default;\n                    _this.match = _this.matchWithTest;\n                }\n                else {\n                    _this.updateLastIndex = noop_1.default;\n                    _this.match = _this.matchWithExec;\n                }\n                if (hasOnlySingleMode) {\n                    _this.handleModes = noop_1.default;\n                }\n                if (_this.trackStartLines === false) {\n                    _this.computeNewColumn = identity_1.default;\n                }\n                if (_this.trackEndLines === false) {\n                    _this.updateTokenEndLineColumnLocation = noop_1.default;\n                }\n                if (/full/i.test(_this.config.positionTracking)) {\n                    _this.createTokenInstance = _this.createFullToken;\n                }\n                else if (/onlyStart/i.test(_this.config.positionTracking)) {\n                    _this.createTokenInstance = _this.createStartOnlyToken;\n                }\n                else if (/onlyOffset/i.test(_this.config.positionTracking)) {\n                    _this.createTokenInstance = _this.createOffsetOnlyToken;\n                }\n                else {\n                    throw Error(\"Invalid <positionTracking> config option: \\\"\".concat(_this.config.positionTracking, \"\\\"\"));\n                }\n                if (_this.hasCustom) {\n                    _this.addToken = _this.addTokenUsingPush;\n                    _this.handlePayload = _this.handlePayloadWithCustom;\n                }\n                else {\n                    _this.addToken = _this.addTokenUsingMemberAccess;\n                    _this.handlePayload = _this.handlePayloadNoCustom;\n                }\n            });\n            _this.TRACE_INIT(\"Failed Optimization Warnings\", function () {\n                var unOptimizedModes = (0, reduce_1.default)(_this.canModeBeOptimized, function (cannotBeOptimized, canBeOptimized, modeName) {\n                    if (canBeOptimized === false) {\n                        cannotBeOptimized.push(modeName);\n                    }\n                    return cannotBeOptimized;\n                }, []);\n                if (config.ensureOptimizations && !(0, isEmpty_1.default)(unOptimizedModes)) {\n                    throw Error(\"Lexer Modes: < \".concat(unOptimizedModes.join(\", \"), \" > cannot be optimized.\\n\") +\n                        '\\t Disable the \"ensureOptimizations\" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.\\n' +\n                        \"\\t Or inspect the console log for details on how to resolve these issues.\");\n                }\n            });\n            _this.TRACE_INIT(\"clearRegExpParserCache\", function () {\n                (0, reg_exp_parser_1.clearRegExpParserCache)();\n            });\n            _this.TRACE_INIT(\"toFastProperties\", function () {\n                (0, utils_1.toFastProperties)(_this);\n            });\n        });\n    }\n    Lexer.prototype.tokenize = function (text, initialMode) {\n        if (initialMode === void 0) { initialMode = this.defaultMode; }\n        if (!(0, isEmpty_1.default)(this.lexerDefinitionErrors)) {\n            var allErrMessages = (0, map_1.default)(this.lexerDefinitionErrors, function (error) {\n                return error.message;\n            });\n            var allErrMessagesString = allErrMessages.join(\"-----------------------\\n\");\n            throw new Error(\"Unable to Tokenize because Errors detected in definition of Lexer:\\n\" +\n                allErrMessagesString);\n        }\n        return this.tokenizeInternal(text, initialMode);\n    };\n    // There is quite a bit of duplication between this and \"tokenizeInternalLazy\"\n    // This is intentional due to performance considerations.\n    // this method also used quite a bit of `!` none null assertions because it is too optimized\n    // for `tsc` to always understand it is \"safe\"\n    Lexer.prototype.tokenizeInternal = function (text, initialMode) {\n        var _this = this;\n        var i, j, k, matchAltImage, longerAlt, matchedImage, payload, altPayload, imageLength, group, tokType, newToken, errLength, droppedChar, msg, match;\n        var orgText = text;\n        var orgLength = orgText.length;\n        var offset = 0;\n        var matchedTokensIndex = 0;\n        // initializing the tokensArray to the \"guessed\" size.\n        // guessing too little will still reduce the number of array re-sizes on pushes.\n        // guessing too large (Tested by guessing x4 too large) may cost a bit more of memory\n        // but would still have a faster runtime by avoiding (All but one) array resizing.\n        var guessedNumberOfTokens = this.hasCustom\n            ? 0 // will break custom token pattern APIs the matchedTokens array will contain undefined elements.\n            : Math.floor(text.length / 10);\n        var matchedTokens = new Array(guessedNumberOfTokens);\n        var errors = [];\n        var line = this.trackStartLines ? 1 : undefined;\n        var column = this.trackStartLines ? 1 : undefined;\n        var groups = (0, lexer_1.cloneEmptyGroups)(this.emptyGroups);\n        var trackLines = this.trackStartLines;\n        var lineTerminatorPattern = this.config.lineTerminatorsPattern;\n        var currModePatternsLength = 0;\n        var patternIdxToConfig = [];\n        var currCharCodeToPatternIdxToConfig = [];\n        var modeStack = [];\n        var emptyArray = [];\n        Object.freeze(emptyArray);\n        var getPossiblePatterns;\n        function getPossiblePatternsSlow() {\n            return patternIdxToConfig;\n        }\n        function getPossiblePatternsOptimized(charCode) {\n            var optimizedCharIdx = (0, lexer_1.charCodeToOptimizedIndex)(charCode);\n            var possiblePatterns = currCharCodeToPatternIdxToConfig[optimizedCharIdx];\n            if (possiblePatterns === undefined) {\n                return emptyArray;\n            }\n            else {\n                return possiblePatterns;\n            }\n        }\n        var pop_mode = function (popToken) {\n            // TODO: perhaps avoid this error in the edge case there is no more input?\n            if (modeStack.length === 1 &&\n                // if we have both a POP_MODE and a PUSH_MODE this is in-fact a \"transition\"\n                // So no error should occur.\n                popToken.tokenType.PUSH_MODE === undefined) {\n                // if we try to pop the last mode there lexer will no longer have ANY mode.\n                // thus the pop is ignored, an error will be created and the lexer will continue parsing in the previous mode.\n                var msg_1 = _this.config.errorMessageProvider.buildUnableToPopLexerModeMessage(popToken);\n                errors.push({\n                    offset: popToken.startOffset,\n                    line: popToken.startLine,\n                    column: popToken.startColumn,\n                    length: popToken.image.length,\n                    message: msg_1\n                });\n            }\n            else {\n                modeStack.pop();\n                var newMode = (0, last_1.default)(modeStack);\n                patternIdxToConfig = _this.patternIdxToConfig[newMode];\n                currCharCodeToPatternIdxToConfig =\n                    _this.charCodeToPatternIdxToConfig[newMode];\n                currModePatternsLength = patternIdxToConfig.length;\n                var modeCanBeOptimized = _this.canModeBeOptimized[newMode] && _this.config.safeMode === false;\n                if (currCharCodeToPatternIdxToConfig && modeCanBeOptimized) {\n                    getPossiblePatterns = getPossiblePatternsOptimized;\n                }\n                else {\n                    getPossiblePatterns = getPossiblePatternsSlow;\n                }\n            }\n        };\n        function push_mode(newMode) {\n            modeStack.push(newMode);\n            currCharCodeToPatternIdxToConfig =\n                this.charCodeToPatternIdxToConfig[newMode];\n            patternIdxToConfig = this.patternIdxToConfig[newMode];\n            currModePatternsLength = patternIdxToConfig.length;\n            currModePatternsLength = patternIdxToConfig.length;\n            var modeCanBeOptimized = this.canModeBeOptimized[newMode] && this.config.safeMode === false;\n            if (currCharCodeToPatternIdxToConfig && modeCanBeOptimized) {\n                getPossiblePatterns = getPossiblePatternsOptimized;\n            }\n            else {\n                getPossiblePatterns = getPossiblePatternsSlow;\n            }\n        }\n        // this pattern seems to avoid a V8 de-optimization, although that de-optimization does not\n        // seem to matter performance wise.\n        push_mode.call(this, initialMode);\n        var currConfig;\n        var recoveryEnabled = this.config.recoveryEnabled;\n        while (offset < orgLength) {\n            matchedImage = null;\n            var nextCharCode = orgText.charCodeAt(offset);\n            var chosenPatternIdxToConfig = getPossiblePatterns(nextCharCode);\n            var chosenPatternsLength = chosenPatternIdxToConfig.length;\n            for (i = 0; i < chosenPatternsLength; i++) {\n                currConfig = chosenPatternIdxToConfig[i];\n                var currPattern = currConfig.pattern;\n                payload = null;\n                // manually in-lined because > 600 chars won't be in-lined in V8\n                var singleCharCode = currConfig.short;\n                if (singleCharCode !== false) {\n                    if (nextCharCode === singleCharCode) {\n                        // single character string\n                        matchedImage = currPattern;\n                    }\n                }\n                else if (currConfig.isCustom === true) {\n                    match = currPattern.exec(orgText, offset, matchedTokens, groups);\n                    if (match !== null) {\n                        matchedImage = match[0];\n                        if (match.payload !== undefined) {\n                            payload = match.payload;\n                        }\n                    }\n                    else {\n                        matchedImage = null;\n                    }\n                }\n                else {\n                    this.updateLastIndex(currPattern, offset);\n                    matchedImage = this.match(currPattern, text, offset);\n                }\n                if (matchedImage !== null) {\n                    // even though this pattern matched we must try a another longer alternative.\n                    // this can be used to prioritize keywords over identifiers\n                    longerAlt = currConfig.longerAlt;\n                    if (longerAlt !== undefined) {\n                        // TODO: micro optimize, avoid extra prop access\n                        // by saving/linking longerAlt on the original config?\n                        var longerAltLength = longerAlt.length;\n                        for (k = 0; k < longerAltLength; k++) {\n                            var longerAltConfig = patternIdxToConfig[longerAlt[k]];\n                            var longerAltPattern = longerAltConfig.pattern;\n                            altPayload = null;\n                            // single Char can never be a longer alt so no need to test it.\n                            // manually in-lined because > 600 chars won't be in-lined in V8\n                            if (longerAltConfig.isCustom === true) {\n                                match = longerAltPattern.exec(orgText, offset, matchedTokens, groups);\n                                if (match !== null) {\n                                    matchAltImage = match[0];\n                                    if (match.payload !== undefined) {\n                                        altPayload = match.payload;\n                                    }\n                                }\n                                else {\n                                    matchAltImage = null;\n                                }\n                            }\n                            else {\n                                this.updateLastIndex(longerAltPattern, offset);\n                                matchAltImage = this.match(longerAltPattern, text, offset);\n                            }\n                            if (matchAltImage && matchAltImage.length > matchedImage.length) {\n                                matchedImage = matchAltImage;\n                                payload = altPayload;\n                                currConfig = longerAltConfig;\n                                // Exit the loop early after matching one of the longer alternatives\n                                // The first matched alternative takes precedence\n                                break;\n                            }\n                        }\n                    }\n                    break;\n                }\n            }\n            // successful match\n            if (matchedImage !== null) {\n                imageLength = matchedImage.length;\n                group = currConfig.group;\n                if (group !== undefined) {\n                    tokType = currConfig.tokenTypeIdx;\n                    // TODO: \"offset + imageLength\" and the new column may be computed twice in case of \"full\" location information inside\n                    // createFullToken method\n                    newToken = this.createTokenInstance(matchedImage, offset, tokType, currConfig.tokenType, line, column, imageLength);\n                    this.handlePayload(newToken, payload);\n                    // TODO: optimize NOOP in case there are no special groups?\n                    if (group === false) {\n                        matchedTokensIndex = this.addToken(matchedTokens, matchedTokensIndex, newToken);\n                    }\n                    else {\n                        groups[group].push(newToken);\n                    }\n                }\n                text = this.chopInput(text, imageLength);\n                offset = offset + imageLength;\n                // TODO: with newlines the column may be assigned twice\n                column = this.computeNewColumn(column, imageLength);\n                if (trackLines === true && currConfig.canLineTerminator === true) {\n                    var numOfLTsInMatch = 0;\n                    var foundTerminator = void 0;\n                    var lastLTEndOffset = void 0;\n                    lineTerminatorPattern.lastIndex = 0;\n                    do {\n                        foundTerminator = lineTerminatorPattern.test(matchedImage);\n                        if (foundTerminator === true) {\n                            lastLTEndOffset = lineTerminatorPattern.lastIndex - 1;\n                            numOfLTsInMatch++;\n                        }\n                    } while (foundTerminator === true);\n                    if (numOfLTsInMatch !== 0) {\n                        line = line + numOfLTsInMatch;\n                        column = imageLength - lastLTEndOffset;\n                        this.updateTokenEndLineColumnLocation(newToken, group, lastLTEndOffset, numOfLTsInMatch, line, column, imageLength);\n                    }\n                }\n                // will be NOOP if no modes present\n                this.handleModes(currConfig, pop_mode, push_mode, newToken);\n            }\n            else {\n                // error recovery, drop characters until we identify a valid token's start point\n                var errorStartOffset = offset;\n                var errorLine = line;\n                var errorColumn = column;\n                var foundResyncPoint = recoveryEnabled === false;\n                while (foundResyncPoint === false && offset < orgLength) {\n                    // Identity Func (when sticky flag is enabled)\n                    text = this.chopInput(text, 1);\n                    offset++;\n                    for (j = 0; j < currModePatternsLength; j++) {\n                        var currConfig_1 = patternIdxToConfig[j];\n                        var currPattern = currConfig_1.pattern;\n                        // manually in-lined because > 600 chars won't be in-lined in V8\n                        var singleCharCode = currConfig_1.short;\n                        if (singleCharCode !== false) {\n                            if (orgText.charCodeAt(offset) === singleCharCode) {\n                                // single character string\n                                foundResyncPoint = true;\n                            }\n                        }\n                        else if (currConfig_1.isCustom === true) {\n                            foundResyncPoint =\n                                currPattern.exec(orgText, offset, matchedTokens, groups) !== null;\n                        }\n                        else {\n                            this.updateLastIndex(currPattern, offset);\n                            foundResyncPoint = currPattern.exec(text) !== null;\n                        }\n                        if (foundResyncPoint === true) {\n                            break;\n                        }\n                    }\n                }\n                errLength = offset - errorStartOffset;\n                // at this point we either re-synced or reached the end of the input text\n                msg = this.config.errorMessageProvider.buildUnexpectedCharactersMessage(orgText, errorStartOffset, errLength, errorLine, errorColumn);\n                errors.push({\n                    offset: errorStartOffset,\n                    line: errorLine,\n                    column: errorColumn,\n                    length: errLength,\n                    message: msg\n                });\n                if (recoveryEnabled === false) {\n                    break;\n                }\n            }\n        }\n        // if we do have custom patterns which push directly into the\n        // TODO: custom tokens should not push directly??\n        if (!this.hasCustom) {\n            // if we guessed a too large size for the tokens array this will shrink it to the right size.\n            matchedTokens.length = matchedTokensIndex;\n        }\n        return {\n            tokens: matchedTokens,\n            groups: groups,\n            errors: errors\n        };\n    };\n    Lexer.prototype.handleModes = function (config, pop_mode, push_mode, newToken) {\n        if (config.pop === true) {\n            // need to save the PUSH_MODE property as if the mode is popped\n            // patternIdxToPopMode is updated to reflect the new mode after popping the stack\n            var pushMode = config.push;\n            pop_mode(newToken);\n            if (pushMode !== undefined) {\n                push_mode.call(this, pushMode);\n            }\n        }\n        else if (config.push !== undefined) {\n            push_mode.call(this, config.push);\n        }\n    };\n    Lexer.prototype.chopInput = function (text, length) {\n        return text.substring(length);\n    };\n    Lexer.prototype.updateLastIndex = function (regExp, newLastIndex) {\n        regExp.lastIndex = newLastIndex;\n    };\n    // TODO: decrease this under 600 characters? inspect stripping comments option in TSC compiler\n    Lexer.prototype.updateTokenEndLineColumnLocation = function (newToken, group, lastLTIdx, numOfLTsInMatch, line, column, imageLength) {\n        var lastCharIsLT, fixForEndingInLT;\n        if (group !== undefined) {\n            // a none skipped multi line Token, need to update endLine/endColumn\n            lastCharIsLT = lastLTIdx === imageLength - 1;\n            fixForEndingInLT = lastCharIsLT ? -1 : 0;\n            if (!(numOfLTsInMatch === 1 && lastCharIsLT === true)) {\n                // if a token ends in a LT that last LT only affects the line numbering of following Tokens\n                newToken.endLine = line + fixForEndingInLT;\n                // the last LT in a token does not affect the endColumn either as the [columnStart ... columnEnd)\n                // inclusive to exclusive range.\n                newToken.endColumn = column - 1 + -fixForEndingInLT;\n            }\n            // else single LT in the last character of a token, no need to modify the endLine/EndColumn\n        }\n    };\n    Lexer.prototype.computeNewColumn = function (oldColumn, imageLength) {\n        return oldColumn + imageLength;\n    };\n    Lexer.prototype.createOffsetOnlyToken = function (image, startOffset, tokenTypeIdx, tokenType) {\n        return {\n            image: image,\n            startOffset: startOffset,\n            tokenTypeIdx: tokenTypeIdx,\n            tokenType: tokenType\n        };\n    };\n    Lexer.prototype.createStartOnlyToken = function (image, startOffset, tokenTypeIdx, tokenType, startLine, startColumn) {\n        return {\n            image: image,\n            startOffset: startOffset,\n            startLine: startLine,\n            startColumn: startColumn,\n            tokenTypeIdx: tokenTypeIdx,\n            tokenType: tokenType\n        };\n    };\n    Lexer.prototype.createFullToken = function (image, startOffset, tokenTypeIdx, tokenType, startLine, startColumn, imageLength) {\n        return {\n            image: image,\n            startOffset: startOffset,\n            endOffset: startOffset + imageLength - 1,\n            startLine: startLine,\n            endLine: startLine,\n            startColumn: startColumn,\n            endColumn: startColumn + imageLength - 1,\n            tokenTypeIdx: tokenTypeIdx,\n            tokenType: tokenType\n        };\n    };\n    Lexer.prototype.addTokenUsingPush = function (tokenVector, index, tokenToAdd) {\n        tokenVector.push(tokenToAdd);\n        return index;\n    };\n    Lexer.prototype.addTokenUsingMemberAccess = function (tokenVector, index, tokenToAdd) {\n        tokenVector[index] = tokenToAdd;\n        index++;\n        return index;\n    };\n    Lexer.prototype.handlePayloadNoCustom = function (token, payload) { };\n    Lexer.prototype.handlePayloadWithCustom = function (token, payload) {\n        if (payload !== null) {\n            token.payload = payload;\n        }\n    };\n    Lexer.prototype.matchWithTest = function (pattern, text, offset) {\n        var found = pattern.test(text);\n        if (found === true) {\n            return text.substring(offset, pattern.lastIndex);\n        }\n        return null;\n    };\n    Lexer.prototype.matchWithExec = function (pattern, text) {\n        var regExpArray = pattern.exec(text);\n        return regExpArray !== null ? regExpArray[0] : null;\n    };\n    Lexer.SKIPPED = \"This marks a skipped Token pattern, this means each token identified by it will\" +\n        \"be consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.\";\n    Lexer.NA = /NOT_APPLICABLE/;\n    return Lexer;\n}());\nexports.Lexer = Lexer;\n","/**\n * Creates an array with all falsey values removed. The values `false`, `null`,\n * `0`, `\"\"`, `undefined`, and `NaN` are falsey.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to compact.\n * @returns {Array} Returns the new array of filtered values.\n * @example\n *\n * _.compact([0, 1, false, 2, '', 3]);\n * // => [1, 2, 3]\n */\nfunction compact(array) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (value) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = compact;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.defaultGrammarValidatorErrorProvider = exports.defaultGrammarResolverErrorProvider = exports.defaultParserErrorProvider = void 0;\nvar tokens_public_1 = require(\"../scan/tokens_public\");\nvar first_1 = __importDefault(require(\"lodash/first\"));\nvar map_1 = __importDefault(require(\"lodash/map\"));\nvar reduce_1 = __importDefault(require(\"lodash/reduce\"));\nvar gast_1 = require(\"@chevrotain/gast\");\nvar gast_2 = require(\"@chevrotain/gast\");\nexports.defaultParserErrorProvider = {\n    buildMismatchTokenMessage: function (_a) {\n        var expected = _a.expected, actual = _a.actual, previous = _a.previous, ruleName = _a.ruleName;\n        var hasLabel = (0, tokens_public_1.hasTokenLabel)(expected);\n        var expectedMsg = hasLabel\n            ? \"--> \".concat((0, tokens_public_1.tokenLabel)(expected), \" <--\")\n            : \"token of type --> \".concat(expected.name, \" <--\");\n        var msg = \"Expecting \".concat(expectedMsg, \" but found --> '\").concat(actual.image, \"' <--\");\n        return msg;\n    },\n    buildNotAllInputParsedMessage: function (_a) {\n        var firstRedundant = _a.firstRedundant, ruleName = _a.ruleName;\n        return \"Redundant input, expecting EOF but found: \" + firstRedundant.image;\n    },\n    buildNoViableAltMessage: function (_a) {\n        var expectedPathsPerAlt = _a.expectedPathsPerAlt, actual = _a.actual, previous = _a.previous, customUserDescription = _a.customUserDescription, ruleName = _a.ruleName;\n        var errPrefix = \"Expecting: \";\n        // TODO: issue: No Viable Alternative Error may have incomplete details. #502\n        var actualText = (0, first_1.default)(actual).image;\n        var errSuffix = \"\\nbut found: '\" + actualText + \"'\";\n        if (customUserDescription) {\n            return errPrefix + customUserDescription + errSuffix;\n        }\n        else {\n            var allLookAheadPaths = (0, reduce_1.default)(expectedPathsPerAlt, function (result, currAltPaths) { return result.concat(currAltPaths); }, []);\n            var nextValidTokenSequences = (0, map_1.default)(allLookAheadPaths, function (currPath) {\n                return \"[\".concat((0, map_1.default)(currPath, function (currTokenType) { return (0, tokens_public_1.tokenLabel)(currTokenType); }).join(\", \"), \"]\");\n            });\n            var nextValidSequenceItems = (0, map_1.default)(nextValidTokenSequences, function (itemMsg, idx) { return \"  \".concat(idx + 1, \". \").concat(itemMsg); });\n            var calculatedDescription = \"one of these possible Token sequences:\\n\".concat(nextValidSequenceItems.join(\"\\n\"));\n            return errPrefix + calculatedDescription + errSuffix;\n        }\n    },\n    buildEarlyExitMessage: function (_a) {\n        var expectedIterationPaths = _a.expectedIterationPaths, actual = _a.actual, customUserDescription = _a.customUserDescription, ruleName = _a.ruleName;\n        var errPrefix = \"Expecting: \";\n        // TODO: issue: No Viable Alternative Error may have incomplete details. #502\n        var actualText = (0, first_1.default)(actual).image;\n        var errSuffix = \"\\nbut found: '\" + actualText + \"'\";\n        if (customUserDescription) {\n            return errPrefix + customUserDescription + errSuffix;\n        }\n        else {\n            var nextValidTokenSequences = (0, map_1.default)(expectedIterationPaths, function (currPath) {\n                return \"[\".concat((0, map_1.default)(currPath, function (currTokenType) { return (0, tokens_public_1.tokenLabel)(currTokenType); }).join(\",\"), \"]\");\n            });\n            var calculatedDescription = \"expecting at least one iteration which starts with one of these possible Token sequences::\\n  \" +\n                \"<\".concat(nextValidTokenSequences.join(\" ,\"), \">\");\n            return errPrefix + calculatedDescription + errSuffix;\n        }\n    }\n};\nObject.freeze(exports.defaultParserErrorProvider);\nexports.defaultGrammarResolverErrorProvider = {\n    buildRuleNotFoundError: function (topLevelRule, undefinedRule) {\n        var msg = \"Invalid grammar, reference to a rule which is not defined: ->\" +\n            undefinedRule.nonTerminalName +\n            \"<-\\n\" +\n            \"inside top level rule: ->\" +\n            topLevelRule.name +\n            \"<-\";\n        return msg;\n    }\n};\nexports.defaultGrammarValidatorErrorProvider = {\n    buildDuplicateFoundError: function (topLevelRule, duplicateProds) {\n        function getExtraProductionArgument(prod) {\n            if (prod instanceof gast_1.Terminal) {\n                return prod.terminalType.name;\n            }\n            else if (prod instanceof gast_1.NonTerminal) {\n                return prod.nonTerminalName;\n            }\n            else {\n                return \"\";\n            }\n        }\n        var topLevelName = topLevelRule.name;\n        var duplicateProd = (0, first_1.default)(duplicateProds);\n        var index = duplicateProd.idx;\n        var dslName = (0, gast_2.getProductionDslName)(duplicateProd);\n        var extraArgument = getExtraProductionArgument(duplicateProd);\n        var hasExplicitIndex = index > 0;\n        var msg = \"->\".concat(dslName).concat(hasExplicitIndex ? index : \"\", \"<- \").concat(extraArgument ? \"with argument: ->\".concat(extraArgument, \"<-\") : \"\", \"\\n                  appears more than once (\").concat(duplicateProds.length, \" times) in the top level rule: ->\").concat(topLevelName, \"<-.                  \\n                  For further details see: https://chevrotain.io/docs/FAQ.html#NUMERICAL_SUFFIXES \\n                  \");\n        // white space trimming time! better to trim afterwards as it allows to use WELL formatted multi line template strings...\n        msg = msg.replace(/[ \\t]+/g, \" \");\n        msg = msg.replace(/\\s\\s+/g, \"\\n\");\n        return msg;\n    },\n    buildNamespaceConflictError: function (rule) {\n        var errMsg = \"Namespace conflict found in grammar.\\n\" +\n            \"The grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <\".concat(rule.name, \">.\\n\") +\n            \"To resolve this make sure each Terminal and Non-Terminal names are unique\\n\" +\n            \"This is easy to accomplish by using the convention that Terminal names start with an uppercase letter\\n\" +\n            \"and Non-Terminal names start with a lower case letter.\";\n        return errMsg;\n    },\n    buildAlternationPrefixAmbiguityError: function (options) {\n        var pathMsg = (0, map_1.default)(options.prefixPath, function (currTok) {\n            return (0, tokens_public_1.tokenLabel)(currTok);\n        }).join(\", \");\n        var occurrence = options.alternation.idx === 0 ? \"\" : options.alternation.idx;\n        var errMsg = \"Ambiguous alternatives: <\".concat(options.ambiguityIndices.join(\" ,\"), \"> due to common lookahead prefix\\n\") +\n            \"in <OR\".concat(occurrence, \"> inside <\").concat(options.topLevelRule.name, \"> Rule,\\n\") +\n            \"<\".concat(pathMsg, \"> may appears as a prefix path in all these alternatives.\\n\") +\n            \"See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX\\n\" +\n            \"For Further details.\";\n        return errMsg;\n    },\n    buildAlternationAmbiguityError: function (options) {\n        var pathMsg = (0, map_1.default)(options.prefixPath, function (currtok) {\n            return (0, tokens_public_1.tokenLabel)(currtok);\n        }).join(\", \");\n        var occurrence = options.alternation.idx === 0 ? \"\" : options.alternation.idx;\n        var currMessage = \"Ambiguous Alternatives Detected: <\".concat(options.ambiguityIndices.join(\" ,\"), \"> in <OR\").concat(occurrence, \">\") +\n            \" inside <\".concat(options.topLevelRule.name, \"> Rule,\\n\") +\n            \"<\".concat(pathMsg, \"> may appears as a prefix path in all these alternatives.\\n\");\n        currMessage =\n            currMessage +\n                \"See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES\\n\" +\n                \"For Further details.\";\n        return currMessage;\n    },\n    buildEmptyRepetitionError: function (options) {\n        var dslName = (0, gast_2.getProductionDslName)(options.repetition);\n        if (options.repetition.idx !== 0) {\n            dslName += options.repetition.idx;\n        }\n        var errMsg = \"The repetition <\".concat(dslName, \"> within Rule <\").concat(options.topLevelRule.name, \"> can never consume any tokens.\\n\") +\n            \"This could lead to an infinite loop.\";\n        return errMsg;\n    },\n    // TODO: remove - `errors_public` from nyc.config.js exclude\n    //       once this method is fully removed from this file\n    buildTokenNameError: function (options) {\n        /* istanbul ignore next */\n        return \"deprecated\";\n    },\n    buildEmptyAlternationError: function (options) {\n        var errMsg = \"Ambiguous empty alternative: <\".concat(options.emptyChoiceIdx + 1, \">\") +\n            \" in <OR\".concat(options.alternation.idx, \"> inside <\").concat(options.topLevelRule.name, \"> Rule.\\n\") +\n            \"Only the last alternative may be an empty alternative.\";\n        return errMsg;\n    },\n    buildTooManyAlternativesError: function (options) {\n        var errMsg = \"An Alternation cannot have more than 256 alternatives:\\n\" +\n            \"<OR\".concat(options.alternation.idx, \"> inside <\").concat(options.topLevelRule.name, \"> Rule.\\n has \").concat(options.alternation.definition.length + 1, \" alternatives.\");\n        return errMsg;\n    },\n    buildLeftRecursionError: function (options) {\n        var ruleName = options.topLevelRule.name;\n        var pathNames = (0, map_1.default)(options.leftRecursionPath, function (currRule) { return currRule.name; });\n        var leftRecursivePath = \"\".concat(ruleName, \" --> \").concat(pathNames\n            .concat([ruleName])\n            .join(\" --> \"));\n        var errMsg = \"Left Recursion found in grammar.\\n\" +\n            \"rule: <\".concat(ruleName, \"> can be invoked from itself (directly or indirectly)\\n\") +\n            \"without consuming any Tokens. The grammar path that causes this is: \\n \".concat(leftRecursivePath, \"\\n\") +\n            \" To fix this refactor your grammar to remove the left recursion.\\n\" +\n            \"see: https://en.wikipedia.org/wiki/LL_parser#Left_factoring.\";\n        return errMsg;\n    },\n    // TODO: remove - `errors_public` from nyc.config.js exclude\n    //       once this method is fully removed from this file\n    buildInvalidRuleNameError: function (options) {\n        /* istanbul ignore next */\n        return \"deprecated\";\n    },\n    buildDuplicateRuleNameError: function (options) {\n        var ruleName;\n        if (options.topLevelRule instanceof gast_1.Rule) {\n            ruleName = options.topLevelRule.name;\n        }\n        else {\n            ruleName = options.topLevelRule;\n        }\n        var errMsg = \"Duplicate definition, rule: ->\".concat(ruleName, \"<- is already defined in the grammar: ->\").concat(options.grammarName, \"<-\");\n        return errMsg;\n    }\n};\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.areTokenCategoriesNotUsed = exports.isStrictPrefixOfPath = exports.containsPath = exports.getLookaheadPathsForOptionalProd = exports.getLookaheadPathsForOr = exports.lookAheadSequenceFromAlternatives = exports.buildSingleAlternativeLookaheadFunction = exports.buildAlternativesLookAheadFunc = exports.buildLookaheadFuncForOptionalProd = exports.buildLookaheadFuncForOr = exports.getProdType = exports.PROD_TYPE = void 0;\nvar isEmpty_1 = __importDefault(require(\"lodash/isEmpty\"));\nvar flatten_1 = __importDefault(require(\"lodash/flatten\"));\nvar every_1 = __importDefault(require(\"lodash/every\"));\nvar map_1 = __importDefault(require(\"lodash/map\"));\nvar forEach_1 = __importDefault(require(\"lodash/forEach\"));\nvar has_1 = __importDefault(require(\"lodash/has\"));\nvar reduce_1 = __importDefault(require(\"lodash/reduce\"));\nvar interpreter_1 = require(\"./interpreter\");\nvar rest_1 = require(\"./rest\");\nvar tokens_1 = require(\"../../scan/tokens\");\nvar gast_1 = require(\"@chevrotain/gast\");\nvar gast_2 = require(\"@chevrotain/gast\");\nvar PROD_TYPE;\n(function (PROD_TYPE) {\n    PROD_TYPE[PROD_TYPE[\"OPTION\"] = 0] = \"OPTION\";\n    PROD_TYPE[PROD_TYPE[\"REPETITION\"] = 1] = \"REPETITION\";\n    PROD_TYPE[PROD_TYPE[\"REPETITION_MANDATORY\"] = 2] = \"REPETITION_MANDATORY\";\n    PROD_TYPE[PROD_TYPE[\"REPETITION_MANDATORY_WITH_SEPARATOR\"] = 3] = \"REPETITION_MANDATORY_WITH_SEPARATOR\";\n    PROD_TYPE[PROD_TYPE[\"REPETITION_WITH_SEPARATOR\"] = 4] = \"REPETITION_WITH_SEPARATOR\";\n    PROD_TYPE[PROD_TYPE[\"ALTERNATION\"] = 5] = \"ALTERNATION\";\n})(PROD_TYPE = exports.PROD_TYPE || (exports.PROD_TYPE = {}));\nfunction getProdType(prod) {\n    /* istanbul ignore else */\n    if (prod instanceof gast_1.Option) {\n        return PROD_TYPE.OPTION;\n    }\n    else if (prod instanceof gast_1.Repetition) {\n        return PROD_TYPE.REPETITION;\n    }\n    else if (prod instanceof gast_1.RepetitionMandatory) {\n        return PROD_TYPE.REPETITION_MANDATORY;\n    }\n    else if (prod instanceof gast_1.RepetitionMandatoryWithSeparator) {\n        return PROD_TYPE.REPETITION_MANDATORY_WITH_SEPARATOR;\n    }\n    else if (prod instanceof gast_1.RepetitionWithSeparator) {\n        return PROD_TYPE.REPETITION_WITH_SEPARATOR;\n    }\n    else if (prod instanceof gast_1.Alternation) {\n        return PROD_TYPE.ALTERNATION;\n    }\n    else {\n        throw Error(\"non exhaustive match\");\n    }\n}\nexports.getProdType = getProdType;\nfunction buildLookaheadFuncForOr(occurrence, ruleGrammar, maxLookahead, hasPredicates, dynamicTokensEnabled, laFuncBuilder) {\n    var lookAheadPaths = getLookaheadPathsForOr(occurrence, ruleGrammar, maxLookahead);\n    var tokenMatcher = areTokenCategoriesNotUsed(lookAheadPaths)\n        ? tokens_1.tokenStructuredMatcherNoCategories\n        : tokens_1.tokenStructuredMatcher;\n    return laFuncBuilder(lookAheadPaths, hasPredicates, tokenMatcher, dynamicTokensEnabled);\n}\nexports.buildLookaheadFuncForOr = buildLookaheadFuncForOr;\n/**\n *  When dealing with an Optional production (OPTION/MANY/2nd iteration of AT_LEAST_ONE/...) we need to compare\n *  the lookahead \"inside\" the production and the lookahead immediately \"after\" it in the same top level rule (context free).\n *\n *  Example: given a production:\n *  ABC(DE)?DF\n *\n *  The optional '(DE)?' should only be entered if we see 'DE'. a single Token 'D' is not sufficient to distinguish between the two\n *  alternatives.\n *\n *  @returns A Lookahead function which will return true IFF the parser should parse the Optional production.\n */\nfunction buildLookaheadFuncForOptionalProd(occurrence, ruleGrammar, k, dynamicTokensEnabled, prodType, lookaheadBuilder) {\n    var lookAheadPaths = getLookaheadPathsForOptionalProd(occurrence, ruleGrammar, prodType, k);\n    var tokenMatcher = areTokenCategoriesNotUsed(lookAheadPaths)\n        ? tokens_1.tokenStructuredMatcherNoCategories\n        : tokens_1.tokenStructuredMatcher;\n    return lookaheadBuilder(lookAheadPaths[0], tokenMatcher, dynamicTokensEnabled);\n}\nexports.buildLookaheadFuncForOptionalProd = buildLookaheadFuncForOptionalProd;\nfunction buildAlternativesLookAheadFunc(alts, hasPredicates, tokenMatcher, dynamicTokensEnabled) {\n    var numOfAlts = alts.length;\n    var areAllOneTokenLookahead = (0, every_1.default)(alts, function (currAlt) {\n        return (0, every_1.default)(currAlt, function (currPath) {\n            return currPath.length === 1;\n        });\n    });\n    // This version takes into account the predicates as well.\n    if (hasPredicates) {\n        /**\n         * @returns {number} - The chosen alternative index\n         */\n        return function (orAlts) {\n            // unfortunately the predicates must be extracted every single time\n            // as they cannot be cached due to references to parameters(vars) which are no longer valid.\n            // note that in the common case of no predicates, no cpu time will be wasted on this (see else block)\n            var predicates = (0, map_1.default)(orAlts, function (currAlt) { return currAlt.GATE; });\n            for (var t = 0; t < numOfAlts; t++) {\n                var currAlt = alts[t];\n                var currNumOfPaths = currAlt.length;\n                var currPredicate = predicates[t];\n                if (currPredicate !== undefined && currPredicate.call(this) === false) {\n                    // if the predicate does not match there is no point in checking the paths\n                    continue;\n                }\n                nextPath: for (var j = 0; j < currNumOfPaths; j++) {\n                    var currPath = currAlt[j];\n                    var currPathLength = currPath.length;\n                    for (var i = 0; i < currPathLength; i++) {\n                        var nextToken = this.LA(i + 1);\n                        if (tokenMatcher(nextToken, currPath[i]) === false) {\n                            // mismatch in current path\n                            // try the next pth\n                            continue nextPath;\n                        }\n                    }\n                    // found a full path that matches.\n                    // this will also work for an empty ALT as the loop will be skipped\n                    return t;\n                }\n                // none of the paths for the current alternative matched\n                // try the next alternative\n            }\n            // none of the alternatives could be matched\n            return undefined;\n        };\n    }\n    else if (areAllOneTokenLookahead && !dynamicTokensEnabled) {\n        // optimized (common) case of all the lookaheads paths requiring only\n        // a single token lookahead. These Optimizations cannot work if dynamically defined Tokens are used.\n        var singleTokenAlts = (0, map_1.default)(alts, function (currAlt) {\n            return (0, flatten_1.default)(currAlt);\n        });\n        var choiceToAlt_1 = (0, reduce_1.default)(singleTokenAlts, function (result, currAlt, idx) {\n            (0, forEach_1.default)(currAlt, function (currTokType) {\n                if (!(0, has_1.default)(result, currTokType.tokenTypeIdx)) {\n                    result[currTokType.tokenTypeIdx] = idx;\n                }\n                (0, forEach_1.default)(currTokType.categoryMatches, function (currExtendingType) {\n                    if (!(0, has_1.default)(result, currExtendingType)) {\n                        result[currExtendingType] = idx;\n                    }\n                });\n            });\n            return result;\n        }, {});\n        /**\n         * @returns {number} - The chosen alternative index\n         */\n        return function () {\n            var nextToken = this.LA(1);\n            return choiceToAlt_1[nextToken.tokenTypeIdx];\n        };\n    }\n    else {\n        // optimized lookahead without needing to check the predicates at all.\n        // this causes code duplication which is intentional to improve performance.\n        /**\n         * @returns {number} - The chosen alternative index\n         */\n        return function () {\n            for (var t = 0; t < numOfAlts; t++) {\n                var currAlt = alts[t];\n                var currNumOfPaths = currAlt.length;\n                nextPath: for (var j = 0; j < currNumOfPaths; j++) {\n                    var currPath = currAlt[j];\n                    var currPathLength = currPath.length;\n                    for (var i = 0; i < currPathLength; i++) {\n                        var nextToken = this.LA(i + 1);\n                        if (tokenMatcher(nextToken, currPath[i]) === false) {\n                            // mismatch in current path\n                            // try the next pth\n                            continue nextPath;\n                        }\n                    }\n                    // found a full path that matches.\n                    // this will also work for an empty ALT as the loop will be skipped\n                    return t;\n                }\n                // none of the paths for the current alternative matched\n                // try the next alternative\n            }\n            // none of the alternatives could be matched\n            return undefined;\n        };\n    }\n}\nexports.buildAlternativesLookAheadFunc = buildAlternativesLookAheadFunc;\nfunction buildSingleAlternativeLookaheadFunction(alt, tokenMatcher, dynamicTokensEnabled) {\n    var areAllOneTokenLookahead = (0, every_1.default)(alt, function (currPath) {\n        return currPath.length === 1;\n    });\n    var numOfPaths = alt.length;\n    // optimized (common) case of all the lookaheads paths requiring only\n    // a single token lookahead.\n    if (areAllOneTokenLookahead && !dynamicTokensEnabled) {\n        var singleTokensTypes = (0, flatten_1.default)(alt);\n        if (singleTokensTypes.length === 1 &&\n            (0, isEmpty_1.default)(singleTokensTypes[0].categoryMatches)) {\n            var expectedTokenType = singleTokensTypes[0];\n            var expectedTokenUniqueKey_1 = expectedTokenType.tokenTypeIdx;\n            return function () {\n                return this.LA(1).tokenTypeIdx === expectedTokenUniqueKey_1;\n            };\n        }\n        else {\n            var choiceToAlt_2 = (0, reduce_1.default)(singleTokensTypes, function (result, currTokType, idx) {\n                result[currTokType.tokenTypeIdx] = true;\n                (0, forEach_1.default)(currTokType.categoryMatches, function (currExtendingType) {\n                    result[currExtendingType] = true;\n                });\n                return result;\n            }, []);\n            return function () {\n                var nextToken = this.LA(1);\n                return choiceToAlt_2[nextToken.tokenTypeIdx] === true;\n            };\n        }\n    }\n    else {\n        return function () {\n            nextPath: for (var j = 0; j < numOfPaths; j++) {\n                var currPath = alt[j];\n                var currPathLength = currPath.length;\n                for (var i = 0; i < currPathLength; i++) {\n                    var nextToken = this.LA(i + 1);\n                    if (tokenMatcher(nextToken, currPath[i]) === false) {\n                        // mismatch in current path\n                        // try the next pth\n                        continue nextPath;\n                    }\n                }\n                // found a full path that matches.\n                return true;\n            }\n            // none of the paths matched\n            return false;\n        };\n    }\n}\nexports.buildSingleAlternativeLookaheadFunction = buildSingleAlternativeLookaheadFunction;\nvar RestDefinitionFinderWalker = /** @class */ (function (_super) {\n    __extends(RestDefinitionFinderWalker, _super);\n    function RestDefinitionFinderWalker(topProd, targetOccurrence, targetProdType) {\n        var _this = _super.call(this) || this;\n        _this.topProd = topProd;\n        _this.targetOccurrence = targetOccurrence;\n        _this.targetProdType = targetProdType;\n        return _this;\n    }\n    RestDefinitionFinderWalker.prototype.startWalking = function () {\n        this.walk(this.topProd);\n        return this.restDef;\n    };\n    RestDefinitionFinderWalker.prototype.checkIsTarget = function (node, expectedProdType, currRest, prevRest) {\n        if (node.idx === this.targetOccurrence &&\n            this.targetProdType === expectedProdType) {\n            this.restDef = currRest.concat(prevRest);\n            return true;\n        }\n        // performance optimization, do not iterate over the entire Grammar ast after we have found the target\n        return false;\n    };\n    RestDefinitionFinderWalker.prototype.walkOption = function (optionProd, currRest, prevRest) {\n        if (!this.checkIsTarget(optionProd, PROD_TYPE.OPTION, currRest, prevRest)) {\n            _super.prototype.walkOption.call(this, optionProd, currRest, prevRest);\n        }\n    };\n    RestDefinitionFinderWalker.prototype.walkAtLeastOne = function (atLeastOneProd, currRest, prevRest) {\n        if (!this.checkIsTarget(atLeastOneProd, PROD_TYPE.REPETITION_MANDATORY, currRest, prevRest)) {\n            _super.prototype.walkOption.call(this, atLeastOneProd, currRest, prevRest);\n        }\n    };\n    RestDefinitionFinderWalker.prototype.walkAtLeastOneSep = function (atLeastOneSepProd, currRest, prevRest) {\n        if (!this.checkIsTarget(atLeastOneSepProd, PROD_TYPE.REPETITION_MANDATORY_WITH_SEPARATOR, currRest, prevRest)) {\n            _super.prototype.walkOption.call(this, atLeastOneSepProd, currRest, prevRest);\n        }\n    };\n    RestDefinitionFinderWalker.prototype.walkMany = function (manyProd, currRest, prevRest) {\n        if (!this.checkIsTarget(manyProd, PROD_TYPE.REPETITION, currRest, prevRest)) {\n            _super.prototype.walkOption.call(this, manyProd, currRest, prevRest);\n        }\n    };\n    RestDefinitionFinderWalker.prototype.walkManySep = function (manySepProd, currRest, prevRest) {\n        if (!this.checkIsTarget(manySepProd, PROD_TYPE.REPETITION_WITH_SEPARATOR, currRest, prevRest)) {\n            _super.prototype.walkOption.call(this, manySepProd, currRest, prevRest);\n        }\n    };\n    return RestDefinitionFinderWalker;\n}(rest_1.RestWalker));\n/**\n * Returns the definition of a target production in a top level level rule.\n */\nvar InsideDefinitionFinderVisitor = /** @class */ (function (_super) {\n    __extends(InsideDefinitionFinderVisitor, _super);\n    function InsideDefinitionFinderVisitor(targetOccurrence, targetProdType, targetRef) {\n        var _this = _super.call(this) || this;\n        _this.targetOccurrence = targetOccurrence;\n        _this.targetProdType = targetProdType;\n        _this.targetRef = targetRef;\n        _this.result = [];\n        return _this;\n    }\n    InsideDefinitionFinderVisitor.prototype.checkIsTarget = function (node, expectedProdName) {\n        if (node.idx === this.targetOccurrence &&\n            this.targetProdType === expectedProdName &&\n            (this.targetRef === undefined || node === this.targetRef)) {\n            this.result = node.definition;\n        }\n    };\n    InsideDefinitionFinderVisitor.prototype.visitOption = function (node) {\n        this.checkIsTarget(node, PROD_TYPE.OPTION);\n    };\n    InsideDefinitionFinderVisitor.prototype.visitRepetition = function (node) {\n        this.checkIsTarget(node, PROD_TYPE.REPETITION);\n    };\n    InsideDefinitionFinderVisitor.prototype.visitRepetitionMandatory = function (node) {\n        this.checkIsTarget(node, PROD_TYPE.REPETITION_MANDATORY);\n    };\n    InsideDefinitionFinderVisitor.prototype.visitRepetitionMandatoryWithSeparator = function (node) {\n        this.checkIsTarget(node, PROD_TYPE.REPETITION_MANDATORY_WITH_SEPARATOR);\n    };\n    InsideDefinitionFinderVisitor.prototype.visitRepetitionWithSeparator = function (node) {\n        this.checkIsTarget(node, PROD_TYPE.REPETITION_WITH_SEPARATOR);\n    };\n    InsideDefinitionFinderVisitor.prototype.visitAlternation = function (node) {\n        this.checkIsTarget(node, PROD_TYPE.ALTERNATION);\n    };\n    return InsideDefinitionFinderVisitor;\n}(gast_2.GAstVisitor));\nfunction initializeArrayOfArrays(size) {\n    var result = new Array(size);\n    for (var i = 0; i < size; i++) {\n        result[i] = [];\n    }\n    return result;\n}\n/**\n * A sort of hash function between a Path in the grammar and a string.\n * Note that this returns multiple \"hashes\" to support the scenario of token categories.\n * -  A single path with categories may match multiple **actual** paths.\n */\nfunction pathToHashKeys(path) {\n    var keys = [\"\"];\n    for (var i = 0; i < path.length; i++) {\n        var tokType = path[i];\n        var longerKeys = [];\n        for (var j = 0; j < keys.length; j++) {\n            var currShorterKey = keys[j];\n            longerKeys.push(currShorterKey + \"_\" + tokType.tokenTypeIdx);\n            for (var t = 0; t < tokType.categoryMatches.length; t++) {\n                var categoriesKeySuffix = \"_\" + tokType.categoryMatches[t];\n                longerKeys.push(currShorterKey + categoriesKeySuffix);\n            }\n        }\n        keys = longerKeys;\n    }\n    return keys;\n}\n/**\n * Imperative style due to being called from a hot spot\n */\nfunction isUniquePrefixHash(altKnownPathsKeys, searchPathKeys, idx) {\n    for (var currAltIdx = 0; currAltIdx < altKnownPathsKeys.length; currAltIdx++) {\n        // We only want to test vs the other alternatives\n        if (currAltIdx === idx) {\n            continue;\n        }\n        var otherAltKnownPathsKeys = altKnownPathsKeys[currAltIdx];\n        for (var searchIdx = 0; searchIdx < searchPathKeys.length; searchIdx++) {\n            var searchKey = searchPathKeys[searchIdx];\n            if (otherAltKnownPathsKeys[searchKey] === true) {\n                return false;\n            }\n        }\n    }\n    // None of the SearchPathKeys were found in any of the other alternatives\n    return true;\n}\nfunction lookAheadSequenceFromAlternatives(altsDefs, k) {\n    var partialAlts = (0, map_1.default)(altsDefs, function (currAlt) {\n        return (0, interpreter_1.possiblePathsFrom)([currAlt], 1);\n    });\n    var finalResult = initializeArrayOfArrays(partialAlts.length);\n    var altsHashes = (0, map_1.default)(partialAlts, function (currAltPaths) {\n        var dict = {};\n        (0, forEach_1.default)(currAltPaths, function (item) {\n            var keys = pathToHashKeys(item.partialPath);\n            (0, forEach_1.default)(keys, function (currKey) {\n                dict[currKey] = true;\n            });\n        });\n        return dict;\n    });\n    var newData = partialAlts;\n    // maxLookahead loop\n    for (var pathLength = 1; pathLength <= k; pathLength++) {\n        var currDataset = newData;\n        newData = initializeArrayOfArrays(currDataset.length);\n        var _loop_1 = function (altIdx) {\n            var currAltPathsAndSuffixes = currDataset[altIdx];\n            // paths in current alternative loop\n            for (var currPathIdx = 0; currPathIdx < currAltPathsAndSuffixes.length; currPathIdx++) {\n                var currPathPrefix = currAltPathsAndSuffixes[currPathIdx].partialPath;\n                var suffixDef = currAltPathsAndSuffixes[currPathIdx].suffixDef;\n                var prefixKeys = pathToHashKeys(currPathPrefix);\n                var isUnique = isUniquePrefixHash(altsHashes, prefixKeys, altIdx);\n                // End of the line for this path.\n                if (isUnique || (0, isEmpty_1.default)(suffixDef) || currPathPrefix.length === k) {\n                    var currAltResult = finalResult[altIdx];\n                    // TODO: Can we implement a containsPath using Maps/Dictionaries?\n                    if (containsPath(currAltResult, currPathPrefix) === false) {\n                        currAltResult.push(currPathPrefix);\n                        // Update all new  keys for the current path.\n                        for (var j = 0; j < prefixKeys.length; j++) {\n                            var currKey = prefixKeys[j];\n                            altsHashes[altIdx][currKey] = true;\n                        }\n                    }\n                }\n                // Expand longer paths\n                else {\n                    var newPartialPathsAndSuffixes = (0, interpreter_1.possiblePathsFrom)(suffixDef, pathLength + 1, currPathPrefix);\n                    newData[altIdx] = newData[altIdx].concat(newPartialPathsAndSuffixes);\n                    // Update keys for new known paths\n                    (0, forEach_1.default)(newPartialPathsAndSuffixes, function (item) {\n                        var prefixKeys = pathToHashKeys(item.partialPath);\n                        (0, forEach_1.default)(prefixKeys, function (key) {\n                            altsHashes[altIdx][key] = true;\n                        });\n                    });\n                }\n            }\n        };\n        // alternatives loop\n        for (var altIdx = 0; altIdx < currDataset.length; altIdx++) {\n            _loop_1(altIdx);\n        }\n    }\n    return finalResult;\n}\nexports.lookAheadSequenceFromAlternatives = lookAheadSequenceFromAlternatives;\nfunction getLookaheadPathsForOr(occurrence, ruleGrammar, k, orProd) {\n    var visitor = new InsideDefinitionFinderVisitor(occurrence, PROD_TYPE.ALTERNATION, orProd);\n    ruleGrammar.accept(visitor);\n    return lookAheadSequenceFromAlternatives(visitor.result, k);\n}\nexports.getLookaheadPathsForOr = getLookaheadPathsForOr;\nfunction getLookaheadPathsForOptionalProd(occurrence, ruleGrammar, prodType, k) {\n    var insideDefVisitor = new InsideDefinitionFinderVisitor(occurrence, prodType);\n    ruleGrammar.accept(insideDefVisitor);\n    var insideDef = insideDefVisitor.result;\n    var afterDefWalker = new RestDefinitionFinderWalker(ruleGrammar, occurrence, prodType);\n    var afterDef = afterDefWalker.startWalking();\n    var insideFlat = new gast_1.Alternative({ definition: insideDef });\n    var afterFlat = new gast_1.Alternative({ definition: afterDef });\n    return lookAheadSequenceFromAlternatives([insideFlat, afterFlat], k);\n}\nexports.getLookaheadPathsForOptionalProd = getLookaheadPathsForOptionalProd;\nfunction containsPath(alternative, searchPath) {\n    compareOtherPath: for (var i = 0; i < alternative.length; i++) {\n        var otherPath = alternative[i];\n        if (otherPath.length !== searchPath.length) {\n            continue;\n        }\n        for (var j = 0; j < otherPath.length; j++) {\n            var searchTok = searchPath[j];\n            var otherTok = otherPath[j];\n            var matchingTokens = searchTok === otherTok ||\n                otherTok.categoryMatchesMap[searchTok.tokenTypeIdx] !== undefined;\n            if (matchingTokens === false) {\n                continue compareOtherPath;\n            }\n        }\n        return true;\n    }\n    return false;\n}\nexports.containsPath = containsPath;\nfunction isStrictPrefixOfPath(prefix, other) {\n    return (prefix.length < other.length &&\n        (0, every_1.default)(prefix, function (tokType, idx) {\n            var otherTokType = other[idx];\n            return (tokType === otherTokType ||\n                otherTokType.categoryMatchesMap[tokType.tokenTypeIdx]);\n        }));\n}\nexports.isStrictPrefixOfPath = isStrictPrefixOfPath;\nfunction areTokenCategoriesNotUsed(lookAheadPaths) {\n    return (0, every_1.default)(lookAheadPaths, function (singleAltPaths) {\n        return (0, every_1.default)(singleAltPaths, function (singlePath) {\n            return (0, every_1.default)(singlePath, function (token) { return (0, isEmpty_1.default)(token.categoryMatches); });\n        });\n    });\n}\nexports.areTokenCategoriesNotUsed = areTokenCategoriesNotUsed;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.nextPossibleTokensAfter = exports.possiblePathsFrom = exports.NextTerminalAfterAtLeastOneSepWalker = exports.NextTerminalAfterAtLeastOneWalker = exports.NextTerminalAfterManySepWalker = exports.NextTerminalAfterManyWalker = exports.AbstractNextTerminalAfterProductionWalker = exports.NextAfterTokenWalker = exports.AbstractNextPossibleTokensWalker = void 0;\nvar rest_1 = require(\"./rest\");\nvar first_1 = __importDefault(require(\"lodash/first\"));\nvar isEmpty_1 = __importDefault(require(\"lodash/isEmpty\"));\nvar dropRight_1 = __importDefault(require(\"lodash/dropRight\"));\nvar drop_1 = __importDefault(require(\"lodash/drop\"));\nvar last_1 = __importDefault(require(\"lodash/last\"));\nvar forEach_1 = __importDefault(require(\"lodash/forEach\"));\nvar clone_1 = __importDefault(require(\"lodash/clone\"));\nvar first_2 = require(\"./first\");\nvar gast_1 = require(\"@chevrotain/gast\");\nvar AbstractNextPossibleTokensWalker = /** @class */ (function (_super) {\n    __extends(AbstractNextPossibleTokensWalker, _super);\n    function AbstractNextPossibleTokensWalker(topProd, path) {\n        var _this = _super.call(this) || this;\n        _this.topProd = topProd;\n        _this.path = path;\n        _this.possibleTokTypes = [];\n        _this.nextProductionName = \"\";\n        _this.nextProductionOccurrence = 0;\n        _this.found = false;\n        _this.isAtEndOfPath = false;\n        return _this;\n    }\n    AbstractNextPossibleTokensWalker.prototype.startWalking = function () {\n        this.found = false;\n        if (this.path.ruleStack[0] !== this.topProd.name) {\n            throw Error(\"The path does not start with the walker's top Rule!\");\n        }\n        // immutable for the win\n        this.ruleStack = (0, clone_1.default)(this.path.ruleStack).reverse(); // intelij bug requires assertion\n        this.occurrenceStack = (0, clone_1.default)(this.path.occurrenceStack).reverse(); // intelij bug requires assertion\n        // already verified that the first production is valid, we now seek the 2nd production\n        this.ruleStack.pop();\n        this.occurrenceStack.pop();\n        this.updateExpectedNext();\n        this.walk(this.topProd);\n        return this.possibleTokTypes;\n    };\n    AbstractNextPossibleTokensWalker.prototype.walk = function (prod, prevRest) {\n        if (prevRest === void 0) { prevRest = []; }\n        // stop scanning once we found the path\n        if (!this.found) {\n            _super.prototype.walk.call(this, prod, prevRest);\n        }\n    };\n    AbstractNextPossibleTokensWalker.prototype.walkProdRef = function (refProd, currRest, prevRest) {\n        // found the next production, need to keep walking in it\n        if (refProd.referencedRule.name === this.nextProductionName &&\n            refProd.idx === this.nextProductionOccurrence) {\n            var fullRest = currRest.concat(prevRest);\n            this.updateExpectedNext();\n            this.walk(refProd.referencedRule, fullRest);\n        }\n    };\n    AbstractNextPossibleTokensWalker.prototype.updateExpectedNext = function () {\n        // need to consume the Terminal\n        if ((0, isEmpty_1.default)(this.ruleStack)) {\n            // must reset nextProductionXXX to avoid walking down another Top Level production while what we are\n            // really seeking is the last Terminal...\n            this.nextProductionName = \"\";\n            this.nextProductionOccurrence = 0;\n            this.isAtEndOfPath = true;\n        }\n        else {\n            this.nextProductionName = this.ruleStack.pop();\n            this.nextProductionOccurrence = this.occurrenceStack.pop();\n        }\n    };\n    return AbstractNextPossibleTokensWalker;\n}(rest_1.RestWalker));\nexports.AbstractNextPossibleTokensWalker = AbstractNextPossibleTokensWalker;\nvar NextAfterTokenWalker = /** @class */ (function (_super) {\n    __extends(NextAfterTokenWalker, _super);\n    function NextAfterTokenWalker(topProd, path) {\n        var _this = _super.call(this, topProd, path) || this;\n        _this.path = path;\n        _this.nextTerminalName = \"\";\n        _this.nextTerminalOccurrence = 0;\n        _this.nextTerminalName = _this.path.lastTok.name;\n        _this.nextTerminalOccurrence = _this.path.lastTokOccurrence;\n        return _this;\n    }\n    NextAfterTokenWalker.prototype.walkTerminal = function (terminal, currRest, prevRest) {\n        if (this.isAtEndOfPath &&\n            terminal.terminalType.name === this.nextTerminalName &&\n            terminal.idx === this.nextTerminalOccurrence &&\n            !this.found) {\n            var fullRest = currRest.concat(prevRest);\n            var restProd = new gast_1.Alternative({ definition: fullRest });\n            this.possibleTokTypes = (0, first_2.first)(restProd);\n            this.found = true;\n        }\n    };\n    return NextAfterTokenWalker;\n}(AbstractNextPossibleTokensWalker));\nexports.NextAfterTokenWalker = NextAfterTokenWalker;\n/**\n * This walker only \"walks\" a single \"TOP\" level in the Grammar Ast, this means\n * it never \"follows\" production refs\n */\nvar AbstractNextTerminalAfterProductionWalker = /** @class */ (function (_super) {\n    __extends(AbstractNextTerminalAfterProductionWalker, _super);\n    function AbstractNextTerminalAfterProductionWalker(topRule, occurrence) {\n        var _this = _super.call(this) || this;\n        _this.topRule = topRule;\n        _this.occurrence = occurrence;\n        _this.result = {\n            token: undefined,\n            occurrence: undefined,\n            isEndOfRule: undefined\n        };\n        return _this;\n    }\n    AbstractNextTerminalAfterProductionWalker.prototype.startWalking = function () {\n        this.walk(this.topRule);\n        return this.result;\n    };\n    return AbstractNextTerminalAfterProductionWalker;\n}(rest_1.RestWalker));\nexports.AbstractNextTerminalAfterProductionWalker = AbstractNextTerminalAfterProductionWalker;\nvar NextTerminalAfterManyWalker = /** @class */ (function (_super) {\n    __extends(NextTerminalAfterManyWalker, _super);\n    function NextTerminalAfterManyWalker() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    NextTerminalAfterManyWalker.prototype.walkMany = function (manyProd, currRest, prevRest) {\n        if (manyProd.idx === this.occurrence) {\n            var firstAfterMany = (0, first_1.default)(currRest.concat(prevRest));\n            this.result.isEndOfRule = firstAfterMany === undefined;\n            if (firstAfterMany instanceof gast_1.Terminal) {\n                this.result.token = firstAfterMany.terminalType;\n                this.result.occurrence = firstAfterMany.idx;\n            }\n        }\n        else {\n            _super.prototype.walkMany.call(this, manyProd, currRest, prevRest);\n        }\n    };\n    return NextTerminalAfterManyWalker;\n}(AbstractNextTerminalAfterProductionWalker));\nexports.NextTerminalAfterManyWalker = NextTerminalAfterManyWalker;\nvar NextTerminalAfterManySepWalker = /** @class */ (function (_super) {\n    __extends(NextTerminalAfterManySepWalker, _super);\n    function NextTerminalAfterManySepWalker() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    NextTerminalAfterManySepWalker.prototype.walkManySep = function (manySepProd, currRest, prevRest) {\n        if (manySepProd.idx === this.occurrence) {\n            var firstAfterManySep = (0, first_1.default)(currRest.concat(prevRest));\n            this.result.isEndOfRule = firstAfterManySep === undefined;\n            if (firstAfterManySep instanceof gast_1.Terminal) {\n                this.result.token = firstAfterManySep.terminalType;\n                this.result.occurrence = firstAfterManySep.idx;\n            }\n        }\n        else {\n            _super.prototype.walkManySep.call(this, manySepProd, currRest, prevRest);\n        }\n    };\n    return NextTerminalAfterManySepWalker;\n}(AbstractNextTerminalAfterProductionWalker));\nexports.NextTerminalAfterManySepWalker = NextTerminalAfterManySepWalker;\nvar NextTerminalAfterAtLeastOneWalker = /** @class */ (function (_super) {\n    __extends(NextTerminalAfterAtLeastOneWalker, _super);\n    function NextTerminalAfterAtLeastOneWalker() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    NextTerminalAfterAtLeastOneWalker.prototype.walkAtLeastOne = function (atLeastOneProd, currRest, prevRest) {\n        if (atLeastOneProd.idx === this.occurrence) {\n            var firstAfterAtLeastOne = (0, first_1.default)(currRest.concat(prevRest));\n            this.result.isEndOfRule = firstAfterAtLeastOne === undefined;\n            if (firstAfterAtLeastOne instanceof gast_1.Terminal) {\n                this.result.token = firstAfterAtLeastOne.terminalType;\n                this.result.occurrence = firstAfterAtLeastOne.idx;\n            }\n        }\n        else {\n            _super.prototype.walkAtLeastOne.call(this, atLeastOneProd, currRest, prevRest);\n        }\n    };\n    return NextTerminalAfterAtLeastOneWalker;\n}(AbstractNextTerminalAfterProductionWalker));\nexports.NextTerminalAfterAtLeastOneWalker = NextTerminalAfterAtLeastOneWalker;\n// TODO: reduce code duplication in the AfterWalkers\nvar NextTerminalAfterAtLeastOneSepWalker = /** @class */ (function (_super) {\n    __extends(NextTerminalAfterAtLeastOneSepWalker, _super);\n    function NextTerminalAfterAtLeastOneSepWalker() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    NextTerminalAfterAtLeastOneSepWalker.prototype.walkAtLeastOneSep = function (atleastOneSepProd, currRest, prevRest) {\n        if (atleastOneSepProd.idx === this.occurrence) {\n            var firstAfterfirstAfterAtLeastOneSep = (0, first_1.default)(currRest.concat(prevRest));\n            this.result.isEndOfRule = firstAfterfirstAfterAtLeastOneSep === undefined;\n            if (firstAfterfirstAfterAtLeastOneSep instanceof gast_1.Terminal) {\n                this.result.token = firstAfterfirstAfterAtLeastOneSep.terminalType;\n                this.result.occurrence = firstAfterfirstAfterAtLeastOneSep.idx;\n            }\n        }\n        else {\n            _super.prototype.walkAtLeastOneSep.call(this, atleastOneSepProd, currRest, prevRest);\n        }\n    };\n    return NextTerminalAfterAtLeastOneSepWalker;\n}(AbstractNextTerminalAfterProductionWalker));\nexports.NextTerminalAfterAtLeastOneSepWalker = NextTerminalAfterAtLeastOneSepWalker;\nfunction possiblePathsFrom(targetDef, maxLength, currPath) {\n    if (currPath === void 0) { currPath = []; }\n    // avoid side effects\n    currPath = (0, clone_1.default)(currPath);\n    var result = [];\n    var i = 0;\n    // TODO: avoid inner funcs\n    function remainingPathWith(nextDef) {\n        return nextDef.concat((0, drop_1.default)(targetDef, i + 1));\n    }\n    // TODO: avoid inner funcs\n    function getAlternativesForProd(definition) {\n        var alternatives = possiblePathsFrom(remainingPathWith(definition), maxLength, currPath);\n        return result.concat(alternatives);\n    }\n    /**\n     * Mandatory productions will halt the loop as the paths computed from their recursive calls will already contain the\n     * following (rest) of the targetDef.\n     *\n     * For optional productions (Option/Repetition/...) the loop will continue to represent the paths that do not include the\n     * the optional production.\n     */\n    while (currPath.length < maxLength && i < targetDef.length) {\n        var prod = targetDef[i];\n        /* istanbul ignore else */\n        if (prod instanceof gast_1.Alternative) {\n            return getAlternativesForProd(prod.definition);\n        }\n        else if (prod instanceof gast_1.NonTerminal) {\n            return getAlternativesForProd(prod.definition);\n        }\n        else if (prod instanceof gast_1.Option) {\n            result = getAlternativesForProd(prod.definition);\n        }\n        else if (prod instanceof gast_1.RepetitionMandatory) {\n            var newDef = prod.definition.concat([\n                new gast_1.Repetition({\n                    definition: prod.definition\n                })\n            ]);\n            return getAlternativesForProd(newDef);\n        }\n        else if (prod instanceof gast_1.RepetitionMandatoryWithSeparator) {\n            var newDef = [\n                new gast_1.Alternative({ definition: prod.definition }),\n                new gast_1.Repetition({\n                    definition: [new gast_1.Terminal({ terminalType: prod.separator })].concat(prod.definition)\n                })\n            ];\n            return getAlternativesForProd(newDef);\n        }\n        else if (prod instanceof gast_1.RepetitionWithSeparator) {\n            var newDef = prod.definition.concat([\n                new gast_1.Repetition({\n                    definition: [new gast_1.Terminal({ terminalType: prod.separator })].concat(prod.definition)\n                })\n            ]);\n            result = getAlternativesForProd(newDef);\n        }\n        else if (prod instanceof gast_1.Repetition) {\n            var newDef = prod.definition.concat([\n                new gast_1.Repetition({\n                    definition: prod.definition\n                })\n            ]);\n            result = getAlternativesForProd(newDef);\n        }\n        else if (prod instanceof gast_1.Alternation) {\n            (0, forEach_1.default)(prod.definition, function (currAlt) {\n                // TODO: this is a limited check for empty alternatives\n                //   It would prevent a common case of infinite loops during parser initialization.\n                //   However **in-directly** empty alternatives may still cause issues.\n                if ((0, isEmpty_1.default)(currAlt.definition) === false) {\n                    result = getAlternativesForProd(currAlt.definition);\n                }\n            });\n            return result;\n        }\n        else if (prod instanceof gast_1.Terminal) {\n            currPath.push(prod.terminalType);\n        }\n        else {\n            throw Error(\"non exhaustive match\");\n        }\n        i++;\n    }\n    result.push({\n        partialPath: currPath,\n        suffixDef: (0, drop_1.default)(targetDef, i)\n    });\n    return result;\n}\nexports.possiblePathsFrom = possiblePathsFrom;\nfunction nextPossibleTokensAfter(initialDef, tokenVector, tokMatcher, maxLookAhead) {\n    var EXIT_NON_TERMINAL = \"EXIT_NONE_TERMINAL\";\n    // to avoid creating a new Array each time.\n    var EXIT_NON_TERMINAL_ARR = [EXIT_NON_TERMINAL];\n    var EXIT_ALTERNATIVE = \"EXIT_ALTERNATIVE\";\n    var foundCompletePath = false;\n    var tokenVectorLength = tokenVector.length;\n    var minimalAlternativesIndex = tokenVectorLength - maxLookAhead - 1;\n    var result = [];\n    var possiblePaths = [];\n    possiblePaths.push({\n        idx: -1,\n        def: initialDef,\n        ruleStack: [],\n        occurrenceStack: []\n    });\n    while (!(0, isEmpty_1.default)(possiblePaths)) {\n        var currPath = possiblePaths.pop();\n        // skip alternatives if no more results can be found (assuming deterministic grammar with fixed lookahead)\n        if (currPath === EXIT_ALTERNATIVE) {\n            if (foundCompletePath &&\n                (0, last_1.default)(possiblePaths).idx <= minimalAlternativesIndex) {\n                // remove irrelevant alternative\n                possiblePaths.pop();\n            }\n            continue;\n        }\n        var currDef = currPath.def;\n        var currIdx = currPath.idx;\n        var currRuleStack = currPath.ruleStack;\n        var currOccurrenceStack = currPath.occurrenceStack;\n        // For Example: an empty path could exist in a valid grammar in the case of an EMPTY_ALT\n        if ((0, isEmpty_1.default)(currDef)) {\n            continue;\n        }\n        var prod = currDef[0];\n        /* istanbul ignore else */\n        if (prod === EXIT_NON_TERMINAL) {\n            var nextPath = {\n                idx: currIdx,\n                def: (0, drop_1.default)(currDef),\n                ruleStack: (0, dropRight_1.default)(currRuleStack),\n                occurrenceStack: (0, dropRight_1.default)(currOccurrenceStack)\n            };\n            possiblePaths.push(nextPath);\n        }\n        else if (prod instanceof gast_1.Terminal) {\n            /* istanbul ignore else */\n            if (currIdx < tokenVectorLength - 1) {\n                var nextIdx = currIdx + 1;\n                var actualToken = tokenVector[nextIdx];\n                if (tokMatcher(actualToken, prod.terminalType)) {\n                    var nextPath = {\n                        idx: nextIdx,\n                        def: (0, drop_1.default)(currDef),\n                        ruleStack: currRuleStack,\n                        occurrenceStack: currOccurrenceStack\n                    };\n                    possiblePaths.push(nextPath);\n                }\n                // end of the line\n            }\n            else if (currIdx === tokenVectorLength - 1) {\n                // IGNORE ABOVE ELSE\n                result.push({\n                    nextTokenType: prod.terminalType,\n                    nextTokenOccurrence: prod.idx,\n                    ruleStack: currRuleStack,\n                    occurrenceStack: currOccurrenceStack\n                });\n                foundCompletePath = true;\n            }\n            else {\n                throw Error(\"non exhaustive match\");\n            }\n        }\n        else if (prod instanceof gast_1.NonTerminal) {\n            var newRuleStack = (0, clone_1.default)(currRuleStack);\n            newRuleStack.push(prod.nonTerminalName);\n            var newOccurrenceStack = (0, clone_1.default)(currOccurrenceStack);\n            newOccurrenceStack.push(prod.idx);\n            var nextPath = {\n                idx: currIdx,\n                def: prod.definition.concat(EXIT_NON_TERMINAL_ARR, (0, drop_1.default)(currDef)),\n                ruleStack: newRuleStack,\n                occurrenceStack: newOccurrenceStack\n            };\n            possiblePaths.push(nextPath);\n        }\n        else if (prod instanceof gast_1.Option) {\n            // the order of alternatives is meaningful, FILO (Last path will be traversed first).\n            var nextPathWithout = {\n                idx: currIdx,\n                def: (0, drop_1.default)(currDef),\n                ruleStack: currRuleStack,\n                occurrenceStack: currOccurrenceStack\n            };\n            possiblePaths.push(nextPathWithout);\n            // required marker to avoid backtracking paths whose higher priority alternatives already matched\n            possiblePaths.push(EXIT_ALTERNATIVE);\n            var nextPathWith = {\n                idx: currIdx,\n                def: prod.definition.concat((0, drop_1.default)(currDef)),\n                ruleStack: currRuleStack,\n                occurrenceStack: currOccurrenceStack\n            };\n            possiblePaths.push(nextPathWith);\n        }\n        else if (prod instanceof gast_1.RepetitionMandatory) {\n            // TODO:(THE NEW operators here take a while...) (convert once?)\n            var secondIteration = new gast_1.Repetition({\n                definition: prod.definition,\n                idx: prod.idx\n            });\n            var nextDef = prod.definition.concat([secondIteration], (0, drop_1.default)(currDef));\n            var nextPath = {\n                idx: currIdx,\n                def: nextDef,\n                ruleStack: currRuleStack,\n                occurrenceStack: currOccurrenceStack\n            };\n            possiblePaths.push(nextPath);\n        }\n        else if (prod instanceof gast_1.RepetitionMandatoryWithSeparator) {\n            // TODO:(THE NEW operators here take a while...) (convert once?)\n            var separatorGast = new gast_1.Terminal({\n                terminalType: prod.separator\n            });\n            var secondIteration = new gast_1.Repetition({\n                definition: [separatorGast].concat(prod.definition),\n                idx: prod.idx\n            });\n            var nextDef = prod.definition.concat([secondIteration], (0, drop_1.default)(currDef));\n            var nextPath = {\n                idx: currIdx,\n                def: nextDef,\n                ruleStack: currRuleStack,\n                occurrenceStack: currOccurrenceStack\n            };\n            possiblePaths.push(nextPath);\n        }\n        else if (prod instanceof gast_1.RepetitionWithSeparator) {\n            // the order of alternatives is meaningful, FILO (Last path will be traversed first).\n            var nextPathWithout = {\n                idx: currIdx,\n                def: (0, drop_1.default)(currDef),\n                ruleStack: currRuleStack,\n                occurrenceStack: currOccurrenceStack\n            };\n            possiblePaths.push(nextPathWithout);\n            // required marker to avoid backtracking paths whose higher priority alternatives already matched\n            possiblePaths.push(EXIT_ALTERNATIVE);\n            var separatorGast = new gast_1.Terminal({\n                terminalType: prod.separator\n            });\n            var nthRepetition = new gast_1.Repetition({\n                definition: [separatorGast].concat(prod.definition),\n                idx: prod.idx\n            });\n            var nextDef = prod.definition.concat([nthRepetition], (0, drop_1.default)(currDef));\n            var nextPathWith = {\n                idx: currIdx,\n                def: nextDef,\n                ruleStack: currRuleStack,\n                occurrenceStack: currOccurrenceStack\n            };\n            possiblePaths.push(nextPathWith);\n        }\n        else if (prod instanceof gast_1.Repetition) {\n            // the order of alternatives is meaningful, FILO (Last path will be traversed first).\n            var nextPathWithout = {\n                idx: currIdx,\n                def: (0, drop_1.default)(currDef),\n                ruleStack: currRuleStack,\n                occurrenceStack: currOccurrenceStack\n            };\n            possiblePaths.push(nextPathWithout);\n            // required marker to avoid backtracking paths whose higher priority alternatives already matched\n            possiblePaths.push(EXIT_ALTERNATIVE);\n            // TODO: an empty repetition will cause infinite loops here, will the parser detect this in selfAnalysis?\n            var nthRepetition = new gast_1.Repetition({\n                definition: prod.definition,\n                idx: prod.idx\n            });\n            var nextDef = prod.definition.concat([nthRepetition], (0, drop_1.default)(currDef));\n            var nextPathWith = {\n                idx: currIdx,\n                def: nextDef,\n                ruleStack: currRuleStack,\n                occurrenceStack: currOccurrenceStack\n            };\n            possiblePaths.push(nextPathWith);\n        }\n        else if (prod instanceof gast_1.Alternation) {\n            // the order of alternatives is meaningful, FILO (Last path will be traversed first).\n            for (var i = prod.definition.length - 1; i >= 0; i--) {\n                var currAlt = prod.definition[i];\n                var currAltPath = {\n                    idx: currIdx,\n                    def: currAlt.definition.concat((0, drop_1.default)(currDef)),\n                    ruleStack: currRuleStack,\n                    occurrenceStack: currOccurrenceStack\n                };\n                possiblePaths.push(currAltPath);\n                possiblePaths.push(EXIT_ALTERNATIVE);\n            }\n        }\n        else if (prod instanceof gast_1.Alternative) {\n            possiblePaths.push({\n                idx: currIdx,\n                def: prod.definition.concat((0, drop_1.default)(currDef)),\n                ruleStack: currRuleStack,\n                occurrenceStack: currOccurrenceStack\n            });\n        }\n        else if (prod instanceof gast_1.Rule) {\n            // last because we should only encounter at most a single one of these per invocation.\n            possiblePaths.push(expandTopLevelRule(prod, currIdx, currRuleStack, currOccurrenceStack));\n        }\n        else {\n            throw Error(\"non exhaustive match\");\n        }\n    }\n    return result;\n}\nexports.nextPossibleTokensAfter = nextPossibleTokensAfter;\nfunction expandTopLevelRule(topRule, currIdx, currRuleStack, currOccurrenceStack) {\n    var newRuleStack = (0, clone_1.default)(currRuleStack);\n    newRuleStack.push(topRule.name);\n    var newCurrOccurrenceStack = (0, clone_1.default)(currOccurrenceStack);\n    // top rule is always assumed to have been called with occurrence index 1\n    newCurrOccurrenceStack.push(1);\n    return {\n        idx: currIdx,\n        def: topRule.definition,\n        ruleStack: newRuleStack,\n        occurrenceStack: newCurrOccurrenceStack\n    };\n}\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","import { CstParser } from \"chevrotain\";\r\nimport { token, allTokens } from \"./token\";\r\n\r\n/**\r\n * 公式语法分析器\r\n */\r\nclass FormulaParser extends CstParser {\r\n  expr = this.RULE(\"expr\", () => {\r\n    this.SUBRULE(this.commaExpression);\r\n  });\r\n\r\n  commaExpression = this.RULE(\"commaExpression\", () => {\r\n    this.SUBRULE(this.binaryExpression);\r\n    this.MANY(() => {\r\n      this.CONSUME(token.Comma);\r\n      this.SUBRULE2(this.binaryExpression);\r\n    });\r\n  });\r\n\r\n  binaryExpression = this.RULE(\"binaryExpression\", () => {\r\n    this.SUBRULE(this.unaryExpression);\r\n    this.MANY(() => {\r\n      this.OR(\r\n        this.c1 ||\r\n          (this.c1 = [\r\n            {\r\n              ALT: () => {\r\n                this.CONSUME(token.LogicOr);\r\n              }\r\n            },\r\n            {\r\n              ALT: () => {\r\n                this.CONSUME(token.LogicAnd);\r\n              }\r\n            },\r\n            // {\r\n            //   ALT: () => {\r\n            //     this.CONSUME(token.BitOr);\r\n            //   }\r\n            // },\r\n            {\r\n              ALT: () => {\r\n                this.CONSUME(token.BitAnd);\r\n              }\r\n            },\r\n            {\r\n              ALT: () => {\r\n                this.CONSUME(token.Equal);\r\n              }\r\n            },\r\n            {\r\n              ALT: () => {\r\n                this.CONSUME(token.Compare);\r\n              }\r\n            },\r\n            {\r\n              ALT: () => {\r\n                this.CONSUME(token.Addition);\r\n              }\r\n            },\r\n            {\r\n              ALT: () => {\r\n                this.CONSUME(token.Multiplication);\r\n              }\r\n            }\r\n          ])\r\n      );\r\n      this.SUBRULE2(this.unaryExpression);\r\n    });\r\n  });\r\n\r\n  unaryExpression = this.RULE(\"unaryExpression\", () => {\r\n    this.MANY(() => {\r\n      this.CONSUME(token.Unary);\r\n    });\r\n    this.SUBRULE(this.atomicExpression);\r\n  });\r\n\r\n  atomicExpression = this.RULE(\"atomicExpression\", () => {\r\n    this.OR(\r\n      this.c2 ||\r\n        (this.c2 = [\r\n          {\r\n            ALT: () => {\r\n              this.SUBRULE(this.array);\r\n            }\r\n          },\r\n          {\r\n            ALT: () => {\r\n              this.SUBRULE(this.func);\r\n            }\r\n          },\r\n          {\r\n            ALT: () => {\r\n              this.SUBRULE(this.group);\r\n            }\r\n          },\r\n          {\r\n            ALT: () => {\r\n              this.SUBRULE(this.base);\r\n            }\r\n          }\r\n        ])\r\n    );\r\n    this.MANY(() => {\r\n      this.CONSUME(token.LSquare);\r\n      this.SUBRULE(this.expr);\r\n      this.CONSUME(token.RSquare);\r\n    });\r\n  });\r\n\r\n  array = this.RULE(\"array\", () => {\r\n    this.CONSUME(token.LSquare);\r\n    this.MANY_SEP({\r\n      SEP: token.Comma,\r\n      DEF: () => {\r\n        this.SUBRULE(this.binaryExpression);\r\n      }\r\n    });\r\n    this.CONSUME(token.RSquare);\r\n  });\r\n\r\n  func = this.RULE(\"func\", () => {\r\n    this.CONSUME(token.Func);\r\n    this.CONSUME(token.LParen);\r\n    this.OPTION(() => {\r\n      // this.SUBRULE(this.binaryExpression);\r\n      // this.MANY(() => {\r\n      //   this.CONSUME(token.Comma);\r\n      //   this.SUBRULE2(this.binaryExpression);\r\n      // });\r\n      // this.OPTION2(() => {\r\n      //   this.CONSUME2(token.Comma);\r\n      // });\r\n      // 上面注释部分对于Func(字段1,)也能过语法检测，此处使用MANY_SEP\r\n        this.MANY_SEP({\r\n            SEP: token.Comma,\r\n            DEF: () => {\r\n                this.SUBRULE(this.binaryExpression);\r\n            },\r\n        });\r\n    });\r\n    this.CONSUME(token.RParen);\r\n  });\r\n\r\n  group = this.RULE(\"group\", () => {\r\n    this.CONSUME(token.LParen);\r\n    this.AT_LEAST_ONE_SEP({\r\n      SEP: token.Comma,\r\n      DEF: () => {\r\n        this.SUBRULE(this.expr);\r\n      }\r\n    });\r\n    this.CONSUME(token.RParen);\r\n  });\r\n\r\n  base = this.RULE(\"base\", () => {\r\n    this.OR(\r\n      this.c3 ||\r\n        (this.c3 = [\r\n          {\r\n            ALT: () => {\r\n              this.CONSUME(token.String);\r\n            }\r\n          },\r\n          {\r\n            ALT: () => {\r\n              this.CONSUME(token.Number);\r\n            }\r\n          },\r\n            {\r\n                ALT: () => {\r\n                    this.CONSUME(token.Date);\r\n                }\r\n            },\r\n          {\r\n            ALT: () => {\r\n              this.CONSUME(token.Boolean);\r\n            }\r\n          },\r\n          {\r\n            ALT: () => {\r\n              this.CONSUME(token.Empty);\r\n            }\r\n          },\r\n          {\r\n            ALT: () => {\r\n              this.CONSUME(token.NaN);\r\n            }\r\n          }\r\n        ])\r\n    );\r\n  });\r\n\r\n  constructor() {\r\n    super(allTokens);\r\n    this.performSelfAnalysis();\r\n  }\r\n}\r\n\r\n/**\r\n * 获取parser实例\r\n */\r\nconst getFormulaParser = () => {\r\n  return new FormulaParser();\r\n};\r\n\r\nexport { FormulaParser };\r\nexport default getFormulaParser;\r\n","import { tokenMatcher } from \"chevrotain\";\r\nimport { token as tokenMap } from \"./token\";\r\nimport forEach from \"lodash/forEach\";\r\nimport isArray from \"lodash/isArray\";\r\nimport keys from \"lodash/keys\";\r\nimport findIndex from \"lodash/findIndex\";\r\nimport get from \"lodash/get\";\r\nimport getFormulaParser from \"./FormulaParser\";\r\n// import FunctionCheck from \"./FunctionCheck\";\r\n\r\n/**\r\n * 将多个Tokens按照顺序连接\r\n *\r\n * @param tokensList\r\n */\r\nconst concatTokens = (...tokensList) => {\r\n  let tokens = [];\r\n  forEach(tokensList, function(item) {\r\n    if (item) {\r\n      tokens = tokens.concat(item);\r\n    }\r\n  });\r\n  return tokens;\r\n};\r\n\r\n/**\r\n * 对tokens按照先后位置进行排序\r\n *\r\n * @param tokens\r\n */\r\nconst sortTokensByPosition = tokens => {\r\n  const result = [].concat(tokens);\r\n  return result.sort(function(a, b) {\r\n    return a.startOffset - b.startOffset;\r\n  });\r\n};\r\n\r\n/**\r\n * 参数类型计算\r\n *\r\n * @param op\r\n * @param left\r\n * @param right\r\n */\r\nconst transformType = (op, left, right) => {\r\n  switch (op) {\r\n    case \"+\":\r\n      // 1、操作符两端有一个是文本类型，返回值就是文本类型\r\n      // 2、操作符两端都不是文本类型，且操作符两端都不是数值类型，返回文本类型\r\n      if (isStringType(left) || isStringType(right) || (isAnyType(left) && !isNumberType(left)) || (isAnyType(right) && !isNumberType(right))) {\r\n        return \"string\";\r\n      }\r\n      return \"number\";\r\n    case \"-\":\r\n      if (((!isNumberType(left) && !isDateType(left)) || (!isNumberType(right) && !isDateType(right))) && !isAnyType(left) && !isAnyType(right)) {\r\n        throw new Error(\r\n            JSON.stringify({\r\n              type: \"visit\",\r\n              token: op,\r\n              errorType: \"operation\",\r\n              errorText: BI.i18nText('BI-Conf_Formula_Valid'),\r\n            })\r\n        );\r\n      }\r\n      return \"number\";\r\n    case \"*\":\r\n    case \"/\":\r\n      if ((!isNumberType(left) || !isNumberType(right)) && !isAnyType(left) && !isAnyType(right)) {\r\n        throw new Error(\r\n            JSON.stringify({\r\n              type: \"visit\",\r\n              token: op,\r\n              errorType: \"operation\",\r\n              errorText: BI.i18nText('BI-Conf_Formula_Valid'),\r\n            })\r\n        );\r\n      }\r\n      return \"number\";\r\n  }\r\n};\r\n\r\n/**\r\n * 消费一个二元运算符token并计算结果\r\n *\r\n * @param sortedTokens\r\n * @param operands\r\n * @param consumeToken\r\n * @param sortedTokens\r\n * @param operands\r\n * @param consumeToken\r\n * @param sortedTokens\r\n * @param operands\r\n * @param consumeToken\r\n */\r\nconst consumeBinaryToken = (sortedTokens, operands, consumeToken) => {\r\n  const resultTokens = sortedTokens.slice();\r\n  const resultOperands = operands.slice();\r\n  const tokenNames = sortedTokens.map(token => {\r\n    return token.image;\r\n  });\r\n  const index = tokenNames.indexOf(consumeToken.image);\r\n  if (index > -1) {\r\n    const tempOperands = resultOperands.slice().splice(index, 2);\r\n    const left = tempOperands[0];\r\n    const right = tempOperands[1];\r\n    let result = \"null\";\r\n    if (\r\n      tokenMatcher(consumeToken, tokenMap.Addition) ||\r\n      tokenMatcher(consumeToken, tokenMap.Multiplication)\r\n    ) {\r\n      result = transformType(consumeToken.image, left, right);\r\n    } else if (tokenMatcher(consumeToken, tokenMap.Compare)) {\r\n      if (left !== null && right !== null && getType(left) !== getType(right)) {\r\n        throw new Error(\r\n            JSON.stringify({\r\n              type: \"visit\",\r\n              token: consumeToken.image,\r\n              errorType: \"compare\",\r\n              errorText: BI.i18nText('BI-Basic_Formula_Invalid'),\r\n            })\r\n        );\r\n      }\r\n      result = \"boolean\";\r\n    } else if (tokenMatcher(consumeToken, tokenMap.Equal)) {\r\n      result = \"boolean\";\r\n    } else if (tokenMatcher(consumeToken, tokenMap.BitAnd)) {\r\n      result = \"string\";\r\n    // } else if (tokenMatcher(consumeToken, tokenMap.BitOr)) {\r\n    //   result = \"number\";\r\n    } else if (tokenMatcher(consumeToken, tokenMap.LogicAnd) || tokenMatcher(consumeToken, tokenMap.LogicOr)) {\r\n      if (!(isNumberType(left) && isNumberType(right) || isBooleanType(left) && isBooleanType(right))) {\r\n        throw new Error(\r\n            JSON.stringify({\r\n              type: \"visit\",\r\n              token: consumeToken.image,\r\n              errorType: \"logic\",\r\n              errorText: BI.i18nText('BI-Basic_Formula_Invalid'),\r\n            })\r\n        );\r\n      }\r\n      result = left || right;\r\n    }\r\n    resultTokens.splice(index, 1);\r\n    resultOperands.splice(index, 2, result);\r\n  }\r\n  return {\r\n    resultTokens: resultTokens,\r\n    resultOperands: resultOperands\r\n  };\r\n};\r\n\r\n/**\r\n * 获取公式解释器实例\r\n */\r\nconst getFormulaInterpreter = () => {\r\n  const parser = getFormulaParser();\r\n  const BaseCstVisitorConstructor = parser.getBaseCstVisitorConstructor();\r\n  let formula;\r\n\r\n  const setFormula = f => {\r\n    formula = f;\r\n  };\r\n\r\n  const applyFunc = (func, args) => {\r\n    if (!formula) {\r\n      throw new Error(\"Interpreter is not set formula\");\r\n    }\r\n    const funcKeys = keys(formula);\r\n    if (findIndex(funcKeys, k => k === func) > -1) {\r\n      const f = get(formula, func);\r\n      return f.apply(this, args);\r\n    }\r\n    return null;\r\n  };\r\n\r\n  const FormulaVisitor = class extends BaseCstVisitorConstructor {\r\n    constructor() {\r\n      super();\r\n      this.validateVisitor();\r\n    }\r\n\r\n    expr(ctx) {\r\n      return this.visit(ctx.commaExpression);\r\n    }\r\n\r\n    commaExpression(ctx) {\r\n      const lastCstNode = ctx.binaryExpression.slice(-1)[0];\r\n      return this.visit(lastCstNode);\r\n    }\r\n\r\n    binaryExpression(ctx) {\r\n      const binaryTokens = concatTokens(\r\n        ctx.Multiplication,\r\n        ctx.Addition,\r\n        ctx.Compare,\r\n        ctx.Equal,\r\n        ctx.BitAnd,\r\n        // ctx.BitOr,\r\n        ctx.LogicAnd,\r\n        ctx.LogicOr\r\n      );\r\n      let tempTokens = sortTokensByPosition(binaryTokens);\r\n      let tempOperands = [];\r\n      forEach(ctx.unaryExpression, e => {\r\n        tempOperands.push(this.visit(e));\r\n      });\r\n      forEach(binaryTokens, token => {\r\n        const ret = consumeBinaryToken(tempTokens, tempOperands, token);\r\n        tempTokens = ret.resultTokens;\r\n        tempOperands = ret.resultOperands;\r\n      });\r\n      return tempOperands[0];\r\n    }\r\n\r\n    unaryExpression(ctx) {\r\n      let result = this.visit(ctx.atomicExpression);\r\n      if (!ctx.Unary) {\r\n        return result;\r\n      }\r\n      const signs = ctx.Unary.slice().reverse();\r\n      forEach(signs, sign => {\r\n        if (tokenMatcher(sign, tokenMap.Minus)) {\r\n          result = \"number\";\r\n        } else if (tokenMatcher(sign, tokenMap.Plus)) {\r\n          result = \"number\";\r\n        } else {\r\n          result = \"boolean\";\r\n        }\r\n      });\r\n      return result;\r\n    }\r\n\r\n    atomicExpression(ctx) {\r\n      let result;\r\n      if (ctx.base) {\r\n        result = this.visit(ctx.base);\r\n      } else if (ctx.group) {\r\n        result = this.visit(ctx.group);\r\n      } else if (ctx.array) {\r\n        result = this.visit(ctx.array);\r\n      } else if (ctx.func) {\r\n        result = this.visit(ctx.func);\r\n      }\r\n      if (!ctx.expr) {\r\n        return result;\r\n      } else {\r\n        forEach(ctx.expr, e => {\r\n          const index = this.visit(e);\r\n          result = result[index];\r\n        });\r\n        return result;\r\n      }\r\n    }\r\n\r\n    array(ctx) {\r\n      const result = [];\r\n      forEach(ctx.binaryExpression, e => {\r\n        result.push(this.visit(e));\r\n      });\r\n      return result;\r\n    }\r\n\r\n    func(ctx) {\r\n      const func = ctx.Func[0].image;\r\n      const args = [];\r\n      forEach(ctx.binaryExpression, e => {\r\n        args.push(this.visit(e));\r\n      });\r\n      return applyFunc(func, args);\r\n    }\r\n\r\n    group(ctx) {\r\n      return this.visit(ctx.expr);\r\n    }\r\n\r\n    base(ctx) {\r\n      if (ctx.String) {\r\n        // 把字符串作为参数返回\r\n        let str = ctx.String[0].image;\r\n        if (str !== null) {\r\n          return `string:${str}`;\r\n        }\r\n        return \"string\";\r\n      }\r\n      if (ctx.Number) {\r\n        let num = ctx.Number[0].image;\r\n        if (num !== null) {\r\n          return `number:${num}`;\r\n        }\r\n        return \"number\";\r\n      }\r\n      if (ctx.Date) {\r\n        let date = ctx.Date[0].image;\r\n        if (date !== null) {\r\n          return `date:${date}`;\r\n        }\r\n        return \"date\";\r\n      }\r\n      if (ctx.Boolean) {\r\n        let bol = ctx.Boolean[0].image;\r\n        if (bol !== null) {\r\n          return `boolean:${bol}`;\r\n        }\r\n        return \"boolean\";\r\n      }\r\n      if (ctx.Empty) {\r\n        return \"null\";\r\n      }\r\n      if (ctx.NaN) {\r\n        return \"number\";\r\n      }\r\n    }\r\n  };\r\n\r\n  return {\r\n    interpreter: new FormulaVisitor(),\r\n    setFormula\r\n  };\r\n};\r\n\r\n\r\n/**\r\n * 参数是否为数值类型\r\n *\r\n * @param param\r\n * @returns {boolean}\r\n */\r\nexport const isNumberType = param => {\r\n  return param === null || BI.startWith(param, \"number\") || BI.startWith(param, \"boolean\");\r\n};\r\n\r\n/**\r\n * 参数是否为字符串类型\r\n *\r\n * @param param\r\n * @returns {boolean}\r\n */\r\nexport const isStringType = param => {\r\n  return param === null || BI.startWith(param, \"string\");\r\n};\r\n\r\n/**\r\n * 参数是否为布尔类型\r\n *\r\n * @param param\r\n * @returns {boolean}\r\n */\r\nexport const isBooleanType = param => {\r\n  return param === null || BI.startWith(param, \"boolean\");\r\n};\r\n\r\n/**\r\n * 参数是否为数组类型\r\n *\r\n * @param param\r\n * @returns {boolean}\r\n */\r\nexport const isArrayType = param => {\r\n  return isArray(param) || param === null;\r\n};\r\n\r\n/**\r\n * 是否是日期对象类型\r\n *\r\n * @param param\r\n * @returns {boolean}\r\n */\r\nexport const isDateType = param => {\r\n  return param === null || BI.startWith(param, \"date\");\r\n};\r\n\r\n/**\r\n * 参数是否为任意类型，用于不确定返回值的公式如IF\r\n * 2022-9-28补充，未定义的函数返回值都是null, 也应该让其通过四则运算\r\n *\r\n * @param param\r\n * @returns {boolean}\r\n */\r\nexport const isAnyType = param => {\r\n  return param === \"any\" || param === null;\r\n};\r\n\r\nconst getType = param => {\r\n  if (isStringType(param)) {\r\n    return 'string';\r\n  }\r\n  if (isNumberType(param)) {\r\n    return 'number';\r\n  }\r\n  if (isDateType(param)) {\r\n    return 'date';\r\n  }\r\n  if (isBooleanType(param)) {\r\n    return 'boolean';\r\n  }\r\n  if (isArrayType(param)) {\r\n    return 'array';\r\n  }\r\n  if (isAnyType(param)) {\r\n    return 'any';\r\n  }\r\n\r\n  return undefined;\r\n};\r\n\r\nexport default getFormulaInterpreter;\r\n","import { DEFAULT_CONFIG } from \"./stickytable.row\"\r\n/**\r\n * @author guy\r\n * @version 2.0\r\n * Created by guy on 2022/9/25\r\n */\r\nconst StickyTableHeader = BI.inherit(BI.Widget, {\r\n    props: {\r\n        baseCls: 'bi-sticky-table-header',\r\n        columnSize: [],\r\n        minColumnSize: [],\r\n        maxColumnSize: [],\r\n        freezeCols: [],\r\n        header: [],\r\n        headerRowSize: \"auto\",\r\n    },\r\n\r\n    render: function () {\r\n        var self = this, o = this.options;\r\n        this.tds = [];\r\n        return {\r\n            type: \"bi.sticky_table_layout\",\r\n            sortable: false,\r\n            ref: (_ref) => {\r\n                this.layout = _ref;\r\n            },\r\n            columnSize: o.columnSize,\r\n            freezeCols: o.freezeCols,\r\n            items: this._formatItems(o.header)\r\n        };\r\n    },\r\n\r\n    _formatItems: function (items) {\r\n        var o = this.options;\r\n        return items.map((tds) => {\r\n            return {\r\n                type: \"bi.adaptive\",\r\n                tagName: \"tr\",\r\n                height: o.headerRowSize,\r\n                items: tds.map((item, i) => {\r\n                    return {\r\n                        type: \"bi.default\",\r\n                        tagName: \"td\",\r\n                        ref: (_ref) => {\r\n                            this.tds[i] = _ref;\r\n                        },\r\n                        extraCls: (o.freezeCols.includes(i) ? (i === tds.length - 1 ? \"sticky-table-fix-last-col\" : \"sticky-table-fix-first-col\"): \"\"),\r\n                        cls: `sticky-table-fix-index-${i}-col first-row ${i === 0 ? \"first-col\" : \"\"}`,\r\n                        css: {\r\n                            minWidth: o.minColumnSize[i],\r\n                            maxWidth: o.maxColumnSize[i]\r\n                        },\r\n                        items: [{\r\n                            ...DEFAULT_CONFIG,\r\n                            ...item\r\n                        }]\r\n                    }\r\n                })\r\n            }\r\n        });\r\n    },\r\n\r\n    _populate: function (items) {\r\n        this.layout.populate(this._formatItems(items));\r\n    },\r\n\r\n    setColumnSize: function (columnSize) {\r\n        this.layout.setColumnSize(columnSize);\r\n    },\r\n\r\n    populate: function (items) {\r\n        this._populate(items);\r\n    },\r\n\r\n    getRealColumnSize: function () {\r\n        return this.tds.map(td => {\r\n            return td.element.width();\r\n        })\r\n    }\r\n});\r\n\r\nBI.shortcut(\"bi.sticky_table_header\", StickyTableHeader);","import { Draggable } from '@shopify/draggable';\r\n\r\n/**\r\n * @author guy\r\n * @version 2.0\r\n * Created by guy on 2022/9/25\r\n */\r\nconst StickyTableLayout = BI.inherit(BI.Widget, {\r\n    props: {\r\n        baseCls: 'bi-sticky-table-layout',\r\n        sortable: true,\r\n        checkable: true,\r\n        columnSize: [],\r\n        minColumnSize: [],\r\n        maxColumnSize: [],\r\n        freezeCols: [],\r\n        mirror: {}\r\n    },\r\n\r\n    render: function () {\r\n        var self = this, o = this.options;\r\n\r\n        return {\r\n            type: \"bi.default\",\r\n            items: [{\r\n                type: 'bi.default',\r\n                tagName: \"table\",\r\n                ref: (_ref) => {\r\n                    this.table = _ref;\r\n                },\r\n                width: BI.sum(o.columnSize),\r\n                cls: \"border-sizing\",\r\n                css: {\r\n                    border: 0,\r\n                    borderSpacing: 0,\r\n                    borderCollapse: \"collapse\",\r\n                    tableLayout: \"fixed\",\r\n                    minWidth: \"100%\"\r\n                },\r\n                items: [{\r\n                    type: \"bi.default\",\r\n                    ref: (_ref) => {\r\n                        this.colgroup = _ref;\r\n                    },\r\n                    tagName: \"colgroup\",\r\n                    items: this._formatCol(o.columnSize)\r\n                }, {\r\n                    type: \"bi.default\",\r\n                    tagName: \"tbody\",\r\n                    ref: (_ref) => {\r\n                        this.layout = _ref;\r\n                    },\r\n                    items: this._formatItems(o.items)\r\n                }]\r\n            }]\r\n        }\r\n    },\r\n\r\n    mounted: function () {\r\n        if (this.options.sortable) {\r\n            const draggable = new Draggable(this.table.element[0], {\r\n                draggable: 'tr.enabled',\r\n                handle: \".bi-sticky-table-draggable-handler\",\r\n                classes: {\r\n                    \"draggable:over\": [\"bi-sticky-table-draggable-drag-over\"],\r\n                    \"mirror\": [\"bi-sticky-table-draggable-mirror\"]\r\n                },\r\n                mirror: this.options.mirror\r\n            });\r\n\r\n            let lastDragElement;\r\n            let lock = false;\r\n            var lockFn = BI.debounce(function () {\r\n                lock = false;\r\n            }, 300);\r\n\r\n\r\n            draggable.on(\"drag:start\", (e) => {\r\n                const source = e.data.source;\r\n\r\n                // source.style.visibility = \"hidden\";\r\n                source.style.transform = \"\";\r\n                source.style.transitionDuration = \"\";\r\n                this.fireEvent(StickyTableLayout.EVENT_START_DRAG, e.data.source.getAttribute(\"dataid\"));\r\n            });\r\n\r\n            draggable.on('drag:stop', (e) => {\r\n                const sourceId = e.data.source.getAttribute(\"dataid\");\r\n                const childNodes = e.data.source.parentElement.childNodes;\r\n                childNodes.forEach((node) => {\r\n                    node.style.visibility = \"\";\r\n                    node.style.transform = \"\";\r\n                    node.style.transitionDuration = \"\";\r\n                    // node.style.pointerEvents = \"\";\r\n                });\r\n                if(!e.data.sourceContainer.contains(e.data.originalSource)) {\r\n                    e.data.originalSource.remove();\r\n                    e.data.source.remove();\r\n                }\r\n\r\n                if (lastDragElement) {\r\n                    this.fireEvent(StickyTableLayout.EVENT_STOP_DRAG, [sourceId, lastDragElement.getAttribute(\"dataid\")]);\r\n                }\r\n                lastDragElement = null;\r\n            });\r\n            draggable.on(\"drag:over\", (e) => {\r\n                const over = e.data.over;\r\n                const source = e.data.source;\r\n\r\n                source.style.visibility = \"hidden\";\r\n                if (over === source || over === e.data.originalSource) {\r\n                    return;\r\n                }\r\n                if (over === lastDragElement) {\r\n                    if (lock) {\r\n                        return;\r\n                    }\r\n                }\r\n                lock = true;\r\n                lockFn();\r\n                if (over.style.transform) {\r\n                    over.style.transform = \"\";\r\n                    const filterNodes = getFilterNodes();\r\n                    if (lastDragElement === over) {\r\n                        if (filterNodes[0] === over) {\r\n                            lastDragElement = over.nextSibling;\r\n                        } else {\r\n                            lastDragElement = over.previousSibling;\r\n                        }\r\n                        if (!lastDragElement) {\r\n                            lastDragElement = over;\r\n                        }\r\n                        return;\r\n                    }\r\n                    lastDragElement = over;\r\n                    return;\r\n                }\r\n\r\n                lastDragElement = over;\r\n\r\n                function getFilterNodes () {\r\n                    const childNodes = over.parentElement.childNodes;\r\n                    let startPush = false;\r\n\r\n                    // source到over这一段的节点\r\n                    const filterNodes = [];\r\n                    childNodes.forEach((node) => {\r\n                        if (startPush === true && (node === source || node === over)) {\r\n                            startPush = false;\r\n                            filterNodes.push(node);\r\n                            return;\r\n                        }\r\n                        if (node === source || node === over) {\r\n                            startPush = true;\r\n                        }\r\n                        if (startPush) {\r\n                            filterNodes.push(node);\r\n                        } else {\r\n                            node.style.transform = \"\";\r\n                        }\r\n                    });\r\n                    return filterNodes;\r\n                }\r\n\r\n                const filterNodes = getFilterNodes();\r\n                let transform = \"translateY(-100%)\";\r\n                if (filterNodes[0] === over) {\r\n                    transform = \"translateY(100%)\";\r\n                }\r\n                filterNodes.forEach((node) => {\r\n                    if (node === source) {\r\n                        return;\r\n                    }\r\n                    node.style.transform = transform;\r\n                    node.style.transitionDuration = \"300ms\";\r\n                    // node.style.pointerEvents = \"none\";\r\n                })\r\n            });\r\n            draggable.on(\"mirror:created\", (e) => {\r\n                const o = this.options;\r\n            })\r\n        }\r\n    },\r\n\r\n    _formatCol: function (columnSize) {\r\n        return columnSize.map((width) => {\r\n            return {\r\n                type: \"bi.default\",\r\n                tagName: \"col\",\r\n                width\r\n            }\r\n        })\r\n    },\r\n\r\n    _formatItems: function (items) {\r\n        var o = this.options;\r\n        return items.map((item, i) => {\r\n            return {\r\n                isNeedFreeze: o.isNeedFreeze,\r\n                draggable: o.sortable,\r\n                checkable: o.checkable,\r\n                freezeCols: o.freezeCols,\r\n                columnSize: o.columnSize,\r\n                minColumnSize: o.minColumnSize,\r\n                maxColumnSize: o.maxColumnSize,\r\n                attributes: {\r\n                    dataid: item.id\r\n                },\r\n                ...item,\r\n                cls: `${item.cls || \"\"} ${i % 2 ? \"even\" : \"odd\"}`\r\n            }\r\n        })\r\n    },\r\n\r\n    _populate: function (items) {\r\n        this.layout.populate(this._formatItems(items));\r\n    },\r\n\r\n    setColumnSize: function (columnSize) {\r\n        var o = this.options;\r\n        o.columnSize = columnSize;\r\n        this.colgroup.populate(this._formatCol(o.columnSize));\r\n        this.table.setWidth(BI.sum(o.columnSize));\r\n    },\r\n\r\n    addItems: function (items) {\r\n        this.layout.addItems(this._formatItems(items));\r\n    },\r\n\r\n    populate: function (items) {\r\n        this._populate(items);\r\n    }\r\n});\r\nStickyTableLayout.EVENT_START_DRAG = \"EVENT_START_DRAG\";\r\nStickyTableLayout.EVENT_STOP_DRAG = \"EVENT_STOP_DRAG\";\r\nBI.shortcut(\"bi.sticky_table_layout\", StickyTableLayout);\r\n\r\nexport {StickyTableLayout};\r\n","var isPrototype = require('./_isPrototype'),\n    nativeKeys = require('./_nativeKeys');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseKeys;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map');\n\nmodule.exports = Map;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nmodule.exports = isLength;\n","var baseIsTypedArray = require('./_baseIsTypedArray'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\nmodule.exports = isTypedArray;\n","var ListCache = require('./_ListCache'),\n    stackClear = require('./_stackClear'),\n    stackDelete = require('./_stackDelete'),\n    stackGet = require('./_stackGet'),\n    stackHas = require('./_stackHas'),\n    stackSet = require('./_stackSet');\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\nmodule.exports = Stack;\n","var mapCacheClear = require('./_mapCacheClear'),\n    mapCacheDelete = require('./_mapCacheDelete'),\n    mapCacheGet = require('./_mapCacheGet'),\n    mapCacheHas = require('./_mapCacheHas'),\n    mapCacheSet = require('./_mapCacheSet');\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\nmodule.exports = MapCache;\n","var MapCache = require('./_MapCache'),\n    setCacheAdd = require('./_setCacheAdd'),\n    setCacheHas = require('./_setCacheHas');\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\nmodule.exports = SetCache;\n","/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\nmodule.exports = cacheHas;\n","/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\nmodule.exports = setToArray;\n","/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\nmodule.exports = arrayPush;\n","var arrayFilter = require('./_arrayFilter'),\n    stubArray = require('./stubArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\nmodule.exports = getSymbols;\n","/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayFilter;\n","var baseGet = require('./_baseGet');\n\n/**\n * Gets the value at `path` of `object`. If the resolved value is\n * `undefined`, the `defaultValue` is returned in its place.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.get(object, 'a[0].b.c');\n * // => 3\n *\n * _.get(object, ['a', '0', 'b', 'c']);\n * // => 3\n *\n * _.get(object, 'a.b.c', 'default');\n * // => 'default'\n */\nfunction get(object, path, defaultValue) {\n  var result = object == null ? undefined : baseGet(object, path);\n  return result === undefined ? defaultValue : result;\n}\n\nmodule.exports = get;\n","var castPath = require('./_castPath'),\n    toKey = require('./_toKey');\n\n/**\n * The base implementation of `_.get` without support for default values.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @returns {*} Returns the resolved value.\n */\nfunction baseGet(object, path) {\n  path = castPath(path, object);\n\n  var index = 0,\n      length = path.length;\n\n  while (object != null && index < length) {\n    object = object[toKey(path[index++])];\n  }\n  return (index && index == length) ? object : undefined;\n}\n\nmodule.exports = baseGet;\n","var isArray = require('./isArray'),\n    isSymbol = require('./isSymbol');\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n    reIsPlainProp = /^\\w*$/;\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  if (isArray(value)) {\n    return false;\n  }\n  var type = typeof value;\n  if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n      value == null || isSymbol(value)) {\n    return true;\n  }\n  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n    (object != null && value in Object(object));\n}\n\nmodule.exports = isKey;\n","var defineProperty = require('./_defineProperty');\n\n/**\n * The base implementation of `assignValue` and `assignMergeValue` without\n * value checks.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction baseAssignValue(object, key, value) {\n  if (key == '__proto__' && defineProperty) {\n    defineProperty(object, key, {\n      'configurable': true,\n      'enumerable': true,\n      'value': value,\n      'writable': true\n    });\n  } else {\n    object[key] = value;\n  }\n}\n\nmodule.exports = baseAssignValue;\n","var Uint8Array = require('./_Uint8Array');\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\nmodule.exports = cloneArrayBuffer;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RestWalker = void 0;\nvar drop_1 = __importDefault(require(\"lodash/drop\"));\nvar forEach_1 = __importDefault(require(\"lodash/forEach\"));\nvar gast_1 = require(\"@chevrotain/gast\");\n/**\n *  A Grammar Walker that computes the \"remaining\" grammar \"after\" a productions in the grammar.\n */\nvar RestWalker = /** @class */ (function () {\n    function RestWalker() {\n    }\n    RestWalker.prototype.walk = function (prod, prevRest) {\n        var _this = this;\n        if (prevRest === void 0) { prevRest = []; }\n        (0, forEach_1.default)(prod.definition, function (subProd, index) {\n            var currRest = (0, drop_1.default)(prod.definition, index + 1);\n            /* istanbul ignore else */\n            if (subProd instanceof gast_1.NonTerminal) {\n                _this.walkProdRef(subProd, currRest, prevRest);\n            }\n            else if (subProd instanceof gast_1.Terminal) {\n                _this.walkTerminal(subProd, currRest, prevRest);\n            }\n            else if (subProd instanceof gast_1.Alternative) {\n                _this.walkFlat(subProd, currRest, prevRest);\n            }\n            else if (subProd instanceof gast_1.Option) {\n                _this.walkOption(subProd, currRest, prevRest);\n            }\n            else if (subProd instanceof gast_1.RepetitionMandatory) {\n                _this.walkAtLeastOne(subProd, currRest, prevRest);\n            }\n            else if (subProd instanceof gast_1.RepetitionMandatoryWithSeparator) {\n                _this.walkAtLeastOneSep(subProd, currRest, prevRest);\n            }\n            else if (subProd instanceof gast_1.RepetitionWithSeparator) {\n                _this.walkManySep(subProd, currRest, prevRest);\n            }\n            else if (subProd instanceof gast_1.Repetition) {\n                _this.walkMany(subProd, currRest, prevRest);\n            }\n            else if (subProd instanceof gast_1.Alternation) {\n                _this.walkOr(subProd, currRest, prevRest);\n            }\n            else {\n                throw Error(\"non exhaustive match\");\n            }\n        });\n    };\n    RestWalker.prototype.walkTerminal = function (terminal, currRest, prevRest) { };\n    RestWalker.prototype.walkProdRef = function (refProd, currRest, prevRest) { };\n    RestWalker.prototype.walkFlat = function (flatProd, currRest, prevRest) {\n        // ABCDEF => after the D the rest is EF\n        var fullOrRest = currRest.concat(prevRest);\n        this.walk(flatProd, fullOrRest);\n    };\n    RestWalker.prototype.walkOption = function (optionProd, currRest, prevRest) {\n        // ABC(DE)?F => after the (DE)? the rest is F\n        var fullOrRest = currRest.concat(prevRest);\n        this.walk(optionProd, fullOrRest);\n    };\n    RestWalker.prototype.walkAtLeastOne = function (atLeastOneProd, currRest, prevRest) {\n        // ABC(DE)+F => after the (DE)+ the rest is (DE)?F\n        var fullAtLeastOneRest = [\n            new gast_1.Option({ definition: atLeastOneProd.definition })\n        ].concat(currRest, prevRest);\n        this.walk(atLeastOneProd, fullAtLeastOneRest);\n    };\n    RestWalker.prototype.walkAtLeastOneSep = function (atLeastOneSepProd, currRest, prevRest) {\n        // ABC DE(,DE)* F => after the (,DE)+ the rest is (,DE)?F\n        var fullAtLeastOneSepRest = restForRepetitionWithSeparator(atLeastOneSepProd, currRest, prevRest);\n        this.walk(atLeastOneSepProd, fullAtLeastOneSepRest);\n    };\n    RestWalker.prototype.walkMany = function (manyProd, currRest, prevRest) {\n        // ABC(DE)*F => after the (DE)* the rest is (DE)?F\n        var fullManyRest = [\n            new gast_1.Option({ definition: manyProd.definition })\n        ].concat(currRest, prevRest);\n        this.walk(manyProd, fullManyRest);\n    };\n    RestWalker.prototype.walkManySep = function (manySepProd, currRest, prevRest) {\n        // ABC (DE(,DE)*)? F => after the (,DE)* the rest is (,DE)?F\n        var fullManySepRest = restForRepetitionWithSeparator(manySepProd, currRest, prevRest);\n        this.walk(manySepProd, fullManySepRest);\n    };\n    RestWalker.prototype.walkOr = function (orProd, currRest, prevRest) {\n        var _this = this;\n        // ABC(D|E|F)G => when finding the (D|E|F) the rest is G\n        var fullOrRest = currRest.concat(prevRest);\n        // walk all different alternatives\n        (0, forEach_1.default)(orProd.definition, function (alt) {\n            // wrapping each alternative in a single definition wrapper\n            // to avoid errors in computing the rest of that alternative in the invocation to computeInProdFollows\n            // (otherwise for OR([alt1,alt2]) alt2 will be considered in 'rest' of alt1\n            var prodWrapper = new gast_1.Alternative({ definition: [alt] });\n            _this.walk(prodWrapper, fullOrRest);\n        });\n    };\n    return RestWalker;\n}());\nexports.RestWalker = RestWalker;\nfunction restForRepetitionWithSeparator(repSepProd, currRest, prevRest) {\n    var repSepRest = [\n        new gast_1.Option({\n            definition: [\n                new gast_1.Terminal({ terminalType: repSepProd.separator })\n            ].concat(repSepProd.definition)\n        })\n    ];\n    var fullRepSepRest = repSepRest.concat(currRest, prevRest);\n    return fullRepSepRest;\n}\n","var baseSlice = require('./_baseSlice'),\n    toInteger = require('./toInteger');\n\n/**\n * Creates a slice of `array` with `n` elements dropped from the beginning.\n *\n * @static\n * @memberOf _\n * @since 0.5.0\n * @category Array\n * @param {Array} array The array to query.\n * @param {number} [n=1] The number of elements to drop.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n * @returns {Array} Returns the slice of `array`.\n * @example\n *\n * _.drop([1, 2, 3]);\n * // => [2, 3]\n *\n * _.drop([1, 2, 3], 2);\n * // => [3]\n *\n * _.drop([1, 2, 3], 5);\n * // => []\n *\n * _.drop([1, 2, 3], 0);\n * // => [1, 2, 3]\n */\nfunction drop(array, n, guard) {\n  var length = array == null ? 0 : array.length;\n  if (!length) {\n    return [];\n  }\n  n = (guard || n === undefined) ? 1 : toInteger(n);\n  return baseSlice(array, n < 0 ? 0 : n, length);\n}\n\nmodule.exports = drop;\n","/**\n * The base implementation of `_.slice` without an iteratee call guard.\n *\n * @private\n * @param {Array} array The array to slice.\n * @param {number} [start=0] The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the slice of `array`.\n */\nfunction baseSlice(array, start, end) {\n  var index = -1,\n      length = array.length;\n\n  if (start < 0) {\n    start = -start > length ? 0 : (length + start);\n  }\n  end = end > length ? length : end;\n  if (end < 0) {\n    end += length;\n  }\n  length = start > end ? 0 : ((end - start) >>> 0);\n  start >>>= 0;\n\n  var result = Array(length);\n  while (++index < length) {\n    result[index] = array[index + start];\n  }\n  return result;\n}\n\nmodule.exports = baseSlice;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.serializeProduction = exports.serializeGrammar = exports.Terminal = exports.Alternation = exports.RepetitionWithSeparator = exports.Repetition = exports.RepetitionMandatoryWithSeparator = exports.RepetitionMandatory = exports.Option = exports.Alternative = exports.Rule = exports.NonTerminal = exports.AbstractProduction = void 0;\nvar map_1 = __importDefault(require(\"lodash/map\"));\nvar forEach_1 = __importDefault(require(\"lodash/forEach\"));\nvar isString_1 = __importDefault(require(\"lodash/isString\"));\nvar isRegExp_1 = __importDefault(require(\"lodash/isRegExp\"));\nvar pickBy_1 = __importDefault(require(\"lodash/pickBy\"));\nvar assign_1 = __importDefault(require(\"lodash/assign\"));\n// TODO: duplicated code to avoid extracting another sub-package -- how to avoid?\nfunction tokenLabel(tokType) {\n    if (hasTokenLabel(tokType)) {\n        return tokType.LABEL;\n    }\n    else {\n        return tokType.name;\n    }\n}\n// TODO: duplicated code to avoid extracting another sub-package -- how to avoid?\nfunction hasTokenLabel(obj) {\n    return (0, isString_1.default)(obj.LABEL) && obj.LABEL !== \"\";\n}\nvar AbstractProduction = /** @class */ (function () {\n    function AbstractProduction(_definition) {\n        this._definition = _definition;\n    }\n    Object.defineProperty(AbstractProduction.prototype, \"definition\", {\n        get: function () {\n            return this._definition;\n        },\n        set: function (value) {\n            this._definition = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    AbstractProduction.prototype.accept = function (visitor) {\n        visitor.visit(this);\n        (0, forEach_1.default)(this.definition, function (prod) {\n            prod.accept(visitor);\n        });\n    };\n    return AbstractProduction;\n}());\nexports.AbstractProduction = AbstractProduction;\nvar NonTerminal = /** @class */ (function (_super) {\n    __extends(NonTerminal, _super);\n    function NonTerminal(options) {\n        var _this = _super.call(this, []) || this;\n        _this.idx = 1;\n        (0, assign_1.default)(_this, (0, pickBy_1.default)(options, function (v) { return v !== undefined; }));\n        return _this;\n    }\n    Object.defineProperty(NonTerminal.prototype, \"definition\", {\n        get: function () {\n            if (this.referencedRule !== undefined) {\n                return this.referencedRule.definition;\n            }\n            return [];\n        },\n        set: function (definition) {\n            // immutable\n        },\n        enumerable: false,\n        configurable: true\n    });\n    NonTerminal.prototype.accept = function (visitor) {\n        visitor.visit(this);\n        // don't visit children of a reference, we will get cyclic infinite loops if we do so\n    };\n    return NonTerminal;\n}(AbstractProduction));\nexports.NonTerminal = NonTerminal;\nvar Rule = /** @class */ (function (_super) {\n    __extends(Rule, _super);\n    function Rule(options) {\n        var _this = _super.call(this, options.definition) || this;\n        _this.orgText = \"\";\n        (0, assign_1.default)(_this, (0, pickBy_1.default)(options, function (v) { return v !== undefined; }));\n        return _this;\n    }\n    return Rule;\n}(AbstractProduction));\nexports.Rule = Rule;\nvar Alternative = /** @class */ (function (_super) {\n    __extends(Alternative, _super);\n    function Alternative(options) {\n        var _this = _super.call(this, options.definition) || this;\n        _this.ignoreAmbiguities = false;\n        (0, assign_1.default)(_this, (0, pickBy_1.default)(options, function (v) { return v !== undefined; }));\n        return _this;\n    }\n    return Alternative;\n}(AbstractProduction));\nexports.Alternative = Alternative;\nvar Option = /** @class */ (function (_super) {\n    __extends(Option, _super);\n    function Option(options) {\n        var _this = _super.call(this, options.definition) || this;\n        _this.idx = 1;\n        (0, assign_1.default)(_this, (0, pickBy_1.default)(options, function (v) { return v !== undefined; }));\n        return _this;\n    }\n    return Option;\n}(AbstractProduction));\nexports.Option = Option;\nvar RepetitionMandatory = /** @class */ (function (_super) {\n    __extends(RepetitionMandatory, _super);\n    function RepetitionMandatory(options) {\n        var _this = _super.call(this, options.definition) || this;\n        _this.idx = 1;\n        (0, assign_1.default)(_this, (0, pickBy_1.default)(options, function (v) { return v !== undefined; }));\n        return _this;\n    }\n    return RepetitionMandatory;\n}(AbstractProduction));\nexports.RepetitionMandatory = RepetitionMandatory;\nvar RepetitionMandatoryWithSeparator = /** @class */ (function (_super) {\n    __extends(RepetitionMandatoryWithSeparator, _super);\n    function RepetitionMandatoryWithSeparator(options) {\n        var _this = _super.call(this, options.definition) || this;\n        _this.idx = 1;\n        (0, assign_1.default)(_this, (0, pickBy_1.default)(options, function (v) { return v !== undefined; }));\n        return _this;\n    }\n    return RepetitionMandatoryWithSeparator;\n}(AbstractProduction));\nexports.RepetitionMandatoryWithSeparator = RepetitionMandatoryWithSeparator;\nvar Repetition = /** @class */ (function (_super) {\n    __extends(Repetition, _super);\n    function Repetition(options) {\n        var _this = _super.call(this, options.definition) || this;\n        _this.idx = 1;\n        (0, assign_1.default)(_this, (0, pickBy_1.default)(options, function (v) { return v !== undefined; }));\n        return _this;\n    }\n    return Repetition;\n}(AbstractProduction));\nexports.Repetition = Repetition;\nvar RepetitionWithSeparator = /** @class */ (function (_super) {\n    __extends(RepetitionWithSeparator, _super);\n    function RepetitionWithSeparator(options) {\n        var _this = _super.call(this, options.definition) || this;\n        _this.idx = 1;\n        (0, assign_1.default)(_this, (0, pickBy_1.default)(options, function (v) { return v !== undefined; }));\n        return _this;\n    }\n    return RepetitionWithSeparator;\n}(AbstractProduction));\nexports.RepetitionWithSeparator = RepetitionWithSeparator;\nvar Alternation = /** @class */ (function (_super) {\n    __extends(Alternation, _super);\n    function Alternation(options) {\n        var _this = _super.call(this, options.definition) || this;\n        _this.idx = 1;\n        _this.ignoreAmbiguities = false;\n        _this.hasPredicates = false;\n        (0, assign_1.default)(_this, (0, pickBy_1.default)(options, function (v) { return v !== undefined; }));\n        return _this;\n    }\n    Object.defineProperty(Alternation.prototype, \"definition\", {\n        get: function () {\n            return this._definition;\n        },\n        set: function (value) {\n            this._definition = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return Alternation;\n}(AbstractProduction));\nexports.Alternation = Alternation;\nvar Terminal = /** @class */ (function () {\n    function Terminal(options) {\n        this.idx = 1;\n        (0, assign_1.default)(this, (0, pickBy_1.default)(options, function (v) { return v !== undefined; }));\n    }\n    Terminal.prototype.accept = function (visitor) {\n        visitor.visit(this);\n    };\n    return Terminal;\n}());\nexports.Terminal = Terminal;\nfunction serializeGrammar(topRules) {\n    return (0, map_1.default)(topRules, serializeProduction);\n}\nexports.serializeGrammar = serializeGrammar;\nfunction serializeProduction(node) {\n    function convertDefinition(definition) {\n        return (0, map_1.default)(definition, serializeProduction);\n    }\n    /* istanbul ignore else */\n    if (node instanceof NonTerminal) {\n        var serializedNonTerminal = {\n            type: \"NonTerminal\",\n            name: node.nonTerminalName,\n            idx: node.idx\n        };\n        if ((0, isString_1.default)(node.label)) {\n            serializedNonTerminal.label = node.label;\n        }\n        return serializedNonTerminal;\n    }\n    else if (node instanceof Alternative) {\n        return {\n            type: \"Alternative\",\n            definition: convertDefinition(node.definition)\n        };\n    }\n    else if (node instanceof Option) {\n        return {\n            type: \"Option\",\n            idx: node.idx,\n            definition: convertDefinition(node.definition)\n        };\n    }\n    else if (node instanceof RepetitionMandatory) {\n        return {\n            type: \"RepetitionMandatory\",\n            idx: node.idx,\n            definition: convertDefinition(node.definition)\n        };\n    }\n    else if (node instanceof RepetitionMandatoryWithSeparator) {\n        return {\n            type: \"RepetitionMandatoryWithSeparator\",\n            idx: node.idx,\n            separator: (serializeProduction(new Terminal({ terminalType: node.separator }))),\n            definition: convertDefinition(node.definition)\n        };\n    }\n    else if (node instanceof RepetitionWithSeparator) {\n        return {\n            type: \"RepetitionWithSeparator\",\n            idx: node.idx,\n            separator: (serializeProduction(new Terminal({ terminalType: node.separator }))),\n            definition: convertDefinition(node.definition)\n        };\n    }\n    else if (node instanceof Repetition) {\n        return {\n            type: \"Repetition\",\n            idx: node.idx,\n            definition: convertDefinition(node.definition)\n        };\n    }\n    else if (node instanceof Alternation) {\n        return {\n            type: \"Alternation\",\n            idx: node.idx,\n            definition: convertDefinition(node.definition)\n        };\n    }\n    else if (node instanceof Terminal) {\n        var serializedTerminal = {\n            type: \"Terminal\",\n            name: node.terminalType.name,\n            label: tokenLabel(node.terminalType),\n            idx: node.idx\n        };\n        if ((0, isString_1.default)(node.label)) {\n            serializedTerminal.terminalLabel = node.label;\n        }\n        var pattern = node.terminalType.PATTERN;\n        if (node.terminalType.PATTERN) {\n            serializedTerminal.pattern = (0, isRegExp_1.default)(pattern)\n                ? pattern.source\n                : pattern;\n        }\n        return serializedTerminal;\n    }\n    else if (node instanceof Rule) {\n        return {\n            type: \"Rule\",\n            name: node.name,\n            orgText: node.orgText,\n            definition: convertDefinition(node.definition)\n        };\n    }\n    else {\n        throw Error(\"non exhaustive match\");\n    }\n}\nexports.serializeProduction = serializeProduction;\n","var identity = require('./identity'),\n    overRest = require('./_overRest'),\n    setToString = require('./_setToString');\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  return setToString(overRest(func, start, identity), func + '');\n}\n\nmodule.exports = baseRest;\n","var arraySome = require('./_arraySome'),\n    baseIteratee = require('./_baseIteratee'),\n    baseSome = require('./_baseSome'),\n    isArray = require('./isArray'),\n    isIterateeCall = require('./_isIterateeCall');\n\n/**\n * Checks if `predicate` returns truthy for **any** element of `collection`.\n * Iteration is stopped once `predicate` returns truthy. The predicate is\n * invoked with three arguments: (value, index|key, collection).\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n * @example\n *\n * _.some([null, 0, 'yes', false], Boolean);\n * // => true\n *\n * var users = [\n *   { 'user': 'barney', 'active': true },\n *   { 'user': 'fred',   'active': false }\n * ];\n *\n * // The `_.matches` iteratee shorthand.\n * _.some(users, { 'user': 'barney', 'active': false });\n * // => false\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.some(users, ['active', false]);\n * // => true\n *\n * // The `_.property` iteratee shorthand.\n * _.some(users, 'active');\n * // => true\n */\nfunction some(collection, predicate, guard) {\n  var func = isArray(collection) ? arraySome : baseSome;\n  if (guard && isIterateeCall(collection, predicate, guard)) {\n    predicate = undefined;\n  }\n  return func(collection, baseIteratee(predicate, 3));\n}\n\nmodule.exports = some;\n","var baseFindIndex = require('./_baseFindIndex'),\n    baseIsNaN = require('./_baseIsNaN'),\n    strictIndexOf = require('./_strictIndexOf');\n\n/**\n * The base implementation of `_.indexOf` without `fromIndex` bounds checks.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseIndexOf(array, value, fromIndex) {\n  return value === value\n    ? strictIndexOf(array, value, fromIndex)\n    : baseFindIndex(array, baseIsNaN, fromIndex);\n}\n\nmodule.exports = baseIndexOf;\n","var arrayPush = require('./_arrayPush'),\n    isFlattenable = require('./_isFlattenable');\n\n/**\n * The base implementation of `_.flatten` with support for restricting flattening.\n *\n * @private\n * @param {Array} array The array to flatten.\n * @param {number} depth The maximum recursion depth.\n * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n * @param {Array} [result=[]] The initial result value.\n * @returns {Array} Returns the new flattened array.\n */\nfunction baseFlatten(array, depth, predicate, isStrict, result) {\n  var index = -1,\n      length = array.length;\n\n  predicate || (predicate = isFlattenable);\n  result || (result = []);\n\n  while (++index < length) {\n    var value = array[index];\n    if (depth > 0 && predicate(value)) {\n      if (depth > 1) {\n        // Recursively flatten arrays (susceptible to call stack limits).\n        baseFlatten(value, depth - 1, predicate, isStrict, result);\n      } else {\n        arrayPush(result, value);\n      }\n    } else if (!isStrict) {\n      result[result.length] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseFlatten;\n","var baseUniq = require('./_baseUniq');\n\n/**\n * Creates a duplicate-free version of an array, using\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons, in which only the first occurrence of each element\n * is kept. The order of result values is determined by the order they occur\n * in the array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @returns {Array} Returns the new duplicate free array.\n * @example\n *\n * _.uniq([2, 1, 2]);\n * // => [2, 1]\n */\nfunction uniq(array) {\n  return (array && array.length) ? baseUniq(array) : [];\n}\n\nmodule.exports = uniq;\n","/**\n * This method returns `undefined`.\n *\n * @static\n * @memberOf _\n * @since 2.3.0\n * @category Util\n * @example\n *\n * _.times(2, _.noop);\n * // => [undefined, undefined]\n */\nfunction noop() {\n  // No operation performed.\n}\n\nmodule.exports = noop;\n",";(function(root, factory) {\n    // istanbul ignore next\n    if (typeof define === \"function\" && define.amd) {\n        // istanbul ignore next\n        define([], factory)\n    } else if (typeof module === \"object\" && module.exports) {\n        module.exports = factory()\n    } else {\n        // istanbul ignore next\n        root.regexpToAst = factory()\n    }\n})(\n    typeof self !== \"undefined\"\n        ? // istanbul ignore next\n          self\n        : this,\n    function() {\n        // references\n        // https://hackernoon.com/the-madness-of-parsing-real-world-javascript-regexps-d9ee336df983\n        // https://www.ecma-international.org/ecma-262/8.0/index.html#prod-Pattern\n        function RegExpParser() {}\n\n        RegExpParser.prototype.saveState = function() {\n            return {\n                idx: this.idx,\n                input: this.input,\n                groupIdx: this.groupIdx\n            }\n        }\n\n        RegExpParser.prototype.restoreState = function(newState) {\n            this.idx = newState.idx\n            this.input = newState.input\n            this.groupIdx = newState.groupIdx\n        }\n\n        RegExpParser.prototype.pattern = function(input) {\n            // parser state\n            this.idx = 0\n            this.input = input\n            this.groupIdx = 0\n\n            this.consumeChar(\"/\")\n            var value = this.disjunction()\n            this.consumeChar(\"/\")\n\n            var flags = {\n                type: \"Flags\",\n                loc: { begin: this.idx, end: input.length },\n                global: false,\n                ignoreCase: false,\n                multiLine: false,\n                unicode: false,\n                sticky: false\n            }\n\n            while (this.isRegExpFlag()) {\n                switch (this.popChar()) {\n                    case \"g\":\n                        addFlag(flags, \"global\")\n                        break\n                    case \"i\":\n                        addFlag(flags, \"ignoreCase\")\n                        break\n                    case \"m\":\n                        addFlag(flags, \"multiLine\")\n                        break\n                    case \"u\":\n                        addFlag(flags, \"unicode\")\n                        break\n                    case \"y\":\n                        addFlag(flags, \"sticky\")\n                        break\n                }\n            }\n\n            if (this.idx !== this.input.length) {\n                throw Error(\n                    \"Redundant input: \" + this.input.substring(this.idx)\n                )\n            }\n            return {\n                type: \"Pattern\",\n                flags: flags,\n                value: value,\n                loc: this.loc(0)\n            }\n        }\n\n        RegExpParser.prototype.disjunction = function() {\n            var alts = []\n            var begin = this.idx\n\n            alts.push(this.alternative())\n\n            while (this.peekChar() === \"|\") {\n                this.consumeChar(\"|\")\n                alts.push(this.alternative())\n            }\n\n            return { type: \"Disjunction\", value: alts, loc: this.loc(begin) }\n        }\n\n        RegExpParser.prototype.alternative = function() {\n            var terms = []\n            var begin = this.idx\n\n            while (this.isTerm()) {\n                terms.push(this.term())\n            }\n\n            return { type: \"Alternative\", value: terms, loc: this.loc(begin) }\n        }\n\n        RegExpParser.prototype.term = function() {\n            if (this.isAssertion()) {\n                return this.assertion()\n            } else {\n                return this.atom()\n            }\n        }\n\n        RegExpParser.prototype.assertion = function() {\n            var begin = this.idx\n            switch (this.popChar()) {\n                case \"^\":\n                    return {\n                        type: \"StartAnchor\",\n                        loc: this.loc(begin)\n                    }\n                case \"$\":\n                    return { type: \"EndAnchor\", loc: this.loc(begin) }\n                // '\\b' or '\\B'\n                case \"\\\\\":\n                    switch (this.popChar()) {\n                        case \"b\":\n                            return {\n                                type: \"WordBoundary\",\n                                loc: this.loc(begin)\n                            }\n                        case \"B\":\n                            return {\n                                type: \"NonWordBoundary\",\n                                loc: this.loc(begin)\n                            }\n                    }\n                    // istanbul ignore next\n                    throw Error(\"Invalid Assertion Escape\")\n                // '(?=' or '(?!'\n                case \"(\":\n                    this.consumeChar(\"?\")\n\n                    var type\n                    switch (this.popChar()) {\n                        case \"=\":\n                            type = \"Lookahead\"\n                            break\n                        case \"!\":\n                            type = \"NegativeLookahead\"\n                            break\n                    }\n                    ASSERT_EXISTS(type)\n\n                    var disjunction = this.disjunction()\n\n                    this.consumeChar(\")\")\n\n                    return {\n                        type: type,\n                        value: disjunction,\n                        loc: this.loc(begin)\n                    }\n            }\n            // istanbul ignore next\n            ASSERT_NEVER_REACH_HERE()\n        }\n\n        RegExpParser.prototype.quantifier = function(isBacktracking) {\n            var range\n            var begin = this.idx\n            switch (this.popChar()) {\n                case \"*\":\n                    range = {\n                        atLeast: 0,\n                        atMost: Infinity\n                    }\n                    break\n                case \"+\":\n                    range = {\n                        atLeast: 1,\n                        atMost: Infinity\n                    }\n                    break\n                case \"?\":\n                    range = {\n                        atLeast: 0,\n                        atMost: 1\n                    }\n                    break\n                case \"{\":\n                    var atLeast = this.integerIncludingZero()\n                    switch (this.popChar()) {\n                        case \"}\":\n                            range = {\n                                atLeast: atLeast,\n                                atMost: atLeast\n                            }\n                            break\n                        case \",\":\n                            var atMost\n                            if (this.isDigit()) {\n                                atMost = this.integerIncludingZero()\n                                range = {\n                                    atLeast: atLeast,\n                                    atMost: atMost\n                                }\n                            } else {\n                                range = {\n                                    atLeast: atLeast,\n                                    atMost: Infinity\n                                }\n                            }\n                            this.consumeChar(\"}\")\n                            break\n                    }\n                    // throwing exceptions from \"ASSERT_EXISTS\" during backtracking\n                    // causes severe performance degradations\n                    if (isBacktracking === true && range === undefined) {\n                        return undefined\n                    }\n                    ASSERT_EXISTS(range)\n                    break\n            }\n\n            // throwing exceptions from \"ASSERT_EXISTS\" during backtracking\n            // causes severe performance degradations\n            if (isBacktracking === true && range === undefined) {\n                return undefined\n            }\n\n            ASSERT_EXISTS(range)\n\n            if (this.peekChar(0) === \"?\") {\n                this.consumeChar(\"?\")\n                range.greedy = false\n            } else {\n                range.greedy = true\n            }\n\n            range.type = \"Quantifier\"\n            range.loc = this.loc(begin)\n            return range\n        }\n\n        RegExpParser.prototype.atom = function() {\n            var atom\n            var begin = this.idx\n            switch (this.peekChar()) {\n                case \".\":\n                    atom = this.dotAll()\n                    break\n                case \"\\\\\":\n                    atom = this.atomEscape()\n                    break\n                case \"[\":\n                    atom = this.characterClass()\n                    break\n                case \"(\":\n                    atom = this.group()\n                    break\n            }\n\n            if (atom === undefined && this.isPatternCharacter()) {\n                atom = this.patternCharacter()\n            }\n\n            ASSERT_EXISTS(atom)\n\n            atom.loc = this.loc(begin)\n\n            if (this.isQuantifier()) {\n                atom.quantifier = this.quantifier()\n            }\n\n            return atom\n        }\n\n        RegExpParser.prototype.dotAll = function() {\n            this.consumeChar(\".\")\n            return {\n                type: \"Set\",\n                complement: true,\n                value: [cc(\"\\n\"), cc(\"\\r\"), cc(\"\\u2028\"), cc(\"\\u2029\")]\n            }\n        }\n\n        RegExpParser.prototype.atomEscape = function() {\n            this.consumeChar(\"\\\\\")\n\n            switch (this.peekChar()) {\n                case \"1\":\n                case \"2\":\n                case \"3\":\n                case \"4\":\n                case \"5\":\n                case \"6\":\n                case \"7\":\n                case \"8\":\n                case \"9\":\n                    return this.decimalEscapeAtom()\n                case \"d\":\n                case \"D\":\n                case \"s\":\n                case \"S\":\n                case \"w\":\n                case \"W\":\n                    return this.characterClassEscape()\n                case \"f\":\n                case \"n\":\n                case \"r\":\n                case \"t\":\n                case \"v\":\n                    return this.controlEscapeAtom()\n                case \"c\":\n                    return this.controlLetterEscapeAtom()\n                case \"0\":\n                    return this.nulCharacterAtom()\n                case \"x\":\n                    return this.hexEscapeSequenceAtom()\n                case \"u\":\n                    return this.regExpUnicodeEscapeSequenceAtom()\n                default:\n                    return this.identityEscapeAtom()\n            }\n        }\n\n        RegExpParser.prototype.decimalEscapeAtom = function() {\n            var value = this.positiveInteger()\n\n            return { type: \"GroupBackReference\", value: value }\n        }\n\n        RegExpParser.prototype.characterClassEscape = function() {\n            var set\n            var complement = false\n            switch (this.popChar()) {\n                case \"d\":\n                    set = digitsCharCodes\n                    break\n                case \"D\":\n                    set = digitsCharCodes\n                    complement = true\n                    break\n                case \"s\":\n                    set = whitespaceCodes\n                    break\n                case \"S\":\n                    set = whitespaceCodes\n                    complement = true\n                    break\n                case \"w\":\n                    set = wordCharCodes\n                    break\n                case \"W\":\n                    set = wordCharCodes\n                    complement = true\n                    break\n            }\n\n            ASSERT_EXISTS(set)\n\n            return { type: \"Set\", value: set, complement: complement }\n        }\n\n        RegExpParser.prototype.controlEscapeAtom = function() {\n            var escapeCode\n            switch (this.popChar()) {\n                case \"f\":\n                    escapeCode = cc(\"\\f\")\n                    break\n                case \"n\":\n                    escapeCode = cc(\"\\n\")\n                    break\n                case \"r\":\n                    escapeCode = cc(\"\\r\")\n                    break\n                case \"t\":\n                    escapeCode = cc(\"\\t\")\n                    break\n                case \"v\":\n                    escapeCode = cc(\"\\v\")\n                    break\n            }\n            ASSERT_EXISTS(escapeCode)\n\n            return { type: \"Character\", value: escapeCode }\n        }\n\n        RegExpParser.prototype.controlLetterEscapeAtom = function() {\n            this.consumeChar(\"c\")\n            var letter = this.popChar()\n            if (/[a-zA-Z]/.test(letter) === false) {\n                throw Error(\"Invalid \")\n            }\n\n            var letterCode = letter.toUpperCase().charCodeAt(0) - 64\n            return { type: \"Character\", value: letterCode }\n        }\n\n        RegExpParser.prototype.nulCharacterAtom = function() {\n            // TODO implement '[lookahead ∉ DecimalDigit]'\n            // TODO: for the deprecated octal escape sequence\n            this.consumeChar(\"0\")\n            return { type: \"Character\", value: cc(\"\\0\") }\n        }\n\n        RegExpParser.prototype.hexEscapeSequenceAtom = function() {\n            this.consumeChar(\"x\")\n            return this.parseHexDigits(2)\n        }\n\n        RegExpParser.prototype.regExpUnicodeEscapeSequenceAtom = function() {\n            this.consumeChar(\"u\")\n            return this.parseHexDigits(4)\n        }\n\n        RegExpParser.prototype.identityEscapeAtom = function() {\n            // TODO: implement \"SourceCharacter but not UnicodeIDContinue\"\n            // // http://unicode.org/reports/tr31/#Specific_Character_Adjustments\n            var escapedChar = this.popChar()\n            return { type: \"Character\", value: cc(escapedChar) }\n        }\n\n        RegExpParser.prototype.classPatternCharacterAtom = function() {\n            switch (this.peekChar()) {\n                // istanbul ignore next\n                case \"\\n\":\n                // istanbul ignore next\n                case \"\\r\":\n                // istanbul ignore next\n                case \"\\u2028\":\n                // istanbul ignore next\n                case \"\\u2029\":\n                // istanbul ignore next\n                case \"\\\\\":\n                // istanbul ignore next\n                case \"]\":\n                    throw Error(\"TBD\")\n                default:\n                    var nextChar = this.popChar()\n                    return { type: \"Character\", value: cc(nextChar) }\n            }\n        }\n\n        RegExpParser.prototype.characterClass = function() {\n            var set = []\n            var complement = false\n            this.consumeChar(\"[\")\n            if (this.peekChar(0) === \"^\") {\n                this.consumeChar(\"^\")\n                complement = true\n            }\n\n            while (this.isClassAtom()) {\n                var from = this.classAtom()\n                var isFromSingleChar = from.type === \"Character\"\n                if (isFromSingleChar && this.isRangeDash()) {\n                    this.consumeChar(\"-\")\n                    var to = this.classAtom()\n                    var isToSingleChar = to.type === \"Character\"\n\n                    // a range can only be used when both sides are single characters\n                    if (isToSingleChar) {\n                        if (to.value < from.value) {\n                            throw Error(\"Range out of order in character class\")\n                        }\n                        set.push({ from: from.value, to: to.value })\n                    } else {\n                        // literal dash\n                        insertToSet(from.value, set)\n                        set.push(cc(\"-\"))\n                        insertToSet(to.value, set)\n                    }\n                } else {\n                    insertToSet(from.value, set)\n                }\n            }\n\n            this.consumeChar(\"]\")\n\n            return { type: \"Set\", complement: complement, value: set }\n        }\n\n        RegExpParser.prototype.classAtom = function() {\n            switch (this.peekChar()) {\n                // istanbul ignore next\n                case \"]\":\n                // istanbul ignore next\n                case \"\\n\":\n                // istanbul ignore next\n                case \"\\r\":\n                // istanbul ignore next\n                case \"\\u2028\":\n                // istanbul ignore next\n                case \"\\u2029\":\n                    throw Error(\"TBD\")\n                case \"\\\\\":\n                    return this.classEscape()\n                default:\n                    return this.classPatternCharacterAtom()\n            }\n        }\n\n        RegExpParser.prototype.classEscape = function() {\n            this.consumeChar(\"\\\\\")\n            switch (this.peekChar()) {\n                // Matches a backspace.\n                // (Not to be confused with \\b word boundary outside characterClass)\n                case \"b\":\n                    this.consumeChar(\"b\")\n                    return { type: \"Character\", value: cc(\"\\u0008\") }\n                case \"d\":\n                case \"D\":\n                case \"s\":\n                case \"S\":\n                case \"w\":\n                case \"W\":\n                    return this.characterClassEscape()\n                case \"f\":\n                case \"n\":\n                case \"r\":\n                case \"t\":\n                case \"v\":\n                    return this.controlEscapeAtom()\n                case \"c\":\n                    return this.controlLetterEscapeAtom()\n                case \"0\":\n                    return this.nulCharacterAtom()\n                case \"x\":\n                    return this.hexEscapeSequenceAtom()\n                case \"u\":\n                    return this.regExpUnicodeEscapeSequenceAtom()\n                default:\n                    return this.identityEscapeAtom()\n            }\n        }\n\n        RegExpParser.prototype.group = function() {\n            var capturing = true\n            this.consumeChar(\"(\")\n            switch (this.peekChar(0)) {\n                case \"?\":\n                    this.consumeChar(\"?\")\n                    this.consumeChar(\":\")\n                    capturing = false\n                    break\n                default:\n                    this.groupIdx++\n                    break\n            }\n            var value = this.disjunction()\n            this.consumeChar(\")\")\n\n            var groupAst = {\n                type: \"Group\",\n                capturing: capturing,\n                value: value\n            }\n\n            if (capturing) {\n                groupAst.idx = this.groupIdx\n            }\n\n            return groupAst\n        }\n\n        RegExpParser.prototype.positiveInteger = function() {\n            var number = this.popChar()\n\n            // istanbul ignore next - can't ever get here due to previous lookahead checks\n            // still implementing this error checking in case this ever changes.\n            if (decimalPatternNoZero.test(number) === false) {\n                throw Error(\"Expecting a positive integer\")\n            }\n\n            while (decimalPattern.test(this.peekChar(0))) {\n                number += this.popChar()\n            }\n\n            return parseInt(number, 10)\n        }\n\n        RegExpParser.prototype.integerIncludingZero = function() {\n            var number = this.popChar()\n            if (decimalPattern.test(number) === false) {\n                throw Error(\"Expecting an integer\")\n            }\n\n            while (decimalPattern.test(this.peekChar(0))) {\n                number += this.popChar()\n            }\n\n            return parseInt(number, 10)\n        }\n\n        RegExpParser.prototype.patternCharacter = function() {\n            var nextChar = this.popChar()\n            switch (nextChar) {\n                // istanbul ignore next\n                case \"\\n\":\n                // istanbul ignore next\n                case \"\\r\":\n                // istanbul ignore next\n                case \"\\u2028\":\n                // istanbul ignore next\n                case \"\\u2029\":\n                // istanbul ignore next\n                case \"^\":\n                // istanbul ignore next\n                case \"$\":\n                // istanbul ignore next\n                case \"\\\\\":\n                // istanbul ignore next\n                case \".\":\n                // istanbul ignore next\n                case \"*\":\n                // istanbul ignore next\n                case \"+\":\n                // istanbul ignore next\n                case \"?\":\n                // istanbul ignore next\n                case \"(\":\n                // istanbul ignore next\n                case \")\":\n                // istanbul ignore next\n                case \"[\":\n                // istanbul ignore next\n                case \"|\":\n                    // istanbul ignore next\n                    throw Error(\"TBD\")\n                default:\n                    return { type: \"Character\", value: cc(nextChar) }\n            }\n        }\n        RegExpParser.prototype.isRegExpFlag = function() {\n            switch (this.peekChar(0)) {\n                case \"g\":\n                case \"i\":\n                case \"m\":\n                case \"u\":\n                case \"y\":\n                    return true\n                default:\n                    return false\n            }\n        }\n\n        RegExpParser.prototype.isRangeDash = function() {\n            return this.peekChar() === \"-\" && this.isClassAtom(1)\n        }\n\n        RegExpParser.prototype.isDigit = function() {\n            return decimalPattern.test(this.peekChar(0))\n        }\n\n        RegExpParser.prototype.isClassAtom = function(howMuch) {\n            if (howMuch === undefined) {\n                howMuch = 0\n            }\n\n            switch (this.peekChar(howMuch)) {\n                case \"]\":\n                case \"\\n\":\n                case \"\\r\":\n                case \"\\u2028\":\n                case \"\\u2029\":\n                    return false\n                default:\n                    return true\n            }\n        }\n\n        RegExpParser.prototype.isTerm = function() {\n            return this.isAtom() || this.isAssertion()\n        }\n\n        RegExpParser.prototype.isAtom = function() {\n            if (this.isPatternCharacter()) {\n                return true\n            }\n\n            switch (this.peekChar(0)) {\n                case \".\":\n                case \"\\\\\": // atomEscape\n                case \"[\": // characterClass\n                // TODO: isAtom must be called before isAssertion - disambiguate\n                case \"(\": // group\n                    return true\n                default:\n                    return false\n            }\n        }\n\n        RegExpParser.prototype.isAssertion = function() {\n            switch (this.peekChar(0)) {\n                case \"^\":\n                case \"$\":\n                    return true\n                // '\\b' or '\\B'\n                case \"\\\\\":\n                    switch (this.peekChar(1)) {\n                        case \"b\":\n                        case \"B\":\n                            return true\n                        default:\n                            return false\n                    }\n                // '(?=' or '(?!'\n                case \"(\":\n                    return (\n                        this.peekChar(1) === \"?\" &&\n                        (this.peekChar(2) === \"=\" || this.peekChar(2) === \"!\")\n                    )\n                default:\n                    return false\n            }\n        }\n\n        RegExpParser.prototype.isQuantifier = function() {\n            var prevState = this.saveState()\n            try {\n                return this.quantifier(true) !== undefined\n            } catch (e) {\n                return false\n            } finally {\n                this.restoreState(prevState)\n            }\n        }\n\n        RegExpParser.prototype.isPatternCharacter = function() {\n            switch (this.peekChar()) {\n                case \"^\":\n                case \"$\":\n                case \"\\\\\":\n                case \".\":\n                case \"*\":\n                case \"+\":\n                case \"?\":\n                case \"(\":\n                case \")\":\n                case \"[\":\n                case \"|\":\n                case \"/\":\n                case \"\\n\":\n                case \"\\r\":\n                case \"\\u2028\":\n                case \"\\u2029\":\n                    return false\n                default:\n                    return true\n            }\n        }\n\n        RegExpParser.prototype.parseHexDigits = function(howMany) {\n            var hexString = \"\"\n            for (var i = 0; i < howMany; i++) {\n                var hexChar = this.popChar()\n                if (hexDigitPattern.test(hexChar) === false) {\n                    throw Error(\"Expecting a HexDecimal digits\")\n                }\n                hexString += hexChar\n            }\n            var charCode = parseInt(hexString, 16)\n            return { type: \"Character\", value: charCode }\n        }\n\n        RegExpParser.prototype.peekChar = function(howMuch) {\n            if (howMuch === undefined) {\n                howMuch = 0\n            }\n            return this.input[this.idx + howMuch]\n        }\n\n        RegExpParser.prototype.popChar = function() {\n            var nextChar = this.peekChar(0)\n            this.consumeChar()\n            return nextChar\n        }\n\n        RegExpParser.prototype.consumeChar = function(char) {\n            if (char !== undefined && this.input[this.idx] !== char) {\n                throw Error(\n                    \"Expected: '\" +\n                        char +\n                        \"' but found: '\" +\n                        this.input[this.idx] +\n                        \"' at offset: \" +\n                        this.idx\n                )\n            }\n\n            if (this.idx >= this.input.length) {\n                throw Error(\"Unexpected end of input\")\n            }\n            this.idx++\n        }\n\n        RegExpParser.prototype.loc = function(begin) {\n            return { begin: begin, end: this.idx }\n        }\n\n        // consts and utilities\n        var hexDigitPattern = /[0-9a-fA-F]/\n        var decimalPattern = /[0-9]/\n        var decimalPatternNoZero = /[1-9]/\n\n        function cc(char) {\n            return char.charCodeAt(0)\n        }\n\n        function insertToSet(item, set) {\n            if (item.length !== undefined) {\n                item.forEach(function(subItem) {\n                    set.push(subItem)\n                })\n            } else {\n                set.push(item)\n            }\n        }\n\n        function addFlag(flagObj, flagKey) {\n            if (flagObj[flagKey] === true) {\n                throw \"duplicate flag \" + flagKey\n            }\n\n            flagObj[flagKey] = true\n        }\n\n        function ASSERT_EXISTS(obj) {\n            // istanbul ignore next\n            if (obj === undefined) {\n                throw Error(\"Internal Error - Should never get here!\")\n            }\n        }\n\n        // istanbul ignore next\n        function ASSERT_NEVER_REACH_HERE() {\n            throw Error(\"Internal Error - Should never get here!\")\n        }\n\n        var i\n        var digitsCharCodes = []\n        for (i = cc(\"0\"); i <= cc(\"9\"); i++) {\n            digitsCharCodes.push(i)\n        }\n\n        var wordCharCodes = [cc(\"_\")].concat(digitsCharCodes)\n        for (i = cc(\"a\"); i <= cc(\"z\"); i++) {\n            wordCharCodes.push(i)\n        }\n\n        for (i = cc(\"A\"); i <= cc(\"Z\"); i++) {\n            wordCharCodes.push(i)\n        }\n\n        // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp#character-classes\n        var whitespaceCodes = [\n            cc(\" \"),\n            cc(\"\\f\"),\n            cc(\"\\n\"),\n            cc(\"\\r\"),\n            cc(\"\\t\"),\n            cc(\"\\v\"),\n            cc(\"\\t\"),\n            cc(\"\\u00a0\"),\n            cc(\"\\u1680\"),\n            cc(\"\\u2000\"),\n            cc(\"\\u2001\"),\n            cc(\"\\u2002\"),\n            cc(\"\\u2003\"),\n            cc(\"\\u2004\"),\n            cc(\"\\u2005\"),\n            cc(\"\\u2006\"),\n            cc(\"\\u2007\"),\n            cc(\"\\u2008\"),\n            cc(\"\\u2009\"),\n            cc(\"\\u200a\"),\n            cc(\"\\u2028\"),\n            cc(\"\\u2029\"),\n            cc(\"\\u202f\"),\n            cc(\"\\u205f\"),\n            cc(\"\\u3000\"),\n            cc(\"\\ufeff\")\n        ]\n\n        function BaseRegExpVisitor() {}\n\n        BaseRegExpVisitor.prototype.visitChildren = function(node) {\n            for (var key in node) {\n                var child = node[key]\n                /* istanbul ignore else */\n                if (node.hasOwnProperty(key)) {\n                    if (child.type !== undefined) {\n                        this.visit(child)\n                    } else if (Array.isArray(child)) {\n                        child.forEach(function(subChild) {\n                            this.visit(subChild)\n                        }, this)\n                    }\n                }\n            }\n        }\n\n        BaseRegExpVisitor.prototype.visit = function(node) {\n            switch (node.type) {\n                case \"Pattern\":\n                    this.visitPattern(node)\n                    break\n                case \"Flags\":\n                    this.visitFlags(node)\n                    break\n                case \"Disjunction\":\n                    this.visitDisjunction(node)\n                    break\n                case \"Alternative\":\n                    this.visitAlternative(node)\n                    break\n                case \"StartAnchor\":\n                    this.visitStartAnchor(node)\n                    break\n                case \"EndAnchor\":\n                    this.visitEndAnchor(node)\n                    break\n                case \"WordBoundary\":\n                    this.visitWordBoundary(node)\n                    break\n                case \"NonWordBoundary\":\n                    this.visitNonWordBoundary(node)\n                    break\n                case \"Lookahead\":\n                    this.visitLookahead(node)\n                    break\n                case \"NegativeLookahead\":\n                    this.visitNegativeLookahead(node)\n                    break\n                case \"Character\":\n                    this.visitCharacter(node)\n                    break\n                case \"Set\":\n                    this.visitSet(node)\n                    break\n                case \"Group\":\n                    this.visitGroup(node)\n                    break\n                case \"GroupBackReference\":\n                    this.visitGroupBackReference(node)\n                    break\n                case \"Quantifier\":\n                    this.visitQuantifier(node)\n                    break\n            }\n\n            this.visitChildren(node)\n        }\n\n        BaseRegExpVisitor.prototype.visitPattern = function(node) {}\n\n        BaseRegExpVisitor.prototype.visitFlags = function(node) {}\n\n        BaseRegExpVisitor.prototype.visitDisjunction = function(node) {}\n\n        BaseRegExpVisitor.prototype.visitAlternative = function(node) {}\n\n        // Assertion\n        BaseRegExpVisitor.prototype.visitStartAnchor = function(node) {}\n\n        BaseRegExpVisitor.prototype.visitEndAnchor = function(node) {}\n\n        BaseRegExpVisitor.prototype.visitWordBoundary = function(node) {}\n\n        BaseRegExpVisitor.prototype.visitNonWordBoundary = function(node) {}\n\n        BaseRegExpVisitor.prototype.visitLookahead = function(node) {}\n\n        BaseRegExpVisitor.prototype.visitNegativeLookahead = function(node) {}\n\n        // atoms\n        BaseRegExpVisitor.prototype.visitCharacter = function(node) {}\n\n        BaseRegExpVisitor.prototype.visitSet = function(node) {}\n\n        BaseRegExpVisitor.prototype.visitGroup = function(node) {}\n\n        BaseRegExpVisitor.prototype.visitGroupBackReference = function(node) {}\n\n        BaseRegExpVisitor.prototype.visitQuantifier = function(node) {}\n\n        return {\n            RegExpParser: RegExpParser,\n            BaseRegExpVisitor: BaseRegExpVisitor,\n            VERSION: \"0.5.0\"\n        }\n    }\n)\n","var arrayFilter = require('./_arrayFilter'),\n    baseFilter = require('./_baseFilter'),\n    baseIteratee = require('./_baseIteratee'),\n    isArray = require('./isArray'),\n    negate = require('./negate');\n\n/**\n * The opposite of `_.filter`; this method returns the elements of `collection`\n * that `predicate` does **not** return truthy for.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n * @see _.filter\n * @example\n *\n * var users = [\n *   { 'user': 'barney', 'age': 36, 'active': false },\n *   { 'user': 'fred',   'age': 40, 'active': true }\n * ];\n *\n * _.reject(users, function(o) { return !o.active; });\n * // => objects for ['fred']\n *\n * // The `_.matches` iteratee shorthand.\n * _.reject(users, { 'age': 40, 'active': true });\n * // => objects for ['barney']\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.reject(users, ['active', false]);\n * // => objects for ['fred']\n *\n * // The `_.property` iteratee shorthand.\n * _.reject(users, 'active');\n * // => objects for ['barney']\n */\nfunction reject(collection, predicate) {\n  var func = isArray(collection) ? arrayFilter : baseFilter;\n  return func(collection, negate(baseIteratee(predicate, 3)));\n}\n\nmodule.exports = reject;\n","var baseDifference = require('./_baseDifference'),\n    baseFlatten = require('./_baseFlatten'),\n    baseRest = require('./_baseRest'),\n    isArrayLikeObject = require('./isArrayLikeObject');\n\n/**\n * Creates an array of `array` values not included in the other given arrays\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons. The order and references of result values are\n * determined by the first array.\n *\n * **Note:** Unlike `_.pullAll`, this method returns a new array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {...Array} [values] The values to exclude.\n * @returns {Array} Returns the new array of filtered values.\n * @see _.without, _.xor\n * @example\n *\n * _.difference([2, 1], [2, 3]);\n * // => [1]\n */\nvar difference = baseRest(function(array, values) {\n  return isArrayLikeObject(array)\n    ? baseDifference(array, baseFlatten(values, 1, isArrayLikeObject, true))\n    : [];\n});\n\nmodule.exports = difference;\n","var createFind = require('./_createFind'),\n    findIndex = require('./findIndex');\n\n/**\n * Iterates over elements of `collection`, returning the first element\n * `predicate` returns truthy for. The predicate is invoked with three\n * arguments: (value, index|key, collection).\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to inspect.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @param {number} [fromIndex=0] The index to search from.\n * @returns {*} Returns the matched element, else `undefined`.\n * @example\n *\n * var users = [\n *   { 'user': 'barney',  'age': 36, 'active': true },\n *   { 'user': 'fred',    'age': 40, 'active': false },\n *   { 'user': 'pebbles', 'age': 1,  'active': true }\n * ];\n *\n * _.find(users, function(o) { return o.age < 40; });\n * // => object for 'barney'\n *\n * // The `_.matches` iteratee shorthand.\n * _.find(users, { 'age': 1, 'active': true });\n * // => object for 'pebbles'\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.find(users, ['active', false]);\n * // => object for 'fred'\n *\n * // The `_.property` iteratee shorthand.\n * _.find(users, 'active');\n * // => object for 'barney'\n */\nvar find = createFind(findIndex);\n\nmodule.exports = find;\n","var arrayFilter = require('./_arrayFilter'),\n    baseFilter = require('./_baseFilter'),\n    baseIteratee = require('./_baseIteratee'),\n    isArray = require('./isArray');\n\n/**\n * Iterates over elements of `collection`, returning an array of all elements\n * `predicate` returns truthy for. The predicate is invoked with three\n * arguments: (value, index|key, collection).\n *\n * **Note:** Unlike `_.remove`, this method returns a new array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n * @see _.reject\n * @example\n *\n * var users = [\n *   { 'user': 'barney', 'age': 36, 'active': true },\n *   { 'user': 'fred',   'age': 40, 'active': false }\n * ];\n *\n * _.filter(users, function(o) { return !o.active; });\n * // => objects for ['fred']\n *\n * // The `_.matches` iteratee shorthand.\n * _.filter(users, { 'age': 36, 'active': true });\n * // => objects for ['barney']\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.filter(users, ['active', false]);\n * // => objects for ['fred']\n *\n * // The `_.property` iteratee shorthand.\n * _.filter(users, 'active');\n * // => objects for ['barney']\n *\n * // Combining several predicates using `_.overEvery` or `_.overSome`.\n * _.filter(users, _.overSome([{ 'age': 36 }, ['age', 40]]));\n * // => objects for ['fred', 'barney']\n */\nfunction filter(collection, predicate) {\n  var func = isArray(collection) ? arrayFilter : baseFilter;\n  return func(collection, baseIteratee(predicate, 3));\n}\n\nmodule.exports = filter;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.clearRegExpParserCache = exports.getRegExpAst = void 0;\nvar regexp_to_ast_1 = require(\"regexp-to-ast\");\nvar regExpAstCache = {};\nvar regExpParser = new regexp_to_ast_1.RegExpParser();\nfunction getRegExpAst(regExp) {\n    var regExpStr = regExp.toString();\n    if (regExpAstCache.hasOwnProperty(regExpStr)) {\n        return regExpAstCache[regExpStr];\n    }\n    else {\n        var regExpAst = regExpParser.pattern(regExpStr);\n        regExpAstCache[regExpStr] = regExpAst;\n        return regExpAst;\n    }\n}\nexports.getRegExpAst = getRegExpAst;\nfunction clearRegExpParserCache() {\n    regExpAstCache = {};\n}\nexports.clearRegExpParserCache = clearRegExpParserCache;\n","/**\n * Gets the last element of `array`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to query.\n * @returns {*} Returns the last element of `array`.\n * @example\n *\n * _.last([1, 2, 3]);\n * // => 3\n */\nfunction last(array) {\n  var length = array == null ? 0 : array.length;\n  return length ? array[length - 1] : undefined;\n}\n\nmodule.exports = last;\n","var baseSlice = require('./_baseSlice'),\n    toInteger = require('./toInteger');\n\n/**\n * Creates a slice of `array` with `n` elements dropped from the end.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Array\n * @param {Array} array The array to query.\n * @param {number} [n=1] The number of elements to drop.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n * @returns {Array} Returns the slice of `array`.\n * @example\n *\n * _.dropRight([1, 2, 3]);\n * // => [1, 2]\n *\n * _.dropRight([1, 2, 3], 2);\n * // => [1]\n *\n * _.dropRight([1, 2, 3], 5);\n * // => []\n *\n * _.dropRight([1, 2, 3], 0);\n * // => [1, 2, 3]\n */\nfunction dropRight(array, n, guard) {\n  var length = array == null ? 0 : array.length;\n  if (!length) {\n    return [];\n  }\n  n = (guard || n === undefined) ? 1 : toInteger(n);\n  n = length - n;\n  return baseSlice(array, 0, n < 0 ? 0 : n);\n}\n\nmodule.exports = dropRight;\n","\"use strict\";\n// Lookahead keys are 32Bit integers in the form\n// TTTTTTTT-ZZZZZZZZZZZZ-YYYY-XXXXXXXX\n// XXXX -> Occurrence Index bitmap.\n// YYYY -> DSL Method Type bitmap.\n// ZZZZZZZZZZZZZZZ -> Rule short Index bitmap.\n// TTTTTTTTT -> alternation alternative index bitmap\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getKeyForAutomaticLookahead = exports.AT_LEAST_ONE_SEP_IDX = exports.MANY_SEP_IDX = exports.AT_LEAST_ONE_IDX = exports.MANY_IDX = exports.OPTION_IDX = exports.OR_IDX = exports.BITS_FOR_ALT_IDX = exports.BITS_FOR_RULE_IDX = exports.BITS_FOR_OCCURRENCE_IDX = exports.BITS_FOR_METHOD_TYPE = void 0;\nexports.BITS_FOR_METHOD_TYPE = 4;\nexports.BITS_FOR_OCCURRENCE_IDX = 8;\nexports.BITS_FOR_RULE_IDX = 12;\n// TODO: validation, this means that there may at most 2^8 --> 256 alternatives for an alternation.\nexports.BITS_FOR_ALT_IDX = 8;\n// short string used as part of mapping keys.\n// being short improves the performance when composing KEYS for maps out of these\n// The 5 - 8 bits (16 possible values, are reserved for the DSL method indices)\nexports.OR_IDX = 1 << exports.BITS_FOR_OCCURRENCE_IDX;\nexports.OPTION_IDX = 2 << exports.BITS_FOR_OCCURRENCE_IDX;\nexports.MANY_IDX = 3 << exports.BITS_FOR_OCCURRENCE_IDX;\nexports.AT_LEAST_ONE_IDX = 4 << exports.BITS_FOR_OCCURRENCE_IDX;\nexports.MANY_SEP_IDX = 5 << exports.BITS_FOR_OCCURRENCE_IDX;\nexports.AT_LEAST_ONE_SEP_IDX = 6 << exports.BITS_FOR_OCCURRENCE_IDX;\n// this actually returns a number, but it is always used as a string (object prop key)\nfunction getKeyForAutomaticLookahead(ruleIdx, dslMethodIdx, occurrence) {\n    return occurrence | dslMethodIdx | ruleIdx;\n}\nexports.getKeyForAutomaticLookahead = getKeyForAutomaticLookahead;\nvar BITS_START_FOR_ALT_IDX = 32 - exports.BITS_FOR_ALT_IDX;\n","/** Used to compose unicode character classes. */\nvar rsAstralRange = '\\\\ud800-\\\\udfff',\n    rsComboMarksRange = '\\\\u0300-\\\\u036f',\n    reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,\n    rsVarRange = '\\\\ufe0e\\\\ufe0f';\n\n/** Used to compose unicode capture groups. */\nvar rsZWJ = '\\\\u200d';\n\n/** Used to detect strings with [zero-width joiners or code points from the astral planes](http://eev.ee/blog/2015/09/12/dark-corners-of-unicode/). */\nvar reHasUnicode = RegExp('[' + rsZWJ + rsAstralRange  + rsComboRange + rsVarRange + ']');\n\n/**\n * Checks if `string` contains Unicode symbols.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {boolean} Returns `true` if a symbol is found, else `false`.\n */\nfunction hasUnicode(string) {\n  return reHasUnicode.test(string);\n}\n\nmodule.exports = hasUnicode;\n","export const defaultHeaderItems = [\"add\", \"delete\", \"moveUp\", \"moveDown\", \"refresh\"];\r\nexport const headerItemsData = [{\r\n    type: \"add\",\r\n    cls: \"text-add-tip-font\",\r\n    title: \"BI-Basic_Parameter_Insert\",\r\n    event: \"EVENT_INSERT\",\r\n}, {\r\n    type: \"delete\",\r\n    cls: \"close-font bi-error\",\r\n    title: \"BI-Basic_Parameter_Delete\",\r\n    event: \"EVENT_DELETE\",\r\n}, {\r\n    type: \"moveUp\",\r\n    cls: \"add-up-font\",\r\n    title: \"BI-Basic_Parameter_Move_Up\",\r\n    event: \"EVENT_MOVE_UP\",\r\n}, {\r\n    type: \"moveDown\",\r\n    cls: \"minus-down-font\",\r\n    title: \"BI-Basic_Parameter_Move_Down\",\r\n    event: \"EVENT_MOVE_DOWN\",\r\n}, {\r\n    type: \"refresh\",\r\n    cls: \"parameter-refresh-font\",\r\n    title: \"BI-Basic_Parameter_Refresh\",\r\n    event: \"EVENT_REFRESH\",\r\n}];\r\n","import { allTokens } from \"./token\";\r\nimport { Lexer } from \"chevrotain\";\r\nimport getFormulaParser from \"./FormulaParser\";\r\nimport getFormulaInterpreter from \"./FormulaInterpreter\";\r\nimport FunctionCheck from \"./FunctionCheck\";\r\nimport get from \"lodash/get\";\r\n\r\n/**\r\n * 表单公式计算\r\n */\r\nclass FormulaCheck {\r\n  setFormula() {}\r\n\r\n  constructor(checker) {\r\n    this.checker = checker;\r\n    this.lexer = new Lexer(allTokens, {\r\n      ensureOptimizations: true\r\n    });\r\n    this.parser = getFormulaParser();\r\n    const { interpreter, setFormula } = getFormulaInterpreter();\r\n    this.interpreter = interpreter;\r\n    this.setFormula = setFormula;\r\n  }\r\n\r\n  parse(input) {\r\n    // 设置公式对象\r\n    this.setFormula(new FunctionCheck(this.checker));\r\n    // 词法分析，产生tokens\r\n    const lexResult = this.lexer.tokenize(input);\r\n    if (lexResult.errors.length > 0) {\r\n      const error = lexResult.errors[0];\r\n      throw new Error(\r\n        JSON.stringify({\r\n          type: \"lexer\",\r\n          name: error.message,\r\n          token: get(error.message.match(/->(.)<-/), [1], \"\"),\r\n          errorText: BI.i18nText('BI-Expression_syntax_error'),\r\n        })\r\n      );\r\n    }\r\n    // 将tokens传入parser，生成具体语法树\r\n    this.parser.input = lexResult.tokens;\r\n    const cst = this.parser.expr();\r\n    if (this.parser.errors.length > 0) {\r\n      const error = this.parser.errors[0];\r\n      throw new Error(\r\n        JSON.stringify({\r\n          type: \"parser\",\r\n          name: error.name,\r\n          token: get(\r\n            error.message.match(/->\\s(\\w+)\\s<-/),\r\n            [1],\r\n            get(error, \"previousToken.image\") || get(error, \"token.image\")\r\n          ),\r\n          errorText: BI.i18nText('BI-Expression_syntax_error'),\r\n        })\r\n      );\r\n    }\r\n    // 遍历语法树，产生解析结果\r\n    return this.interpreter.visit(cst);\r\n  }\r\n}\r\n\r\nexport default FormulaCheck;\r\n","import size from \"lodash/size\";\r\nimport forEach from \"lodash/forEach\";\r\nimport isUndefined from \"lodash/isUndefined\";\r\nimport { isStringType, isNumberType, isBooleanType, isDateType, isAnyType, isArrayType } from \"./FormulaInterpreter\"\r\n\r\nexport default class FunctionCheck {\r\n\r\n    constructor (tempCheckers) {\r\n        const self = this;\r\n        [\"ABS\", \"ACOS\", \"ASIN\", \"ATAN\", \"ATAN2\", \"CEILING\", \"COS\", \"DEGREES\", \"EXP\", \"FACT\", \"FLOOR\", \"INT\", \"LN\", \"LOG10\", \"PI\", \"RADIANS\", \"SIGN\", \"SIN\", \"SORT\", \"TAN\"].forEach((name) => {\r\n            self[name] = self[name.toLowerCase()] = function () {\r\n                checkParamsType({\r\n                    name,\r\n                    params: arguments,\r\n                    checkFunction: param => {\r\n                        return isNumberType(param);\r\n                    },\r\n                    paramCount: 1,\r\n                    paramType: [\"number\"],\r\n                    errorText: BI.i18nText('BI-Front-Expression_param_number', name),\r\n                });\r\n                return \"number\";\r\n            };\r\n        });\r\n        [\"MOD\", \"POWER\", \"PROMOTION\", \"RANBETWEEN\", \"ROUND\", \"SIGN\", \"SIN\", \"SORT\", \"TAN\"].forEach((name) => {\r\n            self[name] = self[name.toLowerCase()] = function () {\r\n                checkParamsType({\r\n                    name,\r\n                    params: arguments,\r\n                    checkFunction: param => {\r\n                        return isNumberType(param);\r\n                    },\r\n                    paramCount: 2,\r\n                    paramType: [\"number\", \"number\"],\r\n                    errorText: BI.i18nText(\"BI-Front-Expression_param_two_number\", name),\r\n                });\r\n                return \"number\";\r\n            };\r\n        });\r\n\r\n        const checkers = BI.Providers.getProvider(\"bi.formula_editor.checker\");\r\n        BI.each(checkers, function (name, checker) {\r\n            self[name] = self[name.toLowerCase()] = checker;\r\n        });\r\n\r\n        BI.each(tempCheckers, function (name, checker) {\r\n            self[name] = self[name.toLowerCase()] = checker;\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 数学函数－对数\r\n     *\r\n     * @returns {boolean}\r\n     */\r\n    LOG = function () {\r\n        checkParamsType({\r\n            name: \"LOG\",\r\n            params: arguments,\r\n            checkFunction: param => {\r\n                return isNumberType(param);\r\n            },\r\n            minCount: 1,\r\n            optionalCount: 1,\r\n            paramType: [[\"number\"], [\"number\", \"number\"]],\r\n            errorText: BI.i18nText('BI-Front-Expression_param_number_number_default', \"LOG\"),\r\n        });\r\n        return \"number\";\r\n    };\r\n\r\n    log = this.LOG;\r\n\r\n    /**\r\n     * 数学运算－最大值\r\n     *\r\n     * @returns {number}\r\n     */\r\n    MAX = function () {\r\n        checkParamsType({\r\n            name: \"MAX\",\r\n            params: arguments,\r\n            checkFunction: param => {\r\n                return isNumberType(param) || isArrayType(param);\r\n            },\r\n            minCount: 1,\r\n            paramType: [\"number\", [\"array\"]],\r\n            errorText: BI.i18nText('BI-Front-Expression_param_all_number', \"MAX\"),\r\n        });\r\n        return \"number\";\r\n    };\r\n\r\n    max = this.MAX;\r\n\r\n    /**\r\n     * 数学运算－最小值\r\n     *\r\n     * @returns {number}\r\n     */\r\n    MIN = function () {\r\n        checkParamsType({\r\n            name: \"MIN\",\r\n            params: arguments,\r\n            checkFunction: param => {\r\n                return isNumberType(param) || isArrayType(param);\r\n            },\r\n            minCount: 1,\r\n            paramType: [\"number\", [\"array\"]],\r\n            errorText: BI.i18nText('BI-Front-Expression_param_all_number', \"MIN\"),\r\n        });\r\n        return \"number\";\r\n    };\r\n\r\n    min = this.MIN;\r\n\r\n    /**\r\n     * 数学运算－返回一个随机数\r\n     *\r\n     * @returns {number}\r\n     */\r\n    RAND = function () {\r\n        checkParamsType({\r\n            name: \"RAND\",\r\n            params: arguments,\r\n            paramCount: 0,\r\n            errorText: BI.i18nText('BI-Front-Expression_param_none', \"RAND\"),\r\n        });\r\n        return \"number\";\r\n    };\r\n\r\n    rand = this.RAND;\r\n\r\n    /**\r\n     * 数学函数－对数\r\n     *\r\n     * @returns {boolean}\r\n     */\r\n    TRUNC = function () {\r\n        checkParamsType({\r\n            name: \"TRUNC\",\r\n            params: arguments,\r\n            checkFunction: param => {\r\n                return isNumberType(param);\r\n            },\r\n            minCount: 1,\r\n            optionalCount: 1,\r\n            paramType: [[\"number\"], [\"number\", \"number\"]],\r\n            errorText: BI.i18nText('BI-Front-Expression_param_number_number_default', \"TRUNC\"),\r\n        });\r\n        return \"number\";\r\n    };\r\n\r\n    trunc = this.TRUNC;\r\n\r\n    /**\r\n     * 将时间戳转换为日期对象\r\n     *\r\n     * @returns {Date}\r\n     */\r\n    DATE = function () {\r\n        checkParamsType({\r\n            name: \"DATE\",\r\n            params: arguments,\r\n            checkFunction: param => {\r\n                return isNumberType(param) || isStringType(param);\r\n            },\r\n            paramCount: 3,\r\n            paramType: [[\"number\", \"string\"], [\"number\", \"string\"], [\"number\", \"string\"]],\r\n            errorText: BI.i18nText('BI-Front-Expression_param_multi_number_or_text', \"DATE\"),\r\n        });\r\n        return \"date\";\r\n    };\r\n\r\n    date = this.DATE;\r\n\r\n    /**\r\n     * 将指定日期加/减指定天数\r\n     *\r\n     * @returns {number}\r\n     */\r\n    DATEDELTA = function () {\r\n        checkParamsType({\r\n            name: \"DATEDELTA\",\r\n            params: arguments,\r\n            checkFunction: (param, index) => {\r\n                if (index === 0) {\r\n                    return isStringType(param) || isDateType(param);\r\n                }\r\n                return isNumberType(param);\r\n            },\r\n            paramCount: 2,\r\n            paramType: [[\"string\", \"date\"], [\"number\"]],\r\n            errorText: BI.i18nText('BI-Front-Expression_param_date_or_text_number', 'DATEDELTA'),\r\n        });\r\n        return \"date\";\r\n    };\r\n\r\n    datedelta = this.DATEDELTA;\r\n\r\n    /**\r\n     * 计算出两个时间的差值\r\n     *\r\n     * @returns {number}\r\n     */\r\n    DATEDIF = function () {\r\n        checkParamsType({\r\n            name: \"DATEDIF\",\r\n            params: arguments,\r\n            checkFunction: (param, index) => {\r\n                if (index === 2) {\r\n                    return isStringType(param);\r\n                }\r\n                return isStringType(param) || isDateType(param);\r\n            },\r\n            paramCount: 3,\r\n            paramType: [[\"string\", \"date\"], [\"string\", \"date\"], [\"number\"]],\r\n            errorText: BI.i18nText('BI-Front-Expression_param_two_date_text_and_text', \"DATEDIF\"),\r\n        });\r\n        return \"number\";\r\n    };\r\n\r\n    datedif = this.DATEDIF;\r\n\r\n    /**\r\n     * 计算出两个时间的时间差\r\n     *\r\n     * @returns {number}\r\n     */\r\n    DATESUBDATE = function () {\r\n        checkParamsType({\r\n            name: \"DATESUBDATE\",\r\n            params: arguments,\r\n            checkFunction: (param, index) => {\r\n                if (index === 2) {\r\n                    return isStringType(param);\r\n                }\r\n                return isStringType(param) || isDateType(param);\r\n            },\r\n            paramCount: 3,\r\n            paramType: [[\"string\", \"date\"], [\"string\", \"date\"], [\"number\"]],\r\n            errorText: BI.i18nText('BI-Front-Expression_param_two_date_text_and_text', 'DATESUBDATE'),\r\n        });\r\n        return \"number\";\r\n    };\r\n\r\n    datesubdate = this.DATESUBDATE;\r\n\r\n    /**\r\n     * 计算出两个时间的时间差\r\n     *\r\n     * @returns {number}\r\n     */\r\n    DATETONUMBER = function () {\r\n        checkParamsType({\r\n            name: \"DATETONUMBER\",\r\n            params: arguments,\r\n            checkFunction: param => {\r\n                return isStringType(param) || isDateType(param);\r\n            },\r\n            paramCount: 1,\r\n            paramType: [[\"string\", \"date\"]],\r\n            errorText: BI.i18nText('BI-Front-Expression_param_one_date_or_text', 'DATETONUMBER'),\r\n        });\r\n        return \"number\";\r\n    };\r\n\r\n    datetonumber = this.DATETONUMBER;\r\n\r\n    /**\r\n     * 返回某日期的天数\r\n     *\r\n     * @returns {number}\r\n     */\r\n    DAY = function () {\r\n        checkParamsType({\r\n            name: \"DAY\",\r\n            params: arguments,\r\n            checkFunction: (param, index) => {\r\n                if (index === 0) {\r\n                    return isStringType(param) || isDateType(param);\r\n                }\r\n                return isStringType(param);\r\n            },\r\n            minCount: 0,\r\n            optionalCount: 2,\r\n            paramType: [[], [[\"string\", \"date\"]], [[\"string\", \"date\"], [\"string\"]]],\r\n            errorText: BI.i18nText('BI-Front-Expression_param_date_precision', 'DAY'),\r\n        });\r\n        return \"number\";\r\n    };\r\n\r\n    day = this.DAY;\r\n\r\n    /**\r\n     * 360 天的算法函数返回两个日期间相差的天数\r\n     *\r\n     * @returns {number}\r\n     */\r\n    DAYS360 = function () {\r\n        checkParamsType({\r\n            name: \"DAYS360\",\r\n            params: arguments,\r\n            checkFunction: (param, index) => {\r\n                if (index === 2) {\r\n                    return isStringType(param) || isNumberType(param) || isBooleanType(param);\r\n                }\r\n                return isStringType(param) || isDateType(param);\r\n            },\r\n            minCount: 2,\r\n            paramType: [[\"string\", \"date\"], [\"string\", \"date\"], [\"string\", \"number\"]],\r\n            errorText: BI.i18nText('BI-Front-Expression_param_two_dateText_textNumber_default', 'DAYS360'),\r\n        });\r\n        return \"number\";\r\n    };\r\n\r\n    days360 = this.DAYS360;\r\n\r\n    /**\r\n     * 返回某年某月包含的天数\r\n     *\r\n     * @returns {number}\r\n     */\r\n    DAYSOFMONTH = function () {\r\n        checkParamsType({\r\n            name: \"DAYSOFMONTH\",\r\n            params: arguments,\r\n            checkFunction: param => {\r\n                return isStringType(param) || isDateType(param);\r\n            },\r\n            paramCount: 1,\r\n            paramType: [[\"string\", \"date\"]],\r\n            errorText: BI.i18nText('BI-Front-Expression_param_one_date_or_text', 'DAYSOFMONTH'),\r\n        });\r\n        return \"number\";\r\n    };\r\n\r\n    daysofmonth = this.DAYSOFMONTH;\r\n\r\n    /**\r\n     * 返回某年某季度包含的天数\r\n     *\r\n     * @returns {number}\r\n     */\r\n    DAYSOFQUARTER = function () {\r\n        checkParamsType({\r\n            name: \"DAYSOFQUARTER\",\r\n            params: arguments,\r\n            checkFunction: param => {\r\n                return isStringType(param) || isDateType(param);\r\n            },\r\n            paramCount: 1,\r\n            paramType: [[\"string\", \"date\"]],\r\n            errorText: BI.i18nText('BI-Front-Expression_param_one_date_or_text', 'DAYSOFQUARTER'),\r\n        });\r\n        return \"number\";\r\n    };\r\n\r\n    daysofquarter = this.DAYSOFQUARTER;\r\n\r\n    /**\r\n     * 返回某年包含的天数\r\n     *\r\n     * @returns {number}\r\n     */\r\n    DAYVALUE = function () {\r\n        checkParamsType({\r\n            name: \"DAYVALUE\",\r\n            params: arguments,\r\n            checkFunction: param => {\r\n                return isStringType(param) || isDateType(param);\r\n            },\r\n            paramCount: 1,\r\n            paramType: [[\"string\", \"date\"]],\r\n            errorText: BI.i18nText('BI-Front-Expression_param_one_date_or_text', 'DAYVALUE'),\r\n        });\r\n        return \"number\";\r\n    };\r\n\r\n    dayvalue = this.DAYVALUE;\r\n\r\n    /**\r\n     * 返回某日期的小时数\r\n     *\r\n     * @returns {number}\r\n     */\r\n    HOUR = function () {\r\n        checkParamsType({\r\n            name: \"HOUR\",\r\n            params: arguments,\r\n            checkFunction: (param, index) => {\r\n                if (index === 1) {\r\n                    return isStringType(param);\r\n                }\r\n                return isStringType(param) || isDateType(param);\r\n            },\r\n            minCount: 0,\r\n            optionalCount: 2,\r\n            paramType: [[], [[\"string\", \"number\"]], [[\"string\", \"number\"], [\"string\"]]],\r\n            errorText: BI.i18nText('BI-Front-Expression_param_date_precision', 'HOUR'),\r\n        });\r\n        return \"number\";\r\n    };\r\n\r\n    hour = this.HOUR;\r\n\r\n    /**\r\n     * 返回农历日期\r\n     *\r\n     * @returns {number}\r\n     */\r\n    LUNAR = function () {\r\n        checkParamsType({\r\n            name: \"LUNAR\",\r\n            params: arguments,\r\n            checkFunction: param => {\r\n                return isNumberType(param) || isStringType(param);\r\n            },\r\n            paramCount: 3,\r\n            paramType: [[\"string\", \"number\"], [\"string\", \"number\"], [\"string\", \"number\"]],\r\n            errorText: BI.i18nText('BI-Front-Expression_param_multi_number_or_text', 'LUNAR'),\r\n        });\r\n        return \"string\";\r\n    };\r\n\r\n    lunar = this.LUNAR;\r\n\r\n    /**\r\n     * 返回某日期的分钟数\r\n     *\r\n     * @returns {number}\r\n     */\r\n    MINUTE = function () {\r\n        checkParamsType({\r\n            name: \"MINUTE\",\r\n            params: arguments,\r\n            checkFunction: (param, index) => {\r\n                if (index === 1) {\r\n                    return isStringType(param);\r\n                }\r\n                return isStringType(param) || isDateType(param);\r\n            },\r\n            minCount: 0,\r\n            optionalCount: 2,\r\n            paramType: [[], [[\"string\", \"date\"]], [[\"string\", \"date\"], [\"string\"]]],\r\n            errorText: BI.i18nText('BI-Front-Expression_param_date_precision', 'MINUTE'),\r\n        });\r\n        return \"number\";\r\n    };\r\n\r\n    minute = this.MINUTE;\r\n\r\n    /**\r\n     * 返回某日期的月数\r\n     *\r\n     * @returns {number}\r\n     */\r\n    MONTH = function () {\r\n        checkParamsType({\r\n            name: \"MONTH\",\r\n            params: arguments,\r\n            checkFunction: (param, index) => {\r\n                if (index === 1) {\r\n                    return isStringType(param);\r\n                }\r\n                return isStringType(param) || isDateType(param);\r\n            },\r\n            minCount: 0,\r\n            optionalCount: 2,\r\n            paramType: [[], [[\"string\", \"date\"]], [[\"string\", \"date\"], [\"string\"]]],\r\n            errorText: BI.i18nText('BI-Front-Expression_param_date_precision', 'MONTH'),\r\n        });\r\n        return \"number\";\r\n    };\r\n\r\n    month = this.MONTH;\r\n\r\n    /**\r\n     * 返回某日期的月数\r\n     *\r\n     * @returns {number}\r\n     */\r\n    MONTHDELTA = function () {\r\n        checkParamsType({\r\n            name: \"MONTHDELTA\",\r\n            params: arguments,\r\n            checkFunction: (param, index) => {\r\n                if (index === 1) {\r\n                    return isNumberType(param);\r\n                }\r\n                return isStringType(param) || isDateType(param);\r\n            },\r\n            paramCount: 2,\r\n            paramType: [[\"string\", \"date\"], [\"number\"]],\r\n            errorText: BI.i18nText('BI-Front-Expression_param_date_or_text_number', 'MONTHDELTA'),\r\n        });\r\n        return \"date\";\r\n    };\r\n\r\n    monthdelta = this.MONTHDELTA;\r\n\r\n    /**\r\n     * 返回当前时间\r\n     *\r\n     * @returns {Date}\r\n     */\r\n    NOW = function () {\r\n        checkParamsType({\r\n            name: \"NOW\",\r\n            params: arguments,\r\n            paramCount: 0,\r\n            errorText: BI.i18nText('BI-Front-Expression_param_none', 'NOW'),\r\n        });\r\n        return \"date\";\r\n    };\r\n\r\n    now = this.NOW;\r\n\r\n    /**\r\n     * 返回某日期的季度\r\n     *\r\n     * @returns {number}\r\n     */\r\n    QUARTER = function () {\r\n        checkParamsType({\r\n            name: \"QUARTER\",\r\n            params: arguments,\r\n            checkFunction: (param, index) => {\r\n                if (index === 1) {\r\n                    return isStringType(param);\r\n                }\r\n                return isStringType(param) || isDateType(param);\r\n            },\r\n            minCount: 0,\r\n            optionalCount: 2,\r\n            paramType: [[], [[\"string\", \"date\"]], [[\"string\", \"date\"], [\"string\"]]],\r\n            errorText: BI.i18nText('BI-Front-Expression_param_date_precision', 'QUARTER'),\r\n        });\r\n        return \"number\";\r\n    };\r\n\r\n    quarter = this.QUARTER;\r\n\r\n    /**\r\n     * 返回某日期的秒数\r\n     *\r\n     * @returns {number}\r\n     */\r\n    SECOND = function () {\r\n        checkParamsType({\r\n            name: \"SECOND\",\r\n            params: arguments,\r\n            checkFunction: (param, index) => {\r\n                if (index === 1) {\r\n                    return isStringType(param);\r\n                }\r\n                return isStringType(param) || isDateType(param);\r\n            },\r\n            minCount: 0,\r\n            optionalCount: 2,\r\n            paramType: [[], [[\"string\", \"date\"]], [[\"string\", \"date\"], [\"string\"]]],\r\n            errorText: BI.i18nText('BI-Front-Expression_param_date_precision', 'SECOND'),\r\n        });\r\n        return \"number\";\r\n    };\r\n\r\n    second = this.SECOND;\r\n\r\n    /**\r\n     * 返回特定时间的十进制数字\r\n     *\r\n     * @returns {number}\r\n     */\r\n    TIME = function () {\r\n        checkParamsType({\r\n            name: \"TIME\",\r\n            params: arguments,\r\n            checkFunction: param => {\r\n                return isNumberType(param) || isStringType(param);\r\n            },\r\n            paramCount: 3,\r\n            paramType: [[\"string\", \"number\"], [\"string\", \"number\"], [\"string\", \"number\"]],\r\n            errorText: BI.i18nText('BI-Front-Expression_param_multi_number_or_text', 'TIME'),\r\n        });\r\n        return \"date\";\r\n    };\r\n\r\n    time = this.TIME;\r\n\r\n    /**\r\n     * 返回特定时间的十进制数字\r\n     *\r\n     * @returns {number}\r\n     */\r\n    TODATE = function () {\r\n        checkParamsType({\r\n            name: \"TODATE\",\r\n            params: arguments,\r\n            checkFunction: (param, index, params) => {\r\n                if (params.length === 1 && index === 0) {\r\n                    return true;\r\n                }\r\n                return isStringType(param);\r\n            },\r\n            minCount: 1,\r\n            optionalCount: 2,\r\n            paramType: [[\"any\"], [\"string\", \"string\"], [\"string\", \"string\", \"string\"]],\r\n            errorText: BI.i18nText('BI-Front-Expression_param_to_date', 'TODATE'),\r\n        });\r\n        return \"date\";\r\n    };\r\n\r\n    todate = this.TODATE;\r\n\r\n    /**\r\n     * 返回今天\r\n     *\r\n     * @returns {Date}\r\n     */\r\n    TODAY = function () {\r\n        checkParamsType({\r\n            name: \"TODAY\",\r\n            params: arguments,\r\n            paramCount: 0,\r\n            errorText: BI.i18nText('BI-Front-Expression_param_none', 'TODAY'),\r\n        });\r\n        return \"date\";\r\n    };\r\n\r\n    today = this.TODAY;\r\n\r\n    /**\r\n     * 返回特定时间的十进制数字\r\n     *\r\n     * @returns {number}\r\n     */\r\n    WEEK = function () {\r\n        checkParamsType({\r\n            name: \"WEEK\",\r\n            params: arguments,\r\n            checkFunction: (param, index) => {\r\n                if (index === 1) {\r\n                    return isStringType(param);\r\n                }\r\n                return isStringType(param) || isDateType(param);\r\n            },\r\n            minCount: 0,\r\n            paramType: [[], [[\"string\", \"date\"]], [[\"string\", \"date\"], [\"string\"]]],\r\n            errorText: BI.i18nText('BI-Front-Expression_param_date_precision', 'WEEK'),\r\n        });\r\n        return \"number\";\r\n    };\r\n\r\n    week = this.WEEK;\r\n\r\n    /**\r\n     * 返回某周的日期\r\n     *\r\n     * @returns {number}\r\n     */\r\n    WEEKDATE = function () {\r\n        checkParamsType({\r\n            name: \"WEEKDATE\",\r\n            params: arguments,\r\n            checkFunction: param => {\r\n                return isNumberType(param) || isStringType(param);\r\n            },\r\n            paramCount: 4,\r\n            paramType: [[\"string\", \"number\"], [\"string\", \"number\"], [\"string\", \"number\"], [\"string\", \"number\"]],\r\n            errorText: BI.i18nText('BI-Front-Expression_param_four_number_or_text', 'WEEKDATE'),\r\n        });\r\n        return \"date\";\r\n    };\r\n\r\n    weekdate = this.WEEKDATE;\r\n\r\n    /**\r\n     * 返回某周的日期\r\n     *\r\n     * @returns {number}\r\n     */\r\n    WEEKDAY = function () {\r\n        checkParamsType({\r\n            name: \"WEEKDAY\",\r\n            params: arguments,\r\n            checkFunction: param => {\r\n                return isStringType(param) || isDateType(param);\r\n            },\r\n            paramCount: 1,\r\n            paramType: [[\"string\", \"date\"]],\r\n            errorText: BI.i18nText('BI-Front-Expression_param_one_date_or_text', 'WEEKDAY'),\r\n        });\r\n        return \"number\";\r\n    };\r\n\r\n    weekday = this.WEEKDAY;\r\n\r\n    /**\r\n     * 返回某日期的年数\r\n     *\r\n     * @returns {number}\r\n     */\r\n    YEAR = function () {\r\n        checkParamsType({\r\n            name: \"YEAR\",\r\n            params: arguments,\r\n            checkFunction: (param, index) => {\r\n                if (index === 1) {\r\n                    return isStringType(param);\r\n                }\r\n                return isStringType(param) || isDateType(param);\r\n            },\r\n            minCount: 0,\r\n            paramType: [[], [[\"string\", \"date\"]], [[\"string\", \"date\"], [\"string\"]]],\r\n            errorText: BI.i18nText('BI-Front-Expression_param_date_precision', 'YEAR'),\r\n        });\r\n        return \"number\";\r\n    };\r\n\r\n    year = this.YEAR;\r\n\r\n    /**\r\n     * 返回某日期的delta年后的日期\r\n     *\r\n     * @returns {number}\r\n     */\r\n    YEARDELTA = function () {\r\n        checkParamsType({\r\n            name: \"YEARDELTA\",\r\n            params: arguments,\r\n            checkFunction: (param, index) => {\r\n                if (index === 0) {\r\n                    return isStringType(param) || isDateType(param);\r\n                }\r\n                return isNumberType(param);\r\n            },\r\n            paramCount: 2,\r\n            paramType: [[\"string\", \"date\"], [\"number\"]],\r\n            errorText: BI.i18nText('BI-Front-Expression_param_date_or_text_number', 'YEARDELTA'),\r\n        });\r\n        return \"date\";\r\n    };\r\n\r\n    yeardelta = this.YEARDELTA;\r\n\r\n    /**\r\n     * 文本运算－字节函数\r\n     *\r\n     * @returns {string}\r\n     */\r\n    CHAR = function () {\r\n        checkParamsType({\r\n            name: \"CHAR\",\r\n            params: arguments,\r\n            checkFunction: param => {\r\n                return isNumberType(param);\r\n            },\r\n            paramCount: 1,\r\n            paramType: [\"number\"],\r\n            errorText: BI.i18nText('BI-Front-Expression_param_number', 'CHAR'),\r\n        });\r\n        return \"string\";\r\n    };\r\n\r\n    char = this.CHAR;\r\n\r\n    /**\r\n     * 文本运算－返回字符代码\r\n     *\r\n     * @returns {string}\r\n     */\r\n    CODE = function () {\r\n        checkParamsType({\r\n            name: \"CODE\",\r\n            params: arguments,\r\n            checkFunction: param => {\r\n                return isStringType(param);\r\n            },\r\n            paramCount: 1,\r\n            paramType: [\"string\"],\r\n            errorText: BI.i18nText('BI-Front-Expression_param_text', 'CODE'),\r\n        });\r\n        return \"number\";\r\n    };\r\n\r\n    code = this.CODE;\r\n\r\n    /**\r\n     * 文本运算－合并字符串\r\n     *\r\n     * @returns {string}\r\n     */\r\n    CONCATENATE = function () {\r\n        checkParamsType({\r\n            name: \"CONCATENATE\",\r\n            params: arguments,\r\n            checkFunction: () => {\r\n                return true;\r\n            },\r\n            minCount: 1,\r\n            paramType: [\"any\"],\r\n            errorText: BI.i18nText('BI-Front-Expression_param_multi_any_type', 'CONCATENATE'),\r\n        });\r\n        return \"string\";\r\n    };\r\n\r\n    concatenate = this.CONCATENATE;\r\n\r\n    /**\r\n     * 文本运算－是否以什么结尾\r\n     *\r\n     * @returns {string}\r\n     */\r\n    ENDWITH = function () {\r\n        checkParamsType({\r\n            name: \"ENDWITH\",\r\n            params: arguments,\r\n            checkFunction: () => {\r\n                return true;\r\n            },\r\n            paramCount: 2,\r\n            paramType: [\"any\", \"any\"],\r\n            errorText: BI.i18nText('BI-Front-Expression_param_two_any', 'ENDWITH'),\r\n        });\r\n        return \"number\";\r\n    };\r\n\r\n    endwith = this.ENDWITH;\r\n\r\n    /**\r\n     * 文本运算－判断字符串相等\r\n     *\r\n     * @returns {boolean}\r\n     */\r\n    EXACT = function () {\r\n        checkParamsType({\r\n            name: \"EXACT\",\r\n            params: arguments,\r\n            checkFunction: () => {\r\n                return true;\r\n            },\r\n            paramCount: 2,\r\n            paramType: [\"any\", \"any\"],\r\n            errorText: BI.i18nText('BI-Front-Expression_param_two_any', 'EXACT'),\r\n        });\r\n        return \"number\";\r\n    };\r\n\r\n    exact = this.EXACT;\r\n\r\n    /**\r\n     * 文本运算－找字符串\r\n     *\r\n     * @returns {boolean}\r\n     */\r\n    FIND = function () {\r\n        checkParamsType({\r\n            name: \"FIND\",\r\n            params: arguments,\r\n            checkFunction: (param, index, params) => {\r\n                if (index === 2) {\r\n                    return isNumberType(param);\r\n                }\r\n                return true;\r\n            },\r\n            minCount: 2,\r\n            optionalCount: 1,\r\n            paramType: [[\"any\", \"any\"], [\"any\", \"any\", \"number\"]],\r\n            errorText: BI.i18nText('BI-Front-Expression_param_two_any_number_default', 'FIND'),\r\n        });\r\n        return \"number\";\r\n    };\r\n\r\n    find = this.FIND;\r\n\r\n    /**\r\n     * 文本运算－格式化\r\n     *\r\n     * @returns {string}\r\n     */\r\n    FORMAT = function () {\r\n        checkParamsType({\r\n            name: \"FORMAT\",\r\n            params: arguments,\r\n            checkFunction: (param, index) => {\r\n                if (index === 1) {\r\n                    return isStringType(param);\r\n                }\r\n                return true;\r\n            },\r\n            paramCount: 2,\r\n            paramType: [\"any\", \"string\"],\r\n            errorText: BI.i18nText('BI-Front-Expression_param_any_text', 'FORMAT'),\r\n        });\r\n        return \"string\";\r\n    };\r\n\r\n    format = this.FORMAT;\r\n\r\n    /**\r\n     * 文本运算－索引\r\n     *\r\n     * @returns {string}\r\n     */\r\n    INDEXOF = function () {\r\n        checkParamsType({\r\n            name: \"INDEXOF\",\r\n            params: arguments,\r\n            checkFunction: (param, index) => {\r\n                if (index === 1) {\r\n                    return isNumberType(param);\r\n                }\r\n                return true;\r\n            },\r\n            paramCount: 2,\r\n            paramType: [\"any\", \"number\"],\r\n            errorText: BI.i18nText('BI-Front-Expression_param_any_number', 'INDEXOF'),\r\n        });\r\n        return \"string\";\r\n    };\r\n\r\n    indexof = this.INDEXOF;\r\n\r\n    /**\r\n     * 文本运算－字符左截取\r\n     *\r\n     * @returns {string}\r\n     */\r\n    LEFT = function () {\r\n        checkParamsType({\r\n            name: \"LEFT\",\r\n            params: arguments,\r\n            checkFunction: (param, index) => {\r\n                if (index === 1) {\r\n                    return isNumberType(param);\r\n                }\r\n                return true;\r\n            },\r\n            minCount: 1,\r\n            optionalCount: 1,\r\n            paramType: [[\"any\"], [\"any\", \"number\"]],\r\n            errorText: BI.i18nText('BI-Front-Expression_param_any_number_default', 'LEFT'),\r\n        });\r\n        return \"string\";\r\n    };\r\n\r\n    left = this.LEFT;\r\n\r\n    /**\r\n     * 文本运算－获取字符长度\r\n     *\r\n     * @returns {number}\r\n     */\r\n    LEN = function () {\r\n        checkParamsType({\r\n            name: \"LEN\",\r\n            params: arguments,\r\n            checkFunction: param => {\r\n                return true;\r\n            },\r\n            paramCount: 1,\r\n            paramType: [\"any\"],\r\n            errorText: BI.i18nText('BI-Front-Expression_param_one_any_type', 'LEN'),\r\n        });\r\n        return \"number\";\r\n    };\r\n\r\n    len = this.LEN;\r\n\r\n    /**\r\n     * 文本运算－小写转换\r\n     *\r\n     * @returns {string}\r\n     */\r\n    LOWER = function () {\r\n        checkParamsType({\r\n            name: \"LOWER\",\r\n            params: arguments,\r\n            checkFunction: param => {\r\n                return isStringType(param);\r\n            },\r\n            paramCount: 1,\r\n            paramType: [\"string\"],\r\n            errorText: BI.i18nText('BI-Front-Expression_param_text', 'LOWER'),\r\n        });\r\n        return \"string\";\r\n    };\r\n\r\n    lower = this.LOWER;\r\n\r\n    /**\r\n     * 文本运算－字符截取\r\n     *\r\n     * @returns {string}\r\n     */\r\n    MID = function () {\r\n        checkParamsType({\r\n            name: \"MID\",\r\n            params: arguments,\r\n            checkFunction: (param, index) => {\r\n                if (index === 0) {\r\n                    return true;\r\n                }\r\n                return isNumberType(param);\r\n            },\r\n            paramCount: 3,\r\n            paramType: [\"any\", \"number\", \"number\"],\r\n            errorText: BI.i18nText('BI-Front-Expression_param_any_number_number', 'MID'),\r\n        });\r\n        return \"string\";\r\n    };\r\n\r\n    mid = this.MID;\r\n\r\n    /**\r\n     * 文本运算－ num的中文\r\n     *\r\n     * @returns {string}\r\n     */\r\n    NUMTO = function () {\r\n        checkParamsType({\r\n            name: \"NUMTO\",\r\n            params: arguments,\r\n            checkFunction: (param, index) => {\r\n                if (index === 0) {\r\n                    return isNumberType(param);\r\n                }\r\n                return isBooleanType(param) || isNumberType(param); // 兼容BI, BI因为没有布尔类型字段, NUMBER类型是可以作为BOOL使用\r\n            },\r\n            minCount: 1,\r\n            optionalCount: 1,\r\n            paramType: [[\"number\"], [\"number\", \"boolean\"]],\r\n            errorText: BI.i18nText('BI-Front-Expression_param_number_bool_default', 'NUMTO'),\r\n        });\r\n        return \"string\";\r\n    };\r\n\r\n    numto = this.NUMTO;\r\n\r\n    /**\r\n     * 文本运算－ 首字母大小\r\n     *\r\n     * @returns {string}\r\n     */\r\n    PROPER = function () {\r\n        checkParamsType({\r\n            name: \"PROPER\",\r\n            params: arguments,\r\n            checkFunction: param => {\r\n                return isStringType(param);\r\n            },\r\n            paramCount: 1,\r\n            paramType: [\"string\"],\r\n            errorText: BI.i18nText('BI-Front-Expression_param_text', 'PROPER'),\r\n        });\r\n        return \"string\";\r\n    };\r\n\r\n    proper = this.PROPER;\r\n\r\n    /**\r\n     * 文本运算－ 正则表达式\r\n     *\r\n     * @returns {string}\r\n     */\r\n    REGEXP = function () {\r\n        checkParamsType({\r\n            name: \"REGEXP\",\r\n            params: arguments,\r\n            checkFunction: (param, index) => {\r\n                if (index === 2) {\r\n                    return isNumberType(param);\r\n                }\r\n                return isStringType(param);\r\n            },\r\n            minCount: 2,\r\n            optionalCount: 1,\r\n            paramType: [[\"string\", \"string\"], [\"string\", \"string\", \"number\"]],\r\n            errorText: BI.i18nText('BI-Front-Expression_param_text_text_number_default', 'REGEXP'),\r\n        });\r\n        return \"string\";\r\n    };\r\n\r\n    regexp = this.REGEXP;\r\n\r\n    /**\r\n     * 文本运算－ 重复\r\n     *\r\n     * @returns {string}\r\n     */\r\n    REPEAT = function () {\r\n        checkParamsType({\r\n            name: \"REPEAT\",\r\n            params: arguments,\r\n            checkFunction: (param, index) => {\r\n                if (index === 1) {\r\n                    return isNumberType(param);\r\n                }\r\n                return true;\r\n            },\r\n            paramCount: 2,\r\n            paramType: [\"any\", \"number\"],\r\n            errorText: BI.i18nText('BI-Front-Expression_param_any_number', 'REPEAT'),\r\n        });\r\n        return \"string\";\r\n    };\r\n\r\n    repeat = this.REPEAT;\r\n\r\n    /**\r\n     * 文本运算－字符串替换\r\n     *\r\n     * @returns {string}\r\n     */\r\n    REPLACE = function () {\r\n        checkParamsType({\r\n            name: \"REPLACE\",\r\n            params: arguments,\r\n            checkFunction: (param, index, params) => {\r\n                if (params.length === 3) {\r\n                    return true;\r\n                }\r\n                if (index === 1 || index === 2) {\r\n                    return isNumberType(param);\r\n                }\r\n                return true;\r\n            },\r\n            minCount: 3,\r\n            optionalCount: 1,\r\n            paramType: [[\"any\", \"any\", \"any\"], [\"any\", \"number\", \"number\", \"any\"]],\r\n            errorText: BI.i18nText('BI-Front-Expression_param_three_text_or_text_two_number_text', 'REPLACE'),\r\n        });\r\n        return \"string\";\r\n    };\r\n\r\n    replace = this.REPLACE;\r\n\r\n    /**\r\n     * 文本运算－字符右截取\r\n     *\r\n     * @returns {string}\r\n     */\r\n    RIGHT = function () {\r\n        checkParamsType({\r\n            name: \"RIGHT\",\r\n            params: arguments,\r\n            checkFunction: (param, index) => {\r\n                if (index === 1) {\r\n                    return isNumberType(param);\r\n                }\r\n                return true;\r\n            },\r\n            minCount: 1,\r\n            optionalCount: 1,\r\n            paramType: [[\"any\"], [\"any\", \"number\"]],\r\n            errorText: BI.i18nText('BI-Front-Expression_param_any_number_default', 'RIGHT'),\r\n        });\r\n        return \"string\";\r\n    };\r\n\r\n    right = this.RIGHT;\r\n\r\n    /**\r\n     * 文本运算－字符分隔\r\n     *\r\n     * @returns {string}\r\n     */\r\n    SPLIT = function () {\r\n        checkParamsType({\r\n            name: \"SPLIT\",\r\n            params: arguments,\r\n            checkFunction: () => {\r\n                return true;\r\n            },\r\n            paramCount: 2,\r\n            paramType: [\"any\", \"any\"],\r\n            errorText: BI.i18nText('BI-Front-Expression_param_two_any', 'SPLIT'),\r\n        });\r\n        return \"array\";\r\n    };\r\n\r\n    split = this.SPLIT;\r\n\r\n    /**\r\n     * 文本运算－是否以xx开头\r\n     *\r\n     * @returns {string}\r\n     */\r\n    STARTWITH = function () {\r\n        checkParamsType({\r\n            name: \"STARTWITH\",\r\n            params: arguments,\r\n            checkFunction: (param, index) => {\r\n                return true;\r\n            },\r\n            paramCount: 2,\r\n            paramType: [\"any\", \"any\"],\r\n            errorText: BI.i18nText('BI-Front-Expression_param_two_any', 'STARTWITH'),\r\n        });\r\n        return \"number\";\r\n    };\r\n\r\n    startwith = this.STARTWITH;\r\n\r\n    /**\r\n     * 文本运算－替换\r\n     *\r\n     * @returns {string}\r\n     */\r\n    SUBSTITUTE = function () {\r\n        checkParamsType({\r\n            name: \"SUBSTITUTE\",\r\n            params: arguments,\r\n            checkFunction: (param, index) => {\r\n                if (index === 3) {\r\n                    return isNumberType(param);\r\n                }\r\n                return true;\r\n            },\r\n            minCount: 3,\r\n            optionalCount: 1,\r\n            paramType: [[\"any\", \"any\", \"any\"], [\"any\", \"any\", \"any\", \"number\"]],\r\n            errorText: BI.i18nText('BI-Front-Expression_param_three_any_number_default', 'SUBSTITUTE'),\r\n        });\r\n        return \"string\";\r\n    };\r\n\r\n    substitute = this.SUBSTITUTE;\r\n\r\n    /**\r\n     * 文本运算－文本转double\r\n     *\r\n     * @returns {string}\r\n     */\r\n    TODOUBLE = function () {\r\n        checkParamsType({\r\n            name: \"TODOUBLE\",\r\n            params: arguments,\r\n            checkFunction: () => {\r\n                return true;\r\n            },\r\n            paramCount: 1,\r\n            paramType: [\"any\"],\r\n            errorText: BI.i18nText('BI-Front-Expression_param_one_any_type', 'TODOUBLE'),\r\n        });\r\n        return \"number\";\r\n    };\r\n\r\n    todouble = this.TODOUBLE;\r\n\r\n    /**\r\n     * 文本运算－文本转int\r\n     *\r\n     * @returns {string}\r\n     */\r\n    TOINTEGER = function () {\r\n        checkParamsType({\r\n            name: \"TOINTEGER\",\r\n            params: arguments,\r\n            checkFunction: () => {\r\n                return true;\r\n            },\r\n            paramCount: 1,\r\n            paramType: [\"any\"],\r\n            errorText: BI.i18nText('BI-Front-Expression_param_one_any_type', 'TOINTEGER'),\r\n        });\r\n        return \"number\";\r\n    };\r\n\r\n    tointeger = this.TOINTEGER;\r\n\r\n    /**\r\n     * 文本运算－trim\r\n     *\r\n     * @returns {string}\r\n     */\r\n    TRIM = function () {\r\n        checkParamsType({\r\n            name: \"TRIM\",\r\n            params: arguments,\r\n            checkFunction: param => {\r\n                return isStringType(param);\r\n            },\r\n            paramCount: 1,\r\n            paramType: [\"string\"],\r\n            errorText: BI.i18nText('BI-Front-Expression_param_text', 'TRIM'),\r\n        });\r\n        return \"string\";\r\n    };\r\n\r\n    trim = this.TRIM;\r\n\r\n    /**\r\n     * 文本运算－大写转换\r\n     *\r\n     * @returns {string}\r\n     */\r\n    UPPER = function () {\r\n        checkParamsType({\r\n            name: \"UPPER\",\r\n            params: arguments,\r\n            checkFunction: param => {\r\n                return isStringType(param);\r\n            },\r\n            paramCount: 1,\r\n            paramType: [\"string\"],\r\n            errorText: BI.i18nText('BI-Front-Expression_param_text', 'UPPER'),\r\n        });\r\n        return \"string\";\r\n    };\r\n\r\n    upper = this.UPPER;\r\n\r\n    /**\r\n     * 逻辑运算－与运算\r\n     *\r\n     * @returns {boolean}\r\n     */\r\n    AND = function () {\r\n        checkParamsType({\r\n            name: \"AND\",\r\n            params: arguments,\r\n            checkFunction: param => {\r\n                return isBooleanType(param) || isNumberType(param);\r\n            },\r\n            minCount: 0,\r\n            paramType: [\"any\"],\r\n        });\r\n        return \"number\";\r\n    };\r\n\r\n    and = this.AND;\r\n\r\n    /**\r\n     * 逻辑运算－或运算\r\n     *\r\n     * @returns {boolean}\r\n     */\r\n    OR = function () {\r\n        checkParamsType({\r\n            name: \"OR\",\r\n            params: arguments,\r\n            checkFunction: param => {\r\n                return isBooleanType(param) || isNumberType(param);\r\n            },\r\n            minCount: 0,\r\n            paramType: [\"any\"],\r\n        });\r\n        return \"number\";\r\n    };\r\n\r\n    or = this.OR;\r\n\r\n    /**\r\n     * 逻辑运算－条件分支运算\r\n     *\r\n     * @return {string}\r\n     */\r\n    IF = function () {\r\n        checkParamsType({\r\n            name: \"IF\",\r\n            params: arguments,\r\n            checkFunction: (param, index) => {\r\n                if (index === 0) {\r\n                    return isBooleanType(param) || isNumberType(param);\r\n                }\r\n                return true;\r\n            },\r\n            paramCount: 3,\r\n            paramType: [[\"boolean\", \"number\"], \"any\", \"any\"],\r\n            errorText: BI.i18nText('BI-Front-Expression_logic_if_three_param', 'IF'),\r\n        });\r\n        return \"any\";\r\n    };\r\n\r\n    if = this.IF;\r\n\r\n    /**\r\n     * 逻辑运算－switch条件分支运算\r\n     *\r\n     * @return {string}\r\n     */\r\n    SWITCH = function () {\r\n        checkParamsType({\r\n            name: \"SWITCH\",\r\n            params: arguments,\r\n            checkFunction: (param, index) => {\r\n                if (index === 0) {\r\n                    return isBooleanType(param) || isNumberType(param);\r\n                }\r\n                return true;\r\n            },\r\n            minCount: 3,\r\n            paramType: [[\"boolean\", \"number\"], \"any\", \"any\"],\r\n            errorText: BI.i18nText('BI-Front-Expression_logic_switch_le_three_param', 'SWITCH'),\r\n        });\r\n        return \"any\";\r\n    };\r\n\r\n    switch = this.SWITCH;\r\n\r\n    /**\r\n     * 其他运算－判断null\r\n     *\r\n     * @returns {boolean}\r\n     */\r\n    ISNULL = function () {\r\n        checkParamsType({\r\n            name: \"ISNULL\",\r\n            params: arguments,\r\n            checkFunction: () => {\r\n                return true;\r\n            },\r\n            minCount: 1,\r\n            paramType: [\"any\"],\r\n            errorText: BI.i18nText('BI-Front-Expression_param_multi_any_type', 'ISNULL'),\r\n        });\r\n        return \"number\";\r\n    };\r\n\r\n    isnull = this.ISNULL;\r\n\r\n    /**\r\n     * 其他运算－返回第一个不是null的值\r\n     *\r\n     * @returns {boolean}\r\n     */\r\n    NVL = function () {\r\n        let error = false;\r\n        const params = [].slice.call(arguments);\r\n        const types = [];\r\n        params.forEach((p) => {\r\n            if (p !== null && p !== undefined && !types.includes(p)) {\r\n                types.push(p);\r\n            }\r\n        });\r\n        if (types.length > 1) {\r\n            error = true;\r\n        }\r\n        checkParamsType({\r\n            name: \"NVL\",\r\n            params: arguments,\r\n            checkFunction: () => {\r\n                return !error;\r\n            },\r\n            minCount: 1,\r\n            paramType: [\"any\"],\r\n            errorText: BI.i18nText('BI-Front-Expression_nvl_param_same', 'ISNULL'),\r\n        });\r\n        return \"any\";\r\n    };\r\n\r\n    nvl = this.NVL;\r\n}\r\n\r\n/**\r\n * 校验函数的参数个数及类型是否正确\r\n *\r\n * @param config.name 函数名\r\n * @param config.params 函数参数\r\n * @param config.checkFunction 参数类型校验函数\r\n * @param config.paramCount 必填参数个数\r\n * @param config.minCount 最少必填参数个数\r\n * @param config.paramType 参数类型\r\n * @param config.optionalCount 可选参数个数\r\n * @param config.isSupportDynamic 是否支持动态参数\r\n * @param config.errorText 错误提示文本\r\n * @param config\r\n */\r\nconst checkParamsType = config => {\r\n    if (!isUndefined(config.paramCount) && size(config.params) !== config.paramCount\r\n        || !isUndefined(config.minCount) && size(config.params) < config.minCount\r\n        || !isUndefined(config.minCount) && !isUndefined(config.optionalCount) && size(config.params) > config.minCount + config.optionalCount) {\r\n        throw new Error(\r\n            JSON.stringify({\r\n                type: \"function\",\r\n                name: config.name,\r\n                paramCount: config.paramCount,\r\n                minCount: config.minCount,\r\n                optionalCount: config.optionalCount,\r\n                errorType: \"paramCount\",\r\n                errorText: config.errorText,\r\n            })\r\n        );\r\n    }\r\n    // 公式有可能会添加一些不作为参数的字段，用于动态取数，所以只校验需要校验的位数\r\n    const needCheckCount = config.minCount + (config.optionalCount || 0);\r\n    // 公式如果不支持动态取数，则校验所有的参数\r\n    const supportDynamic = !!config.isSupportDynamic;\r\n    forEach(config.params, (p, i) => {\r\n        if (i + 1 > needCheckCount && supportDynamic) {\r\n            return false;\r\n        }\r\n        if (!config.checkFunction(p, i, config.params) && !isAnyType(p)) {\r\n            throw new Error(\r\n                JSON.stringify({\r\n                    type: \"function\",\r\n                    name: config.name,\r\n                    paramIndex: i + 1,\r\n                    paramType: config.paramType,\r\n                    errorType: \"paramType\",\r\n                    errorText: config.errorText,\r\n                })\r\n            );\r\n        }\r\n    });\r\n};\r\n\r\n","/**\r\n * Created by richie on 15/7/8.\r\n */\r\n/**\r\n * 初始化BI对象\r\n */\r\nvar _global;\r\nif (typeof window !== \"undefined\") {\r\n    _global = window;\r\n} else if (typeof global !== \"undefined\") {\r\n    _global = global;\r\n} else if (typeof self !== \"undefined\") {\r\n    _global = self;\r\n} else {\r\n    _global = this;\r\n}\r\nif (_global.BI == null) {\r\n    _global.BI = {prepares: []};\r\n}\r\nif(_global.BI.prepares == null) {\r\n    _global.BI.prepares = [];\r\n}","/** Constants used for time computations */\r\nDate.SECOND = 1000;\r\nDate.MINUTE = 60 * Date.SECOND;\r\nDate.HOUR = 60 * Date.MINUTE;\r\nDate.DAY = 24 * Date.HOUR;\r\nDate.WEEK = 7 * Date.DAY;\r\n\r\n/**\r\n * 获取时区\r\n * @returns {String}\r\n */\r\nObject.defineProperty(Date.prototype, 'getTimezone', {\r\n    value: function () {\r\n        return BI.getTimezone(this);\r\n    }\r\n});\r\n\r\n/** Returns the number of days in the current month */\r\nObject.defineProperty(Date.prototype, 'getMonthDays', {\r\n    value: function (month) {\r\n        return BI.getMonthDays(this, month);\r\n    }\r\n});\r\n\r\n/**\r\n * 获取每月的最后一天\r\n * @returns {Date}\r\n */\r\nObject.defineProperty(Date.prototype, 'getLastDateOfMonth', {\r\n    value: function () {\r\n        return BI.getLastDateOfMonth(this);\r\n    }\r\n});\r\n\r\n/** Returns the number of day in the year. */\r\nObject.defineProperty(Date.prototype, 'getDayOfYear', {\r\n    value: function () {\r\n        return BI.getDayOfYear(this);\r\n    }\r\n});\r\n\r\n/** Returns the number of the week in year, as defined in ISO 8601. */\r\nObject.defineProperty(Date.prototype, 'getWeekNumber', {\r\n    value: function () {\r\n        return BI.getWeekNumber(this);\r\n    }\r\n});\r\n\r\nObject.defineProperty(Date.prototype, 'getQuarter', {\r\n    value: function () {\r\n        return BI.getQuarter(this);\r\n    }\r\n});\r\n\r\n// 离当前时间多少天的时间\r\nObject.defineProperty(Date.prototype, 'getOffsetDate', {\r\n    value: function (offset) {\r\n        return BI.getOffsetDate(this, offset);\r\n    }\r\n});\r\n\r\nObject.defineProperty(Date.prototype, 'getOffsetQuarter', {\r\n    value: function (n) {\r\n        return BI.getOffsetQuarter(this, n);\r\n    }\r\n});\r\n\r\n// 得到本季度的起始月份\r\nObject.defineProperty(Date.prototype, 'getQuarterStartMonth', {\r\n    value: function () {\r\n        return BI.getQuarter(this);\r\n    }\r\n});\r\n\r\n// 获得本季度的起始日期\r\nObject.defineProperty(Date.prototype, 'getQuarterStartDate', {\r\n    value: function () {\r\n        return BI.getQuarterStartDate(this);\r\n    }\r\n});\r\n\r\n// 得到本季度的结束日期\r\nObject.defineProperty(Date.prototype, 'getQuarterEndDate', {\r\n    value: function () {\r\n        return BI.getQuarterEndDate(this);\r\n    }\r\n});\r\n\r\n// 指定日期n个月之前或之后的日期\r\nObject.defineProperty(Date.prototype, 'getOffsetMonth', {\r\n    value: function (n) {\r\n        return BI.getOffsetMonth(this, n);\r\n    }\r\n});\r\n\r\n// 获得本周的起始日期\r\nObject.defineProperty(Date.prototype, 'getWeekStartDate', {\r\n    value: function () {\r\n        return BI.getWeekStartDate(this);\r\n    }\r\n});\r\n\r\n// 得到本周的结束日期\r\nObject.defineProperty(Date.prototype, 'getWeekEndDate', {\r\n    value: function () {\r\n        return BI.getWeekEndDate(this);\r\n    }\r\n});\r\n\r\n// 格式化打印日期\r\nObject.defineProperty(Date.prototype, 'print', {\r\n    value: function (str) {\r\n        return BI.print(this, str);\r\n    }\r\n});\r\n\r\n","Function.prototype.before = function (func) {\r\n    return BI.beforeFunc(this, func);\r\n};\r\n\r\nFunction.prototype.after = function (func) {\r\n    return BI.afterFunc(this, func);\r\n};","/**\r\n ** 加法函数，用来得到精确的加法结果\r\n ** 说明：javascript的加法结果会有误差，在两个浮点数相加的时候会比较明显。这个函数返回较为精确的加法结果。\r\n ** 调用：accAdd(arg1,arg2)\r\n ** 返回值：arg1加上arg2的精确结果\r\n **/\r\n// 给Number类型增加一个add方法，调用起来更加方便。\r\nNumber.prototype.add = function (arg) {\r\n    return BI.add(this, arg);\r\n};\r\n/**\r\n ** 减法函数，用来得到精确的减法结果\r\n ** 说明：javascript的减法结果会有误差，在两个浮点数相减的时候会比较明显。这个函数返回较为精确的减法结果。\r\n ** 调用：accSub(arg1,arg2)\r\n ** 返回值：arg1加上arg2的精确结果\r\n **/\r\n\r\n// 给Number类型增加一个mul方法，调用起来更加方便。\r\nNumber.prototype.sub = function (arg) {\r\n    return BI.sub(this, arg);\r\n};\r\n/**\r\n ** 乘法函数，用来得到精确的乘法结果\r\n ** 说明：javascript的乘法结果会有误差，在两个浮点数相乘的时候会比较明显。这个函数返回较为精确的乘法结果。\r\n ** 调用：accMul(arg1,arg2)\r\n ** 返回值：arg1乘以 arg2的精确结果\r\n **/\r\n\r\n// 给Number类型增加一个mul方法，调用起来更加方便。\r\nNumber.prototype.mul = function (arg) {\r\n    return BI.mul(this, arg);\r\n};\r\n\r\n\r\n// 给Number类型增加一个div方法，调用起来更加方便。\r\nNumber.prototype.div = function (arg) {\r\n    return BI.div(this, arg);\r\n};","/**\r\n * 对字符串对象的扩展\r\n * @class String\r\n */\r\n_.extend(String.prototype, {\r\n\r\n    /**\r\n     * 判断字符串是否已指定的字符串开始\r\n     * @param {String} startTag   指定的开始字符串\r\n     * @return {Boolean}  如果字符串以指定字符串开始则返回true，否则返回false\r\n     */\r\n    startWith: function (startTag) {\r\n        return BI.startWith(this, startTag);\r\n    },\r\n    /**\r\n     * 判断字符串是否以指定的字符串结束\r\n     * @param {String} endTag 指定的字符串\r\n     * @return {Boolean}  如果字符串以指定字符串结束则返回true，否则返回false\r\n     */\r\n    endWith: function (endTag) {\r\n        return BI.endWith(this, endTag);\r\n    },\r\n\r\n    /**\r\n     * 获取url中指定名字的参数\r\n     * @param {String} name 参数的名字\r\n     * @return {String} 参数的值\r\n     */\r\n    getQuery: function (name) {\r\n        return BI.getQuery(this, name);\r\n    },\r\n\r\n    /**\r\n     * 给url加上给定的参数\r\n     * @param {Object} paras 参数对象，是一个键值对对象\r\n     * @return {String} 添加了给定参数的url\r\n     */\r\n    appendQuery: function (paras) {\r\n        return BI.appendQuery(this, paras);\r\n    },\r\n    /**\r\n     * 将所有符合第一个字符串所表示的字符串替换成为第二个字符串\r\n     * @param {String} s1 要替换的字符串的正则表达式\r\n     * @param {String} s2 替换的结果字符串\r\n     * @returns {String} 替换后的字符串\r\n     */\r\n    replaceAll: function (s1, s2) {\r\n        return BI.replaceAll(this, s1, s2);\r\n    },\r\n    /**\r\n     * 总是让字符串以指定的字符开头\r\n     * @param {String} start 指定的字符\r\n     * @returns {String} 以指定字符开头的字符串\r\n     */\r\n    perfectStart: function (start) {\r\n        return BI.perfectStart(this, start);\r\n    },\r\n\r\n    /**\r\n     * 获取字符串中某字符串的所有项位置数组\r\n     * @param {String} sub 子字符串\r\n     * @return {Number[]} 子字符串在父字符串中出现的所有位置组成的数组\r\n     */\r\n    allIndexOf: function (sub) {\r\n        return BI.allIndexOf(this, sub);\r\n    }\r\n});","!(function () {\r\n    BI.extend(BI, {\r\n        /**\r\n         * same with Window.open()\r\n         * @param strUrl\r\n         * @param strWindowName\r\n         * @param windowFeatures\r\n         * @returns {Window}\r\n         */\r\n        openWindow: function (strUrl, strWindowName, windowFeatures) {\r\n            var windowObjectReference = null;\r\n            try {\r\n                windowObjectReference = window.top.open.apply(window.top, arguments);\r\n            } catch (e) {\r\n                windowObjectReference = window.open.apply(window, arguments);\r\n            }\r\n\r\n            return windowObjectReference;\r\n        }\r\n    });\r\n}());\r\n","!(function () {\r\n    var MD5 = function (hexcase) {\r\n        this.hexcase = !hexcase ? 0 : 1;\r\n        /* hex output format. 0 - lowercase; 1 - uppercase */\r\n        this.b64pad = \"\";\r\n        /* base-64 pad character. \"=\" for strict RFC compliance */\r\n        this.chrsz = 8;\r\n    /* bits per input character. 8 - ASCII; 16 - Unicode */\r\n    };\r\n\r\n    /*\r\n   * These are the functions you'll usually want to call\r\n   * They take string arguments and return either hex or base-64 encoded strings\r\n   */\r\n    MD5.prototype.hex_md5 = function (s) {\r\n        return this.binl2hex(this.core_md5(this.str2binl(s), s.length * this.chrsz));\r\n    };\r\n\r\n    MD5.prototype.hex_md5_salt = function (s) {\r\n        var md5ed = this.hex_md5(s);\r\n\r\n        var items1 = [];\r\n        var items2 = [];\r\n        for (var i = 0; i < md5ed.length; i++) {\r\n            if (i % 2 === 0) {\r\n                items1.push(md5ed.charAt(i));\r\n            } else {\r\n                items2.push(md5ed.charAt(i));\r\n            }\r\n        }\r\n        var result = \":\" + items1.join(\"\") + items2.join(\"\");\r\n        return result;\r\n    };\r\n\r\n    MD5.prototype.b64_md5 = function (s) {\r\n        return this.binl2b64(this.core_md5(this.str2binl(s), s.length * this.chrsz));\r\n    };\r\n\r\n    MD5.prototype.hex_hmac_md5 = function (key, data) {\r\n        return this.binl2hex(this.core_hmac_md5(key, data));\r\n    };\r\n\r\n    MD5.prototype.b64_hmac_md5 = function (key, data) {\r\n        return this.binl2b64(this.core_hmac_md5(key, data));\r\n    };\r\n\r\n    /* Backwards compatibility - same as hex_md5() */\r\n    MD5.prototype.calcMD5 = function (s) {\r\n        return this.binl2hex(this.core_md5(this.str2binl(s), s.length * this.chrsz));\r\n    };\r\n\r\n    MD5.prototype.core_md5 = function (x, len) {\r\n    /* append padding */\r\n        x[len >> 5] |= 0x80 << ((len) % 32);\r\n        x[(((len + 64) >>> 9) << 4) + 14] = len;\r\n\r\n        var a = 1732584193;\r\n        var b = -271733879;\r\n        var c = -1732584194;\r\n        var d = 271733878;\r\n\r\n        for (var i = 0; i < x.length; i += 16) {\r\n            var olda = a;\r\n            var oldb = b;\r\n            var oldc = c;\r\n            var oldd = d;\r\n\r\n            a = this.md5_ff(a, b, c, d, x[i + 0], 7, -680876936);\r\n            d = this.md5_ff(d, a, b, c, x[i + 1], 12, -389564586);\r\n            c = this.md5_ff(c, d, a, b, x[i + 2], 17, 606105819);\r\n            b = this.md5_ff(b, c, d, a, x[i + 3], 22, -1044525330);\r\n            a = this.md5_ff(a, b, c, d, x[i + 4], 7, -176418897);\r\n            d = this.md5_ff(d, a, b, c, x[i + 5], 12, 1200080426);\r\n            c = this.md5_ff(c, d, a, b, x[i + 6], 17, -1473231341);\r\n            b = this.md5_ff(b, c, d, a, x[i + 7], 22, -45705983);\r\n            a = this.md5_ff(a, b, c, d, x[i + 8], 7, 1770035416);\r\n            d = this.md5_ff(d, a, b, c, x[i + 9], 12, -1958414417);\r\n            c = this.md5_ff(c, d, a, b, x[i + 10], 17, -42063);\r\n            b = this.md5_ff(b, c, d, a, x[i + 11], 22, -1990404162);\r\n            a = this.md5_ff(a, b, c, d, x[i + 12], 7, 1804603682);\r\n            d = this.md5_ff(d, a, b, c, x[i + 13], 12, -40341101);\r\n            c = this.md5_ff(c, d, a, b, x[i + 14], 17, -1502002290);\r\n            b = this.md5_ff(b, c, d, a, x[i + 15], 22, 1236535329);\r\n\r\n            a = this.md5_gg(a, b, c, d, x[i + 1], 5, -165796510);\r\n            d = this.md5_gg(d, a, b, c, x[i + 6], 9, -1069501632);\r\n            c = this.md5_gg(c, d, a, b, x[i + 11], 14, 643717713);\r\n            b = this.md5_gg(b, c, d, a, x[i + 0], 20, -373897302);\r\n            a = this.md5_gg(a, b, c, d, x[i + 5], 5, -701558691);\r\n            d = this.md5_gg(d, a, b, c, x[i + 10], 9, 38016083);\r\n            c = this.md5_gg(c, d, a, b, x[i + 15], 14, -660478335);\r\n            b = this.md5_gg(b, c, d, a, x[i + 4], 20, -405537848);\r\n            a = this.md5_gg(a, b, c, d, x[i + 9], 5, 568446438);\r\n            d = this.md5_gg(d, a, b, c, x[i + 14], 9, -1019803690);\r\n            c = this.md5_gg(c, d, a, b, x[i + 3], 14, -187363961);\r\n            b = this.md5_gg(b, c, d, a, x[i + 8], 20, 1163531501);\r\n            a = this.md5_gg(a, b, c, d, x[i + 13], 5, -1444681467);\r\n            d = this.md5_gg(d, a, b, c, x[i + 2], 9, -51403784);\r\n            c = this.md5_gg(c, d, a, b, x[i + 7], 14, 1735328473);\r\n            b = this.md5_gg(b, c, d, a, x[i + 12], 20, -1926607734);\r\n\r\n            a = this.md5_hh(a, b, c, d, x[i + 5], 4, -378558);\r\n            d = this.md5_hh(d, a, b, c, x[i + 8], 11, -2022574463);\r\n            c = this.md5_hh(c, d, a, b, x[i + 11], 16, 1839030562);\r\n            b = this.md5_hh(b, c, d, a, x[i + 14], 23, -35309556);\r\n            a = this.md5_hh(a, b, c, d, x[i + 1], 4, -1530992060);\r\n            d = this.md5_hh(d, a, b, c, x[i + 4], 11, 1272893353);\r\n            c = this.md5_hh(c, d, a, b, x[i + 7], 16, -155497632);\r\n            b = this.md5_hh(b, c, d, a, x[i + 10], 23, -1094730640);\r\n            a = this.md5_hh(a, b, c, d, x[i + 13], 4, 681279174);\r\n            d = this.md5_hh(d, a, b, c, x[i + 0], 11, -358537222);\r\n            c = this.md5_hh(c, d, a, b, x[i + 3], 16, -722521979);\r\n            b = this.md5_hh(b, c, d, a, x[i + 6], 23, 76029189);\r\n            a = this.md5_hh(a, b, c, d, x[i + 9], 4, -640364487);\r\n            d = this.md5_hh(d, a, b, c, x[i + 12], 11, -421815835);\r\n            c = this.md5_hh(c, d, a, b, x[i + 15], 16, 530742520);\r\n            b = this.md5_hh(b, c, d, a, x[i + 2], 23, -995338651);\r\n\r\n            a = this.md5_ii(a, b, c, d, x[i + 0], 6, -198630844);\r\n            d = this.md5_ii(d, a, b, c, x[i + 7], 10, 1126891415);\r\n            c = this.md5_ii(c, d, a, b, x[i + 14], 15, -1416354905);\r\n            b = this.md5_ii(b, c, d, a, x[i + 5], 21, -57434055);\r\n            a = this.md5_ii(a, b, c, d, x[i + 12], 6, 1700485571);\r\n            d = this.md5_ii(d, a, b, c, x[i + 3], 10, -1894986606);\r\n            c = this.md5_ii(c, d, a, b, x[i + 10], 15, -1051523);\r\n            b = this.md5_ii(b, c, d, a, x[i + 1], 21, -2054922799);\r\n            a = this.md5_ii(a, b, c, d, x[i + 8], 6, 1873313359);\r\n            d = this.md5_ii(d, a, b, c, x[i + 15], 10, -30611744);\r\n            c = this.md5_ii(c, d, a, b, x[i + 6], 15, -1560198380);\r\n            b = this.md5_ii(b, c, d, a, x[i + 13], 21, 1309151649);\r\n            a = this.md5_ii(a, b, c, d, x[i + 4], 6, -145523070);\r\n            d = this.md5_ii(d, a, b, c, x[i + 11], 10, -1120210379);\r\n            c = this.md5_ii(c, d, a, b, x[i + 2], 15, 718787259);\r\n            b = this.md5_ii(b, c, d, a, x[i + 9], 21, -343485551);\r\n\r\n            a = this.safe_add(a, olda);\r\n            b = this.safe_add(b, oldb);\r\n            c = this.safe_add(c, oldc);\r\n            d = this.safe_add(d, oldd);\r\n        }\r\n        return Array(a, b, c, d);\r\n\r\n    };\r\n\r\n    /*\r\n   * These functions implement the four basic operations the algorithm uses.\r\n   */\r\n    MD5.prototype.md5_cmn = function (q, a, b, x, s, t) {\r\n        return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(a, q), this.safe_add(x, t)), s), b);\r\n    };\r\n    MD5.prototype.md5_ff = function (a, b, c, d, x, s, t) {\r\n        return this.md5_cmn((b & c) | ((~b) & d), a, b, x, s, t);\r\n    };\r\n    MD5.prototype.md5_gg = function (a, b, c, d, x, s, t) {\r\n        return this.md5_cmn((b & d) | (c & (~d)), a, b, x, s, t);\r\n    };\r\n    MD5.prototype.md5_hh = function (a, b, c, d, x, s, t) {\r\n        return this.md5_cmn(b ^ c ^ d, a, b, x, s, t);\r\n    };\r\n    MD5.prototype.md5_ii = function (a, b, c, d, x, s, t) {\r\n        return this.md5_cmn(c ^ (b | (~d)), a, b, x, s, t);\r\n    };\r\n\r\n    /*\r\n   * Calculate the HMAC-MD5, of a key and some data\r\n   */\r\n    MD5.prototype.core_hmac_md5 = function (key, data) {\r\n        var bkey = this.str2binl(key);\r\n        if (bkey.length > 16) {bkey = this.core_md5(bkey, key.length * this.chrsz);}\r\n\r\n        var ipad = Array(16), opad = Array(16);\r\n        for (var i = 0; i < 16; i++) {\r\n            ipad[i] = bkey[i] ^ 0x36363636;\r\n            opad[i] = bkey[i] ^ 0x5C5C5C5C;\r\n        }\r\n\r\n        var hash = this.core_md5(ipad.concat(this.str2binl(data)), 512 + data.length * this.chrsz);\r\n        return this.core_md5(opad.concat(hash), 512 + 128);\r\n    };\r\n\r\n    /*\r\n   * Add integers, wrapping at 2^32. This uses 16-bit operations internally\r\n   * to work around bugs in some JS interpreters.\r\n   */\r\n    MD5.prototype.safe_add = function (x, y) {\r\n        var lsw = (x & 0xFFFF) + (y & 0xFFFF);\r\n        var msw = (x >> 16) + (y >> 16) + (lsw >> 16);\r\n        return (msw << 16) | (lsw & 0xFFFF);\r\n    };\r\n\r\n    /*\r\n   * Bitwise rotate a 32-bit number to the left.\r\n   */\r\n    MD5.prototype.bit_rol = function (num, cnt) {\r\n        return (num << cnt) | (num >>> (32 - cnt));\r\n    };\r\n\r\n    /*\r\n   * Convert a string to an array of little-endian words\r\n   * If chrsz is ASCII, characters >255 have their hi-byte silently ignored.\r\n   */\r\n    MD5.prototype.str2binl = function (str) {\r\n        var bin = Array();\r\n        var mask = (1 << this.chrsz) - 1;\r\n        for (var i = 0; i < str.length * this.chrsz; i += this.chrsz) {bin[i >> 5] |= (str.charCodeAt(i / this.chrsz) & mask) << (i % 32);}\r\n        return bin;\r\n    };\r\n\r\n    /*\r\n   * Convert an array of little-endian words to a hex string.\r\n   */\r\n    MD5.prototype.binl2hex = function (binarray) {\r\n        var hex_tab = this.hexcase ? \"0123456789ABCDEF\" : \"0123456789abcdef\";\r\n        var str = \"\";\r\n        for (var i = 0; i < binarray.length * 4; i++) {\r\n            str += hex_tab.charAt((binarray[i >> 2] >> ((i % 4) * 8 + 4)) & 0xF)\r\n        + hex_tab.charAt((binarray[i >> 2] >> ((i % 4) * 8)) & 0xF);\r\n        }\r\n        return str;\r\n    };\r\n\r\n    /*\r\n   * Convert an array of little-endian words to a base-64 string\r\n   */\r\n    MD5.prototype.binl2b64 = function (binarray) {\r\n        var tab = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\r\n        var str = \"\";\r\n        for (var i = 0; i < binarray.length * 4; i += 3) {\r\n            var triplet = (((binarray[i >> 2] >> 8 * (i % 4)) & 0xFF) << 16)\r\n        | (((binarray[i + 1 >> 2] >> 8 * ((i + 1) % 4)) & 0xFF) << 8)\r\n        | ((binarray[i + 2 >> 2] >> 8 * ((i + 2) % 4)) & 0xFF);\r\n            for (var j = 0; j < 4; j++) {\r\n                if (i * 8 + j * 6 > binarray.length * 32) {str += this.b64pad;} else {str += tab.charAt((triplet >> 6 * (3 - j)) & 0x3F);}\r\n            }\r\n        }\r\n        return str;\r\n    };\r\n    BI.MD5 = new MD5();\r\n})();","!(function () {\r\n    var DECRYPT = 0;\r\n    var ROUND = 32;\r\n    var BLOCK = 16;\r\n\r\n    // S盒\r\n    var Sbox = [\r\n        0xd6, 0x90, 0xe9, 0xfe, 0xcc, 0xe1, 0x3d, 0xb7, 0x16, 0xb6, 0x14, 0xc2, 0x28, 0xfb, 0x2c, 0x05,\r\n        0x2b, 0x67, 0x9a, 0x76, 0x2a, 0xbe, 0x04, 0xc3, 0xaa, 0x44, 0x13, 0x26, 0x49, 0x86, 0x06, 0x99,\r\n        0x9c, 0x42, 0x50, 0xf4, 0x91, 0xef, 0x98, 0x7a, 0x33, 0x54, 0x0b, 0x43, 0xed, 0xcf, 0xac, 0x62,\r\n        0xe4, 0xb3, 0x1c, 0xa9, 0xc9, 0x08, 0xe8, 0x95, 0x80, 0xdf, 0x94, 0xfa, 0x75, 0x8f, 0x3f, 0xa6,\r\n        0x47, 0x07, 0xa7, 0xfc, 0xf3, 0x73, 0x17, 0xba, 0x83, 0x59, 0x3c, 0x19, 0xe6, 0x85, 0x4f, 0xa8,\r\n        0x68, 0x6b, 0x81, 0xb2, 0x71, 0x64, 0xda, 0x8b, 0xf8, 0xeb, 0x0f, 0x4b, 0x70, 0x56, 0x9d, 0x35,\r\n        0x1e, 0x24, 0x0e, 0x5e, 0x63, 0x58, 0xd1, 0xa2, 0x25, 0x22, 0x7c, 0x3b, 0x01, 0x21, 0x78, 0x87,\r\n        0xd4, 0x00, 0x46, 0x57, 0x9f, 0xd3, 0x27, 0x52, 0x4c, 0x36, 0x02, 0xe7, 0xa0, 0xc4, 0xc8, 0x9e,\r\n        0xea, 0xbf, 0x8a, 0xd2, 0x40, 0xc7, 0x38, 0xb5, 0xa3, 0xf7, 0xf2, 0xce, 0xf9, 0x61, 0x15, 0xa1,\r\n        0xe0, 0xae, 0x5d, 0xa4, 0x9b, 0x34, 0x1a, 0x55, 0xad, 0x93, 0x32, 0x30, 0xf5, 0x8c, 0xb1, 0xe3,\r\n        0x1d, 0xf6, 0xe2, 0x2e, 0x82, 0x66, 0xca, 0x60, 0xc0, 0x29, 0x23, 0xab, 0x0d, 0x53, 0x4e, 0x6f,\r\n        0xd5, 0xdb, 0x37, 0x45, 0xde, 0xfd, 0x8e, 0x2f, 0x03, 0xff, 0x6a, 0x72, 0x6d, 0x6c, 0x5b, 0x51,\r\n        0x8d, 0x1b, 0xaf, 0x92, 0xbb, 0xdd, 0xbc, 0x7f, 0x11, 0xd9, 0x5c, 0x41, 0x1f, 0x10, 0x5a, 0xd8,\r\n        0x0a, 0xc1, 0x31, 0x88, 0xa5, 0xcd, 0x7b, 0xbd, 0x2d, 0x74, 0xd0, 0x12, 0xb8, 0xe5, 0xb4, 0xb0,\r\n        0x89, 0x69, 0x97, 0x4a, 0x0c, 0x96, 0x77, 0x7e, 0x65, 0xb9, 0xf1, 0x09, 0xc5, 0x6e, 0xc6, 0x84,\r\n        0x18, 0xf0, 0x7d, 0xec, 0x3a, 0xdc, 0x4d, 0x20, 0x79, 0xee, 0x5f, 0x3e, 0xd7, 0xcb, 0x39, 0x48\r\n    ];\r\n\r\n    // 固定参数 CK\r\n    var CK = [\r\n        0x00070e15, 0x1c232a31, 0x383f464d, 0x545b6269,\r\n        0x70777e85, 0x8c939aa1, 0xa8afb6bd, 0xc4cbd2d9,\r\n        0xe0e7eef5, 0xfc030a11, 0x181f262d, 0x343b4249,\r\n        0x50575e65, 0x6c737a81, 0x888f969d, 0xa4abb2b9,\r\n        0xc0c7ced5, 0xdce3eaf1, 0xf8ff060d, 0x141b2229,\r\n        0x30373e45, 0x4c535a61, 0x686f767d, 0x848b9299,\r\n        0xa0a7aeb5, 0xbcc3cad1, 0xd8dfe6ed, 0xf4fb0209,\r\n        0x10171e25, 0x2c333a41, 0x484f565d, 0x646b7279\r\n    ];\r\n\r\n    var b64 = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\r\n\r\n    function rotl (x, y) {\r\n        return x << y | x >>> (32 - y);\r\n    }\r\n\r\n    function byteSub (a) {\r\n        return (Sbox[a >>> 24 & 0xFF] & 0xFF) << 24 | (Sbox[a >>> 16 & 0xFF] & 0xFF) << 16 | (Sbox[a >>> 8 & 0xFF] & 0xFF) << 8 | (Sbox[a & 0xFF] & 0xFF);\r\n    }\r\n\r\n    function l1 (b) {\r\n        return b ^ rotl(b, 2) ^ rotl(b, 10) ^ rotl(b, 18) ^ rotl(b, 24);\r\n    }\r\n\r\n    function l2 (b) {\r\n        return b ^ rotl(b, 13) ^ rotl(b, 23);\r\n    }\r\n\r\n    function sms4Crypt (input, output, roundKey) {\r\n        var r;\r\n        var mid;\r\n        var x = new Array(4);\r\n        var tmp = new Array(4);\r\n        for (var i = 0; i < 4; i++) {\r\n            tmp[0] = input[0 + 4 * i] & 0xff;\r\n            tmp[1] = input[1 + 4 * i] & 0xff;\r\n            tmp[2] = input[2 + 4 * i] & 0xff;\r\n            tmp[3] = input[3 + 4 * i] & 0xff;\r\n            x[i] = tmp[0] << 24 | tmp[1] << 16 | tmp[2] << 8 | tmp[3];\r\n        }\r\n\r\n        for (r = 0; r < 32; r += 4) {\r\n            mid = x[1] ^ x[2] ^ x[3] ^ roundKey[r + 0];\r\n            mid = byteSub(mid);\r\n            x[0] = x[0] ^ l1(mid); // x4\r\n\r\n            mid = x[2] ^ x[3] ^ x[0] ^ roundKey[r + 1];\r\n            mid = byteSub(mid);\r\n            x[1] = x[1] ^ l1(mid); // x5\r\n\r\n            mid = x[3] ^ x[0] ^ x[1] ^ roundKey[r + 2];\r\n            mid = byteSub(mid);\r\n            x[2] = x[2] ^ l1(mid); // x6\r\n\r\n            mid = x[0] ^ x[1] ^ x[2] ^ roundKey[r + 3];\r\n            mid = byteSub(mid);\r\n            x[3] = x[3] ^ l1(mid); // x7\r\n        }\r\n\r\n        // Reverse\r\n        for (var j = 0; j < 16; j += 4) {\r\n            output[j] = x[3 - j / 4] >>> 24 & 0xff;\r\n            output[j + 1] = x[3 - j / 4] >>> 16 & 0xff;\r\n            output[j + 2] = x[3 - j / 4] >>> 8 & 0xff;\r\n            output[j + 3] = x[3 - j / 4] & 0xff;\r\n        }\r\n    }\r\n\r\n    /**\r\n   * 密钥扩展算法\r\n   * @param key\r\n   * @param roundKey\r\n   * @param cryptFlag\r\n   */\r\n    function sms4KeyExt (key, roundKey, cryptFlag) {\r\n        var r;\r\n        var mid;\r\n        var x = new Array(4);\r\n        var tmp = new Array(4);\r\n\r\n        for (var i = 0; i < 4; i++) {\r\n            tmp[0] = key[0 + 4 * i] & 0xff;\r\n            tmp[1] = key[1 + 4 * i] & 0xff;\r\n            tmp[2] = key[2 + 4 * i] & 0xff;\r\n            tmp[3] = key[3 + 4 * i] & 0xff;\r\n            x[i] = tmp[0] << 24 | tmp[1] << 16 | tmp[2] << 8 | tmp[3];\r\n        }\r\n\r\n        x[0] ^= 0xa3b1bac6;\r\n        x[1] ^= 0x56aa3350;\r\n        x[2] ^= 0x677d9197;\r\n        x[3] ^= 0xb27022dc;\r\n\r\n        for (r = 0; r < 32; r += 4) {\r\n            mid = x[1] ^ x[2] ^ x[3] ^ CK[r + 0];\r\n            mid = byteSub(mid);\r\n            roundKey[r + 0] = x[0] ^= l2(mid); // roundKey0 = K4\r\n\r\n            mid = x[2] ^ x[3] ^ x[0] ^ CK[r + 1];\r\n            mid = byteSub(mid);\r\n            roundKey[r + 1] = x[1] ^= l2(mid); // roundKey1 = K5\r\n\r\n            mid = x[3] ^ x[0] ^ x[1] ^ CK[r + 2];\r\n            mid = byteSub(mid);\r\n            roundKey[r + 2] = x[2] ^= l2(mid); // roundKey2 = K6\r\n\r\n            mid = x[0] ^ x[1] ^ x[2] ^ CK[r + 3];\r\n            mid = byteSub(mid);\r\n            roundKey[r + 3] = x[3] ^= l2(mid); // roundKey3 = K7\r\n        }\r\n\r\n        // 解密时轮密钥使用顺序：roundKey31, roundKey30, ..., roundKey0\r\n        if (cryptFlag === DECRYPT) {\r\n            for (r = 0; r < 16; r++) {\r\n                mid = roundKey[r];\r\n                roundKey[r] = roundKey[31 - r];\r\n                roundKey[31 - r] = mid;\r\n            }\r\n        }\r\n    }\r\n\r\n    function sm4 (inArray, key, cryptFlag) {\r\n        var outArray = [];\r\n        var point = 0;\r\n        var roundKey = new Array(ROUND);\r\n        sms4KeyExt(key, roundKey, cryptFlag);\r\n\r\n        var input = new Array(16);\r\n        var output = new Array(16);\r\n\r\n        var inLen = inArray.length;\r\n        while (inLen >= BLOCK) {\r\n            input = inArray.slice(point, point + 16);\r\n            sms4Crypt(input, output, roundKey);\r\n\r\n            for (var i = 0; i < BLOCK; i++) {\r\n                outArray[point + i] = output[i];\r\n            }\r\n\r\n            inLen -= BLOCK;\r\n            point += BLOCK;\r\n        }\r\n\r\n        return outArray;\r\n    }\r\n\r\n    /**\r\n   * 填充\r\n   * @param input 输入\r\n   * @param cryptFlag\r\n   * @returns {*}\r\n   */\r\n    function padding (input, cryptFlag) {\r\n        if (cryptFlag === DECRYPT) {\r\n            return input.slice(0, input.lastIndexOf(0x80));\r\n        }\r\n        var paddingLen = 16 - input.length % 16;\r\n        if (paddingLen > 0) {\r\n            input.push(0x80);\r\n        }\r\n        for (var i = 0; i < paddingLen - 1; i++) {\r\n            input.push(0x00);\r\n        }\r\n\r\n        return input;\r\n      \r\n    }\r\n\r\n    /**\r\n   * 字符串转bytes\r\n   * @param str\r\n   * @returns {[]}\r\n   */\r\n    function utf8StrToBytes (str) {\r\n        var input = unescape(encodeURIComponent(str));\r\n\r\n        var words = [];\r\n        for (var i = 0; i < input.length; i++) {\r\n            words[i] = input.charCodeAt(i);\r\n        }\r\n\r\n        return words;\r\n    }\r\n\r\n    /**\r\n   * bytes转字符串\r\n   * @param arr\r\n   * @returns {string}\r\n   */\r\n    function arrayToUtf8 (arr) {\r\n        var utf8Byte = arr;\r\n        var latin1Chars = [];\r\n        for (var i = 0; i < utf8Byte.length; i++) {\r\n            latin1Chars.push(String.fromCharCode(utf8Byte[i]));\r\n        }\r\n\r\n        return decodeURIComponent(escape(latin1Chars.join(\"\")));\r\n    }\r\n\r\n    /**\r\n   * btoa方法\r\n   * base64编码\r\n   * https://developer.mozilla.org/zh-CN/docs/Web/API/WindowBase64/btoa\r\n   * @param string\r\n   * @returns {string|string}\r\n   */\r\n    function encode (string) {\r\n        string = String(string);\r\n        var bitmap, a, b, c,\r\n            result = \"\",\r\n            i = 0,\r\n            rest = string.length % 3; // To determine the final padding\r\n\r\n        for (; i < string.length;) {\r\n            if ((a = string.charCodeAt(i++)) > 255 ||\r\n              (b = string.charCodeAt(i++)) > 255 ||\r\n              (c = string.charCodeAt(i++)) > 255) {\r\n                throw new TypeError(\"Failed to execute 'btoa' on 'Window': The string to be encoded contains characters outside of the Latin1 range.\");\r\n            }\r\n\r\n            bitmap = (a << 16) | (b << 8) | c;\r\n            result += b64.charAt(bitmap >> 18 & 63) + b64.charAt(bitmap >> 12 & 63) +\r\n              b64.charAt(bitmap >> 6 & 63) + b64.charAt(bitmap & 63);\r\n        }\r\n\r\n        // If there's need of padding, replace the last 'A's with equal signs\r\n        return rest ? result.slice(0, rest - 3) + \"===\".substring(rest) : result;\r\n    }\r\n\r\n    /**\r\n   * atob方法\r\n   * base64解码\r\n   * https://github.com/MaxArt2501/base64-js/blob/master/base64.js#L54\r\n   * @param string\r\n   * @returns {string}\r\n   */\r\n    function decode (str) {\r\n        // atob can work with strings with whitespaces, even inside the encoded part,\r\n        // but only \\t, \\n, \\f, \\r and ' ', which can be stripped.\r\n        str = String(str).replace(/[\\t\\n\\f\\r ]+/g, \"\");\r\n        if (!/^(?:[A-Za-z\\d+\\/]{4})*?(?:[A-Za-z\\d+\\/]{2}(?:==)?|[A-Za-z\\d+\\/]{3}=?)?$/.test(str)) {\r\n            throw new TypeError(\"Failed to execute 'atob' on 'Window': The string to be decoded is not correctly encoded.\");\r\n        }\r\n\r\n        // Adding the padding if missing, for semplicity\r\n        str += \"==\".slice(2 - (str.length & 3));\r\n        var bitmap, result = \"\", r1, r2, i = 0;\r\n        for (; i < str.length;) {\r\n            bitmap = b64.indexOf(str.charAt(i++)) << 18 | b64.indexOf(str.charAt(i++)) << 12\r\n              | (r1 = b64.indexOf(str.charAt(i++))) << 6 | (r2 = b64.indexOf(str.charAt(i++)));\r\n\r\n            result += r1 === 64 ? String.fromCharCode(bitmap >> 16 & 255)\r\n                : r2 === 64 ? String.fromCharCode(bitmap >> 16 & 255, bitmap >> 8 & 255)\r\n                    : String.fromCharCode(bitmap >> 16 & 255, bitmap >> 8 & 255, bitmap & 255);\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n   * byte数组转base64字符串\r\n   * @param buffer\r\n   * @returns {string}\r\n   */\r\n    function arrayBuffer2Base64 (buffer) {\r\n        var binary = \"\";\r\n        var len = buffer.length;\r\n        for (var i = 0; i < len; i++) {\r\n            binary += String.fromCharCode(buffer[i]);\r\n        }\r\n\r\n        return encode(binary);\r\n    }\r\n\r\n    /**\r\n   * base64字符串转byte数组\r\n   * @param str\r\n   * @returns {[]}\r\n   */\r\n    function base642ArrayBuffer (str) {\r\n        var input = decode(str);\r\n        var arr = [];\r\n        for (var i = 0; i < input.length; i++) {\r\n            arr[i] = input.charCodeAt(i);\r\n        }\r\n\r\n        return arr;\r\n    }\r\n\r\n    /**\r\n   * 16进制字符串转数组\r\n   * @param hex\r\n   * @returns {[]}\r\n   */\r\n    function hex2Array (hex) {\r\n        var arr = [];\r\n        for (var i = 0; i < hex.length; i += 2) {\r\n            arr.push(parseInt(hex.substr(i, 2), 16));\r\n        }\r\n\r\n        return arr;\r\n    }\r\n\r\n    var SM4 = function () {\r\n\r\n        /**\r\n       * 国密sm4算法 ecb模式加密\r\n       * @param str 明文字符串\r\n       * @param key 长度为16位的16进制字符串\r\n       * @returns {string} 密文字符串\r\n       */\r\n        this.ecbEncrypt = function (str, key) {\r\n            if (key.length !== 32 || /[^0-9a-fA-F]/.test(key)) {\r\n                throw new Error(\"key error\");\r\n            }\r\n\r\n            return arrayBuffer2Base64(sm4(padding(utf8StrToBytes(str)), hex2Array(key), 1));\r\n        };\r\n\r\n        /**\r\n       * 国密sm4算法 ecb模式解密\r\n       * @param str 密文字符串\r\n       * @param key 长度为16位的16进制字符串\r\n       * @returns {string} 明文字符串\r\n       */\r\n        this.ecbDecrypt = function (str, key) {\r\n            if (key.length !== 32 || /[^0-9a-fA-F]/.test(key)) {\r\n                throw new Error(\"key error\");\r\n            }\r\n\r\n            return arrayToUtf8(padding(sm4(base642ArrayBuffer(str), hex2Array(key), 0), 0));\r\n        };\r\n    };\r\n\r\n    BI.SM4 = new SM4();\r\n}());\r\n","/**\r\n * 校验器\r\n * qcc\r\n * 2019/12/23\r\n */\r\n\r\n!(function () {\r\n\r\n    // 一些规则参考，实际使用覆盖掉\r\n    var ruleMap = {\r\n        required: {\r\n            message: \"required\",\r\n            validate: function (value) {\r\n                return BI.isNotEmptyString(value) || BI.isNotEmptyArray(value) || BI.isNotEmptyObject(value);\r\n            }\r\n        },\r\n\r\n        range: {\r\n            validate: function(value, pars) {\r\n                if (BI.isNumeric(value)) {\r\n                    return value >= pars.min && value <= pars.max;\r\n                } else if (BI.isString(value)) {\r\n                    return BI.size(value) >= pars.min && BI.size(value) <= pars.max;\r\n                }\r\n                return false;\r\n            },\r\n            message: \"not in range\",\r\n            expects: [\"min\", \"max\"]\r\n        },\r\n\r\n        min: {\r\n            message: \"not min\",\r\n            validate: function(value, pars) {\r\n                return BI.size(value) >= pars.value;\r\n            },\r\n            expects: [\"value\"]\r\n        },\r\n\r\n        max: {\r\n            message: function(value, pars) {\r\n                return value + \" max than \" + pars.value;\r\n            },\r\n            validate: function(value, pars) {\r\n                return BI.size(value) <= pars.value;\r\n            },\r\n            expects: [\"value\"]\r\n        },\r\n\r\n        equal: {\r\n            message: \"not equal\",\r\n            validate: function(value, pars) {\r\n                return BI.isEqual(value, pars.value);\r\n            },\r\n            expects: [\"value\"]\r\n        },\r\n\r\n        regex: {\r\n            message: \"not match\",\r\n            validate: function(value, pars) {\r\n                if (BI.isRegExp(pars.value)) {\r\n                    return pars.value.test(value);\r\n                }\r\n                _global.console && console.error(pars.value + \" is not a valid regular expression\");\r\n            },\r\n            expects: [\"value\"]\r\n        }\r\n    };\r\n\r\n    /**\r\n     * 执行校验\r\n     * @param value\r\n     * @param rules\r\n     * @param stop\r\n     * @returns {{approved: boolean, errors: Array, rules: {}}}\r\n     * @private\r\n     */\r\n    function _start (value, rules, stop) {\r\n        var result = {\r\n            approved: true,\r\n            errors: [],\r\n            rules: {}\r\n        };\r\n\r\n        BI.each(rules, function (ruleName, rule) {\r\n            if (stop && !result.approved) {\r\n                return false;\r\n            }\r\n\r\n            if (BI.has(ruleMap, ruleName)) {\r\n                if (rule === false) {\r\n                    return;\r\n                }\r\n                var args = _getArgs(rule, ruleMap[ruleName]),\r\n                    res = ruleMap[ruleName].validate(value, args);\r\n\r\n                var errMsg = BI.has(rule, \"message\") ? rule.message : ruleMap[ruleName].message;\r\n                errMsg = BI.isFunction(errMsg) ? errMsg(value, args) : errMsg;\r\n\r\n                // errMsg = BI.i18nText.apply(BI, [errMsg].concat(BI.values(args)));\r\n\r\n                result[\"rules\"][ruleName] = {\r\n                    approved: res,\r\n                    errors: res ? \"\" : errMsg\r\n                };\r\n                if (!res) {\r\n                    result.errors.push(errMsg);\r\n                    result.approved = false;\r\n                }\r\n            } else {\r\n                _global.console && console.error(ruleName + \" is not support\");\r\n            }\r\n        });\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * 获取校验方法的参数\r\n     * @param constraint\r\n     * @param rule\r\n     * @private\r\n     */\r\n    function _getArgs (constraint, rule) {\r\n        var pars = {},\r\n            options = rule.options,\r\n            expects = rule.expects,\r\n            len = BI.size(expects);\r\n\r\n        if (BI.isNotEmptyArray(expects)) {\r\n            BI.each(expects, function(i, expect) {\r\n                if (BI.has(constraint, expect)) {\r\n                    pars[expect] = constraint[expect];\r\n                } else if (len <= 1 && (BI.isKey(constraint) || BI.isRegExp(constraint))) {\r\n                    pars[expect] = constraint;\r\n                } else if (len <= 1 && BI.isFunction(constraint)) {\r\n                    pars[expect] = constraint();\r\n                } else {\r\n                    _global.console && console.error(\"expects the \" + expects + \" parameter\");\r\n                }\r\n            });\r\n        }\r\n\r\n        if (BI.isNotEmptyArray(options)) {\r\n            BI.each(options, function(i, option) {\r\n                if (BI.has(constraint, option)) {\r\n                    pars[option] = constraint[option];\r\n                }\r\n            });\r\n        }\r\n\r\n        return pars;\r\n    }\r\n\r\n    var validator = function () {\r\n\r\n        /**\r\n         * 初始化规则\r\n         * 定义统一的规则\r\n         * @param rules\r\n         */\r\n        this.init = function (rules) {\r\n            ruleMap = BI.extend(ruleMap, rules);\r\n        };\r\n\r\n        /**\r\n         * 校验是否符合规则\r\n         * @param val: any 校验值\r\n         * @param rules: Object 规则\r\n         * @param stop: boolean 是否出现错误就停止\r\n         * @returns {{approved: boolean, errors: Array, rules: {}}}\r\n         */\r\n        this.validate = function (val, rules, stop) {\r\n            if (BI.isObject(rules)) {\r\n                return _start(val, rules, stop);\r\n            }\r\n        };\r\n\r\n        /**\r\n         * 添加校验规则，不能覆盖已有规则\r\n         * @param name: string 规则名称\r\n         * @param rule: Object 规则\r\n         */\r\n        this.addRule = function (name, rule) {\r\n            if (BI.has(ruleMap, name)) {\r\n                _global.console && console.error(\"rule:[\" + name + \"] has been registed\");\r\n                return;\r\n            }\r\n            ruleMap[name] = rule;\r\n        };\r\n    };\r\n\r\n    BI.validator = new validator();\r\n})();","/**\r\n * Created by lei.wang on 2018/11/2.\r\n */\r\n(function () {\r\n    BI.SearchIconTextValueCombo = BI.inherit(BI.Widget, {\r\n\r\n        props: {\r\n            baseCls: \"bi-material-search-icon-text-value-combo\",\r\n            height: 24,\r\n            text: \"\",\r\n            items: [],\r\n            iconCls: \"\",\r\n            tipType: \"\",\r\n            warningTitle: \"\",\r\n            attributes: {\r\n                tabIndex: 0\r\n            }\r\n        },\r\n\r\n        render: function () {\r\n            var self = this, o = this.options;\r\n            return {\r\n                type: \"bi.absolute\",\r\n                items: [{\r\n                    el: {\r\n                        type: \"bi.combo\",\r\n                        container: o.container,\r\n                        adjustLength: 2,\r\n                        toggle: false,\r\n                        ref: function () {\r\n                            self.combo = this;\r\n                        },\r\n                        el: {\r\n                            type: \"bi.material.search_icon_text_value_trigger\",\r\n                            simple: o.simple,\r\n                            cls: \"search-text-value-trigger\",\r\n                            ref: function () {\r\n                                self.trigger = this;\r\n                            },\r\n                            items: o.items,\r\n                            height: o.height - (o.simple ? 1 : 2),\r\n                            text: o.text,\r\n                            value: o.value,\r\n                            tipType: o.tipType,\r\n                            iconCls: o.iconCls,\r\n                            warningTitle: o.warningTitle,\r\n                            title: o.title,\r\n                            listeners: [{\r\n                                eventName: BI.SearchTextValueTrigger.EVENT_CHANGE,\r\n                                action: function () {\r\n                                    self.setValue(this.getValue());\r\n                                    self.combo.hideView();\r\n                                    self.fireEvent(\"EVENT_CHANGE\");\r\n                                }\r\n                            }]\r\n                        },\r\n                        popup: {\r\n                            el: {\r\n                                type: \"bi.icon_text_value_combo_popup\",\r\n                                chooseType: BI.ButtonGroup.CHOOSE_TYPE_SINGLE,\r\n                                value: o.value,\r\n                                items: o.items,\r\n                                ref: function () {\r\n                                    self.popup = this;\r\n                                    self.trigger.getSearcher().setAdapter(self.popup);\r\n                                },\r\n                                listeners: [{\r\n                                    eventName: BI.TextValueComboPopup.EVENT_CHANGE,\r\n                                    action: function () {\r\n                                        self.setValue(this.getValue());\r\n                                        self.combo.hideView();\r\n                                        self.fireEvent(\"EVENT_CHANGE\");\r\n                                    }\r\n                                }]\r\n                            },\r\n                            maxHeight: 252\r\n                        },\r\n                        listeners: [{\r\n                            eventName: BI.Combo.EVENT_AFTER_HIDEVIEW,\r\n                            action: function () {\r\n                                self.trigger.stopEditing();\r\n                            }\r\n                        }, {\r\n                            eventName: BI.Combo.EVENT_BEFORE_POPUPVIEW,\r\n                            action: function () {\r\n                                self.fireEvent(\"EVENT_BEFORE_POPUPVIEW\");\r\n                            }\r\n                        }],\r\n                        hideChecker: function (e) {\r\n                            return self.triggerBtn.element.find(e.target).length === 0;\r\n                        }\r\n                    },\r\n                    left: 0,\r\n                    right: 0,\r\n                    bottom: 0,\r\n                    top: 0\r\n                }, {\r\n                    el: {\r\n                        type: \"bi.trigger_icon_button\",\r\n                        cls: \"trigger-icon-button\",\r\n                        ref: function () {\r\n                            self.triggerBtn = this;\r\n                        },\r\n                        width: o.height,\r\n                        height: o.height,\r\n                        handler: function () {\r\n                            if (self.combo.isViewVisible()) {\r\n                                self.combo.hideView();\r\n                            } else {\r\n                                self.combo.showView();\r\n                            }\r\n                        }\r\n                    },\r\n                    right: 0,\r\n                    bottom: 0,\r\n                    top: 0\r\n                }]\r\n            };\r\n        },\r\n\r\n        mounted: function () {\r\n            var o = this.options;\r\n            if(BI.isKey(o.value)) {\r\n                this._checkError(o.value);\r\n            }\r\n        },\r\n\r\n        _checkError: function (v) {\r\n            if(BI.isNotNull(v)) {\r\n                v = BI.isArray(v) ? v : [v];\r\n                var result = BI.find(this.options.items, function (idx, item) {\r\n                    return BI.contains(v, item.value);\r\n                });\r\n                if (BI.isNull(result)) {\r\n                    this.element.removeClass(\"combo-error\").addClass(\"combo-error\");\r\n                    this.trigger.attr(\"tipType\", \"warning\");\r\n                } else {\r\n                    this.element.removeClass(\"combo-error\");\r\n                    this.trigger.attr(\"tipType\", \"success\");\r\n                }\r\n            }\r\n        },\r\n\r\n        populate: function (items) {\r\n            this.options.items = items;\r\n            this.combo.populate(items);\r\n        },\r\n\r\n        setValue: function (v) {\r\n            this.combo.setValue(v);\r\n            this._checkError(v);\r\n        },\r\n\r\n        getValue: function () {\r\n            var value = this.popup.getValue();\r\n            return BI.isNull(value) ? [] : (BI.isArray(value) ? value : [value]);\r\n        }\r\n    });\r\n\r\n    BI.shortcut(\"bi.material.search_icon_text_value_combo\", BI.SearchIconTextValueCombo);\r\n}());\r\n","/**\r\n * Created by lei.wang on 2018/11/2.\r\n */\r\n(function () {\r\n    var Trigger = BI.inherit(BI.Trigger, {\r\n\r\n        props: function (opt) {\r\n            return {\r\n                extraCls: \"bi-material-search-icon-text-trigger \" + (opt.simple ? \"bi-border-bottom\" : \"bi-border\"),\r\n                height: 24\r\n            }\r\n        },\r\n\r\n        render: function () {\r\n            var self = this, o = this.options;\r\n            var iconCls = this._digistIcon(o.value, o.items);\r\n            return {\r\n                type: \"bi.htape\",\r\n                items: [\r\n                    {\r\n                        el: {\r\n                            type: \"bi.icon_change_button\",\r\n                            cls: \"icon-combo-trigger-icon\",\r\n                            iconCls: iconCls,\r\n                            ref: function (_ref) {\r\n                                self.icon = _ref;\r\n                            },\r\n                            disableSelected: true\r\n                        },\r\n                        vgap: 3,\r\n                        width: !BI.isKey(iconCls) ? 0 : (o.iconWrapperWidth || o.height)\r\n                    },\r\n                    {\r\n                        el: {\r\n                            type: \"bi.searcher\",\r\n                            ref: function () {\r\n                                self.searcher = this;\r\n                            },\r\n                            isAutoSearch: false,\r\n                            el: {\r\n                                type: \"bi.state_editor\",\r\n                                ref: function () {\r\n                                    self.editor = this;\r\n                                },\r\n                                defaultText: this._getText(),\r\n                                text: o.text,\r\n                                value: o.value,\r\n                                height: o.height,\r\n                                tipText: \"\"\r\n                            },\r\n                            popup: {\r\n                                type: \"bi.icon_text_value_combo_popup\",\r\n                                cls: \"bi-card\",\r\n                                chooseType: BI.ButtonGroup.CHOOSE_TYPE_SINGLE\r\n                            },\r\n                            onSearch: function (obj, callback) {\r\n                                var keyword = obj.keyword;\r\n                                var finding = BI.Func.getSearchResult(o.items, keyword);\r\n                                var matched = finding.match, find = finding.find;\r\n                                var items = BI.concat(find, matched);\r\n                                callback(items);\r\n                            },\r\n                            listeners: [{\r\n                                eventName: BI.Searcher.EVENT_CHANGE,\r\n                                action: function () {\r\n                                    self.fireEvent(\"EVENT_CHANGE\");\r\n                                }\r\n                            }]\r\n                        }\r\n                    }, {\r\n                        el: {\r\n                            type: \"bi.layout\",\r\n                            width: 24\r\n                        },\r\n                        width: 24\r\n                    }\r\n                ],\r\n                ref: function (_ref) {\r\n                    self.wrapper = _ref;\r\n                }\r\n            };\r\n        },\r\n\r\n        _setState: function (v) {\r\n            this.editor.setState(v);\r\n        },\r\n\r\n        _getText: function () {\r\n            var o = this.options;\r\n            return (BI.isKey(o.value) && o.text === this._digest(o.value, o.items)) ? \"\" : o.text;\r\n        },\r\n\r\n        _digest: function (vals, items) {\r\n            var o = this.options;\r\n            vals = BI.isArray(vals) ? vals : [vals];\r\n            var result = [];\r\n            var formatItems = BI.Tree.transformToArrayFormat(items);\r\n            BI.each(formatItems, function (i, item) {\r\n                if (BI.deepContains(vals, item.value) && !BI.contains(result, item.text || item.value)) {\r\n                    result.push(item.text || item.value);\r\n                }\r\n            });\r\n\r\n            if (result.length > 0) {\r\n                return result.join(\",\");\r\n            }\r\n            return o.text;\r\n\r\n        },\r\n\r\n        _digistIcon: function (vals, items) {\r\n            var o = this.options;\r\n            vals = BI.isArray(vals) ? vals : [vals];\r\n            var result;\r\n            var formatItems = BI.Tree.transformToArrayFormat(items);\r\n            BI.any(formatItems, function (i, item) {\r\n                if (BI.deepContains(vals, item.value)) {\r\n                    result = {\r\n                        text: item.text || item.value,\r\n                        iconCls: item.iconCls\r\n                    };\r\n                    return true;\r\n                }\r\n            });\r\n\r\n            if (BI.isNotNull(result)) {\r\n                return result.iconCls;\r\n            }\r\n            return o.iconCls;\r\n        },\r\n\r\n        stopEditing: function () {\r\n            this.searcher.stopSearch();\r\n        },\r\n\r\n        getSearcher: function () {\r\n            return this.searcher;\r\n        },\r\n\r\n        populate: function (items) {\r\n            this.options.items = items;\r\n        },\r\n\r\n        setValue: function (vals) {\r\n            var iconCls = this._digistIcon(vals, this.options.items);\r\n            this.setIcon(iconCls);\r\n            this._setState(this._digest(vals, this.options.items));\r\n        },\r\n\r\n        setIcon: function (iconCls) {\r\n            var o = this.options;\r\n            this.icon.setIcon(iconCls);\r\n            var iconItem = this.wrapper.attr(\"items\")[0];\r\n            if(!BI.isKey(iconCls)) {\r\n                if(iconItem.width !== 0) {\r\n                    iconItem.width = 0;\r\n                    this.wrapper.resize();\r\n                }\r\n            }else {\r\n                if(iconItem.width !== (o.iconWrapperWidth || o.height)) {\r\n                    iconItem.width = (o.iconWrapperWidth || o.height);\r\n                    this.wrapper.resize();\r\n                }\r\n            }\r\n        },\r\n\r\n        getValue: function () {\r\n            return this.searcher.getValue();\r\n        }\r\n    });\r\n\r\n    BI.shortcut(\"bi.material.search_icon_text_value_trigger\", Trigger);\r\n}());\r\n","/**\r\n *@desc  全屏操作控制器\r\n *@author dailer\r\n *@date 2018/09/29\r\n */\r\n\r\n!(function () {\r\n    BI.FullScreenController = BI.inherit(BI.Controller, {\r\n        props: {},\r\n\r\n        _init: function () {\r\n            BI.FullScreenController.superclass._init.apply(this, arguments);\r\n            this.exitHandlers = [];\r\n        },\r\n\r\n        requestFullScreen: function (target, complete, exitHandler) {\r\n            if (BI.isNull(this.support)) {\r\n                this.support = this._checkSupportScreenHandler();\r\n            }\r\n            if (!this.support) {\r\n                BI.Msg.toast(BI.i18nText(\"fullscreen api not support\"), {\r\n                    level: \"error\"\r\n                });\r\n                complete(false);\r\n                return;\r\n            }\r\n            if (BI.isWidget(target)) {\r\n                target = target.element[0];\r\n            }\r\n            this._launchFullScreen(target, exitHandler);\r\n            complete.call(this, true);\r\n        },\r\n\r\n        //  获取当前全屏的元素\r\n        getFullScreenElement: function () {\r\n            return (\r\n                document.fullscreenElement ||\r\n                document.webkitFullscreenElement ||\r\n                document.msFullscreenElement ||\r\n                document.mozFullScreenElement ||\r\n                null);\r\n        },\r\n\r\n        //  是否全屏\r\n        isFullScreen: function (doc) {\r\n            doc = doc || document;\r\n            return !!(doc.fullscreenElement ||\r\n                doc.webkitFullscreenElement ||\r\n                doc.mozFullScreenElement ||\r\n                doc.msFullscreenElement || null);\r\n        },\r\n\r\n        //  退出全屏\r\n        exitFullScreen: function () {\r\n            this._existFullscreenHandler();\r\n\r\n            if (document.exitFullscreen) {\r\n                document.exitFullscreen();\r\n            } else if (document.mozCancelFullScreen) {\r\n                document.mozCancelFullScreen();\r\n            } else if (document.webkitExitFullscreen) {\r\n                document.webkitExitFullscreen();\r\n            } else if (document.msExitFullscreen) {\r\n                document.msExitFullscreen();\r\n            }\r\n            BI.each(this.exitHandlers, function (index, handler) {\r\n                BI.isFunction(handler) && handler();\r\n            });\r\n            return this;\r\n        },\r\n\r\n        _launchFullScreen: function (element, exitHandler) {\r\n            var self = this;\r\n            if (element.requestFullscreen) {\r\n                element.requestFullscreen();\r\n            } else if (element.mozRequestFullScreen) {\r\n                element.mozRequestFullScreen();\r\n            } else if (element.msRequestFullscreen) {\r\n                element.msRequestFullscreen();\r\n            } else if (element.webkitRequestFullscreen) {\r\n                element.webkitRequestFullScreen();\r\n            }\r\n\r\n            BI.$(element).addClass(\"bi-fullscreen-element\");\r\n            this.fullscreenElement = element;\r\n            //  解决按esc键的状态问题\r\n            BI.$(document).bind(\"fullscreenchange webkitfullscreenchange mozfullscreenchange MSFullscreenChange\", function () {\r\n                if (!self.isFullScreen()) {\r\n                    BI.isFunction(exitHandler) && exitHandler();\r\n                    self.exitHandlers = [];\r\n                    self._existFullscreenHandler();\r\n                    BI.$(document).unbind(\"fullscreenchange webkitfullscreenchange mozfullscreenchange MSFullscreenChange\");\r\n                }\r\n            });\r\n        },\r\n\r\n        _checkSupportScreenHandler: function () {\r\n            var requestFullScreen;\r\n            if (document.body) {\r\n                requestFullScreen = document.body.requestFullscreen ||\r\n                    document.body.webkitRequestFullscreen ||\r\n                    document.body.mozRequestFullScreen ||\r\n                    document.body.msRequestFullscreen;\r\n            }\r\n            var fullscreenEnabled =\r\n                document.fullscreenEnabled ||\r\n                document.mozFullScreenEnabled ||\r\n                document.webkitFullscreenEnabled ||\r\n                document.msFullscreenEnabled;\r\n            return !!(requestFullScreen && fullscreenEnabled);\r\n        },\r\n\r\n        _existFullscreenHandler: function () {\r\n            var element = this.getFullScreenElement() || this.fullscreenElement;\r\n\r\n            if (element) {\r\n                BI.$(element).removeClass(\"bi-fullscreen-element\");\r\n            }\r\n\r\n            this.fullscreenElement = null;\r\n        }\r\n    });\r\n\r\n\r\n    BI.FullScreen = new BI.FullScreenController();\r\n})();\r\n","/**\r\n * 过滤条件抽象类\r\n *\r\n * @class BI.AbstractFilterItem\r\n * @extend BI.Widget\r\n */\r\nBI.AbstractFilterItem = BI.inherit(BI.Widget, {\r\n\r\n    props: {\r\n        baseCls: \"bi-filter-item bi-border-right bi-border-bottom\"\r\n    },\r\n\r\n    isSelectedCondition: function () {\r\n        return this.emptyItem && this.emptyItem.isVisible();\r\n    },\r\n\r\n    setSelectedCondition: function (b) {\r\n        if (b) {\r\n            if (!this.emptyItem) {\r\n                this.emptyItem = BI.createWidget({\r\n                    type: \"bi.absolute\",\r\n                    height: 40,\r\n                    cls: \"filter-item-empty-item bi-border-top\",\r\n                    items: [{\r\n                        el: {\r\n                            type: \"bi.center_adapt\",\r\n                            cls: \"empty-filter-item-leaf\"\r\n                        }\r\n                    }],\r\n                    hgap: 10,\r\n                    vgap: 5\r\n                });\r\n                BI.createWidget({\r\n                    type: \"bi.vertical\",\r\n                    element: this,\r\n                    items: [this.emptyItem],\r\n                    scrolly: false\r\n                });\r\n            }\r\n        }\r\n        this.emptyItem && this.emptyItem.setVisible(b);\r\n    }\r\n});\r\nBI.extend(BI.AbstractFilterItem, {\r\n    FILTER_OPERATION_FORMULA: 1,\r\n    FILTER_OPERATION_CONDITION: 2,\r\n    FILTER_OPERATION_CONDITION_AND: 3,\r\n    FILTER_OPERATION_CONDITION_OR: 4,\r\n    FILTER_OPERATION_FORMULA_AND: 5,\r\n    FILTER_OPERATION_FORMULA_OR: 6,\r\n    FILTER_OPERATION_SHAKE: 7\r\n});","/**\r\n * Created by Urthur on 2017/11/21.\r\n */\r\n!(function () {\r\n    BI.AndOrFilterExpander = BI.inherit(BI.Widget, {\r\n        props: {\r\n            baseCls: \"bi-filter-expander\",\r\n            el: {},\r\n            popup: {}\r\n        },\r\n\r\n        render: function () {\r\n            var self = this, o = this.options;\r\n            return {\r\n                type: \"bi.filter_expander\",\r\n                switchable: o.switchable,\r\n                el: o.el,\r\n                popup: o.popup,\r\n                id: o.id,\r\n                value: o.value,\r\n                listeners: [{\r\n                    eventName: BI.Controller.EVENT_CHANGE,\r\n                    action: function () {\r\n                        self.fireEvent(BI.Controller.EVENT_CHANGE, arguments);\r\n                    }\r\n                }],\r\n                ref: function (_ref) {\r\n                    self.expander = _ref;\r\n                }\r\n            };\r\n        },\r\n\r\n        populate: function () {\r\n            this.expander.populate.apply(this.expander, arguments);\r\n        },\r\n\r\n        getValue: function () {\r\n            var val = this.expander.getValue();\r\n            return {\r\n                filterType: val.type,\r\n                filterValue: val.value,\r\n                id: val.id\r\n            };\r\n        }\r\n    });\r\n    BI.shortcut(\"bi.and.or.filter.expander\", BI.AndOrFilterExpander);\r\n}());","/**\r\n * @class BI.FilterExpander\r\n * @extend BI.AbstractFilterItem\r\n * 过滤树的一个expander节点\r\n */\r\n!(function () {\r\n    var FilterExpander = BI.inherit(BI.AbstractFilterItem, {\r\n        _constant: {\r\n            EXPANDER_WIDTH: 30\r\n        },\r\n\r\n        props: {\r\n            baseCls: \"bi-filter-expander-item bi-filter-expander bi-border-left bi-border-bottom\",\r\n            el: {},\r\n            popup: {},\r\n            switchable: true\r\n        },\r\n\r\n        render: function () {\r\n            var self = this, o = this.options;\r\n            var value = o.el.value;\r\n\r\n            return {\r\n                type: \"bi.horizontal_adapt\",\r\n                cls: \"filter-item-empty-item\",\r\n                horizontalAlign: BI.HorizontalAlign.Stretch,\r\n                columnSize: [this._constant.EXPANDER_WIDTH, \"fill\"],\r\n                verticalAlign: BI.VerticalAlign.Middle,\r\n                items: [{\r\n                    type: \"bi.absolute\",\r\n                    cls: \"filter-item-expander-wrapper\",\r\n                    items: [{\r\n                        el: {\r\n                            type: \"bi.text_button\",\r\n                            $testId: \"bi-materials-filter-and-or-expander\",\r\n                            cls: \"condition-and-or\",\r\n                            text: this._getText(value),\r\n                            value: value,\r\n                            id: o.id,\r\n                            width: this._constant.EXPANDER_WIDTH,\r\n                            height: \"100%\",\r\n                            ref: function (_ref) {\r\n                                self.expander = _ref;\r\n                            },\r\n                            listeners: [{\r\n                                eventName: BI.TextButton.EVENT_CHANGE,\r\n                                action: function () {\r\n                                    self.fireEvent(BI.Controller.EVENT_CHANGE, BI.Events.CLICK, \"\", self);\r\n                                }\r\n                            }]\r\n                        },\r\n                        left: 0,\r\n                        top: 0,\r\n                        right: 0,\r\n                        bottom: 0\r\n                    }, {\r\n                        el: {\r\n                            type: \"bi.icon_button\",\r\n                            invisible: !o.switchable,\r\n                            stopPropagation: true,\r\n                            cls: \"change-and-or-font\",\r\n                            title: BI.i18nText(\"BI-Basic_Switch\"),\r\n                            handler: function () {\r\n                                self.switchText();\r\n                                self.fireEvent(BI.Controller.EVENT_CHANGE, BI.Events.CLICK, true, self);\r\n                            }\r\n                        },\r\n                        top: 10,\r\n                        width: 16,\r\n                        height: 16,\r\n                        left: 7\r\n                    }],\r\n                    width: this._constant.EXPANDER_WIDTH,\r\n                    height: \"100%\"\r\n                }, BI.extend(o.popup, {\r\n                    ref: function (_ref) {\r\n                        self.conditionsView = _ref;\r\n                    },\r\n                    listeners: [{\r\n                        eventName: BI.Controller.EVENT_CHANGE,\r\n                        action: function () {\r\n                            self.fireEvent(BI.Controller.EVENT_CHANGE, arguments);\r\n                        }\r\n                    }]\r\n                })]\r\n            };\r\n        },\r\n\r\n        _getText: function (value) {\r\n            var text = \"\";\r\n            if (value === BI.Filter.FILTER_TYPE.AND) {\r\n                text = BI.i18nText(\"BI-Basic_And\");\r\n            } else {\r\n                text = BI.i18nText(\"BI-Basic_Or\");\r\n            }\r\n            return text;\r\n        },\r\n\r\n        switchText: function () {\r\n            var value = this.expander.getValue() === BI.Filter.FILTER_TYPE.AND ? BI.Filter.FILTER_TYPE.OR : BI.Filter.FILTER_TYPE.AND;\r\n            this.expander.setValue(value);\r\n            this.expander.setText(this._getText(value));\r\n        },\r\n\r\n        getValue: function () {\r\n            return {\r\n                type: this.expander.getValue(),\r\n                value: this.conditionsView.getValue(),\r\n                id: this.options.id\r\n            };\r\n        },\r\n\r\n        populate: function () {\r\n            this.conditionsView.populate.apply(this.conditionsView, arguments);\r\n        }\r\n    });\r\n    BI.shortcut(\"bi.filter_expander\", FilterExpander);\r\n}());\r\n","/**\r\n * 过滤\r\n *\r\n * Created by GUY on 2015/11/20.\r\n * @class BI.Filter\r\n * @extend BI.Widget\r\n */\r\nBI.Filter = BI.inherit(BI.Widget, {\r\n\r\n    constants: {\r\n        FIELD_TYPE_NUMBER: 1,\r\n        FIELD_TYPE_STRING: 0,\r\n        FIELD_TYPE_DATE: 2\r\n    },\r\n\r\n    props: {\r\n        baseCls: \"bi-filter\",\r\n        expander: {},\r\n        items: [],\r\n        el: {},\r\n        itemCreator: BI.empty\r\n    },\r\n\r\n    _store: function () {\r\n        return BI.Models.getModel(\"bi.model.material.filter\");\r\n    },\r\n\r\n    watch: {\r\n        shakeTree: function () {\r\n            this.shakeTree();\r\n        }\r\n    },\r\n\r\n    render: function () {\r\n        var self = this, o = this.options;\r\n        return BI.extend({\r\n            type: \"bi.filter_operation\",\r\n            addWarningTitle: o.addWarningTitle,\r\n            expander: o.expander,\r\n            listeners: [{\r\n                eventName: \"EVENT_OPERATION\",\r\n                action: function (type) {\r\n                    switch (type) {\r\n                        case BI.AbstractFilterItem.FILTER_OPERATION_CONDITION:\r\n                            self.store.addCondition();\r\n                            self._addAndOrCondition(BI.Filter.FILTER_TYPE.EMPTY_CONDITION);\r\n                            break;\r\n                        case BI.AbstractFilterItem.FILTER_OPERATION_CONDITION_AND:\r\n                            self.store.addAndCondition();\r\n                            self._addAndOrCondition(BI.Filter.FILTER_TYPE.EMPTY_CONDITION);\r\n                            break;\r\n                        case BI.AbstractFilterItem.FILTER_OPERATION_CONDITION_OR:\r\n                            self.store.addOrCondition();\r\n                            self._addAndOrCondition(BI.Filter.FILTER_TYPE.EMPTY_CONDITION, 1);\r\n                            break;\r\n                        case BI.AbstractFilterItem.FILTER_OPERATION_FORMULA:\r\n                            self.store.addFormula();\r\n                            self._addAndOrCondition(BI.Filter.FILTER_TYPE.EMPTY_FORMULA);\r\n                            break;\r\n                        case BI.AbstractFilterItem.FILTER_OPERATION_FORMULA_AND:\r\n                            self.store.addAndFormula();\r\n                            self._addAndOrCondition(BI.Filter.FILTER_TYPE.EMPTY_FORMULA);\r\n                            break;\r\n                        case BI.AbstractFilterItem.FILTER_OPERATION_FORMULA_OR:\r\n                            self.store.addOrFormula();\r\n                            self._addAndOrCondition(BI.Filter.FILTER_TYPE.EMPTY_FORMULA, 1);\r\n                            break;\r\n                        case BI.AbstractFilterItem.FILTER_OPERATION_SHAKE:\r\n                            self.store.shakeTree();\r\n                            break;\r\n                    }\r\n                }\r\n            }, {\r\n                eventName: \"BI.FilterOperation.EVENT_DESTROY_ITEM\",\r\n                action: function (id) {\r\n                    self._removeCondition(id);\r\n                }\r\n            }, {\r\n                eventName: \"EVENT_CLICK_EXPANDER\",\r\n                action: function (type, value, obj) {\r\n                    self._switchConditionLink(obj);\r\n                    self._checkBeautifyLevelNecessary();\r\n                    self.fireEvent(\"EVENT_CHANGE\");\r\n                }\r\n            }],\r\n            ref: function (_ref) {\r\n                self.filter = _ref;\r\n            }\r\n        }, o.el);\r\n    },\r\n\r\n    mounted: function () {\r\n        this.tree = new BI.Tree();\r\n        this.tree.initTree(this.options.items);\r\n        this._populate(this.tree.toJSONWithNode());\r\n    },\r\n\r\n    _checkBeautifyLevelNecessary: function () {\r\n        this.filter.setBeautifyButtonVisible(this._checkLevelStructure(this.tree.getRoot()));\r\n    },\r\n\r\n    _checkLevelStructure: function (node, pnode) {\r\n        var self = this;\r\n        var children = node.getChildren();\r\n        if (BI.isNotNull(pnode)) {\r\n            var pdata = pnode.get(\"data\"), data = node.get(\"data\");\r\n            // 父子节点类型相同, 就是存在可合并类型，直接返回\r\n            if(BI.isNotNull(pdata) && pdata.value === data.value) {\r\n                return true;\r\n            }\r\n        }\r\n        return BI.any(children, function (idx, child) {\r\n            return self._checkLevelStructure(child, node);\r\n        });\r\n    },\r\n\r\n    _switchConditionLink: function (obj) {\r\n        var finded = this.tree.search(obj.attr(\"id\"));\r\n        if (BI.isNotNull(finded)) {\r\n            var data = finded.get(\"data\");\r\n            data.value = data.value === BI.Filter.FILTER_TYPE.AND ? BI.Filter.FILTER_TYPE.OR : BI.Filter.FILTER_TYPE.AND;\r\n        }\r\n    },\r\n\r\n    _createEmptyNode: function (type) {\r\n        var node = new BI.Node(BI.UUID());\r\n        node.set(\"data\", {\r\n            value: type\r\n        });\r\n        return node;\r\n    },\r\n\r\n    _insertAndOrCondition: function (id, formulaOrField, type) {\r\n        var ANDOR = [\"AND\", \"OR\"];\r\n        type || (type = 0);\r\n        var finded = this.tree.search(id); // finded节点是selectItem的父节点\r\n        if (BI.isNotNull(finded)) {\r\n            var data = finded.get(\"data\"); // 父亲的数据\r\n            var parent = finded.getParent(); // 祖父节点\r\n            var index = parent.getChildIndex(finded.id); // 父亲所在祖父下的索引\r\n            var pdata = parent.get(\"data\") || {}; // 祖父数据\r\n            var node = this._createEmptyNode(formulaOrField);\r\n            if (data.value === BI.Filter.FILTER_TYPE[ANDOR[type]]) {\r\n                this.tree.addNode(finded, node); // 和父亲节点类型相同直接作为儿子节点添加进去\r\n                return;\r\n            }\r\n            if (data.value === BI.Filter.FILTER_TYPE[ANDOR[1 - type]]) { // 相反\r\n                if (pdata.value === BI.Filter.FILTER_TYPE[ANDOR[type]]) { // 但是和祖父相同\r\n                    parent.addChild(node, index + 1); // 作为父亲的兄弟，添加到父亲之后\r\n                    return;\r\n                }\r\n            }\r\n            // 类型与父亲节点相反 && 和祖父节点不同(祖父有可能为空) 或者 与祖父节点相反 或者 祖父节点类型不是and且祖父节点不是or(为空)\r\n            if ((data.value === BI.Filter.FILTER_TYPE[ANDOR[1 - type]] && pdata.value !== BI.Filter.FILTER_TYPE[ANDOR[type]])\r\n                || pdata.value === BI.Filter.FILTER_TYPE[ANDOR[1 - type]]\r\n                || (pdata.value !== BI.Filter.FILTER_TYPE.AND && pdata.value !== BI.Filter.FILTER_TYPE.OR)) {\r\n                var andor = new BI.Node(BI.UUID());\r\n                andor.set(\"data\", {\r\n                    value: BI.Filter.FILTER_TYPE[ANDOR[type]],\r\n                    children: [finded.get(\"data\"), node.get(\"data\")]\r\n                });\r\n                parent.removeChildByIndex(index); // 删除整个父节点，重新构造放到祖父下\r\n                parent.addChild(andor, index);\r\n                andor.addChild(finded);\r\n                andor.addChild(node);\r\n                return;\r\n            }\r\n            parent.addChild(node, index + 1);\r\n        }\r\n    },\r\n\r\n    _removeCondition: function (id) {\r\n        var finded = this.tree.search(id);\r\n        if (BI.isNotNull(finded)) {\r\n            var parent = finded.getParent();\r\n            parent.removeChild(id);\r\n            if (parent.getChildrenLength() <= 1) {\r\n                var prev = parent.getParent();\r\n                if (BI.isNotNull(prev)) {\r\n                    var index = prev.getChildIndex(parent.id);\r\n                    prev.removeChildByIndex(index);\r\n                    if (parent.getChildrenLength() === 1) {\r\n                        prev.addChild(parent.getFirstChild(), index);\r\n                    }\r\n                }\r\n            }\r\n            this._populate(this.tree.toJSONWithNode());\r\n            this.fireEvent(\"EVENT_CHANGE\");\r\n        }\r\n    },\r\n\r\n    _addAndOrCondition: function (formulaOrField, type) {\r\n        var ANDOR = [\"AND\", \"OR\"];\r\n        type || (type = 0);\r\n        var currentSelectItem = this.filter.getCurrentSelectItem();\r\n        if (BI.isNotNull(currentSelectItem)) {\r\n            var id = currentSelectItem.attr(\"id\");\r\n            this._insertAndOrCondition(id, formulaOrField, type);\r\n        } else {\r\n            var node = this._createEmptyNode(formulaOrField);\r\n            var root = this.tree.getRoot();\r\n            var child = root.getLastChild(); // 获取第一层最后一个节点, 需要整个替换掉\r\n            if (BI.isNotNull(child)) {\r\n                var data = child.get(\"data\");\r\n                if (data.value === BI.Filter.FILTER_TYPE[ANDOR[type]]) {\r\n                    // 和父亲节点类型相同直接作为儿子节点添加进去\r\n                    this.tree.addNode(child, node);\r\n                } else {\r\n                    // 重新组织节点andor, 此节点为第一层最后一个节点和新增节点的父亲, 作为第一层最后一个节点\r\n                    var andor = new BI.Node(BI.UUID());\r\n                    andor.set(\"data\", {\r\n                        value: BI.Filter.FILTER_TYPE[ANDOR[type]],\r\n                        children: [child.get(\"data\"), node.get(\"data\")]\r\n                    });\r\n                    root.removeChild(child.id); // 删除原来的节点，一个个添加\r\n                    this.tree.addNode(andor);\r\n                    this.tree.addNode(andor, child);\r\n                    this.tree.addNode(andor, node);\r\n                }\r\n            } else {\r\n                this.tree.addNode(node);\r\n            }\r\n        }\r\n        this._populate(this.tree.toJSONWithNode());\r\n        this.fireEvent(\"EVENT_CHANGE\");\r\n    },\r\n\r\n    _shakeTree: function (node, pnode) {\r\n        var self = this;\r\n        var count = 0, i;\r\n        var children = node.getChildren();\r\n        for(i = 0; i < children.length; i++) {\r\n            var childCount = self._shakeTree(children[i], node);\r\n            childCount > 0 && (i += childCount - 1); // 索引要向前加上增加的节点格式 - 1\r\n        }\r\n        if (BI.isNotNull(pnode)) {\r\n            var pdata = pnode.get(\"data\"), data = node.get(\"data\");\r\n            if(BI.isNotNull(pdata) && pdata.value === data.value) { // 父子节点类型相同, 就把子节点的儿子全部移动到父节点中去\r\n                var removeIndex = pnode.getChildIndex(node.id);\r\n                pnode.removeChild(node.id); // 父亲删除现有子节点\r\n                BI.each(node.getChildren(), function (i, cNode) { // 父亲添加儿子节点的子节点\r\n                    count++; // 向祖父添加了n个节点\r\n                    self.tree.addNode(pnode, cNode, removeIndex + i);\r\n                });\r\n            }\r\n        }\r\n        return count;\r\n    },\r\n\r\n    // 将整棵树中可以合并的节点全都合并起来\r\n    shakeTree: function () {\r\n        var root = this.tree.getRoot();\r\n        this._shakeTree(root);\r\n        this._populate(this.tree.toJSONWithNode());\r\n        this.fireEvent(\"EVENT_CHANGE\");\r\n    },\r\n\r\n    _populate: function (items) {\r\n        this.filter.defaultState();\r\n        var o = this.options;\r\n        o.items = items;\r\n        BI.Tree.traversal(items, function (i, item) {\r\n            o.itemCreator(item);\r\n        });\r\n        this.filter.populate.apply(this.filter, [items]);\r\n        this._checkBeautifyLevelNecessary();\r\n    },\r\n\r\n    populate: function (conditions) {\r\n        this.tree.initTree(conditions);\r\n        this._populate(this.tree.toJSONWithNode());\r\n    },\r\n\r\n    getValue: function () {\r\n        return this.filter.getValue();\r\n    }\r\n});\r\n\r\nBI.shortcut(\"bi.filter\", BI.Filter);\r\n\r\nBI.Filter.FILTER_TYPE = {};\r\nBI.Filter.FILTER_TYPE.FORMULA = 33;\r\nBI.Filter.FILTER_TYPE.AND = 34;\r\nBI.Filter.FILTER_TYPE.OR = 35;\r\nBI.Filter.FILTER_TYPE.EMPTY_FORMULA = 36;\r\nBI.Filter.FILTER_TYPE.EMPTY_CONDITION = 37;\r\n","/**\r\n * Created by windy on 2017/3/28.\r\n */\r\n!(function () {\r\n    var FilterList = BI.inherit(BI.ButtonTree, {\r\n        props: {\r\n            baseCls: \"bi-button-map\"\r\n        },\r\n\r\n        _createBtns: function (items) {\r\n            var o = this.options;\r\n            var buttons = BI.createWidgets(BI.createItems(items, { type: \"bi.text_button\", once: o.chooseType === 0 }));\r\n            var keys = BI.map(items, function (i, item) {\r\n                item = BI.stripEL(item);\r\n                if (!(item.id || item.value)) {\r\n                    throw new Error(\"item must have 'id' or 'value' as its property\");\r\n                }\r\n                return item.id || item.value;\r\n            });\r\n            return BI.zipObject(keys, buttons);\r\n        },\r\n\r\n        setValue: function (v) {\r\n            v = BI.isArray(v) ? v : [v];\r\n            BI.each(this.buttons, function (val, item) {\r\n                if (!BI.isFunction(item.setSelected)) {\r\n                    item.setValue(v);\r\n                    return;\r\n                }\r\n                if (BI.contains(v, val)) {\r\n                    item.setSelected && item.setSelected(true);\r\n                } else {\r\n                    item.setSelected && item.setSelected(false);\r\n                }\r\n            });\r\n        },\r\n\r\n        setNotSelectedValue: function (v) {\r\n            v = BI.isArray(v) ? v : [v];\r\n            BI.each(this.buttons, function (val, item) {\r\n                if (!BI.isFunction(item.setSelected)) {\r\n                    item.setNotSelectedValue(v);\r\n                    return;\r\n                }\r\n                if (BI.contains(v, val)) {\r\n                    item.setSelected && item.setSelected(false);\r\n                } else {\r\n                    item.setSelected && item.setSelected(true);\r\n                }\r\n            });\r\n        },\r\n\r\n        populate: function (items) {\r\n            var self = this;\r\n            var args = [].slice.call(arguments);\r\n            var linkHashMap = new BI.LinkHashMap();\r\n            var val = function (item) {\r\n                return item.id || item.value;\r\n            };\r\n            if (!this.buttons) {\r\n                this.buttons = {};\r\n            }\r\n            // 所有已存在的和新添加的\r\n            var willCreated = [];\r\n            BI.each(items, function (i, item) {\r\n                item = BI.stripEL(item);\r\n                if (self.buttons[val(item)]) {\r\n                    var ob = self.buttons[val(item)];\r\n                    args[0] = item.items;\r\n                    args[2] = item;\r\n                    ob.populate && ob.populate.apply(ob, args);\r\n                } else {\r\n                    willCreated.push(item);\r\n                }\r\n            });\r\n            // 创建新元素\r\n            args[0] = willCreated;\r\n            var newBtns = this._btnsCreator.apply(this, args);\r\n\r\n            // 整理\r\n            var array = [];\r\n            BI.each(items, function (i, item) {\r\n                item = BI.stripEL(item);\r\n                var button = self.buttons[val(item)] || newBtns[val(item)];\r\n                linkHashMap.add(val(item), button);\r\n                array.push(button);\r\n            });\r\n            this.buttons = linkHashMap.map;\r\n\r\n            BI.DOM.hang(this.buttons);\r\n            this.element.empty();\r\n\r\n            var packages = this._packageItems(items, this._packageBtns(array));\r\n            BI.createWidget(BI.extend({ element: this }, this._packageLayout(packages)));\r\n        },\r\n\r\n        getIndexByValue: function () {\r\n            throw new Error(\"Can not use getIndexByValue\");\r\n        }\r\n    });\r\n    BI.shortcut(\"bi.filter_list\", FilterList);\r\n}());\r\n","!(function () {\r\n    var Model = BI.inherit(Fix.Model, {\r\n\r\n        state: function () {\r\n            return {\r\n                setSelectedCondition: false,\r\n                shakeTree: false\r\n            };\r\n        },\r\n\r\n        childContext: [\"setSelectedCondition\"],\r\n\r\n        computed: {\r\n\r\n        },\r\n\r\n        actions: {\r\n            addCondition: function () {\r\n\r\n            },\r\n\r\n            addAndCondition: function () {\r\n\r\n            },\r\n\r\n            addOrCondition: function () {\r\n\r\n            },\r\n\r\n            addFormula: function () {\r\n\r\n            },\r\n\r\n            addAndFormula: function () {\r\n\r\n            },\r\n\r\n            addOrFormula: function () {\r\n\r\n            },\r\n\r\n            shakeTree: function () {\r\n                this.model.shakeTree = !this.model.shakeTree;\r\n            }\r\n        }\r\n    });\r\n    BI.model(\"bi.model.material.filter\", Model);\r\n})();","/**\r\n * 过滤条件\r\n *\r\n * Created by GUY on 2015/9/25.\r\n * @class BI.FilterOperation\r\n * @extend BI.Widget\r\n */\r\n!(function () {\r\n    BI.FilterOperation = BI.inherit(BI.Widget, {\r\n        _defaultConfig: function () {\r\n            return BI.extend(BI.FilterOperation.superclass._defaultConfig.apply(this, arguments), {\r\n                constants: {\r\n                    FORMULA_COMBO: [{\r\n                        text: BI.i18nText(\"BI-Conf_Formula_And\"),\r\n                        $testId: \"bi-materials-formula-add\",\r\n                        value: BI.AbstractFilterItem.FILTER_OPERATION_FORMULA_AND\r\n                    }, {\r\n                        text: BI.i18nText(\"BI-Conf_Formula_Or\"),\r\n                        $testId: \"bi-materials-formula-or\",\r\n                        value: BI.AbstractFilterItem.FILTER_OPERATION_FORMULA_OR\r\n                    }],\r\n                    CONDITION_COMBO: [{\r\n                        text: BI.i18nText(\"BI-Conf_Condition_And\"),\r\n                        $testId: \"bi-materials-condition-add\",\r\n                        value: BI.AbstractFilterItem.FILTER_OPERATION_CONDITION_AND\r\n                    }, {\r\n                        text: BI.i18nText(\"BI-Conf_Condition_Or\"),\r\n                        $testId: \"bi-materials-condition-or\",\r\n                        value: BI.AbstractFilterItem.FILTER_OPERATION_CONDITION_OR\r\n                    }]\r\n                }\r\n            });\r\n        },\r\n\r\n        props: {\r\n            baseCls: \"bi-filter-operation\",\r\n            expander: {},\r\n            items: [],\r\n            logic: {\r\n                dynamic: false\r\n            },\r\n            selections: [BI.AbstractFilterItem.FILTER_OPERATION_CONDITION, BI.AbstractFilterItem.FILTER_OPERATION_FORMULA],\r\n            itemsCreator: BI.emptyFn\r\n        },\r\n\r\n        _store: function () {\r\n            return BI.Models.getModel(\"bi.model.material.filter_operation\");\r\n        },\r\n\r\n        render: function () {\r\n            var self = this, o = this.options;\r\n            this.currentSelected = null;\r\n\r\n            return BI.extend({\r\n                items: [{\r\n                    el: {\r\n                        type: \"bi.left_right_vertical_adapt\",\r\n                        items: {\r\n                            left: self._buildOperationButton(),\r\n                            right: [{\r\n                                type: \"bi.icon_button\",\r\n                                cls: \"combine-level-font\",\r\n                                title: BI.i18nText(\"BI-Basic_Beautify_Level\"),\r\n                                ref: function (_ref) {\r\n                                    self.beautifyButton = _ref;\r\n                                },\r\n                                listeners: [{\r\n                                    eventName: BI.IconButton.EVENT_CHANGE,\r\n                                    action: function () {\r\n                                        self.fireEvent(\"EVENT_OPERATION\", BI.AbstractFilterItem.FILTER_OPERATION_SHAKE);\r\n                                    }\r\n                                }]\r\n                            }]\r\n                        },\r\n                        height: 24,\r\n                        lrgap: 20,\r\n                        rrgap: 10\r\n                    },\r\n                    height: 24\r\n                }, {\r\n                    el: BI.extend({\r\n                        tgap: 10,\r\n                        items: [{\r\n                            el: {\r\n                                type: \"bi.left\",\r\n                                items: [{\r\n                                    type: \"bi.filter_pane\",\r\n                                    expander: o.expander,\r\n                                    items: o.items,\r\n                                    itemsCreator: o.itemsCreator,\r\n                                    listeners: [{\r\n                                        eventName: \"EVENT_CHANGE\",\r\n                                        action: function (type, value, obj) {\r\n                                            if (type === BI.Events.CLICK && value !== true) {\r\n                                                if (BI.isNotNull(self.currentSelected) && self.currentSelected === obj) {\r\n                                                    self.store.setSelectedCondition(!obj.isSelectedCondition());\r\n                                                    obj.setSelectedCondition(!obj.isSelectedCondition());\r\n                                                } else {\r\n                                                    if (BI.isNotNull(self.currentSelected)) {\r\n                                                        self.store.setSelectedCondition(false);\r\n                                                        self.currentSelected.setSelectedCondition(false);\r\n                                                    }\r\n                                                    self.currentSelected = obj;\r\n                                                    self.store.setSelectedCondition(true);\r\n                                                    obj.setSelectedCondition(true);\r\n                                                }\r\n                                            }\r\n                                            if (type === BI.Events.CLICK && value === true) {\r\n                                                self.fireEvent(\"EVENT_CLICK_EXPANDER\", arguments);\r\n                                            }\r\n                                            if (type === BI.Events.DESTROY) {\r\n                                                if (self.currentSelected === obj) {\r\n                                                    self.currentSelected = null;\r\n                                                }\r\n                                                self.fireEvent(\"BI.FilterOperation.EVENT_DESTROY_ITEM\", value, obj);\r\n                                            }\r\n                                        }\r\n                                    }],\r\n                                    ref: function (_ref) {\r\n                                        self.filter = _ref;\r\n                                    }\r\n                                }]\r\n                            },\r\n                            // for absolute\r\n                            top: 0,\r\n                            right: 2,\r\n                            bottom: 0,\r\n                            left: 0,\r\n                            // for vertical\r\n                            rgap: 2\r\n                        }]\r\n                    }, o.logic.dynamic ? {\r\n                        type: \"bi.vertical\",\r\n                        scrolly: false\r\n                    } : {\r\n                        type: \"bi.absolute\",\r\n                        scrollable: true\r\n                    })\r\n                }]\r\n            }, o.logic.dynamic ? {\r\n                type: \"bi.vertical\",\r\n                scrolly: false\r\n            } : {\r\n                type: \"bi.vtape\"\r\n            });\r\n        },\r\n\r\n        _buildOperationButton: function () {\r\n            var self = this, combos = [], o = this.options;\r\n            BI.each(this.options.selections, function (i, type) {\r\n                switch (type) {\r\n                    case BI.AbstractFilterItem.FILTER_OPERATION_FORMULA:\r\n                        combos.push({\r\n                            type: \"bi.filter_operation_switch\",\r\n                            warningTitle: o.addWarningTitle,\r\n                            addType: BI.AbstractFilterItem.FILTER_OPERATION_FORMULA_AND,\r\n                            listeners: [{\r\n                                eventName: \"EVENT_CHANGE\",\r\n                                action: function (v) {\r\n                                    doAdd(v);\r\n                                }\r\n                            }]\r\n                        });\r\n                        break;\r\n                    case BI.AbstractFilterItem.FILTER_OPERATION_CONDITION:\r\n                    default:\r\n                        combos.push({\r\n                            type: \"bi.filter_operation_switch\",\r\n                            warningTitle: o.addWarningTitle,\r\n                            addType: BI.AbstractFilterItem.FILTER_OPERATION_CONDITION_AND,\r\n                            listeners: [{\r\n                                eventName: \"EVENT_CHANGE\",\r\n                                action: function (v) {\r\n                                    doAdd(v);\r\n                                }\r\n                            }]\r\n                        });\r\n                        break;\r\n                }\r\n            });\r\n\r\n            return combos;\r\n\r\n            function doAdd (v) {\r\n                self.fireEvent(\"EVENT_OPERATION\", v);\r\n                self.defaultState();\r\n            }\r\n        },\r\n\r\n        defaultState: function () {\r\n            if (BI.isNotNull(this.currentSelected)) {\r\n                this.store.setSelectedCondition(false);\r\n                this.currentSelected.setSelectedCondition(false);\r\n            }\r\n        },\r\n\r\n        getCurrentSelectItem: function () {\r\n            if (BI.isNotNull(this.currentSelected) && this.currentSelected.isSelectedCondition()) {\r\n                return this.currentSelected;\r\n            }\r\n        },\r\n\r\n        setBeautifyButtonVisible: function (b) {\r\n            this.beautifyButton.setVisible(!!b);\r\n        },\r\n\r\n        populate: function () {\r\n            this.filter.populate.apply(this.filter, arguments);\r\n        },\r\n\r\n        getValue: function () {\r\n            return this.filter.getValue();\r\n        }\r\n    });\r\n    BI.shortcut(\"bi.filter_operation\", BI.FilterOperation);\r\n}());\r\n","!(function () {\r\n    var Model = BI.inherit(Fix.Model, {\r\n\r\n        context: [\"setSelectedCondition\"],\r\n\r\n        computed: {\r\n\r\n        },\r\n\r\n        actions: {\r\n            setSelectedCondition: function (selected) {\r\n                this.model.setSelectedCondition = selected;\r\n            }\r\n        }\r\n    });\r\n    BI.model(\"bi.model.material.filter_operation\", Model);\r\n})();","!(function () {\r\n    BI.FilterOperationSwitch = BI.inherit(BI.Single, {\r\n\r\n        props: {\r\n            baseCls: \"bi-filter-operation-switch\",\r\n            width: 112,\r\n            height: 24,\r\n            addType: BI.AbstractFilterItem.FILTER_OPERATION_CONDITION_AND\r\n        },\r\n\r\n        render: function () {\r\n            var self = this;\r\n            return {\r\n                type: \"bi.htape\",\r\n                items: [{\r\n                    el: {\r\n                        type: \"bi.text_button\",\r\n                        cls: \"filter-add-item left-item-radius\",\r\n                        $testId: \"bi-filter-operation-switch-add-button\",\r\n                        text: this._getShowText(this._getDefaultValue()),\r\n                        ref: function (_ref) {\r\n                            self.addButton = _ref;\r\n                        },\r\n                        value: this._getDefaultValue(),\r\n                        listeners: [{\r\n                            eventName: \"EVENT_CHANGE\",\r\n                            action: function () {\r\n                                self.fireEvent(\"EVENT_CHANGE\", this.getValue());\r\n                            }\r\n                        }]\r\n                    },\r\n                    rgap: 1\r\n                }, {\r\n                    el: {\r\n                        type: \"bi.down_list_combo\",\r\n                        el: {\r\n                            cls: \"filter-add-item\",\r\n                            title: BI.i18nText(\"BI-Basic_Switch\"),\r\n                        },\r\n                        iconCls: \"filter-down-font icon-size-12\",\r\n                        $testId: \"bi-filter-operation-switch-combo\",\r\n                        cls: \"filter-add-item right-item-radius\",\r\n                        items: this._getItemsByType(),\r\n                        value: [{value: this._getDefaultValue()}],\r\n                        listeners: [{\r\n                            eventName: \"EVENT_CHANGE\",\r\n                            action: function () {\r\n                                var value = this.getValue()[0].value;\r\n                                self.addButton.setValue(value);\r\n                                self.addButton.setText(self._getShowText(value));\r\n                                self.fireEvent(\"EVENT_CHANGE\", value);\r\n                            }\r\n                        }]\r\n                    },\r\n                    width: 16\r\n                }]\r\n            };\r\n        },\r\n\r\n        _getShowText: function (v) {\r\n            switch (v) {\r\n                case BI.AbstractFilterItem.FILTER_OPERATION_CONDITION_OR:\r\n                    return BI.i18nText(\"BI-Basic_Add_Or_Condition\");\r\n                case BI.AbstractFilterItem.FILTER_OPERATION_FORMULA_AND:\r\n                    return BI.i18nText(\"BI-Basic_Add_And_Formula\");\r\n                case BI.AbstractFilterItem.FILTER_OPERATION_FORMULA_OR:\r\n                    return BI.i18nText(\"BI-Basic_Add_Or_Formula\");\r\n                case BI.AbstractFilterItem.FILTER_OPERATION_CONDITION_AND:\r\n                default:\r\n                    return BI.i18nText(\"BI-Basic_Add_And_Condition\");\r\n            }\r\n        },\r\n\r\n        _getDefaultValue: function () {\r\n            return this.options.addType === BI.AbstractFilterItem.FILTER_OPERATION_CONDITION_AND ? BI.AbstractFilterItem.FILTER_OPERATION_CONDITION_AND : BI.AbstractFilterItem.FILTER_OPERATION_FORMULA_AND;\r\n        },\r\n\r\n        _getItemsByType: function () {\r\n            return this.options.addType === BI.AbstractFilterItem.FILTER_OPERATION_CONDITION_AND ? [[{\r\n                text: BI.i18nText(\"BI-Basic_And_Condition\"),\r\n                cls: \"dot-e-font\",\r\n                value: BI.AbstractFilterItem.FILTER_OPERATION_CONDITION_AND,\r\n                $testId: \"bi-filter-operation-switch-combo-item-condition-and\"\r\n            }, {\r\n                text: BI.i18nText(\"BI-Basic_Or_Condition\"),\r\n                cls: \"dot-e-font\",\r\n                value: BI.AbstractFilterItem.FILTER_OPERATION_CONDITION_OR,\r\n                $testId: \"bi-filter-operation-switch-combo-item-condition-or\"\r\n            }]] : [[{\r\n                text: BI.i18nText(\"BI-Basic_And_Formula\"),\r\n                cls: \"dot-e-font\",\r\n                value: BI.AbstractFilterItem.FILTER_OPERATION_FORMULA_AND,\r\n                $testId: \"bi-filter-operation-switch-combo-item-formula-and\"\r\n            }, {\r\n                text: BI.i18nText(\"BI-Basic_Or_Formula\"),\r\n                cls: \"dot-e-font\",\r\n                value: BI.AbstractFilterItem.FILTER_OPERATION_FORMULA_OR,\r\n                $testId: \"bi-filter-operation-switch-combo-item-formula-or\"\r\n            }]];\r\n        }\r\n\r\n    });\r\n    BI.shortcut(\"bi.filter_operation_switch\", BI.FilterOperationSwitch);\r\n}());\r\n","/**\r\n * @class BI.FilterPane\r\n * @extend BI.Widget\r\n * 过滤面板\r\n */\r\n!(function () {\r\n    var FilterPane = BI.inherit(BI.Widget, {\r\n        props: {\r\n            baseCls: \"bi-filter-pane\",\r\n            expander: {},\r\n            items: [],\r\n            itemsCreator: BI.emptyFn\r\n        },\r\n\r\n        render: function () {\r\n            var self = this, o = this.options;\r\n            return {\r\n                type: \"bi.custom_tree\",\r\n                cls: BI.isNotEmptyArray(o.items) ? \"bi-border-right bi-border-top\" : \"\",\r\n                expander: BI.extend({\r\n                    type: \"bi.filter_expander\",\r\n                    el: {},\r\n                    popup: {\r\n                        type: \"bi.custom_tree\"\r\n                    }\r\n                }, o.expander),\r\n                el: {\r\n                    type: \"bi.filter_list\",\r\n                    cls: \"filter-list-pane\",\r\n                    chooseType: BI.ButtonGroup.CHOOSE_TYPE_DEFAULT,\r\n                    layouts: [{\r\n                        type: \"bi.vertical\",\r\n                        scrolly: false\r\n                    }]\r\n                },\r\n                items: o.items,\r\n                listeners: [{\r\n                    eventName: BI.Controller.EVENT_CHANGE,\r\n                    action: function () {\r\n                        self.fireEvent(\"EVENT_CHANGE\", arguments);\r\n                    }\r\n                }],\r\n                ref: function (_ref) {\r\n                    self.tree = _ref;\r\n                }\r\n            };\r\n        },\r\n\r\n        populate: function (items) {\r\n            if (BI.isNotEmptyArray(items)) {\r\n                this.element.addClass(\"bi-border-right bi-border-top\");\r\n            } else {\r\n                this.element.removeClass(\"bi-border-right bi-border-top\");\r\n            }\r\n            this.tree.populate.apply(this.tree, arguments);\r\n        },\r\n\r\n        getValue: function () {\r\n            return this.tree.getValue();\r\n        }\r\n    });\r\n    BI.shortcut(\"bi.filter_pane\", FilterPane);\r\n}());\r\n","/**\r\n * 表单\r\n * qcc\r\n * 2019/12/26\r\n */\r\n\r\n!(function () {\r\n    var Form = BI.inherit(BI.Widget, {\r\n\r\n        props: {\r\n            baseCls: \"bi-form\",\r\n            items: [],\r\n            rules: {}, // 对每个表单项都生效，会被表单项相同规则覆盖\r\n            stop: false, // 是否出现错误即中断校验\r\n            layouts: [{\r\n                type: \"bi.vertical\"\r\n            }]\r\n        },\r\n\r\n        _init: function () {\r\n            Form.superclass._init.apply(this, arguments);\r\n            this.populate(this.options.items);\r\n        },\r\n\r\n        _createItems: function (items) {\r\n            var rules = this.options.rules;\r\n            return BI.createWidgets(BI.map(items, function (i, item) {\r\n                return BI.extend({\r\n                    type: \"bi.form.item\"\r\n                }, item, {\r\n                    rules: BI.extend({}, rules, item.rules)\r\n                });\r\n            }));\r\n        },\r\n\r\n        _itemsCreator: function (items) {\r\n            var self = this;\r\n            var formItems = this._createItems(items);\r\n\r\n            BI.each(formItems, function (i, btn) {\r\n                btn.on(BI.Events.DESTROY, function () {\r\n                    BI.remove(self.formItems, btn);\r\n                });\r\n            });\r\n\r\n            return formItems;\r\n        },\r\n\r\n        _packageItemLayout: function (items) {\r\n            var o = this.options;\r\n            for (var i = o.layouts.length - 1; i > 0; i--) {\r\n                items = BI.map(items, function (k, it) {\r\n                    return BI.extend({}, o.layouts[i], {\r\n                        items: [\r\n                            BI.extend({}, o.layouts[i].el, {\r\n                                el: it\r\n                            })\r\n                        ]\r\n                    });\r\n                });\r\n            }\r\n            return items;\r\n        },\r\n\r\n        _packageSimpleItems: function (nodes) {\r\n            var o = this.options;\r\n            return BI.map(o.items, function (i, item) {\r\n                if (BI.stripEL(item) === item) {\r\n                    return nodes[i];\r\n                }\r\n                return BI.extend({}, item, {\r\n                    el: nodes[i]\r\n                });\r\n            });\r\n        },\r\n\r\n        _packageItems: function (items, packBtns) {\r\n            return BI.createItems(BI.makeArrayByArray(items, {}), BI.clone(packBtns));\r\n        },\r\n\r\n        _packageLayout: function (items) {\r\n            var o = this.options, layout = BI.deepClone(o.layouts[0]);\r\n\r\n            var lay = BI.formatEL(layout).el;\r\n            while (lay && lay.items && !BI.isEmpty(lay.items)) {\r\n                lay = BI.formatEL(lay.items[0]).el;\r\n            }\r\n            lay.items = items;\r\n            return layout;\r\n        },\r\n\r\n        // 简单的layout\r\n        _isSimpleLayout: function () {\r\n            var o = this.options;\r\n            return o.layouts.length === 1 && !BI.isArray(o.items[0]);\r\n        },\r\n\r\n        /**\r\n         * 提交表单\r\n         * 会进行校验且显示错误提示\r\n         * @param callback\r\n         */\r\n        submit: function (callback) {\r\n            var stop = this.options.stop, approved = true, result;\r\n            BI.each(this.formItems, function (i, item) {\r\n                if (!approved && stop) {\r\n                    return true;\r\n                }\r\n                if (!item.isEnabled() || !BI.isFunction(item.getValidations)) {\r\n                    return;\r\n                }\r\n                result = item.getValidations();\r\n                if (result && !result.approved) {\r\n                    item.showError && item.showError(result.errors[0]);\r\n                    approved = false;\r\n                } else {\r\n                    item.hideError && item.hideError();\r\n                }\r\n            });\r\n            approved && BI.isFunction(callback) && callback(this.getValue());\r\n            return approved;\r\n        },\r\n\r\n        /**\r\n         * 表单校验\r\n         * @returns {boolean}\r\n         */\r\n        validate: function () {\r\n            var approved = true, stop = this.options.stop;\r\n            BI.each(this.formItems, function (i, item) {\r\n                if (!approved && stop) {\r\n                    return true;\r\n                }\r\n                if (item.isEnabled() && BI.isFunction(item.validate) && !item.validate()) {\r\n                    approved = false;\r\n                }\r\n            });\r\n            return approved;\r\n        },\r\n\r\n        /**\r\n         * 获取表单校验结果\r\n         * 包含错误信息\r\n         * @returns {Array}\r\n         */\r\n        getValidations: function () {\r\n            var v = [];\r\n            BI.each(this.formItems, function (i, item) {\r\n                if (item.isEnabled() && BI.isFunction(item.getValidations)) {\r\n                    v.push(item.getValidations());\r\n                }\r\n            });\r\n            return v;\r\n        },\r\n\r\n        /**\r\n         * 设置表单项值\r\n         * 需要给表单项传递name属性\r\n         * @param val\r\n         * @param name\r\n         */\r\n        setValue: function (val, name) {\r\n            var node = this.getNodeByName(name);\r\n            node && node.setValue(val);\r\n        },\r\n\r\n        /**\r\n         * 获取表单结果\r\n         * @returns {Array}\r\n         */\r\n        getValue: function () {\r\n            var v = [];\r\n            BI.each(this.formItems, function (i, item) {\r\n                if (item.isEnabled()) {\r\n                    v.push(item.getValue());\r\n                }\r\n            });\r\n            return v;\r\n        },\r\n\r\n        /**\r\n         * 获取具名表单值\r\n         * @returns {Object}\r\n         */\r\n        getFormValue: function () {\r\n            var v = {};\r\n            BI.each(this.formItems, function (i, item) {\r\n                if (item.options.name) {\r\n                    v[item.options.name] = item.getValue();\r\n                }\r\n            });\r\n            return v;\r\n        },\r\n\r\n\r\n        /**\r\n         * 刷新整个表单\r\n         * @param items\r\n         */\r\n        populate: function (items) {\r\n            items = items || [];\r\n            this.empty();\r\n            this.options.items = items;\r\n\r\n            this.formItems = this._itemsCreator.apply(this, arguments);\r\n            if (this._isSimpleLayout()) {\r\n                items = this._packageSimpleItems(this.formItems);\r\n            } else {\r\n                items = this._packageItems(items, this._packageItemLayout(this.formItems));\r\n            }\r\n\r\n            this.layouts = BI.createWidget(BI.extend({element: this}, this._packageLayout(items)));\r\n        },\r\n\r\n        /**\r\n         * 通过name使能某些表单项\r\n         * @param v\r\n         */\r\n        setEnabledItems: function (v) {\r\n            v = BI.isArray(v) ? v : [v];\r\n            BI.each(this.formItems, function (i, item) {\r\n                if (BI.contains(v, item.options.name)) {\r\n                    item.setEnable(true);\r\n                } else {\r\n                    item.setEnable(false);\r\n                }\r\n            });\r\n        },\r\n\r\n        getAllItems: function () {\r\n            return this.formItems;\r\n        },\r\n\r\n        getIndexByName: function (name) {\r\n            var index = -1;\r\n            BI.some(this.formItems, function (i, item) {\r\n                if (item.isEnabled() && item.options.name === name) {\r\n                    index = i;\r\n                    return true;\r\n                }\r\n            });\r\n            return index;\r\n        },\r\n\r\n        getNodeByName: function (name) {\r\n            var node;\r\n            BI.some(this.formItems, function (i, item) {\r\n                if (item.isEnabled() && item.options.name === name) {\r\n                    node = item;\r\n                    return true;\r\n                }\r\n            });\r\n            return node;\r\n        },\r\n\r\n        empty: function () {\r\n            Form.superclass.empty.apply(this, arguments);\r\n            this.options.items = [];\r\n        },\r\n\r\n        destroy: function () {\r\n            Form.superclass.destroy.apply(this, arguments);\r\n            this.options.items = [];\r\n        }\r\n    });\r\n    BI.shortcut(\"bi.form\", Form);\r\n})();","/**\r\n * 使用absolute显示错误的表单项\r\n * 更多场景是基于此再封装通用项\r\n * qcc\r\n * 2019/12/26\r\n */\r\n\r\n!(function () {\r\n    var Item = BI.inherit(BI.Widget, {\r\n\r\n        props: {\r\n            baseCls: \"bi-form-error-item\",\r\n            errorText: \"\",\r\n            stop: true,\r\n            rules: {}\r\n        },\r\n\r\n\r\n        render: function () {\r\n            var self = this, o = this.options;\r\n\r\n            this._formItem = BI.createWidget(o.el);\r\n\r\n            if (o.label) {\r\n                return {\r\n                    type: \"bi.vertical_adapt\",\r\n                    items: [{\r\n                        el: BI.isKey(o.label) ? {\r\n                            type: \"bi.label\",\r\n                            textAlign: \"left\",\r\n                            textHeight: 24,\r\n                            text: o.label,\r\n                            title: o.label,\r\n                            rgap: 10\r\n                        } : o.label\r\n                    }, {\r\n                        el: this._formItem\r\n                    }]\r\n                };\r\n            }\r\n\r\n            return {\r\n                type: \"bi.vertical_adapt\",\r\n                items: [\r\n                    {\r\n                        el: this._formItem\r\n                    }\r\n                ]\r\n            };\r\n        },\r\n\r\n        getValue: function () {\r\n            return this._formItem.getValue();\r\n        },\r\n\r\n        validate: function () {\r\n            var o = this.options;\r\n            var res = BI.validator.validate(this.getValue(), o.rules, o.stop);\r\n            return BI.isNull(res) || res.approved;\r\n        },\r\n\r\n        getValidations: function () {\r\n            var o = this.options;\r\n            return BI.validator.validate(this.getValue(), o.rules, o.stop);\r\n        },\r\n\r\n        showError: function (text) {\r\n            text && BI.Bubbles.show(this.getName(), text, this._formItem);\r\n        },\r\n\r\n        hideError: function () {\r\n            BI.Bubbles.hide(this.getName());\r\n        },\r\n    });\r\n    BI.shortcut(\"bi.form.error.item\", Item);\r\n})();\r\n","/**\r\n * 包装成表单项\r\n * qcc\r\n * 2019/12/26\r\n */\r\n\r\n!(function () {\r\n    var Item = BI.inherit(BI.Widget, {\r\n\r\n        props: {\r\n            baseCls: \"bi-form-item\",\r\n            stop: true,\r\n            rules: {}\r\n        },\r\n\r\n\r\n        render: function () {\r\n            var o = this.options;\r\n            if (o.label) {\r\n                this.item = BI.createWidget({\r\n                    rules: o.rules,\r\n                    stop: o.stop\r\n                }, o.el);\r\n                return {\r\n                    type: \"bi.vertical_adapt\",\r\n                    items: [{\r\n                        el: BI.isKey(o.label) ? {\r\n                            type: \"bi.label\",\r\n                            textAlign: \"left\",\r\n                            textHeight: 24,\r\n                            text: o.label,\r\n                            title: o.label,\r\n                            rgap: 10\r\n                        } : o.label\r\n                    }, {\r\n                        el: this.item\r\n                    }]\r\n                }\r\n            }\r\n            this.item = BI.createWidget({\r\n                rules: o.rules,\r\n                stop: o.stop,\r\n                element: this\r\n            }, o.el);\r\n        },\r\n\r\n        getValue: function () {\r\n            return this.item.getValue();\r\n        },\r\n\r\n        validate: function () {\r\n            return BI.isFunction(this.item.validate) ? this.item.validate() : this._validate();\r\n        },\r\n\r\n        getValidations: function () {\r\n            var o = this.options;\r\n            return BI.isFunction(this.item.getValidations)\r\n                ? this.item.getValidations() : BI.validator.validate(this.getValue(), o.rules, o.stop);\r\n        },\r\n\r\n        showError: function (text) {\r\n            BI.isFunction(this.item.showError) && this.item.showError(text);\r\n        },\r\n\r\n        hideError: function () {\r\n            BI.isFunction(this.item.hideError) && this.item.hideError();\r\n        },\r\n\r\n        _validate: function () {\r\n            var o = this.options;\r\n            var res = BI.validator.validate(this.getValue(), o.rules, o.stop);\r\n            return BI.isNull(res) || res.approved;\r\n        }\r\n    });\r\n    BI.shortcut(\"bi.form.item\", Item);\r\n})();","\r\n!(function () {\r\n    BI.Func = BI.Func || {};\r\n\r\n    BI.extend(BI.Func, {\r\n        paintWaterMark: function (canvas, conf) {\r\n            var markConfig = BI.extend({\r\n                text: \"watermark\",\r\n                fontSize: 16,\r\n                fontFamily: \"Microsoft YaHei, PingFangSC-Light, SimHei, SimSun, FangSong, KaiTi, Arial, Tahoma, Verdana, Times New Roman\",\r\n                color: \"#999999\",\r\n                opacity: 0.15,\r\n                angle: 20,\r\n                fontWeight: \"bold\",\r\n                horizontalGap: 200,\r\n                verticalGap: 100\r\n            }, conf);\r\n\r\n            var deg = markConfig.angle * Math.PI / 180;\r\n            var watermarkCanvas = BI.Func.createEmptyCanvas();\r\n            var cheight = canvas.height, cwidth = canvas.width;\r\n            var texts = (markConfig.text + \"\").split(\"\\n\");\r\n\r\n            var actualWidth = cwidth * Math.cos(deg) + cheight * Math.sin(deg),\r\n                actualHeight = cwidth * Math.sin(deg) + cheight / Math.cos(deg);\r\n            watermarkCanvas.width = actualWidth;\r\n            watermarkCanvas.height = actualHeight;\r\n            var watermarkCtx = watermarkCanvas.getContext(\"2d\");\r\n\r\n            watermarkCtx.rotate(-deg);\r\n            watermarkCtx.font = markConfig.fontWeight + \" \" + markConfig.fontSize + \"px \" + markConfig.fontFamily;\r\n            watermarkCtx.fillStyle = markConfig.color;\r\n            watermarkCtx.globalAlpha = markConfig.opacity;\r\n            watermarkCtx.textAlign = \"center\";\r\n\r\n            // 用measureText在canvas渲染前就计算宽度确保宽度正确\r\n            // 计算\\n处理后最长的文本宽度\r\n            var maxTextWidth = 0;\r\n            for (var t = 0; t < texts.length; t++) {\r\n                maxTextWidth = Math.max(maxTextWidth, watermarkCtx.measureText(texts[t]).width);\r\n            }\r\n\r\n            var markWidth = maxTextWidth + markConfig.horizontalGap,\r\n                textHeight = BI.DOM.getTextSizeHeight(markConfig.text, markConfig.fontSize),\r\n                markHeight = textHeight * texts.length + markConfig.verticalGap;\r\n\r\n            var col = BI.parseInt(actualWidth / markWidth);\r\n            var row = BI.parseInt(actualHeight / markHeight);\r\n            var fillLeft = canvas.height * Math.tan(deg);\r\n\r\n            for (var r = 0; r < row + 1; r++) {\r\n                for (var c = 0; c < col + 3; c++) {\r\n                    var left = c * markWidth - fillLeft + (r % 2 === 0 ? -(markWidth / 2) : 0);\r\n                    for (var textLen = 0; textLen < texts.length; textLen++) {\r\n                        watermarkCtx.fillText(texts[textLen], left, r * markHeight + textHeight * textLen);\r\n                    }\r\n                }\r\n            }\r\n\r\n            var ctxr = canvas.getContext(\"2d\");\r\n            ctxr.fillStyle = ctxr.createPattern(watermarkCanvas, \"no-repeat\");\r\n            ctxr.fillRect(0, 0, watermarkCanvas.width, watermarkCanvas.height);\r\n        },\r\n\r\n        createEmptyCanvas: function () {\r\n            var canvas = document.createElement(\"canvas\");\r\n            if (!document.createElement(\"canvas\").getContext) {\r\n                canvas = window.G_vmlCanvasManager.initElement(canvas);\r\n            }\r\n            return canvas;\r\n        }\r\n    });\r\n})();\r\n\r\n","/**\r\n * 预览表列\r\n *\r\n * Created by GUY on 2015/12/25.\r\n * @class BI.PreviewTableCell\r\n * @extends BI.Widget\r\n */\r\nBI.WarningLabel = BI.inherit(BI.Single, {\r\n\r\n    props: {\r\n        baseCls: \"bi-warning-label\",\r\n        textAlign: \"center\",\r\n        whiteSpace: \"nowrap\", // normal  or  nowrap\r\n        forceCenter: false, // 是否无论如何都要居中, 不考虑超出边界的情况, 在未知宽度和高度时有效\r\n        textWidth: null,\r\n        textHeight: null,\r\n        hgap: 0,\r\n        vgap: 0,\r\n        lgap: 0,\r\n        rgap: 0,\r\n        tgap: 0,\r\n        bgap: 0,\r\n        text: \"\"\r\n    },\r\n\r\n\r\n    render: function () {\r\n        var self = this, o = this.options;\r\n        return {\r\n            type: \"bi.label\",\r\n            ref: function () {\r\n                self.label = this;\r\n            },\r\n            textAlign: o.textAlign,\r\n            whiteSpace: o.whiteSpace, // normal  or  nowrap\r\n            forceCenter: o.forceCenter, // 是否无论如何都要居中, 不考虑超出边界的情况, 在未知宽度和高度时有效\r\n            textWidth: o.textWidth,\r\n            textHeight: o.textHeight,\r\n            hgap: o.hgap,\r\n            vgap: o.vgap,\r\n            lgap: o.lgap,\r\n            rgap: o.rgap,\r\n            tgap: o.tgap,\r\n            bgap: o.bgap\r\n        };\r\n    },\r\n\r\n    mounted: function () {\r\n        var o = this.options;\r\n        if(BI.isKey(o.text)) {\r\n            this.setText(o.text);\r\n        }\r\n    },\r\n\r\n    _digest: function (text) {\r\n        text = BI.htmlEncode(text || \"\");\r\n        return text.replaceAll(\"\\\\$\\\\{(.*?)\\\\}\", function (ori, str) {\r\n            return \"<span class='warning-label'>\" + str + \"</span>\";\r\n        });\r\n    },\r\n\r\n    setText: function (v) {\r\n        this.options.text = v;\r\n        this.label.text.text.element.html(this._digest(v));\r\n    },\r\n\r\n    getText: function () {\r\n        return this.options.text;\r\n    },\r\n\r\n    setValue: function (v) {\r\n        this.label.setValue(v);\r\n    }\r\n});\r\nBI.shortcut(\"bi.warning_label\", BI.WarningLabel);","!(function () {\r\n    /**\r\n     * 一个button选中的时候下面有条线\r\n     *\r\n     * Created by GUY on 2015/9/30.\r\n     * @class BI.LineSegmentButton\r\n     * @extends BI.BasicButton\r\n     */\r\n    var LineSegmentButton = BI.inherit(BI.BasicButton, {\r\n\r\n        props: {\r\n            baseCls: \"bi-line-segment-button bi-list-item-effect\",\r\n            once: true,\r\n            readonly: true,\r\n            hgap: 10,\r\n            height: 25,\r\n            lineHeight: 3\r\n        },\r\n\r\n        render: function () {\r\n            var self= this, o = this.options;\r\n            this.text = BI.createWidget({\r\n                type: \"bi.label\",\r\n                element: this,\r\n                text: o.text,\r\n                height: o.height,\r\n                value: o.value,\r\n                hgap: o.hgap\r\n            });\r\n\r\n            BI.createWidget({\r\n                type: \"bi.absolute\",\r\n                element: this,\r\n                items: [{\r\n                    el: {\r\n                        type: \"bi.layout\",\r\n                        cls: \"line-segment-button-line\",\r\n                        height: o.lineHeight,\r\n                        ref: function(_ref) {\r\n                            self.line = _ref;\r\n                        }\r\n                    },\r\n                    left: 0,\r\n                    right: 0,\r\n                    bottom: 0\r\n                }]\r\n            });\r\n        },\r\n\r\n        setSelected: function (v) {\r\n            LineSegmentButton.superclass.setSelected.apply(this, arguments);\r\n            if (v) {\r\n                this.line.element.addClass(\"bi-high-light-background\");\r\n            } else {\r\n                this.line.element.removeClass(\"bi-high-light-background\");\r\n            }\r\n        },\r\n\r\n        setText: function (text) {\r\n            LineSegmentButton.superclass.setText.apply(this, arguments);\r\n            this.text.setText(text);\r\n        },\r\n    });\r\n    BI.shortcut(\"bi.line_segment_button\", LineSegmentButton);\r\n})();\r\n","/**\r\n * @author windy\r\n * @version 2.0\r\n * Created by windy on 2021/9/2\r\n */\r\nBI.VirtaulTreeListItem = BI.inherit(BI.Widget, {\r\n    props: {\r\n        layer: 0,\r\n        id: \"\",\r\n        pId: \"\",\r\n        height: 24\r\n    },\r\n\r\n    render: function () {\r\n        var self = this, o = this.options;\r\n\r\n        return {\r\n            type: \"bi.htape\",\r\n            items: [{\r\n                el: {\r\n                    type: 'bi.layout',\r\n                },\r\n                width: o.layer * 15\r\n            }, {\r\n                type: \"bi.text_item\",\r\n                logic: {\r\n                    dynamic: true\r\n                },\r\n                id: o.id,\r\n                pId: o.pId,\r\n                height: o.height,\r\n                hgap: o.hgap,\r\n                text: o.text,\r\n                value: o.value,\r\n                py: o.py,\r\n                keyword: o.keyword,\r\n                listeners: [{\r\n                    eventName: '__EVENT_CHANGE__',\r\n                    action: function () {\r\n                        self.fireEvent('__EVENT_CHANGE__')\r\n                    }\r\n                }],\r\n                ref: function (ref) {\r\n                    self.item = ref;\r\n                }\r\n            }]\r\n        }\r\n    },\r\n\r\n\r\n    doHighLight: function () {\r\n        this.item.doHighLight.apply(this.item, arguments);\r\n    },\r\n\r\n    unHighLight: function () {\r\n        this.item.unHighLight.apply(this.item, arguments);\r\n    },\r\n\r\n    getId: function () {\r\n        return this.options.id;\r\n    },\r\n\r\n    getPId: function () {\r\n        return this.options.pId;\r\n    },\r\n\r\n    doClick: function () {\r\n        BI.VirtaulTreeListItem.superclass.doClick.apply(this, arguments);\r\n        this.item.setSelected(this.isSelected());\r\n    },\r\n\r\n    setSelected: function (v) {\r\n        BI.VirtaulTreeListItem.superclass.setSelected.apply(this, arguments);\r\n        this.item.setSelected(v);\r\n    }\r\n});\r\n\r\nBI.shortcut(\"bi.virtual_tree_list_item\", BI.VirtaulTreeListItem);\r\n","/**\r\n * author: young\r\n * createdDate: 2019-07-10\r\n * description: 适用简单列表场景的grid_view\r\n * @Maintainers: young\r\n */\r\nBI.GridList = BI.inherit(BI.Widget, {\r\n\r\n    props: {\r\n        baseCls: \"bi-grid-list\",\r\n        items: [],  // 一维数组\r\n        // itemFormatter\r\n        itemHeight: 30,\r\n        showLoader: false,\r\n        itemsCreator: BI.emptyFn,\r\n        onLoaded: BI.emptyFn,\r\n        hasNext: BI.emptyFn,\r\n        count: false,\r\n        overscanRowCount: 0,\r\n        overflowX: true,\r\n        overflowY: true\r\n    },\r\n\r\n    mounted: function () {\r\n        var self = this;\r\n        this._resizeHandler = BI.debounce(function () {\r\n            var width = self._getListWidth(), height = self._getListHeight();\r\n            if (self.list.getWidth() !== width || self.list.getHeight() !== height) {\r\n                self._populate();\r\n            }\r\n        }, 30);\r\n        this.removeListener = BI.ResizeDetector.addResizeListener(this.wrapper, function () {\r\n            self._resizeHandler();\r\n        });\r\n        if (BI.isNotEmptyArray(this.options.items)) {\r\n            this._populate();\r\n        }\r\n    },\r\n\r\n    render: function () {\r\n        var self = this,\r\n            o = this.options;\r\n        this.times = 1;\r\n        this.count = 0;\r\n        this.loaderStatus = \"loaded\";\r\n        return {\r\n            type: \"bi.absolute\",\r\n            items: [{\r\n                el: {\r\n                    type: \"bi.grid_view\",\r\n                    overflowX: o.overflowX,\r\n                    overflowY: o.overflowY,\r\n                    estimatedRowSize: o.itemHeight,\r\n                    estimatedColumnSize: this._getListWidth(),\r\n                    overscanRowCount: o.overscanRowCount,\r\n                    itemFormatter: o.itemFormatter,\r\n                    rowHeightGetter: function () {\r\n                        return o.itemHeight;\r\n                    },\r\n                    columnWidthGetter: function () {\r\n                        return self.listWidth - BI.DOM.getScrollWidth();\r\n                    },\r\n                    ref: function (ref) {\r\n                        self.list = ref;\r\n                    },\r\n                    listeners: [{\r\n                        eventName: BI.GridView.EVENT_SCROLL,\r\n                        action: function (sc) {\r\n                            self.fireEvent(\"EVENT_SCROLL\", sc.scrollTop);\r\n                        }\r\n                    }]\r\n                },\r\n                top: 0,\r\n                right: 0,\r\n                bottom: 0,\r\n                left: 0\r\n            }],\r\n            ref: function (_ref) {\r\n                self.wrapper = _ref;\r\n            }\r\n        };\r\n    },\r\n\r\n    _getListWidth: function () {\r\n        return this.element.width();\r\n    },\r\n\r\n    _getListHeight: function () {\r\n        return this.element.height();\r\n    },\r\n\r\n    _populate: function () {\r\n        var o = this.options,\r\n            self = this;\r\n\r\n        this.listWidth = this._getListWidth();\r\n        this.list.setEstimatedColumnSize(this.listWidth - BI.DOM.getScrollWidth());\r\n        this.list.setWidth(this.listWidth);\r\n        this.list.setHeight(this._getListHeight());\r\n\r\n        var items = BI.map(this.options.items, function (i, item) {\r\n            return [item];\r\n        });\r\n        if (o.showLoader && (this._hasNext() || this.loaderStatus === \"end\")) {\r\n            items.push([{\r\n                type: \"bi.loading_bar\",\r\n                ref: function () {\r\n                    switch (self.loaderStatus) {\r\n                        case \"end\":\r\n                            this.setEnd();\r\n                            break;\r\n                        case \"loaded\":\r\n                        default:\r\n                            this.setLoaded();\r\n                            break;\r\n                    }\r\n                },\r\n                listeners: [{\r\n                    eventName: BI.Controller.EVENT_CHANGE,\r\n                    action: function (type) {\r\n                        if (type === BI.Events.CLICK) {\r\n                            this.setLoading();\r\n                            self._nextLoad();\r\n                        }\r\n                    }\r\n                }]\r\n            }]);\r\n        }\r\n        this.list.populate(items);\r\n    },\r\n\r\n    _nextLoad: function () {\r\n        var self = this,\r\n            o = this.options;\r\n        o.itemsCreator.apply(this, [{times: ++this.times}, function () {\r\n            self._addItems.apply(self, arguments);\r\n        }]);\r\n    },\r\n\r\n    _addItems: function (items) {\r\n        var o = this.options;\r\n        this.count += items.length;\r\n        o.items = BI.concat(o.items, items);\r\n        if (this._hasNext()) {\r\n            this.setLoaded();\r\n        } else {\r\n            this.setEnd();\r\n        }\r\n        this._populate();\r\n    },\r\n\r\n    _hasNext: function () {\r\n        var o = this.options;\r\n        if (BI.isNumber(o.count)) {\r\n            return this.count < o.count;\r\n        }\r\n        return !!o.hasNext.apply(this, [{\r\n            times: this.times,\r\n            count: this.count\r\n        }]);\r\n    },\r\n\r\n    populate: function (items) {\r\n        var o = this.options,\r\n            self = this;\r\n        if (arguments.length === 0 && (BI.isFunction(o.itemsCreator))) {\r\n            o.itemsCreator.apply(this, [{times: 1}, function () {\r\n                if (arguments.length === 0) {\r\n                    throw new Error(\"参数不能为空\");\r\n                }\r\n                self.populate.apply(self, arguments);\r\n                o.onLoaded();\r\n            }]);\r\n            return;\r\n        }\r\n        if (items && items !== o.items) {\r\n            o.items = items;\r\n        }\r\n        this.times = 1;\r\n        this.count = items.length;\r\n        this.loaderStatus = \"loaded\";\r\n        this._populate();\r\n    },\r\n\r\n    setScrollTop: function (top) {\r\n        this.list.setScrollTop(top);\r\n    },\r\n\r\n    setLoaded: function () {\r\n        this.loaderStatus = \"loaded\";\r\n    },\r\n\r\n    setEnd: function () {\r\n        this.loaderStatus = \"end\";\r\n    },\r\n\r\n    setLoading: function () {\r\n        this.loaderStatus = \"loading\";\r\n    },\r\n\r\n    destroyed: function () {\r\n        this.removeListener && this.removeListener();\r\n    }\r\n});\r\nBI.GridList.EVENT_CHANGE = \"EVENT_CHANGE\";\r\nBI.shortcut(\"bi.grid_list\", BI.GridList);\r\n","/**\r\n * @author windy\r\n * @version 2.0\r\n * Created by windy on 2021/9/2\r\n */\r\nBI.VirtualTreeList = BI.inherit(BI.Widget, {\r\n\r\n    props: {\r\n        baseCls: \"bi-virtual-tree-list\",\r\n        itemsCreator: BI.emptyFn,\r\n        items: [],\r\n        el: {\r\n            type: 'bi.virtual_group_list',\r\n            rowHeight: 32,\r\n        }\r\n    },\r\n\r\n    render: function () {\r\n        var self = this, o = this.options;\r\n\r\n        return BI.extend({\r\n            items: this._getNodes(),\r\n            ref: function (ref) {\r\n                self.treeList = ref;\r\n            },\r\n            overscanHeight: 200,\r\n            blockSize: 20,\r\n        }, o.el);\r\n    },\r\n\r\n    _initTree: function (nodes) {\r\n        if (BI.isNull(this.tree)) {\r\n            this.tree = new BI.Tree();\r\n        }\r\n        var tree = BI.Tree.transformToTreeFormat(nodes);\r\n        this.tree.initTree(tree);\r\n    },\r\n\r\n    _fillTree: function (pId, nodes) {\r\n        var self = this;\r\n        var root = this.tree.getRoot();\r\n        var parentNode = this.tree.search(root, pId) || root;\r\n        BI.each(nodes, function (_idx, node) {\r\n            var tNode = new BI.Node(node);\r\n            tNode.set(\"data\", {\r\n                checked: parentNode.data.checked,\r\n                ...node\r\n            });\r\n            self.tree.addNode(parentNode, tNode);\r\n        });\r\n        this._populate();\r\n    },\r\n\r\n    _cutTree: function (id) {\r\n        var root = this.tree.getRoot();\r\n        var parentNode = this.tree.search(root, id);\r\n        if (BI.isNotNull(parentNode)) {\r\n            parentNode.data.open = false;\r\n        }\r\n        this._populate();\r\n    },\r\n\r\n    _getNodes: function () {\r\n        var self = this;\r\n        var nodes = [];\r\n        if (!this.tree) {\r\n            this._initTree(this.options.items);\r\n        }\r\n        this.tree.recursion(function (node) {\r\n            nodes.push(BI.extend({\r\n                id: node.id,\r\n                pId: node.pId,\r\n                key: node.key || node.id,\r\n            }, node.data));\r\n            if (node.data.open !== true) {\r\n                return true;\r\n            }\r\n        });\r\n\r\n        return self._wrapperEvent(nodes);\r\n    },\r\n\r\n    _triggerNode: function (id) {\r\n        var self = this;\r\n        var node = this.tree.search(this.tree.getRoot(), id) || this.tree.getRoot();\r\n        if (node.data.open === true) {\r\n            // 收起\r\n            this._cutTree(id);\r\n        } else {\r\n            if (node.getChildrenLength() === 0 && node.isParent) {\r\n                this.options.itemsCreator({ node: node }, function(nodes) {\r\n                    // 初次展开\r\n                    node.data.open = true;\r\n                    self._fillTree(node.id, nodes);\r\n                });\r\n            } else {\r\n                node.data.open = true;\r\n                this._populate();\r\n            }\r\n        }\r\n    },\r\n\r\n    _triggerNodeChecked: function (id, checked) {\r\n        var self = this;\r\n        var node = this.tree.search(this.tree.getRoot(), id);\r\n        if (node) {\r\n            // 把子节点设置成选中状态\r\n            node.data.checked = checked;\r\n            node.data.half = false;\r\n            let queue = node.getChildren().slice();\r\n            while(queue.length) {\r\n                const node = queue.shift();\r\n                if (checked === node.data.checked && !node.data.half) {\r\n                    continue;\r\n                }\r\n                node.data.checked = checked;\r\n                node.data.half = false;\r\n                queue = queue.concat(node.getChildren());\r\n            }\r\n\r\n            if (checked) {\r\n\r\n                let parent = node.getParent();\r\n                while (parent !== this.tree.getRoot()) {\r\n                    const exist = BI.some(parent.getChildren(), (i, child) => {\r\n                        if (!child.data.checked || child.data.half) {\r\n                            return true;\r\n                        }\r\n                    });\r\n                    if (exist) {\r\n                        parent.data.checked = false;\r\n                        parent.data.half = true;\r\n                    } else {\r\n                        parent.data.checked = true;\r\n                        parent.data.half = false;\r\n                    }\r\n                    parent = parent.getParent();\r\n                }\r\n\r\n            } else {\r\n                let parent = node.getParent();\r\n                while (parent !== this.tree.getRoot()) {\r\n                    const exist = BI.some(parent.getChildren(), (i, child) => {\r\n                        if (child.data.checked || child.data.half) {\r\n                            return true;\r\n                        }\r\n                    });\r\n                    if (exist) {\r\n                        parent.data.checked = false;\r\n                        parent.data.half = true;\r\n                    } else {\r\n                        parent.data.checked = false;\r\n                        parent.data.half = false;\r\n                    }\r\n                    parent = parent.getParent();\r\n                }\r\n            }\r\n        }\r\n        this._populate();\r\n    },\r\n\r\n    _populate: function () {\r\n        this.treeList.populate(this._getNodes());\r\n    },\r\n\r\n    _wrapperEvent: function (nodes) {\r\n        var self = this;\r\n        return BI.map(nodes, function (_idx, node) {\r\n            node.listeners = node.listeners || [];\r\n            var has = BI.find(node.listeners, function (idx, listener) {\r\n                return listener.eventName === '__EVENT_CHANGE__';\r\n            });\r\n            if (!has) {\r\n                node.listeners.push({\r\n                    eventName: '__EVENT_CHANGE__',\r\n                    action: function (v, value) {\r\n                        if (v === BI.Events.COLLAPSE || v === BI.Events.EXPAND) {\r\n                            self._triggerNode(node.id);\r\n                            self.fireEvent(\r\n                                BI.VirtualTreeList.EVENT_NODE_CHANGE,\r\n                                self.tree.search(self.tree.getRoot(), node.id) || self.tree.getRoot()\r\n                            );\r\n                        }\r\n                        if (v === BI.Events.CHANGE) {\r\n                            self._triggerNodeChecked(node.id, value);\r\n                            self.fireEvent(\"EVENT_CHANGE\", self.getTree());\r\n                        }\r\n                    },\r\n                });\r\n            }\r\n            return node;\r\n        });\r\n    },\r\n\r\n    move: function (start, end) {\r\n        if (start == null || end == null || start === end) {\r\n            return;\r\n        }\r\n        var node1 = this.tree.search(this.tree.getRoot(), start);\r\n        var node2 = this.tree.search(this.tree.getRoot(), end);\r\n        if (node1.getParent() !== node2.getParent()) {\r\n            return false;\r\n        }\r\n        var parent = node1.getParent();\r\n        var indexStart = parent.getChildIndex(start);\r\n        var indexEnd = parent.getChildIndex(end);\r\n\r\n        if (indexStart < indexEnd) {\r\n            parent.addChild(node1, indexEnd + 1);\r\n            parent.removeChildByIndex(indexStart);\r\n        } else {\r\n            parent.addChild(node1, indexEnd);\r\n            parent.removeChildByIndex(indexStart + 1);\r\n        }\r\n\r\n        this._populate();\r\n    },\r\n\r\n    getTree: function () {\r\n        return this.tree;\r\n    },\r\n\r\n    setOpened: function (nodeId, b) {\r\n        var self = this;\r\n        function openTree (nodeId) {\r\n            var node = self.tree.search(self.tree.getRoot(), nodeId);\r\n            var open = node && node.data.open;\r\n            if (node && open === false) {\r\n                node.data.open = true;\r\n                openTree(node.pId);\r\n            }\r\n        }\r\n        if (b) {\r\n            openTree(nodeId);\r\n            this._populate();\r\n        } else {\r\n            this._cutTree(nodeId);\r\n        }\r\n    },\r\n\r\n    scrollToViewPosition: function (nodeId) {\r\n        // 暂时只支持传了rowHeight属性的滚动对应节点到可视位置\r\n        if (BI.isKey(this.options.el.rowHeight)) {\r\n            var count = 0;\r\n            this.tree.recursion((node) => {\r\n                if (node.id === nodeId) {\r\n                    return false;\r\n                }\r\n                if (BI.get(node, ['parent', 'data', 'open']) !== false) {\r\n                    count++;\r\n                }\r\n            });\r\n\r\n            var currentScrollTop = this.element.scrollTop();\r\n            var itemPosition = (count + 1) * this.options.el.rowHeight;\r\n            if (itemPosition < currentScrollTop || itemPosition > currentScrollTop + this.element.height()) {\r\n                var scrollTop = BI.max([0, (count + 1) * this.options.el.rowHeight - this.element.height()]);\r\n                this.element.scrollTop(scrollTop);\r\n            }\r\n        }\r\n    },\r\n\r\n    getValue: function () {\r\n        var result = [];\r\n        this.tree.recursion(function (node) {\r\n            const data = node.data;\r\n            if (data.checked) {\r\n                result.push(BI.isNull(data.value) ? data.id : data.value);\r\n            }\r\n        });\r\n        return result;\r\n    },\r\n\r\n    populate: function (nodes) {\r\n        this.options.items = nodes;\r\n        this._initTree(this.options.items);\r\n        this._populate();\r\n    }\r\n});\r\nBI.VirtualTreeList.EVENT_CHANGE = \"EVENT_CHANGE\";\r\nBI.VirtualTreeList.EVENT_NODE_CHANGE = \"EVENT_NODE_CHANGE\";\r\nBI.shortcut(\"bi.virtual_tree_list\", BI.VirtualTreeList);\r\n","/**\r\n * @author windy\r\n * @version 2.0\r\n * Created by windy on 2021/9/2\r\n */\r\nBI.VirtualTreeListNode = BI.inherit(BI.NodeButton, {\r\n    props: {\r\n        baseCls: 'bi-virtual-tree-list-node',\r\n        id: \"\",\r\n        height: 24,\r\n        layer: 0,\r\n        expandIcon: \"expander-down-font\",\r\n        narrowIcon: \"expander-right-font\"\r\n    },\r\n\r\n    render: function () {\r\n        var self = this, o = this.options;\r\n\r\n        return {\r\n            type: 'bi.htape',\r\n            items: [{\r\n                el: {\r\n                    type: 'bi.layout',\r\n                },\r\n                width: o.layer * 15,\r\n            }, {\r\n                el: {\r\n                    type: \"bi.arrow_group_node_checkbox\",\r\n                    cls: o.open ? o.expandIcon : o.narrowIcon,\r\n                    ref: function (ref) {\r\n                        self.arrow = ref;\r\n                    },\r\n                },\r\n                width: 16,\r\n            }, {\r\n                type: \"bi.label\",\r\n                textAlign: \"left\",\r\n                whiteSpace: \"nowrap\",\r\n                textHeight: o.height,\r\n                height: o.height,\r\n                text: o.text,\r\n                value: o.value,\r\n                py: o.py,\r\n                keyword: o.keyword,\r\n                ref: function (ref) {\r\n                    self.text = ref;\r\n                },\r\n            }]\r\n        }\r\n    },\r\n\r\n    doRedMark: function () {\r\n        this.text.doRedMark.apply(this.text, arguments);\r\n    },\r\n\r\n    unRedMark: function () {\r\n        this.text.unRedMark.apply(this.text, arguments);\r\n    },\r\n\r\n    doClick: function () {\r\n        if (this.isSelected()) {\r\n            this.triggerExpand();\r\n        } else {\r\n            this.triggerCollapse();\r\n        }\r\n    },\r\n\r\n    setOpened: function (v) {\r\n        BI.VirtualTreeListNode.superclass.setOpened.apply(this, arguments);\r\n        this.arrow.setSelected(v);\r\n    },\r\n\r\n    shouldUpdate: function (opt) {\r\n        var o = this.options;\r\n\r\n        var keys = [\"open\", \"layer\", \"pId\", \"value\", 'keyword'];\r\n\r\n        return BI.some(keys, function (idx, key) {\r\n            return opt[key] !== o[key];\r\n        });\r\n    },\r\n\r\n    update: function (opt) {\r\n        var o = this.options;\r\n        if (opt.value !== o.value) {\r\n            o.value = opt.value;\r\n            this.text.setText(opt.value);\r\n        }\r\n        if (opt.open !== o.open) {\r\n            o.open = opt.open;\r\n            this.arrow.setSelected(opt.open);\r\n        }\r\n        if (!opt.keyword) {\r\n            o.keyword = '';\r\n            this.text.unRedMark(opt.value);\r\n        } else if (opt.keyword !== o.keyword) {\r\n            o.keyword = opt.keyword;\r\n            this.text.doRedMark(opt.keyword);\r\n        }\r\n    },\r\n});\r\n\r\nBI.shortcut(\"bi.virtual_tree_list_node\", BI.VirtualTreeListNode);","/**\r\n * @author windy\r\n * @version 2.0\r\n * Created by windy on 2021/10/22\r\n * 兼容外部继承LoadingPane的情况\r\n */\r\nBI.LoadingPane = BI.Pane;","/**\r\n * author: young\r\n * createdDate: 2019/4/19\r\n * description:\r\n * @Maintainers: young\r\n */\r\n!(function () {\r\n    BI.ResizeContainerHtape = BI.inherit(BI.Widget, {\r\n        props: {\r\n            baseCls: \"bi-resize-container-htape\",\r\n            minSize: 260,\r\n            maxSize: 260 * 1.5,\r\n            initLeftSize: null,\r\n            left: {\r\n                type: \"bi.default\"\r\n            },\r\n            right: {\r\n                type: \"bi.default\"\r\n            },\r\n        },\r\n\r\n        render: function () {\r\n            var self = this, o = this.options;\r\n            return {\r\n                type: \"bi.htape\",\r\n                items: [{\r\n                    type: \"bi.resizable_container\",\r\n                    minSize: o.minSize,\r\n                    maxSize: o.maxSize,\r\n                    content: o.left,\r\n                    resize: BI.bind(this._resizeContainer, this),\r\n                    width: o.initLeftSize || o.minSize\r\n                }, {\r\n                    el: o.right\r\n                }],\r\n                ref: function (ref) {\r\n                    self.contianer = ref;\r\n                }\r\n            };\r\n        },\r\n\r\n        _resizeContainer: function (size) {\r\n            this.contianer.attr(\"items\")[0].width = size;\r\n            this.contianer.resize();\r\n\r\n            this.fireEvent(\"EVENT_RESIZE\", size);\r\n        }\r\n    });\r\n    \r\n    BI.ResizeContainerHtape.EVENT_RESIZE = \"EVENT_RESIZE\";\r\n    BI.shortcut(\"bi.resize_container.htape\", BI.ResizeContainerHtape);\r\n})();\r\n","/**\r\n * author: young\r\n * createdDate: 2019/4/19\r\n * description:\r\n * @Maintainers: young\r\n */\r\n!(function () {\r\n    BI.ResizableContainer = BI.inherit(BI.Widget, {\r\n        props: {\r\n            baseCls: \"bi-resizable-container\",\r\n            content: {},\r\n            direction: \"e\", // e s w n ew sn we ns\r\n            minSize: 15,\r\n            maxSize: Number.MAX_VALUE,\r\n            resizable: true,\r\n            start: BI.emptyFn,\r\n            resize: BI.emptyFn,\r\n            stop: BI.emptyFn,\r\n            startDragging: BI.emptyFn,\r\n            broadCastResize: true\r\n        },\r\n\r\n        render: function () {\r\n            var self = this, o = this.options;\r\n            var startDrag = false;\r\n            var size = 0, offset = 0;\r\n            this.defaultSize = o.height ? o.height : null;\r\n\r\n            this.handler = BI.createWidget(BI.extend(this._createHandle(), {\r\n                invisible: !o.resizable\r\n            }));\r\n\r\n            this.handler.element.on(\"click\", function (e) {\r\n                e.stopPropagation();\r\n            });\r\n\r\n            function optimizeSize (s) {\r\n                return BI.clamp(s, o.minSize, o.maxSize || Number.MAX_VALUE);\r\n            }\r\n\r\n            this._stared = false;\r\n            var mouseMoveTracker = new BI.MouseMoveTracker(function (deltaX, deltaY) {\r\n                if (mouseMoveTracker.isDragging()) {\r\n                    if (!self._stared) {\r\n                        self._stared = true;\r\n                        o.startDragging();\r\n                    }\r\n\r\n                    BI.$(document.body).css(\"cursor\", self._isHorizontalResize() ? \"ew-resize\" : \"ns-resize\");\r\n\r\n                    startDrag = true;\r\n\r\n                    if (BI.get(o.direction, 0) === \"w\") {\r\n                        deltaX = -deltaX;\r\n                    }\r\n                    offset += deltaX;\r\n                    if (BI.get(o.direction, 0) === \"n\") {\r\n                        deltaY = -deltaY;\r\n                    }\r\n                    offset += deltaY;\r\n                    size = optimizeSize((self.defaultSize || self._getDefaultSize()) + offset);\r\n                    self.handler.element.addClass(\"dragging\");\r\n                    o.resize(size);\r\n                    o.broadCastResize && BI.$(window).trigger(\"resize\");\r\n                }\r\n            }, function () {\r\n                if (startDrag === true) {\r\n                    size = optimizeSize(size);\r\n                    o.stop(size);\r\n                    self.defaultSize = size;\r\n                    size = 0;\r\n                    offset = 0;\r\n                    startDrag = false;\r\n                    self._stared = false;\r\n                    BI.$(document.body).css(\"cursor\", \"auto\");\r\n                }\r\n                self.handler.element.removeClass(\"dragging\");\r\n                self.handler.element.removeClass(\"suitable\");\r\n                mouseMoveTracker.releaseMouseMoves();\r\n            }, document);\r\n\r\n\r\n            this.handler.element.on(\"mousedown\", function (event) {\r\n                mouseMoveTracker.captureMouseMoves(event);\r\n            });\r\n\r\n            return {\r\n                type: \"bi.absolute\",\r\n                items: [{\r\n                    el: o.content,\r\n                    left: 0,\r\n                    right: 0,\r\n                    top: 0,\r\n                    bottom: 0\r\n                }, BI.extend({el: this.handler}, this._getHandlePosition())]\r\n            };\r\n        },\r\n\r\n        _isHorizontalResize: function () {\r\n            return BI.get(this.options.direction, 0) === \"w\" || BI.get(this.options.direction, 0) === \"e\";\r\n        },\r\n\r\n        _createHandle: function () {\r\n            if (this._isHorizontalResize()) {\r\n                return {\r\n                    type: \"bi.icon_label\",\r\n                    cls: \"horizontal-drag-font resize-handle-ew\",\r\n                    width: 5\r\n                };\r\n            }\r\n            return {\r\n                type: \"bi.icon_label\",\r\n                cls: \"vertical-drag-font resize-handle-ns\",\r\n                height: 5\r\n            };\r\n        },\r\n\r\n        _getHandlePosition: function () {\r\n            switch (this.options.direction) {\r\n                case \"e\":\r\n                    return {\r\n                        right: -2,\r\n                        top: 0,\r\n                        bottom: 0\r\n                    };\r\n                case \"ew\":\r\n                    return {\r\n                        right: 8,\r\n                        top: 0,\r\n                        bottom: 0\r\n                    };\r\n                case \"w\":\r\n                    return {\r\n                        left: -2,\r\n                        top: 0,\r\n                        bottom: 0\r\n                    };\r\n                case \"we\":\r\n                    return {\r\n                        left: 8,\r\n                        top: 0,\r\n                        bottom: 0\r\n                    };\r\n                case \"s\":\r\n                    return {\r\n                        left: 0,\r\n                        right: 0,\r\n                        bottom: -3\r\n                    };\r\n                case \"sn\":\r\n                    return {\r\n                        left: 0,\r\n                        right: 0,\r\n                        bottom: 2\r\n                    };\r\n                case \"n\":\r\n                    return {\r\n                        top: -3,\r\n                        left: 0,\r\n                        right: 0\r\n                    };\r\n\r\n                case \"ns\":\r\n                    return {\r\n                        top: 2,\r\n                        left: 0,\r\n                        right: 0\r\n                    };\r\n                default:\r\n                    break;\r\n            }\r\n        },\r\n\r\n        _getDefaultSize: function () {\r\n            var o = this.options;\r\n            if (this._isHorizontalResize()) {\r\n                return o.width || o.minSize;\r\n            }\r\n            return o.height || o.minSize;\r\n        },\r\n\r\n        setMinSize: function (minWidth) {\r\n            this.options.minSize = minWidth;\r\n        },\r\n\r\n        setMaxSize: function (maxWidth) {\r\n            this.options.maxSize = maxWidth;\r\n        },\r\n\r\n        setResizable: function (resizable) {\r\n            this.options.resizable = resizable;\r\n            this.handler.setVisible(resizable);\r\n            BI.$(window).trigger(\"resize\");\r\n        },\r\n\r\n        reset: function () {\r\n            this.defaultSize = null;\r\n        }\r\n\r\n    });\r\n    BI.shortcut(\"bi.resizable_container\", BI.ResizableContainer);\r\n}());\r\n","/**\r\n * author: young\r\n * createdDate: 2019/4/19\r\n * description:\r\n * @Maintainers: young\r\n */\r\n!(function () {\r\n    BI.ResizeContainerVtape = BI.inherit(BI.Widget, {\r\n        props: {\r\n            baseCls: \"bi-resize-container-vtape\",\r\n            minSize: 100,\r\n            maxSize: 200,\r\n            initTopSize: null,\r\n            top: {\r\n                type: \"bi.default\"\r\n            },\r\n            bottom: {\r\n                type: \"bi.default\"\r\n            }\r\n        },\r\n\r\n        render: function () {\r\n            var self = this, o = this.options;\r\n            return {\r\n                type: \"bi.vtape\",\r\n                items: [{\r\n                    type: \"bi.resizable_container\",\r\n                    direction: \"s\",\r\n                    minSize: o.minSize,\r\n                    maxSize: o.maxSize,\r\n                    content: o.top,\r\n                    resize: BI.bind(this._resizeContainer, this),\r\n                    height: o.initTopSize || o.minSize\r\n                }, {\r\n                    el: o.bottom\r\n                }],\r\n                ref: function (ref) {\r\n                    self.contianer = ref;\r\n                }\r\n            };\r\n        },\r\n\r\n        _resizeContainer: function (size) {\r\n            this.contianer.attr(\"items\")[0].height = size;\r\n            this.contianer.resize();\r\n\r\n            this.fireEvent(\"EVENT_RESIZE\", size);\r\n        }\r\n    });\r\n    \r\n    BI.ResizeContainerVtape.EVENT_RESIZE = \"EVENT_RESIZE\";\r\n    BI.shortcut(\"bi.resize_container.vtape\", BI.ResizeContainerVtape);\r\n})();\r\n","/**\r\n * 自定义滚动条\r\n */\r\n!(function () {\r\n\r\n    BI.ScrollbarContainer = BI.inherit(BI.Widget, {\r\n        props: {\r\n            baseCls: \"bi-scrollbar-container\",\r\n            el: {}\r\n        },\r\n\r\n        render: function () {\r\n            var self = this, o = this.options;\r\n            return [o.el, {\r\n                type: \"bi.absolute\",\r\n                items: [{\r\n                    el: {\r\n                        type: \"bi.grid_table_scrollbar\",\r\n                        ref: function (_ref) {\r\n                            self.verticalScrollbar = _ref;\r\n                        },\r\n                        listeners: [{\r\n                            eventName: BI.GridTableScrollbar.EVENT_SCROLL,\r\n                            action: function (scrollTop) {\r\n                                try {\r\n                                    self.element.scrollTop(scrollTop);\r\n                                } catch (e) {\r\n\r\n                                }\r\n                            }\r\n                        }]\r\n                    },\r\n                    top: 0,\r\n                    bottom: 0,\r\n                    right: 0\r\n                }, {\r\n                    el: {\r\n                        type: 'bi.grid_table_scrollbar',\r\n                        orientation: 'horizontal',\r\n                        ref: function (_ref) {\r\n                            self.horizontalScrollbar = _ref;\r\n                        },\r\n                        listeners: [\r\n                            {\r\n                                eventName: BI.GridTableScrollbar.EVENT_SCROLL,\r\n                                action: function (scrollLeft) {\r\n                                    try {\r\n                                        self.element.scrollLeft(scrollLeft);\r\n                                    } catch (e) {}\r\n                                },\r\n                            },\r\n                        ],\r\n                    },\r\n                    left: 0,\r\n                    bottom: 0,\r\n                    right: 0,\r\n                }]\r\n            }];\r\n        },\r\n\r\n        _handleResize() {\r\n            var scrollTop = this.element.scrollTop();\r\n            var scrollHeight = this.element[0].scrollHeight;\r\n            var height = this.element.height();\r\n            this.verticalScrollbar.setContentSize(scrollHeight);\r\n            this.verticalScrollbar.setSize(height);\r\n            this.verticalScrollbar.setPosition(scrollTop);\r\n            this.verticalScrollbar.populate();\r\n\r\n            var scrollLeft = this.element.scrollLeft();\r\n            var scrollWidth = this.element[0].scrollWidth;\r\n            var width = this.element.width();\r\n            this.horizontalScrollbar.setContentSize(scrollWidth);\r\n            this.horizontalScrollbar.setSize(width);\r\n            this.horizontalScrollbar.setPosition(scrollLeft);\r\n            this.horizontalScrollbar.populate();\r\n        },\r\n\r\n        mounted() {\r\n            var self = this;\r\n            this.element.scroll(function () {\r\n                var scrollTop = self.element.scrollTop();\r\n                self.verticalScrollbar.setVisible(true);\r\n                self.verticalScrollbar.setPosition(scrollTop);\r\n                self.verticalScrollbar.populate();\r\n\r\n                var scrollLeft = self.element.scrollLeft();\r\n                self.horizontalScrollbar.setVisible(true);\r\n                self.horizontalScrollbar.setPosition(scrollLeft);\r\n                self.horizontalScrollbar.populate();\r\n            });\r\n            this.resizeObserver = BI.ResizeDetector.addResizeListener(this, this._handleResize.bind(this));\r\n            if (window.MutationObserver) {\r\n                this.mutationObserver = new window.MutationObserver(this._handleResize.bind(this));\r\n                this.mutationObserver.observe(this.element[0], {\r\n                    attributes: true,\r\n                    childList: true,\r\n                    subtree: true,\r\n                });\r\n            }\r\n            this.verticalPopper = BI.Popper.createPopper(this.element[0], this.verticalScrollbar.element[0], {\r\n                placement: 'right-start',\r\n                strategy: 'fixed',\r\n                modifiers: [\r\n                    {\r\n                        name: 'offset',\r\n                        options: {\r\n                            offset: [0, 0],\r\n                        },\r\n                    }, {\r\n                        name: \"flip\",\r\n                        enabled: false,\r\n                    }\r\n                ],\r\n            });\r\n            this.horizontalPopper = BI.Popper.createPopper(this.element[0], this.horizontalScrollbar.element[0], {\r\n                placement: 'bottom-start',\r\n                strategy: 'fixed',\r\n                modifiers: [\r\n                    {\r\n                        name: 'offset',\r\n                        options: {\r\n                            offset: [0, 0],\r\n                        },\r\n                    }, {\r\n                        name: \"flip\",\r\n                        enabled: false,\r\n                    }\r\n                ],\r\n            });\r\n            this._handleResize();\r\n        },\r\n\r\n        destroyed() {\r\n            this.resizeObserver();\r\n            this.mutationObserver && this.mutationObserver.disconnect();\r\n            this.verticalPopper.destroy();\r\n            this.horizontalPopper.destroy();\r\n        },\r\n    });\r\n    BI.shortcut(\"bi.scrollbar_container\", BI.ScrollbarContainer);\r\n\r\n    BI.config(\"bi.scrollbar_container\", function (ob) {\r\n        // 只做chrome和edge的，因为chrome下滚动条可以隐藏，其他的不可以\r\n        if (BI.isIE()) {\r\n            return BI.extend({}, ob, {\r\n                type: \"bi.el\"\r\n            });\r\n        }\r\n        return ob;\r\n    });\r\n})();\r\n","/**\r\n * ------------------------------------------------------------------\r\n * 组合色选择的单个组合，有五种颜色\r\n * @param    {array}  value     初始选择的颜色组合\r\n * @param    {array}  colors    所有颜色组合配置\r\n * ------------------------------------------------------------------\r\n */\r\n!(function () {\r\n    var SelectColorItem = BI.inherit(BI.BasicButton, {\r\n\r\n        props: {\r\n            extraCls: \"bi-select-color-item bi-border\",\r\n            value: [],\r\n            colors: [],\r\n            once: true,\r\n            height: 50,\r\n            width: 130\r\n        },\r\n\r\n        mounted: function () {\r\n            var o = this.options;\r\n            BI.each(this.layouts, function (i, layout) {\r\n                layout.element.css(\"background-color\", o.value[i]);\r\n            });\r\n        },\r\n\r\n        render: function () {\r\n            var self = this, o = this.options;\r\n            this.layouts = [];\r\n            return {\r\n                type: \"bi.absolute\",\r\n                items: [{\r\n                    el: {\r\n                        type: \"bi.button_group\",\r\n                        items: BI.map(o.colors, function () {\r\n                            return {\r\n                                type: \"bi.layout\",\r\n                                ref: function (ref) {\r\n                                    self.layouts.push(ref);\r\n                                }\r\n                            };\r\n                        }),\r\n                        layouts: [{\r\n                            type: \"bi.center\",\r\n                            hgap: 0.5,\r\n                            vgap: 2\r\n                        }]\r\n                    },\r\n                    left: 1,\r\n                    right: 2,\r\n                    top: 0,\r\n                    bottom: 0\r\n                }]\r\n            };\r\n        }\r\n    });\r\n    SelectColorItem.EVENT_CHANGE = \"EVENT_CHANGE\";\r\n    BI.shortcut(\"bi.select_color_item\", SelectColorItem);\r\n})();","/**\r\n * ------------------------------------------------------------------\r\n * 组合色选择的弹出层，列出所有的颜色组合\r\n * @param    {array}  colors    所有颜色组合配置\r\n * @param    {array}  value     当前选中颜色组合\r\n * ------------------------------------------------------------------\r\n */\r\n!(function () {\r\n    var SelectColorPopup = BI.inherit(BI.Widget, {\r\n\r\n        props: {\r\n            baseCls: \"bi-select-color-popup\",\r\n            height: 160,\r\n            items: []\r\n        },\r\n\r\n        render: function () {\r\n            var self = this, o = this.options;\r\n            var items = [];\r\n            BI.each(o.colors, function (i, style) {\r\n                items.push({\r\n                    type: \"bi.select_color_item_wrapper\",\r\n                    selected: BI.isEqual(o.value, style.colors),\r\n                    header: style.value,\r\n                    colors: style.colors.slice(0, 5),\r\n                    value: style.colors\r\n                });\r\n            });\r\n            return {\r\n                type: \"bi.absolute\",\r\n                items: [{\r\n                    el: {\r\n                        type: \"bi.button_group\",\r\n                        items: items,\r\n                        layouts: [{\r\n                            type: \"bi.vertical\",\r\n                            hgap: 5\r\n                        }],\r\n                        listeners: [{\r\n                            eventName: BI.ButtonGroup.EVENT_CHANGE,\r\n                            action: function (value, item) {\r\n                                self.popup.setValue(value);\r\n                                item.setSelected && item.setSelected(true);\r\n                                self.fireEvent(SelectColorPopup.EVENT_CHANGE, value);\r\n                            }\r\n                        }],\r\n                        ref: function (ref) {\r\n                            self.popup = ref;\r\n                        }\r\n                    },\r\n                    top: 5,\r\n                    right: 0,\r\n                    bottom: 5,\r\n                    left: 0\r\n                }]\r\n            };\r\n        },\r\n\r\n        getValue: function () {\r\n            return this.popup.getValue();\r\n        }\r\n    });\r\n    SelectColorPopup.EVENT_CHANGE = \"EVENT_CHANGE\";\r\n    BI.shortcut(\"bi.select_color_popup\", SelectColorPopup);\r\n})();","/**\r\n * ------------------------------------------------------------------\r\n * 组合色选择\r\n * @param    {array}  value     初始选择的颜色组合\r\n * @param    {array}  colors    所有颜色组合配置\r\n * ------------------------------------------------------------------\r\n */\r\n!(function () {\r\n\r\n    BI.SelectColorCombo = BI.inherit(BI.Widget, {\r\n        props: {\r\n            baseCls: \"bi-select-color-combo\",\r\n            width: 130,\r\n            items: [],\r\n            colors: [],\r\n            value: []\r\n        },\r\n\r\n        _store: function () {\r\n            return BI.Models.getModel(\"bi.model.select.color.combo\", {\r\n                value: this.options.value\r\n            });\r\n        },\r\n\r\n        watch: {\r\n            selectedColor: function (color) {\r\n                color = BI.isArray(color) ? color : [color];\r\n                this.combo.setValue(color);\r\n            }\r\n        },\r\n\r\n        render: function () {\r\n            var self = this, o = this.options;\r\n            return {\r\n                type: \"bi.combo\",\r\n                value: this.model.selectedColor,\r\n                adjustLength: 5,\r\n                el: {\r\n                    type: \"bi.select_color_trigger\",\r\n                    title: function () {\r\n                        var res = BI.find(o.colors, function (i, style) {\r\n                            if (BI.isEqual(style.colors, self.model.selectedColor)) {\r\n                                return true;\r\n                            }\r\n                        });\r\n                        return res && res.text;\r\n                    },\r\n                    value: this.model.selectedColor\r\n                },\r\n                popup: {\r\n                    el: {\r\n                        type: \"bi.select_color_popup\",\r\n                        value: this.model.selectedColor,\r\n                        colors: o.colors,\r\n                        listeners: [{\r\n                            eventName: \"EVENT_CHANGE\",\r\n                            action: function (value) {\r\n                                self.store.setSelectedColor(value);\r\n                                self.combo.hideView();\r\n                                self.fireEvent(BI.SelectColorCombo.EVENT_CHANGE);\r\n                            }\r\n                        }],\r\n                        ref: function (ref) {\r\n                            self.popup = ref;\r\n                        }\r\n                    },\r\n                    stopPropagation: false,\r\n                    minWidth: 152\r\n                },\r\n                ref: function (ref) {\r\n                    self.combo = ref;\r\n                },\r\n                listeners: [{\r\n                    eventName: BI.Combo.EVENT_AFTER_INIT,\r\n                    action: function () {\r\n                        self.popup.setValue(self.model.selectedColor);\r\n                    }\r\n                }]\r\n            };\r\n        }\r\n    });\r\n    BI.SelectColorCombo.EVENT_CHANGE = \"EVENT_CHANGE\";\r\n    BI.shortcut(\"bi.select_color_combo\", BI.SelectColorCombo);\r\n})();","!(function () {\r\n    var SelectColorComboModel = BI.inherit(Fix.Model, {\r\n\r\n        state: function () {\r\n            return {\r\n                selectedColor: this.options.value\r\n            };\r\n        },\r\n\r\n        actions: {\r\n            setSelectedColor: function (v) {\r\n                this.model.selectedColor = v;\r\n            }\r\n        }\r\n\r\n    });\r\n    BI.model(\"bi.model.select.color.combo\", SelectColorComboModel);\r\n})();","/**\r\n * ------------------------------------------------------------------\r\n * 组合色选择的弹窗触发器，有五种颜色\r\n * @param    {array}  value     初始选择的颜色组合\r\n * @param    {array}  colors    所有颜色组合配置\r\n * ------------------------------------------------------------------\r\n */\r\n!(function () {\r\n\r\n    var SelectColorTrigger = BI.inherit(BI.Trigger, {\r\n\r\n        props: {\r\n            extraCls: \" bi-select-color-trigger bi-border\",\r\n            height: 28,\r\n            value: []\r\n        },\r\n\r\n        mounted: function () {\r\n            var self = this, o = this.options;\r\n            BI.each(this.layouts, function (i, layout) {\r\n                layout.element.css(\"background-color\", o.value[i]);\r\n            });\r\n        },\r\n\r\n        render: function () {\r\n            var self = this, o = this.options;\r\n            this.layouts = [];\r\n\r\n            return {\r\n                type: \"bi.absolute\",\r\n                items: [{\r\n                    el: {\r\n                        type: \"bi.button_group\",\r\n                        items: BI.map(o.value.slice(0, 5), function () {\r\n                            return {\r\n                                type: \"bi.layout\",\r\n                                ref: function (ref) {\r\n                                    self.layouts.push(ref);\r\n                                }\r\n                            };\r\n                        }),\r\n                        layouts: [{\r\n                            type: \"bi.center\",\r\n                            hgap: 0.5,\r\n                            vgap: 2\r\n                        }],\r\n                        ref: function (ref) {\r\n                            self.colorContainer = ref;\r\n                        }\r\n                    },\r\n                    left: 1,\r\n                    right: 2,\r\n                    top: 0,\r\n                    bottom: 0\r\n                }, {\r\n                    el: {\r\n                        type: \"bi.icon_button\",\r\n                        disableSelected: true,\r\n                        cls: \"icon-combo-down-icon trigger-triangle-font\",\r\n                        width: 15,\r\n                        height: 10,\r\n                        ref: function (ref) {\r\n                            self.down = ref;\r\n                        }\r\n                    },\r\n                    right: 4,\r\n                    bottom: 5\r\n                }]\r\n            };\r\n        },\r\n\r\n        populate: function (items) {\r\n            this.options.items = items;\r\n        },\r\n\r\n        setValue: function (vals) {\r\n            this.value = vals;\r\n            BI.each(this.layouts, function (i, layout) {\r\n                layout.element.css(\"background-color\", vals[i]);\r\n            });\r\n        },\r\n\r\n        getValue: function () {\r\n            return this.value;\r\n        }\r\n    });\r\n    SelectColorTrigger.EVENT_CHANGE = \"EVENT_CHANGE\";\r\n    BI.shortcut(\"bi.select_color_trigger\", SelectColorTrigger);\r\n})();","/**\r\n * ------------------------------------------------------------------\r\n * 组合色选择的单个组合加上标题形成的新容器\r\n * @param    {String}  header     颜色组合标题名称\r\n * @param    {Array}   value      初始选择的颜色组合\r\n * @param    {Array}   colors     所有颜色组合配置\r\n * ------------------------------------------------------------------\r\n */\r\n!(function () {\r\n    var SelectColorItemWrapper = BI.inherit(BI.BasicButton, {\r\n        props: {\r\n            extraCls: \"bi-select-color-item-wrapper\",\r\n            header: \"\",\r\n            value: [],\r\n            colors: [],\r\n            height: 50,\r\n            width: 130\r\n        },\r\n\r\n        render: function () {\r\n            var self = this, o = this.options;\r\n            return {\r\n                type: \"bi.vtape\",\r\n                hgap: 2,\r\n                items: [{\r\n                    type: \"bi.label\",\r\n                    textAlign: \"left\",\r\n                    text: o.header,\r\n                    lgap: 3\r\n                }, {\r\n                    el: {\r\n                        type: \"bi.select_color_item\",\r\n                        value: o.value,\r\n                        colors: o.colors,\r\n                        ref: function (ref) {\r\n                            self.item = ref;\r\n                        },\r\n                        listeners: [{\r\n                            eventName: \"EVENT_CHANGE\",\r\n                            action: function () {\r\n                                self.fireEvent(BI.Controller.EVENT_CHANGE, this.getValue());\r\n                            }\r\n                        }]\r\n                    },\r\n                    height: 28\r\n                }]\r\n            };\r\n        },\r\n\r\n        setSelected: function (v) {\r\n            this.item.setSelected(v);\r\n        },\r\n\r\n        isSelected: function () {\r\n            return this.item.isSelected();\r\n        }\r\n    });\r\n    BI.shortcut(\"bi.select_color_item_wrapper\", SelectColorItemWrapper);\r\n})();","!(function () {\r\n    var Widget = BI.inherit(BI.Widget, {\r\n        props: {\r\n            baseCls: \"bi-steps-item\",\r\n            text: \"\",\r\n            stepWidth: 88,\r\n            stepHeight: 50,\r\n            showLine: true\r\n        },\r\n\r\n        render: function () {\r\n            var self = this,\r\n                o = this.options;\r\n\r\n            this.constant = BI.Constants.getConstant(\"bi.constants.steps.status\");\r\n            this.status = this.constant.NEXT;\r\n\r\n            return {\r\n                type: \"bi.htape\",\r\n                height: o.stepHeight,\r\n                items: [{\r\n                    el: {\r\n                        type: \"bi.vertical_adapt\",\r\n                        items: [{\r\n                            type: \"bi.layout\",\r\n                            cls: \"step-line\",\r\n                            height: 2,\r\n                            width: \"100%\",\r\n                            invisible: !o.showLine\r\n                        }]\r\n                    },\r\n                    rgap: 8\r\n                }, {\r\n                    el: {\r\n                        type: \"bi.right_vertical_adapt\",\r\n                        items: [{\r\n                            type: \"bi.icon_change_button\",\r\n                            iconCls: \"step-next\",\r\n                            iconWidth: 14,\r\n                            iconHeight: 14,\r\n                            ref: function (_ref) {\r\n                                self.icon = _ref;\r\n                            },\r\n                            rgap: 8\r\n                        }, {\r\n                            type: \"bi.label\",\r\n                            cls: \"step-text\",\r\n                            textAlign: \"left\",\r\n                            whiteSpace: \"nowrap\",\r\n                            rgap: 5,\r\n                            text: o.text\r\n                        }]\r\n                    },\r\n                    width: o.stepWidth\r\n                }]\r\n            };\r\n        },\r\n\r\n        setStatus: function (status) {\r\n            if (status === this.status) {\r\n                return;\r\n            }\r\n            this.status = status;\r\n\r\n            switch (status) {\r\n                case this.constant.CURR:\r\n                    this.icon.setIcon(\"step-now\");\r\n                    this.element.addClass(\"active\");\r\n                    break;\r\n                case this.constant.PREV:\r\n                    this.icon.setIcon(\"step-prev\");\r\n                    this.element.addClass(\"active\");\r\n                    break;\r\n                case this.constant.NEXT:\r\n                default:\r\n                    this.icon.setIcon(\"step-next\");\r\n                    this.element.removeClass(\"active\");\r\n                    break;\r\n            }\r\n        }\r\n\r\n    });\r\n    BI.shortcut(\"bi.steps.item\", Widget);\r\n})();","!(function () {\r\n    BI.constant(\"bi.constants.steps.status\", {\r\n        PREV: 0,\r\n        CURR: 1,\r\n        NEXT: 2\r\n    });\r\n})();","/**\r\n * 步骤条组件\r\n * 需要外部给宽度\r\n */\r\n!(function () {\r\n    BI.Steps = BI.inherit(BI.Widget, {\r\n        props: {\r\n            baseCls: \"bi-steps\",\r\n            stepItems: [],\r\n            stepHeight: 50,\r\n            stepWidth: 88\r\n        },\r\n\r\n        render: function () {\r\n            var self = this,\r\n                o = this.options;\r\n\r\n            this.steps = [];\r\n            this.currStep = 0;\r\n            this.constant = BI.Constants.getConstant(\"bi.constants.steps.status\");\r\n\r\n            // 初始化第一个步骤\r\n            this.steps.push(BI.createWidget(this._createStep(o.stepItems[0], false)));\r\n\r\n            var grid = BI.createWidget({\r\n                type: \"bi.grid\",\r\n                rows: 1,\r\n                width: \"100%\",\r\n                columns: o.stepItems.length - 1,\r\n                items: BI.map(o.stepItems.slice(1), function (idx, val) {\r\n                    return {\r\n                        row: 0,\r\n                        column: idx,\r\n                        el: BI.extend(self._createStep(val, true), {\r\n                            ref: function (_ref) {\r\n                                self.steps.push(_ref);\r\n                            }\r\n                        })\r\n                    };\r\n                })\r\n            });\r\n\r\n            return {\r\n                type: \"bi.htape\",\r\n                items: [{\r\n                    el: this.steps[0],\r\n                    width: o.stepWidth\r\n                }, {\r\n                    el: grid\r\n                }],\r\n                height: o.stepHeight\r\n            };\r\n        },\r\n\r\n        _createStep: function (v, showLine) {\r\n            var o = this.options;\r\n\r\n            return BI.extend(v, {\r\n                type: \"bi.steps.item\",\r\n                stepHeight: o.stepHeight,\r\n                stepWidth: o.stepWidth,\r\n                showLine: showLine\r\n            });\r\n        },\r\n\r\n        mounted: function () {\r\n            this.steps[0] && this.steps[0].setStatus(this.constant.CURR);\r\n        },\r\n\r\n        setValue: function (val) {\r\n            var self = this;\r\n            this.currStep = val;\r\n\r\n            BI.each(this.options.stepItems, function (i) {\r\n                if (i < val) {\r\n                    self.steps[i].setStatus(self.constant.PREV);\r\n                } else if (i === val) {\r\n                    self.steps[i].setStatus(self.constant.CURR);\r\n                } else {\r\n                    self.steps[i].setStatus(self.constant.NEXT);\r\n                }\r\n            });\r\n        },\r\n\r\n        getValue: function () {\r\n            return this.currStep;\r\n        }\r\n    });\r\n\r\n    BI.shortcut(\"bi.steps\", BI.Steps);\r\n})();","/**\r\n * ASCII 32-126 单位字体大小宽度\r\n * windows下场景,默认字体族：Avenir, \"Segoe UI\", PingFangSC-Regular, \"Microsoft YaHei\"\r\n * https://kms.fineres.com/pages/viewpage.action?pageId=271278482\r\n */\r\n!(function () {\r\n    var WIDTHS = {\r\n        32: 0.274,\r\n        33: 0.284,\r\n        34: 0.393,\r\n        35: 0.592,\r\n        36: 0.540,\r\n        37: 0.819,\r\n        38: 0.801,\r\n        39: 0.230,\r\n        40: 0.303,\r\n        41: 0.303,\r\n        42: 0.418,\r\n        43: 0.684,\r\n        44: 0.218,\r\n        45: 0.400,\r\n        46: 0.218,\r\n        47: 0.391,\r\n        48: 0.54,\r\n        49: 0.54,\r\n        50: 0.54,\r\n        51: 0.54,\r\n        52: 0.54,\r\n        53: 0.54,\r\n        54: 0.54,\r\n        55: 0.54,\r\n        56: 0.54,\r\n        57: 0.54,\r\n        58: 0.218,\r\n        59: 0.218,\r\n        60: 0.684,\r\n        61: 0.684,\r\n        62: 0.684,\r\n        63: 0.449,\r\n        64: 0.955,\r\n        65: 0.646,\r\n        66: 0.574,\r\n        67: 0.620,\r\n        68: 0.703,\r\n        69: 0.507,\r\n        70: 0.488,\r\n        71: 0.687,\r\n        72: 0.710,\r\n        73: 0.267,\r\n        74: 0.358,\r\n        75: 0.580,\r\n        76: 0.471,\r\n        77: 0.899,\r\n        78: 0.749,\r\n        79: 0.754,\r\n        80: 0.561,\r\n        81: 0.754,\r\n        82: 0.599,\r\n        83: 0.532,\r\n        84: 0.524,\r\n        85: 0.688,\r\n        86: 0.622,\r\n        87: 0.934,\r\n        88: 0.591,\r\n        89: 0.553,\r\n        90: 0.571,\r\n        91: 0.303,\r\n        92: 0.379,\r\n        93: 0.303,\r\n        94: 0.684,\r\n        95: 0.416,\r\n        96: 0.269,\r\n        97: 0.509,\r\n        98: 0.588,\r\n        99: 0.463,\r\n        100: 0.590,\r\n        101: 0.524,\r\n        102: 0.313,\r\n        103: 0.590,\r\n        104: 0.567,\r\n        105: 0.243,\r\n        106: 0.243,\r\n        107: 0.498,\r\n        108: 0.243,\r\n        109: 0.862,\r\n        110: 0.567,\r\n        111: 0.587,\r\n        112: 0.588,\r\n        113: 0.590,\r\n        114: 0.348,\r\n        115: 0.425,\r\n        116: 0.340,\r\n        117: 0.567,\r\n        118: 0.479,\r\n        119: 0.723,\r\n        120: 0.459,\r\n        121: 0.484,\r\n        122: 0.453,\r\n        123: 0.303,\r\n        124: 0.240,\r\n        125: 0.303,\r\n        126: 0.684,\r\n    };\r\n    \r\n    BI.constant(\"bi.constant.char.widths\", WIDTHS);\r\n})();\r\n","/**\r\n * DynamicGridView\r\n *\r\n * Created by GUY on 2020/6/24.\r\n * @class GridView\r\n * @extends BI.Widget\r\n */\r\n!(function () {\r\n    var GridView = BI.inherit(BI.Widget, {\r\n        props: function () {\r\n            return {\r\n                baseCls: \"bi-dynamic-collection-view\",\r\n                overscanHeight: 100,\r\n                blockSize: 10,\r\n                scrollTop: 0,\r\n                scrollLeft: 0,\r\n                columnSize: [],\r\n                isNeedFreeze: false,\r\n                freezeCols: [],\r\n                isNeedMerge: false,\r\n                mergeCols: [],\r\n                mergeRule: BI.emptyFn,\r\n                stopScrollEvent: false,\r\n                items: [],\r\n                el: {},\r\n                trRenderer: null\r\n            };\r\n        },\r\n\r\n        created: function () {\r\n            var self = this;\r\n            this.renderedIndex = -1;\r\n            this.cache = {};\r\n            this.trCache = {};\r\n            this._debounceRelease = BI.debounce(function () {\r\n                self._scrollLock = false;\r\n            }, 1000 / 60);\r\n        },\r\n\r\n        render: function () {\r\n            var self = this, o = this.options;\r\n            return BI.extend(o.el, {\r\n                type: \"bi.vertical\",\r\n                scrolly: false,\r\n                scrollable: true,\r\n                items: [{\r\n                    type: \"bi.default\",\r\n                    tagName: o.trRenderer ? \"div\" : \"table\",\r\n                    css: {\r\n                        marginLeft: o.isNeedFreeze ? -1 * BI.sum(o.columnSize.slice(0, o.freezeCols.length)) : 0\r\n                    },\r\n                    ref: function () {\r\n                        self.table = this;\r\n                    },\r\n                    items: (o.trRenderer ? [] : [{\r\n                        type: \"bi.default\",\r\n                        tagName: \"colgroup\",\r\n                        ref: function () {\r\n                            self.colGroup = this;\r\n                        }\r\n                    }]).concat([{\r\n                        type: \"bi.layout\",\r\n                        ref: function () {\r\n                            self.topBlank = this;\r\n                        }\r\n                    }, {\r\n                        type: \"bi.default\",\r\n                        tagName: o.trRenderer ? \"div\" : \"tbody\",\r\n                        ref: function () {\r\n                            self.container = this;\r\n                        }\r\n                    }, {\r\n                        type: \"bi.layout\",\r\n                        ref: function () {\r\n                            self.bottomBlank = this;\r\n                        }\r\n                    }])\r\n                }]\r\n            });\r\n        },\r\n\r\n        mounted: function () {\r\n            var self = this, o = this.options;\r\n            if (o.items.length > 0) {\r\n                this._populate();\r\n            }\r\n            this.element.scroll(function (e) {\r\n                if (self._scrollLock === true) {\r\n                    return;\r\n                }\r\n                o.scrollLeft = self.element.scrollLeft();\r\n                o.scrollTop = self.element.scrollTop();\r\n                !o.stopScrollEvent && self._calculateBlocksToRender();\r\n                self.fireEvent(GridView.EVENT_SCROLL, {\r\n                    scrollLeft: o.scrollLeft,\r\n                    scrollTop: o.scrollTop\r\n                });\r\n            });\r\n            BI.ResizeDetector.addResizeListener(this, function () {\r\n                try {\r\n                    self._calculateBlocksToRender();\r\n                } catch (e) {\r\n\r\n                }\r\n            });\r\n        },\r\n\r\n        _renderMoreIf: function () {\r\n            var self = this, o = this.options;\r\n            var height = this.element.height();\r\n            var minContentHeight = o.scrollTop + height + o.overscanHeight;\r\n            var index = (this.cache[this.renderedIndex] && (this.cache[this.renderedIndex].index + this.cache[this.renderedIndex].size )) || 0,\r\n                cnt = this.renderedIndex + 1;\r\n            var lastHeight;\r\n            var getElementHeight = function () {\r\n                return self.container.element.height() + self.topBlank.element.height() + self.bottomBlank.element.height();\r\n            };\r\n            while ((lastHeight = getElementHeight()) < minContentHeight && index < o.items.length) {\r\n                // 找到最大扩展行，考虑到行合并的情况\r\n                var queue = [];\r\n                for (var i = index; i < index + o.blockSize && i < o.items.length; i++) {\r\n                    queue.push(i);\r\n                }\r\n                var spanSizeTo = index + o.blockSize;\r\n                while (queue.length > 0) {\r\n                    var row = queue[0];\r\n                    for (var j = 0; j < o.columnSize.length; j++) {\r\n                        var mergeRows = self.itemsMap[row][j].__mergeRows;\r\n                        var rowspan = mergeRows ? mergeRows.length : 1;\r\n                        var spanTo = row + (rowspan | 0);\r\n                        for (var i = row; i < spanTo; i++) {\r\n                            if (queue.indexOf(i) < 0) {\r\n                                queue.push(i);\r\n                                spanSizeTo = spanTo;\r\n                            }\r\n                        }\r\n                    }\r\n                    queue.shift();\r\n                }\r\n\r\n                var items = o.items.slice(index, spanSizeTo);\r\n                this._addItems(items, index);\r\n                var addedHeight = getElementHeight() - lastHeight;\r\n                this.cache[cnt] = {\r\n                    index: index,\r\n                    height: addedHeight,\r\n                    size: spanSizeTo - index\r\n                };\r\n                this.tree.set(cnt, addedHeight);\r\n                this.renderedIndex = cnt;\r\n                cnt++;\r\n                index += spanSizeTo - index;\r\n            }\r\n        },\r\n\r\n        _addItem: function (rows, index) {\r\n            var self = this, o = this.options;\r\n            if (o.trRenderer) {\r\n                return BI.createWidget(o.trRenderer(rows, index, this.itemsMap[index]), {\r\n                    root: true\r\n                });\r\n            }\r\n\r\n            var tr = BI.createWidget({\r\n                type: \"bi.adaptive\",\r\n                root: true,\r\n                tagName: \"tr\",\r\n                height: o.rowSizeGetter ? o.rowSizeGetter(index) : null,\r\n                items: BI.map(rows, function (j, item) {\r\n                    if (BI.isNotEmptyObject(self.itemsMap[index][j])) {\r\n                        var rowspan = self.itemsMap[index][j].__mergeRows.length;\r\n                        var colspan = self.itemsMap[index][j].__mergeCols.length;\r\n                        return {\r\n                            type: \"bi.default\",\r\n                            tagName: \"td\",\r\n                            attributes: {\r\n                                rowspan: rowspan > 1 ? rowspan : undefined,\r\n                                colspan: colspan > 1 ? colspan : undefined\r\n                            },\r\n                            cls: \"bi-collection-table-cell\",\r\n                            items: [BI.extend({\r\n                                type: \"bi.label\"\r\n                            }, item)]\r\n                        };\r\n                    }\r\n                })\r\n            });\r\n            return tr;\r\n        },\r\n\r\n        _serialize: function (items, columnSize, mergeCols, mergeRows) {\r\n            mergeCols = mergeCols || [];\r\n            mergeRows = mergeRows || [];\r\n            var self = this, o = this.options;\r\n            var result = [], cache = {}, preCol = {}, preRow = {}, map = {};\r\n            var summaryColumnSize = [];\r\n            for (var i = 0; i < columnSize.length; i++) {\r\n                if (i === 0) {\r\n                    summaryColumnSize[i] = columnSize[i];\r\n                } else {\r\n                    summaryColumnSize[i] = summaryColumnSize[i - 1] + columnSize[i];\r\n                }\r\n            }\r\n            var mergeRow = function (i, j) {\r\n                preCol[j].__mergeRows.push(i);\r\n            };\r\n\r\n            var mergeCol = function (i, j) {\r\n                preRow[i]._width += columnSize[j];\r\n                preRow[i].__mergeCols.push(j);\r\n            };\r\n\r\n            var createOneEl = function (r, c) {\r\n                var width = columnSize[c];\r\n                map[r][c]._row = r;\r\n                map[r][c]._col = c;\r\n                map[r][c]._width = width;\r\n                preCol[c] = map[r][c];\r\n                preCol[c].__mergeRows = [r];\r\n                preRow[r] = map[r][c];\r\n                preRow[r].__mergeCols = [c];\r\n            };\r\n\r\n            BI.each(items, function (i, cols) {\r\n                for (var j = 0; j < cols.length; j++) {\r\n                    if (!cache[i]) {\r\n                        cache[i] = {};\r\n                    }\r\n                    if (!map[i]) {\r\n                        map[i] = {};\r\n                    }\r\n                    cache[i][j] = cols[j];\r\n                    map[i][j] = {};\r\n                    if (mergeCols === true || mergeCols.indexOf(j) > -1 || mergeRows === true || mergeRows.indexOf(i) > -1) {\r\n                        if (i === 0 && j === 0) {\r\n                            createOneEl(0, 0);\r\n                        } else if (j === 0 && i > 0) {\r\n                            var isNeedMergeRow = o.mergeRule(cache[i][j], cache[i - 1][j]);\r\n                            if (isNeedMergeRow === true) {\r\n                                mergeRow(i, j);\r\n                                preRow[i] = preCol[j];\r\n                            } else {\r\n                                createOneEl(i, j);\r\n                            }\r\n                        } else if (i === 0 && j > 0) {\r\n                            var isNeedMergeCol = o.mergeRule(cache[i][j], cache[i][j - 1]);\r\n                            if (isNeedMergeCol === true) {\r\n                                mergeCol(i, j);\r\n                                preCol[j] = preRow[i];\r\n                            } else {\r\n                                createOneEl(i, j);\r\n                            }\r\n                        } else {\r\n                            var isNeedMergeRow = o.mergeRule(cache[i][j], cache[i - 1][j]);\r\n                            var isNeedMergeCol = o.mergeRule(cache[i][j], cache[i][j - 1]);\r\n                            if (isNeedMergeCol && isNeedMergeRow) {\r\n                                continue;\r\n                                // mergeRow(i, j);//优先合并列\r\n                            }\r\n                            if (isNeedMergeCol) {\r\n                                mergeCol(i, j);\r\n                            }\r\n                            if (isNeedMergeRow) {\r\n                                mergeRow(i, j);\r\n                            }\r\n                            if (!isNeedMergeCol && !isNeedMergeRow) {\r\n                                createOneEl(i, j);\r\n                            }\r\n                        }\r\n                    } else {\r\n                        createOneEl(i, j);\r\n                    }\r\n                }\r\n            });\r\n            return map;\r\n        },\r\n\r\n        _addItems: function (items, startIndex) {\r\n            var self = this;\r\n            var fragment = BI.Widget._renderEngine.createFragment();\r\n            BI.each(items, function (i, rows) {\r\n                var tr = self._addItem(rows, startIndex + i);\r\n                self.trCache[startIndex + i] = tr;\r\n                fragment.appendChild(tr.element[0]);\r\n            });\r\n            this.container.element.append(fragment);\r\n        },\r\n\r\n        _calculateBlocksToRender: function () {\r\n            if (!this.tree || this.options.items.length === 0) {\r\n                return;\r\n            }\r\n            var self = this, o = this.options;\r\n            this._renderMoreIf();\r\n            var height = this.element.height();\r\n            var minContentHeightFrom = o.scrollTop - o.overscanHeight;\r\n            var minContentHeightTo = o.scrollTop + height + o.overscanHeight;\r\n            var start = this.tree.greatestLowerBound(minContentHeightFrom);\r\n            var end = this.tree.leastUpperBound(minContentHeightTo);\r\n            var needDestroyed = [];\r\n            for (var i = 0; i < start; i++) {\r\n                if (this.cache[i]) {\r\n                    var index = this.cache[i].index;\r\n                    if (!this.cache[i].destroyed) {\r\n                        for (var j = index; j < index + this.cache[i].size && j < o.items.length; j++) {\r\n                            needDestroyed.push(this.trCache[j]);\r\n                            delete this.trCache[j];\r\n                        }\r\n                        this.cache[i].destroyed = true;\r\n                    }\r\n                }\r\n            }\r\n            for (var i = end + 1; i <= this.renderedIndex; i++) {\r\n                if (this.cache[i]) {\r\n                    var index = this.cache[i].index;\r\n                    if (!this.cache[i].destroyed) {\r\n                        for (var j = index; j < index + this.cache[i].size && j < o.items.length; j++) {\r\n                            needDestroyed.push(this.trCache[j]);\r\n                            delete this.trCache[j];\r\n                        }\r\n                        this.cache[i].destroyed = true;\r\n                    }\r\n                }\r\n            }\r\n            var firstFragment = BI.Widget._renderEngine.createFragment(),\r\n                lastFragment = BI.Widget._renderEngine.createFragment();\r\n            var currentFragment = firstFragment;\r\n            for (var i = (start < 0 ? 0 : start); i <= end && i <= this.renderedIndex; i++) {\r\n                var index = this.cache[i].index;\r\n                if (!this.cache[i].destroyed) {\r\n                    currentFragment = lastFragment;\r\n                }\r\n                if (this.cache[i].destroyed === true) {\r\n                    for (var j = index; j < index + this.cache[i].size && j < o.items.length; j++) {\r\n                        var tr = self._addItem(o.items[j], j);\r\n                        this.trCache[j] = tr;\r\n                        currentFragment.appendChild(tr.element[0]);\r\n                    }\r\n                    this.cache[i].destroyed = false;\r\n                }\r\n            }\r\n            this.container.element.prepend(firstFragment);\r\n            this.container.element.append(lastFragment);\r\n            this.topBlank.setHeight(this.tree.sumTo(Math.max(-1, start - 1)));\r\n            this.bottomBlank.setHeight(this.tree.sumTo(this.renderedIndex) - this.tree.sumTo(Math.min(end, this.renderedIndex)));\r\n            BI.each(needDestroyed, function (i, child) {\r\n                child && child._destroy();\r\n            });\r\n            // 更新高度\r\n            for (var i = (start < 0 ? 0 : start); i <= end && i <= this.renderedIndex; i++) {\r\n                var index = this.cache[i].index;\r\n                var h = 0;\r\n                for (var j = index; j < index + this.cache[i].size && j < o.items.length; j++) {\r\n                    if (o.rowSizeGetter) {\r\n                        var t = o.rowSizeGetter(j);\r\n                        this.trCache[j].element.height(t);\r\n                        h += t;\r\n                    } else {\r\n                        h += this.trCache[j].element.height();\r\n                    }\r\n                }\r\n                if (this.cache[i].height !== h) {\r\n                    this.cache[i].height = h;\r\n                    this.tree.set(i, h);\r\n                }\r\n            }\r\n        },\r\n\r\n        _populate: function (items) {\r\n            var self = this, o = this.options;\r\n            if (items && this.options.items !== items) {\r\n                this.options.items = items;\r\n                this.itemsMap = this._serialize(o.items, o.columnSize, o.mergeCols);\r\n            }\r\n            if (!this.tree) {\r\n                this.tree = BI.PrefixIntervalTree.empty(Math.ceil(o.items.length / o.blockSize));\r\n            }\r\n            this.table.setWidth(BI.sum(o.columnSize));\r\n            this.table.element.css({marginLeft: o.isNeedFreeze ? -1 * BI.sum(o.columnSize.slice(0, o.freezeCols.length)) : 0});\r\n            if (this.colGroup) {\r\n                BI.each(o.columnSize, function (i, size) {\r\n                    if (self.colGroup.element.children().eq(i).length === 0) {\r\n                        self.colGroup.addItem({\r\n                            type: \"bi.layout\",\r\n                            tagName: \"col\",\r\n                            width: size\r\n                        });\r\n                    } else {\r\n                        self.colGroup.element.children().eq(i).css(\"width\", size);\r\n                    }\r\n                });\r\n            }\r\n            this._calculateBlocksToRender();\r\n            // try {\r\n            //     this.element.scrollTop(o.scrollTop);\r\n            // } catch (e) {\r\n            // }\r\n        },\r\n\r\n        _clearChildren: function () {\r\n            this.colGroup.empty();\r\n            this.container.empty();\r\n        },\r\n\r\n        setColumnSize: function (columnSize) {\r\n            this.options.columnSize = columnSize;\r\n        },\r\n\r\n        setRegionColumnSize: function (regionColumnSize) {\r\n            this.options.regionColumnSize = regionColumnSize;\r\n        },\r\n\r\n        getMaxScrollTop: function () {\r\n            return this.container.element.height() + this.topBlank.element.height() + this.bottomBlank.element.height() - this.element.height();\r\n        },\r\n\r\n        getScrollTop: function () {\r\n            return this.options.scrollTop;\r\n        },\r\n\r\n        getScrollLeft: function () {\r\n            return this.options.scrollLeft;\r\n        },\r\n\r\n        setScrollLeft: function (scrollLeft) {\r\n            if (this.options.scrollLeft === scrollLeft) {\r\n                return;\r\n            }\r\n            this._scrollLock = true;\r\n            this.options.scrollLeft = scrollLeft;\r\n            this._debounceRelease();\r\n            // this._calculateChildrenToRender();\r\n            this.element.scrollLeft(this.options.scrollLeft);\r\n        },\r\n\r\n        setScrollTop: function (scrollTop) {\r\n            if (this.options.scrollTop === scrollTop) {\r\n                return;\r\n            }\r\n            this._scrollLock = true;\r\n            this.options.scrollTop = scrollTop;\r\n            this._debounceRelease();\r\n            this._calculateBlocksToRender();\r\n            this.element.scrollTop(this.options.scrollTop);\r\n            this.fireEvent(\"EVENT_SYNC\", scrollTop);\r\n        },\r\n\r\n        restore: function () {\r\n            this.renderedIndex = -1;\r\n            this._clearChildren();\r\n            this.cache = {};\r\n            this.tree = null;\r\n            this.trCache = {};\r\n            this.options.scrollTop = 0;\r\n            // 依赖于cache的占位元素也要初始化\r\n            this.topBlank.setHeight(0);\r\n            this.bottomBlank.setHeight(0);\r\n        },\r\n\r\n        populate: function (items) {\r\n            var o = this.options;\r\n            if (items && this.options.items !== items) {\r\n                this.restore();\r\n            }\r\n            this._populate(items);\r\n        },\r\n\r\n        destroyed: function () {\r\n            this.restore();\r\n        }\r\n    });\r\n    GridView.EVENT_SCROLL = \"EVENT_SCROLL\";\r\n    BI.shortcut(\"bi.dynamic_collection_view\", GridView);\r\n}());\r\n","/**\r\n *\r\n * 原生表格滚动条，为了IE8的兼容\r\n *\r\n * Created by GUY on 2016/1/12.\r\n * @class BI.NativeTableScrollbar\r\n * @extends BI.Widget\r\n */\r\nBI.NativeTableScrollbar = BI.inherit(BI.Widget, {\r\n    _defaultConfig: function () {\r\n        return BI.extend(BI.NativeTableScrollbar.superclass._defaultConfig.apply(this, arguments), {\r\n            attributes: {\r\n                tabIndex: 0\r\n            },\r\n            contentSize: 0,\r\n            defaultPosition: 0,\r\n            position: 0,\r\n            size: 0\r\n        });\r\n    },\r\n\r\n    render: function () {\r\n        var self = this, o = this.options;\r\n        // 把滚动条size改掉\r\n        this.element.width(36);\r\n\r\n        var throttle = BI.throttle(function () {\r\n            self.fireEvent(BI.NativeTableScrollbar.EVENT_SCROLL, self.element.scrollTop());\r\n        }, 150, {leading: false});\r\n        this.element.scroll(function () {\r\n            throttle();\r\n        });\r\n        return {\r\n            type: \"bi.default\",\r\n            scrolly: true,\r\n            items: [{\r\n                type: \"bi.layout\",\r\n                width: 1,\r\n                ref: function (_ref) {\r\n                    self.inner = _ref;\r\n                }\r\n            }]\r\n        };\r\n    },\r\n\r\n    mounted: function () {\r\n        this._populate();\r\n    },\r\n\r\n    _populate: function () {\r\n        var self = this, o = this.options;\r\n        if (o.size < 1 || o.contentSize <= o.size) {\r\n            this.setVisible(false);\r\n            return;\r\n        }\r\n        this.setVisible(true);\r\n        try {\r\n            this.element.scrollTop(o.position);\r\n        } catch (e) {\r\n\r\n        }\r\n        this.inner.element.height(o.contentSize);\r\n    },\r\n\r\n    setContentSize: function (contentSize) {\r\n        this.options.contentSize = contentSize;\r\n    },\r\n\r\n    setPosition: function (position) {\r\n        this.options.position = position;\r\n    },\r\n\r\n    setSize: function (size) {\r\n        this.setHeight(size);\r\n        this.options.size = size;\r\n    },\r\n\r\n    populate: function () {\r\n        this._populate();\r\n    }\r\n});\r\nBI.NativeTableScrollbar.EVENT_SCROLL = \"EVENT_SCROLL\";\r\nBI.shortcut(\"bi.native_table_scrollbar\", BI.NativeTableScrollbar);\r\n\r\n\r\nBI.NativeTableHorizontalScrollbar = BI.inherit(BI.Widget, {\r\n    _defaultConfig: function () {\r\n        return BI.extend(BI.NativeTableHorizontalScrollbar.superclass._defaultConfig.apply(this, arguments), {\r\n            attributes: {\r\n                tabIndex: 0\r\n            },\r\n            contentSize: 0,\r\n            position: 0,\r\n            size: 0\r\n        });\r\n    },\r\n\r\n    render: function () {\r\n        var self = this, o = this.options;\r\n        // 把滚动台size改掉\r\n        this.element.height(36);\r\n\r\n        var throttle = BI.throttle(function () {\r\n            self.fireEvent(BI.NativeTableScrollbar.EVENT_SCROLL, self.element.scrollLeft());\r\n        }, 150, {leading: false});\r\n        this.element.scroll(function () {\r\n            throttle();\r\n        });\r\n        return {\r\n            type: \"bi.default\",\r\n            scrollx: true,\r\n            items: [{\r\n                type: \"bi.layout\",\r\n                height: 1,\r\n                ref: function (_ref) {\r\n                    self.inner = _ref;\r\n                }\r\n            }]\r\n        };\r\n    },\r\n\r\n    setContentSize: function (contentSize) {\r\n        this.options.contentSize = contentSize;\r\n    },\r\n\r\n    setPosition: function (position) {\r\n        this.options.position = position;\r\n    },\r\n\r\n    setSize: function (size) {\r\n        this.setWidth(size);\r\n        this.options.size = size;\r\n    },\r\n\r\n    _populate: function () {\r\n        var self = this, o = this.options;\r\n        if (o.size < 1 || o.contentSize <= o.size) {\r\n            this.setVisible(false);\r\n            return;\r\n        }\r\n        this.setVisible(true);\r\n        try {\r\n            this.element.scrollLeft(o.position);\r\n        } catch (e) {\r\n\r\n        }\r\n        this.inner.element.width(o.contentSize);\r\n    },\r\n\r\n    populate: function () {\r\n        this._populate();\r\n    }\r\n});\r\nBI.NativeTableHorizontalScrollbar.EVENT_SCROLL = \"EVENT_SCROLL\";\r\nBI.shortcut(\"bi.native_table_horizontal_scrollbar\", BI.NativeTableHorizontalScrollbar);\r\n","!(function () {\r\n    var constants = {\r\n        INSERT_HELPER_WIDTH: 12,\r\n        INSERT_HELPER_OFFSET: 6,\r\n        DRAG_START_DISTANCE: 20,\r\n        DRAG_HELPER_WIDTH: 200,\r\n        DRAG_HELPER_HEIGHT: 300,\r\n        TRANSITION_DURATION: 300,\r\n    };\r\n    \r\n    BI.SortableTable = BI.inherit(BI.Widget, {\r\n\r\n        props: {\r\n            baseCls: \"bi-sortable-table\",\r\n            el: {\r\n                type: \"bi.grid_table\",\r\n            },\r\n            sortable: true,\r\n        },\r\n\r\n        render: function () {\r\n            var self = this, o = this.options;\r\n\r\n            this.header = {};\r\n            this.cell = {};\r\n            this.quickSelectHelper = new BI.SortableTable.QuickSelectHelper();\r\n            this.styleHelper = new BI.SortableTable.StyleHelper(this.header, this.cell, BI.bind(this._getCell, this), this.quickSelectHelper);\r\n\r\n            return [BI.extend({\r\n                type: \"bi.grid_table\",\r\n                width: o.width,\r\n                height: o.height,\r\n                headerRowSize: o.headerRowSize,\r\n                rowSize: o.rowSize,\r\n                columnSize: o.columnSize,\r\n\r\n                header: this._formatHeader(o.header),\r\n                items: this._formatCell(o.items),\r\n                listeners: [{\r\n                    eventName: BI.Table.EVENT_TABLE_SCROLL,\r\n                    action: function () {\r\n                        self.fireEvent(BI.Table.EVENT_TABLE_SCROLL, arguments);\r\n                    },\r\n                }, {\r\n                    eventName: BI.Table.EVENT_TABLE_AFTER_REGION_RESIZE,\r\n                    action: function () {\r\n                        self.fireEvent(BI.Table.EVENT_TABLE_AFTER_REGION_RESIZE, arguments);\r\n                    },\r\n                }, {\r\n                    eventName: BI.Table.EVENT_TABLE_AFTER_COLUMN_RESIZE,\r\n                    action: function () {\r\n                        self.fireEvent(BI.Table.EVENT_TABLE_AFTER_COLUMN_RESIZE, arguments);\r\n                    },\r\n                }],\r\n            }, o.el, {\r\n                ref: function (_ref) {\r\n                    self.table = _ref;\r\n                    o.el.ref && o.el.ref.call(this, _ref);\r\n                },\r\n                mounted: function () {\r\n                    self.autoScrollHelper = new BI.SortableTable.AutoScrollHelper(self.table, BI.bind(self._onAutoScroll, self));\r\n                },\r\n            })];\r\n        },\r\n\r\n        _getColumnsLeftPosition: function () {\r\n            var position = [];\r\n            var columnSizes = this.table.getColumnSize();\r\n            BI.each(columnSizes, function (idx) {\r\n                if (idx === 0) {\r\n                    position.push(0);\r\n                } else {\r\n                    position.push(position[idx - 1] + columnSizes[idx - 1]);\r\n                }\r\n            });\r\n\r\n            return position;\r\n        },\r\n\r\n        _exchangeItemsAndHeaderPosition: function (sourceIndexes, targetIndex) {\r\n            var o = this.options;\r\n            if (sourceIndexes.length === 1 && sourceIndexes[0] === targetIndex) {\r\n                return false;\r\n            }\r\n            var header = BI.unzip(o.header);\r\n            var items = BI.unzip(o.items);\r\n            var columnSize = this.getColumnSize();\r\n            var deleteIndexes = BI.map(sourceIndexes, function (idx, sourceIndex) {\r\n                return (sourceIndex < targetIndex) ? sourceIndex : (sourceIndex + sourceIndexes.length);\r\n            });\r\n            o.header = BI.unzip(this._dealExchangeConfig(header, sourceIndexes, targetIndex, deleteIndexes));\r\n            o.items = BI.unzip(this._dealExchangeConfig(items, sourceIndexes, targetIndex, deleteIndexes));\r\n            o.columnSize = this._dealExchangeConfig(columnSize, sourceIndexes, targetIndex, deleteIndexes);\r\n\r\n            return true;\r\n        },\r\n\r\n        _dealExchangeConfig: function (targets, sourceIndexes, targetIndex, deleteIndexes) {\r\n            var sourceTargets = BI.filter(targets, function (idx) {\r\n                return BI.contains(sourceIndexes, idx);\r\n            });\r\n            sourceTargets.unshift(targetIndex, 0);\r\n            [].splice.apply(targets, sourceTargets);\r\n            BI.removeAt(targets, deleteIndexes);\r\n\r\n            return targets;\r\n        },\r\n\r\n        _getCell: function (cell) {\r\n            if (this.options.customCell) {\r\n                return cell.element;\r\n            }\r\n            var parent = cell.element.parent();\r\n            while (parent) {\r\n                if (parent.hasClass('bi-grid-table-cell')) {\r\n                    break;\r\n                }\r\n                parent = parent.parent();\r\n            }\r\n\r\n            return parent;\r\n        },\r\n\r\n        _formatHeader: function () {\r\n            var self = this, o = this.options;\r\n\r\n            return BI.map(o.header, function (i, row) {\r\n                return BI.map(row, function (j, col) {\r\n                    return BI.extend({}, col, {\r\n                        ref: function (ref) {\r\n                            self.header[j] = self.header[j] || {};\r\n                            self.header[j][i] = ref;\r\n                            col.ref && col.ref.call(this, ref);\r\n                            var hasSelected = false;\r\n                            ref.element.on(\"mousedown\", function (e) {\r\n                                self.disableSelectText(true);\r\n                                if (!BI.contains(self.quickSelectHelper.getSelectedColumns(), j)) {\r\n                                    self._clickSelectColumn(j, e);\r\n                                    self.fireEvent(\"EVENT_TABLE_SELECT_COLUMN\", j);\r\n                                } else {\r\n                                    hasSelected = true;\r\n                                }\r\n                                self._prepareDrag(e, ref, j);\r\n                            });\r\n                            ref.element.on(\"click\", function (e) {\r\n                                if (hasSelected) {\r\n                                    hasSelected = false;\r\n                                    self._clickSelectColumn(j, e);\r\n                                    self.fireEvent(\"EVENT_TABLE_SELECT_COLUMN\", j);\r\n                                }\r\n                            });\r\n                        },\r\n                        mounted: function () {\r\n                            if (!self.startDrag) {\r\n                                if (BI.contains(self.quickSelectHelper.getSelectedColumns(), j)) {\r\n                                    self.styleHelper.selectCell(true, self.header[j][i], {\r\n                                        column: j,\r\n                                        row: i,\r\n                                        header: true,\r\n                                    });\r\n                                    self._initDrag(j, self.header[j][i], true);\r\n                                }\r\n                                if (BI.contains(self.quickSelectHelper.getSelectedColumns(), j + 1)) {\r\n                                    var preEle = self._getCell(self.header[j][i]);\r\n                                    preEle.addClass('column-select-helper');\r\n                                }\r\n                            }\r\n                            if (self.columnIndex === j) {\r\n                                self.styleHelper.setInVisibility(self.header[j][i]);\r\n                            }\r\n                        },\r\n                        destroyed: function () {\r\n                            self.header[j] && delete self.header[j][i];\r\n                            if (BI.size(self.header[j]) === 0) {\r\n                                delete self.header[j];\r\n                            }\r\n                        },\r\n                    });\r\n                });\r\n            });\r\n        },\r\n\r\n        _clickSelectColumn: function (col, e) {\r\n            var self = this;\r\n            this.quickSelectHelper.selectColumns(col, e);\r\n            BI.each(this.header, function (j, col) {\r\n                BI.each(col, function(i, h) {\r\n                    var selected;\r\n                    if (BI.contains(self.quickSelectHelper.getSelectedColumns(), BI.parseInt(j))) {\r\n                        selected = self.styleHelper.selectColumn(true, j);\r\n                    } else {\r\n                        selected = self.styleHelper.selectColumn(false, j);\r\n                    }\r\n                    self._initDrag(j, h, selected);\r\n                });\r\n            });\r\n        },\r\n\r\n        _formatCell: function () {\r\n            var self = this, o = this.options;\r\n\r\n            return BI.map(o.items, function (i, row) {\r\n                return BI.map(row, function (j, cell) {\r\n                    return BI.extend({}, cell, {\r\n                        ref: function (ref) {\r\n                            self.cell[j] = self.cell[j] || {};\r\n                            self.cell[j][i] = ref;\r\n                            cell.ref && cell.ref.call(this, ref);\r\n                        },\r\n                        mounted: function () {\r\n                            if (!self.startDrag) {\r\n                                BI.contains(self.quickSelectHelper.getSelectedColumns(), j) && self.styleHelper.selectCell(true, self.cell[j][i], {\r\n                                    column: j,\r\n                                    row: i,\r\n                                    lastRowCell: i === o.items.length - 1,\r\n                                });\r\n                                if (BI.contains(self.quickSelectHelper.getSelectedColumns(), j + 1)) {\r\n                                    var preEle = self._getCell(self.cell[j][i]);\r\n                                    preEle.addClass('column-select-helper');\r\n                                }\r\n                            }\r\n                            if (self.columnIndex === j) {\r\n                                self.styleHelper.setInVisibility(self.cell[j][i]);\r\n                            }\r\n                        },\r\n                        destroyed: function () {\r\n                            self.cell[j] && delete self.cell[j][i];\r\n                            if (BI.size(self.cell[j]) === 0) {\r\n                                delete self.cell[j];\r\n                            }\r\n                        },\r\n                    }, {\r\n                        lastRowCell: i === o.items.length - 1,\r\n                    });\r\n                });\r\n            });\r\n        },\r\n\r\n        _drop: function (indexes) {\r\n            var o = this.options;\r\n            var insertIndex = this.columnIndex > this.newColumnIndex ? this.newColumnIndex : this.newColumnIndex + 1;\r\n            // 调整item顺序，重新populate\r\n            var flag = this._exchangeItemsAndHeaderPosition(indexes, insertIndex);\r\n            if (flag === true) {\r\n                this.setColumnSize(o.columnSize);\r\n                var selectedCols = this.getSelectedColumns();\r\n                this.populate(o.items, o.header);\r\n                var splitIndex = BI.findIndex(selectedCols, function (idx, col) {\r\n                    return col >= insertIndex;\r\n                });\r\n                var firstSelectCol = insertIndex - (selectedCols[0] < insertIndex ? (splitIndex < 0 ? selectedCols.length : splitIndex) : 0);\r\n                this.selectColumns(BI.map(selectedCols, function (idx) {\r\n                    return BI.clamp(firstSelectCol + idx, 0, o.columnSize.length);\r\n                }));\r\n                this.fireEvent(\"EVENT_TABLE_SORT\", indexes, insertIndex);\r\n            }\r\n        },\r\n\r\n        _shouldStartDrag: function (curPosX, startPosX) {\r\n            return Math.abs(curPosX - startPosX) > constants.DRAG_START_DISTANCE;\r\n        },\r\n\r\n        /**\r\n         * firefox: 拖拽的时候会触发文本的选中进而影响mousetracker mouseup的触发\r\n         * @param disable\r\n         */\r\n        disableSelectText: function (disable) {\r\n            BI.each(this.header, function (j, col) {\r\n                BI.each(col, function(i, h) {\r\n                    h.element[disable ? 'addClass' : 'removeClass']('bi-user-select-disable');\r\n                });\r\n            });\r\n        },\r\n\r\n        _prepareDrag: function (event, node, columnIndex) {\r\n            this.tracker.captureMouseMoves(BI.extend({}, event, {\r\n                preventDefault: BI.emptyFn,\r\n            }));\r\n            this.start = false;\r\n            this.startDrag = false;\r\n            this.startX = this.oStartX = event.pageX;\r\n            this.startY = event.pageY;\r\n            this.boundingClientRect = node.element[0].getBoundingClientRect();\r\n            this.columnIndex = this.newColumnIndex = columnIndex;\r\n            this.positions = this._getColumnsLeftPosition();\r\n            this.offsetX = this.positions[columnIndex];\r\n            this.height = node.element[0].offsetHeight;\r\n            this.width = node.element[0].offsetWidth;\r\n            this.widths = this.table.getColumnSize();\r\n            this.tableWidth = this.table.getWidth();\r\n            this.tableHeight = this.table.getHeight();\r\n            var containerBoundingRect = this.element[0].getBoundingClientRect();\r\n            this.minTranslateX = containerBoundingRect.left - this.boundingClientRect.left - this.width / 2;\r\n            this.maxTranslateX = containerBoundingRect.left + containerBoundingRect.width - this.boundingClientRect.left - this.width / 2;\r\n            this.initialScrollX = this.table.getActualRightHorizontalScroll();\r\n        },\r\n\r\n        _initDrag: function (idx, header, selected) {\r\n            if (!this.options.sortable) {\r\n                return;\r\n            }\r\n            var self = this;\r\n            if (BI.isNull(this.tracker)) {\r\n                this.tracker = new BI.MouseMoveTracker(\r\n                    function (deltaX, deltaY) {\r\n                        self.startX += deltaX;\r\n                        self.startY += deltaY;\r\n                        if (self.tracker.isDragging() && (self.startDrag || self._shouldStartDrag(self.startX, self.oStartX))) {\r\n                            self.startDrag = true;\r\n                            self._updateHelperPosition();\r\n                            self._animateColumns();\r\n                            self._autoScroll();\r\n                        }\r\n                    },\r\n                    function() {\r\n                        self.dragHelper && self.dragHelper.setVisible(false);\r\n                        self.tracker.releaseMouseMoves();\r\n                        self.startDrag && self._drop(BI.sortBy(self.quickSelectHelper.getSelectedColumns()));\r\n                        self._stopDrag();\r\n                    },\r\n                    window\r\n                );\r\n            }\r\n            if (!selected) {\r\n                header.element.off('mouseup');\r\n            } else {\r\n                header.element.off('mouseup').on('mouseup', function (event) {\r\n                    if (Math.abs(self.startX - event.pageX) < 5 && Math.abs(self.startY - event.pageY) < 5) {\r\n                        self._stopDrag();\r\n                    }\r\n                });\r\n            }\r\n        },\r\n\r\n        _updateHelperPosition: function () {\r\n            if (BI.isNull(this.dragHelper)) {\r\n                this.dragHelper = BI.createWidget({\r\n                    type: \"bi.layout\",\r\n                    cls: \"sortable_table_drag_helper cursor-drag-hand\",\r\n                    zIndex: BI.zIndex_layer,\r\n                });\r\n                BI.createWidget({\r\n                    type: \"bi.absolute\",\r\n                    element: 'body',\r\n                    items: [{\r\n                        el: this.dragHelper,\r\n                        left: this.boundingClientRect.left,\r\n                        top: this.boundingClientRect.top,\r\n                    }],\r\n                });\r\n                this.translateX = this.startX - this.oStartX;\r\n                this.styleHelper.setColumnInVisibility(this.columnIndex);\r\n                this.styleHelper.setColumnDisabled(this._getOtherSelectedColumns(this.columnIndex));\r\n            } else {\r\n                this.translateX = this.startX - this.oStartX;\r\n                this.styleHelper.setTranslateX(this.dragHelper.element, this.translateX);\r\n                this.dragHelper.setWidth(this.widths[this.columnIndex]);\r\n                this.dragHelper.setHeight(this.tableHeight);\r\n                this.dragHelper.setVisible(true);\r\n            }\r\n        },\r\n\r\n        _animateColumns: function () {\r\n            var self = this;\r\n            var sortingOffset = {\r\n                left: this.offsetX + this.translateX + this.table.getActualRightHorizontalScroll() - this.initialScrollX,\r\n                top: 0,\r\n            };\r\n            this.newColumnIndex = null;\r\n            BI.some(this.header, function (colKey, col) {\r\n                if (colKey === self.columnIndex) {\r\n                    return false;\r\n                }\r\n                var translate = {\r\n                    x: 0,\r\n                    y: 0,\r\n                };\r\n                BI.some(col, function (rowKey, header) {\r\n                    var width = header.element[0].offsetWidth;\r\n                    var height = header.element[0].offsetHeight;\r\n                    const offset = {\r\n                        height: self.height > height ? height / 2 : self.height / 2,\r\n                        width: self.width > width ? width / 2 : self.width / 2,\r\n                    };\r\n                    self.styleHelper.setTransitionDuration(colKey, constants.TRANSITION_DURATION);\r\n                    if ((colKey > self.columnIndex) && sortingOffset.left + offset.width >= self.positions[colKey]\r\n                    ) {\r\n                        translate.x = -self.width;\r\n                        self.newColumnIndex = parseInt(colKey);\r\n                    } else if ((colKey < self.columnIndex) && sortingOffset.left <= self.positions[colKey] + offset.width) {\r\n                        translate.x = self.width;\r\n                        if (self.newColumnIndex === null) {\r\n                            self.newColumnIndex = parseInt(colKey);\r\n                        }\r\n                    }\r\n                    self.styleHelper.setColumnTranslateX(colKey, translate.x);\r\n                });\r\n            });\r\n            if (this.newColumnIndex === null) {\r\n                this.newColumnIndex = this.columnIndex;\r\n            }\r\n        },\r\n\r\n        _autoScroll: function () {\r\n            this.autoScrollHelper.update({\r\n                translateX: this.translateX,\r\n                minTranslateX: this.minTranslateX,\r\n                maxTranslateX: this.maxTranslateX,\r\n                width: this.width,\r\n            });\r\n        },\r\n\r\n        _onAutoScroll: function (offsetX) {\r\n            this.translateX += offsetX;\r\n            this._animateColumns();\r\n        },\r\n\r\n        _getOtherSelectedColumns: function (columnIndex) {\r\n            var columns = BI.clone(this.quickSelectHelper.getSelectedColumns());\r\n            var index = columns.indexOf(columnIndex);\r\n            columns.splice(index, 1);\r\n\r\n            return columns;\r\n        },\r\n\r\n        _stopDrag: function () {\r\n            var self = this;\r\n            this.startDrag = false;\r\n            this.styleHelper.setColumnInVisibility(this.columnIndex, false);\r\n            this.styleHelper.setColumnDisabled(this._getOtherSelectedColumns(this.columnIndex), false);\r\n            this.autoScrollHelper.clear();\r\n            this.columnIndex = -1;\r\n            this.tracker && this.tracker.releaseMouseMoves();\r\n            BI.each(this.header, function (colKey) {\r\n                self.styleHelper.setColumnTranslateX(colKey);\r\n                self.styleHelper.setTransitionDuration(colKey, null);\r\n            });\r\n            this.dragHelper && this.dragHelper.destroy();\r\n            this.dragHelper = null;\r\n            this.disableSelectText(false);\r\n        },\r\n\r\n        selectColumns: function (cols) {\r\n            var self = this;\r\n            cols = BI.isArray(cols) ? cols : [cols];\r\n            this.quickSelectHelper.clearColumns();\r\n            BI.each(this.header, function (j) {\r\n                self.styleHelper.selectColumn(false, j);\r\n            });\r\n            BI.each(cols, function (idx, col) {\r\n                self._clickSelectColumn(col, {\r\n                    ctrlKey: true,\r\n                });\r\n            });\r\n        },\r\n\r\n        getSelectedColumns: function () {\r\n            return this.quickSelectHelper.getSelectedColumns();\r\n        },\r\n\r\n        setWidth: function (width) {\r\n            BI.SortableTable.superclass.setWidth.apply(this, arguments);\r\n            this.table.setWidth(width);\r\n        },\r\n\r\n        setHeight: function (height) {\r\n            BI.SortableTable.superclass.setHeight.apply(this, arguments);\r\n            this.table.setHeight(height);\r\n        },\r\n\r\n        setVerticalScroll: function (scrollTop) {\r\n            this.table.setVerticalScroll(scrollTop);\r\n        },\r\n\r\n        setLeftHorizontalScroll: function (scrollLeft) {\r\n            this.table.setLeftHorizontalScroll(scrollLeft);\r\n        },\r\n\r\n        setRightHorizontalScroll: function (scrollLeft) {\r\n            this.table.setRightHorizontalScroll(scrollLeft);\r\n        },\r\n\r\n        setColumnSize: function (columnSize) {\r\n            this.table.setColumnSize(columnSize);\r\n        },\r\n\r\n        getColumnSize: function () {\r\n            return this.table.getColumnSize();\r\n        },\r\n\r\n        getFirstColumnHeaderRowSize: function () {\r\n            return this.table.getFirstColumnHeaderRowSize();\r\n        },\r\n\r\n        getFirstColumnRowSize: function () {\r\n            return this.table.getFirstColumnRowSize();\r\n        },\r\n\r\n        setRegionColumnSize: function (columnSize) {\r\n            this.options.regionColumnSize = columnSize;\r\n            this.table.setRegionColumnSize(columnSize);\r\n        },\r\n\r\n        getRegionColumnSize: function () {\r\n            return this.table.getRegionColumnSize();\r\n        },\r\n\r\n        getVerticalScroll: function () {\r\n            return this.table.getVerticalScroll();\r\n        },\r\n\r\n        getLeftHorizontalScroll: function () {\r\n            return this.table.getLeftHorizontalScroll();\r\n        },\r\n\r\n        getRightHorizontalScroll: function () {\r\n            return this.table.getRightHorizontalScroll();\r\n        },\r\n\r\n        setSortable: function (sortable) {\r\n            this.options.sortable = sortable;\r\n        },\r\n\r\n        attr: function () {\r\n            BI.SortableTable.superclass.attr.apply(this, arguments);\r\n\r\n            return this.table.attr.apply(this.table, arguments);\r\n        },\r\n\r\n        restore: function () {\r\n            this.table.restore();\r\n        },\r\n\r\n        populate: function (items, headers) {\r\n            var o = this.options;\r\n            this.header = {};\r\n            this.cell = {};\r\n            this.styleHelper.update(this.header, this.cell);\r\n            this.quickSelectHelper.clearColumns();\r\n            this._stopDrag();\r\n            o.header = headers || o.header;\r\n            o.items = items || o.items;\r\n            this.table.populate(this._formatCell(o.items), this._formatHeader(o.header));\r\n        },\r\n    });\r\n    BI.shortcut(\"bi.sortable_table\", BI.SortableTable);\r\n}());\r\n","!(function () {\r\n\r\n    var MOUSE_EVENT_KEY = {\r\n        CLICK: 0,\r\n        CONTROL_CLICK: 1,\r\n        SHIFT_CLICK: 2,\r\n    };\r\n\r\n    function QuickSelectHelper() {\r\n        this.selectedColumns = [];\r\n        this.lastSelectedColumn = null;\r\n    }\r\n\r\n    QuickSelectHelper.prototype.selectColumns = function (v, e) {\r\n        var self = this;\r\n        switch (this.getMouseHotKey(e)) {\r\n            case MOUSE_EVENT_KEY.CLICK:\r\n                this.selectedColumns = [v];\r\n                this.lastSelectedColumn = v;\r\n                break;\r\n            case MOUSE_EVENT_KEY.CONTROL_CLICK:\r\n                var cancelSelect = BI.some(this.selectedColumns, function (i, target) {\r\n                    if (target === v) {\r\n                        self.selectedColumns.splice(i, 1);\r\n\r\n                        return true;\r\n                    }\r\n                });\r\n                if (!cancelSelect) {\r\n                    this.selectedColumns.push(v);\r\n                }\r\n                break;\r\n            case MOUSE_EVENT_KEY.SHIFT_CLICK:\r\n                var startIndex = self.lastSelectedColumn;\r\n                var endIndex = v;\r\n                var sliceStartIndex = BI.min([startIndex, endIndex]);\r\n                var sliceEndIndex = BI.max([startIndex, endIndex]) + 1;\r\n                this.selectedColumns = BI.uniq(BI.concat(this.selectedColumns, BI.range(sliceStartIndex, sliceEndIndex)));\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    };\r\n\r\n    QuickSelectHelper.prototype.getMouseHotKey = function (event) {\r\n        if (event.ctrlKey || event.metaKey) {\r\n            // ctrl/command逐个单选\r\n            return MOUSE_EVENT_KEY.CONTROL_CLICK;\r\n        }\r\n        if (event.shiftKey) {\r\n            // shift多选\r\n            return MOUSE_EVENT_KEY.SHIFT_CLICK;\r\n        }\r\n\r\n        // 单选\r\n        return MOUSE_EVENT_KEY.CLICK;\r\n    };\r\n\r\n    QuickSelectHelper.prototype.getSelectedColumns = function () {\r\n        return this.selectedColumns;\r\n    };\r\n\r\n    QuickSelectHelper.prototype.MOUSE_EVENT_KEY = {\r\n        CLICK: 0,\r\n        CONTROL_CLICK: 1,\r\n        SHIFT_CLICK: 2,\r\n    };\r\n\r\n    QuickSelectHelper.prototype.clearColumns = function () {\r\n        this.selectedColumns = [];\r\n        this.lastSelectedColumn = null;\r\n    };\r\n\r\n    BI.SortableTable.QuickSelectHelper = QuickSelectHelper;\r\n}());\r\n","!(function () {\r\n    function AutoScrollHelper(container, onScrollCallback) {\r\n        this.container = container;\r\n        this.onScrollCallback = onScrollCallback;\r\n    }\r\n\r\n    AutoScrollHelper.prototype.update = function (config) {\r\n        var offsetX = 0, autoScroll = false;\r\n        var translateX = config.translateX, minTranslateX = config.minTranslateX, maxTranslateX = config.maxTranslateX, width = config.width;\r\n        if (translateX <= minTranslateX + width / 2) {\r\n            offsetX = -10 * Math.abs((translateX - width / 2 - minTranslateX) / width);\r\n            autoScroll = true;\r\n        } else if (translateX >= maxTranslateX - width / 2) {\r\n            offsetX = 10 * Math.abs((maxTranslateX - width / 2 - translateX) / width);\r\n            autoScroll = true;\r\n        }\r\n        this.clear();\r\n\r\n        if (autoScroll) {\r\n            this.interval = setInterval(() => {\r\n                var initialScrollLeft = this.container.getActualRightHorizontalScroll();\r\n                this.container.setRightHorizontalScroll(initialScrollLeft + offsetX);\r\n                this.onScrollCallback(offsetX);\r\n                if (this.container.getActualRightHorizontalScroll() === initialScrollLeft) {\r\n                    this.clear();\r\n                }\r\n            }, 5);\r\n        }\r\n    };\r\n\r\n    AutoScrollHelper.prototype.clear = function () {\r\n        if (this.interval === null) {\r\n            return;\r\n        }\r\n        clearInterval(this.interval);\r\n        this.interval = null;\r\n    };\r\n\r\n    BI.SortableTable.AutoScrollHelper = AutoScrollHelper;\r\n}());\r\n","!(function () {\r\n    function StyleHelper(headers, cells, cellWrapperGetter, quickSelectHelper) {\r\n        this.cellWrapperGetter = cellWrapperGetter;\r\n        this.headers = headers;\r\n        this.cells = cells;\r\n        this.quickSelectHelper = quickSelectHelper;\r\n    }\r\n\r\n    StyleHelper.prototype.setTranslateX = function (widget, translateX) {\r\n        widget[0].style.transform = BI.isNull(translateX) ? '' : `translateX(${translateX}px)`;\r\n    };\r\n\r\n    StyleHelper.prototype.setInVisibility = function (widget, invisible = true) {\r\n        var widgetWrapper = this.cellWrapperGetter(widget);\r\n        widgetWrapper[0].style.opacity = invisible ? 0 : '';\r\n        widgetWrapper[0].style.visibility = invisible ? 'hidden' : '';\r\n    };\r\n\r\n    StyleHelper.prototype.setDraggingStyle = function (widget, disabled = true, cls) {\r\n        var widgetWrapper = this.cellWrapperGetter(widget);\r\n        widgetWrapper[disabled ? 'addClass' : 'removeClass'](cls || 'dragging-state');\r\n    };\r\n\r\n    StyleHelper.prototype.setColumnDisabled = function(columnIndexes, disabled = true) {\r\n        var self = this;\r\n        BI.each(columnIndexes, function (idx, columnIndex) {\r\n            BI.each(self.cells[columnIndex], function (i, cell) {\r\n                self.setDraggingStyle(cell, disabled);\r\n                if (columnIndex > 0 && self.cells[columnIndex - 1]) {\r\n                    self.setDraggingStyle(self.cells[columnIndex - 1][i], disabled, \"dragging-pre-column-state\");\r\n                }\r\n            });\r\n            BI.each(self.headers[columnIndex], function(i, header) {\r\n                self.setDraggingStyle(header, disabled, \"dragging-state dragging-header\");\r\n                if (columnIndex > 0 && self.headers[columnIndex - 1]) {\r\n                    self.setDraggingStyle(self.headers[columnIndex - 1][i], disabled, \"dragging-pre-column-state\");\r\n                }\r\n            });\r\n            self.selectColumn(disabled ? false : BI.contains(self.quickSelectHelper.getSelectedColumns(), columnIndex), columnIndex);\r\n        });\r\n    };\r\n\r\n    StyleHelper.prototype.setColumnInVisibility = function(columnIndex, invisible = true) {\r\n        var self = this;\r\n        BI.each(this.cells[columnIndex], function (i, cell) {\r\n            self.setInVisibility(cell, invisible);\r\n        });\r\n        BI.each(this.headers[columnIndex], function(i, header) {\r\n            self.setInVisibility(header, invisible);\r\n        });\r\n        this.selectColumn(invisible ? false : BI.contains(this.quickSelectHelper.getSelectedColumns(), columnIndex), columnIndex);\r\n    };\r\n\r\n    StyleHelper.prototype.setTransitionDuration = function (columnIndex, duration) {\r\n        var self = this;\r\n        BI.each(this.cells[columnIndex], function (i, cell) {\r\n            var cellWrapper = self.cellWrapperGetter(cell);\r\n            cellWrapper[0].style.transitionDuration = BI.isNull(duration) ? '' : `${duration}ms`;\r\n        });\r\n        BI.each(this.headers[columnIndex], function(i, header) {\r\n            var headerWrapper = self.cellWrapperGetter(header);\r\n            headerWrapper[0].style.transitionDuration = BI.isNull(duration) ? '' : `${duration}ms`;\r\n        });\r\n    };\r\n\r\n    StyleHelper.prototype.setColumnTranslateX = function (columnIndex, translateX) {\r\n        var self = this;\r\n        BI.each(this.cells[columnIndex], function (i, cell) {\r\n            self.setTranslateX(self.cellWrapperGetter(cell), translateX);\r\n        });\r\n        BI.each(this.headers[columnIndex], function(i, header) {\r\n            self.setTranslateX(self.cellWrapperGetter(header), translateX);\r\n        });\r\n    };\r\n\r\n    StyleHelper.prototype.selectColumn = function (selected, cIdx) {\r\n        var self = this;\r\n        BI.each(this.headers[cIdx], function (row, header) {\r\n            self.selectCell(selected, header, {\r\n                column: cIdx,\r\n                row: row,\r\n                header: true,\r\n                cursor: 'cursor-hand',\r\n            });\r\n        });\r\n        BI.each(this.cells[cIdx], function (row, cell) {\r\n            self.selectCell(selected, cell, {\r\n                column: cIdx,\r\n                row: row,\r\n                header: false,\r\n                lastRowCell: cell.attr('lastRowCell'),\r\n            });\r\n        });\r\n\r\n        return selected;\r\n    };\r\n\r\n    StyleHelper.prototype.selectCell = function (selected, cell, opt) {\r\n        var column = opt.column;\r\n        var row = opt.row;\r\n        var header = opt.header || false;\r\n        var cursor = opt.cursor || \"\";\r\n        var lastRowCell = opt.lastRowCell || false;\r\n        var element = this.cellWrapperGetter(cell);\r\n        element[selected ? \"addClass\" : \"removeClass\"](cursor + ' column-select' + (lastRowCell ? ' last-row-cell' : '') + (header ? (BI.isEmpty(this.cells) ? \" empty-cell header\" : \" header\") : \"\"));\r\n        if (column > 0) {\r\n            var target = header ? this.headers : this.cells;\r\n            if (target[column - 1]) {\r\n                var preEle = this.cellWrapperGetter(target[column - 1][row]);\r\n                preEle[selected ? \"addClass\" : \"removeClass\"]('column-select-helper');\r\n            }\r\n        }\r\n    };\r\n\r\n    StyleHelper.prototype.update = function (headers, cells) {\r\n        this.headers = headers;\r\n        this.cells = cells;\r\n    };\r\n\r\n    BI.SortableTable.StyleHelper = StyleHelper;\r\n}());\r\n","/**\r\n *\r\n * 表格\r\n *\r\n * Created by GUY on 2015/9/22.\r\n * @class BI.TableCell\r\n * @extends BI.Single\r\n */\r\nBI.TableCell = BI.inherit(BI.Widget, {\r\n    _defaultConfig: function () {\r\n        return BI.extend(BI.TableCell.superclass._defaultConfig.apply(this, arguments), {\r\n            baseCls: \"bi-table-cell\",\r\n            textAlign: \"left\",\r\n            text: \"\"\r\n        });\r\n    },\r\n\r\n    _init: function () {\r\n        BI.TableCell.superclass._init.apply(this, arguments);\r\n        var o = this.options;\r\n        BI.createWidget({\r\n            type: \"bi.label\",\r\n            element: this,\r\n            whiteSpace: o.whiteSpace || \"nowrap\",\r\n            textAlign: this.options.textAlign,\r\n            height: this.options.height,\r\n            text: this.options.text,\r\n            value: this.options.value,\r\n            lgap: o.lgap,\r\n            rgap: o.rgap,\r\n            hgap: o.hgap || 5\r\n        });\r\n    }\r\n});\r\n\r\nBI.shortcut(\"bi.table_cell\", BI.TableCell);","/**\r\n *\r\n * 表格单元格\r\n *\r\n * Created by GUY on 2016/1/12.\r\n * @class BI.CollectionTableCell\r\n * @extends BI.Widget\r\n */\r\nBI.CollectionTableCell = BI.inherit(BI.Widget, {\r\n    _defaultConfig: function () {\r\n        return BI.extend(BI.CollectionTableCell.superclass._defaultConfig.apply(this, arguments), {\r\n            baseCls: \"bi-collection-table-cell bi-border-right bi-border-bottom\",\r\n            width: 0,\r\n            height: 0,\r\n            _left: 0,\r\n            _top: 0,\r\n            firstRowTopLine: true,\r\n            firstColumnLeftLine: true,\r\n            cell: {}\r\n        });\r\n    },\r\n\r\n    _init: function () {\r\n        BI.CollectionTableCell.superclass._init.apply(this, arguments);\r\n        var o = this.options;\r\n        this.cell = BI.createWidget(BI.extend({\r\n            type: \"bi.label\"\r\n        }, o.cell, {\r\n            cls: (o.cell.cls || \"\") + \" collection-table-cell-wrapper\",\r\n            width: o.width - ((o.firstColumnLeftLine && o._left === 0) ? 1 : 0) - 1,\r\n            height: o.height - ((o.firstRowTopLine && o._top === 0) ? 1 : 0) - 1\r\n        }));\r\n        BI.createWidget({\r\n            type: \"bi.absolute\",\r\n            cls: (o.firstRowTopLine ? \"bi-collection-table-cell-top-line\" : \"\") + (o.firstColumnLeftLine ? \" bi-collection-table-cell-left-line\" : \"\"),\r\n            element: this,\r\n            items: [{\r\n                el: this.cell,\r\n                left: 0,\r\n                right: 0,\r\n                top: 0,\r\n                bottom: 0\r\n            }]\r\n        });\r\n    },\r\n\r\n    setWidth: function (width) {\r\n        BI.CollectionTableCell.superclass.setWidth.apply(this, arguments);\r\n        var o = this.options;\r\n        this.cell.setWidth(o.width - ((o.firstColumnLeftLine && o._left === 0) ? 1 : 0) - 1);\r\n    },\r\n\r\n    setHeight: function (height) {\r\n        BI.CollectionTableCell.superclass.setHeight.apply(this, arguments);\r\n        var o = this.options;\r\n        this.cell.setHeight(o.height - ((o.firstRowTopLine && o._top === 0) ? 1 : 0) - 1);\r\n    }\r\n});\r\n\r\nBI.shortcut(\"bi.collection_table_cell\", BI.CollectionTableCell);\r\n","/**\r\n * CollectionTable\r\n *\r\n * Created by GUY on 2016/1/12.\r\n * @class BI.CollectionTable\r\n * @extends BI.Widget\r\n */\r\nBI.CollectionTable = BI.inherit(BI.Widget, {\r\n    _defaultConfig: function () {\r\n        return BI.extend(BI.CollectionTable.superclass._defaultConfig.apply(this, arguments), {\r\n            baseCls: \"bi-collection-table\",\r\n            headerRowSize: 25,\r\n            rowSize: 25,\r\n            columnSize: [],\r\n            isNeedFreeze: false,\r\n            freezeCols: [],\r\n            isNeedMerge: false,\r\n            mergeCols: [],\r\n            mergeRule: BI.emptyFn,\r\n            header: [],\r\n            items: [],\r\n            regionColumnSize: [],\r\n            customCell: false // 自定义单元格处理\r\n        });\r\n    },\r\n\r\n    render: function () {\r\n        var self = this, o = this.options;\r\n        this._width = 0;\r\n        this._height = 0;\r\n        this.topLeftCollection = BI.createWidget({\r\n            type: \"bi.collection_view\",\r\n            overflowX: !BI.isFireFox(),\r\n            overflowY: !BI.isFireFox(),\r\n            cellSizeAndPositionGetter: function (index) {\r\n                return self.topLeftItems[index];\r\n            }\r\n        });\r\n        this.topLeftCollection.on(BI.CollectionView.EVENT_SCROLL, function (scroll) {\r\n            self.bottomLeftCollection.setScrollLeft(scroll.scrollLeft);\r\n            self._populateScrollbar();\r\n            self.fireEvent(BI.Table.EVENT_TABLE_SCROLL, arguments);\r\n        });\r\n        this.topRightCollection = BI.createWidget({\r\n            type: \"bi.collection_view\",\r\n            overflowX: !BI.isFireFox(),\r\n            overflowY: !BI.isFireFox(),\r\n            cellSizeAndPositionGetter: function (index) {\r\n                return self.topRightItems[index];\r\n            }\r\n        });\r\n        this.topRightCollection.on(BI.CollectionView.EVENT_SCROLL, function (scroll) {\r\n            self.bottomRightCollection.setScrollLeft(scroll.scrollLeft);\r\n            self._populateScrollbar();\r\n            self.fireEvent(BI.Table.EVENT_TABLE_SCROLL, arguments);\r\n        });\r\n        this.bottomLeftCollection = BI.createWidget({\r\n            type: \"bi.collection_view\",\r\n            overflowX: !BI.isFireFox(),\r\n            overflowY: !BI.isFireFox(),\r\n            cellSizeAndPositionGetter: function (index) {\r\n                return self.bottomLeftItems[index];\r\n            }\r\n        });\r\n        this.bottomLeftCollection.on(BI.CollectionView.EVENT_SCROLL, function (scroll) {\r\n            self.bottomRightCollection.setScrollTop(scroll.scrollTop);\r\n            self.topLeftCollection.setScrollLeft(scroll.scrollLeft);\r\n            self._populateScrollbar();\r\n            self.fireEvent(BI.Table.EVENT_TABLE_SCROLL, arguments);\r\n        });\r\n        this.bottomRightCollection = BI.createWidget({\r\n            type: \"bi.collection_view\",\r\n            overflowX: !BI.isFireFox(),\r\n            overflowY: !BI.isFireFox(),\r\n            cellSizeAndPositionGetter: function (index) {\r\n                return self.bottomRightItems[index];\r\n            }\r\n        });\r\n        this.bottomRightCollection.on(BI.CollectionView.EVENT_SCROLL, function (scroll) {\r\n            self.bottomLeftCollection.setScrollTop(scroll.scrollTop);\r\n            self.topRightCollection.setScrollLeft(scroll.scrollLeft);\r\n            self._populateScrollbar();\r\n            self.fireEvent(BI.Table.EVENT_TABLE_SCROLL, arguments);\r\n        });\r\n        this.topLeft = BI.createWidget({\r\n            type: \"bi.vertical\",\r\n            scrollable: false,\r\n            scrolly: false,\r\n            items: [this.topLeftCollection]\r\n        });\r\n        this.topRight = BI.createWidget({\r\n            type: \"bi.vertical\",\r\n            scrollable: false,\r\n            scrolly: false,\r\n            items: [this.topRightCollection]\r\n        });\r\n        this.bottomLeft = BI.createWidget({\r\n            type: \"bi.vertical\",\r\n            scrollable: false,\r\n            scrolly: false,\r\n            items: [this.bottomLeftCollection]\r\n        });\r\n        this.bottomRight = BI.createWidget({\r\n            type: \"bi.vertical\",\r\n            scrollable: false,\r\n            scrolly: false,\r\n            items: [this.bottomRightCollection]\r\n        });\r\n        this.shadow = BI.createWidget({\r\n            type: \"bi.layout\",\r\n            cls: \"collection-table-shadow\"\r\n        });\r\n        this.contextLayout = BI.createWidget({\r\n            type: \"bi.absolute\",\r\n            element: this,\r\n            items: [{\r\n                el: this.topLeft,\r\n                top: 0,\r\n                left: 0\r\n            }, {\r\n                el: this.topRight,\r\n                top: 0\r\n            }, {\r\n                el: this.bottomLeft,\r\n                left: 0\r\n            }, {\r\n                el: this.bottomRight\r\n            }, {\r\n                el: this.shadow,\r\n                top: 0,\r\n                bottom: 0\r\n            }]\r\n        });\r\n\r\n        this.topScrollbar = BI.createWidget({\r\n            type: \"bi.grid_table_scrollbar\",\r\n            width: BI.GridTableScrollbar.SIZE\r\n        });\r\n        this.topScrollbar.on(BI.GridTableScrollbar.EVENT_SCROLL, function (scrollTop) {\r\n            self.bottomLeftCollection.setScrollTop(scrollTop);\r\n            self.bottomRightCollection.setScrollTop(scrollTop);\r\n            self._populateScrollbar();\r\n            self.fireEvent(BI.Table.EVENT_TABLE_SCROLL, arguments);\r\n        });\r\n        this.leftScrollbar = BI.createWidget({\r\n            type: \"bi.grid_table_horizontal_scrollbar\",\r\n            height: BI.GridTableScrollbar.SIZE\r\n        });\r\n        this.leftScrollbar.on(BI.GridTableScrollbar.EVENT_SCROLL, function (scrollLeft) {\r\n            self.topLeftCollection.setScrollLeft(scrollLeft);\r\n            self.bottomLeftCollection.setScrollLeft(scrollLeft);\r\n            self._populateScrollbar();\r\n            self.fireEvent(BI.Table.EVENT_TABLE_SCROLL, arguments);\r\n        });\r\n        this.rightScrollbar = BI.createWidget({\r\n            type: \"bi.grid_table_horizontal_scrollbar\",\r\n            height: BI.GridTableScrollbar.SIZE\r\n        });\r\n        this.rightScrollbar.on(BI.GridTableScrollbar.EVENT_SCROLL, function (scrollLeft) {\r\n            self.topRightCollection.setScrollLeft(scrollLeft);\r\n            self.bottomRightCollection.setScrollLeft(scrollLeft);\r\n            self._populateScrollbar();\r\n            self.fireEvent(BI.Table.EVENT_TABLE_SCROLL, arguments);\r\n        });\r\n        this.scrollBarLayout = BI.createWidget({\r\n            type: \"bi.absolute\",\r\n            element: this,\r\n            items: [{\r\n                el: this.topScrollbar,\r\n                right: 0,\r\n                top: 0\r\n            }, {\r\n                el: this.leftScrollbar,\r\n                left: 0\r\n            }, {\r\n                el: this.rightScrollbar\r\n            }]\r\n        });\r\n\r\n        if (!(BI.isChrome() && BI.isWindows() && !BI.isEdge())) {\r\n            BI.createWidget({\r\n                type: \"bi.absolute\",\r\n                element: this,\r\n                items: [{\r\n                    el: {\r\n                        type: \"bi.default\",\r\n                        cls: \"bi-table-fix-scroll\"\r\n                    },\r\n                    top: 0,\r\n                    right: 0,\r\n                    bottom: 0,\r\n                    left: 0\r\n                }]\r\n            });\r\n        }\r\n\r\n        this._width = o.width - BI.GridTableScrollbar.SIZE;\r\n        this._height = o.height - BI.GridTableScrollbar.SIZE;\r\n        if (o.header.length > 0 || o.items.length > 0) {\r\n            this._digest();\r\n            this._populate();\r\n        }\r\n    },\r\n\r\n    _getFreezeColLength: function () {\r\n        var o = this.options;\r\n        return o.isNeedFreeze === true ? BI.clamp(o.freezeCols.length, 0, o.columnSize.length) : 0;\r\n    },\r\n\r\n    _getFreezeHeaderHeight: function () {\r\n        var o = this.options;\r\n        if (o.header.length * o.headerRowSize >= this._height) {\r\n            return 0;\r\n        }\r\n        return o.header.length * o.headerRowSize;\r\n    },\r\n\r\n    _getActualItems: function () {\r\n        var o = this.options;\r\n        if (o.header.length * o.headerRowSize >= this._height) {\r\n            return o.header.concat(o.items);\r\n        }\r\n        return o.items;\r\n    },\r\n\r\n    _getContentHeight: function () {\r\n        var o = this.options;\r\n        if (this._getFreezeHeaderHeight() <= 0) {\r\n            return o.header.length * o.headerRowSize + o.items.length * o.rowSize;\r\n        }\r\n        return this._getActualItems().length * this.options.rowSize;\r\n    },\r\n\r\n    _populateScrollbar: function () {\r\n        var o = this.options;\r\n        var regionSize = this.getRegionSize(), totalLeftColumnSize = 0, totalRightColumnSize = 0, totalColumnSize = 0,\r\n            summaryColumnSizeArray = [];\r\n        BI.each(o.columnSize, function (i, size) {\r\n            if (o.isNeedFreeze === true && o.freezeCols.includes(i)) {\r\n                totalLeftColumnSize += size;\r\n            } else {\r\n                totalRightColumnSize += size;\r\n            }\r\n            totalColumnSize += size;\r\n            if (i === 0) {\r\n                summaryColumnSizeArray[i] = size;\r\n            } else {\r\n                summaryColumnSizeArray[i] = summaryColumnSizeArray[i - 1] + size;\r\n            }\r\n        });\r\n        this.topScrollbar.setContentSize(this._getContentHeight());\r\n        var freezeHeaderHeight = this._getFreezeHeaderHeight();\r\n        var topScrollbarSize = this._height - freezeHeaderHeight;\r\n        this.topScrollbar.setSize(topScrollbarSize);\r\n        var scrollTop = this.bottomRightCollection.getScrollTop();\r\n        this.topScrollbar.setPosition(scrollTop);\r\n        this.topScrollbar.populate();\r\n\r\n        this.leftScrollbar.setContentSize(totalLeftColumnSize);\r\n        this.leftScrollbar.setSize(regionSize);\r\n        var leftScrollLeft = this.bottomLeftCollection.getScrollLeft();\r\n        this.leftScrollbar.setPosition(leftScrollLeft);\r\n        this.leftScrollbar.populate();\r\n\r\n        this.rightScrollbar.setContentSize(totalRightColumnSize);\r\n        this.rightScrollbar.setSize(this._width - regionSize);\r\n        var rightScrollLeft = this.bottomRightCollection.getScrollLeft();\r\n        this.rightScrollbar.setPosition(rightScrollLeft);\r\n        this.rightScrollbar.populate();\r\n\r\n        var items = this.scrollBarLayout.attr(\"items\");\r\n        items[0].top = this._getFreezeHeaderHeight();\r\n        items[1].top = this._height;\r\n        items[2].top = this._height;\r\n        items[2].left = regionSize;\r\n        this.scrollBarLayout.attr(\"items\", items);\r\n        this.scrollBarLayout.resize();\r\n\r\n        var shadowVisible = false;\r\n        if (totalLeftColumnSize > 0 && totalRightColumnSize > 0) {\r\n            shadowVisible = totalLeftColumnSize > regionSize && leftScrollLeft < totalLeftColumnSize - regionSize || rightScrollLeft > 0;\r\n            if (shadowVisible) {\r\n                var firstColumnSize = this.getFirstColumnRowSize();\r\n                var contentHeight = BI.sum(firstColumnSize);\r\n                this.shadow.setHeight(Math.min(this._height, freezeHeaderHeight + contentHeight));\r\n            }\r\n        }\r\n\r\n        this.shadow.setVisible(shadowVisible);\r\n    },\r\n\r\n    _populateTable: function () {\r\n        var self = this, o = this.options;\r\n        var regionSize = this.getRegionSize(), totalLeftColumnSize = 0, totalRightColumnSize = 0, totalColumnSize = 0,\r\n            summaryColumnSizeArray = [];\r\n        BI.each(o.columnSize, function (i, size) {\r\n            if (o.isNeedFreeze === true && o.freezeCols.includes(i)) {\r\n                totalLeftColumnSize += size;\r\n            } else {\r\n                totalRightColumnSize += size;\r\n            }\r\n            totalColumnSize += size;\r\n            if (i === 0) {\r\n                summaryColumnSizeArray[i] = size;\r\n            } else {\r\n                summaryColumnSizeArray[i] = summaryColumnSizeArray[i - 1] + size;\r\n            }\r\n        });\r\n\r\n        var otlw = regionSize;\r\n        var otlh = this._getFreezeHeaderHeight();\r\n        var otrw = this._width - regionSize;\r\n        var otrh = this._getFreezeHeaderHeight();\r\n        var oblw = regionSize;\r\n        var oblh = this._height - otlh;\r\n        var obrw = this._width - regionSize;\r\n        var obrh = this._height - otrh;\r\n\r\n        var scrollBarSize = BI.isFireFox() ? 0 : BI.DOM.getScrollWidth();\r\n        var tlw = otlw + scrollBarSize;\r\n        var tlh = otlh + scrollBarSize;\r\n        var trw = otrw + scrollBarSize;\r\n        var trh = otrh + scrollBarSize;\r\n        var blw = oblw + scrollBarSize;\r\n        var blh = oblh + scrollBarSize;\r\n        var brw = obrw + scrollBarSize;\r\n        var brh = obrh + scrollBarSize;\r\n\r\n        var digest = function (el) {\r\n            el.element.css({\r\n                overflow: \"scroll\",\r\n                overflowX: \"scroll\",\r\n                overflowY: \"scroll\"\r\n            });\r\n        };\r\n\r\n        this.topLeft.setWidth(otlw);\r\n        this.topLeft.setHeight(otlh);\r\n        this.topRight.setWidth(otrw);\r\n        this.topRight.setHeight(otrh);\r\n        this.bottomLeft.setWidth(oblw);\r\n        this.bottomLeft.setHeight(oblh);\r\n        this.bottomRight.setWidth(obrw);\r\n        this.bottomRight.setHeight(obrh);\r\n\r\n        this.topLeftCollection.setWidth(tlw);\r\n        this.topLeftCollection.setHeight(tlh);\r\n        this.topRightCollection.setWidth(trw);\r\n        this.topRightCollection.setHeight(trh);\r\n        this.bottomLeftCollection.setWidth(blw);\r\n        this.bottomLeftCollection.setHeight(blh);\r\n        this.bottomRightCollection.setWidth(brw);\r\n        this.bottomRightCollection.setHeight(brh);\r\n\r\n        digest(this.topLeftCollection);\r\n        digest(this.topRightCollection);\r\n        digest(this.bottomLeftCollection);\r\n        digest(this.bottomRightCollection);\r\n\r\n        var items = this.contextLayout.attr(\"items\");\r\n        items[1].left = regionSize;\r\n        items[2].top = this._getFreezeHeaderHeight();\r\n        items[3].left = regionSize;\r\n        items[3].top = this._getFreezeHeaderHeight();\r\n        items[4].left = regionSize;\r\n        this.contextLayout.attr(\"items\", items);\r\n        this.contextLayout.resize();\r\n\r\n        var leftHeader = [], rightHeader = [], leftItems = [], rightItems = [];\r\n        var run = function (positions, items, rendered, firstRowTopLine, firstColumnLeftLine) {\r\n            BI.each(positions, function (i, item) {\r\n                if (o.customCell) {\r\n                    items[item.row][item.col]._rowIndex = item.row;\r\n                    items[item.row][item.col]._columnIndex = item.col;\r\n                    items[item.row][item.col].firstRowTopLine = firstRowTopLine;\r\n                    items[item.row][item.col].firstColumnLeftLine = firstColumnLeftLine;\r\n                    rendered.push(items[item.row][item.col]);\r\n                    return;\r\n                }\r\n                var cell = {\r\n                    type: \"bi.collection_table_cell\",\r\n                    cell: items[item.row][item.col],\r\n                    _rowIndex: item.row,\r\n                    _columnIndex: item.col,\r\n                    firstRowTopLine: firstRowTopLine,\r\n                    firstColumnLeftLine: firstColumnLeftLine\r\n                };\r\n                rendered.push(cell);\r\n            });\r\n        };\r\n        run(this.topLeftItems, o.header, leftHeader, true, true);\r\n        run(this.topRightItems, o.header, rightHeader, true, this.topLeftItems.length <= 0);\r\n        run(this.bottomLeftItems, this._getActualItems(), leftItems, this.topRightItems.length <= 0, true);\r\n        run(this.bottomRightItems, this._getActualItems(), rightItems, this.topRightItems.length <= 0, this.topLeftItems.length <= 0);\r\n\r\n        this.topLeftCollection._populate(leftHeader);\r\n        this.topRightCollection._populate(rightHeader);\r\n        this.bottomLeftCollection._populate(leftItems);\r\n        this.bottomRightCollection._populate(rightItems);\r\n    },\r\n\r\n    _syncScroll: function () {\r\n        this.setLeftHorizontalScroll(this.getLeftHorizontalScroll());\r\n        this.setRightHorizontalScroll(this.getRightHorizontalScroll());\r\n        this.setVerticalScroll(this.getVerticalScroll());\r\n    },\r\n\r\n    _digest: function () {\r\n        var o = this.options;\r\n        var freezeColLength = this._getFreezeColLength();\r\n        // 如果表头位置不够，取消表头冻结\r\n        if (this._getFreezeHeaderHeight() <= 0) {\r\n            this.topLeftItems = [];\r\n            this.topRightItems = [];\r\n            this.bottomLeftItems = BI.CollectionTable.serialize(this._getActualItems(), 0, freezeColLength, function (row) {\r\n                if (row <= o.header.length - 1) {\r\n                    return o.headerRowSize;\r\n                }\r\n                return o.rowSize;\r\n            }, o.columnSize, o.mergeCols, BI.range(o.header.length), o.mergeRule, function (rows) {\r\n                if (rows <= o.header.length) {\r\n                    return rows * o.headerRowSize;\r\n                }\r\n                return o.header.length * o.headerRowSize + (rows - o.header.length) * o.rowSize;\r\n            });\r\n            this.bottomRightItems = BI.CollectionTable.serialize(this._getActualItems(), freezeColLength, o.columnSize.length, function (row) {\r\n                if (row <= o.header.length - 1) {\r\n                    return o.headerRowSize;\r\n                }\r\n                return o.rowSize;\r\n            }, o.columnSize, o.mergeCols, BI.range(o.header.length), o.mergeRule, function (rows) {\r\n                if (rows <= o.header.length) {\r\n                    return rows * o.headerRowSize;\r\n                }\r\n                return o.header.length * o.headerRowSize + (rows - o.header.length) * o.rowSize;\r\n            });\r\n        } else {\r\n            this.topLeftItems = BI.CollectionTable.serialize(o.header, 0, freezeColLength, o.headerRowSize, o.columnSize, o.mergeCols, [], o.mergeRule);\r\n            this.topRightItems = BI.CollectionTable.serialize(o.header, freezeColLength, o.columnSize.length, o.headerRowSize, o.columnSize, true, [], o.mergeRule);\r\n            this.bottomLeftItems = BI.CollectionTable.serialize(o.items, 0, freezeColLength, o.rowSize, o.columnSize, o.mergeCols, [], o.mergeRule);\r\n            this.bottomRightItems = BI.CollectionTable.serialize(o.items, freezeColLength, o.columnSize.length, o.rowSize, o.columnSize, o.mergeCols, [], o.mergeRule);\r\n        }\r\n    },\r\n\r\n    _populate: function () {\r\n        if (this._width <= 0 || this._height <= 0) {\r\n            return;\r\n        }\r\n        if (this._isNeedDigest === true) {\r\n            this._digest();\r\n        }\r\n        this._isNeedDigest = false;\r\n        this._populateTable();\r\n        this._populateScrollbar();\r\n        this._syncScroll();\r\n    },\r\n\r\n    attr: function (key, value) {\r\n        var v = BI.CollectionTable.superclass.attr.apply(this, arguments);\r\n        if (BI.isNotNull(value)) {\r\n            switch (key) {\r\n                case \"scrollLeft\":\r\n                    this.topRightCollection.attr(key, value);\r\n                    this.bottomRightCollection.attr(key, value);\r\n                    break;\r\n                case \"scrollTop\":\r\n                    this.bottomLeftCollection.attr(key, value);\r\n                    this.bottomRightCollection.attr(key, value);\r\n                    break;\r\n            }\r\n        }\r\n        return v;\r\n    },\r\n\r\n    getRegionSize: function () {\r\n        var o = this.options;\r\n        var regionSize = o.regionColumnSize[0] || 0;\r\n        if (o.isNeedFreeze === false || o.freezeCols.length === 0) {\r\n            return 0;\r\n        }\r\n        if (!regionSize) {\r\n            BI.each(o.freezeCols, function (i, col) {\r\n                regionSize += o.columnSize[col];\r\n            });\r\n        }\r\n        return regionSize;\r\n    },\r\n\r\n    setVerticalScroll: function (scrollTop) {\r\n        this.bottomLeftCollection.setScrollTop(scrollTop);\r\n        this.bottomRightCollection.setScrollTop(scrollTop);\r\n    },\r\n\r\n    setLeftHorizontalScroll: function (scrollLeft) {\r\n        this.topLeftCollection.setScrollLeft(scrollLeft);\r\n        this.bottomLeftCollection.setScrollLeft(scrollLeft);\r\n    },\r\n\r\n    setRightHorizontalScroll: function (scrollLeft) {\r\n        this.topRightCollection.setScrollLeft(scrollLeft);\r\n        this.bottomRightCollection.setScrollLeft(scrollLeft);\r\n    },\r\n\r\n    getVerticalScroll: function () {\r\n        return this.bottomRightCollection.getScrollTop();\r\n    },\r\n\r\n    getLeftHorizontalScroll: function () {\r\n        return this.bottomLeftCollection.getScrollLeft();\r\n    },\r\n\r\n    getRightHorizontalScroll: function () {\r\n        return this.bottomRightCollection.getScrollLeft();\r\n    },\r\n\r\n    setWidth: function (width) {\r\n        BI.CollectionTable.superclass.setWidth.apply(this, arguments);\r\n        this._width = this.options.width - BI.GridTableScrollbar.SIZE;\r\n    },\r\n\r\n    setHeight: function (height) {\r\n        BI.CollectionTable.superclass.setHeight.apply(this, arguments);\r\n        this._height = this.options.height - BI.GridTableScrollbar.SIZE;\r\n    },\r\n\r\n    setColumnSize: function (columnSize) {\r\n        this._isNeedDigest = true;\r\n        this.options.columnSize = columnSize;\r\n    },\r\n\r\n    setRegionColumnSize: function (regionColumnSize) {\r\n        this._isNeedDigest = true;\r\n        this.options.regionColumnSize = regionColumnSize;\r\n    },\r\n\r\n    getColumnSize: function () {\r\n        return this.options.columnSize;\r\n    },\r\n\r\n    getRegionColumnSize: function () {\r\n        return this.options.regionColumnSize;\r\n    },\r\n\r\n    getFirstColumnHeaderRowSize: function () {\r\n        var freezeColLength = this._getFreezeColLength();\r\n        var items = this.topLeftItems;\r\n        if (freezeColLength <= 0) {\r\n            items = this.topRightItems;\r\n        }\r\n        if (this._getFreezeHeaderHeight() <= 0) {\r\n            items = this.bottomLeftItems;\r\n            if (freezeColLength <= 0) {\r\n                items = this.bottomRightItems;\r\n            }\r\n            items = (items || []).slice(0, this.options.header.length);\r\n        }\r\n        var rowHeight = [];\r\n        BI.each(items, function (i, item) {\r\n            if (item.col === 0) {\r\n                rowHeight.push(item.height);\r\n            }\r\n        });\r\n        return rowHeight;\r\n    },\r\n\r\n    getFirstColumnRowSize: function () {\r\n        var freezeColLength = this._getFreezeColLength();\r\n        var items = this.bottomLeftItems;\r\n        if (freezeColLength <= 0) {\r\n            items = this.bottomRightItems;\r\n        }\r\n        if (this._getFreezeHeaderHeight() <= 0) {\r\n            items = (items || []).slice(this.options.header.length);\r\n        }\r\n        var rowHeight = [];\r\n        BI.each(items, function (i, item) {\r\n            if (item.col === 0) {\r\n                rowHeight.push(item.height);\r\n            }\r\n        });\r\n        return rowHeight;\r\n    },\r\n\r\n    getLastColumnRowSize: function () {\r\n        var items = this.bottomRightItems;\r\n\r\n        if (this._getFreezeHeaderHeight() <= 0) {\r\n            items = (items || []).slice(this.options.header.length);\r\n        }\r\n\r\n        var max = BI.max(BI.map(items, 'x'));\r\n        var rowHeight = [];\r\n        BI.each(items, function (i, item) {\r\n            if (item.x === max) {\r\n                rowHeight.push(item.height);\r\n            }\r\n        });\r\n        return rowHeight;\r\n    },\r\n\r\n    populate: function (items, header) {\r\n        if (items && items !== this.options.items) {\r\n            this._isNeedDigest = true;\r\n            this.options.items = items;\r\n            this._restore();\r\n        }\r\n        if (header && header !== this.options.header) {\r\n            this._isNeedDigest = true;\r\n            this.options.header = header;\r\n            this._restore();\r\n        }\r\n        this._populate();\r\n    },\r\n\r\n    _restore: function () {\r\n        this.topLeftCollection.restore();\r\n        this.topRightCollection.restore();\r\n        this.bottomLeftCollection.restore();\r\n        this.bottomRightCollection.restore();\r\n    },\r\n\r\n    restore: function () {\r\n        this._restore();\r\n    }\r\n});\r\nBI.extend(BI.CollectionTable, {\r\n    map: function (items, startCol, endCol, rowHeight, columnSize, mergeCols, mergeRows, mergeRule, rowHeightsGetter) {\r\n        mergeCols = mergeCols || [];\r\n        mergeRows = mergeRows || [];\r\n        var rowHeightGetter = BI.isFunction(rowHeight) ? rowHeight : function () {\r\n            return rowHeight;\r\n        };\r\n        var result = [], cache = {}, preCol = {}, preRow = {}, map = {};\r\n        var summaryColumnSize = [];\r\n        for (var i = startCol; i < endCol; i++) {\r\n            if (i === startCol) {\r\n                summaryColumnSize[i] = columnSize[i];\r\n            } else {\r\n                summaryColumnSize[i] = summaryColumnSize[i - 1] + columnSize[i];\r\n            }\r\n        }\r\n        var mergeRow = function (i, j) {\r\n            preCol[j]._height += rowHeightGetter(i);\r\n            preCol[j].__mergeRows.push(i);\r\n        };\r\n\r\n        var mergeCol = function (i, j) {\r\n            preRow[i]._width += columnSize[j];\r\n            preRow[i].__mergeCols.push(j);\r\n        };\r\n\r\n        var createOneEl = function (r, c) {\r\n            var width = columnSize[c];\r\n            var height = rowHeightGetter(r);\r\n            map[r][c]._row = r;\r\n            map[r][c]._col = c;\r\n            map[r][c]._width = width;\r\n            map[r][c]._height = height;\r\n            preCol[c] = map[r][c];\r\n            preCol[c].__mergeRows = [r];\r\n            preRow[r] = map[r][c];\r\n            preRow[r].__mergeCols = [c];\r\n\r\n            result.push({\r\n                x: summaryColumnSize[c] - columnSize[c],\r\n                y: rowHeightsGetter ? rowHeightsGetter(r) : +r * rowHeight,\r\n                item: map[r][c]\r\n            });\r\n        };\r\n\r\n        BI.each(items, function (i, cols) {\r\n            for (var j = startCol; j < endCol; j++) {\r\n                if (!cache[i]) {\r\n                    cache[i] = {};\r\n                }\r\n                if (!map[i]) {\r\n                    map[i] = {};\r\n                }\r\n                cache[i][j] = cols[j];\r\n                map[i][j] = {};\r\n                if (mergeCols === true || mergeCols.indexOf(j) > -1 || mergeRows === true || mergeRows.indexOf(i) > -1) {\r\n                    if (i === 0 && j === startCol) {\r\n                        createOneEl(0, startCol);\r\n                    } else if (j === startCol && i > 0) {\r\n                        var isNeedMergeRow = mergeRule(cache[i][j], cache[i - 1][j]);\r\n                        if (isNeedMergeRow === true) {\r\n                            mergeRow(i, j);\r\n                            preRow[i] = preCol[j];\r\n                        } else {\r\n                            createOneEl(i, j);\r\n                        }\r\n                    } else if (i === 0 && j > startCol) {\r\n                        var isNeedMergeCol = mergeRule(cache[i][j], cache[i][j - 1]);\r\n                        if (isNeedMergeCol === true) {\r\n                            mergeCol(i, j);\r\n                            preCol[j] = preRow[i];\r\n                        } else {\r\n                            createOneEl(i, j);\r\n                        }\r\n                    } else {\r\n                        var isNeedMergeRow = mergeRule(cache[i][j], cache[i - 1][j]);\r\n                        var isNeedMergeCol = mergeRule(cache[i][j], cache[i][j - 1]);\r\n                        if (isNeedMergeCol && isNeedMergeRow) {\r\n                            continue;\r\n                            // mergeRow(i, j);//优先合并列\r\n                        }\r\n                        if (isNeedMergeCol) {\r\n                            mergeCol(i, j);\r\n                        }\r\n                        if (isNeedMergeRow) {\r\n                            mergeRow(i, j);\r\n                        }\r\n                        if (!isNeedMergeCol && !isNeedMergeRow) {\r\n                            createOneEl(i, j);\r\n                        }\r\n                    }\r\n                } else {\r\n                    createOneEl(i, j);\r\n                }\r\n            }\r\n        });\r\n        return {\r\n            map: map,\r\n            cells: result\r\n        };\r\n    },\r\n    serialize: function (items, startCol, endCol, rowHeight, columnSize, mergeCols, mergeRows, mergeRule, rowHeightsGetter) {\r\n        var res = BI.CollectionTable.map(items, startCol, endCol, rowHeight, columnSize, mergeCols, mergeRows, mergeRule, rowHeightsGetter);\r\n        return BI.map(res.cells, function (i, item) {\r\n            return {\r\n                x: item.x,\r\n                y: item.y,\r\n                row: item.item._row,\r\n                col: item.item._col,\r\n                width: item.item._width,\r\n                height: item.item._height\r\n            };\r\n        });\r\n    }\r\n});\r\nBI.shortcut(\"bi.collection_table\", BI.CollectionTable);\r\n","/**\r\n * QuickCollectionTable\r\n *\r\n * Created by GUY on 2016/1/12.\r\n * @class BI.QuickCollectionTable\r\n * @extends BI.CollectionTable\r\n */\r\nBI.QuickCollectionTable = BI.inherit(BI.CollectionTable, {\r\n    _defaultConfig: function () {\r\n        return BI.extend(BI.QuickCollectionTable.superclass._defaultConfig.apply(this, arguments), {\r\n            extraCls: \"bi-quick-collection-table\"\r\n        });\r\n    },\r\n\r\n    render: function () {\r\n        BI.QuickCollectionTable.superclass.render.apply(this, arguments);\r\n        var self = this, o = this.options;\r\n        this.topLeftCollection.setOverflowX(false);\r\n        this.topLeftCollection.setOverflowY(false);\r\n        this.topRightCollection.setOverflowX(false);\r\n        this.topRightCollection.setOverflowY(false);\r\n        this.bottomLeftCollection.setOverflowX(false);\r\n        this.bottomLeftCollection.setOverflowY(false);\r\n        this.bottomRightCollection.setOverflowX(false);\r\n        this.bottomRightCollection.setOverflowY(false);\r\n    },\r\n\r\n    mounted: function () {\r\n        // BI.QuickCollectionTable.superclass.mounted.apply(this, arguments);\r\n        var self = this;\r\n        this._topLeftWheelHandler = new BI.WheelHandler(\r\n            BI.bind(this._onWheelLeft, this),\r\n            BI.bind(this._shouldHandleLeftX, this),\r\n            BI.bind(this._shouldHandleY, this)\r\n        );\r\n        this._topRightWheelHandler = new BI.WheelHandler(\r\n            BI.bind(this._onWheelRight, this),\r\n            BI.bind(this._shouldHandleRightX, this),\r\n            BI.bind(this._shouldHandleY, this)\r\n        );\r\n        this._bottomLeftWheelHandler = new BI.WheelHandler(\r\n            BI.bind(this._onWheelLeft, this),\r\n            BI.bind(this._shouldHandleLeftX, this),\r\n            BI.bind(this._shouldHandleY, this)\r\n        );\r\n        this._bottomRightWheelHandler = new BI.WheelHandler(\r\n            BI.bind(this._onWheelRight, this),\r\n            BI.bind(this._shouldHandleRightX, this),\r\n            BI.bind(this._shouldHandleY, this)\r\n        );\r\n        this.topLeftCollection.element.mousewheel(function (e) {\r\n            self._topLeftWheelHandler.onWheel(e.originalEvent);\r\n        });\r\n        this.topRightCollection.element.mousewheel(function (e) {\r\n            self._topRightWheelHandler.onWheel(e.originalEvent);\r\n        });\r\n        this.bottomLeftCollection.element.mousewheel(function (e) {\r\n            self._bottomLeftWheelHandler.onWheel(e.originalEvent);\r\n        });\r\n        this.bottomRightCollection.element.mousewheel(function (e) {\r\n            self._bottomRightWheelHandler.onWheel(e.originalEvent);\r\n        });\r\n    },\r\n\r\n    _shouldHandleLeftX: function (delta) {\r\n        if (delta > 0) {\r\n            return this.bottomLeftCollection.getScrollLeft() < this.bottomLeftCollection.getMaxScrollLeft();\r\n        }\r\n        return this.bottomLeftCollection.getScrollLeft() > 0;\r\n\r\n    },\r\n\r\n    _shouldHandleRightX: function (delta) {\r\n        if (delta > 0) {\r\n            return this.bottomRightCollection.getScrollLeft() < this.bottomRightCollection.getMaxScrollLeft();\r\n        }\r\n        return this.bottomRightCollection.getScrollLeft() > 0;\r\n\r\n    },\r\n\r\n    _shouldHandleY: function (delta) {\r\n        if (delta > 0) {\r\n            return this.bottomRightCollection.getScrollTop() < this.bottomRightCollection.getMaxScrollTop();\r\n        }\r\n        return this.bottomRightCollection.getScrollTop() > 0;\r\n\r\n    },\r\n\r\n    _onWheelLeft: function (deltaX, deltaY) {\r\n        var self = this;\r\n        var scrollTop = this.bottomLeftCollection.getScrollTop();\r\n        var scrollLeft = this.bottomLeftCollection.getScrollLeft();\r\n        if (Math.abs(deltaY) > Math.abs(deltaX)) {\r\n            deltaX = 0;\r\n        } else {\r\n            deltaY = 0;\r\n        }\r\n        scrollTop += deltaY;\r\n        scrollLeft += deltaX;\r\n        this.bottomLeftCollection.setScrollTop(scrollTop);\r\n        this.bottomRightCollection.setScrollTop(scrollTop);\r\n        this.topLeftCollection.setScrollLeft(scrollLeft);\r\n        this.bottomLeftCollection.setScrollLeft(scrollLeft);\r\n        self._populateScrollbar();\r\n        this.fireEvent(BI.Table.EVENT_TABLE_SCROLL, arguments);\r\n    },\r\n\r\n    _onWheelRight: function (deltaX, deltaY) {\r\n        var self = this;\r\n        var scrollTop = this.bottomRightCollection.getScrollTop();\r\n        var scrollLeft = this.bottomRightCollection.getScrollLeft();\r\n        if (Math.abs(deltaY) > Math.abs(deltaX)) {\r\n            deltaX = 0;\r\n        } else {\r\n            deltaY = 0;\r\n        }\r\n        scrollTop += deltaY;\r\n        scrollLeft += deltaX;\r\n        this.bottomLeftCollection.setScrollTop(scrollTop);\r\n        this.bottomRightCollection.setScrollTop(scrollTop);\r\n        this.topRightCollection.setScrollLeft(scrollLeft);\r\n        this.bottomRightCollection.setScrollLeft(scrollLeft);\r\n        self._populateScrollbar();\r\n        this.fireEvent(BI.Table.EVENT_TABLE_SCROLL, arguments);\r\n    },\r\n\r\n    _populateTable: function () {\r\n        var self = this, o = this.options;\r\n        var regionSize = this.getRegionSize(), totalLeftColumnSize = 0, totalRightColumnSize = 0, totalColumnSize = 0,\r\n            summaryColumnSizeArray = [];\r\n        BI.each(o.columnSize, function (i, size) {\r\n            if (o.isNeedFreeze === true && o.freezeCols.includes(i)) {\r\n                totalLeftColumnSize += size;\r\n            } else {\r\n                totalRightColumnSize += size;\r\n            }\r\n            totalColumnSize += size;\r\n            if (i === 0) {\r\n                summaryColumnSizeArray[i] = size;\r\n            } else {\r\n                summaryColumnSizeArray[i] = summaryColumnSizeArray[i - 1] + size;\r\n            }\r\n        });\r\n\r\n        var otlw = regionSize;\r\n        var otlh = this._getFreezeHeaderHeight();\r\n        var otrw = this._width - regionSize;\r\n        var otrh = this._getFreezeHeaderHeight();\r\n        var oblw = regionSize;\r\n        var oblh = this._height - otlh;\r\n        var obrw = this._width - regionSize;\r\n        var obrh = this._height - otrh;\r\n\r\n        this.topLeft.setWidth(otlw);\r\n        this.topLeft.setHeight(otlh);\r\n        this.topRight.setWidth(otrw);\r\n        this.topRight.setHeight(otrh);\r\n        this.bottomLeft.setWidth(oblw);\r\n        this.bottomLeft.setHeight(oblh);\r\n        this.bottomRight.setWidth(obrw);\r\n        this.bottomRight.setHeight(obrh);\r\n\r\n        this.topLeftCollection.setWidth(otlw);\r\n        this.topLeftCollection.setHeight(otlh);\r\n        this.topRightCollection.setWidth(otrw);\r\n        this.topRightCollection.setHeight(otrh);\r\n        this.bottomLeftCollection.setWidth(oblw);\r\n        this.bottomLeftCollection.setHeight(oblh);\r\n        this.bottomRightCollection.setWidth(obrw);\r\n        this.bottomRightCollection.setHeight(obrh);\r\n\r\n        var items = this.contextLayout.attr(\"items\");\r\n        items[1].left = regionSize;\r\n        items[2].top = this._getFreezeHeaderHeight();\r\n        items[3].left = regionSize;\r\n        items[3].top = this._getFreezeHeaderHeight();\r\n        items[4].left = regionSize;\r\n        this.contextLayout.attr(\"items\", items);\r\n        this.contextLayout.resize();\r\n\r\n        var leftHeader = [], rightHeader = [], leftItems = [], rightItems = [];\r\n        var run = function (positions, items, rendered, firstRowTopLine, firstColumnLeftLine) {\r\n            BI.each(positions, function (i, item) {\r\n                if (!firstRowTopLine && o.customCell) {\r\n                    items[item.row][item.col]._rowIndex = item.row;\r\n                    items[item.row][item.col]._columnIndex = item.col;\r\n                    items[item.row][item.col].firstRowTopLine = firstRowTopLine;\r\n                    items[item.row][item.col].firstColumnLeftLine = firstColumnLeftLine;\r\n                    rendered.push(items[item.row][item.col]);\r\n                    return;\r\n                }\r\n                var cell = {\r\n                    type: \"bi.collection_table_cell\",\r\n                    cell: items[item.row][item.col],\r\n                    _rowIndex: item.row,\r\n                    _columnIndex: item.col,\r\n                    firstRowTopLine: firstRowTopLine,\r\n                    firstColumnLeftLine: firstColumnLeftLine\r\n                };\r\n                rendered.push(cell);\r\n            });\r\n        };\r\n        run(this.topLeftItems, o.header, leftHeader, true, true);\r\n        run(this.topRightItems, o.header, rightHeader, true, this.topLeftItems.length <= 0);\r\n        run(this.bottomLeftItems, this._getActualItems(), leftItems, this.topRightItems.length <= 0, true);\r\n        run(this.bottomRightItems, this._getActualItems(), rightItems, this.topRightItems.length <= 0, this.topLeftItems.length <= 0);\r\n\r\n        this.topLeftCollection._populate(leftHeader);\r\n        this.topRightCollection._populate(rightHeader);\r\n        this.bottomLeftCollection._populate(leftItems);\r\n        this.bottomRightCollection._populate(rightItems);\r\n    }\r\n});\r\nBI.shortcut(\"bi.quick_collection_table\", BI.QuickCollectionTable);\r\n","/**\r\n * 行高自动算的表格\r\n *\r\n * Created by GUY on 2016/1/12.\r\n * @class BI.AutoHeightCollectionTable\r\n * @extends BI.Widget\r\n */\r\n!(function () {\r\n    var getTextLines = function (text, fontSize, cellWidth, maxLines) {\r\n        var width = 0;\r\n        var lines = 1;\r\n        var charWidth = 0;\r\n        var widths = BI.Constants.getConstant(\"bi.constant.char.widths\");\r\n        for (var i = 0, len = text.length; i < len; i++) {\r\n            var char = text.charCodeAt(i);\r\n            // 回车和换行\r\n            if (char === 13 || char === 10) {\r\n                width = 0;\r\n                lines++;\r\n                continue;\r\n            }\r\n            if (char >= 32 && char <= 126) {\r\n                charWidth = widths[char] * fontSize;\r\n            } else {\r\n                charWidth = fontSize;\r\n            }\r\n            width += charWidth;\r\n            if (width > cellWidth) {\r\n                width = charWidth;\r\n                lines++;\r\n            }\r\n            if (lines === maxLines) {\r\n                break;\r\n            }\r\n        }\r\n        return lines;\r\n    };\r\n    var getCellRowHeight = function (text, fontSize, width, lineHeight, rowGap, rowHeight, maxHeight) {\r\n        var maxLines = Math.ceil((maxHeight - rowGap) / lineHeight);\r\n        var lines = getTextLines(text || '', fontSize, width, maxLines);\r\n        return Math.min(Math.max(lines * lineHeight + rowGap, rowHeight), maxHeight);\r\n    };\r\n    BI.AutoHeightCollectionTable = BI.inherit(BI.CollectionTable, {\r\n        _defaultConfig: function () {\r\n            return BI.extend(BI.AutoHeightCollectionTable.superclass._defaultConfig.apply(this, arguments), {\r\n                baseCls: \"bi-collection-table bi-collection-auto-height-table\",\r\n                isAutoHeight: true,\r\n                isHeaderAutoHeight: true,\r\n\r\n                fontSize: 12,\r\n                fontLineHeight: 14,\r\n                columnGaps: [],\r\n                rowGap: 1,\r\n\r\n                headerFontSize: 12,\r\n                headerFontLineHeight: 14,\r\n                headerColumnGaps: [],\r\n                headerRowGap: 1,\r\n\r\n                rowSize: 0, // 在这个组件里rowSize表示最小高\r\n                headerRowSize: 0, // 在这个组件里rowSize表示最小高\r\n\r\n                maxRowSize: 400\r\n            });\r\n        },\r\n\r\n        _getFreezeHeaderHeight: function () {\r\n            var o = this.options;\r\n            if (!o.isHeaderAutoHeight) {\r\n                return BI.AutoHeightCollectionTable.superclass._getFreezeHeaderHeight.call(this);\r\n            }\r\n            if (this.headerIntervalTree) {\r\n                var allHeaderHeight = this.headerIntervalTree.sumUntil(o.header.length);\r\n                if (allHeaderHeight >= this._height) {\r\n                    return 0;\r\n                }\r\n                return allHeaderHeight;\r\n            }\r\n            return 0;\r\n        },\r\n\r\n        _getActualItems: function () {\r\n            var o = this.options;\r\n            if (!o.isHeaderAutoHeight) {\r\n                return BI.AutoHeightCollectionTable.superclass._getActualItems.call(this);\r\n            }\r\n            if (this.headerIntervalTree) {\r\n                var allHeaderHeight = this.headerIntervalTree.sumUntil(o.header.length);\r\n                if (allHeaderHeight >= this._height) {\r\n                    return o.header.concat(o.items);\r\n                }\r\n            }\r\n            return o.items;\r\n        },\r\n\r\n        _getContentHeight: function () {\r\n            var o = this.options;\r\n            if (!o.isAutoHeight && !o.isHeaderAutoHeight) {\r\n                return BI.AutoHeightCollectionTable.superclass._getContentHeight.call(this);\r\n            }\r\n            if (!o.isHeaderAutoHeight) {\r\n                var allHeaderHeight = this._getFreezeHeaderHeight();\r\n                if (allHeaderHeight <= 0) {\r\n                    return o.header.length * o.headerRowSize + (this.intervalTree ? this.intervalTree.sumUntil(o.items.length) : 0);\r\n                } else {\r\n                    return this.intervalTree ? this.intervalTree.sumUntil(o.items.length) : 0;\r\n                }\r\n            }\r\n            if (!o.isAutoHeight) {\r\n                var allHeaderHeight = this.headerIntervalTree ? this.headerIntervalTree.sumUntil(o.header.length) : 0;\r\n                if (allHeaderHeight >= this._height) {\r\n                    return allHeaderHeight + o.items.length * o.rowSize;\r\n                } else {\r\n                    return o.items.length * o.rowSize;\r\n                }\r\n            }\r\n            if (this.headerIntervalTree) {\r\n                var allHeaderHeight = this.headerIntervalTree.sumUntil(o.header.length);\r\n                if (allHeaderHeight >= this._height) {\r\n                    return allHeaderHeight + this.intervalTree ? this.intervalTree.sumUntil(o.items.length) : 0;\r\n                } else {\r\n                    return this.intervalTree ? this.intervalTree.sumUntil(o.items.length) : 0;\r\n                }\r\n            }\r\n            return 0;\r\n        },\r\n\r\n        _getOneRowHeight: function (index) {\r\n            var self = this, o = this.options;\r\n            var columns = this.options.items[index];\r\n            var maxHeight = 0;\r\n            var heightCache = this.heightCache;\r\n            var freezeColLength = this._getFreezeColLength();\r\n            for (var i = 0, len = columns.length; i < len; i++) {\r\n                var column = columns[i];\r\n                if (heightCache[index] && heightCache[index][i]) {\r\n                    var cellHeight = heightCache[index][i];\r\n                } else {\r\n                    var cell = self.mergeRules.map[index] && self.mergeRules.map[index][i];\r\n                    var mergeRows = (cell && cell.__mergeRows) || [];\r\n                    var mergeCols = (cell && cell.__mergeCols) || [];\r\n                    // 要考虑行合并和列合并的情况\r\n                    var columnSize = o.columnSize[i] - (o.columnGaps[i] || 0) -\r\n                        ((BI.isFunction(column.columnGap) ? column.columnGap() : column.columnGap) || 0) -\r\n                        (i === 0 || i === freezeColLength ? 2 : 1) - (column.layer || 0) * 30;\r\n                    if (mergeCols.length > 1) {\r\n                        // 合并列每一列要累计\r\n                        for (var t = 1; t < mergeCols.length; t++) {\r\n                            columnSize += o.columnSize[i + t];\r\n                        }\r\n                        i += mergeCols.length - 1;\r\n                    }\r\n                    var cellHeight = getCellRowHeight(column.text, o.fontSize, columnSize, o.fontLineHeight, o.rowGap, o.rowSize, o.maxRowSize);\r\n                    cellHeight = cellHeight / (mergeRows.length || 1);\r\n                    if (mergeRows.length > 0) {\r\n                        // 合并行每一行要使用平均值\r\n                        for (var t = index; t < index + mergeRows.length; t++) {\r\n                            if (!heightCache[t]) {\r\n                                heightCache[t] = {};\r\n                            }\r\n                            heightCache[t][i] = cellHeight;\r\n                        }\r\n                    }\r\n                }\r\n                if (cellHeight >= o.maxRowSize) {\r\n                    return o.maxRowSize;\r\n                }\r\n                maxHeight = Math.max(maxHeight, cellHeight);\r\n            }\r\n            return maxHeight;\r\n        },\r\n\r\n        _getOneHeaderRowHeight: function (index) {\r\n            var self = this, o = this.options;\r\n            var columns = this.options.header[index];\r\n            var maxHeight = 0;\r\n            var heightCache = this.headerHeightCache;\r\n            var freezeColLength = this._getFreezeColLength();\r\n            for (var i = 0, len = columns.length; i < len; i++) {\r\n                var column = columns[i];\r\n                if (heightCache[index] && heightCache[index][i]) {\r\n                    var cellHeight = heightCache[index][i];\r\n                } else {\r\n                    var cell = self.headerMergeRules.map[index] && self.headerMergeRules.map[index][i];\r\n                    var mergeRows = (cell && cell.__mergeRows) || [];\r\n                    var mergeCols = (cell && cell.__mergeCols) || [];\r\n                    // 要考虑行合并和列合并的情况\r\n                    var columnSize = o.columnSize[i] - (o.columnGaps[i] || 0) -\r\n                        ((column.cell ? (BI.isFunction(column.cell.columnGap) ? column.cell.columnGap() : column.cell.columnGap) : column.columnGap) || 0) -\r\n                        (i === 0 || i === freezeColLength ? 2 : 1);\r\n                    if (mergeCols.length > 1) {\r\n                        // 合并列每一列要累计\r\n                        for (var t = 1; t < mergeCols.length; t++) {\r\n                            columnSize += o.columnSize[i + t];\r\n                        }\r\n                        i += mergeCols.length - 1;\r\n                    }\r\n                    var cellHeight = getCellRowHeight(column.cell ? column.cell.text : column.text, o.headerFontSize, columnSize, o.headerFontLineHeight, o.headerRowGap, o.headerRowSize, o.maxRowSize);\r\n                    cellHeight = cellHeight / (mergeRows.length || 1);\r\n                    if (mergeRows.length > 0) {\r\n                        // 合并行每一行要使用平均值\r\n                        for (var t = index; t < index + mergeRows.length; t++) {\r\n                            if (!heightCache[t]) {\r\n                                heightCache[t] = {};\r\n                            }\r\n                            heightCache[t][i] = cellHeight;\r\n                        }\r\n                    }\r\n                }\r\n                if (cellHeight >= o.maxRowSize) {\r\n                    return o.maxRowSize;\r\n                }\r\n                maxHeight = Math.max(maxHeight, cellHeight);\r\n            }\r\n            return maxHeight;\r\n        },\r\n\r\n        _getActualRowHeights: function () {\r\n            var self = this, o = this.options;\r\n            var items = this.options.items;\r\n            // logn复杂度算线段树长\r\n            this.intervalTree = BI.PrefixIntervalTree.empty(o.items.length);\r\n            this.heightCache = {};\r\n            // 先计算一遍合并规则\r\n            this.mergeRules = BI.CollectionTable.map(o.items, 0, this._getFreezeColLength(), o.rowSize, o.columnSize, o.mergeCols, [], o.mergeRule);\r\n\r\n            BI.each(items, function (i, row) {\r\n                self.intervalTree.set(i, self._getOneRowHeight(i));\r\n            });\r\n            return this.intervalTree;\r\n        },\r\n\r\n        _getActualHeaderRowHeights: function () {\r\n            var self = this, o = this.options;\r\n            var items = this.options.header;\r\n            // logn复杂度算线段树长\r\n            this.headerIntervalTree = BI.PrefixIntervalTree.empty(o.header.length);\r\n            this.headerHeightCache = {};\r\n            // 先计算一遍合并规则\r\n            this.headerMergeRules = BI.CollectionTable.map(o.header, this._getFreezeColLength(), o.columnSize.length, o.headerRowSize, o.columnSize, true, [], o.mergeRule);\r\n\r\n            BI.each(items, function (i, row) {\r\n                self.headerIntervalTree.set(i, self._getOneHeaderRowHeight(i));\r\n            });\r\n            return this.headerIntervalTree;\r\n        },\r\n\r\n        _digest: function () {\r\n            var self = this, o = this.options;\r\n            if (!o.isAutoHeight && !o.isHeaderAutoHeight) {\r\n                return BI.AutoHeightCollectionTable.superclass._digest.call(this);\r\n            }\r\n            if (o.isHeaderAutoHeight) {\r\n                this._getActualHeaderRowHeights();\r\n                var allHeaderHeight = this.headerIntervalTree.sumUntil(o.header.length);\r\n            } else {\r\n                var allHeaderHeight = o.header.length * o.headerRowSize;\r\n            }\r\n            if (o.isAutoHeight) {\r\n                this._getActualRowHeights();\r\n            }\r\n            var freezeColLength = this._getFreezeColLength();\r\n            // 如果表头位置不够，取消表头冻结\r\n            if (allHeaderHeight >= this._height) {\r\n                var heightCache = {}, allHeightCache = {};\r\n                this.topLeftItems = [];\r\n                this.topRightItems = [];\r\n                this.bottomLeftItems = BI.CollectionTable.serialize(this._getActualItems(), 0, freezeColLength, function (row) {\r\n                    if (heightCache[row]) {\r\n                        return heightCache[row];\r\n                    }\r\n                    if (row <= o.header.length - 1) {\r\n                        if (!o.isHeaderAutoHeight) {\r\n                            return heightCache[row] = o.headerRowSize;\r\n                        }\r\n                        return heightCache[row] = self.headerIntervalTree.get(row);\r\n                    }\r\n                    if (!o.isAutoHeight) {\r\n                        return heightCache[row] = o.rowSize;\r\n                    }\r\n                    return heightCache[row] = self.intervalTree.get(row - o.header.length);\r\n                }, o.columnSize, o.mergeCols, BI.range(o.header.length), o.mergeRule, function (rows) {\r\n                    if (rows <= 0) {\r\n                        return 0;\r\n                    }\r\n                    if (allHeightCache[rows]) {\r\n                        return allHeightCache[rows];\r\n                    }\r\n                    if (rows <= o.header.length) {\r\n                        if (!o.isHeaderAutoHeight) {\r\n                            return allHeightCache[rows] = rows * o.headerRowSize;\r\n                        }\r\n                        return allHeightCache[rows] = self.headerIntervalTree.sumUntil(rows);\r\n                    }\r\n                    if (!o.isAutoHeight) {\r\n                        return allHeightCache[rows] = allHeaderHeight + (rows - o.header.length) * o.rowSize;\r\n                    }\r\n                    return allHeightCache[rows] = allHeaderHeight + self.intervalTree.sumUntil(rows - o.header.length);\r\n                });\r\n                this.bottomRightItems = BI.CollectionTable.serialize(this._getActualItems(), freezeColLength, o.columnSize.length, function (row) {\r\n                    if (heightCache[row]) {\r\n                        return heightCache[row];\r\n                    }\r\n                    if (row <= o.header.length - 1) {\r\n                        if (!o.isHeaderAutoHeight) {\r\n                            return heightCache[row] = o.headerRowSize;\r\n                        }\r\n                        return heightCache[row] = self.headerIntervalTree.get(row);\r\n                    }\r\n                    if (!o.isAutoHeight) {\r\n                        return heightCache[row] = o.rowSize;\r\n                    }\r\n                    return heightCache[row] = self.intervalTree.get(row - o.header.length);\r\n                }, o.columnSize, o.mergeCols, BI.range(o.header.length), o.mergeRule, function (rows) {\r\n                    if (rows <= 0) {\r\n                        return 0;\r\n                    }\r\n                    if (allHeightCache[rows]) {\r\n                        return allHeightCache[rows];\r\n                    }\r\n                    if (rows <= o.header.length) {\r\n                        if (!o.isHeaderAutoHeight) {\r\n                            return allHeightCache[rows] = rows * o.headerRowSize;\r\n                        }\r\n                        return allHeightCache[rows] = self.headerIntervalTree.sumUntil(rows);\r\n                    }\r\n                    if (!o.isAutoHeight) {\r\n                        return allHeightCache[rows] = allHeaderHeight + (rows - o.header.length) * o.rowSize;\r\n                    }\r\n                    return allHeightCache[rows] = allHeaderHeight + self.intervalTree.sumUntil(rows - o.header.length);\r\n                });\r\n            } else {\r\n                var headerHeightCache = {}, headerAllHeightCache = {};\r\n                var itemHeightCache = {}, itemAllHeightCache = {};\r\n                this.topLeftItems = BI.CollectionTable.serialize(o.header, 0, freezeColLength, function (row) {\r\n                    if (headerHeightCache[row]) {\r\n                        return headerHeightCache[row];\r\n                    }\r\n                    if (!o.isHeaderAutoHeight) {\r\n                        return headerHeightCache[row] = o.headerRowSize;\r\n                    }\r\n                    return headerHeightCache[row] = self.headerIntervalTree.get(row);\r\n                }, o.columnSize, o.mergeCols, [], o.mergeRule, function (rows) {\r\n                    if (rows === 0) {\r\n                        return 0;\r\n                    }\r\n                    if (headerAllHeightCache[rows]) {\r\n                        return headerAllHeightCache[rows];\r\n                    }\r\n                    if (!o.isHeaderAutoHeight) {\r\n                        return rows * o.headerRowSize;\r\n                    }\r\n                    return headerAllHeightCache[rows] = self.headerIntervalTree.sumUntil(rows);\r\n                });\r\n                this.topRightItems = BI.CollectionTable.serialize(o.header, freezeColLength, o.columnSize.length, function (row) {\r\n                    if (headerHeightCache[row]) {\r\n                        return headerHeightCache[row];\r\n                    }\r\n                    if (!o.isHeaderAutoHeight) {\r\n                        return headerHeightCache[row] = o.headerRowSize;\r\n                    }\r\n                    return headerHeightCache[row] = self.headerIntervalTree.get(row);\r\n                }, o.columnSize, true, [], o.mergeRule, function (rows) {\r\n                    if (rows === 0) {\r\n                        return 0;\r\n                    }\r\n                    if (headerAllHeightCache[rows]) {\r\n                        return headerAllHeightCache[rows];\r\n                    }\r\n                    if (!o.isHeaderAutoHeight) {\r\n                        return rows * o.headerRowSize;\r\n                    }\r\n                    return headerAllHeightCache[rows] = self.headerIntervalTree.sumUntil(rows);\r\n                });\r\n                this.bottomLeftItems = BI.CollectionTable.serialize(o.items, 0, freezeColLength, function (row) {\r\n                    if (itemHeightCache[row]) {\r\n                        return itemHeightCache[row];\r\n                    }\r\n                    if (!o.isAutoHeight) {\r\n                        return itemHeightCache[row] = o.rowSize;\r\n                    }\r\n                    return itemHeightCache[row] = self.intervalTree.get(row);\r\n                }, o.columnSize, o.mergeCols, [], o.mergeRule, function (rows) {\r\n                    if (rows === 0) {\r\n                        return 0;\r\n                    }\r\n                    if (itemAllHeightCache[rows]) {\r\n                        return itemAllHeightCache[rows];\r\n                    }\r\n                    if (!o.isAutoHeight) {\r\n                        return rows * o.rowSize;\r\n                    }\r\n                    return itemAllHeightCache[rows] = self.intervalTree.sumUntil(rows);\r\n                });\r\n                this.bottomRightItems = BI.CollectionTable.serialize(o.items, freezeColLength, o.columnSize.length, function (row) {\r\n                    if (itemHeightCache[row]) {\r\n                        return itemHeightCache[row];\r\n                    }\r\n                    if (!o.isAutoHeight) {\r\n                        return itemHeightCache[row] = o.rowSize;\r\n                    }\r\n                    return itemHeightCache[row] = self.intervalTree.get(row);\r\n                }, o.columnSize, o.mergeCols, [], o.mergeRule, function (rows) {\r\n                    if (rows === 0) {\r\n                        return 0;\r\n                    }\r\n                    if (itemAllHeightCache[rows]) {\r\n                        return itemAllHeightCache[rows];\r\n                    }\r\n                    if (!o.isAutoHeight) {\r\n                        return rows * o.rowSize;\r\n                    }\r\n                    return itemAllHeightCache[rows] = self.intervalTree.sumUntil(rows);\r\n                });\r\n            }\r\n            // this.topLeftCollection.restore();\r\n            // this.topRightCollection.restore();\r\n            // this.bottomLeftCollection.restore();\r\n            // this.bottomRightCollection.restore();\r\n        }\r\n    });\r\n    BI.shortcut(\"bi.collection_auto_height_table\", BI.AutoHeightCollectionTable);\r\n}());\r\n\r\n","!(function () {\r\n    /**\r\n     * DynamicGridTable\r\n     *\r\n     * Created by GUY on 2020/6/26.\r\n     * @class GridTable\r\n     * @extends BI.Widget\r\n     */\r\n    var GridTable = BI.DynamicCollectionTable = BI.inherit(BI.Widget, {\r\n        _defaultConfig: function () {\r\n            return BI.extend(GridTable.superclass._defaultConfig.apply(this, arguments), {\r\n                baseCls: \"bi-dynamic-collection-table\",\r\n                headerRowSize: 25,\r\n                // rowSize: 25,\r\n                columnSize: [],\r\n                isNeedFreeze: false,\r\n                freezeCols: [],\r\n                isNeedMerge: false,\r\n                mergeCols: [],\r\n                mergeRule: BI.emptyFn,\r\n                header: [],\r\n                items: [],\r\n                regionColumnSize: [],\r\n                trRenderer: null,\r\n                headerEl: {},\r\n                bodyEl: {},\r\n                bordered: true\r\n            });\r\n        },\r\n\r\n        attr: function (key, value) {\r\n            var v = GridTable.superclass.attr.apply(this, arguments);\r\n            if (!BI.isNull(value)) {\r\n                return v;\r\n            }\r\n            this.topRightCollection.attr.apply(this.topRightCollection, arguments);\r\n            return this.bottomRightCollection.attr.apply(this.bottomRightCollection, arguments);\r\n        },\r\n\r\n        render: function () {\r\n            var self = this, o = this.options;\r\n            this._width = 0;\r\n            this._height = 0;\r\n            this.topLeftCollection = BI.createWidget({\r\n                type: \"bi.dynamic_collection_view\",\r\n                stopScrollEvent: true,\r\n                renderMore: true,\r\n                columnSize: o.columnSize.slice(0, o.freezeCols.length),\r\n                isNeedMerge: o.isNeedMerge,\r\n                mergeCols: o.mergeCols,\r\n                mergeRule: o.mergeRule,\r\n                rowSizeGetter: function (index) {\r\n                    return o.headerRowSize;\r\n                }\r\n            });\r\n            this.topLeftCollection.on(BI.CollectionView.EVENT_SCROLL, function (scroll) {\r\n                self.bottomLeftCollection.setScrollLeft(scroll.scrollLeft);\r\n                self._populateScrollbar();\r\n                self.fireEvent(BI.Table.EVENT_TABLE_SCROLL, arguments);\r\n            });\r\n            this.topRightCollection = BI.createWidget({\r\n                type: \"bi.dynamic_collection_view\",\r\n                columnSize: o.columnSize,\r\n                isNeedFreeze: o.isNeedFreeze,\r\n                freezeCols: o.freezeCols,\r\n                isNeedMerge: o.isNeedMerge,\r\n                mergeCols: o.mergeCols,\r\n                mergeRule: o.mergeRule,\r\n                regionColumnSize: o.regionColumnSize,\r\n                rowSizeGetter: function (index) {\r\n                    return o.headerRowSize;\r\n                }\r\n            });\r\n            this.topRightCollection.on(BI.CollectionView.EVENT_SCROLL, function (scroll) {\r\n                self.bottomRightCollection.setScrollLeft(scroll.scrollLeft);\r\n                self._populateScrollbar();\r\n                self.fireEvent(BI.Table.EVENT_TABLE_SCROLL, arguments);\r\n            });\r\n            this.bottomRightCollection = BI.createWidget({\r\n                type: \"bi.dynamic_collection_view\",\r\n                columnSize: o.columnSize,\r\n                isNeedFreeze: o.isNeedFreeze,\r\n                freezeCols: o.freezeCols,\r\n                isNeedMerge: o.isNeedMerge,\r\n                mergeCols: o.mergeCols,\r\n                mergeRule: o.mergeRule,\r\n                regionColumnSize: o.regionColumnSize,\r\n                trRenderer: o.trRenderer,\r\n                el: o.bodyEl\r\n            });\r\n            this.bottomRightCollection.on(BI.CollectionView.EVENT_SCROLL, function (scroll) {\r\n                self.bottomLeftCollection.setScrollTop(scroll.scrollTop);\r\n                self.topRightCollection.setScrollLeft(scroll.scrollLeft);\r\n                self._populateScrollbar();\r\n                self.fireEvent(BI.Table.EVENT_TABLE_SCROLL, arguments);\r\n            });\r\n            this.bottomRightCollection.on(\"EVENT_SYNC\", function () {\r\n                self.bottomLeftCollection._calculateBlocksToRender();\r\n            });\r\n            this.bottomLeftCollection = BI.createWidget({\r\n                type: \"bi.dynamic_collection_view\",\r\n                stopScrollEvent: true,\r\n                renderMore: true,\r\n                columnSize: o.columnSize.slice(0, o.freezeCols.length),\r\n                isNeedMerge: o.isNeedMerge,\r\n                mergeCols: o.mergeCols,\r\n                mergeRule: o.mergeRule,\r\n                rowSizeGetter: function (index) {\r\n                    return self.bottomRightCollection.trCache[index].element.height();\r\n                },\r\n                trRenderer: o.trRenderer\r\n            });\r\n            this.bottomLeftCollection.on(BI.CollectionView.EVENT_SCROLL, function (scroll) {\r\n                self.bottomRightCollection.setScrollTop(scroll.scrollTop);\r\n                self.topLeftCollection.setScrollLeft(scroll.scrollLeft);\r\n                self._populateScrollbar();\r\n                self.fireEvent(BI.Table.EVENT_TABLE_SCROLL, arguments);\r\n            });\r\n            this.topLeft = BI.createWidget({\r\n                type: \"bi.vertical\",\r\n                scrollable: false,\r\n                scrolly: false,\r\n                items: [this.topLeftCollection]\r\n            });\r\n            this.topRight = BI.createWidget({\r\n                type: \"bi.vertical\",\r\n                scrollable: false,\r\n                scrolly: false,\r\n                items: [this.topRightCollection]\r\n            });\r\n            this.bottomLeft = BI.createWidget({\r\n                type: \"bi.vertical\",\r\n                scrollable: false,\r\n                scrolly: false,\r\n                items: [this.bottomLeftCollection]\r\n            });\r\n            this.bottomRight = BI.createWidget({\r\n                type: \"bi.vertical\",\r\n                // scrollable: false,\r\n                scrolly: false,\r\n                items: [this.bottomRightCollection]\r\n            });\r\n            this.contextLayout = BI.createWidget({\r\n                type: \"bi.absolute\",\r\n                cls: o.bordered ? \"bordered bi-split\": \"\",\r\n                element: this,\r\n                items: [{\r\n                    el: this.topLeft,\r\n                    top: 0,\r\n                    left: 0\r\n                }, {\r\n                    el: this.topRight,\r\n                    top: 0\r\n                }, {\r\n                    el: this.bottomLeft,\r\n                    left: 0\r\n                }, {\r\n                    el: this.bottomRight\r\n                }]\r\n            });\r\n\r\n            // this.topScrollbar = BI.createWidget({\r\n            //     type: \"bi.grid_table_scrollbar\",\r\n            //     width: BI.GridTableScrollbar.SIZE\r\n            // });\r\n            // this.topScrollbar.on(BI.GridTableScrollbar.EVENT_SCROLL, function (scrollTop) {\r\n            //     self.bottomLeftCollection.setScrollTop(scrollTop);\r\n            //     self.bottomRightCollection.setScrollTop(scrollTop);\r\n            //     self.fireEvent(BI.Table.EVENT_TABLE_SCROLL, arguments);\r\n            // });\r\n            this.leftScrollbar = BI.createWidget({\r\n                type: \"bi.grid_table_horizontal_scrollbar\",\r\n                height: BI.GridTableScrollbar.SIZE\r\n            });\r\n            this.leftScrollbar.on(BI.GridTableScrollbar.EVENT_SCROLL, function (scrollLeft) {\r\n                self.topLeftCollection.setScrollLeft(scrollLeft);\r\n                self.bottomLeftCollection.setScrollLeft(scrollLeft);\r\n                self.fireEvent(BI.Table.EVENT_TABLE_SCROLL, arguments);\r\n            });\r\n            // this.rightScrollbar = BI.createWidget({\r\n            //     type: \"bi.grid_table_horizontal_scrollbar\",\r\n            //     height: BI.GridTableScrollbar.SIZE\r\n            // });\r\n            // this.rightScrollbar.on(BI.GridTableScrollbar.EVENT_SCROLL, function (scrollLeft) {\r\n            //     self.topRightCollection.setScrollLeft(scrollLeft);\r\n            //     self.bottomRightCollection.setScrollLeft(scrollLeft);\r\n            //     self.fireEvent(BI.Table.EVENT_TABLE_SCROLL, arguments);\r\n            // });\r\n            this.scrollBarLayout = BI.createWidget({\r\n                type: \"bi.absolute\",\r\n                element: this,\r\n                items: [{\r\n                    el: this.leftScrollbar,\r\n                    left: 0,\r\n                    bottom: 0\r\n                }]\r\n            });\r\n            this._width = o.width - BI.GridTableScrollbar.SIZE;\r\n            this._height = o.height - BI.GridTableScrollbar.SIZE;\r\n\r\n            if (!(BI.isChrome() && BI.isWindows() && !BI.isEdge())) {\r\n                BI.createWidget({\r\n                    type: \"bi.absolute\",\r\n                    element: this,\r\n                    items: [{\r\n                        el: {\r\n                            type: \"bi.default\",\r\n                            cls: \"bi-table-fix-scroll\"\r\n                        },\r\n                        top: 0,\r\n                        right: 0,\r\n                        bottom: 0,\r\n                        left: 0\r\n                    }]\r\n                });\r\n            }\r\n        },\r\n\r\n        mounted: function () {\r\n            var o = this.options;\r\n            if (o.header.length > 0 || o.items.length > 0) {\r\n                this._digest();\r\n                this._populate();\r\n            }\r\n        },\r\n\r\n        _getFreezeColLength: function () {\r\n            var o = this.options;\r\n            return o.isNeedFreeze === true ? BI.clamp(o.freezeCols.length, 0, o.columnSize.length) : 0;\r\n        },\r\n\r\n        _getFreezeHeaderHeight: function () {\r\n            var o = this.options;\r\n            if (o.header.length * o.headerRowSize >= this._height) {\r\n                return 0;\r\n            }\r\n            return o.header.length * o.headerRowSize;\r\n        },\r\n\r\n        _getActualItems: function () {\r\n            var o = this.options;\r\n            if (o.header.length * o.headerRowSize >= this._height) {\r\n                return o.header.concat(o.items);\r\n            }\r\n            return o.items;\r\n        },\r\n\r\n        _populateScrollbar: function () {\r\n            var o = this.options;\r\n            var regionSize = this.getRegionSize(), totalLeftColumnSize = 0, totalRightColumnSize = 0,\r\n                totalColumnSize = 0,\r\n                summaryColumnSizeArray = [];\r\n            BI.each(o.columnSize, function (i, size) {\r\n                if (o.isNeedFreeze === true && o.freezeCols.includes(i)) {\r\n                    totalLeftColumnSize += size;\r\n                } else {\r\n                    totalRightColumnSize += size;\r\n                }\r\n                totalColumnSize += size;\r\n                if (i === 0) {\r\n                    summaryColumnSizeArray[i] = size;\r\n                } else {\r\n                    summaryColumnSizeArray[i] = summaryColumnSizeArray[i - 1] + size;\r\n                }\r\n            });\r\n            // this.topScrollbar.setContentSize(this._getActualItems().length * o.rowSize);\r\n            // this.topScrollbar.setSize(this._height - this._getFreezeHeaderHeight());\r\n            // this.topScrollbar.setPosition(this.bottomRightCollection.getScrollTop());\r\n            // this.topScrollbar.populate();\r\n\r\n            this.leftScrollbar.setContentSize(totalLeftColumnSize);\r\n            this.leftScrollbar.setSize(regionSize);\r\n            this.leftScrollbar.setPosition(this.bottomLeftCollection.getScrollLeft());\r\n            this.leftScrollbar.populate();\r\n\r\n            // this.rightScrollbar.setContentSize(totalRightColumnSize);\r\n            // this.rightScrollbar.setSize(this._width - regionSize);\r\n            // this.rightScrollbar.setPosition(this.bottomRightCollection.getScrollLeft());\r\n            // this.rightScrollbar.populate();\r\n\r\n            var items = this.scrollBarLayout.attr(\"items\");\r\n            // items[0].top = this._getFreezeHeaderHeight();\r\n            items[0].top = this._height;\r\n            // items[2].top = this._height;\r\n            // items[2].left = regionSize;\r\n            this.scrollBarLayout.attr(\"items\", items);\r\n            this.scrollBarLayout.resize();\r\n        },\r\n\r\n        _populateTable: function () {\r\n            var self = this, o = this.options;\r\n            var regionSize = this.getRegionSize(), totalLeftColumnSize = 0, totalRightColumnSize = 0,\r\n                totalColumnSize = 0,\r\n                summaryColumnSizeArray = [];\r\n            BI.each(o.columnSize, function (i, size) {\r\n                if (o.isNeedFreeze === true && o.freezeCols.includes(i)) {\r\n                    totalLeftColumnSize += size;\r\n                } else {\r\n                    totalRightColumnSize += size;\r\n                }\r\n                totalColumnSize += size;\r\n                if (i === 0) {\r\n                    summaryColumnSizeArray[i] = size;\r\n                } else {\r\n                    summaryColumnSizeArray[i] = summaryColumnSizeArray[i - 1] + size;\r\n                }\r\n            });\r\n\r\n            var otlw = regionSize;\r\n            var otlh = this._getFreezeHeaderHeight();\r\n            var otrw = this._width - regionSize;\r\n            var otrh = this._getFreezeHeaderHeight();\r\n            var oblw = regionSize;\r\n            var oblh = this._height - otlh;\r\n            var obrw = this._width - regionSize;\r\n            var obrh = this._height - otrh;\r\n\r\n            var scrollBarSize = BI.DOM.getScrollWidth();\r\n            var tlw = otlw + scrollBarSize;\r\n            var tlh = otlh + scrollBarSize;\r\n            var trw = otrw + scrollBarSize;\r\n            var trh = otrh + scrollBarSize;\r\n            var blw = oblw + scrollBarSize;\r\n            var blh = oblh + scrollBarSize;\r\n            var brw = obrw + scrollBarSize;\r\n            var brh = obrh + scrollBarSize;\r\n\r\n            var digest = function (el) {\r\n                el.element.css({\r\n                    overflow: \"scroll\",\r\n                    overflowX: \"scroll\",\r\n                    overflowY: \"scroll\"\r\n                });\r\n            };\r\n\r\n            this.topLeft.setWidth(otlw);\r\n            this.topLeft.setHeight(otlh);\r\n            this.topRight.setWidth(otrw);\r\n            this.topRight.setHeight(otrh);\r\n            this.bottomLeft.setWidth(oblw);\r\n            this.bottomLeft.setHeight(oblh);\r\n            this.bottomRight.setWidth(obrw);\r\n            this.bottomRight.setHeight(obrh);\r\n\r\n            this.topLeftCollection.setWidth(tlw);\r\n            this.topLeftCollection.setHeight(tlh);\r\n            this.topRightCollection.setWidth(trw);\r\n            this.topRightCollection.setHeight(trh);\r\n            this.bottomLeftCollection.setWidth(blw);\r\n            this.bottomLeftCollection.setHeight(blh);\r\n            this.bottomRightCollection.setWidth(brw);\r\n            this.bottomRightCollection.setHeight(brh);\r\n\r\n            digest(this.topLeftCollection);\r\n            digest(this.topRightCollection);\r\n            digest(this.bottomLeftCollection);\r\n            // if (o.isNeedFreeze && o.freezeCols.length > 0) {\r\n            digest(this.bottomRightCollection);\r\n            // }\r\n\r\n            var items = this.contextLayout.attr(\"items\");\r\n            items[1].left = regionSize;\r\n            items[2].top = this._getFreezeHeaderHeight();\r\n            items[3].left = regionSize;\r\n            items[3].top = this._getFreezeHeaderHeight();\r\n            this.contextLayout.attr(\"items\", items);\r\n            this.contextLayout.resize();\r\n\r\n            var leftHeader = [], rightHeader = [], leftItems = [], rightItems = [];\r\n            var run = function (positions, items, rendered, firstRowTopLine, firstColumnLeftLine) {\r\n                BI.each(positions, function (i, item) {\r\n                    if (o.customCell) {\r\n                        items[item.row][item.col]._rowIndex = item.row;\r\n                        items[item.row][item.col]._columnIndex = item.col;\r\n                        items[item.row][item.col].firstRowTopLine = firstRowTopLine;\r\n                        items[item.row][item.col].firstColumnLeftLine = firstColumnLeftLine;\r\n                        rendered.push(items[item.row][item.col]);\r\n                        return;\r\n                    }\r\n                    var cell = {\r\n                        type: \"bi.collection_table_cell\",\r\n                        cell: items[item.row][item.col],\r\n                        _rowIndex: item.row,\r\n                        _columnIndex: item.col,\r\n                        firstRowTopLine: firstRowTopLine,\r\n                        firstColumnLeftLine: firstColumnLeftLine\r\n                    };\r\n                    rendered.push(cell);\r\n                });\r\n            };\r\n\r\n            // run(this.topLeftItems, o.header, leftHeader, true, true);\r\n            // run(this.topRightItems, o.header, rightHeader, true, this.topLeftItems.length <= 0);\r\n            // run(this.bottomLeftItems, this._getActualItems(), leftItems, this.topRightItems.length <= 0, true);\r\n            // run(this.bottomRightItems, this._getActualItems(), rightItems, this.topRightItems.length <= 0, this.topLeftItems.length <= 0);\r\n\r\n            // if (o.isNeedFreeze && o.freezeCols.length > 0) {\r\n                \r\n            // }\r\n\r\n            this.topRightCollection.setColumnSize(o.columnSize);\r\n            this.topRightCollection._populate(o.header);\r\n\r\n            this.bottomRightCollection.setColumnSize(o.columnSize);\r\n            this.bottomRightCollection._populate(o.items);\r\n\r\n            if (o.isNeedFreeze && o.freezeCols.length > 0) {\r\n                this.topLeftCollection.setColumnSize(o.columnSize.slice(0, o.freezeCols.length));\r\n                this.topLeftCollection._populate(BI.map(o.header, function (i, rows) {\r\n                    return rows.slice(0, o.freezeCols.length);\r\n                }));\r\n\r\n                this.bottomLeftCollection.setColumnSize(o.columnSize.slice(0, o.freezeCols.length));\r\n                this.bottomLeftCollection._populate(BI.map(o.items, function (i, rows) {\r\n                    return rows.slice(0, o.freezeCols.length);\r\n                }));\r\n            }\r\n        },\r\n\r\n        _digest: function () {\r\n            var o = this.options;\r\n            // var freezeColLength = this._getFreezeColLength();\r\n            // 如果表头位置不够，取消表头冻结\r\n            // if (this._getFreezeHeaderHeight() <= 0) {\r\n            //     this.topLeftItems = [];\r\n            //     this.topRightItems = [];\r\n            //     this.bottomLeftItems = BI.CollectionTable.serialize(this._getActualItems(), 0, freezeColLength, o.rowSize, o.columnSize, o.mergeCols, BI.range(o.header.length), o.mergeRule);\r\n            //     this.bottomRightItems = BI.CollectionTable.serialize(this._getActualItems(), freezeColLength, o.columnSize.length, o.rowSize, o.columnSize, o.mergeCols, BI.range(o.header.length), o.mergeRule);\r\n            // } else {\r\n            // this.topLeftItems = BI.CollectionTable.serialize(o.header, 0, freezeColLength, o.headerRowSize, o.columnSize, o.mergeCols, [], o.mergeRule);\r\n            // this.topRightItems = BI.CollectionTable.serialize(o.header, freezeColLength, o.columnSize.length, o.headerRowSize, o.columnSize, true, [], o.mergeRule);\r\n            // this.bottomLeftItems = BI.CollectionTable.serialize(o.items, 0, freezeColLength, o.rowSize, o.columnSize, o.mergeCols, [], o.mergeRule);\r\n            // this.bottomRightItems = BI.CollectionTable.serialize(o.items, 0, o.columnSize.length, o.rowSize, o.columnSize, o.mergeCols, [], o.mergeRule);\r\n            // }\r\n        },\r\n\r\n        _populate: function () {\r\n            if (this._width <= 0 || this._height <= 0) {\r\n                return;\r\n            }\r\n            if (this._isNeedDigest === true) {\r\n                this._digest();\r\n            }\r\n            this._isNeedDigest = false;\r\n            this._populateTable();\r\n            this._populateScrollbar();\r\n        },\r\n\r\n        getRegionSize: function () {\r\n            var o = this.options;\r\n            var regionSize = o.regionColumnSize[0] || 0;\r\n            if (o.isNeedFreeze === false || o.freezeCols.length === 0) {\r\n                return 0;\r\n            }\r\n            if (!regionSize) {\r\n                BI.each(o.freezeCols, function (i, col) {\r\n                    regionSize += o.columnSize[col];\r\n                });\r\n            }\r\n            return regionSize;\r\n        },\r\n\r\n        setVerticalScroll: function (scrollTop) {\r\n        },\r\n\r\n        setLeftHorizontalScroll: function (scrollLeft) {\r\n        },\r\n\r\n        setRightHorizontalScroll: function (scrollLeft) {\r\n        },\r\n\r\n        getVerticalScroll: function () {\r\n            return this.bottomRightCollection.getScrollTop();\r\n        },\r\n\r\n        getLeftHorizontalScroll: function () {\r\n            return this.bottomLeftCollection.getScrollLeft();\r\n        },\r\n\r\n        getRightHorizontalScroll: function () {\r\n            return this.bottomRightCollection.getScrollLeft();\r\n        },\r\n\r\n        setWidth: function (width) {\r\n            GridTable.superclass.setWidth.apply(this, arguments);\r\n            this._width = this.options.width - BI.GridTableScrollbar.SIZE;\r\n        },\r\n\r\n        setHeight: function (height) {\r\n            GridTable.superclass.setHeight.apply(this, arguments);\r\n            this._height = this.options.height - BI.GridTableScrollbar.SIZE;\r\n        },\r\n\r\n        setColumnSize: function (columnSize) {\r\n            this._isNeedDigest = true;\r\n            this.options.columnSize = columnSize;\r\n            this.topRightCollection.setColumnSize(columnSize);\r\n            this.bottomRightCollection.setColumnSize(columnSize);\r\n        },\r\n\r\n        setRegionColumnSize: function (regionColumnSize) {\r\n            this._isNeedDigest = true;\r\n            this.options.regionColumnSize = regionColumnSize;\r\n            this.topRightCollection.setRegionColumnSize(regionColumnSize);\r\n            this.bottomRightCollection.setRegionColumnSize(regionColumnSize);\r\n        },\r\n\r\n        getColumnSize: function () {\r\n            return this.options.columnSize;\r\n        },\r\n\r\n        getRegionColumnSize: function () {\r\n            return this.options.regionColumnSize;\r\n        },\r\n\r\n        populate: function (items, header) {\r\n            if (items && items !== this.options.items) {\r\n                this._isNeedDigest = true;\r\n                this.options.items = items;\r\n                this._restore();\r\n            }\r\n            if (header && header !== this.options.header) {\r\n                this._isNeedDigest = true;\r\n                this.options.header = header;\r\n                this._restore();\r\n            }\r\n            this._populate();\r\n        },\r\n\r\n        _restore: function () {\r\n            this.topLeftCollection.restore();\r\n            this.topRightCollection.restore();\r\n            this.bottomLeftCollection.restore();\r\n            this.bottomRightCollection.restore();\r\n        },\r\n\r\n        restore: function () {\r\n            this._restore();\r\n        }\r\n    });\r\n    BI.shortcut(\"bi.dynamic_collection_table\", GridTable);\r\n}());\r\n","/**\r\n *\r\n * 表格单元格\r\n *\r\n * Created by GUY on 2016/1/12.\r\n * @class BI.GridTableCell\r\n * @extends BI.Widget\r\n */\r\nBI.GridTableCell = BI.inherit(BI.Widget, {\r\n    _defaultConfig: function () {\r\n        return BI.extend(BI.GridTableCell.superclass._defaultConfig.apply(this, arguments), {\r\n            baseCls: \"bi-grid-table-cell  bi-border-right bi-border-bottom\",\r\n            width: 0,\r\n            height: 0,\r\n            firstRowTopLine: true,\r\n            firstColumnLeftLine: true,\r\n            _rowIndex: 0,\r\n            _columnIndex: 0,\r\n            _left: 0,\r\n            _top: 0,\r\n            cell: {}\r\n        });\r\n    },\r\n\r\n    _init: function () {\r\n        BI.GridTableCell.superclass._init.apply(this, arguments);\r\n        var o = this.options;\r\n        this.cell = BI.createWidget(BI.extend({\r\n            type: \"bi.label\"\r\n        }, o.cell, {\r\n            cls: (o.cell.cls || \"\") + \" grid-table-cell-wrapper\",\r\n            width: o.width - ((o.firstColumnLeftLine && o._columnIndex === 0) ? 1 : 0) - 1,\r\n            height: o.height - ((o.firstRowTopLine && o._rowIndex === 0) ? 1 : 0) - 1\r\n        }));\r\n        BI.createWidget({\r\n            type: \"bi.absolute\",\r\n            cls: (o.firstRowTopLine ? \"bi-grid-table-cell-top-line\" : \"\") + (o.firstColumnLeftLine ? \" bi-grid-table-cell-left-line\" : \"\"),\r\n            element: this,\r\n            items: [{\r\n                el: this.cell,\r\n                left: 0,\r\n                right: 0,\r\n                top: 0,\r\n                bottom: 0\r\n            }]\r\n        });\r\n    },\r\n\r\n    setWidth: function (width) {\r\n        BI.GridTableCell.superclass.setWidth.apply(this, arguments);\r\n        var o = this.options;\r\n        this.cell.setWidth(o.width - ((o.firstColumnLeftLine && o._columnIndex === 0) ? 1 : 0) - 1);\r\n    },\r\n\r\n    setHeight: function (height) {\r\n        BI.GridTableCell.superclass.setHeight.apply(this, arguments);\r\n        var o = this.options;\r\n        this.cell.setHeight(o.height - ((o.firstRowTopLine && o._rowIndex === 0) ? 1 : 0) - 1);\r\n    }\r\n});\r\n\r\nBI.shortcut(\"bi.grid_table_cell\", BI.GridTableCell);\r\n","/**\r\n * GridTable\r\n *\r\n * Created by GUY on 2016/1/12.\r\n * @class BI.GridTable\r\n * @extends BI.Widget\r\n */\r\nBI.GridTable = BI.inherit(BI.Widget, {\r\n    _defaultConfig: function () {\r\n        return BI.extend(BI.GridTable.superclass._defaultConfig.apply(this, arguments), {\r\n            baseCls: \"bi-grid-table\",\r\n            headerRowSize: 25,\r\n            rowSize: 25,\r\n            columnSize: [],\r\n            isNeedFreeze: false,\r\n            freezeCols: [],\r\n            header: [],\r\n            items: [],\r\n            regionColumnSize: [],\r\n            customCell: false // 自定义单元格处理\r\n        });\r\n    },\r\n\r\n    render: function () {\r\n        var self = this, o = this.options;\r\n        this._width = 0;\r\n        this._height = 0;\r\n        var columnLeftWidthGetter = function (index) {\r\n            return o.columnSize[index];\r\n        };\r\n        var columnRightWidthGetter = function (index) {\r\n            return o.columnSize[index + self._getFreezeColLength()];\r\n        };\r\n        this.topLeftGrid = BI.createWidget({\r\n            type: \"bi.grid_view\",\r\n            overflowX: !BI.isFireFox(),\r\n            overflowY: !BI.isFireFox(),\r\n            rowHeightGetter: this._headerRowHeightGetter.bind(this),\r\n            columnWidthGetter: columnLeftWidthGetter\r\n        });\r\n        this.topLeftGrid.on(BI.GridView.EVENT_SCROLL, function (scroll) {\r\n            self.bottomLeftGrid.setScrollLeft(scroll.scrollLeft);\r\n            self._populateScrollbar();\r\n            self.fireEvent(BI.Table.EVENT_TABLE_SCROLL, arguments);\r\n        });\r\n        this.topRightGrid = BI.createWidget({\r\n            type: \"bi.grid_view\",\r\n            overflowX: !BI.isFireFox(),\r\n            overflowY: !BI.isFireFox(),\r\n            rowHeightGetter: this._headerRowHeightGetter.bind(this),\r\n            columnWidthGetter: columnRightWidthGetter\r\n        });\r\n        this.topRightGrid.on(BI.GridView.EVENT_SCROLL, function (scroll) {\r\n            self.bottomRightGrid.setScrollLeft(scroll.scrollLeft);\r\n            self._populateScrollbar();\r\n            self.fireEvent(BI.Table.EVENT_TABLE_SCROLL, arguments);\r\n        });\r\n        this.bottomLeftGrid = BI.createWidget({\r\n            type: \"bi.grid_view\",\r\n            overflowX: !BI.isFireFox(),\r\n            overflowY: !BI.isFireFox(),\r\n            rowHeightGetter: this._rowHeightGetter.bind(this),\r\n            columnWidthGetter: columnLeftWidthGetter\r\n        });\r\n        this.bottomLeftGrid.on(BI.GridView.EVENT_SCROLL, function (scroll) {\r\n            self.bottomRightGrid.setScrollTop(scroll.scrollTop);\r\n            self.topLeftGrid.setScrollLeft(scroll.scrollLeft);\r\n            self._populateScrollbar();\r\n            self.fireEvent(BI.Table.EVENT_TABLE_SCROLL, arguments);\r\n        });\r\n        this.bottomRightGrid = BI.createWidget({\r\n            type: \"bi.grid_view\",\r\n            overflowX: !BI.isFireFox(),\r\n            overflowY: !BI.isFireFox(),\r\n            rowHeightGetter: this._rowHeightGetter.bind(this),\r\n            columnWidthGetter: columnRightWidthGetter\r\n        });\r\n        this.bottomRightGrid.on(BI.GridView.EVENT_SCROLL, function (scroll) {\r\n            self.bottomLeftGrid.setScrollTop(scroll.scrollTop);\r\n            self.topRightGrid.setScrollLeft(scroll.scrollLeft);\r\n            self._populateScrollbar();\r\n            self.fireEvent(BI.Table.EVENT_TABLE_SCROLL, arguments);\r\n        });\r\n        this.topLeft = BI.createWidget({\r\n            type: \"bi.vertical\",\r\n            scrollable: false,\r\n            scrolly: false,\r\n            items: [this.topLeftGrid]\r\n        });\r\n        this.topRight = BI.createWidget({\r\n            type: \"bi.vertical\",\r\n            scrollable: false,\r\n            scrolly: false,\r\n            items: [this.topRightGrid]\r\n        });\r\n        this.bottomLeft = BI.createWidget({\r\n            type: \"bi.vertical\",\r\n            scrollable: false,\r\n            scrolly: false,\r\n            items: [this.bottomLeftGrid]\r\n        });\r\n        this.bottomRight = BI.createWidget({\r\n            type: \"bi.vertical\",\r\n            scrollable: false,\r\n            scrolly: false,\r\n            items: [this.bottomRightGrid]\r\n        });\r\n        this.shadow = BI.createWidget({\r\n            type: \"bi.layout\",\r\n            cls: \"grid-table-shadow\"\r\n        });\r\n        this.contextLayout = BI.createWidget({\r\n            type: \"bi.absolute\",\r\n            element: this,\r\n            items: [{\r\n                el: this.topLeft,\r\n                top: 0,\r\n                left: 0\r\n            }, {\r\n                el: this.topRight,\r\n                top: 0\r\n            }, {\r\n                el: this.bottomLeft,\r\n                left: 0\r\n            }, {\r\n                el: this.bottomRight\r\n            }, {\r\n                el: this.shadow,\r\n                top: 0,\r\n                bottom: 0\r\n            }]\r\n        });\r\n\r\n        this.topScrollbar = BI.createWidget({\r\n            type: \"bi.grid_table_scrollbar\",\r\n            width: BI.GridTableScrollbar.SIZE\r\n        });\r\n        this.topScrollbar.on(BI.GridTableScrollbar.EVENT_SCROLL, function (scrollTop) {\r\n            self.bottomLeftGrid.setScrollTop(scrollTop);\r\n            self.bottomRightGrid.setScrollTop(scrollTop);\r\n            self._populateScrollbar();\r\n            self.fireEvent(BI.Table.EVENT_TABLE_SCROLL, arguments);\r\n        });\r\n        this.leftScrollbar = BI.createWidget({\r\n            type: \"bi.grid_table_horizontal_scrollbar\",\r\n            height: BI.GridTableScrollbar.SIZE\r\n        });\r\n        this.leftScrollbar.on(BI.GridTableHorizontalScrollbar.EVENT_SCROLL, function (scrollLeft) {\r\n            self.topLeftGrid.setScrollLeft(scrollLeft);\r\n            self.bottomLeftGrid.setScrollLeft(scrollLeft);\r\n            self._populateScrollbar();\r\n            self.fireEvent(BI.Table.EVENT_TABLE_SCROLL, arguments);\r\n        });\r\n        this.rightScrollbar = BI.createWidget({\r\n            type: \"bi.grid_table_horizontal_scrollbar\",\r\n            height: BI.GridTableScrollbar.SIZE\r\n        });\r\n        this.rightScrollbar.on(BI.GridTableHorizontalScrollbar.EVENT_SCROLL, function (scrollLeft) {\r\n            self.topRightGrid.setScrollLeft(scrollLeft);\r\n            self.bottomRightGrid.setScrollLeft(scrollLeft);\r\n            self._populateScrollbar();\r\n            self.fireEvent(BI.Table.EVENT_TABLE_SCROLL, arguments);\r\n        });\r\n        this.scrollBarLayout = BI.createWidget({\r\n            type: \"bi.absolute\",\r\n            element: this,\r\n            items: [{\r\n                el: this.topScrollbar,\r\n                right: 0,\r\n                top: 0\r\n            }, {\r\n                el: this.leftScrollbar,\r\n                left: 0\r\n            }, {\r\n                el: this.rightScrollbar\r\n            }]\r\n        });\r\n\r\n        if (!(BI.isChrome() && BI.isWindows() && !BI.isEdge())) {\r\n            BI.createWidget({\r\n                type: \"bi.absolute\",\r\n                element: this,\r\n                items: [{\r\n                    el: {\r\n                        type: \"bi.default\",\r\n                        cls: \"bi-table-fix-scroll\"\r\n                    },\r\n                    top: 0,\r\n                    right: 0,\r\n                    bottom: 0,\r\n                    left: 0\r\n                }]\r\n            });\r\n        }\r\n\r\n        this._width = o.width - BI.GridTableScrollbar.SIZE;\r\n        this._height = o.height - BI.GridTableScrollbar.SIZE;\r\n        this.header = this._getHeader();\r\n        this.items = this._getItems();\r\n        if (o.header.length > 0 || o.items.length > 0) {\r\n            this._populate();\r\n        }\r\n    },\r\n\r\n    _rowHeightGetter: function () {\r\n        return this.options.rowSize;\r\n    },\r\n\r\n    _headerRowHeightGetter: function () {\r\n        return this.options.headerRowSize;\r\n    },\r\n\r\n    _getFreezeColLength: function () {\r\n        var o = this.options;\r\n        return o.isNeedFreeze === true ? BI.clamp(o.freezeCols.length, 0, o.columnSize.length) : 0;\r\n    },\r\n\r\n    _getFreezeHeaderHeight: function () {\r\n        var o = this.options;\r\n        if (o.header.length * o.headerRowSize >= this._height) {\r\n            return 0;\r\n        }\r\n        return o.header.length * o.headerRowSize;\r\n    },\r\n\r\n    _getActualItems: function () {\r\n        var o = this.options;\r\n        if (o.header.length * o.headerRowSize >= this._height) {\r\n            return o.header.concat(o.items);\r\n        }\r\n        return o.items;\r\n    },\r\n\r\n    _getContentHeight: function () {\r\n        return this._getActualItems().length * this.options.rowSize;\r\n    },\r\n\r\n    _getHeader: function () {\r\n        var o = this.options;\r\n        var freezeColLength = this._getFreezeColLength();\r\n        var leftHeader = [], rightHeader = [];\r\n        BI.each(o.header, function (i, cols) {\r\n            leftHeader[i] = [];\r\n            rightHeader[i] = [];\r\n            BI.each(cols, function (j, col) {\r\n                var cell;\r\n                if (o.customCell) {\r\n                    cell = col;\r\n                } else {\r\n                    cell = {\r\n                        type: \"bi.grid_table_cell\",\r\n                        cell: col\r\n                    };\r\n                }\r\n                cell.firstRowTopLine = true;\r\n                if (j === freezeColLength && freezeColLength > 0) {\r\n                    cell.firstColumnLeftLine = false;\r\n                }\r\n                if (j < freezeColLength) {\r\n                    leftHeader[i].push(cell);\r\n                } else {\r\n                    rightHeader[i].push(cell);\r\n                }\r\n            });\r\n        });\r\n        return [leftHeader, rightHeader];\r\n    },\r\n\r\n    _populateScrollbar: function () {\r\n        var o = this.options;\r\n        var regionSize = this.getRegionSize(), totalLeftColumnSize = 0, totalRightColumnSize = 0, totalColumnSize = 0,\r\n            summaryColumnSizeArray = [];\r\n        BI.each(o.columnSize, function (i, size) {\r\n            if (o.isNeedFreeze === true && o.freezeCols.includes(i)) {\r\n                totalLeftColumnSize += size;\r\n            } else {\r\n                totalRightColumnSize += size;\r\n            }\r\n            totalColumnSize += size;\r\n            if (i === 0) {\r\n                summaryColumnSizeArray[i] = size;\r\n            } else {\r\n                summaryColumnSizeArray[i] = summaryColumnSizeArray[i - 1] + size;\r\n            }\r\n        });\r\n        this.topScrollbar.setContentSize(this._getContentHeight());\r\n        var freezeHeaderHeight = this._getFreezeHeaderHeight();\r\n        var topScrollbarSize = this._height - freezeHeaderHeight;\r\n        this.topScrollbar.setSize(topScrollbarSize);\r\n        this.topScrollbar.setPosition(Math.min(this.bottomLeftGrid.getScrollTop(), this.bottomRightGrid.getScrollTop()));\r\n        this.topScrollbar.populate();\r\n\r\n        this.leftScrollbar.setContentSize(totalLeftColumnSize);\r\n        this.leftScrollbar.setSize(regionSize);\r\n        var leftScrollLeft = Math.max(this.bottomLeftGrid.getScrollLeft(), this.topLeftGrid.getScrollLeft());\r\n        this.leftScrollbar.setPosition(leftScrollLeft);\r\n        this.leftScrollbar.populate();\r\n\r\n        this.rightScrollbar.setContentSize(totalRightColumnSize);\r\n        this.rightScrollbar.setSize(this._width - regionSize);\r\n        var rightScrollLeft = Math.max(this.bottomRightGrid.getScrollLeft(), this.topRightGrid.getScrollLeft());\r\n        this.rightScrollbar.setPosition(rightScrollLeft);\r\n        this.rightScrollbar.populate();\r\n\r\n        var items = this.scrollBarLayout.attr(\"items\");\r\n        items[0].top = this._getFreezeHeaderHeight();\r\n        items[1].top = this._height;\r\n        items[2].top = this._height;\r\n        items[2].left = regionSize;\r\n        this.scrollBarLayout.attr(\"items\", items);\r\n        this.scrollBarLayout.resize();\r\n\r\n        var shadowVisible = false;\r\n        if (totalLeftColumnSize > 0 && totalRightColumnSize > 0) {\r\n            shadowVisible = totalLeftColumnSize > regionSize && leftScrollLeft < totalLeftColumnSize - regionSize || rightScrollLeft > 0;\r\n            if (shadowVisible) {\r\n                var firstColumnSize = this.getFirstColumnRowSize();\r\n                var contentHeight = BI.sum(firstColumnSize);\r\n                this.shadow.setHeight(Math.min(this._height, freezeHeaderHeight + contentHeight));\r\n            }\r\n        }\r\n\r\n        this.shadow.setVisible(shadowVisible);\r\n    },\r\n\r\n    _getItems: function () {\r\n        var o = this.options;\r\n        var freezeColLength = this._getFreezeColLength();\r\n        var leftItems = [], rightItems = [];\r\n        var firstRowTopLine = !(o.header && o.header.length > 0);\r\n        BI.each(this._getActualItems(), function (i, cols) {\r\n            leftItems[i] = [];\r\n            rightItems[i] = [];\r\n            BI.each(cols, function (j, col) {\r\n                var cell;\r\n                if (o.customCell) {\r\n                    col && (col.firstRowTopLine = firstRowTopLine);\r\n                    cell = col;\r\n                } else {\r\n                    cell = {\r\n                        type: \"bi.grid_table_cell\",\r\n                        cell: col,\r\n                        firstRowTopLine: firstRowTopLine\r\n                    };\r\n                }\r\n                if (j === freezeColLength && freezeColLength > 0) {\r\n                    cell.firstColumnLeftLine = false;\r\n                }\r\n                if (j < freezeColLength) {\r\n                    leftItems[i].push(cell);\r\n                } else {\r\n                    rightItems[i].push(cell);\r\n                }\r\n            });\r\n        });\r\n        return [leftItems, rightItems];\r\n    },\r\n\r\n    _digest: function () {\r\n        var self = this, o = this.options;\r\n        var freezeColLength = this._getFreezeColLength();\r\n        var totalLeftColumnSize = 0, totalRightColumnSize = 0, totalColumnSize = 0, summaryColumnSizeArray = [];\r\n\r\n        BI.each(o.columnSize, function (i, size) {\r\n            if (o.isNeedFreeze === true && o.freezeCols.includes(i)) {\r\n                totalLeftColumnSize += size;\r\n            } else {\r\n                totalRightColumnSize += size;\r\n            }\r\n            totalColumnSize += size;\r\n            if (i === 0) {\r\n                summaryColumnSizeArray[i] = size;\r\n            } else {\r\n                summaryColumnSizeArray[i] = summaryColumnSizeArray[i - 1] + size;\r\n            }\r\n        });\r\n        this.topLeftGrid.setEstimatedColumnSize(freezeColLength > 0 ? totalLeftColumnSize / freezeColLength : 0);\r\n        this.topLeftGrid.setEstimatedRowSize(o.headerRowSize);\r\n        this.topRightGrid.setEstimatedColumnSize((o.columnSize.length - freezeColLength) > 0 ? (totalRightColumnSize / (o.columnSize.length - freezeColLength)) : 0);\r\n        this.topRightGrid.setEstimatedRowSize(o.headerRowSize);\r\n        this.bottomLeftGrid.setEstimatedColumnSize(freezeColLength > 0 ? totalLeftColumnSize / freezeColLength : 0);\r\n        this.bottomLeftGrid.setEstimatedRowSize(o.rowSize);\r\n        this.bottomRightGrid.setEstimatedColumnSize((o.columnSize.length - freezeColLength) > 0 ? (totalRightColumnSize / (o.columnSize.length - freezeColLength)) : 0);\r\n        this.bottomRightGrid.setEstimatedRowSize(o.rowSize);\r\n\r\n        this.topLeftGrid.setColumnCount(freezeColLength);\r\n        this.topRightGrid.setColumnCount(o.columnSize.length - freezeColLength);\r\n        this.bottomLeftGrid.setColumnCount(freezeColLength);\r\n        this.bottomRightGrid.setColumnCount(o.columnSize.length - freezeColLength);\r\n    },\r\n\r\n    _populateTable: function () {\r\n        var self = this, o = this.options;\r\n        var regionSize = this.getRegionSize();\r\n\r\n        var otlw = regionSize;\r\n        var otlh = this._getFreezeHeaderHeight();\r\n        var otrw = this._width - regionSize;\r\n        var otrh = this._getFreezeHeaderHeight();\r\n        var oblw = regionSize;\r\n        var oblh = this._height - otlh;\r\n        var obrw = this._width - regionSize;\r\n        var obrh = this._height - otrh;\r\n\r\n        var scrollBarSize = BI.isFireFox() ? 0 : BI.DOM.getScrollWidth();\r\n        var tlw = otlw + scrollBarSize;\r\n        var tlh = otlh + scrollBarSize;\r\n        var trw = otrw + scrollBarSize;\r\n        var trh = otrh + scrollBarSize;\r\n        var blw = oblw + scrollBarSize;\r\n        var blh = oblh + scrollBarSize;\r\n        var brw = obrw + scrollBarSize;\r\n        var brh = obrh + scrollBarSize;\r\n\r\n        var digest = function (el) {\r\n            el.element.css({\r\n                overflow: \"scroll\",\r\n                overflowX: \"scroll\",\r\n                overflowY: \"scroll\"\r\n            });\r\n        };\r\n\r\n        this.topLeft.setWidth(otlw);\r\n        this.topLeft.setHeight(otlh);\r\n        this.topRight.setWidth(otrw);\r\n        this.topRight.setHeight(otrh);\r\n        this.bottomLeft.setWidth(oblw);\r\n        this.bottomLeft.setHeight(oblh);\r\n        this.bottomRight.setWidth(obrw);\r\n        this.bottomRight.setHeight(obrh);\r\n\r\n        this.topLeftGrid.setWidth(tlw);\r\n        this.topLeftGrid.setHeight(tlh);\r\n        this.topRightGrid.setWidth(trw);\r\n        this.topRightGrid.setHeight(trh);\r\n        this.bottomLeftGrid.setWidth(blw);\r\n        this.bottomLeftGrid.setHeight(blh);\r\n        this.bottomRightGrid.setWidth(brw);\r\n        this.bottomRightGrid.setHeight(brh);\r\n\r\n        digest(this.topLeftGrid);\r\n        digest(this.topRightGrid);\r\n        digest(this.bottomLeftGrid);\r\n        digest(this.bottomRightGrid);\r\n\r\n        var items = this.contextLayout.attr(\"items\");\r\n        items[1].left = regionSize;\r\n        items[2].top = this._getFreezeHeaderHeight();\r\n        items[3].left = regionSize;\r\n        items[3].top = this._getFreezeHeaderHeight();\r\n        items[4].left = regionSize;\r\n        this.contextLayout.attr(\"items\", items);\r\n        this.contextLayout.resize();\r\n\r\n        var headers = this._getHeader();\r\n        var tableItems = this._getItems(headers);\r\n\r\n        this.topLeftGrid._populate(headers[0]);\r\n        this.topRightGrid._populate(headers[1]);\r\n        this.bottomLeftGrid._populate(tableItems[0]);\r\n        this.bottomRightGrid._populate(tableItems[1]);\r\n    },\r\n\r\n    _syncScroll: function () {\r\n        this.setLeftHorizontalScroll(this.getLeftHorizontalScroll());\r\n        this.setRightHorizontalScroll(this.getRightHorizontalScroll());\r\n        this.setVerticalScroll(this.getVerticalScroll());\r\n    },\r\n\r\n    _populate: function () {\r\n        if (this._width <= 0 || this._height <= 0) {\r\n            return;\r\n        }\r\n        this._digest();\r\n        this._populateTable();\r\n        this._populateScrollbar();\r\n        this._syncScroll();\r\n    },\r\n\r\n    attr: function (key, value) {\r\n        var v = BI.GridTable.superclass.attr.apply(this, arguments);\r\n        if (BI.isNotNull(value)) {\r\n            switch (key) {\r\n                case \"scrollLeft\":\r\n                    this.topRightGrid.attr(key, value);\r\n                    this.bottomRightGrid.attr(key, value);\r\n                    break;\r\n                case \"scrollTop\":\r\n                    this.bottomLeftGrid.attr(key, value);\r\n                    this.bottomRightGrid.attr(key, value);\r\n                    break;\r\n            }\r\n        }\r\n        return v;\r\n    },\r\n\r\n    getRegionSize: function () {\r\n        var o = this.options;\r\n        var regionSize = o.regionColumnSize[0] || 0;\r\n        if (o.isNeedFreeze === false || o.freezeCols.length === 0) {\r\n            return 0;\r\n        }\r\n        if (!regionSize) {\r\n            BI.each(o.freezeCols, function (i, col) {\r\n                regionSize += o.columnSize[col];\r\n            });\r\n        }\r\n        return regionSize;\r\n    },\r\n\r\n    setVerticalScroll: function (scrollTop) {\r\n        this.bottomLeftGrid.setScrollTop(scrollTop);\r\n        this.bottomRightGrid.setScrollTop(scrollTop);\r\n        this._populateScrollbar();\r\n    },\r\n\r\n    setLeftHorizontalScroll: function (scrollLeft) {\r\n        this.topLeftGrid.setScrollLeft(scrollLeft);\r\n        this.bottomLeftGrid.setScrollLeft(scrollLeft);\r\n        this._populateScrollbar();\r\n    },\r\n\r\n    setRightHorizontalScroll: function (scrollLeft) {\r\n        this.topRightGrid.setScrollLeft(scrollLeft);\r\n        this.bottomRightGrid.setScrollLeft(scrollLeft);\r\n        this._populateScrollbar();\r\n    },\r\n\r\n    getVerticalScroll: function () {\r\n        return this.bottomRightGrid.getScrollTop();\r\n    },\r\n\r\n    getLeftHorizontalScroll: function () {\r\n        return this.bottomLeftGrid.getScrollLeft();\r\n    },\r\n\r\n    getRightHorizontalScroll: function () {\r\n        return this.bottomRightGrid.getScrollLeft();\r\n    },\r\n\r\n    getActualRightHorizontalScroll: function() {\r\n        return this.bottomRightGrid.element.scrollLeft();\r\n    },\r\n\r\n    setWidth: function (width) {\r\n        BI.GridTable.superclass.setWidth.apply(this, arguments);\r\n        this._width = this.options.width - BI.GridTableScrollbar.SIZE;\r\n    },\r\n\r\n    setHeight: function (height) {\r\n        BI.GridTable.superclass.setHeight.apply(this, arguments);\r\n        this._height = this.options.height - BI.GridTableScrollbar.SIZE;\r\n    },\r\n\r\n    setColumnSize: function (columnSize) {\r\n        this.options.columnSize = columnSize;\r\n        this._isNeedDigest = true;\r\n    },\r\n\r\n    setRegionColumnSize: function (regionColumnSize) {\r\n        this.options.regionColumnSize = regionColumnSize;\r\n        this._isNeedDigest = true;\r\n    },\r\n\r\n    getColumnSize: function () {\r\n        return this.options.columnSize;\r\n    },\r\n\r\n    getRegionColumnSize: function () {\r\n        return this.options.regionColumnSize;\r\n    },\r\n\r\n    getFirstColumnHeaderRowSize: function () {\r\n        var o = this.options, items = this.options.header;\r\n        return BI.map(items, function () {\r\n            return o.headerRowSize;\r\n        });\r\n    },\r\n\r\n    getFirstColumnRowSize: function () {\r\n        var o = this.options, items = this.options.items;\r\n        return BI.map(items, function () {\r\n            return o.rowSize;\r\n        });\r\n    },\r\n\r\n    populate: function (items, header) {\r\n        var headerChanged = this.options.header !== header;\r\n        var itemsChanged = this.options.items !== items;\r\n        if (header && headerChanged) {\r\n            this.options.header = header;\r\n        }\r\n        if (items && itemsChanged) {\r\n            this.options.items = items;\r\n        }\r\n        if (items && itemsChanged) {\r\n            this.items = this._getItems();\r\n            this._restore();\r\n        }\r\n        if (header && headerChanged) {\r\n            this.header = this._getHeader();\r\n            this._restore();\r\n        }\r\n        this._populate();\r\n    },\r\n\r\n    _restore: function () {\r\n        this.topLeftGrid.restore();\r\n        this.topRightGrid.restore();\r\n        this.bottomLeftGrid.restore();\r\n        this.bottomRightGrid.restore();\r\n    },\r\n\r\n    restore: function () {\r\n        this._restore();\r\n    }\r\n});\r\nBI.shortcut(\"bi.grid_table\", BI.GridTable);\r\n","/**\r\n * QuickGridTable\r\n *\r\n * Created by GUY on 2016/1/12.\r\n * @class BI.QuickGridTable\r\n * @extends BI.GridTable\r\n */\r\nBI.QuickGridTable = BI.inherit(BI.GridTable, {\r\n    _defaultConfig: function () {\r\n        return BI.extend(BI.QuickGridTable.superclass._defaultConfig.apply(this, arguments), {\r\n            extraCls: \"bi-quick-grid-table\"\r\n        });\r\n    },\r\n\r\n    render: function () {\r\n        BI.QuickGridTable.superclass.render.apply(this, arguments);\r\n        var self = this, o = this.options;\r\n        this.topLeftGrid.setOverflowX(false);\r\n        this.topLeftGrid.setOverflowY(false);\r\n        this.topRightGrid.setOverflowX(false);\r\n        this.topRightGrid.setOverflowY(false);\r\n        this.bottomLeftGrid.setOverflowX(false);\r\n        this.bottomLeftGrid.setOverflowY(false);\r\n        this.bottomRightGrid.setOverflowX(false);\r\n        this.bottomRightGrid.setOverflowY(false);\r\n    },\r\n\r\n    mounted: function () {\r\n        // BI.QuickGridTable.superclass.mounted.apply(this, arguments);\r\n        var self = this;\r\n        this._topLeftWheelHandler = new BI.WheelHandler(\r\n            BI.bind(this._onWheelLeft, this),\r\n            BI.bind(this._shouldHandleLeftX, this),\r\n            BI.bind(this._shouldHandleY, this)\r\n        );\r\n        this._topRightWheelHandler = new BI.WheelHandler(\r\n            BI.bind(this._onWheelRight, this),\r\n            BI.bind(this._shouldHandleRightX, this),\r\n            BI.bind(this._shouldHandleY, this)\r\n        );\r\n        this._bottomLeftWheelHandler = new BI.WheelHandler(\r\n            BI.bind(this._onWheelLeft, this),\r\n            BI.bind(this._shouldHandleLeftX, this),\r\n            BI.bind(this._shouldHandleY, this)\r\n        );\r\n        this._bottomRightWheelHandler = new BI.WheelHandler(\r\n            BI.bind(this._onWheelRight, this),\r\n            BI.bind(this._shouldHandleRightX, this),\r\n            BI.bind(this._shouldHandleY, this)\r\n        );\r\n        this.topLeftGrid.element.mousewheel(function (e) {\r\n            self._topLeftWheelHandler.onWheel(e.originalEvent);\r\n        });\r\n        this.topRightGrid.element.mousewheel(function (e) {\r\n            self._topRightWheelHandler.onWheel(e.originalEvent);\r\n        });\r\n        this.bottomLeftGrid.element.mousewheel(function (e) {\r\n            self._bottomLeftWheelHandler.onWheel(e.originalEvent);\r\n        });\r\n        this.bottomRightGrid.element.mousewheel(function (e) {\r\n            self._bottomRightWheelHandler.onWheel(e.originalEvent);\r\n        });\r\n    },\r\n\r\n    _shouldHandleLeftX: function (delta) {\r\n        if (delta > 0) {\r\n            return this.bottomLeftGrid.getScrollLeft() < this.bottomLeftGrid.getMaxScrollLeft();\r\n        }\r\n        return this.bottomLeftGrid.getScrollLeft() > 0;\r\n\r\n    },\r\n\r\n    _shouldHandleRightX: function (delta) {\r\n        if (delta > 0) {\r\n            return this.bottomRightGrid.getScrollLeft() < this.bottomRightGrid.getMaxScrollLeft();\r\n        }\r\n        return this.bottomRightGrid.getScrollLeft() > 0;\r\n\r\n    },\r\n\r\n    _shouldHandleY: function (delta) {\r\n        if (delta > 0) {\r\n            return this.bottomRightGrid.getScrollTop() < this.bottomRightGrid.getMaxScrollTop();\r\n        }\r\n        return this.bottomRightGrid.getScrollTop() > 0;\r\n\r\n    },\r\n\r\n    _onWheelLeft: function (deltaX, deltaY) {\r\n        var self = this;\r\n        var scrollTop = this.bottomLeftGrid.getScrollTop();\r\n        var scrollLeft = this.bottomLeftGrid.getScrollLeft();\r\n        if (Math.abs(deltaY) > Math.abs(deltaX)) {\r\n            deltaX = 0;\r\n        } else {\r\n            deltaY = 0;\r\n        }\r\n        scrollTop += deltaY;\r\n        scrollLeft += deltaX;\r\n        this.bottomLeftGrid.setScrollTop(scrollTop);\r\n        this.bottomRightGrid.setScrollTop(scrollTop);\r\n        this.topLeftGrid.setScrollLeft(scrollLeft);\r\n        this.bottomLeftGrid.setScrollLeft(scrollLeft);\r\n        self._populateScrollbar();\r\n        this.fireEvent(BI.Table.EVENT_TABLE_SCROLL, arguments);\r\n    },\r\n\r\n    _onWheelRight: function (deltaX, deltaY) {\r\n        var self = this;\r\n        var scrollTop = this.bottomRightGrid.getScrollTop();\r\n        var scrollLeft = this.bottomRightGrid.getScrollLeft();\r\n        if (Math.abs(deltaY) > Math.abs(deltaX)) {\r\n            deltaX = 0;\r\n        } else {\r\n            deltaY = 0;\r\n        }\r\n        scrollTop += deltaY;\r\n        scrollLeft += deltaX;\r\n        this.bottomLeftGrid.setScrollTop(scrollTop);\r\n        this.bottomRightGrid.setScrollTop(scrollTop);\r\n        this.topRightGrid.setScrollLeft(scrollLeft);\r\n        this.bottomRightGrid.setScrollLeft(scrollLeft);\r\n        self._populateScrollbar();\r\n        this.fireEvent(BI.Table.EVENT_TABLE_SCROLL, arguments);\r\n    },\r\n\r\n    _populateTable: function () {\r\n        var self = this, o = this.options;\r\n        var regionSize = this.getRegionSize(), totalLeftColumnSize = 0, totalRightColumnSize = 0, totalColumnSize = 0,\r\n            summaryColumnSizeArray = [];\r\n        var freezeColLength = this._getFreezeColLength();\r\n        BI.each(o.columnSize, function (i, size) {\r\n            if (o.isNeedFreeze === true && o.freezeCols.includes(i)) {\r\n                totalLeftColumnSize += size;\r\n            } else {\r\n                totalRightColumnSize += size;\r\n            }\r\n            totalColumnSize += size;\r\n            if (i === 0) {\r\n                summaryColumnSizeArray[i] = size;\r\n            } else {\r\n                summaryColumnSizeArray[i] = summaryColumnSizeArray[i - 1] + size;\r\n            }\r\n        });\r\n\r\n        var otlw = regionSize;\r\n        var otlh = this._getFreezeHeaderHeight();\r\n        var otrw = this._width - regionSize;\r\n        var otrh = this._getFreezeHeaderHeight();\r\n        var oblw = regionSize;\r\n        var oblh = this._height - otlh;\r\n        var obrw = this._width - regionSize;\r\n        var obrh = this._height - otrh;\r\n\r\n        this.topLeft.setWidth(otlw);\r\n        this.topLeft.setHeight(otlh);\r\n        this.topRight.setWidth(otrw);\r\n        this.topRight.setHeight(otrh);\r\n        this.bottomLeft.setWidth(oblw);\r\n        this.bottomLeft.setHeight(oblh);\r\n        this.bottomRight.setWidth(obrw);\r\n        this.bottomRight.setHeight(obrh);\r\n\r\n        this.topLeftGrid.setWidth(otlw);\r\n        this.topLeftGrid.setHeight(otlh);\r\n        this.topRightGrid.setWidth(otrw);\r\n        this.topRightGrid.setHeight(otrh);\r\n        this.bottomLeftGrid.setWidth(oblw);\r\n        this.bottomLeftGrid.setHeight(oblh);\r\n        this.bottomRightGrid.setWidth(obrw);\r\n        this.bottomRightGrid.setHeight(obrh);\r\n\r\n        this.topLeftGrid.setEstimatedColumnSize(freezeColLength > 0 ? totalLeftColumnSize / freezeColLength : 0);\r\n        this.topLeftGrid.setEstimatedRowSize(o.headerRowSize);\r\n        this.topRightGrid.setEstimatedColumnSize((o.columnSize.length - freezeColLength) > 0 ? (totalRightColumnSize / (o.columnSize.length - freezeColLength)) : 0);\r\n        this.topRightGrid.setEstimatedRowSize(o.headerRowSize);\r\n        this.bottomLeftGrid.setEstimatedColumnSize(freezeColLength > 0 ? totalLeftColumnSize / freezeColLength : 0);\r\n        this.bottomLeftGrid.setEstimatedRowSize(o.rowSize);\r\n        this.bottomRightGrid.setEstimatedColumnSize((o.columnSize.length - freezeColLength) > 0 ? (totalRightColumnSize / (o.columnSize.length - freezeColLength)) : 0);\r\n        this.bottomRightGrid.setEstimatedRowSize(o.rowSize);\r\n\r\n        this.topLeftGrid.setColumnCount(freezeColLength);\r\n        this.topRightGrid.setColumnCount(o.columnSize.length - freezeColLength);\r\n        this.bottomLeftGrid.setColumnCount(freezeColLength);\r\n        this.bottomRightGrid.setColumnCount(o.columnSize.length - freezeColLength);\r\n\r\n        var items = this.contextLayout.attr(\"items\");\r\n        items[1].left = regionSize;\r\n        items[2].top = this._getFreezeHeaderHeight();\r\n        items[3].left = regionSize;\r\n        items[3].top = this._getFreezeHeaderHeight();\r\n        items[4].left = regionSize;\r\n        this.contextLayout.attr(\"items\", items);\r\n        this.contextLayout.resize();\r\n\r\n        var leftHeader = [], rightHeader = [], leftItems = [], rightItems = [];\r\n        BI.each(o.header, function (i, cols) {\r\n            leftHeader[i] = [];\r\n            rightHeader[i] = [];\r\n            BI.each(cols, function (j, col) {\r\n                var cell;\r\n                if (o.customCell) {\r\n                    cell = col;\r\n                } else {\r\n                    cell = {\r\n                        type: \"bi.grid_table_cell\",\r\n                        cell: col,\r\n                    };\r\n                }\r\n                cell.firstRowTopLine = true;\r\n                if (j === freezeColLength && freezeColLength > 0) {\r\n                    cell.firstColumnLeftLine = false;\r\n                }\r\n                if (j < freezeColLength) {\r\n                    leftHeader[i].push(cell);\r\n                } else {\r\n                    rightHeader[i].push(cell);\r\n                }\r\n            });\r\n        });\r\n        var firstRowTopLine = !(o.header && o.header.length > 0);\r\n        BI.each(this._getActualItems(), function (i, cols) {\r\n            leftItems[i] = [];\r\n            rightItems[i] = [];\r\n            BI.each(cols, function (j, col) {\r\n                var cell;\r\n                if (o.customCell) {\r\n                    col && (col.firstRowTopLine = firstRowTopLine);\r\n                    cell = col;\r\n                } else {\r\n                    cell = {\r\n                        type: \"bi.grid_table_cell\",\r\n                        cell: col,\r\n                        firstRowTopLine: firstRowTopLine\r\n                    };\r\n                }\r\n                if (j < freezeColLength) {\r\n                    leftItems[i].push(cell);\r\n                } else {\r\n                    rightItems[i].push(cell);\r\n                }\r\n            });\r\n        });\r\n\r\n        this.topLeftGrid._populate(leftHeader);\r\n        this.topRightGrid._populate(rightHeader);\r\n        this.bottomLeftGrid._populate(leftItems);\r\n        this.bottomRightGrid._populate(rightItems);\r\n    }\r\n});\r\nBI.shortcut(\"bi.quick_grid_table\", BI.QuickGridTable);\r\n","/**\r\n *\r\n * 表格滚动条\r\n *\r\n * Created by GUY on 2016/1/12.\r\n * @class BI.GridTableScrollbar\r\n * @extends BI.Widget\r\n */\r\nBI.GridTableScrollbar = BI.inherit(BI.Widget, {\r\n    _const: {\r\n        FACE_MARGIN: 4,\r\n        FACE_MARGIN_2: 4 * 2,\r\n        FACE_SIZE_MIN: 30,\r\n        KEYBOARD_SCROLL_AMOUNT: 40\r\n    },\r\n    _defaultConfig: function () {\r\n        return BI.extend(BI.GridTableScrollbar.superclass._defaultConfig.apply(this, arguments), {\r\n            baseCls: \"scrollbar-layout-main public-scrollbar-main\",\r\n            attributes: {\r\n                tabIndex: 0\r\n            },\r\n            contentSize: 0,\r\n            defaultPosition: 0,\r\n            isOpaque: false,\r\n            orientation: \"vertical\",\r\n            position: 0,\r\n            size: 0\r\n        });\r\n    },\r\n\r\n    render: function () {\r\n        var self = this, o = this.options;\r\n        this.focused = false;\r\n        this.isDragging = false;\r\n        this.face = BI.createWidget({\r\n            type: \"bi.layout\",\r\n            cls: \"scrollbar-layout-face public-scrollbar-face \"\r\n            + (this._isHorizontal() ? \"scrollbar-layout-face-horizontal\" : \"scrollbar-layout-face-vertical\")\r\n        });\r\n        this.contextLayout = BI.createWidget({\r\n            type: \"bi.absolute\",\r\n            element: this,\r\n            items: [{\r\n                el: this.face,\r\n                left: 0,\r\n                top: 0\r\n            }]\r\n        });\r\n    },\r\n\r\n    mounted: function () {\r\n        var self = this, o = this.options;\r\n        var onWheel = o.orientation === \"horizontal\" ? this._onWheelX : this._onWheelY;\r\n        this._wheelHandler = new BI.WheelHandler(\r\n            BI.bind(onWheel, this),\r\n            BI.bind(this._shouldHandleX, this),\r\n            BI.bind(this._shouldHandleY, this)\r\n        );\r\n        this._mouseMoveTracker = new BI.MouseMoveTracker(\r\n            BI.bind(this._onMouseMove, this),\r\n            BI.bind(this._onMouseMoveEnd, this),\r\n            _global.document\r\n        );\r\n        this.element.on(\"mousedown\", BI.bind(this._onMouseDown, this));\r\n        this.element.on(\"mousewheel\", function (e) {\r\n            self._wheelHandler.onWheel(e.originalEvent);\r\n        });\r\n        this.element.on(\"keydown\", BI.bind(this._onKeyDown, this));\r\n        this.element.on(\"focus\", function () {\r\n            self.focused = true;\r\n            self._populate();\r\n        });\r\n        this.element.on(\"blur\", function () {\r\n            self.focused = false;\r\n            self._populate();\r\n        });\r\n        if (this._isHorizontal()) {\r\n            this.element.addClass(\"scrollbar-layout-main-horizontal\");\r\n        } else {\r\n            this.element.addClass(\"scrollbar-layout-main-vertical\");\r\n        }\r\n        this._populate();\r\n    },\r\n\r\n    _isHorizontal: function () {\r\n        return this.options.orientation === \"horizontal\";\r\n    },\r\n\r\n    _getScale: function () {\r\n        var o = this.options;\r\n        var scale = o.size / o.contentSize;\r\n        var faceSize = o.size * scale;\r\n\r\n        if (faceSize < this._const.FACE_SIZE_MIN) {\r\n            scale = (o.size - this._const.FACE_SIZE_MIN) / (o.contentSize - o.size);\r\n        }\r\n        return scale;\r\n    },\r\n\r\n    _getFaceSize: function () {\r\n        var o = this.options;\r\n        var scale = o.size / o.contentSize;\r\n        var faceSize = o.size * scale;\r\n\r\n        if (faceSize < this._const.FACE_SIZE_MIN) {\r\n            faceSize = this._const.FACE_SIZE_MIN;\r\n        }\r\n        return faceSize;\r\n    },\r\n\r\n    _shouldHandleX: function (delta) {\r\n        return this.options.orientation === \"horizontal\" ?\r\n            this._shouldHandleChange(delta) :\r\n            false;\r\n    },\r\n\r\n    _shouldHandleY: function (delta) {\r\n        return this.options.orientation !== \"horizontal\" ?\r\n            this._shouldHandleChange(delta) :\r\n            false;\r\n    },\r\n\r\n    _shouldHandleChange: function (delta) {\r\n        return this.options.position + delta !== this.options.position;\r\n    },\r\n\r\n    _onWheelY: function (deltaX, deltaY) {\r\n        this._onWheel(deltaY);\r\n    },\r\n\r\n    _onWheelX: function (deltaX, deltaY) {\r\n        this._onWheel(deltaX);\r\n    },\r\n\r\n    _onWheel: function (delta) {\r\n        var maxPosition = this.options.contentSize - this.options.size;\r\n        this.options.position += delta;\r\n        if (this.options.position < 0) {\r\n            this.options.position = 0;\r\n        } else if (this.options.position > maxPosition) {\r\n            this.options.position = maxPosition;\r\n        }\r\n        this._populate();\r\n        this.fireEvent(BI.GridTableScrollbar.EVENT_SCROLL, this.options.position);\r\n    },\r\n\r\n    _onMouseDown: function (e) {\r\n        if (e.target !== this.face.element[0]) {\r\n            var position = this._isHorizontal() ? e.offsetX : e.offsetY;\r\n            position /= this._getScale();\r\n            this.options.position = BI.clamp(position - (this._getFaceSize() * 0.5 / this._getScale()), 0, this.options.contentSize - this.options.size);\r\n            this._populate();\r\n            this.fireEvent(BI.GridTableScrollbar.EVENT_SCROLL, this.options.position);\r\n        } else {\r\n            this._mouseMoveTracker.captureMouseMoves(e);\r\n        }\r\n        try {\r\n            this.element[0].focus();\r\n        } catch (e) {\r\n\r\n        }\r\n    },\r\n\r\n    _onMouseMove: function (deltaX, deltaY) {\r\n        var delta = this._isHorizontal() ? deltaX : deltaY;\r\n        delta /= this._getScale();\r\n        this.options.position = BI.clamp(this.options.position + delta, 0, this.options.contentSize - this.options.size);\r\n        this.isDragging = this._mouseMoveTracker.isDragging();\r\n        this._populate();\r\n        this.fireEvent(BI.GridTableScrollbar.EVENT_SCROLL, this.options.position);\r\n    },\r\n\r\n    _onMouseMoveEnd: function (event) {\r\n        this._mouseMoveTracker.releaseMouseMoves();\r\n        if (this.isDragging === true) {\r\n            this.isDragging = false;\r\n            this._populate();\r\n        }\r\n    },\r\n\r\n    _onKeyDown: function (event) {\r\n        var Keys = {\r\n            BACKSPACE: 8,\r\n            TAB: 9,\r\n            RETURN: 13,\r\n            ALT: 18,\r\n            ESC: 27,\r\n            SPACE: 32,\r\n            PAGE_UP: 33,\r\n            PAGE_DOWN: 34,\r\n            END: 35,\r\n            HOME: 36,\r\n            LEFT: 37,\r\n            UP: 38,\r\n            RIGHT: 39,\r\n            DOWN: 40,\r\n            DELETE: 46,\r\n            COMMA: 188,\r\n            PERIOD: 190,\r\n            A: 65,\r\n            Z: 90,\r\n            ZERO: 48,\r\n            NUMPAD_0: 96,\r\n            NUMPAD_9: 105\r\n        };\r\n        var keyCode = event.keyCode;\r\n\r\n        if (keyCode === Keys.TAB) {\r\n            return;\r\n        }\r\n\r\n        var distance = 40;\r\n        var direction = 0;\r\n\r\n        if (this._isHorizontal()) {\r\n            switch (keyCode) {\r\n                case Keys.HOME:\r\n                    direction = -1;\r\n                    distance = this.options.contentSize;\r\n                    break;\r\n\r\n                case Keys.LEFT:\r\n                    direction = -1;\r\n                    break;\r\n\r\n                case Keys.RIGHT:\r\n                    direction = 1;\r\n                    break;\r\n\r\n                default:\r\n                    return;\r\n            }\r\n        }\r\n\r\n        if (!this._isHorizontal()) {\r\n            switch (keyCode) {\r\n                case Keys.SPACE:\r\n                    if (event.shiftKey) {\r\n                        direction = -1;\r\n                    } else {\r\n                        direction = 1;\r\n                    }\r\n                    break;\r\n\r\n                case Keys.HOME:\r\n                    direction = -1;\r\n                    distance = this.options.contentSize;\r\n                    break;\r\n\r\n                case Keys.UP:\r\n                    direction = -1;\r\n                    break;\r\n\r\n                case Keys.DOWN:\r\n                    direction = 1;\r\n                    break;\r\n\r\n                case Keys.PAGE_UP:\r\n                    direction = -1;\r\n                    distance = this.options.size;\r\n                    break;\r\n\r\n                case Keys.PAGE_DOWN:\r\n                    direction = 1;\r\n                    distance = this.options.size;\r\n                    break;\r\n\r\n                default:\r\n                    return;\r\n            }\r\n        }\r\n\r\n        this.options.position = BI.clamp(this.options.position + (distance * direction), 0, this.options.contentSize - this.options.size);\r\n        event.preventDefault();\r\n        this._populate();\r\n        this.fireEvent(BI.GridTableScrollbar.EVENT_SCROLL, this.options.position);\r\n    },\r\n\r\n    _populate: function () {\r\n        var self = this, o = this.options;\r\n        if (o.size < 1 || o.contentSize <= o.size) {\r\n            this.setVisible(false);\r\n            return;\r\n        }\r\n        this.setVisible(true);\r\n\r\n        var size = o.size;\r\n        var isHorizontal = this._isHorizontal();\r\n        var isActive = this.focused || this.isDragging;\r\n\r\n        var faceSize = this._getFaceSize();\r\n        var isOpaque = o.isOpaque;\r\n        this.element[isOpaque === true ? \"addClass\" : \"removeClass\"](\"public-scrollbar-main-opaque\");\r\n        this.element[isActive === true ? \"addClass\" : \"removeClass\"](\"public-scrollbar-main-active\");\r\n\r\n        this.face.element[isActive === true ? \"addClass\" : \"removeClass\"](\"public-scrollbar-face-active\");\r\n\r\n        var position = o.position * this._getScale() + this._const.FACE_MARGIN;\r\n\r\n        var items = this.contextLayout.attr(\"items\");\r\n        if (isHorizontal) {\r\n            this.setWidth(size);\r\n            this.face.setWidth(faceSize - this._const.FACE_MARGIN_2);\r\n            items[0].left = position;\r\n            items[0].top = 0;\r\n        } else {\r\n            this.setHeight(size);\r\n            this.face.setHeight(faceSize - this._const.FACE_MARGIN_2);\r\n            items[0].left = 0;\r\n            items[0].top = position;\r\n        }\r\n        this.contextLayout.attr(\"items\", items);\r\n        this.contextLayout.resize();\r\n    },\r\n\r\n    setContentSize: function (contentSize) {\r\n        this.options.contentSize = contentSize;\r\n    },\r\n\r\n    setPosition: function (position) {\r\n        this.options.position = position;\r\n    },\r\n\r\n    setSize: function (size) {\r\n        this.options.size = size;\r\n    },\r\n\r\n    populate: function () {\r\n        this._populate();\r\n    }\r\n});\r\nBI.GridTableScrollbar.SIZE = 10;\r\nBI.GridTableScrollbar.EVENT_SCROLL = \"EVENT_SCROLL\";\r\nBI.shortcut(\"bi.grid_table_scrollbar\", BI.GridTableScrollbar);\r\n\r\n\r\nBI.GridTableHorizontalScrollbar = BI.inherit(BI.Widget, {\r\n    _const: {\r\n        FACE_MARGIN: 4,\r\n        FACE_MARGIN_2: 4 * 2,\r\n        FACE_SIZE_MIN: 30,\r\n        KEYBOARD_SCROLL_AMOUNT: 40\r\n    },\r\n    _defaultConfig: function () {\r\n        return BI.extend(BI.GridTableHorizontalScrollbar.superclass._defaultConfig.apply(this, arguments), {\r\n            attributes: {\r\n                tabIndex: 0\r\n            },\r\n            contentSize: 0,\r\n            position: 0,\r\n            size: 0\r\n        });\r\n    },\r\n\r\n    _init: function () {\r\n        BI.GridTableHorizontalScrollbar.superclass._init.apply(this, arguments);\r\n        var self = this, o = this.options;\r\n        this.scrollbar = BI.createWidget({\r\n            type: \"bi.grid_table_scrollbar\",\r\n            orientation: \"horizontal\",\r\n            isOpaque: true,\r\n            position: o.position,\r\n            contentSize: o.contentSize,\r\n            size: o.size\r\n        });\r\n        this.scrollbar.on(BI.GridTableScrollbar.EVENT_SCROLL, function () {\r\n            self.fireEvent(BI.GridTableHorizontalScrollbar.EVENT_SCROLL, arguments);\r\n        });\r\n        BI.createWidget({\r\n            type: \"bi.absolute\",\r\n            cls: \"horizontal-scrollbar\",\r\n            element: this,\r\n            width: o.size,\r\n            height: BI.GridTableScrollbar.SIZE,\r\n            items: [{\r\n                el: {\r\n                    type: \"bi.absolute\",\r\n                    scrollable: false,\r\n                    height: BI.GridTableScrollbar.SIZE,\r\n                    items: [{\r\n                        el: this.scrollbar,\r\n                        left: 0,\r\n                        top: 0\r\n                    }]\r\n                },\r\n                top: 0,\r\n                left: 0,\r\n                right: 0\r\n            }]\r\n        });\r\n    },\r\n\r\n    setContentSize: function (contentSize) {\r\n        this.options.contentSize = contentSize;\r\n        this.scrollbar.setContentSize(contentSize);\r\n    },\r\n\r\n    setPosition: function (position) {\r\n        this.options.position = position;\r\n        this.scrollbar.setPosition(position);\r\n    },\r\n\r\n    setSize: function (size) {\r\n        this.setWidth(size);\r\n        this.options.size = size;\r\n        this.scrollbar.setSize(size);\r\n    },\r\n\r\n    populate: function () {\r\n        this.scrollbar.populate();\r\n        var o = this.options;\r\n        if (o.size < 1 || o.contentSize <= o.size) {\r\n            this.setVisible(false);\r\n            return;\r\n        }\r\n        this.setVisible(true);\r\n    }\r\n});\r\nBI.GridTableHorizontalScrollbar.EVENT_SCROLL = \"EVENT_SCROLL\";\r\nBI.shortcut(\"bi.grid_table_horizontal_scrollbar\", BI.GridTableHorizontalScrollbar);","/**\r\n * 行高自动算的表格\r\n *\r\n * Created by GUY on 2016/1/12.\r\n * @class BI.AutoHeightGridTable\r\n * @extends BI.Widget\r\n */\r\n!(function () {\r\n    var getTextLines = function (text, fontSize, cellWidth, maxLines) {\r\n        var width = 0;\r\n        var lines = 1;\r\n        var charWidth = 0;\r\n        var widths = BI.Constants.getConstant(\"bi.constant.char.widths\");\r\n        for (var i = 0, len = text.length; i < len; i++) {\r\n            var char = text.charCodeAt(i);\r\n            // 回车和换行\r\n            if (char === 13 || char === 10) {\r\n                width = 0;\r\n                lines++;\r\n                continue;\r\n            }\r\n            if (char >= 32 && char <= 126) {\r\n                charWidth = widths[char] * fontSize;\r\n            } else {\r\n                charWidth = fontSize;\r\n            }\r\n            width += charWidth;\r\n            if (width > cellWidth) {\r\n                width = charWidth;\r\n                lines++;\r\n            }\r\n            if (lines === maxLines) {\r\n                break;\r\n            }\r\n        }\r\n        return lines;\r\n    };\r\n    var getCellRowHeight = function (text, fontSize, width, lineHeight, rowGap, rowHeight, maxHeight) {\r\n        var maxLines = Math.ceil((maxHeight - rowGap) / lineHeight);\r\n        var lines = getTextLines(text || \"\", fontSize, width, maxLines);\r\n        return Math.min(Math.max(lines * lineHeight + rowGap, rowHeight), maxHeight);\r\n    };\r\n    BI.AutoHeightGridTable = BI.inherit(BI.GridTable, {\r\n        _defaultConfig: function () {\r\n            return BI.extend(BI.AutoHeightGridTable.superclass._defaultConfig.apply(this, arguments), {\r\n                baseCls: \"bi-grid-table bi-grid-auto-height-table\",\r\n                isAutoHeight: true,\r\n                isHeaderAutoHeight: true,\r\n\r\n                fontSize: 12,\r\n                fontLineHeight: 14,\r\n                columnGaps: [],\r\n                rowGap: 1,\r\n\r\n                headerFontSize: 12,\r\n                headerFontLineHeight: 14,\r\n                headerColumnGaps: [],\r\n                headerRowGap: 1,\r\n\r\n                rowSize: 0, // 在这个组件里rowSize表示最小高\r\n                headerRowSize: 0, // 在这个组件里rowSize表示最小高\r\n\r\n                maxRowSize: 400\r\n            });\r\n        },\r\n\r\n        _getFreezeHeaderHeight: function () {\r\n            var o = this.options;\r\n            if (!o.isHeaderAutoHeight) {\r\n                return BI.AutoHeightGridTable.superclass._getFreezeHeaderHeight.call(this);\r\n            }\r\n            if (this.headerIntervalTree) {\r\n                var allHeaderHeight = this.headerIntervalTree.sumUntil(o.header.length);\r\n                if (allHeaderHeight >= this._height) {\r\n                    return 0;\r\n                }\r\n                return allHeaderHeight;\r\n            }\r\n            return 0;\r\n        },\r\n\r\n        _getActualItems: function () {\r\n            var o = this.options;\r\n            if (!o.isHeaderAutoHeight) {\r\n                return BI.AutoHeightGridTable.superclass._getActualItems.call(this);\r\n            }\r\n            if (this.headerIntervalTree) {\r\n                var allHeaderHeight = this.headerIntervalTree.sumUntil(o.header.length);\r\n                if (allHeaderHeight >= this._height) {\r\n                    return o.header.concat(o.items);\r\n                }\r\n                return o.items;\r\n            }\r\n            return o.items;\r\n        },\r\n\r\n        _getContentHeight: function () {\r\n            var o = this.options;\r\n            if (!o.isAutoHeight && !o.isHeaderAutoHeight) {\r\n                return BI.AutoHeightGridTable.superclass._getContentHeight.call(this);\r\n            }\r\n            if (!o.isHeaderAutoHeight) {\r\n                var allHeaderHeight = this._getFreezeHeaderHeight();\r\n                if (allHeaderHeight <= 0) {\r\n                    return o.header.length * o.headerRowSize + (this.intervalTree ? this.intervalTree.sumUntil(o.items.length) : 0);\r\n                } else {\r\n                    return this.intervalTree ? this.intervalTree.sumUntil(o.items.length) : 0;\r\n                }\r\n            }\r\n            if (!o.isAutoHeight) {\r\n                var allHeaderHeight = this.headerIntervalTree ? this.headerIntervalTree.sumUntil(o.header.length) : 0;\r\n                if (allHeaderHeight >= this._height) {\r\n                    return allHeaderHeight + o.items.length * o.rowSize;\r\n                } else {\r\n                    return o.items.length * o.rowSize;\r\n                }\r\n            }\r\n            if (this.headerIntervalTree) {\r\n                var allHeaderHeight = this.headerIntervalTree.sumUntil(o.header.length);\r\n                if (allHeaderHeight >= this._height) {\r\n                    return allHeaderHeight + this.intervalTree ? this.intervalTree.sumUntil(o.items.length) : 0;\r\n                } else {\r\n                    return this.intervalTree ? this.intervalTree.sumUntil(o.items.length) : 0;\r\n                }\r\n            }\r\n            return 0;\r\n        },\r\n\r\n        _getHeaderContentHeight: function () {\r\n            var o = this.options;\r\n            if (!o.isHeaderAutoHeight) {\r\n                return o.header.length * o.headerRowSize;\r\n            }\r\n            if (this.headerIntervalTree) {\r\n                return this.headerIntervalTree.sumUntil(o.header.length);\r\n            }\r\n            return 0;\r\n        },\r\n\r\n        _getOneRowHeight: function (index) {\r\n            var o = this.options;\r\n            var columns = this.options.items[index];\r\n            var maxHeight = 0;\r\n            var freezeColLength = this._getFreezeColLength();\r\n            for (var i = 0, len = columns.length; i < len; i++) {\r\n                var column = columns[i];\r\n                var columnSize = o.columnSize[i] - (o.columnGaps[i] || 0) -\r\n                    ((BI.isFunction(column.columnGap) ? column.columnGap() : column.columnGap) || 0) -\r\n                    (i === 0 || i === freezeColLength ? 2 : 1);\r\n                maxHeight = Math.max(maxHeight, getCellRowHeight(column.text, o.fontSize, columnSize, o.fontLineHeight, o.rowGap, o.rowSize, o.maxRowSize));\r\n                if (maxHeight >= o.maxRowSize) {\r\n                    return o.maxRowSize;\r\n                }\r\n            }\r\n            return maxHeight;\r\n        },\r\n\r\n        _getOneHeaderRowHeight: function (index) {\r\n            var o = this.options;\r\n            var columns = this.options.header[index];\r\n            var maxHeight = 0;\r\n            var freezeColLength = this._getFreezeColLength();\r\n            for (var i = 0, len = columns.length; i < len; i++) {\r\n                var column = columns[i];\r\n                var columnSize = o.columnSize[i] - (o.columnGaps[i] || 0) -\r\n                    ((column.cell ? (BI.isFunction(column.cell.columnGap) ? column.cell.columnGap() : column.cell.columnGap) : column.columnGap) || 0) -\r\n                    (i === 0 || i === freezeColLength ? 2 : 1);\r\n                maxHeight = Math.max(maxHeight, getCellRowHeight(column.cell ? column.cell.text : column.text, o.headerFontSize, columnSize, o.headerFontLineHeight, o.headerRowGap, o.headerRowSize, o.maxRowSize));\r\n                if (maxHeight >= o.maxRowSize) {\r\n                    return o.maxRowSize;\r\n                }\r\n            }\r\n            return maxHeight;\r\n        },\r\n\r\n        _getActualRowHeights: function () {\r\n            var self = this, o = this.options;\r\n            var items = this.options.items;\r\n            // logn复杂度算线段树长\r\n            this.intervalTree = BI.PrefixIntervalTree.empty(o.items.length);\r\n            BI.each(items, function (i, row) {\r\n                self.intervalTree.set(i, self._getOneRowHeight(i));\r\n            });\r\n            return this.intervalTree;\r\n        },\r\n\r\n        _getActualHeaderRowHeights: function () {\r\n            var self = this, o = this.options;\r\n            var items = this.options.header;\r\n            // logn复杂度算线段树长\r\n            this.headerIntervalTree = BI.PrefixIntervalTree.empty(o.header.length);\r\n            BI.each(items, function (i, row) {\r\n                self.headerIntervalTree.set(i, self._getOneHeaderRowHeight(i));\r\n            });\r\n            return this.headerIntervalTree;\r\n        },\r\n\r\n        _headerRowHeightGetter: function (i) {\r\n            if (!this.options.isHeaderAutoHeight) {\r\n                return BI.AutoHeightGridTable.superclass._headerRowHeightGetter.call(this, i);\r\n            }\r\n            return this.headerIntervalTree ? this.headerIntervalTree.get(i) : this.options.headerRowSize;\r\n        },\r\n\r\n        _rowHeightGetter: function (i) {\r\n            if (!this.options.isAutoHeight) {\r\n                return BI.AutoHeightGridTable.superclass._rowHeightGetter.call(this, i);\r\n            }\r\n            return this.intervalTree ? this.intervalTree.get(i) : this.options.rowSize;\r\n        },\r\n\r\n        _digest: function () {\r\n            var o = this.options;\r\n            if (!o.isAutoHeight && !o.isHeaderAutoHeight) {\r\n                return BI.AutoHeightGridTable.superclass._digest.call(this);\r\n            }\r\n            if (o.isHeaderAutoHeight) {\r\n                this._getActualHeaderRowHeights();\r\n            }\r\n            if (o.isAutoHeight) {\r\n                this._getActualRowHeights();\r\n            }\r\n            var freezeColLength = this._getFreezeColLength();\r\n            var totalLeftColumnSize = 0, totalRightColumnSize = 0, totalColumnSize = 0, summaryColumnSizeArray = [];\r\n\r\n            BI.each(o.columnSize, function (i, size) {\r\n                if (o.isNeedFreeze === true && o.freezeCols.includes(i)) {\r\n                    totalLeftColumnSize += size;\r\n                } else {\r\n                    totalRightColumnSize += size;\r\n                }\r\n                totalColumnSize += size;\r\n                if (i === 0) {\r\n                    summaryColumnSizeArray[i] = size;\r\n                } else {\r\n                    summaryColumnSizeArray[i] = summaryColumnSizeArray[i - 1] + size;\r\n                }\r\n            });\r\n\r\n            var estimatedRowHeight = o.items.length > 0 ? this._getContentHeight() / o.items.length : 0;\r\n            var estimatedHeaderRowHeight = this._getHeaderContentHeight() / o.header.length;\r\n            this.topLeftGrid.setEstimatedColumnSize(freezeColLength > 0 ? totalLeftColumnSize / freezeColLength : 0);\r\n            this.topLeftGrid.setEstimatedRowSize(estimatedHeaderRowHeight);\r\n            this.topRightGrid.setEstimatedColumnSize((o.columnSize.length - freezeColLength) > 0 ? (totalRightColumnSize / (o.columnSize.length - freezeColLength)) : 0);\r\n            this.topRightGrid.setEstimatedRowSize(estimatedHeaderRowHeight);\r\n            this.bottomLeftGrid.setEstimatedColumnSize(freezeColLength > 0 ? totalLeftColumnSize / freezeColLength : 0);\r\n            this.bottomLeftGrid.setEstimatedRowSize(estimatedRowHeight);\r\n            this.bottomRightGrid.setEstimatedColumnSize((o.columnSize.length - freezeColLength) > 0 ? (totalRightColumnSize / (o.columnSize.length - freezeColLength)) : 0);\r\n            this.bottomRightGrid.setEstimatedRowSize(estimatedRowHeight);\r\n\r\n            this.topLeftGrid.setColumnCount(freezeColLength);\r\n            this.topRightGrid.setColumnCount(o.columnSize.length - freezeColLength);\r\n            this.bottomLeftGrid.setColumnCount(freezeColLength);\r\n            this.bottomRightGrid.setColumnCount(o.columnSize.length - freezeColLength);\r\n\r\n            // this.topLeftGrid.restore();\r\n            // this.topRightGrid.restore();\r\n            // this.bottomLeftGrid.restore();\r\n            // this.bottomRightGrid.restore();\r\n        },\r\n\r\n        getFirstColumnHeaderRowSize: function () {\r\n            var self = this, o = this.options;\r\n            if (!o.isHeaderAutoHeight) {\r\n                return BI.AutoHeightGridTable.superclass.getFirstColumnHeaderRowSize.call(this);\r\n            }\r\n            var items = o.header;\r\n            return BI.map(items, function (i) {\r\n                return self.headerIntervalTree && self.headerIntervalTree.get(i);\r\n            });\r\n        },\r\n\r\n        getFirstColumnRowSize: function () {\r\n            var self = this, o = this.options;\r\n            if (!o.isAutoHeight) {\r\n                return BI.AutoHeightGridTable.superclass.getFirstColumnRowSize.call(this);\r\n            }\r\n            var items = o.items;\r\n            return BI.map(items, function (i) {\r\n                return self.intervalTree && self.intervalTree.get(i);\r\n            });\r\n        }\r\n    });\r\n    BI.shortcut(\"bi.grid_auto_height_table\", BI.AutoHeightGridTable);\r\n}());\r\n\r\n","/**\r\n *\r\n * 表格\r\n *\r\n * Created by GUY on 2015/9/22.\r\n * @class BI.TableHeaderCell\r\n * @extends BI.Single\r\n */\r\nBI.TableHeaderCell = BI.inherit(BI.Widget, {\r\n    _defaultConfig: function () {\r\n        return BI.extend(BI.TableHeaderCell.superclass._defaultConfig.apply(this, arguments), {\r\n            baseCls: \"bi-table-header-cell\",\r\n            text: \"\"\r\n        });\r\n    },\r\n\r\n    _init: function () {\r\n        BI.TableHeaderCell.superclass._init.apply(this, arguments);\r\n        var o = this.options;\r\n        BI.createWidget({\r\n            type: \"bi.label\",\r\n            element: this,\r\n            textAlign: o.textAlign || \"center\",\r\n            height: this.options.height,\r\n            text: this.options.text,\r\n            value: this.options.value,\r\n            lgap: o.lgap,\r\n            rgap: o.rgap,\r\n            hgap: o.hgap || 5\r\n        });\r\n    }\r\n});\r\n\r\nBI.shortcut(\"bi.table_header_cell\", BI.TableHeaderCell);","/**\r\n *\r\n * 表格\r\n *\r\n * 能处理静态宽度以及动态宽度的表， 百分比宽度的表请使用PreviewTable\r\n *\r\n * Created by GUY on 2015/9/22.\r\n * @class BI.Table\r\n * @extends BI.Widget\r\n */\r\nBI.Table = BI.inherit(BI.Widget, {\r\n\r\n    _defaultConfig: function () {\r\n        return BI.extend(BI.Table.superclass._defaultConfig.apply(this, arguments), {\r\n            baseCls: \"bi-table\",\r\n            logic: { // 冻结的页面布局逻辑\r\n                dynamic: false\r\n            },\r\n\r\n            isNeedFreeze: false, // 是否需要冻结单元格\r\n            freezeCols: [], // 冻结的列号,从0开始,isNeedFreeze为true时生效\r\n\r\n            isNeedMerge: false, // 是否需要合并单元格\r\n            mergeCols: [], // 合并的单元格列号\r\n            mergeRule: function (row1, row2) { // 合并规则, 默认相等时合并\r\n                return BI.isEqual(row1, row2);\r\n            },\r\n\r\n            columnSize: [],\r\n            headerRowSize: 25,\r\n            footerRowSize: 25,\r\n            rowSize: 25,\r\n\r\n            bordered: true,\r\n            stripe: false,\r\n            hover: false,\r\n\r\n            regionColumnSize: false,\r\n\r\n            header: [],\r\n            footer: false,\r\n            items: [], // 二维数组\r\n            el: {\r\n                type: \"bi.vertical_fill\"\r\n            }\r\n        });\r\n    },\r\n\r\n    _calculateWidth: function (width) {\r\n        if (!width || width === \"0\") {\r\n            return \"\";\r\n        }\r\n        width = BI.parseFloat(width);\r\n        if (width < 0) {\r\n            width = 0;\r\n        }\r\n        return width > 1.01 ? width : (width * 100 + \"%\");\r\n    },\r\n\r\n    _calculateHeight: function (height) {\r\n        return height ? height : \"\";\r\n    },\r\n\r\n    _isColumnSizeValid: function (columnSize, indexes) {\r\n        return !BI.some(columnSize, function (i, c) {\r\n            if (indexes && !indexes.includes(i)) {\r\n                return false;\r\n            }\r\n            if (!c || !BI.isNumeric(c)) {\r\n                return true;\r\n            }\r\n        });\r\n    },\r\n\r\n    _isRightFreeze: function () {\r\n        return BI.isNotEmptyArray(this.options.freezeCols) && BI.first(this.options.freezeCols) !== 0;\r\n    },\r\n\r\n    _createTopLeft: function () {\r\n        var o = this.options, isRight = this._isRightFreeze();\r\n        this.topLeftColGroupTds = {};\r\n        this.topLeftBodyTds = {};\r\n        this.topLeftBodyItems = {};\r\n        var table = this._table();\r\n        var colgroup = this._createColGroup(this.columnLeft, this.topLeftColGroupTds);\r\n        var body = this.topLeftBody = this._body();\r\n        body.element.append(this._createHeaderCells(this.topLeftItems, this.columnLeft, this.mergeLeft, this.topLeftBodyTds, this.topLeftBodyItems));\r\n        this.topLeftContainer = BI.createWidget({\r\n            type: \"bi.default\",\r\n            element: table,\r\n            width: this._calculateWidth(w),\r\n            items: [colgroup, body]\r\n        });\r\n        if (isRight) {\r\n            var w = 0, isValid = true;\r\n            BI.each(o.columnSize, function (i, col) {\r\n                if (!BI.isNumeric(col)) {\r\n                    isValid = false;\r\n                }\r\n                if (!o.freezeCols.includes(i)) {\r\n                    w += col;\r\n                }\r\n            });\r\n            if (isValid && BI.isNumeric(w) && w > 1) {\r\n                w = BI.parseFloat(w);\r\n            }\r\n        }\r\n        return this.topLeftContainer;\r\n    },\r\n\r\n    _createTopRight: function () {\r\n        var o = this.options, isRight = this._isRightFreeze();\r\n        this.topRightColGroupTds = {};\r\n        this.topRightBodyTds = {};\r\n        this.topRightBodyItems = {};\r\n        var table = this._table();\r\n        var colgroup = this._createColGroup(this.columnRight, this.topRightColGroupTds);\r\n        var body = this.topRightBody = this._body();\r\n        body.element.append(this._createHeaderCells(this.topRightItems, this.columnRight, this.mergeRight, this.topRightBodyTds, this.topRightBodyItems, this.columnLeft.length));\r\n        this.topRightContainer = BI.createWidget({\r\n            type: \"bi.default\",\r\n            width: this._calculateWidth(w),\r\n            element: table,\r\n            items: [colgroup, body]\r\n        });\r\n        if (!isRight) {\r\n            var w = 0, isValid = true;\r\n            BI.each(o.columnSize, function (i, col) {\r\n                if (!BI.isNumeric(col)) {\r\n                    isValid = false;\r\n                }\r\n                if (!o.freezeCols.includes(i)) {\r\n                    w += col;\r\n                }\r\n            });\r\n            if (isValid && BI.isNumeric(w) && w > 1) {\r\n                w = BI.parseFloat(w);\r\n            }\r\n        }\r\n        return this.topRightContainer;\r\n    },\r\n\r\n    _createBottomLeft: function () {\r\n        var o = this.options, isRight = this._isRightFreeze();\r\n        this.bottomLeftColGroupTds = {};\r\n        this.bottomLeftBodyTds = {};\r\n        this.bottomLeftBodyItems = {};\r\n        var table = this._table();\r\n        var colgroup = this._createColGroup(this.columnLeft, this.bottomLeftColGroupTds);\r\n        var body = this._createBottomLeftBody();\r\n        this.bottomLeftContainer = BI.createWidget({\r\n            type: \"bi.default\",\r\n            width: this._calculateWidth(w),\r\n            element: table,\r\n            items: [colgroup, body]\r\n        });\r\n        if (isRight) {\r\n            var w = 0, isValid = true;\r\n            BI.each(o.columnSize, function (i, col) {\r\n                if (!BI.isNumeric(col)) {\r\n                    isValid = false;\r\n                }\r\n                if (!o.freezeCols.includes(i)) {\r\n                    w += col;\r\n                }\r\n            });\r\n            if (isValid && BI.isNumeric(w) && w > 1) {\r\n                w = BI.parseFloat(w);\r\n            }\r\n        }\r\n        return this.bottomLeftContainer;\r\n    },\r\n\r\n    _createBottomLeftBody: function () {\r\n        var body = this.bottomLeftBody = this._body();\r\n        body.element.append(this._createCells(this.bottomLeftItems, this.columnLeft, this.mergeLeft, this.bottomLeftBodyTds, this.bottomLeftBodyItems));\r\n        return body;\r\n    },\r\n\r\n    _createBottomRight: function () {\r\n        var o = this.options, isRight = this._isRightFreeze();\r\n        this.bottomRightColGroupTds = {};\r\n        this.bottomRightBodyTds = {};\r\n        this.bottomRightBodyItems = {};\r\n        var table = this._table();\r\n        var colgroup = this._createColGroup(this.columnRight, this.bottomRightColGroupTds);\r\n        var body = this._createBottomRightBody();\r\n        this.bottomRightContainer = BI.createWidget({\r\n            type: \"bi.default\",\r\n            element: table,\r\n            items: [colgroup, body]\r\n        });\r\n        if (!isRight) {\r\n            var w = 0, isValid = true;\r\n            BI.each(o.columnSize, function (i, col) {\r\n                if (!BI.isNumeric(col)) {\r\n                    isValid = false;\r\n                }\r\n                if (!o.freezeCols.includes(i)) {\r\n                    w += col;\r\n                }\r\n            });\r\n            if (isValid && BI.isNumeric(w) && w > 1) {\r\n                w = BI.parseFloat(w);\r\n            }\r\n        }\r\n        return this.bottomRightContainer;\r\n    },\r\n\r\n    _createBottomRightBody: function () {\r\n        var body = this.bottomRightBody = this._body();\r\n        body.element.append(this._createCells(this.bottomRightItems, this.columnRight, this.mergeRight, this.bottomRightBodyTds, this.bottomRightBodyItems, this.columnLeft.length));\r\n        return body;\r\n    },\r\n\r\n    _createFreezeTable: function () {\r\n        var self = this, o = this.options;\r\n        var isRight = this._isRightFreeze();\r\n        var split = this._split(o.header);\r\n        this.topLeftItems = split.left;\r\n        this.topRightItems = split.right;\r\n        split = this._split(o.items);\r\n        this.bottomLeftItems = split.left;\r\n        this.bottomRightItems = split.right;\r\n\r\n        this.columnLeft = [];\r\n        this.columnRight = [];\r\n        BI.each(o.columnSize, function (i, size) {\r\n            if (o.freezeCols.includes(i)) {\r\n                self[isRight ? \"columnRight\" : \"columnLeft\"].push(size);\r\n            } else {\r\n                self[isRight ? \"columnLeft\" : \"columnRight\"].push(size);\r\n            }\r\n        });\r\n        this.mergeLeft = [];\r\n        this.mergeRight = [];\r\n        BI.each(o.mergeCols, function (i, col) {\r\n            if (o.freezeCols.includes(col)) {\r\n                self[isRight ? \"mergeRight\" : \"mergeLeft\"].push(col);\r\n            } else {\r\n                self[isRight ? \"mergeLeft\" : \"mergeRight\"].push(col);\r\n            }\r\n        });\r\n\r\n        var topLeft = this._createTopLeft();\r\n        var topRight = this._createTopRight();\r\n        var bottomLeft = this._createBottomLeft();\r\n        var bottomRight = this._createBottomRight();\r\n\r\n        this.scrollTopLeft = BI.createWidget({\r\n            type: \"bi.adaptive\",\r\n            cls: \"scroll-top-left\",\r\n            width: \"100%\",\r\n            height: \"100%\",\r\n            scrollable: false,\r\n            items: [topLeft]\r\n        });\r\n        this.scrollTopRight = BI.createWidget({\r\n            type: \"bi.adaptive\",\r\n            cls: \"scroll-top-right\",\r\n            width: \"100%\",\r\n            height: \"100%\",\r\n            scrollable: false,\r\n            items: [topRight]\r\n        });\r\n        this.scrollBottomLeft = BI.createWidget({\r\n            type: \"bi.adaptive\",\r\n            cls: \"scroll-bottom-left\",\r\n            width: \"100%\",\r\n            height: \"100%\",\r\n            scrollable: isRight || null,\r\n            scrollx: !isRight,\r\n            items: [bottomLeft]\r\n        });\r\n        this.scrollBottomRight = BI.createWidget({\r\n            type: \"bi.adaptive\",\r\n            cls: \"scroll-bottom-right\",\r\n            width: \"100%\",\r\n            height: \"100%\",\r\n            scrollable: !isRight || null,\r\n            scrollx: isRight,\r\n            items: [bottomRight]\r\n        });\r\n        this.topLeft = BI.createWidget({\r\n            type: \"bi.adaptive\",\r\n            cls: \"top-left\",\r\n            scrollable: false,\r\n            items: [this.scrollTopLeft]\r\n        });\r\n        this.topRight = BI.createWidget({\r\n            type: \"bi.adaptive\",\r\n            cls: \"top-right\",\r\n            scrollable: false,\r\n            items: [this.scrollTopRight]\r\n        });\r\n        this.bottomLeft = BI.createWidget({\r\n            type: \"bi.adaptive\",\r\n            cls: \"bottom-left\",\r\n            scrollable: false,\r\n            items: [this.scrollBottomLeft]\r\n        });\r\n        this.bottomRight = BI.createWidget({\r\n            type: \"bi.adaptive\",\r\n            cls: \"bottom-right\",\r\n            scrollable: false,\r\n            items: [this.scrollBottomRight]\r\n        });\r\n\r\n        var headerHeight = o.header.length * (o.headerRowSize || o.rowSize);\r\n        var leftWidth = BI.sum(o.freezeCols, function (i, col) {\r\n            return o.columnSize[col];\r\n        });\r\n\r\n        this._resize = function () {\r\n            if (self.scrollBottomLeft.element.is(\":visible\")) {\r\n                self.scrollBottomLeft.element.css({ \"overflow-x\": \"auto\" });\r\n                self.scrollBottomRight.element.css({ \"overflow-x\": \"auto\" });\r\n                // self.setColumnSize(o.columnSize);\r\n                if (isRight) {\r\n                    self.scrollBottomLeft.element.css({ \"overflow-y\": \"auto\" });\r\n                } else {\r\n                    self.scrollBottomRight.element.css({ \"overflow-y\": \"auto\" });\r\n                }\r\n                if (self.scrollBottomLeft.element.hasHorizonScroll() || self.scrollBottomRight.element.hasHorizonScroll()) {\r\n                    self.scrollBottomLeft.element.css(\"overflow-x\", \"scroll\");\r\n                    self.scrollBottomRight.element.css(\"overflow-x\", \"scroll\");\r\n                }\r\n\r\n                if (self.scrollBottomLeft.element.hasVerticalScroll()) {\r\n                    self.scrollTopLeft.element.css(\"overflow-y\", \"scroll\");\r\n                } else {\r\n                    self.scrollTopLeft.element.css(\"overflow-y\", \"hidden\");\r\n                }\r\n                self.scrollTopLeft.element[0].scrollLeft = self.scrollBottomLeft.element[0].scrollLeft;\r\n                self.scrollBottomLeft.element[0].scrollTop = self.scrollBottomRight.element[0].scrollTop;\r\n            }\r\n            if (self.scrollBottomRight.element.hasVerticalScroll()) {\r\n                self.scrollTopRight.element.css(\"overflow-y\", \"scroll\");\r\n            } else {\r\n                self.scrollTopRight.element.css(\"overflow-y\", \"hidden\");\r\n            }\r\n            self.scrollTopRight.element[0].scrollLeft = self.scrollBottomRight.element[0].scrollLeft;\r\n        };\r\n\r\n        var regionColumnSize = o.regionColumnSize && o.regionColumnSize.concat([\"fill\"]);\r\n        if (o.freezeCols.length === 0) {\r\n            regionColumnSize = [\"fill\", \"fill\"];\r\n            isRight ? (this.topRight = null, this.bottomRight = null) : (this.topLeft = null, this.bottomLeft = null);\r\n        } else if (o.freezeCols.length >= o.columnSize.length) {\r\n            regionColumnSize = [\"fill\", \"fill\"];\r\n            isRight ? (this.topLeft = null, this.bottomLeft = null) : (this.topRight = null, this.bottomRight = null);\r\n        }\r\n        // this.partitions = BI.createWidget(BI.extend({\r\n        //     element: this,\r\n        //     cls: o.bordered ? \"bordered bi-split\" : \"\"\r\n        // }, BI.LogicFactory.createLogic(\"table\", BI.extend({}, o.logic, {\r\n        //     rows: 2,\r\n        //     columns: 2,\r\n        //     columnSize: regionColumnSize || (isRight ? [\"fill\", leftWidth] : [leftWidth, \"fill\"]),\r\n        //     rowSize: [headerHeight, \"fill\"],\r\n        //     items: [[{\r\n        //         el: this.topLeft\r\n        //     }, {\r\n        //         el: this.topRight\r\n        //     }], [{\r\n        //         el: this.bottomLeft\r\n        //     }, {\r\n        //         el: this.bottomRight\r\n        //     }]]\r\n        // }))));\r\n\r\n        BI.createWidget(o.el, {\r\n            element: this,\r\n            cls: `${o.bordered ? \"bordered\" : \"\"} ${o.stripe ? \"stripe\" : \"\"} ${o.hover ? \"hover\" : \"\"}`,\r\n            rowSize: [\"\", \"fill\"],\r\n            items: [{\r\n                type: \"bi.horizontal_fill\",\r\n                columnSize: regionColumnSize || (isRight ? [\"fill\", leftWidth] : [leftWidth, \"fill\"]),\r\n                items: [this.topLeft, this.topRight]\r\n            }, {\r\n                type: \"bi.horizontal_fill\",\r\n                columnSize: regionColumnSize || (isRight ? [\"fill\", leftWidth] : [leftWidth, \"fill\"]),\r\n                items: [this.bottomLeft, this.bottomRight]\r\n            }]\r\n        });\r\n\r\n        this._initFreezeScroll();\r\n        BI.ResizeDetector.addResizeListener(this, function () {\r\n            self._resize();\r\n            self.fireEvent(BI.Table.EVENT_TABLE_RESIZE);\r\n        });\r\n    },\r\n\r\n    mounted: function () {\r\n        this._resize && this._resize();\r\n        if (!(BI.isChrome() && BI.isWindows() && !BI.isEdge())) {\r\n            BI.createWidget({\r\n                type: \"bi.absolute\",\r\n                element: this,\r\n                items: [{\r\n                    el: {\r\n                        type: \"bi.default\",\r\n                        cls: \"bi-table-fix-scroll\"\r\n                    },\r\n                    top: 0,\r\n                    right: 0,\r\n                    bottom: 0,\r\n                    left: 0\r\n                }]\r\n            });\r\n        }\r\n        this.fireEvent(BI.Table.EVENT_TABLE_AFTER_INIT);\r\n    },\r\n\r\n    _initFreezeScroll: function () {\r\n        var self = this, o = this.options;\r\n        scroll(this.scrollBottomRight.element, this.scrollTopRight.element, this.scrollBottomLeft.element);\r\n\r\n        scroll(this.scrollBottomLeft.element, this.scrollTopLeft.element);\r\n\r\n        function scroll(scrollElement, scrollTopElement, otherElement) {\r\n            scrollElement.scroll(function (e) {\r\n                otherElement?.scrollTop(scrollElement.scrollTop());\r\n                scrollTopElement.scrollLeft(scrollElement.scrollLeft());\r\n                self.fireEvent(BI.Table.EVENT_TABLE_SCROLL);\r\n            });\r\n        }\r\n    },\r\n\r\n    resize: function () {\r\n        this._resize && this._resize();\r\n    },\r\n\r\n    _createCells: function (items, columnSize, mergeCols, TDs, Ws, start, rowSize, isHeader) {\r\n        var self = this, o = this.options, preCol = {}, preRow = {}, preRW = {}, preCW = {}, map = {};\r\n        columnSize = columnSize || o.columnSize;\r\n        mergeCols = mergeCols || o.mergeCols;\r\n        TDs = TDs || {};\r\n        Ws = Ws || {};\r\n        start = start || 0;\r\n        rowSize || (rowSize = o.rowSize);\r\n        var frag = document.createDocumentFragment();\r\n        BI.each(items, function (i, rows) {\r\n            var tr = BI.$(\"<tr>\").addClass((i & 1) === 0 ? \"odd\" : \"even\").height(rowSize);\r\n            BI.each(rows, function (j, row) {\r\n                if (!map[i]) {\r\n                    map[i] = {};\r\n                }\r\n                if (!TDs[i]) {\r\n                    TDs[i] = {};\r\n                }\r\n                if (!Ws[i]) {\r\n                    Ws[i] = {};\r\n                }\r\n                map[i][j] = row;\r\n\r\n                if (o.isNeedMerge && mergeCols.includes(j)) {\r\n                    if (i === 0 && j === 0) {\r\n                        createOneEl(0, 0);\r\n                    } else if (j === 0 && i > 0) {\r\n                        var isNeedMergeRow = o.mergeRule(map[i][j], map[i - 1][j]);\r\n                        if (isNeedMergeRow === true) {\r\n                            mergeRow(i, j);\r\n                            preRow[i] = preCol[j];\r\n                            preRW[i] = preCW[j];\r\n                        } else {\r\n                            createOneEl(i, j);\r\n                        }\r\n                    } else if (i === 0 && j > 0) {\r\n                        var isNeedMergeCol = o.mergeRule(map[i][j], map[i][j - 1]);\r\n                        if (isNeedMergeCol === true) {\r\n                            mergeCol(i, j);\r\n                            preCol[j] = preRow[i];\r\n                            preCW[j] = preRW[i];\r\n                        } else {\r\n                            createOneEl(i, j);\r\n                        }\r\n                    } else {\r\n                        var isNeedMergeRow = o.mergeRule(map[i][j], map[i - 1][j]);\r\n                        var isNeedMergeCol = o.mergeRule(map[i][j], map[i][j - 1]);\r\n                        if (isNeedMergeCol && isNeedMergeRow) {\r\n                            return;\r\n                        }\r\n                        if (isNeedMergeCol) {\r\n                            mergeCol(i, j);\r\n                        }\r\n                        if (isNeedMergeRow) {\r\n                            mergeRow(i, j);\r\n                        }\r\n                        if (!isNeedMergeCol && !isNeedMergeRow) {\r\n                            createOneEl(i, j);\r\n                        }\r\n                    }\r\n                } else {\r\n                    createOneEl(i, j);\r\n                }\r\n            });\r\n\r\n            function mergeRow(i, j) {\r\n                // var height = (preCol[j].attr(\"height\") | 0) + rowSize;\r\n                // preCol[j].attr(\"height\", height).css(\"height\", height);\r\n                // preCW[j].element.css(\"height\", height);\r\n                var rowspan = ((preCol[j].attr(\"rowspan\") || 1) | 0) + 1;\r\n                preCol[j].attr(\"rowspan\", rowspan);\r\n                BI.pushDistinct(preCol[j].__mergeRows, i);\r\n                TDs[i][j] = preCol[j];\r\n                Ws[i][j] = preCW[j];\r\n            }\r\n\r\n            function mergeCol(i, j) {\r\n                if (columnSize[j]) {\r\n                    // var width = preRow[i].attr(\"width\") | 0;\r\n                    // width = width + columnSize[j];\r\n                    // width = self._calculateWidth(width);\r\n                    // preRow[i].attr(\"width\", width);\r\n                    // preRW[i].element.width(width);\r\n                }\r\n                var colspan = ((preRow[i].attr(\"colspan\") || 1) | 0) + 1;\r\n                preRow[i].attr(\"colspan\", colspan);\r\n                BI.pushDistinct(preRow[i].__mergeCols, j);\r\n                TDs[i][j] = preRow[i];\r\n                Ws[i][j] = preRW[i];\r\n            }\r\n\r\n            function createOneEl(r, c) {\r\n                // var width = self._calculateWidth(columnSize[c]);\r\n                // var height = self._calculateHeight(rowSize);\r\n                var td = BI.$(\"<td>\").css({\r\n                        // height: height || \"\",\r\n                        position: \"relative\"\r\n                    })\r\n                    .addClass((c & 1) === 0 ? \"odd-col\" : \"even-col\")\r\n                    .addClass(r === 0 ? \"first-row\" : \"\")\r\n                    .addClass(c === 0 ? \"first-col\" : \"\")\r\n                    .addClass(c === rows.length - 1 ? \"last-col\" : \"\");\r\n                var w = BI.createWidget(map[r][c], {\r\n                    type: \"bi.table_cell\",\r\n                    // width: BI.isNumeric(width) ? (width - (c === 0 ? 2 : 1)) : \"\",\r\n                    // height: BI.isNumeric(height) ? (height - (r === 0 ? 2 : 1)) : \"\",\r\n                    _row: r,\r\n                    _col: c + start\r\n                });\r\n                self.addWidget(w.getName(), w);\r\n                w._mount();\r\n                // w.element.css(\"position\", \"relative\");\r\n                td.append(w.element);\r\n                tr.append(td);\r\n                preCol[c] = td;\r\n                preCol[c].__mergeRows = [r];\r\n                preCW[c] = w;\r\n                preRow[r] = td;\r\n                preRow[r].__mergeCols = [c];\r\n                preRW[r] = w;\r\n                TDs[r][c] = td;\r\n                Ws[r][c] = w;\r\n            }\r\n\r\n            frag.appendChild(tr[0]);\r\n        });\r\n        return frag;\r\n    },\r\n\r\n    _createColGroupCells: function (columnSize, store) {\r\n        var self = this, o = this.options;\r\n        columnSize = columnSize || o.columnSize;\r\n        store = store || {};\r\n        var frag = document.createDocumentFragment();\r\n        BI.each(columnSize, function (i, size) {\r\n            var width = self._calculateWidth(size);\r\n            var col = BI.$(\"<col>\").css(\"width\", width);\r\n            store[i] = col;\r\n            frag.appendChild(col[0]);\r\n        });\r\n        return frag;\r\n    },\r\n\r\n    _createHeaderCells: function (items, columnSize, mergeCols, TDs, Ws, start) {\r\n        var self = this, o = this.options;\r\n        start || (start = 0);\r\n        var frag = this._createCells(items, columnSize, BI.range(o.columnSize.length), TDs, Ws, start, o.headerRowSize || o.rowSize, true);\r\n\r\n        return frag;\r\n    },\r\n\r\n    _createFooterCells: function (items, columnSize, TDs, Ws) {\r\n        var o = this.options;\r\n        var frag = this._createCells(items, columnSize, [], TDs, Ws, 0);\r\n        return frag;\r\n    },\r\n\r\n    _createColGroup: function (columnSize, store, widgets) {\r\n        var self = this, o = this.options;\r\n        this.colgroup = this._colgroup();\r\n        this.colgroup.element.append(this._createColGroupCells(columnSize, store, widgets));\r\n        return this.colgroup;\r\n    },\r\n\r\n    _createHeader: function () {\r\n        var self = this, o = this.options;\r\n        if (o.header === false) {\r\n            return;\r\n        }\r\n        this.header = this._header();\r\n        this.header.element.append(this._createHeaderCells(o.header, null, null, this.headerTds, this.headerItems));\r\n        return this.header;\r\n    },\r\n\r\n    _createFooter: function (columnSize, store, widgets) {\r\n        var self = this, o = this.options;\r\n        if (o.footer === false) {\r\n            return;\r\n        }\r\n        this.footer = this._footer();\r\n        this.footer.element.append(this._createFooterCells(o.footer, null, this.footerTds, this.footerItems));\r\n        return this.footer;\r\n    },\r\n\r\n\r\n    _createBody: function () {\r\n        var self = this, o = this.options;\r\n        this.body = this._body();\r\n        this.body.element.append(this._createCells(o.items, null, null, this.bodyTds, this.bodyItems));\r\n        return this.body;\r\n    },\r\n\r\n    _createNormalTable: function () {\r\n        var self = this, o = this.options, table = this._table();\r\n        this.colgroupTds = {};\r\n        this.headerTds = {};\r\n        this.footerTds = {};\r\n        this.bodyTds = {};\r\n\r\n        this.headerItems = {};\r\n        this.footerItems = {};\r\n        this.bodyItems = {};\r\n        var colgroup = this._createColGroup(null, this.colgroupTds);\r\n        var header = this._createHeader();\r\n        var footer = this._createFooter();\r\n        var body = this._createBody();\r\n\r\n        this.tableContainer = BI.createWidget({\r\n            type: \"bi.default\",\r\n            element: table,\r\n            width: this._calculateWidth(w),\r\n            items: [colgroup, header, footer, body]\r\n        });\r\n\r\n        if (this._isColumnSizeValid(o.columnSize)) {\r\n            var w = BI.sum(o.columnSize) || undefined;\r\n            w = this._calculateWidth(w);\r\n        }\r\n\r\n        this.scrollBottomRight = BI.createWidget({\r\n            type: \"bi.adaptive\",\r\n            width: \"100%\",\r\n            height: \"100%\",\r\n            cls: \"scroll-bottom-right\",\r\n            scrollable: true,\r\n            items: [this.tableContainer]\r\n        });\r\n\r\n        BI.createWidget({\r\n            type: \"bi.adaptive\",\r\n            cls: `${o.bordered ? \"bordered\" : \"\"} ${o.stripe ? \"stripe\" : \"\"} \"bottom-right\"`,\r\n            element: this,\r\n            scrollable: false,\r\n            items: [this.scrollBottomRight]\r\n        });\r\n\r\n        this._initNormalScroll();\r\n    },\r\n\r\n    _initNormalScroll: function () {\r\n        var self = this;\r\n        this.scrollBottomRight.element.scroll(function (e) {\r\n            self.fireEvent(BI.Table.EVENT_TABLE_SCROLL);\r\n        });\r\n    },\r\n\r\n    _split: function (items) {\r\n        var o = this.options, left = [], right = [], isRight = this._isRightFreeze();\r\n        BI.each(items, function (i, rows) {\r\n            left.push([]);\r\n            right.push([]);\r\n            BI.each(rows, function (j, cell) {\r\n                if (o.freezeCols.includes(j)) {\r\n                    (isRight ? right : left)[i].push(cell);\r\n                } else {\r\n                    (isRight ? left : right)[i].push(cell);\r\n                }\r\n            });\r\n        });\r\n        return {\r\n            left: left,\r\n            right: right\r\n        };\r\n    },\r\n\r\n    _table: function () {\r\n        return BI.createWidget({\r\n            type: \"bi.layout\",\r\n            tagName: \"table\",\r\n            cls: \"table-view-table\",\r\n            attribute: { cellspacing: 0, cellpadding: 0 }\r\n        });\r\n    },\r\n\r\n    _header: function () {\r\n        return BI.createWidget({\r\n            type: \"bi.layout\",\r\n            cls: \"table-view-header\",\r\n            tagName: \"thead\"\r\n        });\r\n    },\r\n\r\n    _footer: function () {\r\n        return BI.createWidget({\r\n            type: \"bi.layout\",\r\n            cls: \"table-view-footer\",\r\n            tagName: \"tfoot\"\r\n        });\r\n    },\r\n\r\n    _body: function () {\r\n        return BI.createWidget({\r\n            type: \"bi.layout\",\r\n            tagName: \"tbody\",\r\n            cls: \"table-view-body\"\r\n        });\r\n    },\r\n\r\n    _colgroup: function () {\r\n        return BI.createWidget({\r\n            type: \"bi.layout\",\r\n            tagName: \"colgroup\"\r\n        });\r\n    },\r\n\r\n    render: function () {\r\n        if (this.options.items.length > 0 || this.options.header.length > 0) {\r\n            this.populate(this.options.items);\r\n        }\r\n    },\r\n\r\n    setColumnSize: function (columnSize) {\r\n        var self = this, o = this.options;\r\n        var isRight = this._isRightFreeze();\r\n        o.columnSize = columnSize || [];\r\n        if (o.isNeedFreeze) {\r\n            var columnLeft = [];\r\n            var columnRight = [];\r\n            BI.each(o.columnSize, function (i, size) {\r\n                if (o.freezeCols.includes(i)) {\r\n                    isRight ? columnRight.push(size) : columnLeft.push(size);\r\n                } else {\r\n                    isRight ? columnLeft.push(size) : columnRight.push(size);\r\n                }\r\n            });\r\n            var topleft = 0, topright = 1, bottomleft = 2, bottomright = 3;\r\n            var run = function (direction) {\r\n                var colgroupTds, bodyTds, bodyItems, sizes;\r\n                switch (direction) {\r\n                    case topleft:\r\n                        colgroupTds = self.topLeftColGroupTds;\r\n                        bodyTds = self.topLeftBodyTds;\r\n                        bodyItems = self.topLeftBodyItems;\r\n                        sizes = columnLeft;\r\n                        break;\r\n                    case topright:\r\n                        colgroupTds = self.topRightColGroupTds;\r\n                        bodyTds = self.topRightBodyTds;\r\n                        bodyItems = self.topRightBodyItems;\r\n                        sizes = columnRight;\r\n                        break;\r\n                    case bottomleft:\r\n                        colgroupTds = self.bottomLeftColGroupTds;\r\n                        bodyTds = self.bottomLeftBodyTds;\r\n                        bodyItems = self.bottomLeftBodyItems;\r\n                        sizes = columnLeft;\r\n                        break;\r\n                    case bottomright:\r\n                        colgroupTds = self.bottomRightColGroupTds;\r\n                        bodyTds = self.bottomRightBodyTds;\r\n                        bodyItems = self.bottomRightBodyItems;\r\n                        sizes = columnRight;\r\n                        break;\r\n                }\r\n                BI.each(colgroupTds, function (i, colgroup) {\r\n                    var width = colgroup.attr(\"width\") | 0;\r\n                    if (sizes[i] !== \"\" && width !== sizes[i]) {\r\n                        var w = self._calculateWidth(sizes[i]);\r\n                        colgroup.attr(\"width\", w).css(\"width\", w);\r\n                    }\r\n                });\r\n            };\r\n            run(topleft);\r\n            run(topright);\r\n            run(bottomleft);\r\n            run(bottomright);\r\n\r\n            var lw = 0, rw = 0, lValid = true, rValid = true;\r\n            this.columnLeft = [];\r\n            this.columnRight = [];\r\n            BI.each(o.columnSize, function (i, size) {\r\n                if (o.freezeCols.includes(i)) {\r\n                    if (!BI.isNumeric(size)) {\r\n                        isRight ? (rValid = false) : (lValid = false);\r\n                    }\r\n                    lw += size;\r\n                    self[isRight ? \"columnRight\" : \"columnLeft\"].push(size);\r\n                } else {\r\n                    if (!BI.isNumeric(size)) {\r\n                        isRight ? (lValid = false) : (rValid = false);\r\n                    }\r\n                    rw += size;\r\n                    self[isRight ? \"columnLeft\" : \"columnRight\"].push(size);\r\n                }\r\n            });\r\n            if (lValid) {\r\n                lw = this._calculateWidth(lw);\r\n                if (BI.isNumeric(lw)) {\r\n                    lw = BI.parseFloat(lw);\r\n                }\r\n            }\r\n            if (rValid) {\r\n                rw = this._calculateWidth(rw);\r\n                if (BI.isNumeric(rw)) {\r\n                    rw = BI.parseFloat(rw);\r\n                }\r\n            }\r\n            if (lValid || (rValid && isRight)) {\r\n                this.topLeftContainer.element.width(isRight ? rw : lw);\r\n                this.bottomLeftContainer.element.width(isRight ? rw : lw);\r\n            } else {\r\n                this.topLeftContainer.element.width(\"\");\r\n                this.bottomLeftContainer.element.width(\"\");\r\n            }\r\n            if (rValid || (lValid && isRight)) {\r\n                this.topRightContainer.element.width(isRight ? lw : rw);\r\n                this.bottomRightContainer.element.width(isRight ? lw : rw);\r\n            } else {\r\n                this.topRightContainer.element.width(\"\");\r\n                this.bottomRightContainer.element.width(\"\");\r\n            }\r\n            this.scrollTopLeft.element[0].scrollLeft = this.scrollBottomLeft.element[0].scrollLeft;\r\n            this.scrollTopRight.element[0].scrollLeft = this.scrollBottomRight.element[0].scrollLeft;\r\n        } else {\r\n            BI.each(this.colgroupTds, function (i, colgroup) {\r\n                var width = colgroup.attr(\"width\") | 0;\r\n                if (o.columnSize[i] !== \"\" && width !== o.columnSize[i]) {\r\n                    var w = self._calculateWidth(o.columnSize[i]);\r\n                    colgroup.attr(\"width\", w).css(\"width\", w);\r\n                }\r\n            });\r\n            if (this._isColumnSizeValid(o.columnSize)) {\r\n                var w = this._calculateWidth(BI.sum(o.columnSize));\r\n                if (w > 1.05) {\r\n                    this.tableContainer.element.width(w);\r\n                }\r\n            } else {\r\n                this.tableContainer.element.width(\"\");\r\n            }\r\n        }\r\n    },\r\n\r\n    getColumnSize: function () {\r\n        return this.options.columnSize;\r\n    },\r\n\r\n    getCalculateColumnSize: function () {\r\n        var self = this, o = this.options;\r\n        var columnSize = [];\r\n        if (o.isNeedFreeze === true) {\r\n            if (BI.size(this.bottomLeftBodyTds) > 0 || BI.size(this.bottomRightBodyTds) > 0) {\r\n                if (!BI.any(this.bottomLeftBodyTds, function (i, tds) {\r\n                    if (!BI.any(tds, function (i, item) {\r\n                        if (item.__mergeCols.length > 1) {\r\n                            return true;\r\n                        }\r\n                    })) {\r\n                        BI.each(tds, function (i, item) {\r\n                            var width = item.width() / item.__mergeCols.length;\r\n                            columnSize.push(width);\r\n                        });\r\n                        return true;\r\n                    }\r\n                })) {\r\n                    BI.each(this.bottomLeftBodyTds[0], function (i, item) {\r\n                        var width = item.width() / item.__mergeCols.length;\r\n                        columnSize.push(width);\r\n                    });\r\n                }\r\n                if (!BI.any(this.bottomRightBodyTds, function (i, tds) {\r\n                    if (!BI.any(tds, function (i, item) {\r\n                        if (item.__mergeCols.length > 1) {\r\n                            return true;\r\n                        }\r\n                    })) {\r\n                        BI.each(tds, function (i, item) {\r\n                            var width = item.width() / item.__mergeCols.length;\r\n                            columnSize.push(width);\r\n                        });\r\n                        return true;\r\n                    }\r\n                })) {\r\n                    BI.each(this.bottomRightBodyTds[0], function (i, item) {\r\n                        var width = item.width() / item.__mergeCols.length;\r\n                        columnSize.push(width);\r\n                    });\r\n                }\r\n                return columnSize;\r\n            }\r\n            if (!BI.any(this.topLeftBodyTds, function (i, tds) {\r\n                if (!BI.any(tds, function (i, item) {\r\n                    if (item.__mergeCols.length > 1) {\r\n                        return true;\r\n                    }\r\n                })) {\r\n                    BI.each(tds, function (i, item) {\r\n                        var width = item.width() / item.__mergeCols.length;\r\n                        columnSize.push(width);\r\n                    });\r\n                    return true;\r\n                }\r\n            })) {\r\n                BI.each(this.topLeftBodyTds[BI.size(this.topLeftBodyTds) - 1], function (i, item) {\r\n                    var width = item.width() / item.__mergeCols.length;\r\n                    columnSize.push(width);\r\n                });\r\n            }\r\n            if (!BI.any(this.topRightBodyTds, function (i, tds) {\r\n                if (!BI.any(tds, function (i, item) {\r\n                    if (item.__mergeCols.length > 1) {\r\n                        return true;\r\n                    }\r\n                })) {\r\n                    BI.each(tds, function (i, item) {\r\n                        var width = item.width() / item.__mergeCols.length;\r\n                        columnSize.push(width);\r\n                    });\r\n                    return true;\r\n                }\r\n            })) {\r\n                BI.each(this.topRightBodyTds[BI.size(this.topRightBodyTds) - 1], function (i, item) {\r\n                    var width = item.width() / item.__mergeCols.length;\r\n                    columnSize.push(width);\r\n                });\r\n            }\r\n        } else {\r\n            BI.each(this.headerTds[BI.size(this.headerTds) - 1], function (i, item) {\r\n                var width = item.width() / item.__mergeCols.length;\r\n                columnSize.push(width);\r\n            });\r\n        }\r\n        return columnSize;\r\n    },\r\n\r\n    setHeaderColumnSize: function (columnSize) {\r\n        var self = this, o = this.options;\r\n        var isRight = this._isRightFreeze();\r\n        if (o.isNeedFreeze) {\r\n            var columnLeft = [];\r\n            var columnRight = [];\r\n            BI.each(columnSize, function (i, size) {\r\n                if (o.freezeCols.includes(i)) {\r\n                    isRight ? columnRight.push(size) : columnLeft.push(size);\r\n                } else {\r\n                    isRight ? columnLeft.push(size) : columnRight.push(size);\r\n                }\r\n            });\r\n            var topleft = 0, topright = 1;\r\n            var run = function (direction) {\r\n                var colgroupTds, bodyTds, bodyItems, sizes;\r\n                switch (direction) {\r\n                    case topleft:\r\n                        colgroupTds = self.topLeftColGroupTds;\r\n                        bodyTds = self.topLeftBodyTds;\r\n                        bodyItems = self.topLeftBodyItems;\r\n                        sizes = columnLeft;\r\n                        break;\r\n                    case topright:\r\n                        colgroupTds = self.topRightColGroupTds;\r\n                        bodyTds = self.topRightBodyTds;\r\n                        bodyItems = self.topRightBodyItems;\r\n                        sizes = columnRight;\r\n                        break;\r\n                }\r\n                BI.each(colgroupTds, function (i, colgroup) {\r\n                    var width = colgroup.attr(\"width\") | 0;\r\n                    if (width !== sizes[i]) {\r\n                        var w = self._calculateWidth(sizes[i]);\r\n                        colgroup.attr(\"width\", w).css(\"width\", w);\r\n                    }\r\n                });\r\n            };\r\n            run(topleft);\r\n            run(topright);\r\n\r\n            var lw = 0, rw = 0;\r\n            BI.each(columnSize, function (i, size) {\r\n                if (o.freezeCols.includes(i)) {\r\n                    lw += size;\r\n                } else {\r\n                    rw += size;\r\n                }\r\n            });\r\n            lw = this._calculateWidth(lw);\r\n            rw = this._calculateWidth(rw);\r\n\r\n            if (BI.isNumeric(lw)) {\r\n                lw = BI.parseFloat(lw);\r\n            }\r\n            if (BI.isNumeric(rw)) {\r\n                rw = BI.parseFloat(rw);\r\n            }\r\n            this.topLeftContainer.element.width(isRight ? rw : lw);\r\n            this.topRightContainer.element.width(isRight ? lw : rw);\r\n            this.scrollTopLeft.element[0].scrollLeft = this.scrollBottomLeft.element[0].scrollLeft;\r\n            this.scrollTopRight.element[0].scrollLeft = this.scrollBottomRight.element[0].scrollLeft;\r\n        } else {\r\n            BI.each(this.colgroupTds, function (i, colgroup) {\r\n                var width = colgroup.attr(\"width\") | 0;\r\n                if (width !== columnSize[i]) {\r\n                    var w = self._calculateWidth(columnSize[i]);\r\n                    colgroup.attr(\"width\", w).css(\"width\", w);\r\n                }\r\n            });\r\n            var cW = this._calculateWidth(BI.sum(columnSize));\r\n            this.tableContainer.element.width(cW);\r\n        }\r\n    },\r\n\r\n    setRegionColumnSize: function (columnSize) {\r\n        var self = this, o = this.options;\r\n        o.regionColumnSize = columnSize;\r\n        if (o.freezeCols.length === 0) {\r\n            if (o.isNeedFreeze) {\r\n            //     this.topLeft.element.css(\"width\", columnSize);\r\n            //     this.topRight.element.css(\"left\", columnSize);\r\n            //     this.bottomLeft.element.css(\"width\", columnSize);\r\n            //     this.bottomRight.element.css(\"left\", columnSize);\r\n            } else {\r\n                // this.tableContainer.element.width(columnSize[0]);\r\n            }\r\n        } else if (o.freezeCols.length > 0 && o.freezeCols.length < o.columnSize.length) {\r\n            if (o.isNeedFreeze) {\r\n                this.topLeft.element.css(\"width\", columnSize);\r\n                // this.topRight.element.css(\"left\", columnSize + \"px\");\r\n                this.bottomLeft.element.css(\"width\", columnSize);\r\n                // this.bottomRight.element.css(\"left\", columnSize + \"px\");\r\n            } else {\r\n                // this.tableContainer.element.width(columnSize[0]);\r\n            }\r\n        } else {\r\n            if (o.isNeedFreeze) {\r\n                // this.partitions.attr(\"columnSize\", this._isRightFreeze() ? [0, \"fill\"] : [\"fill\", 0]);\r\n                // this.partitions.resize();\r\n            } else {\r\n                // this.tableContainer.element.width(columnSize[0]);\r\n            }\r\n        }\r\n    },\r\n\r\n    getRegionColumnSize: function () {\r\n        return this.options.regionColumnSize;\r\n    },\r\n\r\n    getCalculateRegionColumnSize: function () {\r\n        var o = this.options;\r\n        if (o.isNeedFreeze) {\r\n            return [this.scrollBottomLeft.element.width(), this.scrollBottomRight.element.width()];\r\n        }\r\n        return [this.scrollBottomRight.element.width()];\r\n    },\r\n\r\n    getCalculateRegionRowSize: function () {\r\n        var o = this.options;\r\n        if (o.isNeedFreeze) {\r\n            return [this.scrollTopRight.element.height(), this.scrollBottomRight.element.height()];\r\n        }\r\n        return [this.scrollBottomRight.element.height()];\r\n    },\r\n\r\n    getClientRegionColumnSize: function () {\r\n        var o = this.options;\r\n        if (o.isNeedFreeze) {\r\n            return [this.scrollBottomLeft.element[0].clientWidth, this.scrollBottomRight.element[0].clientWidth];\r\n        }\r\n        return [this.scrollBottomRight.element[0].clientWidth];\r\n    },\r\n\r\n    getClientRegionRowSize: function () {\r\n        var o = this.options;\r\n        if (o.isNeedFreeze) {\r\n            return [this.scrollBottomLeft.element[0].clientHeight, this.scrollBottomRight.element[0].clientHeight];\r\n        }\r\n        return [this.scrollBottomRight.element[0].clientHeight];\r\n    },\r\n\r\n    getScrollRegionColumnSize: function () {\r\n        var o = this.options;\r\n        if (o.isNeedFreeze) {\r\n            return [this.scrollBottomLeft.element[0].scrollWidth, this.scrollBottomRight.element[0].scrollWidth];\r\n        }\r\n        return [this.scrollBottomRight.element[0].scrollWidth];\r\n    },\r\n\r\n    getScrollRegionRowSize: function () {\r\n        var o = this.options;\r\n        if (o.isNeedFreeze) {\r\n            if (o.freezeCols.length < o.columnSize.length) {\r\n                return [this.scrollTopRight.element[0].scrollHeight, this.scrollBottomRight.element[0].scrollHeight];\r\n            }\r\n            return [this.scrollTopLeft.element[0].scrollHeight, this.scrollBottomLeft.element[0].scrollHeight];\r\n\r\n        }\r\n        return [this.scrollBottomRight.element[0].scrollHeight];\r\n    },\r\n\r\n    hasVerticalScroll: function () {\r\n        var o = this.options;\r\n        if (o.isNeedFreeze) {\r\n            return this.scrollBottomRight.element.hasVerticalScroll() || this.scrollBottomLeft.element.hasVerticalScroll();\r\n        }\r\n        return this.scrollBottomRight.element.hasVerticalScroll();\r\n    },\r\n\r\n    setVerticalScroll: function (scrollTop) {\r\n        var o = this.options;\r\n        if (o.isNeedFreeze) {\r\n            if (this.scrollBottomRight.element[0].scrollTop !== scrollTop) {\r\n                this.scrollBottomRight.element[0].scrollTop = scrollTop;\r\n            }\r\n            if (this.scrollBottomLeft.element[0].scrollTop !== scrollTop) {\r\n                this.scrollBottomLeft.element[0].scrollTop = scrollTop;\r\n            }\r\n        } else {\r\n            if (this.scrollBottomRight.element[0].scrollTop !== scrollTop) {\r\n                this.scrollBottomRight.element[0].scrollTop = scrollTop;\r\n            }\r\n        }\r\n    },\r\n\r\n    setLeftHorizontalScroll: function (scrollLeft) {\r\n        var o = this.options;\r\n        if (o.isNeedFreeze) {\r\n            if (this.scrollBottomLeft.element[0].scrollLeft !== scrollLeft) {\r\n                this.scrollBottomLeft.element[0].scrollLeft = scrollLeft;\r\n            }\r\n            if (this.scrollTopLeft.element[0].scrollLeft !== scrollLeft) {\r\n                this.scrollTopLeft.element[0].scrollLeft = scrollLeft;\r\n            }\r\n        } else {\r\n            if (this.scrollBottomRight.element[0].scrollLeft !== scrollLeft) {\r\n                this.scrollBottomRight.element[0].scrollLeft = scrollLeft;\r\n            }\r\n        }\r\n    },\r\n\r\n    setRightHorizontalScroll: function (scrollLeft) {\r\n        var o = this.options;\r\n        if (o.isNeedFreeze) {\r\n            if (this.scrollBottomRight.element[0].scrollLeft !== scrollLeft) {\r\n                this.scrollBottomRight.element[0].scrollLeft = scrollLeft;\r\n            }\r\n            if (this.scrollTopRight.element[0].scrollLeft !== scrollLeft) {\r\n                this.scrollTopRight.element[0].scrollLeft = scrollLeft;\r\n            }\r\n        } else {\r\n            if (this.scrollBottomRight.element[0].scrollLeft !== scrollLeft) {\r\n                this.scrollBottomRight.element[0].scrollLeft = scrollLeft;\r\n            }\r\n        }\r\n    },\r\n\r\n    getVerticalScroll: function () {\r\n        var o = this.options;\r\n        if (o.isNeedFreeze) {\r\n            return this.scrollBottomRight.element[0].scrollTop || this.scrollBottomLeft.element[0].scrollTop;\r\n        }\r\n        return this.scrollBottomRight.element[0].scrollTop;\r\n    },\r\n\r\n    getLeftHorizontalScroll: function () {\r\n        var o = this.options;\r\n        if (o.isNeedFreeze) {\r\n            return this.scrollBottomLeft.element[0].scrollLeft;\r\n        }\r\n        return this.scrollBottomRight.element[0].scrollLeft;\r\n    },\r\n\r\n    getRightHorizontalScroll: function () {\r\n        var o = this.options;\r\n        if (o.isNeedFreeze) {\r\n            return this.scrollBottomRight.element[0].scrollLeft;\r\n        }\r\n        return this.scrollBottomRight.element[0].scrollLeft;\r\n    },\r\n\r\n    getColumns: function () {\r\n        var o = this.options;\r\n        if (o.isNeedFreeze) {\r\n            return {\r\n                topLeft: this.topLeftBodyItems,\r\n                topRight: this.topRightBodyItems,\r\n                bottomLeft: this.bottomLeftBodyItems,\r\n                bottomRight: this.bottomRightBodyItems\r\n            };\r\n        }\r\n        return {\r\n            header: this.headerItems,\r\n            body: this.bodyItems,\r\n            footer: this.footerItems\r\n        };\r\n\r\n    },\r\n\r\n    // _empty: function () {\r\n    //     this.scrollBottomRight && this.scrollBottomRight.destroy();\r\n    //     BI.each(this.partitions && this.partitions._children, function (name, child) {\r\n    //         child && child.destroy();\r\n    //     });\r\n    // },\r\n\r\n    populate: function (items, header) {\r\n        if (!items) {\r\n            return;\r\n        }\r\n        this.options.items = items || [];\r\n        if (header) {\r\n            this.options.header = header;\r\n        }\r\n        this.empty();\r\n        if (this.options.isNeedFreeze) {\r\n            this._createFreezeTable();\r\n        } else {\r\n            this._createNormalTable();\r\n        }\r\n    }\r\n})\r\n;\r\nBI.Table.EVENT_TABLE_AFTER_INIT = \"EVENT_TABLE_AFTER_INIT\";\r\nBI.Table.EVENT_TABLE_RESIZE = \"EVENT_TABLE_RESIZE\";\r\nBI.Table.EVENT_TABLE_SCROLL = \"EVENT_TABLE_SCROLL\";\r\nBI.Table.EVENT_TABLE_BEFORE_COLUMN_RESIZE = \"EVENT_TABLE_BEFORE_COLUMN_RESIZE\";\r\nBI.Table.EVENT_TABLE_COLUMN_RESIZE = \"EVENT_TABLE_COLUMN_RESIZE\";\r\nBI.Table.EVENT_TABLE_AFTER_COLUMN_RESIZE = \"EVENT_TABLE_AFTER_COLUMN_RESIZE\";\r\n\r\nBI.Table.EVENT_TABLE_BEFORE_REGION_RESIZE = \"EVENT_TABLE_BEFORE_REGION_RESIZE\";\r\nBI.Table.EVENT_TABLE_REGION_RESIZE = \"EVENT_TABLE_REGION_RESIZE\";\r\nBI.Table.EVENT_TABLE_AFTER_REGION_RESIZE = \"EVENT_TABLE_AFTER_REGION_RESIZE\";\r\nBI.shortcut(\"bi.table_view\", BI.Table);\r\n","/**\r\n *\r\n * 表格单元格\r\n *\r\n * Created by GUY on 2016/1/12.\r\n * @class BI.ResizableTableCell\r\n * @extends BI.Widget\r\n */\r\nBI.ResizableTableCell = BI.inherit(BI.Widget, {\r\n    _defaultConfig: function () {\r\n        return BI.extend(BI.ResizableTableCell.superclass._defaultConfig.apply(this, arguments), {\r\n            baseCls: \"bi-resizable-table-cell\",\r\n            cell: {},\r\n            minSize: 30,\r\n            // suitableSize,\r\n            maxSize: Number.MAX_VALUE,\r\n            start: BI.emptyFn,\r\n            resize: BI.emptyFn,\r\n            stop: BI.emptyFn,\r\n\r\n            _rowIndex: null,\r\n            _columnIndex: null,\r\n            _left: 0,\r\n            _top: 0,\r\n            firstRowTopLine: true,\r\n            firstColumnLeftLine: true\r\n        });\r\n    },\r\n\r\n    render: function () {\r\n        var self = this, o = this.options;\r\n        this.cell = BI.createWidget(BI.extend({type: \"bi.label\"}, o.cell, {\r\n            width: o.width,\r\n            height: o.height,\r\n            _rowIndex: o._rowIndex,\r\n            _columnIndex: o._columnIndex,\r\n            _left: o._left,\r\n            _top: o._top,\r\n            firstRowTopLine: o.firstRowTopLine,\r\n            firstColumnLeftLine: o.firstColumnLeftLine\r\n        }));\r\n        this.handler = BI.createWidget({\r\n            type: \"bi.absolute\",\r\n            cls: \"resizable-table-cell-resizer-container\",\r\n            width: 6,\r\n            items: [{\r\n                el: {\r\n                    type: \"bi.layout\",\r\n                    cls: \"resizable-table-cell-resizer-knob\",\r\n                    width: 4\r\n                },\r\n                right: 0,\r\n                top: 0,\r\n                bottom: 0\r\n            }]\r\n        });\r\n        return [{\r\n            type: \"bi.vertical_adapt\",\r\n            columnSize: [\"fill\"],\r\n            items: [this.cell]\r\n        }, {\r\n            type: \"bi.absolute\",\r\n            items: [{\r\n                el: this.handler,\r\n                right: 0,\r\n                top: 0,\r\n                bottom: 0\r\n            }]\r\n        }]\r\n    },\r\n\r\n    mounted: function () {\r\n        var self = this, o = this.options;\r\n        var startDrag = false;\r\n        var size = 0, offset = 0, defaultSize = o.width;\r\n\r\n        function optimizeSize (s) {\r\n            var optSize = BI.clamp(s, o.minSize, o.maxSize || Number.MAX_VALUE);\r\n            // if (o.suitableSize) {\r\n            //     if (Math.abs(o.suitableSize - optSize) < 5) {\r\n            //         optSize = o.suitableSize;\r\n            //         self.handler.element.addClass(\"suitable\");\r\n            //     } else {\r\n            //         self.handler.element.removeClass(\"suitable\");\r\n            //     }\r\n            // }\r\n            return optSize;\r\n        }\r\n\r\n        var mouseMoveTracker = new BI.MouseMoveTracker(function (deltaX, deltaY) {\r\n            if (mouseMoveTracker.isDragging()) {\r\n                startDrag = true;\r\n                offset += deltaX;\r\n                size = optimizeSize(defaultSize + offset);\r\n                self.handler.element.addClass(\"dragging\");\r\n                o.resize(size, self);\r\n            }\r\n        }, function () {\r\n            if (startDrag === true) {\r\n                size = optimizeSize(size);\r\n                o.stop(size);\r\n                size = 0;\r\n                offset = 0;\r\n                defaultSize = o.width || self.element.width();\r\n                startDrag = false;\r\n            }\r\n            self.handler.element.removeClass(\"dragging\");\r\n            self.handler.element.removeClass(\"suitable\");\r\n            mouseMoveTracker.releaseMouseMoves();\r\n        }, _global.document);\r\n\r\n        this.handler.element.on(\"mousedown\", function (event) {\r\n            defaultSize = o.width || self.element.width();\r\n            optimizeSize(defaultSize);\r\n            mouseMoveTracker.captureMouseMoves(event);\r\n        });\r\n    },\r\n\r\n    setWidth: function (width) {\r\n        BI.ResizableTableCell.superclass.setWidth.apply(this, arguments);\r\n        var o = this.options;\r\n        this.cell.setWidth(o.width);\r\n    },\r\n\r\n    setHeight: function (height) {\r\n        BI.ResizableTableCell.superclass.setHeight.apply(this, arguments);\r\n        var o = this.options;\r\n        this.cell.setHeight(o.height);\r\n    }\r\n});\r\nBI.shortcut(\"bi.resizable_table_cell\", BI.ResizableTableCell);\r\n","/**\r\n *\r\n * 可调整列宽的grid表格\r\n *\r\n * Created by GUY on 2016/1/12.\r\n * @class BI.ResizableTable\r\n * @extends BI.Widget\r\n */\r\nBI.ResizableTable = BI.inherit(BI.Widget, {\r\n\r\n    props: {\r\n        baseCls: \"bi-resizable-table\",\r\n        el: {\r\n            type: \"bi.grid_table\"\r\n        },\r\n        isNeedFreeze: false,\r\n        isNeedResize: true,\r\n        headerRowSize: 25,\r\n        rowSize: 25,\r\n        isNeedMerge: true, // 是否需要合并单元格\r\n        mergeCols: [],\r\n        mergeRule: BI.emptyFn,\r\n        columnSize: [],\r\n        minColumnSize: [],\r\n        maxColumnSize: [],\r\n        freezeCols: [],\r\n        header: [],\r\n        items: [],\r\n        regionColumnSize: []\r\n    },\r\n\r\n    render: function () {\r\n        var self = this, o = this.options;\r\n        return [BI.extend({\r\n            type: \"bi.grid_table\",\r\n            width: o.width,\r\n            height: o.height,\r\n            headerRowSize: o.headerRowSize,\r\n            rowSize: o.rowSize,\r\n            columnSize: o.columnSize,\r\n\r\n            isNeedFreeze: o.isNeedFreeze,\r\n            freezeCols: o.freezeCols,\r\n            isNeedMerge: o.isNeedMerge,\r\n            mergeCols: o.mergeCols,\r\n            mergeRule: BI.bind(this._mergeRule, this),\r\n\r\n            header: this._formatHeader(o.header),\r\n            items: o.items,\r\n            regionColumnSize: o.regionColumnSize,\r\n            listeners: [{\r\n                eventName: BI.Table.EVENT_TABLE_SCROLL,\r\n                action: function () {\r\n                    self.fireEvent(BI.Table.EVENT_TABLE_SCROLL, arguments);\r\n                }\r\n            }]\r\n        }, o.el, {\r\n            ref: function (_ref) {\r\n                self.table = _ref;\r\n                o.el.ref && o.el.ref.call(this, _ref);\r\n            }\r\n        }), {\r\n            type: \"bi.absolute\",\r\n            items: [{\r\n                el: this._createResizerHandler(),\r\n                left: 0,\r\n                top: 0,\r\n                bottom: 0\r\n            }, {\r\n                el: {\r\n                    type: \"bi.layout\",\r\n                    cls: \"resizable-table-resizer\",\r\n                    invisible: true,\r\n                    width: 2,\r\n                    ref: function (_ref) {\r\n                        self.resizer = _ref;\r\n                    }\r\n                },\r\n                left: 0,\r\n                top: 0\r\n            }]\r\n        }];\r\n    },\r\n\r\n    mounted: function () {\r\n        var self = this, o = this.options;\r\n        var size = 0, offset = 0, defaultSize = 0, start = false;\r\n        this._populate();\r\n        var mouseMoveTracker = new BI.MouseMoveTracker(function (deltaX, deltaY) {\r\n            if (mouseMoveTracker.isDragging()) {\r\n                start = true;\r\n                offset += deltaX;\r\n                size = BI.clamp(defaultSize + offset, 30, o.width - 40);\r\n\r\n                self.regionResizerHandler.element.addClass(\"dragging\");\r\n                self._setRegionResizerHandlerPosition(size - 3, 0);\r\n            }\r\n\r\n        }, function () {\r\n            if (start === true) {\r\n                o.regionColumnSize[0] = BI.clamp(size, 30, (o.width || self.element.width()) - 40);\r\n                self.table.setRegionColumnSize(o.regionColumnSize);\r\n                // if (o.isResizeAdapt === true) {\r\n                //     var freezeColumnSize = self._getFreezeColumnSize();\r\n                //     o.columnSize[self._getFreezeColLength() - 1] += o.regionColumnSize[0] - freezeColumnSize;\r\n                //     self.table.setColumnSize(o.columnSize);\r\n                // }\r\n                // self.table.populate();\r\n                self._populate();\r\n                self.regionResizerHandler.element.removeClass(\"dragging\");\r\n                self.fireEvent(BI.Table.EVENT_TABLE_AFTER_REGION_RESIZE);\r\n                start = false;\r\n            }\r\n            mouseMoveTracker.releaseMouseMoves();\r\n        }, _global.document);\r\n        this.regionResizerHandler.element.on(\"mousedown\", function (event) {\r\n            defaultSize = size = self._getRegionSize();\r\n            offset = 0;\r\n            self._setResizerPosition(0, 0);\r\n            mouseMoveTracker.captureMouseMoves(event);\r\n        });\r\n    },\r\n\r\n    _mergeRule: function (row1, row2) {\r\n        var o = this.options;\r\n        if (row1.type === \"bi.resizable_table_cell\") {\r\n            row1 = row1.cell;\r\n        }\r\n        if (row2.type === \"bi.resizable_table_cell\") {\r\n            row2 = row2.cell;\r\n        }\r\n        return o.mergeRule(row1, row2);\r\n    },\r\n\r\n    _createResizerHandler: function () {\r\n        var self = this;\r\n        return {\r\n            type: \"bi.absolute\",\r\n            cls: \"resizable-table-region-resizer\",\r\n            invisible: true,\r\n            width: 6,\r\n            items: [{\r\n                el: {\r\n                    type: \"bi.layout\",\r\n                    width: 2,\r\n                    cls: \"resizable-table-region-resizer-knob\"\r\n                },\r\n                left: 2,\r\n                top: 0,\r\n                bottom: 0\r\n            }],\r\n            ref: function (_ref) {\r\n                self.regionResizerHandler = _ref;\r\n            }\r\n        };\r\n    },\r\n\r\n    _setResizerPosition: function (left, top) {\r\n        this.resizer.element.css({\r\n            left: left + \"px\",\r\n            top: top + \"px\"\r\n        });\r\n    },\r\n\r\n    _setRegionResizerHandlerPosition: function (left, top) {\r\n        this.regionResizerHandler.element.css({\r\n            left: left + \"px\",\r\n            top: top + \"px\"\r\n        });\r\n    },\r\n\r\n    _getRegionSize: function () {\r\n        var o = this.options;\r\n        var regionSize = o.regionColumnSize[0] || 0;\r\n        if (o.isNeedFreeze === false || o.freezeCols.length === 0) {\r\n            return 0;\r\n        }\r\n        if (!regionSize) {\r\n            BI.each(o.freezeCols, function (i, col) {\r\n                regionSize += o.columnSize[col];\r\n            });\r\n        }\r\n        return regionSize;\r\n    },\r\n\r\n    _getHeaderHeight: function () {\r\n        var o = this.options;\r\n        var headerHeights = this.table.getFirstColumnHeaderRowSize && this.table.getFirstColumnHeaderRowSize();\r\n        return headerHeights ? BI.sum(headerHeights) : o.headerRowSize * o.header.length;\r\n    },\r\n\r\n    _getItemsHeight: function () {\r\n        var o = this.options;\r\n        return this.table.getFirstColumnRowSize ? BI.sum(this.table.getFirstColumnRowSize()) : o.items.length * o.rowSize;\r\n    },\r\n\r\n    _getRegionRowSize: function () {\r\n        var o = this.options;\r\n        var headerHeight = this._getHeaderHeight();\r\n        var itemHeight = this._getItemsHeight();\r\n        return [headerHeight,\r\n            Math.min((o.height || this.element.height()) - headerHeight, itemHeight)];\r\n    },\r\n\r\n    _getFreezeColLength: function () {\r\n        var o = this.options;\r\n        return o.isNeedFreeze === true ? BI.clamp(o.freezeCols.length, 0, o.columnSize.length) : 0;\r\n    },\r\n\r\n    _getFreezeColumnSize: function () {\r\n        var columnSize = this.options.columnSize;\r\n        var sum = 0;\r\n        for (var i = 0, len = this._getFreezeColLength(); i < len; i++) {\r\n            sum += columnSize[i];\r\n        }\r\n        return sum;\r\n    },\r\n\r\n    _getResizerLeft: function (j, resizeObj) {\r\n        var tableOffsetLeft = this.element.offset().left;\r\n        return resizeObj.element.offset().left - tableOffsetLeft;\r\n    },\r\n\r\n    _formatHeader: function (header) {\r\n        var self = this, o = this.options;\r\n        if (!o.isNeedResize) {\r\n            return header;\r\n        }\r\n        var result = [];\r\n        var resize = function (j, size, resizeObj) {\r\n            self.resizer.setVisible(true);\r\n            var rowSize = self._getRegionRowSize();\r\n            var height = rowSize[0] + rowSize[1];\r\n            self.resizer.setHeight(height);\r\n            // TODO 不知道为什么加入这段代码会使得列宽调整出问题\r\n            // if (o.minColumnSize[j]) {\r\n            //     if (size === o.minColumnSize[j]) {\r\n            //         self.resizer.element.addClass(\"suitable\");\r\n            //     } else {\r\n            //         self.resizer.element.removeClass(\"suitable\");\r\n            //     }\r\n            // }\r\n            self._setResizerPosition(self._getResizerLeft(j, resizeObj) + size, 0);\r\n        };\r\n\r\n        var stop = function (j, size) {\r\n            self.resizer.setVisible(false);\r\n            var columnSize = o.columnSize.slice();\r\n            columnSize[j] = size;\r\n            // 缩小单列宽度，若有多余宽（容器宽度>总列宽）\r\n            var freezeColLength = self._getFreezeColLength();\r\n            var freezeContainerWidth = self._getRegionSize();\r\n            var unFreezeContainerWidth = (o.width || self.element.width()) - BI.GridTableScrollbar.SIZE - freezeContainerWidth;\r\n            var totalColumnWidth = 0;\r\n            var remainWidth = 0;\r\n            if (j < freezeColLength) {\r\n                // 调整冻结列宽\r\n                remainWidth = freezeContainerWidth - BI.sum(columnSize.slice(0, freezeColLength));\r\n                if (remainWidth > 0) {\r\n                    // 无滚动条且缩小\r\n                    if (j === freezeColLength - 1) {\r\n                        // 若为冻结列最后一列，则将多余宽度按比例分配给该列右侧的所有列，冻结区域宽度相应需要有所调整。\r\n                        totalColumnWidth = BI.sum(columnSize.slice(j + 1));\r\n                        BI.each(columnSize, function (idx, columnWidth) {\r\n                            idx > j && (columnSize[idx] = Math.floor(columnWidth + remainWidth * columnWidth / totalColumnWidth));\r\n                        });\r\n                        freezeContainerWidth -= remainWidth;\r\n                    } else {\r\n                        // 若非缩小冻结列最后一列，则将多余宽度按比例分配给该列右侧冻结列\r\n                        totalColumnWidth = BI.sum(columnSize.slice(j + 1, freezeColLength));\r\n                        BI.each(columnSize, function (idx, columnWidth) {\r\n                            idx > j && idx < freezeColLength && (columnSize[idx] = Math.floor(columnWidth + remainWidth * columnWidth / totalColumnWidth));\r\n                        });\r\n                    }\r\n                }\r\n            } else {\r\n                // 调整非冻结列宽\r\n                remainWidth = unFreezeContainerWidth - BI.sum(columnSize.slice(freezeColLength));\r\n                if (remainWidth > 0) {\r\n                    // 无滚动条且缩小\r\n                    if (j === BI.size(columnSize) - 1) {\r\n                        // 缩小最后一列，按比例将缩小的宽度分配给其他列（包括冻结列）。冻结区域宽度相应需要有所调整。\r\n                        totalColumnWidth = BI.sum(columnSize.slice(0, BI.size(columnSize) - 1));\r\n                        BI.each(columnSize, function (idx, columnWidth) {\r\n                            var increaseWidth = Math.floor(remainWidth * columnWidth / totalColumnWidth);\r\n                            if (idx < j) {\r\n                                columnSize[idx] = columnWidth + increaseWidth;\r\n                                if (idx < freezeColLength) {\r\n                                    freezeContainerWidth += increaseWidth;\r\n                                }\r\n                            }\r\n                        });\r\n                    } else {\r\n                        // 若非最后一列，则将多余宽度按比例分配给该列右侧的非冻结列\r\n                        totalColumnWidth = BI.sum(columnSize.slice(j + 1));\r\n                        BI.each(columnSize, function (idx, columnWidth) {\r\n                            idx > j && (columnSize[idx] = Math.floor(columnWidth + remainWidth * columnWidth / totalColumnWidth));\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n            o.columnSize = columnSize;\r\n            self.setColumnSize(columnSize);\r\n            self.setRegionColumnSize([freezeContainerWidth]);\r\n            self._populate();\r\n            self.fireEvent(BI.Table.EVENT_TABLE_AFTER_COLUMN_RESIZE, j);\r\n        };\r\n\r\n        BI.each(header, function (i, cols) {\r\n            if (i === header.length - 1) {\r\n                result[i] = [];\r\n                BI.each(cols, function (j, col) {\r\n                    result[i][j] = {\r\n                        type: \"bi.resizable_table_cell\",\r\n                        cell: col,\r\n                        suitableSize: o.minColumnSize[j],\r\n                        maxSize: o.maxColumnSize[j],\r\n                        resize: BI.bind(resize, null, j),\r\n                        stop: BI.bind(stop, null, j),\r\n                    };\r\n                    if (o.isNeedMerge) {\r\n                        var r = i;\r\n                        while (r > 0 && self._mergeRule(result[r][j], result[r - 1][j])) {\r\n                            result[r - 1][j] = {\r\n                                type: \"bi.resizable_table_cell\",\r\n                                cell: result[r - 1][j],\r\n                                suitableSize: o.minColumnSize[j],\r\n                                maxSize: o.maxColumnSize[j],\r\n                                resize: BI.bind(resize, null, j),\r\n                                stop: BI.bind(stop, null, j),\r\n                            };\r\n                            r--;\r\n                        }\r\n                    }\r\n                });\r\n            } else {\r\n                result.push(cols);\r\n            }\r\n        });\r\n        return result;\r\n    },\r\n\r\n    _populate: function () {\r\n        var o = this.options;\r\n        var regionSize = this._getRegionSize();\r\n        if (regionSize > 0) {\r\n            this.regionResizerHandler.setVisible(true);\r\n            this._setRegionResizerHandlerPosition(regionSize - 3, this._getHeaderHeight());\r\n        } else {\r\n            this.regionResizerHandler.setVisible(false);\r\n        }\r\n    },\r\n\r\n    setWidth: function (width) {\r\n        BI.ResizableTable.superclass.setWidth.apply(this, arguments);\r\n        this.table.setWidth(width);\r\n    },\r\n\r\n    setHeight: function (height) {\r\n        BI.ResizableTable.superclass.setHeight.apply(this, arguments);\r\n        this.table.setHeight(height);\r\n    },\r\n\r\n    setVerticalScroll: function (scrollTop) {\r\n        this.table.setVerticalScroll(scrollTop);\r\n    },\r\n\r\n    setLeftHorizontalScroll: function (scrollLeft) {\r\n        this.table.setLeftHorizontalScroll(scrollLeft);\r\n    },\r\n\r\n    setRightHorizontalScroll: function (scrollLeft) {\r\n        this.table.setRightHorizontalScroll(scrollLeft);\r\n    },\r\n\r\n    setColumnSize: function (columnSize) {\r\n        this.options.columnSize = columnSize;\r\n        this.table.setColumnSize(columnSize);\r\n    },\r\n\r\n    getColumnSize: function () {\r\n        return this.table.getColumnSize();\r\n    },\r\n\r\n    getFirstColumnHeaderRowSize: function () {\r\n        return this.table.getFirstColumnHeaderRowSize();\r\n    },\r\n\r\n    getFirstColumnRowSize: function () {\r\n        return this.table.getFirstColumnRowSize();\r\n    },\r\n\r\n    setRegionColumnSize: function (columnSize) {\r\n        this.options.regionColumnSize = columnSize;\r\n        this.table.setRegionColumnSize(columnSize);\r\n    },\r\n\r\n    getRegionColumnSize: function () {\r\n        return this.table.getRegionColumnSize();\r\n    },\r\n\r\n    getVerticalScroll: function () {\r\n        return this.table.getVerticalScroll();\r\n    },\r\n\r\n    getLeftHorizontalScroll: function () {\r\n        return this.table.getLeftHorizontalScroll();\r\n    },\r\n\r\n    getRightHorizontalScroll: function () {\r\n        return this.table.getRightHorizontalScroll();\r\n    },\r\n\r\n    getActualRightHorizontalScroll: function() {\r\n        return this.table.getActualRightHorizontalScroll();\r\n    },\r\n\r\n    attr: function () {\r\n        BI.ResizableTable.superclass.attr.apply(this, arguments);\r\n        return this.table.attr.apply(this.table, arguments);\r\n    },\r\n\r\n    restore: function () {\r\n        this.table.restore();\r\n    },\r\n\r\n    populate: function (items, header) {\r\n        if (items) {\r\n            this.options.items = items;\r\n        }\r\n        if (header) {\r\n            this.options.header = header;\r\n            if (this.options.isNeedResize) {\r\n                header = this._formatHeader(header);\r\n            }\r\n        }\r\n        this.table.populate(items, header);\r\n        this._populate();\r\n    }\r\n});\r\n\r\nBI.shortcut(\"bi.resizable_table\", BI.ResizableTable);\r\n","/**\r\n * 列宽自适应的表格\r\n * 1.列宽支持传递\"\"表示自动，在自动列宽的前提下，列宽会平分剩余宽度\r\n * 2.自动列宽前提下，区域列宽变化会和列宽变化同步，当区域列宽过小时，列宽最小值为minColumnSize\r\n *\r\n * Created by GUY on 2021/9/10.\r\n * @class BI.ColumnSizeAdaptiveTable\r\n * @extends BI.Widget\r\n */\r\nBI.ColumnSizeAdaptiveTable = BI.inherit(BI.Widget, {\r\n\r\n    _defaultConfig: function () {\r\n        return BI.extend(BI.ColumnSizeAdaptiveTable.superclass._defaultConfig.apply(this, arguments), {\r\n            baseCls: \"bi-column-size-adaptive-table\",\r\n            el: {\r\n                type: \"bi.resizable_table\"\r\n            },\r\n            isNeedResize: true,\r\n            isNeedFreeze: false, // 是否需要冻结单元格\r\n            freezeCols: [], // 冻结的列号,从0开始,isNeedFreeze为true时生效\r\n\r\n            isNeedMerge: false, // 是否需要合并单元格\r\n            mergeCols: [], // 合并的单元格列号\r\n            mergeRule: BI.emptyFn,\r\n\r\n            columnSize: [],\r\n            minColumnSize: [],\r\n            maxColumnSize: [],\r\n\r\n            headerRowSize: 25,\r\n            rowSize: 25,\r\n\r\n            regionColumnSize: [],\r\n\r\n            header: [],\r\n            items: [], // 二维数组\r\n\r\n            // 交叉表头\r\n            crossHeader: [],\r\n            crossItems: []\r\n        });\r\n    },\r\n\r\n    _init: function () {\r\n        BI.ColumnSizeAdaptiveTable.superclass._init.apply(this, arguments);\r\n        var self = this, o = this.options;\r\n\r\n        var data = this._digest();\r\n        this.table = BI.createWidget(o.el, {\r\n            type: \"bi.resizable_table\",\r\n            element: this,\r\n            width: o.width,\r\n            height: o.height,\r\n            isNeedResize: o.isNeedResize,\r\n\r\n            isNeedFreeze: o.isNeedFreeze,\r\n            freezeCols: data.freezeCols,\r\n\r\n            isNeedMerge: o.isNeedMerge,\r\n            mergeCols: o.mergeCols,\r\n            mergeRule: o.mergeRule,\r\n\r\n            columnSize: data.columnSize,\r\n\r\n            headerRowSize: o.headerRowSize,\r\n            rowSize: o.rowSize,\r\n\r\n            regionColumnSize: data.regionColumnSize,\r\n\r\n            header: o.header,\r\n            items: o.items,\r\n            // 交叉表头\r\n            crossHeader: o.crossHeader,\r\n            crossItems: o.crossItems\r\n        });\r\n        this.table.on(BI.Table.EVENT_TABLE_SCROLL, function () {\r\n            self.fireEvent(BI.Table.EVENT_TABLE_SCROLL, arguments);\r\n        });\r\n        this.table.on(BI.Table.EVENT_TABLE_AFTER_REGION_RESIZE, function () {\r\n            o.regionColumnSize = this.getRegionColumnSize();\r\n            self._populate();\r\n            self.table.populate();\r\n            self.fireEvent(BI.Table.EVENT_TABLE_AFTER_REGION_RESIZE, arguments);\r\n        });\r\n\r\n        this.table.on(BI.Table.EVENT_TABLE_AFTER_COLUMN_RESIZE, function (index) {\r\n            // 谁resize了谁改\r\n            o.columnSize[index] = this.getColumnSize()[index];\r\n            // o.regionColumnSize = this.getRegionColumnSize();\r\n            self._populate();\r\n            self.table.populate();\r\n            self.fireEvent(BI.Table.EVENT_TABLE_AFTER_COLUMN_RESIZE, arguments);\r\n        });\r\n    },\r\n\r\n    _getFreezeColLength: function () {\r\n        var o = this.options;\r\n        if (o.isNeedFreeze === true) {\r\n            // 冻结列与总列数相同时\r\n            if (o.freezeCols.length === o.columnSize.length) {\r\n                return 0;\r\n            }\r\n            return BI.clamp(o.freezeCols.length, 0, o.columnSize.length);\r\n        }\r\n        return 0;\r\n    },\r\n\r\n    _digest: function () {\r\n        var o = this.options;\r\n        var regionColumnSize = o.regionColumnSize.slice();\r\n        var freezeCols = o.freezeCols.slice();\r\n        var regionSize = o.regionColumnSize[0];\r\n        var freezeColLength = this._getFreezeColLength();\r\n\r\n        var emptyColumns = [];\r\n        var allColumnSize = BI.sum(o.columnSize, function (i, size) {\r\n            return size || 0;\r\n        });\r\n        BI.each(o.columnSize, function (i, size) {\r\n            if (!size) {\r\n                emptyColumns.push(i);\r\n            }\r\n        });\r\n        // 空列就平分剩下的宽度\r\n        var emptyColumnSize = (o.width - BI.GridTableScrollbar.SIZE - allColumnSize) / emptyColumns.length;\r\n        var columnSize = o.columnSize.map(function (size, i) {\r\n            if (!size) {\r\n                if (o.minColumnSize[i]) {\r\n                    return BI.clamp(emptyColumnSize, o.minColumnSize, o.width - BI.GridTableScrollbar.SIZE);\r\n                }\r\n                return emptyColumnSize;\r\n            }\r\n            return size;\r\n        });\r\n\r\n        if (!regionSize || regionSize > o.width - BI.GridTableScrollbar.SIZE || regionSize < BI.GridTableScrollbar.SIZE) {\r\n            var rs = BI.sum(columnSize, function (i, size) {\r\n                if (i < freezeColLength) {\r\n                    return size;\r\n                }\r\n                return 0;\r\n            });\r\n            regionSize = BI.clamp(rs, 0, 4 / 5 * o.width);\r\n        }\r\n        if (freezeColLength === 0) {\r\n            regionSize = 0;\r\n        }\r\n        if (freezeCols.length >= columnSize.length) {\r\n            freezeCols = [];\r\n        }\r\n        var summaryFreezeColumnSize = 0, summaryColumnSize = 0;\r\n        BI.each(columnSize, function (i, size) {\r\n            if (i < freezeColLength) {\r\n                summaryFreezeColumnSize += size;\r\n            }\r\n            summaryColumnSize += size;\r\n        });\r\n        // 区域列宽宽度总和不大于区域宽度\r\n        if (freezeColLength > 0 && summaryFreezeColumnSize < regionSize) {\r\n            columnSize[freezeColLength - 1] += regionSize - summaryFreezeColumnSize;\r\n        }\r\n        // 区域列宽宽度总和大于区域宽度\r\n        if (freezeColLength > 0 && summaryFreezeColumnSize > regionSize) {\r\n            columnSize[freezeColLength - 1] = regionSize - (summaryFreezeColumnSize - columnSize[freezeColLength - 1]);\r\n            if (columnSize[freezeColLength - 1] < (o.minColumnSize[freezeColLength - 1] || emptyColumnSize)) {\r\n                columnSize[freezeColLength - 1] = o.minColumnSize[freezeColLength - 1] || emptyColumnSize;\r\n            }\r\n        }\r\n        // 冻结只取冻结区域宽度\r\n        var actualSize = summaryColumnSize;\r\n        if (o.isNeedFreeze && freezeColLength > 0) {\r\n            actualSize = summaryColumnSize - summaryFreezeColumnSize + regionSize;\r\n        }\r\n        // 列宽总和不大于表格总宽度\r\n        if (columnSize.length > 0 && actualSize < o.width - BI.GridTableScrollbar.SIZE) {\r\n            // BI-49217 列宽总和小于表格总宽度（容器宽度）时，将最后一列重新赋值，以使其填满容器\r\n            columnSize[columnSize.length - 1] = o.width - BI.GridTableScrollbar.SIZE - regionSize - (summaryColumnSize - summaryFreezeColumnSize - columnSize[columnSize.length - 1]);\r\n        }\r\n        regionColumnSize[0] = regionSize;\r\n\r\n        return {\r\n            freezeCols: freezeCols,\r\n            columnSize: columnSize,\r\n            regionColumnSize: regionColumnSize\r\n        };\r\n    },\r\n\r\n    _populate: function () {\r\n        var o = this.options;\r\n        var data = this._digest();\r\n        // o.regionColumnSize = data.regionColumnSize;\r\n        // o.columnSize = data.columnSize;\r\n        this.table.setColumnSize(data.columnSize);\r\n        this.table.setRegionColumnSize(data.regionColumnSize);\r\n        this.table.attr(\"freezeCols\", data.freezeCols);\r\n    },\r\n\r\n    setWidth: function (width) {\r\n        BI.ColumnSizeAdaptiveTable.superclass.setWidth.apply(this, arguments);\r\n        this.table.setWidth(width);\r\n    },\r\n\r\n    setHeight: function (height) {\r\n        BI.ColumnSizeAdaptiveTable.superclass.setHeight.apply(this, arguments);\r\n        this.table.setHeight(height);\r\n    },\r\n\r\n    setColumnSize: function (columnSize) {\r\n        this.options.columnSize = columnSize;\r\n    },\r\n\r\n    getColumnSize: function () {\r\n        return this.table.getColumnSize();\r\n    },\r\n\r\n    setRegionColumnSize: function (regionColumnSize) {\r\n        this.options.regionColumnSize = regionColumnSize;\r\n    },\r\n\r\n    getRegionColumnSize: function () {\r\n        return this.table.getRegionColumnSize();\r\n    },\r\n\r\n    setVerticalScroll: function (scrollTop) {\r\n        this.table.setVerticalScroll(scrollTop);\r\n    },\r\n\r\n    setLeftHorizontalScroll: function (scrollLeft) {\r\n        this.table.setLeftHorizontalScroll(scrollLeft);\r\n    },\r\n\r\n    setRightHorizontalScroll: function (scrollLeft) {\r\n        this.table.setRightHorizontalScroll(scrollLeft);\r\n    },\r\n\r\n    getVerticalScroll: function () {\r\n        return this.table.getVerticalScroll();\r\n    },\r\n\r\n    getLeftHorizontalScroll: function () {\r\n        return this.table.getLeftHorizontalScroll();\r\n    },\r\n\r\n    getRightHorizontalScroll: function () {\r\n        return this.table.getRightHorizontalScroll();\r\n    },\r\n\r\n    attr: function (key, value) {\r\n        var v = BI.ColumnSizeAdaptiveTable.superclass.attr.apply(this, arguments);\r\n        if (key === \"freezeCols\") {\r\n            return v;\r\n        }\r\n        return this.table.attr.apply(this.table, arguments);\r\n    },\r\n\r\n    restore: function () {\r\n        this.table.restore();\r\n    },\r\n\r\n    populate: function (items) {\r\n        var self = this, o = this.options;\r\n        this._populate();\r\n        this.table.populate.apply(this.table, arguments);\r\n    },\r\n\r\n    destroy: function () {\r\n        this.table.destroy();\r\n        BI.ColumnSizeAdaptiveTable.superclass.destroy.apply(this, arguments);\r\n    }\r\n});\r\nBI.shortcut(\"bi.column_size_adaptive_table\", BI.ColumnSizeAdaptiveTable);\r\n","/**\r\n * 自适应宽度的表格\r\n *\r\n * Created by GUY on 2016/2/3.\r\n * @class BI.AdaptiveTable\r\n * @extends BI.Widget\r\n */\r\nBI.AdaptiveTable = BI.inherit(BI.Widget, {\r\n\r\n    _defaultConfig: function () {\r\n        return BI.extend(BI.AdaptiveTable.superclass._defaultConfig.apply(this, arguments), {\r\n            baseCls: \"bi-adaptive-table\",\r\n            el: {\r\n                type: \"bi.resizable_table\"\r\n            },\r\n            isNeedResize: true,\r\n            isNeedFreeze: false, // 是否需要冻结单元格\r\n            freezeCols: [], // 冻结的列号,从0开始,isNeedFreeze为true时生效\r\n\r\n            isNeedMerge: false, // 是否需要合并单元格\r\n            mergeCols: [], // 合并的单元格列号\r\n            mergeRule: BI.emptyFn,\r\n\r\n            columnSize: [],\r\n            minColumnSize: [],\r\n            maxColumnSize: [],\r\n\r\n            headerRowSize: 25,\r\n            rowSize: 25,\r\n\r\n            regionColumnSize: [],\r\n\r\n            header: [],\r\n            items: [], // 二维数组\r\n\r\n            // 交叉表头\r\n            crossHeader: [],\r\n            crossItems: []\r\n        });\r\n    },\r\n\r\n    _init: function () {\r\n        BI.AdaptiveTable.superclass._init.apply(this, arguments);\r\n        var self = this, o = this.options;\r\n\r\n        var data = this._digest();\r\n        this.table = BI.createWidget(o.el, {\r\n            type: \"bi.resizable_table\",\r\n            element: this,\r\n            width: o.width,\r\n            height: o.height,\r\n            isNeedResize: o.isNeedResize,\r\n\r\n            isNeedFreeze: o.isNeedFreeze,\r\n            freezeCols: data.freezeCols,\r\n\r\n            isNeedMerge: o.isNeedMerge,\r\n            mergeCols: o.mergeCols,\r\n            mergeRule: o.mergeRule,\r\n\r\n            columnSize: data.columnSize,\r\n\r\n            headerRowSize: o.headerRowSize,\r\n            rowSize: o.rowSize,\r\n\r\n            regionColumnSize: data.regionColumnSize,\r\n\r\n            header: o.header,\r\n            items: o.items,\r\n            // 交叉表头\r\n            crossHeader: o.crossHeader,\r\n            crossItems: o.crossItems\r\n        });\r\n        this.table.on(BI.Table.EVENT_TABLE_SCROLL, function () {\r\n            self.fireEvent(BI.Table.EVENT_TABLE_SCROLL, arguments);\r\n        });\r\n        this.table.on(BI.Table.EVENT_TABLE_AFTER_REGION_RESIZE, function () {\r\n            o.regionColumnSize = this.getRegionColumnSize();\r\n            self._populate();\r\n            self.table.populate();\r\n            self.fireEvent(BI.Table.EVENT_TABLE_AFTER_REGION_RESIZE, arguments);\r\n        });\r\n\r\n        this.table.on(BI.Table.EVENT_TABLE_AFTER_COLUMN_RESIZE, function () {\r\n            o.columnSize = this.getColumnSize();\r\n            o.regionColumnSize = this.getRegionColumnSize();\r\n            self._populate();\r\n            self.table.populate();\r\n            self.fireEvent(BI.Table.EVENT_TABLE_AFTER_COLUMN_RESIZE, arguments);\r\n        });\r\n    },\r\n\r\n    _getFreezeColLength: function () {\r\n        var o = this.options;\r\n        if (o.isNeedFreeze === true) {\r\n            // 冻结列与总列数相同时\r\n            if (o.freezeCols.length === o.columnSize.length) {\r\n                return 0;\r\n            }\r\n            return BI.clamp(o.freezeCols.length, 0, o.columnSize.length);\r\n        }\r\n        return 0;\r\n    },\r\n\r\n    _digest: function () {\r\n        var o = this.options;\r\n        var columnSize = o.columnSize.slice();\r\n        var regionColumnSize = o.regionColumnSize.slice();\r\n        var freezeCols = o.freezeCols.slice();\r\n        var regionSize = o.regionColumnSize[0];\r\n        var freezeColLength = this._getFreezeColLength();\r\n        if (!regionSize || regionSize > o.width - BI.GridTableScrollbar.SIZE || regionSize < BI.GridTableScrollbar.SIZE) {\r\n            var rs = BI.sum(columnSize, function (i, size) {\r\n                if (i < freezeColLength) {\r\n                    return size;\r\n                }\r\n                return 0;\r\n            });\r\n            regionSize = BI.clamp(rs, 1 / 5 * o.width, 4 / 5 * o.width);\r\n        }\r\n        if (freezeColLength === 0) {\r\n            regionSize = 0;\r\n        }\r\n        if (freezeCols.length >= columnSize.length) {\r\n            freezeCols = [];\r\n        }\r\n        if (!BI.isNumber(columnSize[0])) {\r\n            columnSize = o.minColumnSize.slice();\r\n        }\r\n        var summaryFreezeColumnSize = 0, summaryColumnSize = 0;\r\n        BI.each(columnSize, function (i, size) {\r\n            if (i < freezeColLength) {\r\n                summaryFreezeColumnSize += size;\r\n            }\r\n            summaryColumnSize += size;\r\n        });\r\n        if (freezeColLength > 0 && summaryFreezeColumnSize < regionSize) {\r\n            columnSize[freezeColLength - 1] += regionSize - summaryFreezeColumnSize;\r\n        }\r\n        // 冻结只取冻结区域宽度\r\n        var actualSize = summaryColumnSize;\r\n        if (o.isNeedFreeze && freezeColLength > 0) {\r\n            actualSize = summaryColumnSize - summaryFreezeColumnSize + regionSize;\r\n        }\r\n        // 列宽总和不大于表格总宽度\r\n        if (columnSize.length > 0 && actualSize < o.width - BI.GridTableScrollbar.SIZE) {\r\n            // BI-49217 列宽总和小于表格总宽度（容器宽度）时，将最后一列重新赋值，以使其填满容器\r\n            columnSize[columnSize.length - 1] = o.width - BI.GridTableScrollbar.SIZE - regionSize - (summaryColumnSize - summaryFreezeColumnSize - columnSize[columnSize.length - 1]);\r\n        }\r\n        regionColumnSize[0] = regionSize;\r\n\r\n        return {\r\n            freezeCols: freezeCols,\r\n            columnSize: columnSize,\r\n            regionColumnSize: regionColumnSize\r\n        };\r\n    },\r\n\r\n    _populate: function () {\r\n        var o = this.options;\r\n        var data = this._digest();\r\n        o.regionColumnSize = data.regionColumnSize;\r\n        o.columnSize = data.columnSize;\r\n        this.table.setColumnSize(data.columnSize);\r\n        this.table.setRegionColumnSize(data.regionColumnSize);\r\n        this.table.attr(\"freezeCols\", data.freezeCols);\r\n    },\r\n\r\n    setWidth: function (width) {\r\n        BI.AdaptiveTable.superclass.setWidth.apply(this, arguments);\r\n        this.table.setWidth(width);\r\n    },\r\n\r\n    setHeight: function (height) {\r\n        BI.AdaptiveTable.superclass.setHeight.apply(this, arguments);\r\n        this.table.setHeight(height);\r\n    },\r\n\r\n    setColumnSize: function (columnSize) {\r\n        this.options.columnSize = columnSize;\r\n    },\r\n\r\n    getColumnSize: function () {\r\n        return this.table.getColumnSize();\r\n    },\r\n\r\n    getFirstColumnHeaderRowSize: function () {\r\n        return this.table.getFirstColumnHeaderRowSize();\r\n    },\r\n\r\n    getFirstColumnRowSize: function () {\r\n        return this.table.getFirstColumnRowSize();\r\n    },\r\n\r\n    setRegionColumnSize: function (regionColumnSize) {\r\n        this.options.regionColumnSize = regionColumnSize;\r\n    },\r\n\r\n    getRegionColumnSize: function () {\r\n        return this.table.getRegionColumnSize();\r\n    },\r\n\r\n    setVerticalScroll: function (scrollTop) {\r\n        this.table.setVerticalScroll(scrollTop);\r\n    },\r\n\r\n    setLeftHorizontalScroll: function (scrollLeft) {\r\n        this.table.setLeftHorizontalScroll(scrollLeft);\r\n    },\r\n\r\n    setRightHorizontalScroll: function (scrollLeft) {\r\n        this.table.setRightHorizontalScroll(scrollLeft);\r\n    },\r\n\r\n    getVerticalScroll: function () {\r\n        return this.table.getVerticalScroll();\r\n    },\r\n\r\n    getLeftHorizontalScroll: function () {\r\n        return this.table.getLeftHorizontalScroll();\r\n    },\r\n\r\n    getRightHorizontalScroll: function () {\r\n        return this.table.getRightHorizontalScroll();\r\n    },\r\n\r\n    attr: function (key, value) {\r\n        var v = BI.AdaptiveTable.superclass.attr.apply(this, arguments);\r\n        if (key === \"freezeCols\") {\r\n            return v;\r\n        }\r\n        return this.table.attr.apply(this.table, arguments);\r\n    },\r\n\r\n    restore: function () {\r\n        this.table.restore();\r\n    },\r\n\r\n    populate: function (items) {\r\n        var self = this, o = this.options;\r\n        this._populate();\r\n        this.table.populate.apply(this.table, arguments);\r\n    },\r\n\r\n    destroy: function () {\r\n        this.table.destroy();\r\n        BI.AdaptiveTable.superclass.destroy.apply(this, arguments);\r\n    }\r\n});\r\nBI.shortcut(\"bi.adaptive_table\", BI.AdaptiveTable);\r\n","/**\r\n *\r\n * 层级树状结构的表格\r\n *\r\n * Created by GUY on 2016/8/12.\r\n * @class BI.DynamicSummaryLayerTreeTable\r\n * @extends BI.Widget\r\n */\r\nBI.DynamicSummaryLayerTreeTable = BI.inherit(BI.Widget, {\r\n    _defaultConfig: function () {\r\n        return BI.extend(BI.DynamicSummaryLayerTreeTable.superclass._defaultConfig.apply(this, arguments), {\r\n            baseCls: \"bi-dynamic-summary-layer-tree-table\",\r\n\r\n            el: {\r\n                type: \"bi.resizable_table\"\r\n            },\r\n            isNeedResize: true, // 是否需要调整列宽\r\n\r\n            isNeedFreeze: false, // 是否需要冻结单元格\r\n            freezeCols: [], // 冻结的列号,从0开始,isNeedFreeze为tree时生效\r\n\r\n            isNeedMerge: true, // 是否需要合并单元格\r\n            mergeCols: [],\r\n            mergeRule: BI.emptyFn,\r\n\r\n            columnSize: [],\r\n            minColumnSize: [],\r\n            maxColumnSize: [],\r\n            headerRowSize: 25,\r\n            footerRowSize: 25,\r\n            rowSize: 25,\r\n\r\n            regionColumnSize: [],\r\n\r\n            // 行表头\r\n            rowHeaderCreator: null,\r\n\r\n            headerCellStyleGetter: BI.emptyFn,\r\n            summaryCellStyleGetter: BI.emptyFn,\r\n            sequenceCellStyleGetter: BI.emptyFn,\r\n            // 传给汇总、序号单元格的store，能在单元格绘制时使用上下文中的cssScale\r\n            tableStyleCellStoreGetter: null,\r\n\r\n            header: [],\r\n            footer: false,\r\n            items: [],\r\n\r\n            // 交叉表头\r\n            crossHeader: [],\r\n            crossItems: [],\r\n\r\n            // 汇总行位置\r\n            summaryText: BI.i18nText(\"BI-Summary_Values\"),\r\n            rowPosition: \"bottom\",\r\n            colPosition: \"right\"\r\n        });\r\n    },\r\n\r\n    _getVDeep: function () {\r\n        return this.options.crossHeader.length;// 纵向深度\r\n    },\r\n\r\n    _getHDeep: function () {\r\n        var o = this.options;\r\n        return Math.max(o.mergeCols.length, o.freezeCols.length, BI.TableTree.maxDeep(o.items) - 1);\r\n    },\r\n\r\n    _createHeader: function (vDeep) {\r\n        var self = this, o = this.options;\r\n        var header = o.header || [], crossHeader = o.crossHeader || [];\r\n        var items = BI.isEmpty(header) ? BI.TableTree.formatCrossItems4Special(o.crossItems, vDeep, o.headerCellStyleGetter, {\r\n            sumPosition: this.options.colPosition === \"right\",\r\n            summaryText: o.summaryText\r\n        }) : BI.TableTree.formatCrossItems(o.crossItems, vDeep, o.headerCellStyleGetter, {\r\n            sumPosition: this.options.colPosition === \"right\",\r\n            summaryText: o.summaryText\r\n        });\r\n        var result = [];\r\n        BI.each(items, function (row, node) {\r\n            var c = [crossHeader[row]];\r\n            result.push(c.concat(node || []));\r\n        });\r\n        var rowHeaderCreator = BI.isFunction(o.rowHeaderCreator) ? o.rowHeaderCreator() : o.rowHeaderCreator;\r\n        if (header && header.length > 0) {\r\n            var newHeader = this._formatColumns(header);\r\n            var deep = this._getHDeep();\r\n            if (deep <= 0) {\r\n                newHeader.unshift(rowHeaderCreator || {\r\n                    type: \"bi.table_style_cell\",\r\n                    text: BI.i18nText(\"BI-Row_Header\"),\r\n                    styleGetter: o.headerCellStyleGetter,\r\n                    _store: o.tableStyleCellStoreGetter,\r\n                });\r\n            } else {\r\n                newHeader[0] = rowHeaderCreator || {\r\n                    type: \"bi.table_style_cell\",\r\n                    text: BI.i18nText(\"BI-Row_Header\"),\r\n                    styleGetter: o.headerCellStyleGetter,\r\n                    _store: o.tableStyleCellStoreGetter,\r\n                };\r\n            }\r\n            result.push(newHeader);\r\n        }\r\n        return result;\r\n    },\r\n\r\n    _formatItems: function (nodes, header, deep) {\r\n        var self = this, o = this.options;\r\n        var result = [];\r\n\r\n        function track (node, layer) {\r\n            node.type || (node.type = \"bi.layer_tree_table_cell\");\r\n            node.layer = layer;\r\n            var next = [node];\r\n            next = next.concat(node.values || []);\r\n            if (next.length > 0) {\r\n                result.push(next);\r\n            }\r\n            if (BI.isNotEmptyArray(node.children)) {\r\n                BI.each(node.children, function (index, child) {\r\n                    track(child, layer + 1);\r\n                });\r\n            }\r\n        }\r\n\r\n        BI.each(nodes, function (i, node) {\r\n            BI.each(node.children, function (j, c) {\r\n                track(c, 0);\r\n            });\r\n            if (BI.isArray(node.values)) {\r\n                var next = [{\r\n                    type: \"bi.table_style_cell\",\r\n                    text: o.summaryText,\r\n                    title: o.summaryText,\r\n                    styleGetter: function () {\r\n                        return o.summaryCellStyleGetter(true, BI.get(node, [\"children\", 0, \"dId\"]));\r\n                    },\r\n                    _store: o.tableStyleCellStoreGetter,\r\n                }].concat(node.values);\r\n                o.rowPosition === \"bottom\" ?\r\n                    result.push(next) :\r\n                    result.unshift(next);\r\n            }\r\n        });\r\n        return BI.DynamicSummaryTreeTable.formatSummaryItems(result, header, o.crossItems, 1);\r\n    },\r\n\r\n    _formatColumns: function (columns, deep) {\r\n        if (BI.isNotEmptyArray(columns)) {\r\n            deep = deep || this._getHDeep();\r\n            return columns.slice(Math.max(0, deep - 1));\r\n        }\r\n        return columns;\r\n    },\r\n\r\n    _formatFreezeCols: function () {\r\n        if (this.options.freezeCols.length > 0) {\r\n            return [0];\r\n        }\r\n        return [];\r\n    },\r\n\r\n    _formatColumnSize: function (columnSize, deep) {\r\n        if (columnSize.length <= 0) {\r\n            return [];\r\n        }\r\n        var result = [0];\r\n        deep = deep || this._getHDeep();\r\n        BI.each(columnSize, function (i, size) {\r\n            if (i < deep) {\r\n                result[0] += size;\r\n                return;\r\n            }\r\n            result.push(size);\r\n        });\r\n        return result;\r\n    },\r\n\r\n    _recomputeColumnSize: function () {\r\n        var o = this.options;\r\n        o.regionColumnSize = this.table.getRegionColumnSize();\r\n        var columnSize = this.table.getColumnSize().slice();\r\n        if (o.freezeCols.length > 1) {\r\n            for (var i = 0; i < o.freezeCols.length - 1; i++) {\r\n                columnSize.splice(1, 0, 0);\r\n            }\r\n        }\r\n        o.columnSize = columnSize;\r\n    },\r\n\r\n    _digest: function () {\r\n        var o = this.options;\r\n        var deep = this._getHDeep();\r\n        var vDeep = this._getVDeep();\r\n        var header = this._createHeader(vDeep);\r\n        var data = this._formatItems(o.items, header, deep);\r\n        var columnSize = o.columnSize.slice();\r\n        var minColumnSize = o.minColumnSize.slice();\r\n        var maxColumnSize = o.maxColumnSize.slice();\r\n        BI.removeAt(columnSize, data.deletedCols);\r\n        BI.removeAt(minColumnSize, data.deletedCols);\r\n        BI.removeAt(maxColumnSize, data.deletedCols);\r\n        this.header = data.header;\r\n        this.items = data.items;\r\n\r\n        return {\r\n            header: data.header,\r\n            items: data.items,\r\n            columnSize: this._formatColumnSize(columnSize, deep),\r\n            minColumnSize: this._formatColumns(minColumnSize, deep),\r\n            maxColumnSize: this._formatColumns(maxColumnSize, deep),\r\n            freezeCols: this._formatFreezeCols()\r\n        };\r\n    },\r\n\r\n    _init: function () {\r\n        BI.DynamicSummaryLayerTreeTable.superclass._init.apply(this, arguments);\r\n        var self = this, o = this.options;\r\n        var data = this._digest();\r\n        this.table = BI.createWidget(o.el, {\r\n            type: \"bi.resizable_table\",\r\n            element: this,\r\n            width: o.width,\r\n            height: o.height,\r\n            isNeedResize: o.isNeedResize,\r\n            isNeedFreeze: o.isNeedFreeze,\r\n            freezeCols: data.freezeCols,\r\n            isNeedMerge: o.isNeedMerge,\r\n            mergeCols: [],\r\n            mergeRule: o.mergeRule,\r\n            columnSize: data.columnSize,\r\n            minColumnSize: data.minColumnSize,\r\n            maxColumnSize: data.maxColumnSize,\r\n            headerRowSize: o.headerRowSize,\r\n            rowSize: o.rowSize,\r\n            regionColumnSize: o.regionColumnSize,\r\n            header: data.header,\r\n            items: data.items\r\n        });\r\n        this.table.on(BI.Table.EVENT_TABLE_SCROLL, function () {\r\n            self.fireEvent(BI.Table.EVENT_TABLE_SCROLL, arguments);\r\n        });\r\n        this.table.on(BI.Table.EVENT_TABLE_AFTER_REGION_RESIZE, function () {\r\n            self._recomputeColumnSize();\r\n            self.fireEvent(BI.Table.EVENT_TABLE_AFTER_REGION_RESIZE, arguments);\r\n        });\r\n        this.table.on(BI.Table.EVENT_TABLE_AFTER_COLUMN_RESIZE, function () {\r\n            self._recomputeColumnSize();\r\n            self.fireEvent(BI.Table.EVENT_TABLE_AFTER_COLUMN_RESIZE, arguments);\r\n        });\r\n    },\r\n\r\n    setWidth: function (width) {\r\n        BI.DynamicSummaryLayerTreeTable.superclass.setWidth.apply(this, arguments);\r\n        this.table.setWidth(width);\r\n    },\r\n\r\n    setHeight: function (height) {\r\n        BI.DynamicSummaryLayerTreeTable.superclass.setHeight.apply(this, arguments);\r\n        this.table.setHeight(height);\r\n    },\r\n\r\n    setColumnSize: function (columnSize) {\r\n        this.options.columnSize = columnSize;\r\n    },\r\n\r\n    getColumnSize: function () {\r\n        return this.options.columnSize;\r\n    },\r\n\r\n    getFirstColumnHeaderRowSize: function () {\r\n        return this.table.getFirstColumnHeaderRowSize();\r\n    },\r\n\r\n    getFirstColumnRowSize: function () {\r\n        var rowHeights = this.table.getFirstColumnRowSize();\r\n        var groupedHeight = [];\r\n        BI.each(this.items, function (i, rows) {\r\n            if (rows[0].layer > 0) {\r\n                groupedHeight[groupedHeight.length - 1] += rowHeights[i];\r\n            } else {\r\n                groupedHeight.push(rowHeights[i]);\r\n            }\r\n        });\r\n\r\n        return groupedHeight;\r\n    },\r\n\r\n    setRegionColumnSize: function (columnSize) {\r\n        this.options.regionColumnSize = columnSize;\r\n        this.table.setRegionColumnSize(columnSize);\r\n    },\r\n\r\n    getRegionColumnSize: function () {\r\n        return this.table.getRegionColumnSize();\r\n    },\r\n\r\n    setVerticalScroll: function (scrollTop) {\r\n        this.table.setVerticalScroll(scrollTop);\r\n    },\r\n\r\n    setLeftHorizontalScroll: function (scrollLeft) {\r\n        this.table.setLeftHorizontalScroll(scrollLeft);\r\n    },\r\n\r\n    setRightHorizontalScroll: function (scrollLeft) {\r\n        this.table.setRightHorizontalScroll(scrollLeft);\r\n    },\r\n\r\n    getVerticalScroll: function () {\r\n        return this.table.getVerticalScroll();\r\n    },\r\n\r\n    getLeftHorizontalScroll: function () {\r\n        return this.table.getLeftHorizontalScroll();\r\n    },\r\n\r\n    getRightHorizontalScroll: function () {\r\n        return this.table.getRightHorizontalScroll();\r\n    },\r\n\r\n    attr: function (key, value) {\r\n        BI.DynamicSummaryLayerTreeTable.superclass.attr.apply(this, arguments);\r\n        switch (key) {\r\n            case \"columnSize\":\r\n            case \"minColumnSize\":\r\n            case \"maxColumnSize\":\r\n            case \"freezeCols\":\r\n            case \"mergeCols\":\r\n                return;\r\n        }\r\n        return this.table.attr.apply(this.table, [key, value]);\r\n    },\r\n\r\n    restore: function () {\r\n        this.table.restore();\r\n    },\r\n\r\n    populate: function (items, header, crossItems, crossHeader) {\r\n        var o = this.options;\r\n        if (items) {\r\n            o.items = items;\r\n        }\r\n        if (header) {\r\n            o.header = header;\r\n        }\r\n        if (crossItems) {\r\n            o.crossItems = crossItems;\r\n        }\r\n        if (crossHeader) {\r\n            o.crossHeader = crossHeader;\r\n        }\r\n        var data = this._digest();\r\n        this.table.setColumnSize(data.columnSize);\r\n        this.table.attr(\"minColumnSize\", data.minColumnSize);\r\n        this.table.attr(\"maxColumnSize\", data.maxColumnSize);\r\n        this.table.attr(\"freezeCols\", data.freezeCols);\r\n        this.table.populate(data.items, data.header);\r\n    },\r\n\r\n    destroy: function () {\r\n        this.table.destroy();\r\n        BI.DynamicSummaryLayerTreeTable.superclass.destroy.apply(this, arguments);\r\n    }\r\n});\r\n\r\nBI.shortcut(\"bi.dynamic_summary_layer_tree_table\", BI.DynamicSummaryLayerTreeTable);\r\n","/**\r\n *\r\n * 树状结构的表格\r\n *\r\n * Created by GUY on 2015/8/12.\r\n * @class BI.DynamicSummaryTreeTable\r\n * @extends BI.Widget\r\n */\r\nBI.DynamicSummaryTreeTable = BI.inherit(BI.Widget, {\r\n    _defaultConfig: function () {\r\n        return BI.extend(BI.DynamicSummaryTreeTable.superclass._defaultConfig.apply(this, arguments), {\r\n            baseCls: \"bi-dynamic-summary-tree-table\",\r\n            el: {\r\n                type: \"bi.resizable_table\"\r\n            },\r\n\r\n            isNeedResize: true, // 是否需要调整列宽\r\n\r\n            isNeedFreeze: false, // 是否需要冻结单元格\r\n            freezeCols: [], // 冻结的列号,从0开始,isNeedFreeze为tree时生效\r\n\r\n            isNeedMerge: true, // 是否需要合并单元格\r\n            mergeCols: [],\r\n            mergeRule: BI.emptyFn,\r\n\r\n            isNeedMergeCol: true, // 是否横向合并\r\n            isNeedMergeRow: true, // 是否纵向合并\r\n\r\n            columnSize: [],\r\n            minColumnSize: [],\r\n            maxColumnSize: [],\r\n            headerRowSize: 25,\r\n            footerRowSize: 25,\r\n            rowSize: 25,\r\n\r\n            regionColumnSize: [],\r\n\r\n            headerCellStyleGetter: BI.emptyFn,\r\n            summaryCellStyleGetter: BI.emptyFn,\r\n            sequenceCellStyleGetter: BI.emptyFn,\r\n            // 传给汇总、序号单元格的store，能在单元格绘制时使用上下文中的cssScale\r\n            tableStyleCellStoreGetter: null,\r\n\r\n            summaryCellCreator: undefined,\r\n\r\n            header: [],\r\n            footer: false,\r\n            items: [],\r\n\r\n            // 交叉表头\r\n            crossHeader: [],\r\n            crossItems: [],\r\n\r\n            // 汇总行位置\r\n            summaryText: BI.i18nText(\"BI-Summary_Values\"),\r\n            rowPosition: \"bottom\",\r\n            colPosition: \"right\",\r\n            showInnerSummary: false\r\n        });\r\n    },\r\n\r\n    _getVDeep: function () {\r\n        return this.options.crossHeader.length;// 纵向深度\r\n    },\r\n\r\n    _getHDeep: function () {\r\n        var o = this.options;\r\n        return Math.max(o.mergeCols.length, o.freezeCols.length, BI.TableTree.maxDeep(o.items) - 1);\r\n    },\r\n\r\n    _init: function () {\r\n        BI.DynamicSummaryTreeTable.superclass._init.apply(this, arguments);\r\n        var self = this, o = this.options;\r\n        var data = this._digest();\r\n        this.table = BI.createWidget(o.el, {\r\n            type: \"bi.resizable_table\",\r\n            element: this,\r\n            width: o.width,\r\n            height: o.height,\r\n\r\n            isNeedResize: o.isNeedResize,\r\n\r\n            isNeedFreeze: o.isNeedFreeze,\r\n            freezeCols: o.freezeCols,\r\n            isNeedMerge: o.isNeedMerge,\r\n            mergeCols: o.mergeCols,\r\n            mergeRule: o.mergeRule,\r\n\r\n            columnSize: o.columnSize,\r\n            minColumnSize: o.minColumnSize,\r\n            maxColumnSize: o.maxColumnSize,\r\n            headerRowSize: o.headerRowSize,\r\n            rowSize: o.rowSize,\r\n\r\n            regionColumnSize: o.regionColumnSize,\r\n\r\n            header: data.header,\r\n            items: data.items\r\n        });\r\n        this.table.on(BI.Table.EVENT_TABLE_SCROLL, function () {\r\n            self.fireEvent(BI.Table.EVENT_TABLE_SCROLL, arguments);\r\n        });\r\n        this.table.on(BI.Table.EVENT_TABLE_AFTER_REGION_RESIZE, function () {\r\n            o.regionColumnSize = this.getRegionColumnSize();\r\n            var columnSize = this.getColumnSize();\r\n            var length = o.columnSize.length - columnSize.length;\r\n            o.columnSize = columnSize.slice();\r\n            o.columnSize  = o.columnSize.concat(BI.makeArray(length, 0));\r\n            self.fireEvent(BI.Table.EVENT_TABLE_AFTER_REGION_RESIZE, arguments);\r\n        });\r\n        this.table.on(BI.Table.EVENT_TABLE_AFTER_COLUMN_RESIZE, function () {\r\n            o.regionColumnSize = this.getRegionColumnSize();\r\n            var columnSize = this.getColumnSize();\r\n            var length = o.columnSize.length - columnSize.length;\r\n            o.columnSize = columnSize.slice();\r\n            o.columnSize  = o.columnSize.concat(BI.makeArray(length, 0));\r\n            self.fireEvent(BI.Table.EVENT_TABLE_AFTER_COLUMN_RESIZE, arguments);\r\n        });\r\n    },\r\n\r\n    _digest: function () {\r\n        var o = this.options;\r\n        var deep = this._getHDeep();\r\n        var vDeep = this._getVDeep();\r\n        var header = BI.TableTree.formatHeader(o.header, o.crossHeader, o.crossItems, deep, vDeep, o.headerCellStyleGetter, {\r\n            sumPosition: o.colPosition === \"right\",\r\n            summaryText: o.summaryText\r\n        });\r\n        var items = BI.DynamicSummaryTreeTable.formatHorizontalItems(o.items, deep, false, o.summaryCellStyleGetter, {\r\n            sumPosition: o.rowPosition === \"bottom\",\r\n            summaryText: o.summaryText,\r\n            isNeedMergeRow: o.isNeedMergeRow,\r\n            summaryCellCreator: o.summaryCellCreator,\r\n            tableStyleCellStoreGetter: o.tableStyleCellStoreGetter\r\n        });\r\n        var data = BI.DynamicSummaryTreeTable.formatSummaryItems(items, header, o.crossItems, deep);\r\n        var columnSize = o.columnSize.slice();\r\n        var minColumnSize = o.minColumnSize.slice();\r\n        var maxColumnSize = o.maxColumnSize.slice();\r\n        BI.removeAt(columnSize, data.deletedCols);\r\n        BI.removeAt(minColumnSize, data.deletedCols);\r\n        BI.removeAt(maxColumnSize, data.deletedCols);\r\n        return {\r\n            header: data.header,\r\n            items: data.items,\r\n            columnSize: columnSize,\r\n            minColumnSize: minColumnSize,\r\n            maxColumnSize: maxColumnSize\r\n        };\r\n    },\r\n\r\n    setWidth: function (width) {\r\n        BI.DynamicSummaryTreeTable.superclass.setWidth.apply(this, arguments);\r\n        this.table.setWidth(width);\r\n    },\r\n\r\n    setHeight: function (height) {\r\n        BI.DynamicSummaryTreeTable.superclass.setHeight.apply(this, arguments);\r\n        this.table.setHeight(height);\r\n    },\r\n\r\n    setColumnSize: function (columnSize) {\r\n        this.options.columnSize = columnSize;\r\n    },\r\n\r\n    getColumnSize: function () {\r\n        return this.options.columnSize;\r\n    },\r\n\r\n    getFirstColumnHeaderRowSize: function () {\r\n        return this.table.getFirstColumnHeaderRowSize();\r\n    },\r\n\r\n    getFirstColumnRowSize: function () {\r\n        var o = this.options;\r\n        var rowHeight = this.table.getFirstColumnRowSize();\r\n        if (o.isNeedMergeRow) {\r\n            return rowHeight;\r\n        }\r\n        // 利用tableTree的能力算高度\r\n        var items = BI.TableTree.formatItems(o.items, this._getHDeep(), false, o.summaryCellStyleGetter, {\r\n            sumPosition: o.rowPosition === \"bottom\",\r\n            summaryText: o.summaryText,\r\n            isNeedMergeRow: o.isNeedMergeRow,\r\n            summaryCellCreator: o.summaryCellCreator,\r\n        });\r\n        var groupedHeight = [];\r\n        var last = null;\r\n        BI.each(items, function (i, rows) {\r\n            if (rows[0] === last) {\r\n                groupedHeight[groupedHeight.length - 1] += rowHeight[i];\r\n            } else {\r\n                last = rows[0];\r\n                groupedHeight.push(rowHeight[i]);\r\n            }\r\n        });\r\n\r\n        return groupedHeight;\r\n    },\r\n\r\n    setRegionColumnSize: function (columnSize) {\r\n        this.options.regionColumnSize = columnSize;\r\n        this.table.setRegionColumnSize(columnSize);\r\n    },\r\n\r\n    getRegionColumnSize: function () {\r\n        return this.table.getRegionColumnSize();\r\n    },\r\n\r\n    setVerticalScroll: function (scrollTop) {\r\n        this.table.setVerticalScroll(scrollTop);\r\n    },\r\n\r\n    setLeftHorizontalScroll: function (scrollLeft) {\r\n        this.table.setLeftHorizontalScroll(scrollLeft);\r\n    },\r\n\r\n    setRightHorizontalScroll: function (scrollLeft) {\r\n        this.table.setRightHorizontalScroll(scrollLeft);\r\n    },\r\n\r\n    getVerticalScroll: function () {\r\n        return this.table.getVerticalScroll();\r\n    },\r\n\r\n    getLeftHorizontalScroll: function () {\r\n        return this.table.getLeftHorizontalScroll();\r\n    },\r\n\r\n    getRightHorizontalScroll: function () {\r\n        return this.table.getRightHorizontalScroll();\r\n    },\r\n\r\n    attr: function (key) {\r\n        BI.DynamicSummaryTreeTable.superclass.attr.apply(this, arguments);\r\n        switch (key) {\r\n            case \"minColumnSize\":\r\n            case \"maxColumnSize\":\r\n                return;\r\n        }\r\n        return this.table.attr.apply(this.table, arguments);\r\n    },\r\n\r\n    restore: function () {\r\n        this.table.restore();\r\n    },\r\n\r\n    populate: function (items, header, crossItems, crossHeader) {\r\n        var o = this.options;\r\n        if (items) {\r\n            o.items = items;\r\n        }\r\n        if (header) {\r\n            o.header = header;\r\n        }\r\n        if (crossItems) {\r\n            o.crossItems = crossItems;\r\n        }\r\n        if (crossHeader) {\r\n            o.crossHeader = crossHeader;\r\n        }\r\n        var data = this._digest();\r\n        this.table.setColumnSize(data.columnSize);\r\n        this.table.attr(\"minColumnSize\", data.minColumnSize);\r\n        this.table.attr(\"maxColumnSize\", data.maxColumnSize);\r\n        this.table.populate(data.items, data.header);\r\n    },\r\n\r\n    destroy: function () {\r\n        this.table.destroy();\r\n        BI.DynamicSummaryTreeTable.superclass.destroy.apply(this, arguments);\r\n    }\r\n});\r\n\r\nBI.extend(BI.DynamicSummaryTreeTable, {\r\n\r\n    formatHorizontalItems: function (nodes, deep, isCross, styleGetter, options) {\r\n        options = options || {};\r\n        var result = [];\r\n        var sumPosition = options.sumPosition,\r\n            summaryText = options.summaryText,\r\n            isNeedMergeRow = options.isNeedMergeRow,\r\n            summaryCellCreator = options.summaryCellCreator || function (v) {\r\n                return v;\r\n            };\r\n\r\n        // 标识由原本需要合并的节点\r\n        function cloneNode (node, tag) {\r\n            if (isNeedMergeRow) {\r\n                return node;\r\n            }\r\n            var result = BI.clone(node);\r\n            if (tag) {\r\n                result.clone = true;\r\n            }\r\n            return result;\r\n        }\r\n\r\n        function cloneArray (arr, tag) {\r\n            if (isNeedMergeRow) {\r\n                return arr.slice();\r\n            }\r\n            return BI.map(arr, function (i, item) {\r\n                return cloneNode(item, tag);\r\n            })\r\n        }\r\n\r\n        function track (store, node) {\r\n            var next;\r\n            if (BI.isArray(node.children)) {\r\n                var totalLength = 0;\r\n                BI.each(node.children, function (index, child) {\r\n                    var next;\r\n                    if (store != -1) {\r\n                        next = cloneArray(store, node.summaryClone ? node.children.length > 0 : index !== 0);\r\n                        next.push(cloneNode(node, node.summaryClone ? node.children.length > 0 : index !== 0));\r\n                    } else {\r\n                        next = [];\r\n                    }\r\n                    totalLength += track(next, child);\r\n                });\r\n                if (store != -1) {\r\n                    next = cloneArray(store, !node.summaryClone);\r\n                    next.push(cloneNode(node, !node.summaryClone));\r\n                } else {\r\n                    next = [];\r\n                }\r\n                if (BI.isNotEmptyArray(node.values)) {\r\n                    var summary = summaryCellCreator({\r\n                        text: summaryText,\r\n                        title: summaryText,\r\n                        type: \"bi.table_style_cell\",\r\n                        styleGetter: function () {\r\n                            return styleGetter(store === -1, BI.get(node, [\"children\", 0, \"dId\"]));\r\n                        },\r\n                        _store: options.tableStyleCellStoreGetter\r\n                    }, node, store === -1);\r\n                    for (var i = next.length; i < deep; i++) {\r\n                        next.push(summary);\r\n                    }\r\n                    if (!isCross) {\r\n                        next = next.concat(BI.map(node.values, function (j, value) {\r\n                            var style = styleGetter(store === -1);\r\n                            return summaryCellCreator(BI.extend({}, value, {\r\n                                styles: style\r\n                            }), node, store === -1);\r\n                        }));\r\n                    }\r\n                    if (next.length > 0) {\r\n                        if (!isCross) {\r\n                            sumPosition ? result.push(next) : result.splice( result.length - totalLength, 0, next);\r\n                        } else {\r\n                            for (var k = 0, l = node.values.length; k < l; k++) {\r\n                                sumPosition ? result.push(next) : result.splice( result.length - totalLength, 0, next);\r\n                            }\r\n                        }\r\n                    }\r\n                    return totalLength + 1;\r\n                }\r\n                return totalLength;\r\n            }\r\n            if (store != -1) {\r\n                next = store.slice();\r\n                for (var i = next.length; i < deep; i++) {\r\n                    next.push(node);\r\n                }\r\n            } else {\r\n                next = [];\r\n            }\r\n            if (!isCross && BI.isArray(node.values)) {\r\n                next = next.concat(node.values);\r\n            }\r\n            if (isCross && BI.isArray(node.values)) {\r\n                for (var i = 0, len = node.values.length; i < len - 1; i++) {\r\n                    if (next.length > 0) {\r\n                        result.push(next);\r\n                    }\r\n                }\r\n            }\r\n            if (next.length > 0) {\r\n                result.push(next);\r\n            }\r\n            return node.values ? 1 : 0;\r\n        }\r\n\r\n        BI.each(nodes, function (i, node) {\r\n            track(-1, node, 0);\r\n        });\r\n        // 填充空位\r\n        BI.each(result, function (i, line) {\r\n            var last = BI.last(line);\r\n            for (var j = line.length; j < deep; j++) {\r\n                line.push(last);\r\n            }\r\n        });\r\n        return result;\r\n    },\r\n\r\n    formatSummaryItems: function (items, header, crossItems, deep) {\r\n        // 求纵向需要去除的列\r\n        var cols = [];\r\n        var leaf = 0;\r\n\r\n        function track (node) {\r\n            if (BI.isArray(node.children)) {\r\n                BI.each(node.children, function (index, child) {\r\n                    track(child);\r\n                });\r\n                if (BI.isNotEmptyArray(node.values)) {\r\n                    if (node.children.length === 1) {\r\n                        for (var i = 0; i < node.values.length; i++) {\r\n                            cols.push(leaf + i + deep);\r\n                        }\r\n                    }\r\n                    leaf += node.values.length;\r\n                }\r\n                return;\r\n            }\r\n            if (node.values && node.values.length > 1) {\r\n                leaf += node.values.length;\r\n            } else {\r\n                leaf++;\r\n            }\r\n        }\r\n\r\n        BI.each(crossItems, function (i, node) {\r\n            track(node);\r\n        });\r\n\r\n        if (cols.length > 0) {\r\n            var nHeader = [], nItems = [];\r\n            BI.each(header, function (i, node) {\r\n                var nNode = node.slice();\r\n                BI.removeAt(nNode, cols);\r\n                nHeader.push(nNode);\r\n            });\r\n            BI.each(items, function (i, node) {\r\n                var nNode = node.slice();\r\n                BI.removeAt(nNode, cols);\r\n                nItems.push(nNode);\r\n            });\r\n            header = nHeader;\r\n            items = nItems;\r\n        }\r\n        return {items: items, header: header, deletedCols: cols};\r\n    }\r\n});\r\n\r\nBI.shortcut(\"bi.dynamic_summary_tree_table\", BI.DynamicSummaryTreeTable);\r\n","/**\r\n * Created by GUY on 2016/5/7.\r\n * @class BI.LayerTreeTableCell\r\n * @extends BI.Single\r\n */\r\nBI.LayerTreeTableCell = BI.inherit(BI.Widget, {\r\n    _defaultConfig: function () {\r\n        return BI.extend(BI.LayerTreeTableCell.superclass._defaultConfig.apply(this, arguments), {\r\n            baseCls: \"bi-layer-tree-table-cell\",\r\n            layer: 0,\r\n            text: \"\"\r\n        });\r\n    },\r\n\r\n    _init: function () {\r\n        BI.LayerTreeTableCell.superclass._init.apply(this, arguments);\r\n        var o = this.options;\r\n        BI.createWidget({\r\n            type: \"bi.label\",\r\n            element: this.element,\r\n            textAlign: \"left\",\r\n            whiteSpace: \"nowrap\",\r\n            height: o.height,\r\n            text: o.text,\r\n            value: o.value,\r\n            lgap: 5 + 30 * o.layer,\r\n            rgap: 5\r\n        });\r\n    }\r\n});\r\n\r\nBI.shortcut(\"bi.layer_tree_table_cell\", BI.LayerTreeTableCell);","/**\r\n *\r\n * 层级树状结构的表格\r\n *\r\n * Created by GUY on 2016/5/7.\r\n * @class BI.LayerTreeTable\r\n * @extends BI.Widget\r\n */\r\nBI.LayerTreeTable = BI.inherit(BI.Widget, {\r\n    _defaultConfig: function () {\r\n        return BI.extend(BI.LayerTreeTable.superclass._defaultConfig.apply(this, arguments), {\r\n            baseCls: \"bi-layer-tree-table\",\r\n            el: {\r\n                type: \"bi.resizable_table\"\r\n            },\r\n\r\n            isNeedResize: false, // 是否需要调整列宽\r\n\r\n            isNeedFreeze: false, // 是否需要冻结单元格\r\n            freezeCols: [], // 冻结的列号,从0开始,isNeedFreeze为tree时生效\r\n\r\n            isNeedMerge: true, // 是否需要合并单元格\r\n            mergeCols: [],\r\n            mergeRule: BI.emptyFn,\r\n\r\n            columnSize: [],\r\n            minColumnSize: [],\r\n            maxColumnSize: [],\r\n\r\n            headerRowSize: 25,\r\n            rowSize: 25,\r\n\r\n            regionColumnSize: [],\r\n\r\n            rowHeaderCreator: null,\r\n\r\n            headerCellStyleGetter: BI.emptyFn,\r\n            summaryCellStyleGetter: BI.emptyFn,\r\n            sequenceCellStyleGetter: BI.emptyFn,\r\n            // 传给汇总、序号单元格的store，能在单元格绘制时使用上下文中的cssScale\r\n            tableStyleCellStoreGetter: null,\r\n\r\n            header: [],\r\n            items: [],\r\n\r\n            // 交叉表头\r\n            crossHeader: [],\r\n            crossItems: [],\r\n\r\n            // 汇总行位置\r\n            summaryText: BI.i18nText(\"BI-Summary_Values\"),\r\n            rowPosition: \"bottom\",\r\n            colPosition: \"right\",\r\n            showInnerSummary: false\r\n        });\r\n    },\r\n\r\n    _getVDeep: function () {\r\n        return this.options.crossHeader.length;// 纵向深度\r\n    },\r\n\r\n    _getHDeep: function () {\r\n        var o = this.options;\r\n        return Math.max(o.mergeCols.length, o.freezeCols.length, BI.TableTree.maxDeep(o.items) - 1);\r\n    },\r\n\r\n    _createHeader: function (vDeep) {\r\n        var self = this, o = this.options;\r\n        var header = o.header || [], crossHeader = o.crossHeader || [];\r\n        var items = BI.TableTree.formatCrossItems(o.crossItems, vDeep, o.headerCellStyleGetter, {\r\n            sumPosition: o.colPosition === \"right\",\r\n            summaryText: o.summaryText\r\n        });\r\n        var result = [];\r\n        BI.each(items, function (row, node) {\r\n            var c = [crossHeader[row]];\r\n            result.push(c.concat(node || []));\r\n        });\r\n        if (header && header.length > 0) {\r\n            var newHeader = this._formatColumns(header);\r\n            var deep = this._getHDeep();\r\n            if (deep <= 0) {\r\n                newHeader.unshift(o.rowHeaderCreator || {\r\n                    type: \"bi.table_style_cell\",\r\n                    text: BI.i18nText(\"BI-Row_Header\"),\r\n                    styleGetter: o.headerCellStyleGetter,\r\n                    _store: o.tableStyleCellStoreGetter\r\n                });\r\n            } else {\r\n                newHeader[0] = o.rowHeaderCreator || {\r\n                    type: \"bi.table_style_cell\",\r\n                    text: BI.i18nText(\"BI-Row_Header\"),\r\n                    styleGetter: o.headerCellStyleGetter,\r\n                    _store: o.tableStyleCellStoreGetter\r\n                };\r\n            }\r\n            result.push(newHeader);\r\n        }\r\n        return result;\r\n    },\r\n\r\n    _formatItems: function (nodes) {\r\n        var self = this, o = this.options;\r\n        var result = [];\r\n\r\n        function track (node, layer) {\r\n            node.type || (node.type = \"bi.layer_tree_table_cell\");\r\n            node.layer = layer;\r\n            var next = [node];\r\n            next = next.concat(node.values || []);\r\n            if (next.length > 0) {\r\n                result.push(next);\r\n            }\r\n            if (BI.isNotEmptyArray(node.children)) {\r\n                BI.each(node.children, function (index, child) {\r\n                    track(child, layer + 1);\r\n                });\r\n            }\r\n        }\r\n\r\n        BI.each(nodes, function (i, node) {\r\n            BI.each(node.children, function (j, c) {\r\n                track(c, 0);\r\n            });\r\n            if (BI.isArray(node.values)) {\r\n                var next = [{\r\n                    type: \"bi.table_style_cell\",\r\n                    text: BI.i18nText(\"BI-Summary_Values\"),\r\n                    styleGetter: function () {\r\n                        return o.summaryCellStyleGetter(true);\r\n                    },\r\n                    _store: o.tableStyleCellStoreGetter\r\n                }].concat(node.values);\r\n                result.push(next);\r\n            }\r\n        });\r\n        return result;\r\n    },\r\n\r\n    _formatColumns: function (columns, deep) {\r\n        if (BI.isNotEmptyArray(columns)) {\r\n            deep = deep || this._getHDeep();\r\n            return columns.slice(Math.max(0, deep - 1));\r\n        }\r\n        return columns;\r\n    },\r\n\r\n    _formatFreezeCols: function () {\r\n        if (this.options.freezeCols.length > 0) {\r\n            return [0];\r\n        }\r\n        return [];\r\n    },\r\n\r\n    _formatColumnSize: function (columnSize, deep) {\r\n        if (columnSize.length <= 0) {\r\n            return [];\r\n        }\r\n        var result = [0];\r\n        deep = deep || this._getHDeep();\r\n        BI.each(columnSize, function (i, size) {\r\n            if (i < deep) {\r\n                result[0] += size;\r\n                return;\r\n            }\r\n            result.push(size);\r\n        });\r\n        return result;\r\n    },\r\n\r\n    _digest: function () {\r\n        var o = this.options;\r\n        var deep = this._getHDeep();\r\n        var vDeep = this._getVDeep();\r\n        this.header = this._createHeader(vDeep);\r\n        this.items = this._formatItems(o.items);\r\n\r\n        return {\r\n            header: this.header,\r\n            items: this.items,\r\n            columnSize: this._formatColumnSize(o.columnSize, deep),\r\n            minColumnSize: this._formatColumns(o.minColumnSize, deep),\r\n            maxColumnSize: this._formatColumns(o.maxColumnSize, deep),\r\n            freezeCols: this._formatFreezeCols()\r\n        };\r\n    },\r\n\r\n    _init: function () {\r\n        BI.LayerTreeTable.superclass._init.apply(this, arguments);\r\n        var self = this, o = this.options;\r\n\r\n        var data = this._digest();\r\n        this.table = BI.createWidget(o.el, {\r\n            type: \"bi.resizable_table\",\r\n            element: this,\r\n            width: o.width,\r\n            height: o.height,\r\n            isNeedResize: o.isNeedResize,\r\n            isNeedFreeze: o.isNeedFreeze,\r\n            freezeCols: data.freezeCols,\r\n            isNeedMerge: o.isNeedMerge,\r\n            mergeCols: [],\r\n            mergeRule: o.mergeRule,\r\n            columnSize: data.columnSize,\r\n            minColumnSize: data.minColumnSize,\r\n            maxColumnSize: data.maxColumnSize,\r\n            headerRowSize: o.headerRowSize,\r\n            rowSize: o.rowSize,\r\n            regionColumnSize: o.regionColumnSize,\r\n            header: data.header,\r\n            items: data.items\r\n        });\r\n        this.table.on(BI.Table.EVENT_TABLE_SCROLL, function () {\r\n            self.fireEvent(BI.Table.EVENT_TABLE_SCROLL, arguments);\r\n        });\r\n        this.table.on(BI.Table.EVENT_TABLE_AFTER_REGION_RESIZE, function () {\r\n            o.regionColumnSize = this.getRegionColumnSize();\r\n            o.columnSize = this.getColumnSize();\r\n            self.fireEvent(BI.Table.EVENT_TABLE_AFTER_REGION_RESIZE, arguments);\r\n        });\r\n        this.table.on(BI.Table.EVENT_TABLE_AFTER_COLUMN_RESIZE, function () {\r\n            o.regionColumnSize = this.getRegionColumnSize();\r\n            o.columnSize = this.getColumnSize();\r\n            self.fireEvent(BI.Table.EVENT_TABLE_AFTER_COLUMN_RESIZE, arguments);\r\n        });\r\n    },\r\n\r\n    setWidth: function (width) {\r\n        BI.LayerTreeTable.superclass.setWidth.apply(this, arguments);\r\n        this.table.setWidth(width);\r\n    },\r\n\r\n    setHeight: function (height) {\r\n        BI.LayerTreeTable.superclass.setHeight.apply(this, arguments);\r\n        this.table.setHeight(height);\r\n    },\r\n\r\n    setColumnSize: function (columnSize) {\r\n        this.options.columnSize = columnSize;\r\n    },\r\n\r\n    getColumnSize: function () {\r\n        var columnSize = this.table.getColumnSize();\r\n        var deep = this._getHDeep();\r\n        var pre = [];\r\n        if (deep > 0) {\r\n            pre = BI.makeArray(deep, columnSize[0] / deep);\r\n        }\r\n        return pre.concat(columnSize.slice(1));\r\n    },\r\n\r\n    getFirstColumnHeaderRowSize: function () {\r\n        return this.table.getFirstColumnHeaderRowSize();\r\n    },\r\n\r\n    getFirstColumnRowSize: function () {\r\n        var rowHeights = this.table.getFirstColumnRowSize();\r\n        var groupedHeight = [];\r\n        BI.each(this.items, function (i, rows) {\r\n            if (rows[0].layer > 0) {\r\n                groupedHeight[groupedHeight.length - 1] += rowHeights[i];\r\n            } else {\r\n                groupedHeight.push(rowHeights[i]);\r\n            }\r\n        });\r\n\r\n        return groupedHeight;\r\n    },\r\n\r\n    setRegionColumnSize: function (columnSize) {\r\n        this.options.regionColumnSize = columnSize;\r\n        this.table.setRegionColumnSize(columnSize);\r\n    },\r\n\r\n    getRegionColumnSize: function () {\r\n        return this.table.getRegionColumnSize();\r\n    },\r\n\r\n    setVerticalScroll: function (scrollTop) {\r\n        this.table.setVerticalScroll(scrollTop);\r\n    },\r\n\r\n    setLeftHorizontalScroll: function (scrollLeft) {\r\n        this.table.setLeftHorizontalScroll(scrollLeft);\r\n    },\r\n\r\n    setRightHorizontalScroll: function (scrollLeft) {\r\n        this.table.setRightHorizontalScroll(scrollLeft);\r\n    },\r\n\r\n    getVerticalScroll: function () {\r\n        return this.table.getVerticalScroll();\r\n    },\r\n\r\n    getLeftHorizontalScroll: function () {\r\n        return this.table.getLeftHorizontalScroll();\r\n    },\r\n\r\n    getRightHorizontalScroll: function () {\r\n        return this.table.getRightHorizontalScroll();\r\n    },\r\n\r\n    attr: function (key, value) {\r\n        BI.LayerTreeTable.superclass.attr.apply(this, arguments);\r\n        switch (key) {\r\n            case \"columnSize\":\r\n            case \"minColumnSize\":\r\n            case \"maxColumnSize\":\r\n            case \"freezeCols\":\r\n            case \"mergeCols\":\r\n                return;\r\n        }\r\n        return this.table.attr.apply(this.table, [key, value]);\r\n    },\r\n\r\n    restore: function () {\r\n        this.table.restore();\r\n    },\r\n\r\n    populate: function (items, header, crossItems, crossHeader) {\r\n        var o = this.options;\r\n        o.items = items || [];\r\n        if (header) {\r\n            o.header = header;\r\n        }\r\n        if (crossItems) {\r\n            o.crossItems = crossItems;\r\n        }\r\n        if (crossHeader) {\r\n            o.crossHeader = crossHeader;\r\n        }\r\n        var data = this._digest();\r\n        this.table.setColumnSize(data.columnSize);\r\n        this.table.attr(\"freezeCols\", data.freezeCols);\r\n        this.table.attr(\"minColumnSize\", data.minColumnSize);\r\n        this.table.attr(\"maxColumnSize\", data.maxColumnSize);\r\n        this.table.populate(data.items, data.header);\r\n    },\r\n\r\n    destroy: function () {\r\n        this.table.destroy();\r\n        BI.LayerTreeTable.superclass.destroy.apply(this, arguments);\r\n    }\r\n});\r\n\r\nBI.shortcut(\"bi.layer_tree_table\", BI.LayerTreeTable);\r\n","/**\r\n *\r\n * Created by GUY on 2016/5/26.\r\n * @class BI.TableStyleCell\r\n * @extends BI.Single\r\n */\r\nBI.TableStyleCell = BI.inherit(BI.Single, {\r\n\r\n    props: {\r\n        baseCls: \"bi-table-style-cell\",\r\n        styleGetter: BI.emptyFn,\r\n    },\r\n\r\n    mounted: function () {\r\n        var style = BI.extend({}, this.options.styleGetter());\r\n        style.fontSize && this.text.element.css({\r\n            fontSize: `${style.fontSize ?? 12}px`,\r\n            fontSize: `calc(var(--css-scale, 1) * ${style.fontSize ?? 12}px)`,\r\n        });\r\n    },\r\n\r\n    render: function () {\r\n        var o = this.options, self = this;\r\n\r\n        var style = BI.extend({}, o.styleGetter(), {\r\n            height: o.height - 1,\r\n        });\r\n\r\n        return {\r\n            type: \"bi.adaptive\",\r\n            items: [{\r\n                el: {\r\n                    type: \"bi.label\",\r\n                    textAlign: style.textAlign || \"left\",\r\n                    css: style,\r\n                    hgap: 5,\r\n                    text: o.text,\r\n                    title: o.text,\r\n                    belowMouse: true,\r\n                    ref: function (_ref) {\r\n                        self.text = _ref;\r\n                    },\r\n                },\r\n            }],\r\n        };\r\n    },\r\n\r\n    _digestStyle: function () {\r\n        var o = this.options;\r\n        var style = o.styleGetter();\r\n        if (style) {\r\n            this.text.element.css(style);\r\n        }\r\n    },\r\n\r\n    setText: function (text) {\r\n        this.text.setText(text);\r\n    },\r\n\r\n    setHeight: function (height) {\r\n        BI.TableStyleCell.superclass.setHeight.call(this, height);\r\n        this.text.setHeight(height - 1);\r\n    },\r\n\r\n    populate: function () {\r\n        this._digestStyle();\r\n    },\r\n});\r\nBI.shortcut(\"bi.table_style_cell\", BI.TableStyleCell);\r\n","/**\r\n *\r\n * 树状结构的表格\r\n *\r\n * Created by GUY on 2015/9/22.\r\n * @class BI.TableTree\r\n * @extends BI.Widget\r\n */\r\nBI.TableTree = BI.inherit(BI.Widget, {\r\n    _defaultConfig: function () {\r\n        return BI.extend(BI.TableTree.superclass._defaultConfig.apply(this, arguments), {\r\n            baseCls: \"bi-table-tree\",\r\n            el: {\r\n                type: \"bi.resizable_table\"\r\n            },\r\n            isNeedResize: true, // 是否需要调整列宽\r\n\r\n            freezeCols: [], // 冻结的列号,从0开始,isNeedFreeze为tree时生效\r\n\r\n            isNeedMerge: true, // 是否需要合并单元格\r\n            mergeCols: [],\r\n            mergeRule: BI.emptyFn,\r\n\r\n            isNeedMergeCol: true, // 是否横向合并\r\n            isNeedMergeRow: true, // 是否纵向合并\r\n\r\n            columnSize: [],\r\n            minColumnSize: [],\r\n            maxColumnSize: [],\r\n            headerRowSize: 25,\r\n            rowSize: 25,\r\n\r\n            regionColumnSize: [],\r\n\r\n            headerCellStyleGetter: BI.emptyFn,\r\n            summaryCellStyleGetter: BI.emptyFn,\r\n            sequenceCellStyleGetter: BI.emptyFn,\r\n            // 传给汇总、序号单元格的store，能在单元格绘制时使用上下文中的cssScale\r\n            tableStyleCellStoreGetter: null,\r\n\r\n            header: [],\r\n            items: [],\r\n\r\n            // 交叉表头\r\n            crossHeader: [],\r\n            crossItems: [],\r\n\r\n            // 汇总行位置\r\n            summaryText: BI.i18nText(\"BI-Summary_Values\"),\r\n            rowPosition: \"bottom\",\r\n            colPosition: \"right\",\r\n            showInnerSummary: false\r\n        });\r\n    },\r\n\r\n    _getVDeep: function () {\r\n        return this.options.crossHeader.length;// 纵向深度\r\n    },\r\n\r\n    _getHDeep: function () {\r\n        var o = this.options;\r\n        return Math.max(o.mergeCols.length, o.freezeCols.length, BI.TableTree.maxDeep(o.items) - 1);\r\n    },\r\n\r\n    _init: function () {\r\n        BI.TableTree.superclass._init.apply(this, arguments);\r\n        var self = this, o = this.options;\r\n        var data = this._digest();\r\n        this.table = BI.createWidget(o.el, {\r\n            type: \"bi.resizable_table\",\r\n            element: this,\r\n            width: o.width,\r\n            height: o.height,\r\n            isNeedResize: o.isNeedResize,\r\n\r\n            isNeedFreeze: o.isNeedFreeze,\r\n            freezeCols: o.freezeCols,\r\n            isNeedMerge: o.isNeedMerge,\r\n            mergeCols: o.mergeCols,\r\n            mergeRule: o.mergeRule,\r\n\r\n            columnSize: o.columnSize,\r\n            minColumnSize: o.minColumnSize,\r\n            maxColumnSize: o.maxColumnSize,\r\n\r\n            headerRowSize: o.headerRowSize,\r\n            rowSize: o.rowSize,\r\n\r\n            regionColumnSize: o.regionColumnSize,\r\n\r\n            header: data.header,\r\n            items: data.items\r\n        });\r\n        this.table.on(BI.Table.EVENT_TABLE_SCROLL, function () {\r\n            self.fireEvent(BI.Table.EVENT_TABLE_SCROLL, arguments);\r\n        });\r\n        this.table.on(BI.Table.EVENT_TABLE_AFTER_REGION_RESIZE, function () {\r\n            o.regionColumnSize = this.getRegionColumnSize();\r\n            o.columnSize = this.getColumnSize();\r\n            self.fireEvent(BI.Table.EVENT_TABLE_AFTER_REGION_RESIZE, arguments);\r\n        });\r\n        this.table.on(BI.Table.EVENT_TABLE_AFTER_COLUMN_RESIZE, function () {\r\n            o.regionColumnSize = this.getRegionColumnSize();\r\n            o.columnSize = this.getColumnSize();\r\n            self.fireEvent(BI.Table.EVENT_TABLE_AFTER_COLUMN_RESIZE, arguments);\r\n        });\r\n    },\r\n\r\n    _digest: function () {\r\n        var self = this, o = this.options;\r\n        var deep = this._getHDeep();\r\n        var vDeep = this._getVDeep();\r\n        var header = BI.TableTree.formatHeader(o.header, o.crossHeader, o.crossItems, deep, vDeep, o.headerCellStyleGetter, {\r\n            sumPosition: o.colPosition === \"right\",\r\n            summaryText: o.summaryText\r\n        });\r\n        var items = BI.TableTree.formatItems(o.items, deep, false, o.summaryCellStyleGetter, {\r\n            sumPosition: o.rowPosition === \"bottom\",\r\n            summaryText: o.summaryText,\r\n            isNeedMergeRow: o.isNeedMergeRow\r\n        });\r\n        return {\r\n            header: header,\r\n            items: items\r\n        };\r\n    },\r\n\r\n    setWidth: function (width) {\r\n        BI.TableTree.superclass.setWidth.apply(this, arguments);\r\n        this.table.setWidth(width);\r\n    },\r\n\r\n    setHeight: function (height) {\r\n        BI.TableTree.superclass.setHeight.apply(this, arguments);\r\n        this.table.setHeight(height);\r\n    },\r\n\r\n    setColumnSize: function (columnSize) {\r\n        this.options.columnSize = columnSize;\r\n        this.table.setColumnSize(columnSize);\r\n    },\r\n\r\n    getColumnSize: function () {\r\n        return this.table.getColumnSize();\r\n    },\r\n\r\n    getFirstColumnHeaderRowSize: function () {\r\n        return this.table.getFirstColumnHeaderRowSize();\r\n    },\r\n\r\n    getFirstColumnRowSize: function () {\r\n        return this.table.getFirstColumnRowSize();\r\n    },\r\n\r\n    setRegionColumnSize: function (columnSize) {\r\n        this.options.regionColumnSize = columnSize;\r\n        this.table.setRegionColumnSize(columnSize);\r\n    },\r\n\r\n    getRegionColumnSize: function () {\r\n        return this.table.getRegionColumnSize();\r\n    },\r\n\r\n    setVerticalScroll: function (scrollTop) {\r\n        this.table.setVerticalScroll(scrollTop);\r\n    },\r\n\r\n    setLeftHorizontalScroll: function (scrollLeft) {\r\n        this.table.setLeftHorizontalScroll(scrollLeft);\r\n    },\r\n\r\n    setRightHorizontalScroll: function (scrollLeft) {\r\n        this.table.setRightHorizontalScroll(scrollLeft);\r\n    },\r\n\r\n    getVerticalScroll: function () {\r\n        return this.table.getVerticalScroll();\r\n    },\r\n\r\n    getLeftHorizontalScroll: function () {\r\n        return this.table.getLeftHorizontalScroll();\r\n    },\r\n\r\n    getRightHorizontalScroll: function () {\r\n        return this.table.getRightHorizontalScroll();\r\n    },\r\n\r\n    attr: function () {\r\n        BI.TableTree.superclass.attr.apply(this, arguments);\r\n        return this.table.attr.apply(this.table, arguments);\r\n    },\r\n\r\n    restore: function () {\r\n        this.table.restore();\r\n    },\r\n\r\n    populate: function (items, header, crossItems, crossHeader) {\r\n        var o = this.options;\r\n        if (items) {\r\n            o.items = items || [];\r\n        }\r\n        if (header) {\r\n            o.header = header;\r\n        }\r\n        if (crossItems) {\r\n            o.crossItems = crossItems;\r\n        }\r\n        if (crossHeader) {\r\n            o.crossHeader = crossHeader;\r\n        }\r\n        var data = this._digest();\r\n        this.table.populate(data.items, data.header);\r\n    },\r\n\r\n    destroy: function () {\r\n        this.table.destroy();\r\n        BI.TableTree.superclass.destroy.apply(this, arguments);\r\n    }\r\n});\r\n\r\nBI.extend(BI.TableTree, {\r\n    formatHeader: function (header, crossHeader, crossItems, hDeep, vDeep, styleGetter, options) {\r\n        var items = BI.isEmpty(header) ? BI.TableTree.formatCrossItems4Special(crossItems, vDeep, styleGetter, options) : BI.TableTree.formatCrossItems(crossItems, vDeep, styleGetter, options);\r\n        var result = [];\r\n        for (var i = 0; i < vDeep; i++) {\r\n            var c = [];\r\n            for (var j = 0; j < hDeep; j++) {\r\n                c.push(crossHeader[i]);\r\n            }\r\n            result.push(c.concat(items[i] || []));\r\n        }\r\n        if (header && header.length > 0) {\r\n            result.push(header);\r\n        }\r\n        return result;\r\n    },\r\n\r\n    formatItems: function (nodes, deep, isCross, styleGetter, options) {\r\n        options = options || {};\r\n        var self = this,\r\n            result = [],\r\n            sumPosition = options.sumPosition,\r\n            summaryText = options.summaryText || BI.i18nText(\"BI-Summary_Values\"),\r\n            summaryCellCreator = options.summaryCellCreator || function (v) {\r\n                return v;\r\n            };\r\n\r\n        function track (store, node) {\r\n            var next;\r\n            if (BI.isArray(node.children)) {\r\n                var totalLength = 0;\r\n                BI.each(node.children, function (index, child) {\r\n                    var next;\r\n                    if (store != -1) {\r\n                        next = store.slice();\r\n                        next.push(node);\r\n                    } else {\r\n                        next = [];\r\n                    }\r\n                    totalLength += track(next, child);\r\n                });\r\n                if (store != -1) {\r\n                    next = store.slice();\r\n                    next.push(node);\r\n                } else {\r\n                    next = [];\r\n                }\r\n                if (/** (store == -1 || node.children.length > 1) &&**/ BI.isNotEmptyArray(node.values)) {\r\n                    var summary = summaryCellCreator({\r\n                        text: summaryText,\r\n                        title: summaryText,\r\n                        type: \"bi.table_style_cell\",\r\n                        styleGetter: function () {\r\n                            return styleGetter(store === -1);\r\n                        },\r\n                        _store: options.tableStyleCellStoreGetter\r\n                    }, node, store === -1);\r\n                    for (var i = next.length; i < deep; i++) {\r\n                        next.push(summary);\r\n                    }\r\n                    if (!isCross) {\r\n                        next = next.concat(node.values);\r\n                    }\r\n                    if (next.length > 0) {\r\n                        if (!isCross) {\r\n                            sumPosition ? result.push(next) : result.splice(result.length - totalLength, 0, next);\r\n                        } else {\r\n                            for (var k = 0, l = node.values.length; k < l; k++) {\r\n                                sumPosition ? result.push(next) : result.splice(result.length - totalLength, 0, next);\r\n                            }\r\n                        }\r\n                    }\r\n                    return totalLength + 1;\r\n                }\r\n\r\n                return totalLength;\r\n            }\r\n            if (store != -1) {\r\n                next = store.slice();\r\n                for (var i = next.length; i < deep; i++) {\r\n                    next.push(node);\r\n                }\r\n            } else {\r\n                next = [];\r\n            }\r\n            if (!isCross && BI.isArray(node.values)) {\r\n                next = next.concat(node.values);\r\n            }\r\n            if (isCross && BI.isArray(node.values)) {\r\n                for (var i = 0, len = node.values.length; i < len - 1; i++) {\r\n                    if (next.length > 0) {\r\n                        result.push(next);\r\n                    }\r\n                }\r\n            }\r\n            if (next.length > 0) {\r\n                result.push(next);\r\n            }\r\n            return node.values ? 1 : 0;\r\n        }\r\n\r\n        BI.each(nodes, function (i, node) {\r\n            track(-1, node);\r\n        });\r\n        // 填充空位\r\n        BI.each(result, function (i, line) {\r\n            var last = BI.last(line);\r\n            for (var j = line.length; j < deep; j++) {\r\n                line.push(last);\r\n            }\r\n        });\r\n        return result;\r\n    },\r\n\r\n    formatItems4Special: function (nodes, deep, isCross, styleGetter, options) {\r\n        options = options || {};\r\n        var self = this,\r\n            result = [],\r\n            sumPosition = options.sumPosition,\r\n            summaryText = options.summaryText || BI.i18nText(\"BI-Summary_Values\");\r\n\r\n        function track (store, node) {\r\n            var next;\r\n            if (BI.isArray(node.children)) {\r\n                var totalLength = 0;\r\n                BI.each(node.children, function (index, child) {\r\n                    var next;\r\n                    if (store != -1) {\r\n                        next = store.slice();\r\n                        next.push(node);\r\n                    } else {\r\n                        next = [];\r\n                    }\r\n                    totalLength += track(next, child);\r\n                });\r\n                if (store != -1) {\r\n                    next = store.slice();\r\n                    next.push(node);\r\n                } else {\r\n                    next = [];\r\n                }\r\n                if (/** (store == -1 || node.children.length > 1) &&**/ BI.isNotEmptyArray(node.values)) {\r\n                    var summary = {\r\n                        text: summaryText,\r\n                        title: summaryText,\r\n                        type: \"bi.table_style_cell\",\r\n                        styleGetter: function () {\r\n                            return styleGetter(store === -1);\r\n                        },\r\n                        _store: options.tableStyleCellStoreGetter\r\n                    };\r\n                    for (var i = next.length; i < deep; i++) {\r\n                        next.push(summary);\r\n                    }\r\n                    if (next.length > 0) {\r\n                        if (!isCross) {\r\n                            sumPosition ? result.push(next) : result.splice(result.length - totalLength, 0, next);\r\n                        } else {\r\n                            for (var k = 0, l = node.values.length; k < l; k++) {\r\n                                sumPosition ? result.push(next) : result.splice(result.length - totalLength, 0, next);\r\n                            }\r\n                        }\r\n                    }\r\n                    return totalLength + node.values.length;\r\n                }\r\n\r\n                return totalLength;\r\n            }\r\n            if (store != -1) {\r\n                next = store.slice();\r\n                for (var i = next.length; i < deep; i++) {\r\n                    next.push(node);\r\n                }\r\n            } else {\r\n                next = [];\r\n            }\r\n            if (next.length > 0) {\r\n                result.push(next);\r\n            }\r\n            return node.values ? node.values.length : 0;\r\n        }\r\n\r\n        BI.each(nodes, function (i, node) {\r\n            track(-1, node);\r\n        });\r\n        // 填充空位\r\n        BI.each(result, function (i, line) {\r\n            var last = BI.last(line);\r\n            for (var j = line.length; j < deep; j++) {\r\n                line.push(last);\r\n            }\r\n        });\r\n        return result;\r\n    },\r\n\r\n    formatCrossItems: function (nodes, deep, styleGetter, options) {\r\n        var items = BI.TableTree.formatItems(nodes, deep, true, styleGetter, options);\r\n        return BI.unzip(items);\r\n    },\r\n\r\n    // 没有行维度时候格式化header，避免出现多个汇总\r\n    formatCrossItems4Special: function (nodes, deep, styleGetter, options) {\r\n        var items = BI.TableTree.formatItems4Special(nodes, deep, false, styleGetter, options);\r\n        return BI.unzip(items);\r\n    },\r\n\r\n    maxDeep: function (nodes) {\r\n        function track (deep, node) {\r\n            var d = deep;\r\n            if (BI.isNotEmptyArray(node.children)) {\r\n                BI.each(node.children, function (index, child) {\r\n                    d = Math.max(d, track(deep + 1, child));\r\n                });\r\n            }\r\n            return d;\r\n        }\r\n\r\n        var deep = 1;\r\n        if (BI.isObject(nodes)) {\r\n            BI.each(nodes, function (i, node) {\r\n                deep = Math.max(deep, track(1, node));\r\n            });\r\n        }\r\n        return deep;\r\n    }\r\n});\r\n\r\nBI.shortcut(\"bi.tree_table\", BI.TableTree);\r\n","/**\r\n * @Author: Young\r\n * @CreationDate 2018-01-10 9:50\r\n\r\n */\r\n!(function () {\r\n    var MIN_SIZE = 60;\r\n    var TIP_HEIGHT = 30;\r\n    BI.StyleTable = BI.inherit(BI.Widget, {\r\n        props: {\r\n            baseCls: \"bi-components-preview-table\",\r\n            $testId: \"bi-components-preview-table\",\r\n            userSelectable: true,\r\n            isNeedFreeze: true,\r\n            showSequence: false,\r\n            seqWidth: 60,\r\n            sequenceCellStyleGetter: BI.emptyFn,\r\n            headerCellStyleGetter: BI.emptyFn,\r\n            // 传给汇总、序号单元格的store，能在单元格绘制时使用上下文中的cssScale\r\n            tableStyleCellStoreGetter: null,\r\n            showPartData: false,\r\n            columnSortable: false,\r\n            columnSelectable: false,\r\n            tipPosition: \"bottom\",\r\n            zebraVeins: true,\r\n            freezeCols: [],\r\n            columnSize: [],\r\n            columnGaps: [],\r\n            headerRowSize: 30,\r\n            rowSize: 30,\r\n            header: [],\r\n            items: [],\r\n            watermark: {},\r\n            needFormat: true,\r\n            fontSize: 12,\r\n            minSize: 60,\r\n            regionColumnSize: [],\r\n            isHeaderAutoHeight: false,\r\n            isAutoHeight: false,\r\n        },\r\n\r\n        mounted: function () {\r\n            var self = this;\r\n            this._resizeHandler = BI.debounce(function () {\r\n                var width = self._getTableWidth(), height = self._getTableHeight();\r\n                if (self.table.getWidth() !== width || self.table.getHeight() !== height) {\r\n                    self.table.setWidth(width);\r\n                    self.table.setHeight(height);\r\n                    self.table.populate();\r\n                }\r\n            }, 30);\r\n            this.removeListener = BI.ResizeDetector.addResizeListener(this.wrapper, function () {\r\n                self._resizeHandler();\r\n            });\r\n            this._populate();\r\n        },\r\n        render: function () {\r\n            var self = this,\r\n                o = this.options;\r\n            var watermark = o.watermark;\r\n            return {\r\n                type: \"bi.absolute\",\r\n                items: [{\r\n                    el: {\r\n                        type: \"bi.vtape\",\r\n                        cls: o.userSelectable ? \"user-selectable\" : \"\",\r\n                        items: this._createTable()\r\n                    },\r\n                    top: 0, right: 0, bottom: 0, left: 0\r\n                }, {\r\n                    el: {\r\n                        type: \"bi.watermark\",\r\n                        invisible: !watermark.valid,\r\n                        watermark: watermark\r\n                    },\r\n                    left: 0,\r\n                    top: 0,\r\n                    right: 0,\r\n                    bottom: 0\r\n                }],\r\n                ref: function (_ref) {\r\n                    self.wrapper = _ref;\r\n                }\r\n            };\r\n        },\r\n\r\n        _createTable: function () {\r\n            var o = this.options,\r\n                self = this;\r\n            var tip = {\r\n                el: {\r\n                    type: \"bi.label\",\r\n                    cls: \"bi-tips\",\r\n                    text: BI.i18nText(\"BI-Conf_Current_Preview_Part_Data\"),\r\n                    textAlign: \"right\"\r\n                },\r\n                height: o.showPartData ? TIP_HEIGHT : 0\r\n            };\r\n            var table = {\r\n                type: \"bi.page_table\",\r\n                rowSize: o.rowSize,\r\n                headerRowSize: o.headerRowSize,\r\n                isNeedFreeze: o.isNeedFreeze,\r\n                freezeCols: o.freezeCols,\r\n                showSequence: o.showSequence,\r\n                seqWidth: o.seqWidth,\r\n                sequenceCellStyleGetter: o.sequenceCellStyleGetter,\r\n                headerCellStyleGetter: o.headerCellStyleGetter,\r\n                tableStyleCellStoreGetter: o.tableStyleCellStoreGetter,\r\n                ref: function (_ref) {\r\n                    self.table = _ref;\r\n                },\r\n                el: {\r\n                    type: \"bi.sequence_table\",\r\n                    el: {\r\n                        type: \"bi.adaptive_table\",\r\n                        el: (o.columnSelectable || o.columnSortable) ? {\r\n                            type: \"bi.sortable_table\",\r\n                            sortable: o.columnSortable,\r\n                            ref: function (ref) {\r\n                                self.sortableTable = ref;\r\n                            },\r\n                            el: {\r\n                                type: \"bi.resizable_table\",\r\n                                el: this._getGridConfig(),\r\n                            },\r\n                            listeners: [{\r\n                                eventName: 'EVENT_TABLE_SELECT_COLUMN',\r\n                                action: function (j) {\r\n                                    self.fireEvent('EVENT_TABLE_SELECT_COLUMN', j);\r\n                                },\r\n                            }, {\r\n                                eventName: 'EVENT_TABLE_SORT',\r\n                                action: function () {\r\n                                    self.fireEvent('EVENT_TABLE_SORT', arguments);\r\n                                },\r\n                            }],\r\n                        } : {\r\n                            type: \"bi.resizable_table\",\r\n                            el: this._getGridConfig(),\r\n                        },\r\n                        listeners: [{\r\n                            eventName: 'EVENT_TABLE_AFTER_COLUMN_RESIZE',\r\n                            action: function () {\r\n                                self.fireEvent('EVENT_TABLE_AFTER_COLUMN_RESIZE');\r\n                            },\r\n                        }],\r\n                    },\r\n                },\r\n            };\r\n            switch (o.tipPosition) {\r\n                case \"top\":\r\n                    return [tip, table];\r\n                case \"bottom\":\r\n                default:\r\n                    return [table, tip];\r\n            }\r\n        },\r\n\r\n        _getGridConfig: function () {\r\n            var o = this.options;\r\n\r\n            return {\r\n                type: 'bi.grid_auto_height_table',\r\n                columnGaps: o.columnGaps,\r\n                isAutoHeight: o.isAutoHeight,\r\n                isHeaderAutoHeight: o.isHeaderAutoHeight,\r\n                fontSize: o.fontSize,\r\n                fontLineHeight: o.fontSize * 1.4,\r\n                headerFontSize: o.fontSize,\r\n                headerFontLineHeight: o.fontSize * 1.4,\r\n            };\r\n        },\r\n\r\n        _getTableWidth: function () {\r\n            if (this.options.width) {\r\n                return this.options.width;\r\n            }\r\n            return this.element.width();\r\n        },\r\n\r\n        _getTableHeight: function () {\r\n            var height = this.element.height();\r\n            return this.options.showPartData ? height - TIP_HEIGHT : height;\r\n        },\r\n\r\n        _populate: function () {\r\n            this.populate(this.options.items, this.options.header);\r\n        },\r\n\r\n        // a、一列中最大宽度；b、所有宽度的均值*2；c、80\r\n        _calculateColumnSize: function () {\r\n\r\n            if (this.options.columnSize && this.options.columnSize.length > 0) {\r\n                return this.options.columnSize;\r\n            }\r\n\r\n            var fontSize = this.options.fontSize;\r\n            var minSize = this.options.minSize;\r\n\r\n            /**\r\n             * 获取某个单元的模拟宽度\r\n             * @param {object} cell 单元\r\n             */\r\n            function getSimulationWidth(cell) {\r\n                if (BI.isNumber(cell.width)) {\r\n                    return cell.width;\r\n                }\r\n                if (BI.isNotEmptyString(cell.text)) {\r\n                    return BI.Func.getGBWidth(cell.text) * fontSize * 1.2;\r\n                }\r\n                return 0;\r\n            }\r\n\r\n            /**\r\n             * 用于统计各列宽度\r\n             * @param {array} items 单元格\r\n             * @param {array} columnSizes 单元格宽度存储\r\n             */\r\n            function getColumnSizes(items, columnSizes) {\r\n                BI.each(items, function (i, row) {\r\n                    BI.each(row, function (j, cell) {\r\n                        var width = 0;\r\n                        // 针对于表格中的元素是布局组件\r\n                        if (BI.isNotEmptyArray(cell.items)) {\r\n                            BI.each(cell.items, function (idx, item) {\r\n                                width += getSimulationWidth(item);\r\n                            });\r\n                        } else {\r\n                            width += getSimulationWidth(cell);\r\n                        }\r\n                        columnSizes[j] = columnSizes[j] || [];\r\n                        columnSizes[j].push(width);\r\n                    });\r\n                });\r\n            }\r\n\r\n            var sizes = [];\r\n            getColumnSizes(this.options.header, sizes);\r\n            getColumnSizes(this.options.items, sizes);\r\n\r\n            /**\r\n             * 规则:\r\n             * 默认显示列宽最大值 = 当前字段名和字段值宽度均值*2\r\n             * 默认显示列宽最小值 = 80PX\r\n             * 如果计算出的最大值小于最小值时，显示最小值(交互后加的)\r\n             */\r\n            var columnSize = BI.map(sizes, function (i, column) {\r\n                // 根据要求过滤掉为空，不参与计算平均宽度的过程，否则导致计算方差太大\r\n                var avgSize = Math.ceil(BI.average(BI.filter(column, function (index, value) {\r\n                    return value >= 0;\r\n                })));\r\n                var maxSize = avgSize * 2;\r\n                var adaptSize = Math.ceil(BI.max(column));\r\n                if (maxSize < minSize) {\r\n                    return minSize;\r\n                }\r\n                return adaptSize < minSize ? minSize : adaptSize > maxSize ? maxSize : adaptSize;\r\n            });\r\n\r\n            /**\r\n             * 列宽实际显示的宽度是在原规则基础上加上图标的宽度(交互后加的)\r\n             */\r\n            BI.each(this.options.header, function (i, row) {\r\n                BI.each(row, function (j, cell) {\r\n                    columnSize[j] += BI.isNumber(cell.iconWidth) ? cell.iconWidth : 0;\r\n                    columnSize[j] += BI.isNumber(cell.lgap) ? cell.lgap : 0;\r\n                    columnSize[j] += BI.isNumber(cell.rgap) ? cell.rgap : 0;\r\n                    columnSize[j] += BI.isNumber(cell.hgap) ? cell.hgap * 2 : 0;\r\n                });\r\n            });\r\n\r\n            /**\r\n             * 当默认字段宽度总和小于组件宽度时，多余宽度按照各字段默认宽度的比例进行再分配\r\n             */\r\n            var tableWidth = this._getTableWidth() - 10;\r\n            var totalColumnSize = columnSize.reduce(function (a, b) {\r\n                return a + b;\r\n            }, 0);\r\n            if (totalColumnSize >= tableWidth) {\r\n                return columnSize;\r\n            }\r\n            var surplus = tableWidth - totalColumnSize;\r\n            return BI.map(columnSize, function (index, column) {\r\n                if (index === columnSize.length - 1) {\r\n                    return column + surplus;\r\n                }\r\n                surplus -= Math.ceil((tableWidth - totalColumnSize) / columnSize.length);\r\n                return column + Math.ceil((tableWidth - totalColumnSize) / columnSize.length);\r\n            });\r\n        },\r\n\r\n        _formatItems: function () {\r\n            var self = this;\r\n            var items = BI.deepClone(this.options.items);\r\n            var zebraVeins = this.options.zebraVeins;\r\n            BI.each(items, function (i, row) {\r\n                BI.each(row, function (j, item) {\r\n                    if (BI.isNotNull(self.options.header[0]) &&\r\n                        BI.isNotNull(self.options.header[0][j]) &&\r\n                        self.options.header[0][j].iconCls === \"number-field-font\" &&\r\n                        self.options.needFormat) {\r\n                        item.text = BI.Format.numberFormat(item.text);\r\n                    }\r\n                    // BI-65648 单元格定高的预览表格回车显示成转义\\n\r\n                    item.text = BI.replaceAll(item.text || \"\", \"\\n\", \"\\\\n\");\r\n\r\n                    var zebraVeinsCls = i % 2 !== 0 ? \"even-row\" : \"odd-row\";\r\n                    item.cls = (item.cls || \"\") + \" body-row \" + (zebraVeins ? zebraVeinsCls : \"\");\r\n                });\r\n            });\r\n            return items;\r\n        },\r\n\r\n        _formatHeader: function () {\r\n            var header = BI.deepClone(this.options.header);\r\n            BI.each(header, function (i, row) {\r\n                BI.each(row, function (j, item) {\r\n                    item.cls = (item.cls || \"\") + \" header-row \";\r\n                });\r\n            });\r\n            return header;\r\n        },\r\n\r\n        populate: function (items, header, opt) {\r\n            this.options.items = items;\r\n            this.options.header = header;\r\n\r\n            var columnSize = this._calculateColumnSize();\r\n            this.table.attr(\"columnSize\", columnSize);\r\n            // freezeScroll===true 不重置滚动条位置（默认重置）\r\n            opt = opt || {};\r\n            if (BI.isNull(opt.freezeScroll) || opt.freezeScroll === false) {\r\n                this.table.attr('scrollTop', 0);\r\n                this.table.attr('scrollLeft', BI.sum(columnSize.slice(0, opt.scrollLeftIndex || 0)));\r\n            }\r\n            this.table.restore();\r\n            this.table.setWidth(this._getTableWidth());\r\n            this.table.setHeight(this._getTableHeight());\r\n            this.table.attr(\"regionColumnSize\", this.options.regionColumnSize);\r\n            this.table.attr(\"minColumnSize\", columnSize);\r\n            this.table.attr(\"isNeedFreeze\", true);\r\n            this.table.attr(\"freezeCols\", this.options.freezeCols);\r\n            this.table.attr(\"showSequence\", this.options.showSequence);\r\n            this.table.populate(this._formatItems(), this._formatHeader());\r\n        },\r\n\r\n        setHorizontalScroll: function (v) {\r\n            this.table.setRightHorizontalScroll(v);\r\n        },\r\n\r\n        setVerticalScroll: function (v) {\r\n            this.table.setVerticalScroll(v);\r\n        },\r\n\r\n        selectColumns: function (cols) {\r\n            this.sortableTable && this.sortableTable.selectColumns(cols);\r\n        },\r\n\r\n        setSortable: function (sortable) {\r\n            this.sortableTable && this.sortableTable.setSortable(sortable);\r\n        },\r\n\r\n        getSelectedColumns: function () {\r\n            return this.sortableTable && this.sortableTable.getSelectedColumns();\r\n        },\r\n\r\n        destroyed: function () {\r\n            this.removeListener && this.removeListener();\r\n        },\r\n\r\n        getColumnSize: function () {\r\n            return this.table.getColumnSize();\r\n        },\r\n    });\r\n    BI.shortcut(\"bi.components.style_table\", BI.StyleTable);\r\n})();\r\n","(function () {\r\n    var clamp = function (min, value, max) {\r\n        if (value < min) {\r\n            return min;\r\n        }\r\n        if (value > max) {\r\n            return max;\r\n        }\r\n        return value;\r\n    };\r\n\r\n    var BUFFER_ROWS = 5;\r\n    var NO_ROWS_SCROLL_RESULT = {\r\n        index: 0,\r\n        offset: 0,\r\n        position: 0,\r\n        contentHeight: 0\r\n    };\r\n\r\n    BI.TableScrollHelper = function (rowCount,\r\n        defaultRowHeight,\r\n        viewportHeight,\r\n        rowHeightGetter) {\r\n        this._rowOffsets = BI.PrefixIntervalTree.uniform(rowCount, defaultRowHeight);\r\n        this._storedHeights = new Array(rowCount);\r\n        for (var i = 0; i < rowCount; ++i) {\r\n            this._storedHeights[i] = defaultRowHeight;\r\n        }\r\n        this._rowCount = rowCount;\r\n        this._position = 0;\r\n        this._contentHeight = rowCount * defaultRowHeight;\r\n        this._defaultRowHeight = defaultRowHeight;\r\n        this._rowHeightGetter = rowHeightGetter ?\r\n            rowHeightGetter : function () {\r\n                return defaultRowHeight;\r\n            };\r\n        this._viewportHeight = viewportHeight;\r\n\r\n        this._updateHeightsInViewport(0, 0);\r\n    };\r\n\r\n    BI.TableScrollHelper.prototype = {\r\n        constructor: BI.TableScrollHelper,\r\n        setRowHeightGetter: function (rowHeightGetter) {\r\n            this._rowHeightGetter = rowHeightGetter;\r\n        },\r\n\r\n        setViewportHeight: function (viewportHeight) {\r\n            this._viewportHeight = viewportHeight;\r\n        },\r\n\r\n        getContentHeight: function () {\r\n            return this._contentHeight;\r\n        },\r\n\r\n        _updateHeightsInViewport: function (firstRowIndex,\r\n            firstRowOffset) {\r\n            var top = firstRowOffset;\r\n            var index = firstRowIndex;\r\n            while (top <= this._viewportHeight && index < this._rowCount) {\r\n                this._updateRowHeight(index);\r\n                top += this._storedHeights[index];\r\n                index++;\r\n            }\r\n        },\r\n\r\n        _updateHeightsAboveViewport: function (firstRowIndex) {\r\n            var index = firstRowIndex - 1;\r\n            while (index >= 0 && index >= firstRowIndex - BUFFER_ROWS) {\r\n                var delta = this._updateRowHeight(index);\r\n                this._position += delta;\r\n                index--;\r\n            }\r\n        },\r\n\r\n        _updateRowHeight: function (rowIndex) {\r\n            if (rowIndex < 0 || rowIndex >= this._rowCount) {\r\n                return 0;\r\n            }\r\n            var newHeight = this._rowHeightGetter(rowIndex);\r\n            if (newHeight !== this._storedHeights[rowIndex]) {\r\n                var change = newHeight - this._storedHeights[rowIndex];\r\n                this._rowOffsets.set(rowIndex, newHeight);\r\n                this._storedHeights[rowIndex] = newHeight;\r\n                this._contentHeight += change;\r\n                return change;\r\n            }\r\n            return 0;\r\n        },\r\n\r\n        getRowPosition: function (rowIndex) {\r\n            this._updateRowHeight(rowIndex);\r\n            return this._rowOffsets.sumUntil(rowIndex);\r\n        },\r\n\r\n        scrollBy: function (delta) {\r\n            if (this._rowCount === 0) {\r\n                return NO_ROWS_SCROLL_RESULT;\r\n            }\r\n            var firstRow = this._rowOffsets.greatestLowerBound(this._position);\r\n            firstRow = clamp(firstRow, 0, Math.max(this._rowCount - 1, 0));\r\n            var firstRowPosition = this._rowOffsets.sumUntil(firstRow);\r\n            var rowIndex = firstRow;\r\n            var position = this._position;\r\n\r\n            var rowHeightChange = this._updateRowHeight(rowIndex);\r\n            if (firstRowPosition !== 0) {\r\n                position += rowHeightChange;\r\n            }\r\n            var visibleRowHeight = this._storedHeights[rowIndex] -\r\n                (position - firstRowPosition);\r\n\r\n            if (delta >= 0) {\r\n\r\n                while (delta > 0 && rowIndex < this._rowCount) {\r\n                    if (delta < visibleRowHeight) {\r\n                        position += delta;\r\n                        delta = 0;\r\n                    } else {\r\n                        delta -= visibleRowHeight;\r\n                        position += visibleRowHeight;\r\n                        rowIndex++;\r\n                    }\r\n                    if (rowIndex < this._rowCount) {\r\n                        this._updateRowHeight(rowIndex);\r\n                        visibleRowHeight = this._storedHeights[rowIndex];\r\n                    }\r\n                }\r\n            } else if (delta < 0) {\r\n                delta = -delta;\r\n                var invisibleRowHeight = this._storedHeights[rowIndex] - visibleRowHeight;\r\n\r\n                while (delta > 0 && rowIndex >= 0) {\r\n                    if (delta < invisibleRowHeight) {\r\n                        position -= delta;\r\n                        delta = 0;\r\n                    } else {\r\n                        position -= invisibleRowHeight;\r\n                        delta -= invisibleRowHeight;\r\n                        rowIndex--;\r\n                    }\r\n                    if (rowIndex >= 0) {\r\n                        var change = this._updateRowHeight(rowIndex);\r\n                        invisibleRowHeight = this._storedHeights[rowIndex];\r\n                        position += change;\r\n                    }\r\n                }\r\n            }\r\n\r\n            var maxPosition = this._contentHeight - this._viewportHeight;\r\n            position = clamp(position, 0, maxPosition);\r\n            this._position = position;\r\n            var firstRowIndex = this._rowOffsets.greatestLowerBound(position);\r\n            firstRowIndex = clamp(firstRowIndex, 0, Math.max(this._rowCount - 1, 0));\r\n            firstRowPosition = this._rowOffsets.sumUntil(firstRowIndex);\r\n            var firstRowOffset = firstRowPosition - position;\r\n\r\n            this._updateHeightsInViewport(firstRowIndex, firstRowOffset);\r\n            this._updateHeightsAboveViewport(firstRowIndex);\r\n\r\n            return {\r\n                index: firstRowIndex,\r\n                offset: firstRowOffset,\r\n                position: this._position,\r\n                contentHeight: this._contentHeight\r\n            };\r\n        },\r\n\r\n        _getRowAtEndPosition: function (rowIndex) {\r\n            // We need to update enough rows above the selected one to be sure that when\r\n            // we scroll to selected position all rows between first shown and selected\r\n            // one have most recent heights computed and will not resize\r\n            this._updateRowHeight(rowIndex);\r\n            var currentRowIndex = rowIndex;\r\n            var top = this._storedHeights[currentRowIndex];\r\n            while (top < this._viewportHeight && currentRowIndex >= 0) {\r\n                currentRowIndex--;\r\n                if (currentRowIndex >= 0) {\r\n                    this._updateRowHeight(currentRowIndex);\r\n                    top += this._storedHeights[currentRowIndex];\r\n                }\r\n            }\r\n            var position = this._rowOffsets.sumTo(rowIndex) - this._viewportHeight;\r\n            if (position < 0) {\r\n                position = 0;\r\n            }\r\n            return position;\r\n        },\r\n\r\n        scrollTo: function (position) {\r\n            if (this._rowCount === 0) {\r\n                return NO_ROWS_SCROLL_RESULT;\r\n            }\r\n            if (position <= 0) {\r\n                // If position less than or equal to 0 first row should be fully visible\r\n                // on top\r\n                this._position = 0;\r\n                this._updateHeightsInViewport(0, 0);\r\n\r\n                return {\r\n                    index: 0,\r\n                    offset: 0,\r\n                    position: this._position,\r\n                    contentHeight: this._contentHeight\r\n                };\r\n            } else if (position >= this._contentHeight - this._viewportHeight) {\r\n                // If position is equal to or greater than max scroll value, we need\r\n                // to make sure to have bottom border of last row visible.\r\n                var rowIndex = this._rowCount - 1;\r\n                position = this._getRowAtEndPosition(rowIndex);\r\n            }\r\n            this._position = position;\r\n\r\n            var firstRowIndex = this._rowOffsets.greatestLowerBound(position);\r\n            firstRowIndex = clamp(firstRowIndex, 0, Math.max(this._rowCount - 1, 0));\r\n            var firstRowPosition = this._rowOffsets.sumUntil(firstRowIndex);\r\n            var firstRowOffset = firstRowPosition - position;\r\n\r\n            this._updateHeightsInViewport(firstRowIndex, firstRowOffset);\r\n            this._updateHeightsAboveViewport(firstRowIndex);\r\n\r\n            return {\r\n                index: firstRowIndex,\r\n                offset: firstRowOffset,\r\n                position: this._position,\r\n                contentHeight: this._contentHeight\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Allows to scroll to selected row with specified offset. It always\r\n         * brings that row to top of viewport with that offset\r\n         */\r\n        scrollToRow: function (rowIndex, offset) {\r\n            rowIndex = clamp(rowIndex, 0, Math.max(this._rowCount - 1, 0));\r\n            offset = clamp(offset, -this._storedHeights[rowIndex], 0);\r\n            var firstRow = this._rowOffsets.sumUntil(rowIndex);\r\n            return this.scrollTo(firstRow - offset);\r\n        },\r\n\r\n        /**\r\n         * Allows to scroll to selected row by bringing it to viewport with minimal\r\n         * scrolling. This that if row is fully visible, scroll will not be changed.\r\n         * If top border of row is above top of viewport it will be scrolled to be\r\n         * fully visible on the top of viewport. If the bottom border of row is\r\n         * below end of viewport, it will be scrolled up to be fully visible on the\r\n         * bottom of viewport.\r\n         */\r\n        scrollRowIntoView: function (rowIndex) {\r\n            rowIndex = clamp(rowIndex, 0, Math.max(this._rowCount - 1, 0));\r\n            var rowBegin = this._rowOffsets.sumUntil(rowIndex);\r\n            var rowEnd = rowBegin + this._storedHeights[rowIndex];\r\n            if (rowBegin < this._position) {\r\n                return this.scrollTo(rowBegin);\r\n            } else if (this._position + this._viewportHeight < rowEnd) {\r\n                var position = this._getRowAtEndPosition(rowIndex);\r\n                return this.scrollTo(position);\r\n            }\r\n            return this.scrollTo(this._position);\r\n        }\r\n    };\r\n\r\n})();\r\n","/**\r\n *\r\n * Created by GUY on 2016/5/26.\r\n * @class BI.SequenceTableTreeNumber\r\n * @extends BI.Widget\r\n */\r\nBI.SequenceTableTreeNumber = BI.inherit(BI.Widget, {\r\n    _defaultConfig: function () {\r\n        return BI.extend(BI.SequenceTableTreeNumber.superclass._defaultConfig.apply(this, arguments), {\r\n            baseCls: \"bi-sequence-table-tree-number\",\r\n            isNeedFreeze: false,\r\n            startSequence: 1, // 开始的序号\r\n            scrollTop: 0,\r\n            headerRowSize: 25,\r\n            rowSize: 25,\r\n            rowSizeGetter: BI.emptyFn,\r\n            headerRowSizeGetter: BI.emptyFn,\r\n\r\n            sequenceHeaderCreator: BI.emptyFn,\r\n            sequenceSummaryText: BI.i18nText(\"BI-Summary_Values\"),\r\n\r\n            header: [],\r\n            items: [], // 二维数组\r\n\r\n            // 交叉表头\r\n            crossHeader: [],\r\n            crossItems: [],\r\n            width: 60\r\n        });\r\n    },\r\n\r\n    _init: function () {\r\n        BI.SequenceTableTreeNumber.superclass._init.apply(this, arguments);\r\n        var o = this.options;\r\n        this.vCurr = 1;\r\n        this.hCurr = 1;\r\n        this.tasks = [];\r\n\r\n        this.gridView = BI.createWidget({\r\n            type: \"bi.grid_view\",\r\n            overflowX: false,\r\n            overflowY: false,\r\n            scrollTop: o.scrollTop,\r\n            columnCount: 1,\r\n            estimatedColumnSize: o.width,\r\n            width: o.width,\r\n            rowHeightGetter: this._rowHeightGetter.bind(this),\r\n            columnWidthGetter: function () {\r\n                return o.width;\r\n            }\r\n        });\r\n\r\n        this.headerContainer = BI.createWidget({\r\n            type: \"bi.absolute\",\r\n            cls: \"sequence-table-header-cell bi-border-top bi-border-left bi-border-bottom bi-border-right\",\r\n            width: o.width,\r\n            scrollable: false\r\n        });\r\n\r\n        this.layout = BI.createWidget({\r\n            type: \"bi.vtape\",\r\n            element: this,\r\n            items: [\r\n                {\r\n                    el: this.headerContainer,\r\n                    height: 2\r\n                },\r\n                {\r\n                    el: this.gridView,\r\n                    height: \"fill\"\r\n                }\r\n            ]\r\n        });\r\n        // 缓存第一行对应的序号\r\n        this.start = this.options.startSequence;\r\n        this.cache = {};\r\n        this._nextState();\r\n\r\n        this.populate();\r\n    },\r\n\r\n    _rowHeightGetter: function (i) {\r\n        var o = this.options;\r\n        var headerHeight = this._getHeaderHeight();\r\n        if (headerHeight >= o.height) {\r\n            if (i === 0) {\r\n                return headerHeight;\r\n            } else {\r\n                if (this.rowHeights) {\r\n                    var rowHeight = this.rowHeights[i - 1];\r\n\r\n                    return BI.isNotNull(rowHeight) ? rowHeight : this.options.rowSize;\r\n                }\r\n\r\n                return this.options.rowSize;\r\n            }\r\n        }\r\n\r\n        if (this.rowHeights) {\r\n            var rowHeight = this.rowHeights[i];\r\n\r\n            return BI.isNotNull(rowHeight) ? rowHeight : this.options.rowSize;\r\n        }\r\n\r\n        return this.options.rowSize;\r\n    },\r\n\r\n    _getNextSequence: function (nodes) {\r\n        var self = this;\r\n        var start = this.start;\r\n        var cnt = this.start;\r\n\r\n        function track (node) {\r\n            // 如果已经有缓存了就不改计数了，复杂表会出现这种情况\r\n            var key = self._getCacheKey(node);\r\n            self.cache[key] || (self.cache[key] = cnt);\r\n            cnt++;\r\n        }\r\n\r\n        BI.each(nodes, function (i, node) {\r\n            if (BI.isNotEmptyArray(node.children)) {\r\n                BI.each(node.children, function (index, child) {\r\n                    if (index === 0) {\r\n                        var key = self._getCacheKey(child);\r\n                        if (self.cache[key]) {\r\n                            start = cnt = self.cache[key];\r\n                        }\r\n                    }\r\n                    track(child);\r\n                });\r\n            }\r\n        });\r\n        this.start = cnt;\r\n\r\n        return start;\r\n    },\r\n\r\n    _getStart: function (nodes) {\r\n        var self = this;\r\n        var start = this.start;\r\n        BI.some(nodes, function (i, node) {\r\n            if (BI.isNotEmptyArray(node.children)) {\r\n                return BI.some(node.children, function (index, child) {\r\n                    if (index === 0) {\r\n                        var key = self._getCacheKey(child);\r\n                        if (self.cache[key]) {\r\n                            start = self.cache[key];\r\n\r\n                            return true;\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        });\r\n\r\n        return start;\r\n    },\r\n\r\n    _formatNumber: function (nodes) {\r\n        var o = this.options;\r\n        var result = [];\r\n        var count = this._getStart(nodes);\r\n\r\n        function getLeafCount (node) {\r\n            var cnt = 0;\r\n            if (BI.isNotEmptyArray(node.children)) {\r\n                BI.each(node.children, function (index, child) {\r\n                    cnt += getLeafCount(child);\r\n                });\r\n                cnt++;\r\n            } else {\r\n                cnt++;\r\n            }\r\n\r\n            return cnt;\r\n        }\r\n\r\n        var start = 0;\r\n        var top = 0;\r\n        BI.each(nodes, function (i, node) {\r\n            if (BI.isArray(node.children)) {\r\n                if (BI.isNotEmptyArray(node.values) && o.rowPosition === BICst.DESIGN.TABLE_ROW_SUM_POSITION.TOP) {\r\n                    result.push({\r\n                        text: o.sequenceSummaryText,\r\n                        start: start++,\r\n                        top: top,\r\n                        cnt: 1,\r\n                        isSummary: true,\r\n                        height: o.rowSize\r\n                    });\r\n                    top += o.rowSize;\r\n                }\r\n                BI.each(node.children, function (index, child) {\r\n                    var cnt = getLeafCount(child);\r\n                    result.push({\r\n                        text: count++,\r\n                        start: start,\r\n                        top: top,\r\n                        cnt: cnt,\r\n                        index: index,\r\n                        height: cnt * o.rowSize\r\n                    });\r\n                    start += cnt;\r\n                    top += cnt * o.rowSize;\r\n                });\r\n                if (BI.isNotEmptyArray(node.values) && o.rowPosition !== BICst.DESIGN.TABLE_ROW_SUM_POSITION.TOP) {\r\n                    result.push({\r\n                        text: o.sequenceSummaryText,\r\n                        start: start++,\r\n                        top: top,\r\n                        cnt: 1,\r\n                        isSummary: true,\r\n                        height: o.rowSize\r\n                    });\r\n                    top += o.rowSize;\r\n                }\r\n            }\r\n        });\r\n        var rowSize = this.rowHeights = o.rowSizeGetter();\r\n        result = BI.map(result, function (key, item) {\r\n            return [BI.extend(\r\n                {\r\n                    type: \"bi.table_style_cell\",\r\n                    cls: \"sequence-table-number-cell bi-border-left bi-border-bottom bi-border-right\",\r\n                    width: o.width,\r\n                    styleGetter:\r\n                        item.isSummary === true\r\n                            ? function () {\r\n                                return o.summaryCellStyleGetter(true);\r\n                            }\r\n                            : (function (key) {\r\n                                return function () {\r\n                                    return o.sequenceCellStyleGetter(key);\r\n                                };\r\n                            })(item.index),\r\n                    _store: o.tableStyleCellStoreGetter\r\n                }, item, {\r\n                    height: rowSize[key] || item.height\r\n                }\r\n            )];\r\n        });\r\n\r\n        return result;\r\n    },\r\n\r\n    _layout: function () {\r\n        var o = this.options;\r\n        this.headerContainer.empty();\r\n        var headerHeight = this._getHeaderHeight();\r\n        var items = this.layout.attr(\"items\");\r\n\r\n        if (headerHeight >= o.height) {\r\n            items[0].height = 0;\r\n        } else {\r\n            BI.createWidget({\r\n                type: \"bi.absolute\",\r\n                element: this.headerContainer,\r\n                items: [{\r\n                    el: BI.extend({\r\n                        type: \"bi.table_style_cell\",\r\n                        height: headerHeight - 2,\r\n                        cls: \"sequence-table-title-cell\",\r\n                        styleGetter: o.headerCellStyleGetter,\r\n                        text: BI.i18nText(\"BI-Number_Index\"),\r\n                        _store: o.tableStyleCellStoreGetter\r\n                    }, o.sequenceHeaderCreator()),\r\n                    left: 0,\r\n                    top: 0,\r\n                    right: 0,\r\n                    bottom: 0\r\n                }]\r\n            });\r\n            items[0].height = headerHeight;\r\n        }\r\n\r\n        this.layout.attr(\"items\", items);\r\n        this.layout.resize();\r\n\r\n        this.numbers = this._formatNumber(o.items);\r\n        if (headerHeight >= o.height) {\r\n            this.numbers.unshift([BI.extend({\r\n                type: \"bi.table_style_cell\",\r\n                height: headerHeight - 2,\r\n                cls: \"sequence-table-title-cell\",\r\n                styleGetter: o.headerCellStyleGetter,\r\n                text: BI.i18nText(\"BI-Number_Index\"),\r\n                _store: o.tableStyleCellStoreGetter\r\n            }, o.sequenceHeaderCreator())]);\r\n            var estimatedRowSize = BI.isArray(this.numbers) ? (BI.sum(this.rowHeights) + headerHeight) / (this.numbers.length + 1) : 0;\r\n            this.gridView.setEstimatedRowSize(estimatedRowSize);\r\n            this.gridView.setHeight(o.height);\r\n            this.gridView.restore();\r\n        } else {\r\n            var estimatedRowSize = BI.isArray(this.numbers) && this.numbers.length > 0 ? BI.sum(this.rowHeights) / this.numbers.length : 0;\r\n            this.gridView.setEstimatedRowSize(estimatedRowSize);\r\n            this.gridView.setHeight(o.height - headerHeight);\r\n            this.gridView.restore();\r\n        }\r\n    },\r\n\r\n    _getHeaderHeight: function () {\r\n        var o = this.options;\r\n        var headerHeights = o.headerRowSizeGetter();\r\n        return BI.sum(headerHeights);\r\n    },\r\n\r\n    _nextState: function () {\r\n        var o = this.options;\r\n        this._getNextSequence(o.items);\r\n    },\r\n\r\n    _prevState: function () {\r\n        var o = this.options;\r\n        var firstChild;\r\n        BI.some(o.items, function (i, node) {\r\n            if (BI.isNotEmptyArray(node.children)) {\r\n                return BI.some(node.children, function (j, child) {\r\n                    firstChild = child;\r\n\r\n                    return true;\r\n                });\r\n            }\r\n        });\r\n        if (firstChild && BI.isNotEmptyObject(this.cache)) {\r\n            this.start = this.cache[this._getCacheKey(firstChild)];\r\n        } else {\r\n            this.start = 1;\r\n        }\r\n        this._nextState();\r\n    },\r\n\r\n    _calculateChildrenToRender: function () {\r\n        var o = this.options;\r\n        this.gridView._populate(this.numbers);\r\n        this.gridView.setScrollTop(o.scrollTop);\r\n    },\r\n\r\n    _getCacheKey: function (node) {\r\n        if (!this.nullKey) {\r\n            this.nullKey = BI.UUID();\r\n        }\r\n        var text = BI.isNull(node.text) ? node.value : node.text;\r\n\r\n        return BI.isNull(text) ? this.nullKey : text;\r\n    },\r\n\r\n    _restore: function () {\r\n        this.gridView.restore();\r\n    },\r\n\r\n    _populate: function () {\r\n        var self = this;\r\n        BI.each(this.tasks, function (i, task) {\r\n            task.apply(self);\r\n        });\r\n        this.tasks = [];\r\n\r\n        this._layout();\r\n        this._calculateChildrenToRender();\r\n    },\r\n\r\n    setVerticalScroll: function (scrollTop) {\r\n        var o = this.options;\r\n        if (o.scrollTop !== scrollTop) {\r\n            o.scrollTop = scrollTop;\r\n            this.gridView.setScrollTop(o.scrollTop);\r\n        }\r\n    },\r\n\r\n    getVerticalScroll: function () {\r\n        return this.options.scrollTop;\r\n    },\r\n\r\n    setVPage: function (v) {\r\n        if (v <= 1) {\r\n            this.cache = {};\r\n            this.start = this.options.startSequence;\r\n            this._restore();\r\n            this.tasks.push(this._nextState);\r\n        } else if (v === this.vCurr + 1) {\r\n            this.tasks.push(this._nextState);\r\n        } else if (v === this.vCurr - 1) {\r\n            this.tasks.push(this._prevState);\r\n        }\r\n        this.vCurr = v;\r\n    },\r\n\r\n    setHPage: function (v) {\r\n        if (v !== this.hCurr) {\r\n            this.tasks.push(this._prevState);\r\n        }\r\n        this.hCurr = v;\r\n    },\r\n\r\n    setWidth: function (width) {\r\n        BI.SequenceTableTreeNumber.superclass.setWidth.apply(this, arguments);\r\n        this.gridView.setWidth(width);\r\n        this.headerContainer.setWidth(width);\r\n    },\r\n\r\n    restore: function () {\r\n        this._restore();\r\n    },\r\n\r\n    populate: function (items, header, crossItems, crossHeader) {\r\n        var o = this.options;\r\n        if (items && items !== this.options.items) {\r\n            o.items = items;\r\n            this._restore();\r\n            this.tasks.push(this._prevState);\r\n        }\r\n        if (header && header !== this.options.header) {\r\n            o.header = header;\r\n        }\r\n        if (crossItems && crossItems !== this.options.crossItems) {\r\n            o.crossItems = crossItems;\r\n        }\r\n        if (crossHeader && crossHeader !== this.options.crossHeader) {\r\n            o.crossHeader = crossHeader;\r\n        }\r\n        this._populate();\r\n    }\r\n});\r\nBI.shortcut(\"bi.sequence_table_tree_number\", BI.SequenceTableTreeNumber);\r\n","/**\r\n *\r\n * Created by GUY on 2016/8/10.\r\n * @class BI.SequenceTableDynamicNumber\r\n * @extends BI.SequenceTableTreeNumber\r\n */\r\nBI.SequenceTableDynamicNumber = BI.inherit(BI.SequenceTableTreeNumber, {\r\n    _defaultConfig: function () {\r\n        return BI.extend(BI.SequenceTableDynamicNumber.superclass._defaultConfig.apply(this, arguments), {\r\n            extraCls: 'bi-sequence-table-dynamic-number',\r\n        });\r\n    },\r\n\r\n    _init: function () {\r\n        BI.SequenceTableDynamicNumber.superclass._init.apply(this, arguments);\r\n    },\r\n\r\n    _formatNumber: function (nodes) {\r\n        var o = this.options;\r\n        var result = [];\r\n        var count = this._getStart(nodes);\r\n\r\n        function getLeafCount(node) {\r\n            var cnt = 0;\r\n            if (BI.isNotEmptyArray(node.children)) {\r\n                BI.each(node.children, function (index, child) {\r\n                    cnt += getLeafCount(child);\r\n                });\r\n                if (BI.isNotEmptyArray(node.values)) {\r\n                    cnt++;\r\n                }\r\n            } else {\r\n                cnt++;\r\n            }\r\n\r\n            return cnt;\r\n        }\r\n\r\n        var start = 0;\r\n        var top = 0;\r\n        BI.each(nodes, function (i, node) {\r\n            if (BI.isArray(node.children)) {\r\n                if (BI.isNotEmptyArray(node.values) && o.rowPosition === BICst.DESIGN.TABLE_ROW_SUM_POSITION.TOP) {\r\n                    result.push({\r\n                        text: o.sequenceSummaryText,\r\n                        title: o.sequenceSummaryText,\r\n                        start: start++,\r\n                        top: top,\r\n                        cnt: 1,\r\n                        isSummary: true,\r\n                        height: o.rowSize,\r\n                    });\r\n                    top += o.rowSize;\r\n                }\r\n                BI.each(node.children, function (index, child) {\r\n                    var cnt = getLeafCount(child);\r\n                    var text = count++;\r\n                    result.push({\r\n                        text: text,\r\n                        title: text,\r\n                        start: start,\r\n                        top: top,\r\n                        cnt: cnt,\r\n                        index: index,\r\n                        height: cnt * o.rowSize,\r\n                    });\r\n                    start += cnt;\r\n                    top += cnt * o.rowSize;\r\n                });\r\n                if (BI.isNotEmptyArray(node.values) && o.rowPosition !== BICst.DESIGN.TABLE_ROW_SUM_POSITION.TOP) {\r\n                    result.push({\r\n                        text: o.sequenceSummaryText,\r\n                        title: o.sequenceSummaryText,\r\n                        start: start++,\r\n                        top: top,\r\n                        cnt: 1,\r\n                        isSummary: true,\r\n                        height: o.rowSize,\r\n                    });\r\n                    top += o.rowSize;\r\n                }\r\n            }\r\n        });\r\n\r\n        var rowSize = this.rowHeights = o.rowSizeGetter();\r\n        result = BI.map(result, function (key, item) {\r\n            return [BI.extend(\r\n                {\r\n                    type: \"bi.table_style_cell\",\r\n                    cls: \"sequence-table-number-cell bi-border-left bi-border-bottom bi-border-right\",\r\n                    width: o.width,\r\n                    styleGetter:\r\n                        item.isSummary === true\r\n                            ? function () {\r\n                                return o.summaryCellStyleGetter(true);\r\n                            }\r\n                            : (function (key) {\r\n                                return function () {\r\n                                    return o.sequenceCellStyleGetter(key);\r\n                                };\r\n                            })(item.index),\r\n                    _store: o.tableStyleCellStoreGetter\r\n                }, item, {\r\n                    height: rowSize[key] || item.height\r\n                }\r\n            )];\r\n        });\r\n\r\n        return result;\r\n    },\r\n});\r\nBI.shortcut('bi.sequence_table_dynamic_number', BI.SequenceTableDynamicNumber);\r\n","/**\r\n *\r\n * 表格\r\n *\r\n * Created by GUY on 2015/9/22.\r\n * @class BI.PageTableCell\r\n * @extends BI.Single\r\n */\r\nBI.PageTableCell = BI.inherit(BI.Widget, {\r\n    _defaultConfig: function () {\r\n        return BI.extend(BI.PageTableCell.superclass._defaultConfig.apply(this, arguments), {\r\n            baseCls: \"bi-page-table-cell\",\r\n            text: \"\",\r\n            title: \"\"\r\n        });\r\n    },\r\n\r\n    _init: function () {\r\n        BI.PageTableCell.superclass._init.apply(this, arguments);\r\n        BI.createWidget({\r\n            type: \"bi.label\",\r\n            element: this,\r\n            textAlign: \"left\",\r\n            whiteSpace: \"nowrap\",\r\n            height: this.options.height,\r\n            text: this.options.text,\r\n            title: this.options.title,\r\n            value: this.options.value,\r\n            lgap: 5,\r\n            rgap: 5\r\n        });\r\n\r\n        if (BI.isNotNull(this.options.styles) && BI.isObject(this.options.styles)) {\r\n            this.element.css(this.options.styles);\r\n        }\r\n    }\r\n});\r\n\r\nBI.shortcut(\"bi.page_table_cell\", BI.PageTableCell);","/**\r\n * 分页表格\r\n *\r\n * Created by GUY on 2016/2/15.\r\n * @class BI.PageTable\r\n * @extends BI.Widget\r\n */\r\nBI.PageTable = BI.inherit(BI.Widget, {\r\n\r\n    _const: {\r\n        scrollWidth: 18,\r\n        minScrollWidth: 100\r\n    },\r\n\r\n    _defaultConfig: function () {\r\n        return BI.extend(BI.PageTable.superclass._defaultConfig.apply(this, arguments), {\r\n            baseCls: \"bi-page-table\",\r\n            el: {\r\n                type: \"bi.sequence_table\"\r\n            },\r\n            pager: {\r\n                horizontal: {\r\n                    pages: false, // 总页数\r\n                    curr: 1, // 初始化当前页， pages为数字时可用\r\n\r\n                    hasPrev: BI.emptyFn,\r\n                    hasNext: BI.emptyFn,\r\n                    firstPage: 1,\r\n                    lastPage: BI.emptyFn\r\n                },\r\n                vertical: {\r\n                    pages: false, // 总页数\r\n                    curr: 1, // 初始化当前页， pages为数字时可用\r\n\r\n                    hasPrev: BI.emptyFn,\r\n                    hasNext: BI.emptyFn,\r\n                    firstPage: 1,\r\n                    lastPage: BI.emptyFn\r\n                }\r\n            },\r\n\r\n            itemsCreator: BI.emptyFn,\r\n\r\n            isNeedFreeze: false, // 是否需要冻结单元格\r\n            freezeCols: [], // 冻结的列号,从0开始,isNeedFreeze为true时生效\r\n\r\n            isNeedMerge: false, // 是否需要合并单元格\r\n            mergeCols: [], // 合并的单元格列号\r\n            mergeRule: BI.emptyFn,\r\n\r\n            columnSize: [],\r\n            minColumnSize: [],\r\n            maxColumnSize: [],\r\n            headerRowSize: 25,\r\n            rowSize: 25,\r\n\r\n            showSequence: false,\r\n            seqWidth: 60,\r\n    \r\n            regionColumnSize: [],\r\n\r\n            headerCellStyleGetter: BI.emptyFn,\r\n            summaryCellStyleGetter: BI.emptyFn,\r\n            sequenceCellStyleGetter: BI.emptyFn,\r\n            // 传给汇总、序号单元格的store，能在单元格绘制时使用上下文中的cssScale\r\n            tableStyleCellStoreGetter: null,\r\n\r\n            header: [],\r\n            items: [], // 二维数组\r\n\r\n            // 交叉表头\r\n            crossHeader: [],\r\n            crossItems: []\r\n        });\r\n    },\r\n\r\n    _init: function () {\r\n        BI.PageTable.superclass._init.apply(this, arguments);\r\n        var self = this, o = this.options;\r\n        this.hCurr = 1;\r\n        this.vCurr = 1;\r\n\r\n        this.table = BI.createWidget(o.el, {\r\n            type: \"bi.sequence_table\",\r\n            width: o.width,\r\n            height: o.height && o.height - 30,\r\n\r\n            isNeedResize: true,\r\n\r\n            isNeedFreeze: o.isNeedFreeze,\r\n            freezeCols: o.freezeCols,\r\n\r\n            isNeedMerge: o.isNeedMerge,\r\n            mergeCols: o.mergeCols,\r\n            mergeRule: o.mergeRule,\r\n\r\n            columnSize: o.columnSize,\r\n            minColumnSize: o.minColumnSize,\r\n            maxColumnSize: o.maxColumnSize,\r\n            headerRowSize: o.headerRowSize,\r\n            rowSize: o.rowSize,\r\n\r\n            showSequence: o.showSequence,\r\n            seqWidth: o.seqWidth,\r\n\r\n            regionColumnSize: o.regionColumnSize,\r\n\r\n            headerCellStyleGetter: o.headerCellStyleGetter,\r\n            summaryCellStyleGetter: o.summaryCellStyleGetter,\r\n            sequenceCellStyleGetter: o.sequenceCellStyleGetter,\r\n\r\n            tableStyleCellStoreGetter: o.tableStyleCellStoreGetter,\r\n\r\n            header: o.header,\r\n            items: o.items,\r\n            // 交叉表头\r\n            crossHeader: o.crossHeader,\r\n            crossItems: o.crossItems\r\n        });\r\n\r\n        this.table.on(BI.Table.EVENT_TABLE_SCROLL, function () {\r\n            self.fireEvent(BI.Table.EVENT_TABLE_SCROLL, arguments);\r\n        });\r\n        this.table.on(BI.Table.EVENT_TABLE_AFTER_REGION_RESIZE, function () {\r\n            o.regionColumnSize = this.getRegionColumnSize();\r\n            o.columnSize = this.getColumnSize();\r\n            self.fireEvent(BI.Table.EVENT_TABLE_AFTER_REGION_RESIZE, arguments);\r\n        });\r\n        this.table.on(BI.Table.EVENT_TABLE_AFTER_COLUMN_RESIZE, function () {\r\n            o.regionColumnSize = this.getRegionColumnSize();\r\n            o.columnSize = this.getColumnSize();\r\n            self.fireEvent(BI.Table.EVENT_TABLE_AFTER_COLUMN_RESIZE, arguments);\r\n        });\r\n\r\n        this.pager = BI.createWidget(o.pager, {\r\n            type: \"bi.direction_pager\",\r\n            height: 24\r\n        });\r\n        this.pager.on(BI.Pager.EVENT_CHANGE, function () {\r\n            var vpage = this.getVPage && this.getVPage();\r\n            if (BI.isNull(vpage)) {\r\n                vpage = this.getCurrentPage();\r\n            }\r\n            var hpage = this.getHPage && this.getHPage();\r\n            o.itemsCreator({\r\n                vpage: vpage,\r\n                hpage: hpage\r\n            }, function () {\r\n                self.table.setVPage ? self.table.setVPage(vpage) : self.table.setValue(vpage);\r\n                self.table.setHPage && self.table.setHPage(hpage);\r\n                self.populate.apply(self, arguments);\r\n            });\r\n        });\r\n\r\n        BI.createWidget({\r\n            type: \"bi.absolute\",\r\n            element: this,\r\n            items: [{\r\n                el: this.table,\r\n                left: 0,\r\n                top: 0\r\n            }, {\r\n                el: this.pager,\r\n                left: 0,\r\n                right: 10,\r\n                bottom: 3\r\n            }]\r\n        });\r\n    },\r\n\r\n    setHPage: function (v) {\r\n        this.hCurr = v;\r\n        this.pager.setHPage && this.pager.setHPage(v);\r\n        this.table.setHPage && this.table.setHPage(v);\r\n    },\r\n\r\n    setVPage: function (v) {\r\n        this.vCurr = v;\r\n        this.pager.setVPage && this.pager.setVPage(v);\r\n        this.table.setVPage && this.table.setVPage(v);\r\n    },\r\n\r\n    getHPage: function () {\r\n        var hpage = this.pager.getHPage && this.pager.getHPage();\r\n        if (BI.isNotNull(hpage)) {\r\n            return hpage;\r\n        }\r\n        hpage = this.pager.getCurrentPage && this.pager.getCurrentPage();\r\n        if (BI.isNotNull(hpage)) {\r\n            return hpage;\r\n        }\r\n        return this.hpage;\r\n    },\r\n\r\n    getVPage: function () {\r\n        var vpage = this.pager.getVPage && this.pager.getVPage();\r\n        if (BI.isNotNull(vpage)) {\r\n            return vpage;\r\n        }\r\n        vpage = this.pager.getCurrentPage && this.pager.getCurrentPage();\r\n        if (BI.isNotNull(vpage)) {\r\n            return vpage;\r\n        }\r\n        return this.vpage;\r\n    },\r\n\r\n    setWidth: function (width) {\r\n        BI.PageTable.superclass.setWidth.apply(this, arguments);\r\n        this.table.setWidth(width);\r\n    },\r\n\r\n    setHeight: function (height) {\r\n        BI.PageTable.superclass.setHeight.apply(this, arguments);\r\n        var o = this.options;\r\n        var showPager = false;\r\n        if (this.pager.isShowPager && this.pager.isShowPager()) {\r\n            showPager = true;\r\n        } else if (this.pager.hasHNext && this.pager.hasHNext()) {\r\n            showPager = true;\r\n        } else if (this.pager.hasHPrev && this.pager.hasHPrev()) {\r\n            showPager = true;\r\n        } else if (this.pager.hasVNext && this.pager.hasVNext()) {\r\n            showPager = true;\r\n        } else if (this.pager.hasVPrev && this.pager.hasVPrev()) {\r\n            showPager = true;\r\n        } else if (this.pager.hasNext && this.pager.hasNext()) {\r\n            showPager = true;\r\n        } else if (this.pager.hasPrev && this.pager.hasPrev()) {\r\n            showPager = true;\r\n        }\r\n        this.table.setHeight(height - (showPager ? ((o.pager && o.pager.height) || 30) : 0));\r\n    },\r\n\r\n    setColumnSize: function (columnSize) {\r\n        this.options.columnSize = columnSize;\r\n        this.table.setColumnSize(columnSize);\r\n    },\r\n\r\n    getColumnSize: function () {\r\n        return this.table.getColumnSize();\r\n    },\r\n\r\n    setRegionColumnSize: function (columnSize) {\r\n        this.options.columnSize = columnSize;\r\n        this.table.setRegionColumnSize(columnSize);\r\n    },\r\n\r\n    getRegionColumnSize: function () {\r\n        return this.table.getRegionColumnSize();\r\n    },\r\n\r\n    getVerticalScroll: function () {\r\n        return this.table.getVerticalScroll();\r\n    },\r\n\r\n    setLeftHorizontalScroll: function (scrollLeft) {\r\n        this.table.setLeftHorizontalScroll(scrollLeft);\r\n    },\r\n\r\n    setRightHorizontalScroll: function (scrollLeft) {\r\n        this.table.setRightHorizontalScroll(scrollLeft);\r\n    },\r\n\r\n    setVerticalScroll: function (scrollTop) {\r\n        this.table.setVerticalScroll(scrollTop);\r\n    },\r\n\r\n    restore: function () {\r\n        this.table.restore();\r\n    },\r\n\r\n    attr: function () {\r\n        BI.PageTable.superclass.attr.apply(this, arguments);\r\n        this.table.attr.apply(this.table, arguments);\r\n    },\r\n\r\n    populate: function () {\r\n        this.pager.populate();\r\n        this.table.populate.apply(this.table, arguments);\r\n    },\r\n\r\n    destroy: function () {\r\n        this.table.destroy();\r\n        this.pager && this.pager.destroy();\r\n        BI.PageTable.superclass.destroy.apply(this, arguments);\r\n    }\r\n});\r\nBI.shortcut(\"bi.page_table\", BI.PageTable);\r\n","/**\r\n * 预览表列\r\n *\r\n * Created by GUY on 2015/12/25.\r\n * @class BI.PreviewTableCell\r\n * @extends BI.Widget\r\n */\r\nBI.PreviewTableCell = BI.inherit(BI.Widget, {\r\n\r\n    _defaultConfig: function () {\r\n        return BI.extend(BI.PreviewTableCell.superclass._defaultConfig.apply(this, arguments), {\r\n            baseCls: \"bi-preview-table-cell\",\r\n            text: \"\"\r\n        });\r\n    },\r\n\r\n    _init: function () {\r\n        BI.PreviewTableCell.superclass._init.apply(this, arguments);\r\n        var self = this, o = this.options;\r\n\r\n        BI.createWidget({\r\n            type: \"bi.label\",\r\n            element: this,\r\n            textAlign: o.textAlign || \"left\",\r\n            whiteSpace: o.whiteSpace || \"normal\",\r\n            height: this.options.height,\r\n            text: this.options.text,\r\n            value: this.options.value,\r\n            lgap: o.lgap,\r\n            rgap: o.rgap,\r\n            hgap: o.hgap || 5\r\n        });\r\n    }\r\n});\r\nBI.shortcut(\"bi.preview_table_cell\", BI.PreviewTableCell);","/**\r\n * 预览表\r\n *\r\n * Created by GUY on 2015/12/25.\r\n * @class BI.PreviewTableHeaderCell\r\n * @extends BI.Widget\r\n */\r\nBI.PreviewTableHeaderCell = BI.inherit(BI.Widget, {\r\n\r\n    _defaultConfig: function () {\r\n        return BI.extend(BI.PreviewTableHeaderCell.superclass._defaultConfig.apply(this, arguments), {\r\n            baseCls: \"bi-preview-table-header-cell\",\r\n            text: \"\"\r\n        });\r\n    },\r\n\r\n    _init: function () {\r\n        BI.PreviewTableHeaderCell.superclass._init.apply(this, arguments);\r\n        var self = this, o = this.options;\r\n\r\n        BI.createWidget({\r\n            type: \"bi.label\",\r\n            element: this,\r\n            textAlign: o.textAlign || \"left\",\r\n            whiteSpace: o.whiteSpace || \"nowrap\",\r\n            height: this.options.height,\r\n            text: this.options.text,\r\n            value: this.options.value,\r\n            lgap: o.lgap,\r\n            rgap: o.rgap,\r\n            hgap: o.hgap || 5\r\n        });\r\n    }\r\n});\r\nBI.shortcut(\"bi.preview_table_header_cell\", BI.PreviewTableHeaderCell);","/**\r\n * 预览表\r\n *\r\n * Created by GUY on 2015/12/25.\r\n * @class BI.PreviewTable\r\n * @extends BI.Widget\r\n */\r\nBI.PreviewTable = BI.inherit(BI.Widget, {\r\n\r\n    _defaultConfig: function () {\r\n        return BI.extend(BI.PreviewTable.superclass._defaultConfig.apply(this, arguments), {\r\n            baseCls: \"bi-preview-table\",\r\n            isNeedFreeze: false,\r\n            freezeCols: [],\r\n            rowSize: null,\r\n            columnSize: [],\r\n            headerRowSize: 30,\r\n            header: [],\r\n            items: []\r\n        });\r\n    },\r\n\r\n    _init: function () {\r\n        BI.PreviewTable.superclass._init.apply(this, arguments);\r\n        var self = this, o = this.options;\r\n\r\n        this.table = BI.createWidget({\r\n            type: \"bi.table_view\",\r\n            element: this,\r\n            isNeedResize: false,\r\n\r\n\r\n            isNeedFreeze: o.isNeedFreeze,\r\n            freezeCols: o.freezeCols,\r\n\r\n            rowSize: o.rowSize,\r\n            columnSize: o.columnSize,\r\n            headerRowSize: o.headerRowSize,\r\n\r\n            header: BI.map(o.header, function (i, items) {\r\n                return BI.map(items, function (j, item) {\r\n                    return BI.extend({\r\n                        type: \"bi.preview_table_header_cell\"\r\n                    }, item);\r\n                });\r\n            }),\r\n            items: BI.map(o.items, function (i, items) {\r\n                return BI.map(items, function (j, item) {\r\n                    return BI.extend({\r\n                        type: \"bi.preview_table_cell\"\r\n                    }, item);\r\n                });\r\n            })\r\n        });\r\n        this.table.on(BI.Table.EVENT_TABLE_AFTER_INIT, function () {\r\n            self.fireEvent(BI.Table.EVENT_TABLE_AFTER_INIT, arguments);\r\n        });\r\n        this.table.on(BI.Table.EVENT_TABLE_RESIZE, function () {\r\n            self._adjustColumns();\r\n        });\r\n        this._adjustColumns();\r\n    },\r\n\r\n    // 是否有自适应调节的列，即列宽为\"\"\r\n    _hasAdaptCol: function (columnSize) {\r\n        return BI.any(columnSize, function (i, size) {\r\n            return size === \"\";\r\n        });\r\n    },\r\n\r\n    _isPercentage: function (columnSize) {\r\n        return columnSize[0] <= 1;\r\n    },\r\n\r\n    _adjustColumns: function () {\r\n        var self = this, o = this.options;\r\n        if (o.isNeedFreeze === true) {\r\n            // 如果存在百分比的情况\r\n            if (this._isPercentage(o.columnSize)) {\r\n                if (this._hasAdaptCol(o.columnSize)) {\r\n                    var findCols = [], remain = 0;\r\n                    BI.each(o.columnSize, function (i, size) {\r\n                        if (size === \"\") {\r\n                            findCols.push(i);\r\n                        } else {\r\n                            remain += size;\r\n                        }\r\n                    });\r\n                    remain = 1 - remain;\r\n                    var average = remain / findCols.length;\r\n                    BI.each(findCols, function (i, col) {\r\n                        o.columnSize[col] = average;\r\n                    });\r\n                }\r\n                var isRight = BI.first(o.freezeCols) !== 0;\r\n                var freezeSize = [], notFreezeSize = [];\r\n                BI.each(o.columnSize, function (i, size) {\r\n                    if (o.freezeCols.includes(i)) {\r\n                        freezeSize.push(size);\r\n                    } else {\r\n                        notFreezeSize.push(size);\r\n                    }\r\n                });\r\n                var sumFreezeSize = BI.sum(freezeSize), sumNotFreezeSize = BI.sum(notFreezeSize);\r\n                BI.each(freezeSize, function (i, size) {\r\n                    freezeSize[i] = size / sumFreezeSize;\r\n                });\r\n                BI.each(notFreezeSize, function (i, size) {\r\n                    notFreezeSize[i] = size / sumNotFreezeSize;\r\n                });\r\n                this.table.setRegionColumnSize(isRight ? [\"fill\", sumFreezeSize] : [sumFreezeSize, \"fill\"]);\r\n                this.table.setColumnSize(isRight ? (notFreezeSize.concat(freezeSize)) : (freezeSize.concat(notFreezeSize)));\r\n            }\r\n        } else {\r\n            // 如果存在自适应宽度的列或者是百分比计算的列，需要将整个表宽设为100%\r\n            if (this._hasAdaptCol(o.columnSize) || this._isPercentage(o.columnSize)) {\r\n                this.table.setRegionColumnSize([\"100%\"]);\r\n            }\r\n        }\r\n    },\r\n\r\n    setColumnSize: function (columnSize) {\r\n        return this.table.setColumnSize(columnSize);\r\n    },\r\n\r\n    getColumnSize: function () {\r\n        return this.table.getColumnSize();\r\n    },\r\n\r\n    getCalculateColumnSize: function () {\r\n        return this.table.getCalculateColumnSize();\r\n    },\r\n\r\n    setHeaderColumnSize: function (columnSize) {\r\n        return this.table.setHeaderColumnSize(columnSize);\r\n    },\r\n\r\n    setRegionColumnSize: function (columnSize) {\r\n        return this.table.setRegionColumnSize(columnSize);\r\n    },\r\n\r\n    getRegionColumnSize: function () {\r\n        return this.table.getRegionColumnSize();\r\n    },\r\n\r\n    getCalculateRegionColumnSize: function () {\r\n        return this.table.getCalculateRegionColumnSize();\r\n    },\r\n\r\n    getCalculateRegionRowSize: function () {\r\n        return this.table.getCalculateRegionRowSize();\r\n    },\r\n\r\n    getClientRegionColumnSize: function () {\r\n        return this.table.getClientRegionColumnSize();\r\n    },\r\n\r\n    getScrollRegionColumnSize: function () {\r\n        return this.table.getScrollRegionColumnSize();\r\n    },\r\n\r\n    getScrollRegionRowSize: function () {\r\n        return this.table.getScrollRegionRowSize();\r\n    },\r\n\r\n    hasVerticalScroll: function () {\r\n        return this.table.hasVerticalScroll();\r\n    },\r\n\r\n    setVerticalScroll: function (scrollTop) {\r\n        return this.table.setVerticalScroll(scrollTop);\r\n    },\r\n\r\n    setLeftHorizontalScroll: function (scrollLeft) {\r\n        return this.table.setLeftHorizontalScroll(scrollLeft);\r\n    },\r\n\r\n    setRightHorizontalScroll: function (scrollLeft) {\r\n        return this.table.setRightHorizontalScroll(scrollLeft);\r\n    },\r\n\r\n    getVerticalScroll: function () {\r\n        return this.table.getVerticalScroll();\r\n    },\r\n\r\n    getLeftHorizontalScroll: function () {\r\n        return this.table.getLeftHorizontalScroll();\r\n    },\r\n\r\n    getRightHorizontalScroll: function () {\r\n        return this.table.getRightHorizontalScroll();\r\n    },\r\n\r\n    getColumns: function () {\r\n        return this.table.getColumns();\r\n    },\r\n\r\n    populate: function (items, header) {\r\n        if (items) {\r\n            items = BI.map(items, function (i, items) {\r\n                return BI.map(items, function (j, item) {\r\n                    return BI.extend({\r\n                        type: \"bi.preview_table_cell\"\r\n                    }, item);\r\n                });\r\n            });\r\n        }\r\n        if (header) {\r\n            header = BI.map(header, function (i, items) {\r\n                return BI.map(items, function (j, item) {\r\n                    return BI.extend({\r\n                        type: \"bi.preview_table_header_cell\"\r\n                    }, item);\r\n                });\r\n            });\r\n        }\r\n        this.table.populate(items, header);\r\n        this._adjustColumns();\r\n    }\r\n});\r\nBI.PreviewTable.EVENT_CHANGE = \"PreviewTable.EVENT_CHANGE\";\r\nBI.shortcut(\"bi.preview_table\", BI.PreviewTable);\r\n","/**\r\n *\r\n * Created by GUY on 2016/5/26.\r\n * @class BI.SequenceTableListNumber\r\n * @extends BI.Widget\r\n */\r\nBI.SequenceTableListNumber = BI.inherit(BI.Widget, {\r\n\r\n    _defaultConfig: function () {\r\n        return BI.extend(BI.SequenceTableListNumber.superclass._defaultConfig.apply(this, arguments), {\r\n            baseCls: \"bi-sequence-table-list-number\",\r\n            isNeedFreeze: false,\r\n            scrollTop: 0,\r\n            startSequence: 1, // 开始的序号\r\n            headerRowSize: 25,\r\n            rowSize: 25,\r\n            rowSizeGetter: BI.emptyFn,\r\n            headerRowSizeGetter: BI.emptyFn,\r\n\r\n            sequenceHeaderCreator: BI.emptyFn,\r\n\r\n            header: [],\r\n            items: [], // 二维数组\r\n\r\n            // 交叉表头\r\n            crossHeader: [],\r\n            crossItems: [],\r\n\r\n            pageSize: 20,\r\n            width: 60\r\n        });\r\n    },\r\n\r\n    _init: function () {\r\n        BI.SequenceTableListNumber.superclass._init.apply(this, arguments);\r\n        var o = this.options;\r\n        this.start = o.startSequence;\r\n\r\n        this.gridView = BI.createWidget({\r\n            type: \"bi.grid_view\",\r\n            overflowX: false,\r\n            overflowY: false,\r\n            scrollTop: o.scrollTop,\r\n            columnCount: 1,\r\n            estimatedColumnSize: o.width,\r\n            width: o.width,\r\n            rowHeightGetter: this._rowHeightGetter.bind(this),\r\n            columnWidthGetter: function () {\r\n                return o.width;\r\n            }\r\n        });\r\n\r\n        this.headerContainer = BI.createWidget({\r\n            type: \"bi.absolute\",\r\n            cls: \"sequence-table-header-cell bi-border-top bi-border-left bi-border-bottom bi-border-right\",\r\n            width: o.width,\r\n            scrollable: false\r\n        });\r\n\r\n        this.layout = BI.createWidget({\r\n            type: \"bi.vtape\",\r\n            element: this,\r\n            items: [{\r\n                el: this.headerContainer,\r\n                height: 2\r\n            }, {\r\n                el: this.gridView,\r\n                height: \"fill\"\r\n            }]\r\n        });\r\n        this.populate();\r\n    },\r\n\r\n    _rowHeightGetter: function (i) {\r\n        if (this.rowHeights) {\r\n            var rowHeight = this.rowHeights[i];\r\n\r\n            return BI.isNotNull(rowHeight) ? rowHeight : this.options.rowSize;\r\n        }\r\n\r\n        return this.options.rowSize;\r\n    },\r\n\r\n    _layout: function () {\r\n        var o = this.options;\r\n        this.headerContainer.empty();\r\n        var headerHeights = o.headerRowSizeGetter();\r\n        var headerHeight = BI.sum(headerHeights);\r\n\r\n        BI.createWidget({\r\n            type: \"bi.absolute\",\r\n            element: this.headerContainer,\r\n            items: [{\r\n                el: BI.extend({\r\n                    type: \"bi.table_style_cell\",\r\n                    height: headerHeight - 2,\r\n                    cls: \"sequence-table-title-cell\",\r\n                    styleGetter: o.headerCellStyleGetter,\r\n                    text: BI.i18nText(\"BI-Number_Index\"),\r\n                    _store: o.tableStyleCellStoreGetter\r\n                }, o.sequenceHeaderCreator()),\r\n                left: 0,\r\n                top: 0,\r\n                right: 0,\r\n                bottom: 0\r\n            }]\r\n        });\r\n\r\n        var items = this.layout.attr(\"items\");\r\n        if (o.isNeedFreeze === false) {\r\n            items[0].height = 0;\r\n        } else if (o.isNeedFreeze === true) {\r\n            items[0].height = headerHeight;\r\n        }\r\n        this.layout.attr(\"items\", items);\r\n        this.layout.resize();\r\n        this.numbers = this._formatNumber(o.items);\r\n        var estimatedRowSize = o.items.length > 0 ? BI.sum(this.rowHeights) / o.items.length : 0;\r\n        this.gridView.setEstimatedRowSize(estimatedRowSize);\r\n        this.gridView.setHeight(o.height - headerHeight);\r\n    },\r\n\r\n    _formatNumber: function (items) {\r\n        var self = this, o = this.options;\r\n        var rowSize = this.rowHeights = o.rowSizeGetter();\r\n        var result = BI.map(items, function (i, row) {\r\n            return BI.map(row, function (j, item) {\r\n                return {\r\n                    type: \"bi.table_style_cell\",\r\n                    cls: \"sequence-table-number-cell bi-border-left bi-border-bottom bi-border-right \" + (i % 2 !== 0 ? \"even-row\" : \"odd-row\"),\r\n                    width: o.width,\r\n                    height: rowSize ? rowSize[i] : o.rowSize,\r\n                    text: self.start + i,\r\n                    styleGetter: function () {\r\n                        return o.sequenceCellStyleGetter(self.start + i - 1);\r\n                    },\r\n                    _store: o.tableStyleCellStoreGetter\r\n                };\r\n            });\r\n        });\r\n\r\n        return result;\r\n    },\r\n\r\n    _calculateChildrenToRender: function () {\r\n        var self = this, o = this.options;\r\n        this.gridView._populate(this.numbers);\r\n        this.gridView.setScrollTop(o.scrollTop);\r\n    },\r\n\r\n    _populate: function () {\r\n        this._calculateChildrenToRender();\r\n    },\r\n\r\n    setVerticalScroll: function (scrollTop) {\r\n        var o = this.options;\r\n        if (o.scrollTop !== scrollTop) {\r\n            o.scrollTop = scrollTop;\r\n            this.gridView.setScrollTop(o.scrollTop);\r\n        }\r\n    },\r\n\r\n    getVerticalScroll: function () {\r\n        return this.options.scrollTop;\r\n    },\r\n\r\n    setVPage: function (v) {\r\n        v = v < 1 ? 1 : v;\r\n        var o = this.options;\r\n        this.start = (v - 1) * o.pageSize + 1;\r\n    },\r\n\r\n    setWidth: function (width) {\r\n        BI.SequenceTableListNumber.superclass.setWidth.apply(this, arguments);\r\n        this.gridView.setWidth(width);\r\n        this.headerContainer.setWidth(width);\r\n    },\r\n\r\n    _restore: function () {\r\n        this.gridView.restore();\r\n    },\r\n\r\n    restore: function () {\r\n        this._restore();\r\n    },\r\n\r\n    setPagesize: function (size) {\r\n        this.options.pageSize = size;\r\n    },\r\n\r\n    populate: function (items, header) {\r\n        var o = this.options;\r\n        if (items && items !== this.options.items) {\r\n            o.items = items;\r\n        }\r\n        if (header && header !== this.options.header) {\r\n            o.header = header;\r\n        }\r\n        this._restore();\r\n        this._layout();\r\n        this._populate();\r\n    }\r\n});\r\nBI.shortcut(\"bi.sequence_table_list_number\", BI.SequenceTableListNumber);\r\n","/**\r\n * 带有序号的表格\r\n *\r\n * Created by GUY on 2016/5/26.\r\n * @class BI.SequenceTable\r\n * @extends BI.Widget\r\n */\r\nBI.SequenceTable = BI.inherit(BI.Widget, {\r\n\r\n    _defaultConfig: function () {\r\n        return BI.extend(BI.SequenceTable.superclass._defaultConfig.apply(this, arguments), {\r\n            baseCls: \"bi-sequence-table\",\r\n            el: {\r\n                type: \"bi.adaptive_table\"\r\n            },\r\n\r\n            sequence: {},\r\n\r\n            isNeedResize: true,\r\n\r\n            isNeedFreeze: false, // 是否需要冻结单元格\r\n            freezeCols: [], // 冻结的列号,从0开始,isNeedFreeze为true时生效\r\n\r\n            isNeedMerge: false, // 是否需要合并单元格\r\n            mergeCols: [], // 合并的单元格列号\r\n            mergeRule: BI.emptyFn,\r\n\r\n            columnSize: [],\r\n            minColumnSize: [],\r\n            maxColumnSize: [],\r\n            headerRowSize: 25,\r\n            rowSize: 25,\r\n\r\n            regionColumnSize: [],\r\n\r\n            headerCellStyleGetter: BI.emptyFn,\r\n            summaryCellStyleGetter: BI.emptyFn,\r\n            sequenceCellStyleGetter: BI.emptyFn,\r\n            // 传给汇总、序号单元格的store，能在单元格绘制时使用上下文中的cssScale\r\n            tableStyleCellStoreGetter: null,\r\n\r\n            header: [],\r\n            items: [], // 二维数组\r\n\r\n            // 交叉表头\r\n            crossHeader: [],\r\n            crossItems: [],\r\n\r\n            showSequence: false,\r\n            startSequence: 1, // 开始的序号\r\n            seqWidth: 60\r\n        });\r\n    },\r\n\r\n    _init: function () {\r\n        BI.SequenceTable.superclass._init.apply(this, arguments);\r\n        var self = this, o = this.options;\r\n\r\n        this.table = BI.createWidget(o.el, {\r\n            type: \"bi.adaptive_table\",\r\n            width: o.showSequence === true ? o.width - o.seqWidth : o.width,\r\n            height: o.height,\r\n            isNeedResize: o.isNeedResize,\r\n\r\n            isNeedFreeze: o.isNeedFreeze,\r\n            freezeCols: o.freezeCols,\r\n\r\n            isNeedMerge: o.isNeedMerge,\r\n            mergeCols: o.mergeCols,\r\n            mergeRule: o.mergeRule,\r\n\r\n            columnSize: o.columnSize,\r\n            minColumnSize: o.minColumnSize,\r\n            maxColumnSize: o.maxColumnSize,\r\n            headerRowSize: o.headerRowSize,\r\n            rowSize: o.rowSize,\r\n\r\n            regionColumnSize: o.regionColumnSize,\r\n\r\n            headerCellStyleGetter: o.headerCellStyleGetter,\r\n            summaryCellStyleGetter: o.summaryCellStyleGetter,\r\n            sequenceCellStyleGetter: o.sequenceCellStyleGetter,\r\n\r\n            tableStyleCellStoreGetter: o.tableStyleCellStoreGetter,\r\n\r\n            header: o.header,\r\n            items: o.items,\r\n            // 交叉表头\r\n            crossHeader: o.crossHeader,\r\n            crossItems: o.crossItems\r\n        });\r\n\r\n        this.sequence = BI.createWidget(o.sequence, {\r\n            type: \"bi.sequence_table_list_number\",\r\n            invisible: o.showSequence === false,\r\n            startSequence: o.startSequence,\r\n            isNeedFreeze: o.isNeedFreeze,\r\n            header: o.header,\r\n            items: o.items,\r\n            crossHeader: o.crossHeader,\r\n            crossItems: o.crossItems,\r\n            headerRowSize: o.headerRowSize,\r\n            rowSize: o.rowSize,\r\n            rowSizeGetter: function () {\r\n                return self.table.getFirstColumnRowSize();\r\n            },\r\n            headerRowSizeGetter: function () {\r\n                return self.table.getFirstColumnHeaderRowSize();\r\n            },\r\n            width: o.seqWidth,\r\n            height: o.height && o.height - BI.GridTableScrollbar.SIZE,\r\n\r\n            headerCellStyleGetter: o.headerCellStyleGetter,\r\n            summaryCellStyleGetter: o.summaryCellStyleGetter,\r\n            sequenceCellStyleGetter: o.sequenceCellStyleGetter,\r\n            tableStyleCellStoreGetter: o.tableStyleCellStoreGetter\r\n        });\r\n\r\n        this.table.on(BI.Table.EVENT_TABLE_SCROLL, function () {\r\n            if (self.sequence.getVerticalScroll() !== this.getVerticalScroll()) {\r\n                self.sequence.setVerticalScroll(this.getVerticalScroll());\r\n                // self.sequence._populate();\r\n            }\r\n            self.fireEvent(BI.Table.EVENT_TABLE_SCROLL, arguments);\r\n        });\r\n        this.table.on(BI.Table.EVENT_TABLE_AFTER_REGION_RESIZE, function () {\r\n            o.regionColumnSize = this.getRegionColumnSize();\r\n            o.columnSize = this.getColumnSize();\r\n            self.sequence.setVerticalScroll(this.getVerticalScroll());\r\n            self.sequence.populate();\r\n            self.fireEvent(BI.Table.EVENT_TABLE_AFTER_REGION_RESIZE, arguments);\r\n        });\r\n        this.table.on(BI.Table.EVENT_TABLE_AFTER_COLUMN_RESIZE, function () {\r\n            o.regionColumnSize = this.getRegionColumnSize();\r\n            o.columnSize = this.getColumnSize();\r\n            self.sequence.setVerticalScroll(this.getVerticalScroll());\r\n            self.sequence.populate();\r\n            self.fireEvent(BI.Table.EVENT_TABLE_AFTER_COLUMN_RESIZE, arguments);\r\n        });\r\n\r\n        this.htape = BI.createWidget({\r\n            type: \"bi.absolute\",\r\n            element: this,\r\n            items: [{\r\n                el: this.sequence,\r\n                left: 0,\r\n                top: 0\r\n            }, {\r\n                el: this.table,\r\n                top: 0,\r\n                left: o.showSequence === true ? o.seqWidth : 0\r\n            }]\r\n        });\r\n        this._populate();\r\n    },\r\n\r\n    _populate: function () {\r\n        var o = this.options;\r\n        if (o.showSequence === true) {\r\n            this.sequence.setVisible(true);\r\n            this.table.element.css(\"left\", o.seqWidth + \"px\");\r\n            this.table.setWidth(o.width - o.seqWidth);\r\n            this.sequence.setWidth(o.seqWidth);\r\n        } else {\r\n            this.sequence.setVisible(false);\r\n            this.table.element.css(\"left\", \"0px\");\r\n            this.table.setWidth(o.width);\r\n        }\r\n    },\r\n\r\n    setWidth: function (width) {\r\n        BI.PageTable.superclass.setWidth.apply(this, arguments);\r\n        this.table.setWidth(this.options.showSequence ? width - this.options.seqWidth : width);\r\n    },\r\n\r\n    setHeight: function (height) {\r\n        BI.PageTable.superclass.setHeight.apply(this, arguments);\r\n        this.table.setHeight(height);\r\n        this.sequence.setHeight(height - BI.GridTableScrollbar.SIZE);\r\n    },\r\n\r\n    setColumnSize: function (columnSize) {\r\n        this.options.columnSize = columnSize;\r\n        this.table.setColumnSize(columnSize);\r\n    },\r\n\r\n    getColumnSize: function () {\r\n        return this.table.getColumnSize();\r\n    },\r\n\r\n    setRegionColumnSize: function (columnSize) {\r\n        this.options.columnSize = columnSize;\r\n        this.table.setRegionColumnSize(columnSize);\r\n    },\r\n\r\n    getRegionColumnSize: function () {\r\n        return this.table.getRegionColumnSize();\r\n    },\r\n\r\n    hasLeftHorizontalScroll: function () {\r\n        return this.table.hasLeftHorizontalScroll();\r\n    },\r\n\r\n    hasRightHorizontalScroll: function () {\r\n        return this.table.hasRightHorizontalScroll();\r\n    },\r\n\r\n    setLeftHorizontalScroll: function (scrollLeft) {\r\n        this.table.setLeftHorizontalScroll(scrollLeft);\r\n    },\r\n\r\n    setRightHorizontalScroll: function (scrollLeft) {\r\n        this.table.setRightHorizontalScroll(scrollLeft);\r\n    },\r\n\r\n    setVerticalScroll: function (scrollTop) {\r\n        this.table.setVerticalScroll(scrollTop);\r\n        this.sequence.setVerticalScroll(scrollTop);\r\n    },\r\n\r\n    getVerticalScroll: function () {\r\n        return this.table.getVerticalScroll();\r\n    },\r\n\r\n    setVPage: function (page) {\r\n        this.sequence.setVPage && this.sequence.setVPage(page);\r\n    },\r\n\r\n    setHPage: function (page) {\r\n        this.sequence.setHPage && this.sequence.setHPage(page);\r\n    },\r\n\r\n    attr: function () {\r\n        BI.SequenceTable.superclass.attr.apply(this, arguments);\r\n        this.table.attr.apply(this.table, arguments);\r\n        this.sequence.attr.apply(this.sequence, arguments);\r\n    },\r\n\r\n    restore: function () {\r\n        this.table.restore();\r\n        this.sequence.restore();\r\n    },\r\n\r\n    populate: function (items, header, crossItems, crossHeader) {\r\n        var o = this.options;\r\n        if (items) {\r\n            o.items = items;\r\n        }\r\n        if (header) {\r\n            o.header = header;\r\n        }\r\n        if (crossItems) {\r\n            o.crossItems = crossItems;\r\n        }\r\n        if (crossHeader) {\r\n            o.crossHeader = crossHeader;\r\n        }\r\n        this._populate();\r\n        this.table.populate.apply(this.table, arguments);\r\n        this.sequence.populate.apply(this.sequence, arguments);\r\n        this.sequence.setVerticalScroll(this.table.getVerticalScroll());\r\n    },\r\n\r\n    destroy: function () {\r\n        this.table.destroy();\r\n        BI.SequenceTable.superclass.destroy.apply(this, arguments);\r\n    }\r\n});\r\nBI.shortcut(\"bi.sequence_table\", BI.SequenceTable);\r\n","!(function () {\r\n    var Widget = BI.inherit(BI.Widget, {\r\n        props: {\r\n            baseCls: \"bi-spread-sequence-grid-table\",\r\n            el: {},\r\n            isNeedResize: true, // 是否需要调整列宽\r\n\r\n            freezeCols: [], // 冻结的列号,从0开始,isNeedFreeze为tree时生效\r\n\r\n            columnSize: [],\r\n            minColumnSize: [],\r\n            maxColumnSize: [],\r\n            headerRowSize: 25,\r\n            rowSize: 25,\r\n\r\n            regionColumnSize: [],\r\n\r\n            headerCellStyleGetter: BI.emptyFn,\r\n            summaryCellStyleGetter: BI.emptyFn,\r\n            sequenceCellStyleGetter: BI.emptyFn,\r\n\r\n            sequenceHeaderCreator: BI.emptyFn,\r\n            sequenceSummaryText: BI.i18nText(\"BI-Summary_Values\"),\r\n\r\n            header: [],\r\n            items: [],\r\n\r\n            showSequence: false,\r\n            startSequence: 1, // 开始的序号\r\n            seqWidth: 60\r\n\r\n        },\r\n\r\n        _getVDeep: function () {\r\n            return this.options.crossHeader.length;// 纵向深度\r\n        },\r\n\r\n        _getHDeep: function () {\r\n            var o = this.options;\r\n            return Math.max(o.mergeCols.length, o.freezeCols.length, BI.TableTree.maxDeep(o.items) - 1);\r\n        },\r\n\r\n        render: function () {\r\n            var self = this, o = this.options;\r\n            this.contextLayout = BI.createWidget({\r\n                type: \"bi.vertical\",\r\n                element: this,\r\n                scrolly: false,\r\n                scrollable: true,\r\n                items: []\r\n            });\r\n\r\n            this.header = this._getHeader();\r\n            this.items = this._getItems();\r\n            if (o.header.length > 0 || o.items.length > 0) {\r\n                this._populate();\r\n            }\r\n        },\r\n\r\n        _getFreezeColLength: function () {\r\n            var o = this.options;\r\n            return o.isNeedFreeze === true ? BI.clamp(o.freezeCols.length, 0, o.columnSize.length) : 0;\r\n        },\r\n\r\n        _getFreezeHeaderHeight: function () {\r\n            var o = this.options;\r\n            return o.header.length * o.headerRowSize;\r\n        },\r\n\r\n        _getActualItems: function () {\r\n            var o = this.options;\r\n            return o.items;\r\n        },\r\n\r\n        _getHeader: function () {\r\n            var o = this.options;\r\n            var rightHeader = [];\r\n            BI.each(o.header, function (i, cols) {\r\n                rightHeader[i] = [];\r\n                BI.each(cols, function (j, col) {\r\n                    var cell = {\r\n                        type: \"bi.grid_table_cell\",\r\n                        extraCls: (i === 0 ? \"first-row\" : \"\") + (j === 0 ? \" first-col\" : \"\"),\r\n                        cell: col\r\n                    };\r\n                    rightHeader[i].push(cell);\r\n                });\r\n            });\r\n            return rightHeader;\r\n        },\r\n\r\n        _getItems: function () {\r\n            var o = this.options;\r\n            var rightItems = [];\r\n            var firstRowTopLine = !(o.header && o.header.length > 0);\r\n            BI.each(this._getActualItems(), function (i, cols) {\r\n                rightItems[i] = [];\r\n                BI.each(cols, function (j, col) {\r\n                    var cell;\r\n                    if (o.customCell) {\r\n                        col && (col.firstRowTopLine = firstRowTopLine);\r\n                        cell.extraCls = (i === 0 ? \"first-row\" : \"\") + (j === 0 ? \" first-col\" : \"\");\r\n                        cell = col;\r\n                    } else {\r\n                        cell = {\r\n                            type: \"bi.grid_table_cell\",\r\n                            cell: col,\r\n                            extraCls: (i === 0 ? \"first-row\" : \"\") + (j === 0 ? \" first-col\" : \"\"),\r\n                            firstRowTopLine: firstRowTopLine\r\n                        };\r\n                    }\r\n                    rightItems[i].push(cell);\r\n                });\r\n            });\r\n            return rightItems;\r\n        },\r\n\r\n        _populateTable: function () {\r\n            var self = this, o = this.options;\r\n            var regionSize = this.getRegionSize(), totalLeftColumnSize = 0, totalRightColumnSize = 0,\r\n                totalColumnSize = 0,\r\n                summaryColumnSizeArray = [];\r\n            var freezeColLength = this._getFreezeColLength();\r\n            BI.each(o.columnSize, function (i, size) {\r\n                if (o.isNeedFreeze === true && o.freezeCols.includes(i)) {\r\n                    totalLeftColumnSize += size;\r\n                } else {\r\n                    totalRightColumnSize += size;\r\n                }\r\n                totalColumnSize += size;\r\n                if (i === 0) {\r\n                    summaryColumnSizeArray[i] = size;\r\n                } else {\r\n                    summaryColumnSizeArray[i] = summaryColumnSizeArray[i - 1] + size;\r\n                }\r\n            });\r\n            this.contextLayout.populate(BI.map(this.header, function (i, lists) {\r\n                var headerRow = {\r\n                    type: \"bi.vertical_adapt\",\r\n                    items: BI.map(lists, function (j, item) {\r\n                        return BI.extend({\r\n                            width: o.columnSize[j],\r\n                            height: o.headerRowSize\r\n                        }, item);\r\n                    })\r\n                };\r\n                return o.showSequence ? {\r\n                    type: \"bi.vertical_adapt\",\r\n                    items: [{\r\n                        type: \"bi.table_style_cell\",\r\n                        text: BI.i18nText(\"BI-Number_Index\"),\r\n                        width: o.seqWidth,\r\n                        height: o.headerRowSize,\r\n                        styleGetter: o.headerCellStyleGetter,\r\n                        _store: o.tableStyleCellStoreGetter\r\n                    }, headerRow]\r\n                } : headerRow;\r\n            }).concat(BI.map(this.items, function (i, lists) {\r\n                var row = {\r\n                    type: \"bi.vertical_adapt\",\r\n                    verticalAlign: \"stretch\",\r\n                    items: BI.map(lists, function (j, item) {\r\n                        return BI.extend({\r\n                            width: o.columnSize[j],\r\n                            height: o.rowSize\r\n                        }, item);\r\n                    })\r\n                };\r\n                return o.showSequence ? {\r\n                    type: \"bi.vertical_adapt\",\r\n                    verticalAlign: \"stretch\",\r\n                    items: [{\r\n                        type: \"bi.table_style_cell\",\r\n                        cls: \"sequence-table-title-cell\",\r\n                        width: o.seqWidth,\r\n                        styleGetter: (function (key) {\r\n                            return function () {\r\n                                return o.sequenceCellStyleGetter(key);\r\n                            };\r\n                        })(i),\r\n                        text: i + 1,\r\n                        _store: o.tableStyleCellStoreGetter\r\n                    }, row]\r\n                } : row;\r\n            })));\r\n        },\r\n\r\n        _populate: function () {\r\n            this._populateTable();\r\n        },\r\n\r\n        getRegionSize: function () {\r\n            var o = this.options;\r\n            var regionSize = o.regionColumnSize[0] || 0;\r\n            if (o.isNeedFreeze === false || o.freezeCols.length === 0) {\r\n                return 0;\r\n            }\r\n            if (!regionSize) {\r\n                BI.each(o.freezeCols, function (i, col) {\r\n                    regionSize += o.columnSize[col];\r\n                });\r\n            }\r\n            return regionSize;\r\n        },\r\n\r\n        setVerticalScroll: function (scrollTop) {\r\n        },\r\n\r\n        setLeftHorizontalScroll: function (scrollLeft) {\r\n        },\r\n\r\n        setRightHorizontalScroll: function (scrollLeft) {\r\n        },\r\n\r\n        getVerticalScroll: function () {\r\n        },\r\n\r\n        getLeftHorizontalScroll: function () {\r\n        },\r\n\r\n        getRightHorizontalScroll: function () {\r\n        },\r\n\r\n        setColumnSize: function (columnSize) {\r\n            this.options.columnSize = columnSize;\r\n            this._isNeedDigest = true;\r\n        },\r\n\r\n        setRegionColumnSize: function (regionColumnSize) {\r\n            this.options.regionColumnSize = regionColumnSize;\r\n            this._isNeedDigest = true;\r\n        },\r\n\r\n        getColumnSize: function () {\r\n            return this.options.columnSize;\r\n        },\r\n\r\n        getRegionColumnSize: function () {\r\n            return this.options.regionColumnSize;\r\n        },\r\n\r\n        populate: function (items, header) {\r\n            var headerChanged = this.options.header !== header;\r\n            var itemsChanged = this.options.items !== items;\r\n            if (header && headerChanged) {\r\n                this.options.header = header;\r\n            }\r\n            if (items && itemsChanged) {\r\n                this.options.items = items;\r\n            }\r\n            if (items && itemsChanged) {\r\n                this.items = this._getItems();\r\n            }\r\n            if (header && headerChanged) {\r\n                this.header = this._getHeader();\r\n            }\r\n            this._populate();\r\n        },\r\n\r\n        restore: function () {\r\n        }\r\n    });\r\n    BI.shortcut(\"bi.spread_sequence_grid_table\", Widget);\r\n}());\r\n","!(function () {\r\n    var Widget = BI.inherit(BI.Widget, {\r\n        props: {\r\n            baseCls: \"bi-spread-sequence-layer-tree-table\",\r\n            el: {},\r\n            isNeedResize: true, // 是否需要调整列宽\r\n\r\n            freezeCols: [], // 冻结的列号,从0开始,isNeedFreeze为tree时生效\r\n\r\n            isNeedMerge: true, // 是否需要合并单元格\r\n            mergeCols: [],\r\n            mergeRule: BI.emptyFn,\r\n\r\n            isNeedMergeCol: true, // 是否横向合并\r\n            isNeedMergeRow: true, // 是否纵向合并\r\n\r\n            columnSize: [],\r\n            minColumnSize: [],\r\n            maxColumnSize: [],\r\n            headerRowSize: 25,\r\n            rowSize: 25,\r\n\r\n            regionColumnSize: [],\r\n\r\n            headerCellStyleGetter: BI.emptyFn,\r\n            summaryCellStyleGetter: BI.emptyFn,\r\n            sequenceCellStyleGetter: BI.emptyFn,\r\n            // 传给汇总、序号单元格的store，能在单元格绘制时使用上下文中的cssScale\r\n            tableStyleCellStoreGetter: null,\r\n\r\n            sequenceHeaderCreator: BI.emptyFn,\r\n            sequenceSummaryText: BI.i18nText(\"BI-Summary_Values\"),\r\n\r\n            header: [],\r\n            items: [],\r\n\r\n            // 交叉表头\r\n            crossHeader: [],\r\n            crossItems: [],\r\n\r\n            // 汇总行位置\r\n            summaryText: BI.i18nText(\"BI-Summary_Values\"),\r\n            rowPosition: \"bottom\",\r\n            colPosition: \"right\",\r\n            showInnerSummary: false,\r\n\r\n            showSequence: false,\r\n            startSequence: 1, // 开始的序号\r\n            seqWidth: 60\r\n\r\n        },\r\n\r\n        _getVDeep: function () {\r\n            return this.options.crossHeader.length;// 纵向深度\r\n        },\r\n\r\n        _getHDeep: function () {\r\n            var o = this.options;\r\n            return Math.max(o.mergeCols.length, o.freezeCols.length, BI.TableTree.maxDeep(o.items) - 1);\r\n        },\r\n\r\n        _createHeader: function (vDeep) {\r\n            var self = this, o = this.options;\r\n            var header = o.header || [], crossHeader = o.crossHeader || [];\r\n            var items = BI.isEmpty(header) ? BI.TableTree.formatCrossItems4Special(o.crossItems, vDeep, o.headerCellStyleGetter, {\r\n                sumPosition: this.options.colPosition === \"right\",\r\n                summaryText: o.summaryText\r\n            }) : BI.TableTree.formatCrossItems(o.crossItems, vDeep, o.headerCellStyleGetter, {\r\n                sumPosition: this.options.colPosition === \"right\",\r\n                summaryText: o.summaryText\r\n            });\r\n            var result = [];\r\n            BI.each(items, function (row, node) {\r\n                var c = [crossHeader[row]];\r\n                result.push(c.concat(node || []));\r\n            });\r\n            var rowHeaderCreator = BI.isFunction(o.rowHeaderCreator) ? o.rowHeaderCreator() : o.rowHeaderCreator;\r\n            if (header && header.length > 0) {\r\n                var newHeader = this._formatColumns(header);\r\n                var deep = this._getHDeep();\r\n                if (deep <= 0) {\r\n                    newHeader.unshift(rowHeaderCreator || {\r\n                        type: \"bi.table_style_cell\",\r\n                        text: BI.i18nText(\"BI-Row_Header\"),\r\n                        styleGetter: o.headerCellStyleGetter,\r\n                        _store: o.tableStyleCellStoreGetter\r\n                    });\r\n                } else {\r\n                    newHeader[0] = rowHeaderCreator || {\r\n                        type: \"bi.table_style_cell\",\r\n                        text: BI.i18nText(\"BI-Row_Header\"),\r\n                        styleGetter: o.headerCellStyleGetter,\r\n                        _store: o.tableStyleCellStoreGetter\r\n                    };\r\n                }\r\n                result.push(newHeader);\r\n            }\r\n            return result;\r\n        },\r\n\r\n        _formatItems: function (nodes, header, deep) {\r\n            var self = this, o = this.options;\r\n            var result = [];\r\n\r\n            function track(node, layer) {\r\n                node.type || (node.type = \"bi.layer_tree_table_cell\");\r\n                node.layer = layer;\r\n                var next = [node];\r\n                next = next.concat(node.values || []);\r\n                if (next.length > 0) {\r\n                    result.push(next);\r\n                }\r\n                if (BI.isNotEmptyArray(node.children)) {\r\n                    BI.each(node.children, function (index, child) {\r\n                        track(child, layer + 1);\r\n                    });\r\n                }\r\n            }\r\n\r\n            BI.each(nodes, function (i, node) {\r\n                BI.each(node.children, function (j, c) {\r\n                    track(c, 0);\r\n                });\r\n                if (BI.isArray(node.values)) {\r\n                    var next = [{\r\n                        type: \"bi.table_style_cell\",\r\n                        text: o.summaryText,\r\n                        title: o.summaryText,\r\n                        styleGetter: function () {\r\n                            return o.summaryCellStyleGetter(true, BI.get(node, [\"children\", 0, \"dId\"]));\r\n                        },\r\n                        _store: o.tableStyleCellStoreGetter\r\n                    }].concat(node.values);\r\n                    o.rowPosition === \"bottom\" ?\r\n                        result.push(next) :\r\n                        result.unshift(next);\r\n                }\r\n            });\r\n            return BI.DynamicSummaryTreeTable.formatSummaryItems(result, header, o.crossItems, 1);\r\n        },\r\n\r\n        _formatColumns: function (columns, deep) {\r\n            if (BI.isNotEmptyArray(columns)) {\r\n                deep = deep || this._getHDeep();\r\n                return columns.slice(Math.max(0, deep - 1));\r\n            }\r\n            return columns;\r\n        },\r\n\r\n        _formatFreezeCols: function () {\r\n            if (this.options.freezeCols.length > 0) {\r\n                return [0];\r\n            }\r\n            return [];\r\n        },\r\n\r\n        _formatMergeCols: function () {\r\n            if (this.options.mergeCols.length > 0) {\r\n                return [0];\r\n            }\r\n            return [];\r\n        },\r\n\r\n        _formatColumnSize: function (columnSize, deep) {\r\n            if (columnSize.length <= 0) {\r\n                return [];\r\n            }\r\n            var result = [0];\r\n            deep = deep || this._getHDeep();\r\n            BI.each(columnSize, function (i, size) {\r\n                if (i < deep) {\r\n                    result[0] += size;\r\n                    return;\r\n                }\r\n                result.push(size);\r\n            });\r\n            return result;\r\n        },\r\n\r\n        _digest: function () {\r\n            var o = this.options;\r\n            var deep = this._getHDeep();\r\n            var vDeep = this._getVDeep();\r\n            var header = this._createHeader(vDeep);\r\n            var data = this._formatItems(o.items, header, deep);\r\n            var columnSize = o.columnSize.slice();\r\n            var minColumnSize = o.minColumnSize.slice();\r\n            var maxColumnSize = o.maxColumnSize.slice();\r\n            BI.removeAt(columnSize, data.deletedCols);\r\n            BI.removeAt(minColumnSize, data.deletedCols);\r\n            BI.removeAt(maxColumnSize, data.deletedCols);\r\n            return {\r\n                header: data.header,\r\n                items: data.items,\r\n                columnSize: this._formatColumnSize(columnSize, deep),\r\n                minColumnSize: this._formatColumns(minColumnSize, deep),\r\n                maxColumnSize: this._formatColumns(maxColumnSize, deep),\r\n                freezeCols: this._formatFreezeCols(),\r\n                mergeCols: this._formatMergeCols()\r\n            };\r\n        },\r\n\r\n        render: function () {\r\n            var self = this, o = this.options;\r\n            this._width = 0;\r\n            this._height = 0;\r\n            var data = this._digest();\r\n            this.topRightCollection = BI.createWidget({\r\n                type: \"bi.collection_view\",\r\n                cellSizeAndPositionGetter: function (index) {\r\n                    return self.topRightItems[index];\r\n                }\r\n            });\r\n            this.bottomRight = BI.createWidget({\r\n                type: \"bi.vertical\",\r\n                scrolly: false,\r\n            });\r\n            this.contextLayout = BI.createWidget({\r\n                type: \"bi.vertical\",\r\n                element: this,\r\n                scrolly: false,\r\n                scrollable: true,\r\n                items: [o.showSequence ? {\r\n                    type: \"bi.vertical_adapt\",\r\n                    items: [BI.extend({\r\n                        type: \"bi.table_style_cell\",\r\n                        text: BI.i18nText(\"BI-Number_Index\"),\r\n                        width: o.seqWidth,\r\n                        height: this._getFreezeHeaderHeight(data.header),\r\n                        styleGetter: o.headerCellStyleGetter,\r\n                        ref: function (_ref) {\r\n                            self.headerSeq = _ref;\r\n                        },\r\n                        _store: o.tableStyleCellStoreGetter\r\n                    }, o.sequenceHeaderCreator()), this.topRightCollection]\r\n                } : {\r\n                    el: this.topRightCollection\r\n                }, {\r\n                    el: this.bottomRight\r\n                }]\r\n            });\r\n\r\n            if (data.header.length > 0 || data.items.length > 0) {\r\n                this._digestTable(data.header, data.items, data);\r\n                this._populate(data.header, data.items, data);\r\n            }\r\n        },\r\n\r\n        populate: function (items, header, crossItems, crossHeader) {\r\n            var o = this.options;\r\n            if (items) {\r\n                o.items = items;\r\n            }\r\n            if (header) {\r\n                o.header = header;\r\n            }\r\n            if (crossItems) {\r\n                o.crossItems = crossItems;\r\n            }\r\n            if (crossHeader) {\r\n                o.crossHeader = crossHeader;\r\n            }\r\n            var data = this._digest();\r\n            // 表头所展示“序号”高度由headers决定，render的时候不一定传了header, 在populate的时候setHeight\r\n            this.headerSeq && this.headerSeq.setHeight(this._getFreezeHeaderHeight(data.header));\r\n            items = data.items;\r\n            header = data.header;\r\n            if (items && items !== this.options.items) {\r\n                this._isNeedDigest = true;\r\n                this.options.items = items;\r\n                this._restore();\r\n            }\r\n            if (header && header !== this.options.header) {\r\n                this._isNeedDigest = true;\r\n                this.options.header = header;\r\n                this._restore();\r\n            }\r\n            this._populate(header, items, data);\r\n        },\r\n\r\n        _getFreezeHeaderHeight: function (header) {\r\n            var o = this.options;\r\n            return header.length * o.headerRowSize;\r\n        },\r\n\r\n        _populateTable: function (header, items, data) {\r\n            var self = this, o = this.options;\r\n            var regionSize = this.getRegionSize(), totalLeftColumnSize = 0, totalRightColumnSize = 0,\r\n                totalColumnSize = 0,\r\n                summaryColumnSizeArray = [];\r\n            BI.each(o.columnSize, function (i, size) {\r\n                if (o.isNeedFreeze === true && o.freezeCols.includes(i)) {\r\n                    totalLeftColumnSize += size;\r\n                } else {\r\n                    totalRightColumnSize += size;\r\n                }\r\n                totalColumnSize += size;\r\n                if (i === 0) {\r\n                    summaryColumnSizeArray[i] = size;\r\n                } else {\r\n                    summaryColumnSizeArray[i] = summaryColumnSizeArray[i - 1] + size;\r\n                }\r\n            });\r\n\r\n            // var otlw = regionSize;\r\n            // var otlh = this._getFreezeHeaderHeight(header);\r\n            // var otrw = this._width - regionSize;\r\n            // var otrh = this._getFreezeHeaderHeight(header);\r\n            // var oblw = regionSize;\r\n            // var oblh = this._height - otlh;\r\n            // var obrw = this._width - regionSize;\r\n            // var obrh = this._height - otrh;\r\n\r\n            // var scrollBarSize = BI.DOM.getScrollWidth();\r\n            // var tlw = otlw + scrollBarSize;\r\n            // var tlh = otlh + scrollBarSize;\r\n            // var trw = otrw + scrollBarSize;\r\n            // var trh = otrh + scrollBarSize;\r\n            // var blw = oblw + scrollBarSize;\r\n            // var blh = oblh + scrollBarSize;\r\n            // var brw = obrw + scrollBarSize;\r\n            // var brh = obrh + scrollBarSize;\r\n            //\r\n            // var digest = function (el) {\r\n            //     el.element.css({\r\n            //         overflow: \"scroll\",\r\n            //         overflowX: \"scroll\",\r\n            //         overflowY: \"scroll\"\r\n            //     });\r\n            // };\r\n\r\n            // this.topLeft.setWidth(otlw);\r\n            // this.topLeft.setHeight(otlh);\r\n            // this.topRight.setWidth(otrw);\r\n            // this.topRight.setHeight(otrh);\r\n            // this.bottomLeft.setWidth(oblw);\r\n            // this.bottomLeft.setHeight(oblh);\r\n            // this.bottomRight.setWidth(obrw);\r\n            // this.bottomRight.setHeight(obrh);\r\n\r\n            // this.topLeftCollection.setWidth(tlw);\r\n            // this.topLeftCollection.setHeight(tlh);\r\n            this.topRightCollection.setWidth(totalColumnSize);\r\n            this.topRightCollection.setHeight(this._getFreezeHeaderHeight(header));\r\n            // this.bottomLeftCollection.setWidth(blw);\r\n            // this.bottomLeftCollection.setHeight(blh);\r\n            // this.bottomRightCollection.setWidth(brw);\r\n            // this.bottomRightCollection.setHeight(brh);\r\n\r\n            // digest(this.topLeftCollection);\r\n            // digest(this.topRightCollection);\r\n            // digest(this.bottomLeftCollection);\r\n            // digest(this.bottomRightCollection);\r\n\r\n            // var items = this.contextLayout.attr(\"items\");\r\n            // items[1].left = regionSize;\r\n            // items[1].top = this._getFreezeHeaderHeight(header);\r\n            // items[3].left = regionSize;\r\n            // items[3].top = this._getFreezeHeaderHeight();\r\n            // this.contextLayout.attr(\"items\", items);\r\n            // this.contextLayout.resize();\r\n\r\n            var leftHeader = [], rightHeader = [], leftItems = [], rightItems = [];\r\n            var run = function (positions, items, rendered, firstRowTopLine, firstColumnLeftLine) {\r\n                BI.each(positions, function (i, item) {\r\n                    if (!firstRowTopLine && o.customCell) {\r\n                        items[item.row][item.col]._rowIndex = item.row;\r\n                        items[item.row][item.col]._columnIndex = item.col;\r\n                        items[item.row][item.col].firstRowTopLine = firstRowTopLine;\r\n                        items[item.row][item.col].firstColumnLeftLine = firstColumnLeftLine;\r\n                        rendered.push(items[item.row][item.col]);\r\n                        return;\r\n                    }\r\n                    var cell = {\r\n                        type: \"bi.collection_table_cell\",\r\n                        cell: items[item.row][item.col],\r\n                        _rowIndex: item.row,\r\n                        _columnIndex: item.col,\r\n                        firstRowTopLine: firstRowTopLine,\r\n                        firstColumnLeftLine: firstColumnLeftLine\r\n                    };\r\n                    rendered.push(cell);\r\n                });\r\n            };\r\n            // run(this.topLeftItems, header, leftHeader, true, true);\r\n            run(this.topRightItems, header, rightHeader, true, true);\r\n            // run(this.bottomLeftItems, this._getActualItems(), leftItems, this.topRightItems.length <= 0, true);\r\n            // run(this.bottomRightItems, this._getActualItems(), rightItems, this.topRightItems.length <= 0, this.topLeftItems.length <= 0);\r\n\r\n            // this.topLeftCollection._populate(leftHeader);\r\n            this.topRightCollection._populate(rightHeader);\r\n            // this.bottomLeftCollection._populate(leftItems);\r\n            // this.bottomRightCollection._populate(rightItems);\r\n\r\n            this.bottomRight.populate(this.bottomRightItems);\r\n        },\r\n\r\n        _digestTable: function (header, items, data) {\r\n            var o = this.options;\r\n            var freezeColLength = o.isNeedMerge === true ? BI.clamp(data.mergeCols.length, 0, data.columnSize.length) : 0;\r\n            // // 如果表头位置不够，取消表头冻结\r\n            // if (this._getFreezeHeaderHeight() <= 0) {\r\n            //     this.topLeftItems = [];\r\n            //     this.topRightItems = [];\r\n            //     this.bottomLeftItems = this._serialize(this._getActualItems(), 0, freezeColLength, o.rowSize, o.columnSize, o.mergeCols, BI.range(o.header.length));\r\n            //     this.bottomRightItems = this._serialize(this._getActualItems(), freezeColLength, o.columnSize.length, o.rowSize, o.columnSize, o.mergeCols, BI.range(o.header.length));\r\n            // } else {\r\n            // this.topLeftItems = this._serialize(header, 0, freezeColLength, o.headerRowSize, o.columnSize, o.mergeCols);\r\n            this.topRightItems = BI.CollectionTable.serialize(header, 0, data.columnSize.length, o.headerRowSize, data.columnSize, true, [], o.mergeRule);\r\n            // this.bottomLeftItems = this._serialize(o.items, 0, freezeColLength, o.rowSize, o.columnSize, o.mergeCols);\r\n            // this.bottomRightItems = this._serialize(o.items, freezeColLength, o.columnSize.length, o.rowSize, o.columnSize, o.mergeCols);\r\n            // }\r\n            this.bottomRightItems = this._serializeItems(items, 0, freezeColLength, o.rowSize, data.columnSize, data.mergeCols);\r\n        },\r\n\r\n        _serializeItems: function (items, startCol, endCol, rowHeight, columnSize, mergeCols, mergeRows) {\r\n            mergeCols = mergeCols || [];\r\n            mergeRows = mergeRows || [];\r\n            var self = this, o = this.options;\r\n            var count = o.startSequence;\r\n            var result = [], cache = {}, preCol = {}, preRow = {}, map = {};\r\n            var summaryColumnSize = [];\r\n            for (var i = startCol; i < endCol; i++) {\r\n                if (i === startCol) {\r\n                    summaryColumnSize[i] = columnSize[i];\r\n                } else {\r\n                    summaryColumnSize[i] = summaryColumnSize[i - 1] + columnSize[i];\r\n                }\r\n            }\r\n            var mergeRow = function (i, j) {\r\n                preCol[j]._height += rowHeight;\r\n                preCol[j].__mergeRows.push(i);\r\n                //指向前一列\r\n                preRow[i] = preCol[j];\r\n            };\r\n\r\n            var mergeCol = function (i, j) {\r\n                preRow[i]._width += columnSize[j];\r\n                preRow[i].__mergeCols.push(j);\r\n            };\r\n\r\n            var createOneEl = function (r, c) {\r\n                var width = columnSize[c];\r\n                var height = rowHeight;\r\n                map[r][c]._row = r;\r\n                map[r][c]._col = c;\r\n                map[r][c]._width = width;\r\n                map[r][c]._height = height;\r\n\r\n                var el = {\r\n                    x: summaryColumnSize[c] - columnSize[c],\r\n                    y: +r * rowHeight,\r\n                    item: map[r][c]\r\n                };\r\n\r\n                preCol[c] = map[r][c];\r\n                preCol[c].__mergeRows = [r];\r\n                preRow[r] = map[r][c];\r\n                preRow[r].__mergeCols = [c];\r\n\r\n                result.push(el);\r\n            };\r\n\r\n            BI.each(items, function (i, cols) {\r\n                for (var j = startCol; j < endCol; j++) {\r\n                    if (!cache[i]) {\r\n                        cache[i] = {};\r\n                    }\r\n                    if (!map[i]) {\r\n                        map[i] = {};\r\n                    }\r\n                    cache[i][j] = cols[j];\r\n                    map[i][j] = {};\r\n                    if (mergeCols === true || mergeCols.indexOf(j) > -1 || mergeRows === true || mergeRows.indexOf(i) > -1) {\r\n                        if (i === 0 && j === startCol) {\r\n                            createOneEl(0, startCol);\r\n                        } else if (j === startCol && i > 0) {\r\n                            var isNeedMergeRow = o.mergeRule(cache[i][j], cache[i - 1][j]);\r\n                            if (isNeedMergeRow === true) {\r\n                                mergeRow(i, j);\r\n                                preRow[i] = preCol[j];\r\n                            } else {\r\n                                createOneEl(i, j);\r\n                            }\r\n                        } else if (i === 0 && j > startCol) {\r\n                            var isNeedMergeCol = o.mergeRule(cache[i][j], cache[i][j - 1]);\r\n                            if (isNeedMergeCol === true) {\r\n                                mergeCol(i, j);\r\n                                preCol[j] = preRow[i];\r\n                            } else {\r\n                                createOneEl(i, j);\r\n                            }\r\n                        } else {\r\n                            var isNeedMergeRow = o.mergeRule(cache[i][j], cache[i - 1][j]);\r\n                            var isNeedMergeCol = o.mergeRule(cache[i][j], cache[i][j - 1]);\r\n                            if (isNeedMergeCol && isNeedMergeRow) {\r\n                                continue;\r\n                                // mergeRow(i, j);//优先合并列\r\n                            }\r\n                            if (isNeedMergeCol) {\r\n                                mergeCol(i, j);\r\n                            }\r\n                            if (isNeedMergeRow) {\r\n                                mergeRow(i, j);\r\n                            }\r\n                            if (!isNeedMergeCol && !isNeedMergeRow) {\r\n                                createOneEl(i, j);\r\n                            }\r\n                        }\r\n                    } else {\r\n                        createOneEl(i, j);\r\n                    }\r\n                }\r\n            });\r\n\r\n            // 构建父子之间的关系\r\n            var stacks = [], lastLayer;\r\n            BI.each(result, function (i, item) {\r\n                var node = items[item.item._row][item.item._col];\r\n                if (!node.layer || node.layer <= lastLayer) {\r\n                    stacks = stacks.slice(0, node.layer || 0);\r\n                }\r\n                item.parent = stacks[stacks.length - 1];\r\n                if (!node.children || node.children.length === 0) {\r\n                    item.isLastNode = true;\r\n                    return;\r\n                }\r\n                stacks.push(item);\r\n                lastLayer = node.layer;\r\n            });\r\n\r\n            var tree = [];\r\n            var prefix = BI.UUID();\r\n\r\n            BI.each(result, function (i, item) {\r\n                // 序号显示逐行递增，但最后一行的序号样式和文本需要由summaryCellStyleGetter和summaryText决定\r\n                var isSummarySeq = items.length - 1 === item.item._row;\r\n                var layout = {\r\n                    type: \"bi.vertical\",\r\n                    scrolly: false,\r\n                    items: [{\r\n                        type: \"bi.layout\",\r\n                        tagName: \"input\",\r\n                        cls: \"spread-sequence-table-checkbox\",\r\n                        invisible: true,\r\n                        attributes: {\r\n                            type: \"checkbox\",\r\n                            id: prefix + \"-\" + item.item._row + \"-\" + item.item._col\r\n                        }\r\n                    }, !items[item.item._row][item.item._col].children ? { type: \"bi.layout\" } : {\r\n                        type: \"bi.vertical_adapt\",\r\n                        cls: \"summary-line\",\r\n                        verticalAlign: \"stretch\",\r\n                        items: [!item.parent && o.showSequence === true ? {\r\n                            type: \"bi.table_style_cell\",\r\n                            cls: \"sequence-table-title-cell\",\r\n                            width: o.seqWidth,\r\n                            styleGetter: (function (key) {\r\n                                return function () {\r\n                                    return isSummarySeq ? o.summaryCellStyleGetter(true) : o.sequenceCellStyleGetter(key);\r\n                                };\r\n                            })(count),\r\n                            text: isSummarySeq ? o.summaryText : count,\r\n                            _store: o.tableStyleCellStoreGetter\r\n                        } : { type: \"bi.layout\" }, {\r\n                            el: createNode(item, {\r\n                                width: summaryColumnSize[endCol - 1] - (item.item._col > 0 ? summaryColumnSize[item.item._col - 1] : 0)\r\n                                // height: o.rowSize\r\n                            }, true)\r\n                        }, getLeaves(getSummaryRow(item.item._row, item.item._col))]\r\n                    }, {\r\n                        type: \"bi.vertical_adapt\",\r\n                        cls: \"expand-line\",\r\n                        verticalAlign: \"stretch\",\r\n                        items: [!item.parent && o.showSequence === true ? {\r\n                            type: \"bi.table_style_cell\",\r\n                            cls: \"sequence-table-title-cell\",\r\n                            width: o.seqWidth,\r\n                            styleGetter: (function (key) {\r\n                                return function () {\r\n                                    return isSummarySeq ? o.summaryCellStyleGetter(true) : o.sequenceCellStyleGetter(key);\r\n                                };\r\n                            })(count),\r\n                            text: isSummarySeq ? o.summaryText : count++,\r\n                            _store: o.tableStyleCellStoreGetter\r\n                        } : { type: \"bi.layout\" }, {\r\n                            type: \"bi.vertical\",\r\n                            items: [{\r\n                                el: {\r\n                                    type: \"bi.vertical_adapt\",\r\n                                    verticalAlign: \"stretch\",\r\n                                    items: [{\r\n                                        el: createNode(item)\r\n                                    }, getLeaves(getSummaryRow(item.item._row, item.item._col))]\r\n                                }\r\n                            }, {\r\n                                type: \"bi.vertical\",\r\n                                scrolly: false,\r\n                                items: []\r\n                            }]\r\n                        }]\r\n                    }]\r\n                };\r\n                item.layout = layout;\r\n                if (item.parent) {\r\n                    getNext(item.parent).push(layout);\r\n                }\r\n            });\r\n\r\n            function createNode(item, options, isPlus) {\r\n                var node = BI.extend({\r\n                    type: \"bi.label\",\r\n                    textAlign: \"left\",\r\n                    lgap: 25,\r\n                    width: item.item._width,\r\n                    // height: item.item._height,\r\n                    _columnIndex: item.item._col,\r\n                    _rowIndex: item.item._row,\r\n                    firstRowTopLine: false,\r\n                    firstColumnLeftLine: true,\r\n                    extraCls: \"collection-cell\" + (item.item._row === 0 ? \" first-row\" : \"\") + (item.item._col === 0 ? \" first-col\" : \"\"),\r\n                    mounted: function () {\r\n                        if (!item.isLastNode) {\r\n                            BI.createWidget({\r\n                                type: \"bi.absolute_vertical_adapt\",\r\n                                element: this,\r\n                                lgap: 6,\r\n                                items: [{\r\n                                    type: \"bi.icon_button\",\r\n                                    tagName: \"label\",\r\n                                    attributes: {\r\n                                        \"for\": prefix + \"-\" + item.item._row + \"-\" + item.item._col\r\n                                    },\r\n                                    cls: (isPlus ? \"plus-font\" : \"minus-font\") + \" icon-size-12\",\r\n                                    iconWidth: 12,\r\n                                    iconHeight: 12,\r\n                                    width: 12,\r\n                                    height: 12\r\n                                }]\r\n                            });\r\n                        }\r\n                    }\r\n                    // height: item.item._height\r\n                }, options, items[item.item._row][item.item._col]);\r\n                return node;\r\n            }\r\n\r\n            function getSummaryRow(i, j) {\r\n                var item = map[i][j];\r\n                if (o.rowPosition === \"bottom\") {\r\n                    return i + item.__mergeRows.length - 1;\r\n                } else {\r\n                    return i;\r\n                }\r\n            }\r\n\r\n            function getNext(item) {\r\n                return item.layout.items[2].items[1].items[1].items;\r\n            }\r\n\r\n            function getLeaves(row) {\r\n                var leaves = items[row].slice(endCol);\r\n                return {\r\n                    type: \"bi.vertical_adapt\",\r\n                    items: BI.map(leaves, function (i, leaf) {\r\n                        return BI.extend({\r\n                            type: \"bi.label\",\r\n                            width: columnSize[endCol + i],\r\n                            height: rowHeight,\r\n                            extraCls: \"collection-cell\",\r\n                        }, leaf);\r\n                    })\r\n                };\r\n            }\r\n\r\n            BI.each(result, function (i, item) {\r\n                if (!item.parent) {\r\n                    tree.push(item.layout);\r\n                }\r\n            });\r\n            return tree;\r\n        },\r\n\r\n        _populate: function (header, items, data) {\r\n            if (this._isNeedDigest === true) {\r\n                this._digestTable(header, items, data);\r\n            }\r\n            this._isNeedDigest = false;\r\n            this._populateTable(header, items, data);\r\n        },\r\n\r\n        getRegionSize: function () {\r\n            var o = this.options;\r\n            var regionSize = o.regionColumnSize[0] || 0;\r\n            if (o.isNeedFreeze === false || o.freezeCols.length === 0) {\r\n                return 0;\r\n            }\r\n            if (!regionSize) {\r\n                BI.each(o.freezeCols, function (i, col) {\r\n                    regionSize += o.columnSize[col];\r\n                });\r\n            }\r\n            return regionSize;\r\n        },\r\n\r\n        setVerticalScroll: function (scrollTop) {\r\n        },\r\n\r\n        setLeftHorizontalScroll: function (scrollLeft) {\r\n        },\r\n\r\n        setRightHorizontalScroll: function (scrollLeft) {\r\n        },\r\n\r\n        getVerticalScroll: function () {\r\n        },\r\n\r\n        getLeftHorizontalScroll: function () {\r\n        },\r\n\r\n        getRightHorizontalScroll: function () {\r\n        },\r\n\r\n        setColumnSize: function (columnSize) {\r\n            this._isNeedDigest = true;\r\n            this.options.columnSize = columnSize;\r\n        },\r\n\r\n        setRegionColumnSize: function (regionColumnSize) {\r\n            this._isNeedDigest = true;\r\n            this.options.regionColumnSize = regionColumnSize;\r\n        },\r\n\r\n        getColumnSize: function () {\r\n            return this.options.columnSize;\r\n        },\r\n\r\n        getRegionColumnSize: function () {\r\n            return this.options.regionColumnSize;\r\n        },\r\n\r\n        _restore: function () {\r\n            // this.topLeftCollection.restore();\r\n            this.topRightCollection.restore();\r\n            // this.bottomLeftCollection.restore();\r\n            // this.bottomRightCollection.restore();\r\n        },\r\n\r\n        restore: function () {\r\n            this._restore();\r\n        }\r\n    });\r\n    BI.shortcut(\"bi.spread_sequence_layer_tree_table\", Widget);\r\n}());\r\n","!(function () {\r\n    var Widget = BI.inherit(BI.Widget, {\r\n        props: {\r\n            baseCls: \"bi-spread-sequence-list-table\",\r\n            el: {},\r\n            isNeedResize: true, // 是否需要调整列宽\r\n\r\n            freezeCols: [], // 冻结的列号,从0开始,isNeedFreeze为tree时生效\r\n\r\n            isNeedMerge: true, // 是否需要合并单元格\r\n            mergeCols: [],\r\n            mergeRule: BI.emptyFn,\r\n\r\n            isNeedMergeCol: true, // 是否横向合并\r\n            isNeedMergeRow: true, // 是否纵向合并\r\n\r\n            columnSize: [],\r\n            minColumnSize: [],\r\n            maxColumnSize: [],\r\n            headerRowSize: 25,\r\n            rowSize: 25,\r\n\r\n            regionColumnSize: [],\r\n\r\n            headerCellStyleGetter: BI.emptyFn,\r\n            summaryCellStyleGetter: BI.emptyFn,\r\n            sequenceCellStyleGetter: BI.emptyFn,\r\n            // 传给汇总、序号单元格的store，能在单元格绘制时使用上下文中的cssScale\r\n            tableStyleCellStoreGetter: null,\r\n\r\n            sequenceHeaderCreator: BI.emptyFn,\r\n            sequenceSummaryText: BI.i18nText(\"BI-Summary_Values\"),\r\n\r\n            header: [],\r\n            items: [],\r\n\r\n            // 交叉表头\r\n            crossHeader: [],\r\n            crossItems: [],\r\n\r\n            // 汇总行位置\r\n            summaryText: BI.i18nText(\"BI-Summary_Values\"),\r\n            rowPosition: \"bottom\",\r\n            colPosition: \"right\",\r\n            showInnerSummary: false,\r\n\r\n            showSequence: false,\r\n            startSequence: 1, // 开始的序号\r\n            seqWidth: 60\r\n\r\n        },\r\n\r\n        _getVDeep: function () {\r\n            return this.options.crossHeader.length;// 纵向深度\r\n        },\r\n\r\n        _getHDeep: function () {\r\n            var o = this.options;\r\n            return Math.max(o.mergeCols.length, o.freezeCols.length, BI.TableTree.maxDeep(o.items) - 1);\r\n        },\r\n\r\n        render: function () {\r\n            var self = this, o = this.options;\r\n            this._width = 0;\r\n            this._height = 0;\r\n            var data = this._digest();\r\n            this.topRightCollection = BI.createWidget({\r\n                type: \"bi.collection_view\",\r\n                cellSizeAndPositionGetter: function (index) {\r\n                    return self.topRightItems[index];\r\n                }\r\n            });\r\n            this.bottomRight = BI.createWidget({\r\n                type: \"bi.vertical\",\r\n                scrolly: false\r\n            });\r\n            this.contextLayout = BI.createWidget({\r\n                type: \"bi.vertical\",\r\n                element: this,\r\n                scrolly: false,\r\n                scrollable: true,\r\n                items: [o.showSequence ? {\r\n                    type: \"bi.vertical_adapt\",\r\n                    items: [BI.extend({\r\n                        type: \"bi.table_style_cell\",\r\n                        text: BI.i18nText(\"BI-Number_Index\"),\r\n                        width: o.seqWidth,\r\n                        height: this._getFreezeHeaderHeight(data.header),\r\n                        styleGetter: o.headerCellStyleGetter,\r\n                        ref: function (_ref) {\r\n                            self.headerSeq = _ref;\r\n                        },\r\n                        _store: o.tableStyleCellStoreGetter\r\n                    }, o.sequenceHeaderCreator()), this.topRightCollection]\r\n                } : {\r\n                    el: this.topRightCollection\r\n                }, {\r\n                    el: this.bottomRight\r\n                }]\r\n            });\r\n\r\n            if (data.header.length > 0 || data.items.length > 0) {\r\n                this._digestTable(data.header, data.items);\r\n                this._populate(data.header, data.items);\r\n            }\r\n        },\r\n\r\n        _digest: function () {\r\n            var o = this.options;\r\n            var deep = this._getHDeep();\r\n            var vDeep = this._getVDeep();\r\n            var header = BI.TableTree.formatHeader(o.header, o.crossHeader, o.crossItems, deep, vDeep, o.headerCellStyleGetter, {\r\n                sumPosition: o.colPosition === \"right\",\r\n                summaryText: o.summaryText\r\n            });\r\n            var items = BI.DynamicSummaryTreeTable.formatHorizontalItems(o.items, deep, false, o.summaryCellStyleGetter, {\r\n                sumPosition: o.rowPosition === \"bottom\",\r\n                summaryText: o.summaryText,\r\n                isNeedMergeRow: o.isNeedMergeRow,\r\n                tableStyleCellStoreGetter: o.tableStyleCellStoreGetter\r\n            });\r\n            var data = BI.DynamicSummaryTreeTable.formatSummaryItems(items, header, o.crossItems, deep);\r\n            var columnSize = o.columnSize.slice();\r\n            var minColumnSize = o.minColumnSize.slice();\r\n            var maxColumnSize = o.maxColumnSize.slice();\r\n            BI.removeAt(columnSize, data.deletedCols);\r\n            BI.removeAt(minColumnSize, data.deletedCols);\r\n            BI.removeAt(maxColumnSize, data.deletedCols);\r\n            return {\r\n                header: data.header,\r\n                items: data.items,\r\n                columnSize: columnSize,\r\n                minColumnSize: minColumnSize,\r\n                maxColumnSize: maxColumnSize\r\n            };\r\n        },\r\n\r\n        populate: function (items, header, crossItems, crossHeader) {\r\n            var o = this.options;\r\n            if (items) {\r\n                o.items = items;\r\n            }\r\n            if (header) {\r\n                o.header = header;\r\n            }\r\n            if (crossItems) {\r\n                o.crossItems = crossItems;\r\n            }\r\n            if (crossHeader) {\r\n                o.crossHeader = crossHeader;\r\n            }\r\n            var data = this._digest();\r\n            // 表头所展示“序号”高度由headers决定，render的时候不一定传了header, 在populate的时候setHeight\r\n            this.headerSeq && this.headerSeq.setHeight(this._getFreezeHeaderHeight(data.header));\r\n            this.setColumnSize(data.columnSize);\r\n            o.minColumnSize = data.minColumnSize;\r\n            o.maxColumnSize = data.maxColumnSize;\r\n\r\n            items = data.items;\r\n            header = data.header;\r\n            if (items && items !== this.options.items) {\r\n                this._isNeedDigest = true;\r\n                this.options.items = items;\r\n                this._restore();\r\n            }\r\n            if (header && header !== this.options.header) {\r\n                this._isNeedDigest = true;\r\n                this.options.header = header;\r\n                this._restore();\r\n            }\r\n            this._populate(header, items);\r\n        },\r\n\r\n        _getFreezeColLength: function () {\r\n            var o = this.options;\r\n            return o.isNeedMerge === true ? BI.clamp(o.mergeCols.length, 0, o.columnSize.length) : 0;\r\n        },\r\n\r\n        _getFreezeHeaderHeight: function (header) {\r\n            var o = this.options;\r\n            return header.length * o.headerRowSize;\r\n        },\r\n\r\n        _populateTable: function (header, items) {\r\n            var self = this, o = this.options;\r\n            var regionSize = this.getRegionSize(), totalLeftColumnSize = 0, totalRightColumnSize = 0,\r\n                totalColumnSize = 0,\r\n                summaryColumnSizeArray = [];\r\n            BI.each(o.columnSize, function (i, size) {\r\n                if (o.isNeedFreeze === true && o.freezeCols.includes(i)) {\r\n                    totalLeftColumnSize += size;\r\n                } else {\r\n                    totalRightColumnSize += size;\r\n                }\r\n                totalColumnSize += size;\r\n                if (i === 0) {\r\n                    summaryColumnSizeArray[i] = size;\r\n                } else {\r\n                    summaryColumnSizeArray[i] = summaryColumnSizeArray[i - 1] + size;\r\n                }\r\n            });\r\n\r\n            // var otlw = regionSize;\r\n            // var otlh = this._getFreezeHeaderHeight(header);\r\n            // var otrw = this._width - regionSize;\r\n            // var otrh = this._getFreezeHeaderHeight(header);\r\n            // var oblw = regionSize;\r\n            // var oblh = this._height - otlh;\r\n            // var obrw = this._width - regionSize;\r\n            // var obrh = this._height - otrh;\r\n\r\n            // var scrollBarSize = BI.DOM.getScrollWidth();\r\n            // var tlw = otlw + scrollBarSize;\r\n            // var tlh = otlh + scrollBarSize;\r\n            // var trw = otrw + scrollBarSize;\r\n            // var trh = otrh + scrollBarSize;\r\n            // var blw = oblw + scrollBarSize;\r\n            // var blh = oblh + scrollBarSize;\r\n            // var brw = obrw + scrollBarSize;\r\n            // var brh = obrh + scrollBarSize;\r\n            //\r\n            // var digest = function (el) {\r\n            //     el.element.css({\r\n            //         overflow: \"scroll\",\r\n            //         overflowX: \"scroll\",\r\n            //         overflowY: \"scroll\"\r\n            //     });\r\n            // };\r\n\r\n            // this.topLeft.setWidth(otlw);\r\n            // this.topLeft.setHeight(otlh);\r\n            // this.topRight.setWidth(otrw);\r\n            // this.topRight.setHeight(otrh);\r\n            // this.bottomLeft.setWidth(oblw);\r\n            // this.bottomLeft.setHeight(oblh);\r\n            // this.bottomRight.setWidth(obrw);\r\n            // this.bottomRight.setHeight(obrh);\r\n\r\n            // this.topLeftCollection.setWidth(tlw);\r\n            // this.topLeftCollection.setHeight(tlh);\r\n            this.topRightCollection.setWidth(totalColumnSize);\r\n            this.topRightCollection.setHeight(this._getFreezeHeaderHeight(header));\r\n            // this.bottomLeftCollection.setWidth(blw);\r\n            // this.bottomLeftCollection.setHeight(blh);\r\n            // this.bottomRightCollection.setWidth(brw);\r\n            // this.bottomRightCollection.setHeight(brh);\r\n\r\n            // digest(this.topLeftCollection);\r\n            // digest(this.topRightCollection);\r\n            // digest(this.bottomLeftCollection);\r\n            // digest(this.bottomRightCollection);\r\n\r\n            // var items = this.contextLayout.attr(\"items\");\r\n            // items[1].left = regionSize;\r\n            // items[1].top = this._getFreezeHeaderHeight(header);\r\n            // items[3].left = regionSize;\r\n            // items[3].top = this._getFreezeHeaderHeight();\r\n            // this.contextLayout.attr(\"items\", items);\r\n            // this.contextLayout.resize();\r\n\r\n            var leftHeader = [], rightHeader = [], leftItems = [], rightItems = [];\r\n            var run = function (positions, items, rendered, firstRowTopLine, firstColumnLeftLine) {\r\n                BI.each(positions, function (i, item) {\r\n                    if (!firstRowTopLine && o.customCell) {\r\n                        items[item.row][item.col]._rowIndex = item.row;\r\n                        items[item.row][item.col]._columnIndex = item.col;\r\n                        items[item.row][item.col].firstRowTopLine = firstRowTopLine;\r\n                        items[item.row][item.col].firstColumnLeftLine = firstColumnLeftLine;\r\n                        rendered.push(items[item.row][item.col]);\r\n                        return;\r\n                    }\r\n                    var cell = {\r\n                        type: \"bi.collection_table_cell\",\r\n                        cell: items[item.row][item.col],\r\n                        _rowIndex: item.row,\r\n                        _columnIndex: item.col,\r\n                        firstRowTopLine: firstRowTopLine,\r\n                        firstColumnLeftLine: firstColumnLeftLine\r\n                    };\r\n                    rendered.push(cell);\r\n                });\r\n            };\r\n            // run(this.topLeftItems, header, leftHeader, true, true);\r\n            run(this.topRightItems, header, rightHeader, true, true);\r\n            // run(this.bottomLeftItems, this._getActualItems(), leftItems, this.topRightItems.length <= 0, true);\r\n            // run(this.bottomRightItems, this._getActualItems(), rightItems, this.topRightItems.length <= 0, this.topLeftItems.length <= 0);\r\n\r\n            // this.topLeftCollection._populate(leftHeader);\r\n            this.topRightCollection._populate(rightHeader);\r\n            // this.bottomLeftCollection._populate(leftItems);\r\n            // this.bottomRightCollection._populate(rightItems);\r\n\r\n            this.bottomRight.populate(this.bottomRightItems);\r\n        },\r\n\r\n        _digestTable: function (header, items) {\r\n            var o = this.options;\r\n            var freezeColLength = this._getFreezeColLength();\r\n            // // 如果表头位置不够，取消表头冻结\r\n            // if (this._getFreezeHeaderHeight() <= 0) {\r\n            //     this.topLeftItems = [];\r\n            //     this.topRightItems = [];\r\n            //     this.bottomLeftItems = this._serialize(this._getActualItems(), 0, freezeColLength, o.rowSize, o.columnSize, o.mergeCols, BI.range(o.header.length));\r\n            //     this.bottomRightItems = this._serialize(this._getActualItems(), freezeColLength, o.columnSize.length, o.rowSize, o.columnSize, o.mergeCols, BI.range(o.header.length));\r\n            // } else {\r\n            // this.topLeftItems = this._serialize(header, 0, freezeColLength, o.headerRowSize, o.columnSize, o.mergeCols);\r\n            this.topRightItems = BI.CollectionTable.serialize(header, 0, o.columnSize.length, o.headerRowSize, o.columnSize, true, [], o.mergeRule);\r\n            // this.bottomLeftItems = this._serialize(o.items, 0, freezeColLength, o.rowSize, o.columnSize, o.mergeCols);\r\n            // this.bottomRightItems = this._serialize(o.items, freezeColLength, o.columnSize.length, o.rowSize, o.columnSize, o.mergeCols);\r\n            // }\r\n            this.bottomRightItems = this._serializeItems(items, 0, freezeColLength, o.rowSize, o.columnSize, o.mergeCols);\r\n        },\r\n\r\n        _serializeItems: function (items, startCol, endCol, rowHeight, columnSize, mergeCols, mergeRows) {\r\n            mergeCols = mergeCols || [];\r\n            mergeRows = mergeRows || [];\r\n            var self = this, o = this.options;\r\n            var count = o.startSequence;\r\n            var result = [], cache = {}, preCol = {}, preRow = {}, map = {};\r\n            var summaryColumnSize = [];\r\n            for (var i = startCol; i < endCol; i++) {\r\n                if (i === startCol) {\r\n                    summaryColumnSize[i] = columnSize[i];\r\n                } else {\r\n                    summaryColumnSize[i] = summaryColumnSize[i - 1] + columnSize[i];\r\n                }\r\n            }\r\n            var mergeRow = function (i, j) {\r\n                preCol[j]._height += rowHeight;\r\n                preCol[j].__mergeRows.push(i);\r\n                //指向前一列\r\n                preRow[i] = preCol[j];\r\n            };\r\n\r\n            var mergeCol = function (i, j) {\r\n                preRow[i]._width += columnSize[j];\r\n                preRow[i].__mergeCols.push(j);\r\n            };\r\n\r\n            var createOneEl = function (r, c) {\r\n                var width = columnSize[c];\r\n                var height = rowHeight;\r\n                map[r][c]._row = r;\r\n                map[r][c]._col = c;\r\n                map[r][c]._width = width;\r\n                map[r][c]._height = height;\r\n\r\n                var el = {\r\n                    x: summaryColumnSize[c] - columnSize[c],\r\n                    y: +r * rowHeight,\r\n                    item: map[r][c],\r\n                    parent: preRow[r] && preRow[r].el\r\n                };\r\n\r\n                preCol[c] = map[r][c];\r\n                preCol[c].__mergeRows = [r];\r\n                preRow[r] = map[r][c];\r\n                preRow[r].__mergeCols = [c];\r\n                preRow[r].el = el;\r\n\r\n                result.push(el);\r\n            };\r\n\r\n            BI.each(items, function (i, cols) {\r\n                for (var j = startCol; j < endCol; j++) {\r\n                    if (!cache[i]) {\r\n                        cache[i] = {};\r\n                    }\r\n                    if (!map[i]) {\r\n                        map[i] = {};\r\n                    }\r\n                    cache[i][j] = cols[j];\r\n                    map[i][j] = {};\r\n                    if (mergeCols === true || mergeCols.indexOf(j) > -1 || mergeRows === true || mergeRows.indexOf(i) > -1) {\r\n                        if (i === 0 && j === startCol) {\r\n                            createOneEl(0, startCol);\r\n                        } else if (j === startCol && i > 0) {\r\n                            var isNeedMergeRow = o.mergeRule(cache[i][j], cache[i - 1][j]);\r\n                            if (isNeedMergeRow === true) {\r\n                                mergeRow(i, j);\r\n                                preRow[i] = preCol[j];\r\n                            } else {\r\n                                createOneEl(i, j);\r\n                            }\r\n                        } else if (i === 0 && j > startCol) {\r\n                            var isNeedMergeCol = o.mergeRule(cache[i][j], cache[i][j - 1]);\r\n                            if (isNeedMergeCol === true) {\r\n                                mergeCol(i, j);\r\n                                preCol[j] = preRow[i];\r\n                            } else {\r\n                                createOneEl(i, j);\r\n                            }\r\n                        } else {\r\n                            var isNeedMergeRow = o.mergeRule(cache[i][j], cache[i - 1][j]);\r\n                            var isNeedMergeCol = o.mergeRule(cache[i][j], cache[i][j - 1]);\r\n                            if (isNeedMergeCol && isNeedMergeRow) {\r\n                                continue;\r\n                                // mergeRow(i, j);//优先合并列\r\n                            }\r\n                            if (isNeedMergeCol) {\r\n                                mergeCol(i, j);\r\n                            }\r\n                            if (isNeedMergeRow) {\r\n                                mergeRow(i, j);\r\n                            }\r\n                            if (!isNeedMergeCol && !isNeedMergeRow) {\r\n                                createOneEl(i, j);\r\n                            }\r\n                        }\r\n                    } else {\r\n                        createOneEl(i, j);\r\n                    }\r\n                }\r\n            });\r\n            var tree = [];\r\n            var prefix = BI.UUID();\r\n            BI.each(result, function (i, item) {\r\n                var layout = {\r\n                    type: \"bi.vertical\",\r\n                    scrolly: false,\r\n                    items: [{\r\n                        type: \"bi.layout\",\r\n                        tagName: \"input\",\r\n                        cls: \"spread-sequence-table-checkbox\",\r\n                        invisible: true,\r\n                        attributes: {\r\n                            type: \"checkbox\",\r\n                            id: prefix + \"-\" + item.item._row + \"-\" + item.item._col\r\n                        }\r\n                    }, !items[item.item._row][item.item._col].children ? { type: \"bi.layout\" } : {\r\n                        type: \"bi.vertical_adapt\",\r\n                        verticalAlign: \"stretch\",\r\n                        cls: \"summary-line\",\r\n                        items: [{\r\n                            el: createNode(item, {\r\n                                width: summaryColumnSize[endCol - 1] - (item.item._col > 0 ? summaryColumnSize[item.item._col - 1] : 0)\r\n                                // height: o.rowSize\r\n                            }, true)\r\n                        }, getLeaves(getSummaryRow(item.item._row, item.item._col))]\r\n                    }, {\r\n                        type: \"bi.vertical_adapt\",\r\n                        verticalAlign: \"stretch\",\r\n                        cls: \"expand-line\",\r\n                        items: [{\r\n                            el: !item.parent && o.showSequence === true ? createNodes(item) : {\r\n                                type: \"bi.vtape\",\r\n                                width: item.item._width,\r\n                                scrolly: false,\r\n                                scrollable: false,\r\n                                items: createNodes(item)\r\n                            }\r\n                        }, {\r\n                            type: \"bi.vertical\",\r\n                            scrolly: false,\r\n                            items: []\r\n                        }]\r\n                    }]\r\n                };\r\n                item.layout = layout;\r\n                if (item.parent) {\r\n                    getNext(item.parent).push(layout);\r\n                }\r\n            });\r\n\r\n            function _createNode(item, options, isPlus, hasIcon) {\r\n                return BI.extend({\r\n                    type: \"bi.label\",\r\n                    textAlign: \"left\",\r\n                    lgap: 25,\r\n                    width: item.item._width,\r\n                    height: rowHeight,\r\n                    _columnIndex: item.item._col,\r\n                    _rowIndex: item.item._row,\r\n                    firstRowTopLine: false,\r\n                    firstColumnLeftLine: true,\r\n                    extraCls: \"collection-cell\" + (item.item._row === 0 ? \" first-row\" : \"\") + (item.item._col === 0 ? \" first-col\" : \"\"),\r\n                    mounted: function () {\r\n                        if (hasIcon && !item.isLastNode) {\r\n                            BI.createWidget({\r\n                                type: \"bi.absolute_vertical_adapt\",\r\n                                element: this,\r\n                                lgap: 6,\r\n                                items: [{\r\n                                    type: \"bi.icon_button\",\r\n                                    tagName: \"label\",\r\n                                    attributes: {\r\n                                        \"for\": prefix + \"-\" + item.item._row + \"-\" + item.item._col\r\n                                    },\r\n                                    cls: (isPlus ? \"plus-font\" : \"minus-font\") + \" icon-size-12\",\r\n                                    iconWidth: 12,\r\n                                    iconHeight: 12,\r\n                                    width: 12,\r\n                                    height: 12\r\n                                }]\r\n                            });\r\n                        }\r\n                    }\r\n                    // height: item.item._height\r\n                }, options, items[item.item._row][item.item._col]);\r\n            }\r\n\r\n            function createNode(item, options, isPlus) {\r\n                var node = _createNode(item, options, isPlus, true);\r\n                if (!item.parent && o.showSequence === true) {\r\n                    // 序号显示逐行递增，但最后一行的序号样式和文本需要由summaryCellStyleGetter和summaryText决定\r\n                    var isSummarySeq = items.length - 1 === item.item._row;\r\n                    return {\r\n                        type: \"bi.vertical_adapt\",\r\n                        verticalAlign: \"stretch\",\r\n                        items: [{\r\n                            type: \"bi.table_style_cell\",\r\n                            cls: \"sequence-table-title-cell\",\r\n                            width: o.seqWidth,\r\n                            styleGetter: (function (key) {\r\n                                return function () {\r\n                                    return isSummarySeq ? o.summaryCellStyleGetter(true) : o.sequenceCellStyleGetter(key);\r\n                                };\r\n                            })(count),\r\n                            text: isPlus ? count : isSummarySeq ? o.summaryText : count++,\r\n                            _store: o.tableStyleCellStoreGetter\r\n                        }, {\r\n                            el: node\r\n                        }]\r\n                    };\r\n                }\r\n                return node;\r\n            }\r\n\r\n            function createNodes(item, options, isPlus) {\r\n                var node = _createNode(item, options, isPlus, true);\r\n                var current = items[item.item._row][item.item._col];\r\n                var isLastNode = !current.children || current.children.length === 0;\r\n                if (!item.parent && o.showSequence === true) {\r\n                    var isSummarySeq = items.length - 1 === item.item._row;\r\n                    return {\r\n                        type: \"bi.vertical_adapt\",\r\n                        verticalAlign: \"stretch\",\r\n                        items: [{\r\n                            type: \"bi.table_style_cell\",\r\n                            cls: \"sequence-table-title-cell\",\r\n                            width: o.seqWidth,\r\n                            styleGetter: (function (key) {\r\n                                return function () {\r\n                                    return isSummarySeq ? o.summaryCellStyleGetter(true) : o.sequenceCellStyleGetter(key);\r\n                                };\r\n                            })(count),\r\n                            text: isPlus ? count : isSummarySeq ? o.summaryText : count++,\r\n                            _store: o.tableStyleCellStoreGetter\r\n                        }, {\r\n                            el: {\r\n                                type: \"bi.vtape\",\r\n                                width: item.item._width,\r\n                                scrolly: false,\r\n                                scrollable: false,\r\n                                items: isLastNode ? [{\r\n                                    el: node\r\n                                }] : BI.map([node].concat(BI.map(BI.range(item.item.__mergeRows.length - 1), function () {\r\n                                    return _createNode(item, options, isPlus, false);\r\n                                })), function (i, node) {\r\n                                    return {\r\n                                        el: node,\r\n                                        height: rowHeight\r\n                                    };\r\n                                })\r\n                            }\r\n                        }]\r\n                    };\r\n                }\r\n                return isLastNode ? [{\r\n                    el: node\r\n                }] : BI.map([node].concat(BI.map(BI.range(item.item.__mergeRows.length - 1), function () {\r\n                    return _createNode(item, options, isPlus, false);\r\n                })), function (i, node) {\r\n                    return {\r\n                        el: node,\r\n                        height: rowHeight\r\n                    };\r\n                });\r\n            }\r\n\r\n            function getSummaryRow(i, j) {\r\n                var item = map[i][j];\r\n                if (o.rowPosition === \"bottom\") {\r\n                    return i + item.__mergeRows.length - 1;\r\n                } else {\r\n                    return i;\r\n                }\r\n            }\r\n\r\n            function getNext(item) {\r\n                return item.layout.items[2].items[1].items;\r\n            }\r\n\r\n            function getLeaves(row) {\r\n                var leaves = items[row].slice(endCol);\r\n                return {\r\n                    type: \"bi.vertical_adapt\",\r\n                    items: BI.map(leaves, function (i, leaf) {\r\n                        return BI.extend({\r\n                            type: \"bi.label\",\r\n                            width: columnSize[endCol + i],\r\n                            height: rowHeight,\r\n                            extraCls: \"collection-cell\"\r\n                        }, leaf);\r\n                    })\r\n                };\r\n            }\r\n\r\n            BI.each(result, function (i, item) {\r\n                // 叶子节点\r\n                if (getNext(item).length === 0) {\r\n                    var leaves = getLeaves(item.item._row);\r\n                    item.isLastNode = true;\r\n                    getNext(item).push(leaves);\r\n                }\r\n                if (!item.parent) {\r\n                    tree.push(item.layout);\r\n                }\r\n            });\r\n            return tree;\r\n        },\r\n\r\n        _populate: function (header, items) {\r\n            if (this._isNeedDigest === true) {\r\n                this._digestTable(header, items);\r\n            }\r\n            this._isNeedDigest = false;\r\n            this._populateTable(header, items);\r\n        },\r\n\r\n        getRegionSize: function () {\r\n            var o = this.options;\r\n            var regionSize = o.regionColumnSize[0] || 0;\r\n            if (o.isNeedFreeze === false || o.freezeCols.length === 0) {\r\n                return 0;\r\n            }\r\n            if (!regionSize) {\r\n                BI.each(o.freezeCols, function (i, col) {\r\n                    regionSize += o.columnSize[col];\r\n                });\r\n            }\r\n            return regionSize;\r\n        },\r\n\r\n        setVerticalScroll: function (scrollTop) {\r\n        },\r\n\r\n        setLeftHorizontalScroll: function (scrollLeft) {\r\n        },\r\n\r\n        setRightHorizontalScroll: function (scrollLeft) {\r\n        },\r\n\r\n        getVerticalScroll: function () {\r\n        },\r\n\r\n        getLeftHorizontalScroll: function () {\r\n        },\r\n\r\n        getRightHorizontalScroll: function () {\r\n        },\r\n\r\n        setColumnSize: function (columnSize) {\r\n            this._isNeedDigest = true;\r\n            this.options.columnSize = columnSize;\r\n        },\r\n\r\n        setRegionColumnSize: function (regionColumnSize) {\r\n            this._isNeedDigest = true;\r\n            this.options.regionColumnSize = regionColumnSize;\r\n        },\r\n\r\n        getColumnSize: function () {\r\n            return this.options.columnSize;\r\n        },\r\n\r\n        getRegionColumnSize: function () {\r\n            return this.options.regionColumnSize;\r\n        },\r\n\r\n        _restore: function () {\r\n            // this.topLeftCollection.restore();\r\n            this.topRightCollection.restore();\r\n            // this.bottomLeftCollection.restore();\r\n            // this.bottomRightCollection.restore();\r\n        },\r\n\r\n        restore: function () {\r\n            this._restore();\r\n        }\r\n    });\r\n    BI.shortcut(\"bi.spread_sequence_list_table\", Widget);\r\n}());\r\n","!(function () {\r\n    var Widget = BI.inherit(BI.Widget, {\r\n        props: {\r\n            baseCls: \"bi-spread-sequence-table\",\r\n            el: {},\r\n            isNeedResize: true, // 是否需要调整列宽\r\n\r\n            freezeCols: [], // 冻结的列号,从0开始,isNeedFreeze为tree时生效\r\n\r\n            isNeedMerge: true, // 是否需要合并单元格\r\n            mergeCols: [],\r\n            mergeRule: BI.emptyFn,\r\n\r\n            isNeedMergeCol: true, // 是否横向合并\r\n            isNeedMergeRow: true, // 是否纵向合并\r\n\r\n            columnSize: [],\r\n            minColumnSize: [],\r\n            maxColumnSize: [],\r\n            headerRowSize: 25,\r\n            rowSize: 25,\r\n\r\n            regionColumnSize: [],\r\n\r\n            headerCellStyleGetter: BI.emptyFn,\r\n            summaryCellStyleGetter: BI.emptyFn,\r\n            sequenceCellStyleGetter: BI.emptyFn,\r\n            // 传给汇总、序号单元格的store，能在单元格绘制时使用上下文中的cssScale\r\n            tableStyleCellStoreGetter: null,\r\n\r\n            sequenceHeaderCreator: BI.emptyFn,\r\n            sequenceSummaryText: BI.i18nText(\"BI-Summary_Values\"),\r\n\r\n            header: [],\r\n            items: [],\r\n\r\n            // 交叉表头\r\n            crossHeader: [],\r\n            crossItems: [],\r\n\r\n            // 汇总行位置\r\n            summaryText: BI.i18nText(\"BI-Summary_Values\"),\r\n            rowPosition: \"bottom\",\r\n            colPosition: \"right\",\r\n            showInnerSummary: false,\r\n\r\n            showSequence: false,\r\n            startSequence: 1, // 开始的序号\r\n            seqWidth: 60\r\n\r\n        },\r\n\r\n        _getVDeep: function () {\r\n            return this.options.crossHeader.length;// 纵向深度\r\n        },\r\n\r\n        _getHDeep: function () {\r\n            var o = this.options;\r\n            return Math.max(o.mergeCols.length, o.freezeCols.length, BI.TableTree.maxDeep(o.items) - 1);\r\n        },\r\n\r\n        render: function () {\r\n            var self = this, o = this.options;\r\n            this._width = 0;\r\n            this._height = 0;\r\n            var data = this._digest();\r\n            this.topRightCollection = BI.createWidget({\r\n                type: \"bi.collection_view\",\r\n                cellSizeAndPositionGetter: function (index) {\r\n                    return self.topRightItems[index];\r\n                }\r\n            });\r\n            this.bottomRight = BI.createWidget({\r\n                type: \"bi.vertical\",\r\n                scrolly: false,\r\n            });\r\n            this.contextLayout = BI.createWidget({\r\n                type: \"bi.vertical\",\r\n                element: this,\r\n                scrolly: false,\r\n                scrollable: true,\r\n                items: [o.showSequence ? {\r\n                    type: \"bi.vertical_adapt\",\r\n                    items: [BI.extend({\r\n                        type: \"bi.table_style_cell\",\r\n                        text: BI.i18nText(\"BI-Number_Index\"),\r\n                        width: o.seqWidth,\r\n                        height: this._getFreezeHeaderHeight(data.header),\r\n                        styleGetter: o.headerCellStyleGetter,\r\n                        ref: function (_ref) {\r\n                            self.headerSeq = _ref;\r\n                        },\r\n                        _store: o.tableStyleCellStoreGetter\r\n                    }, o.sequenceHeaderCreator()), this.topRightCollection]\r\n                } : {\r\n                    el: this.topRightCollection\r\n                }, {\r\n                    el: this.bottomRight\r\n                }]\r\n            });\r\n\r\n            if (data.header.length > 0 || data.items.length > 0) {\r\n                this._digestTable(data.header, data.items);\r\n                this._populate(data.header, data.items);\r\n            }\r\n        },\r\n\r\n        _digest: function () {\r\n            var o = this.options;\r\n            var deep = this._getHDeep();\r\n            var vDeep = this._getVDeep();\r\n            var header = BI.TableTree.formatHeader(o.header, o.crossHeader, o.crossItems, deep, vDeep, o.headerCellStyleGetter, {\r\n                sumPosition: o.colPosition === \"right\",\r\n                summaryText: o.summaryText\r\n            });\r\n            var items = BI.DynamicSummaryTreeTable.formatHorizontalItems(o.items, deep, false, o.summaryCellStyleGetter, {\r\n                sumPosition: o.rowPosition === \"bottom\",\r\n                summaryText: o.summaryText,\r\n                isNeedMergeRow: o.isNeedMergeRow,\r\n                tableStyleCellStoreGetter: o.tableStyleCellStoreGetter\r\n            });\r\n            var data = BI.DynamicSummaryTreeTable.formatSummaryItems(items, header, o.crossItems, deep);\r\n            var columnSize = o.columnSize.slice();\r\n            var minColumnSize = o.minColumnSize.slice();\r\n            var maxColumnSize = o.maxColumnSize.slice();\r\n            BI.removeAt(columnSize, data.deletedCols);\r\n            BI.removeAt(minColumnSize, data.deletedCols);\r\n            BI.removeAt(maxColumnSize, data.deletedCols);\r\n            return {\r\n                header: data.header,\r\n                items: data.items,\r\n                columnSize: columnSize,\r\n                minColumnSize: minColumnSize,\r\n                maxColumnSize: maxColumnSize\r\n            };\r\n        },\r\n\r\n        populate: function (items, header, crossItems, crossHeader) {\r\n            var o = this.options;\r\n            if (items) {\r\n                o.items = items;\r\n            }\r\n            if (header) {\r\n                o.header = header;\r\n            }\r\n            if (crossItems) {\r\n                o.crossItems = crossItems;\r\n            }\r\n            if (crossHeader) {\r\n                o.crossHeader = crossHeader;\r\n            }\r\n            var data = this._digest();\r\n            // 表头所展示“序号”高度由headers决定，render的时候不一定传了header, 在populate的时候setHeight\r\n            this.headerSeq && this.headerSeq.setHeight(this._getFreezeHeaderHeight(data.header));\r\n            this.setColumnSize(data.columnSize);\r\n            o.minColumnSize = data.minColumnSize;\r\n            o.maxColumnSize = data.maxColumnSize;\r\n\r\n            items = data.items;\r\n            header = data.header;\r\n            if (items && items !== this.options.items) {\r\n                this._isNeedDigest = true;\r\n                this.options.items = items;\r\n                this._restore();\r\n            }\r\n            if (header && header !== this.options.header) {\r\n                this._isNeedDigest = true;\r\n                this.options.header = header;\r\n                this._restore();\r\n            }\r\n            this._populate(header, items);\r\n        },\r\n\r\n        _getFreezeColLength: function () {\r\n            var o = this.options;\r\n            return o.isNeedMerge === true ? BI.clamp(o.mergeCols.length, 0, o.columnSize.length) : 0;\r\n        },\r\n\r\n        _getFreezeHeaderHeight: function (header) {\r\n            var o = this.options;\r\n            return header.length * o.headerRowSize;\r\n        },\r\n\r\n        _populateTable: function (header, items) {\r\n            var self = this, o = this.options;\r\n            var regionSize = this.getRegionSize(), totalLeftColumnSize = 0, totalRightColumnSize = 0,\r\n                totalColumnSize = 0,\r\n                summaryColumnSizeArray = [];\r\n            BI.each(o.columnSize, function (i, size) {\r\n                if (o.isNeedFreeze === true && o.freezeCols.includes(i)) {\r\n                    totalLeftColumnSize += size;\r\n                } else {\r\n                    totalRightColumnSize += size;\r\n                }\r\n                totalColumnSize += size;\r\n                if (i === 0) {\r\n                    summaryColumnSizeArray[i] = size;\r\n                } else {\r\n                    summaryColumnSizeArray[i] = summaryColumnSizeArray[i - 1] + size;\r\n                }\r\n            });\r\n\r\n            // var otlw = regionSize;\r\n            // var otlh = this._getFreezeHeaderHeight(header);\r\n            // var otrw = this._width - regionSize;\r\n            // var otrh = this._getFreezeHeaderHeight(header);\r\n            // var oblw = regionSize;\r\n            // var oblh = this._height - otlh;\r\n            // var obrw = this._width - regionSize;\r\n            // var obrh = this._height - otrh;\r\n\r\n            // var scrollBarSize = BI.DOM.getScrollWidth();\r\n            // var tlw = otlw + scrollBarSize;\r\n            // var tlh = otlh + scrollBarSize;\r\n            // var trw = otrw + scrollBarSize;\r\n            // var trh = otrh + scrollBarSize;\r\n            // var blw = oblw + scrollBarSize;\r\n            // var blh = oblh + scrollBarSize;\r\n            // var brw = obrw + scrollBarSize;\r\n            // var brh = obrh + scrollBarSize;\r\n            //\r\n            // var digest = function (el) {\r\n            //     el.element.css({\r\n            //         overflow: \"scroll\",\r\n            //         overflowX: \"scroll\",\r\n            //         overflowY: \"scroll\"\r\n            //     });\r\n            // };\r\n\r\n            // this.topLeft.setWidth(otlw);\r\n            // this.topLeft.setHeight(otlh);\r\n            // this.topRight.setWidth(otrw);\r\n            // this.topRight.setHeight(otrh);\r\n            // this.bottomLeft.setWidth(oblw);\r\n            // this.bottomLeft.setHeight(oblh);\r\n            // this.bottomRight.setWidth(obrw);\r\n            // this.bottomRight.setHeight(obrh);\r\n\r\n            // this.topLeftCollection.setWidth(tlw);\r\n            // this.topLeftCollection.setHeight(tlh);\r\n            this.topRightCollection.setWidth(totalColumnSize);\r\n            this.topRightCollection.setHeight(this._getFreezeHeaderHeight(header));\r\n            // this.bottomLeftCollection.setWidth(blw);\r\n            // this.bottomLeftCollection.setHeight(blh);\r\n            // this.bottomRightCollection.setWidth(brw);\r\n            // this.bottomRightCollection.setHeight(brh);\r\n\r\n            // digest(this.topLeftCollection);\r\n            // digest(this.topRightCollection);\r\n            // digest(this.bottomLeftCollection);\r\n            // digest(this.bottomRightCollection);\r\n\r\n            // var items = this.contextLayout.attr(\"items\");\r\n            // items[1].left = regionSize;\r\n            // items[1].top = this._getFreezeHeaderHeight(header);\r\n            // items[3].left = regionSize;\r\n            // items[3].top = this._getFreezeHeaderHeight();\r\n            // this.contextLayout.attr(\"items\", items);\r\n            // this.contextLayout.resize();\r\n\r\n            var leftHeader = [], rightHeader = [], leftItems = [], rightItems = [];\r\n            var run = function (positions, items, rendered, firstRowTopLine, firstColumnLeftLine) {\r\n                BI.each(positions, function (i, item) {\r\n                    if (!firstRowTopLine && o.customCell) {\r\n                        items[item.row][item.col]._rowIndex = item.row;\r\n                        items[item.row][item.col]._columnIndex = item.col;\r\n                        items[item.row][item.col].firstRowTopLine = firstRowTopLine;\r\n                        items[item.row][item.col].firstColumnLeftLine = firstColumnLeftLine;\r\n                        rendered.push(items[item.row][item.col]);\r\n                        return;\r\n                    }\r\n                    var cell = {\r\n                        type: \"bi.collection_table_cell\",\r\n                        cell: items[item.row][item.col],\r\n                        _rowIndex: item.row,\r\n                        _columnIndex: item.col,\r\n                        firstRowTopLine: firstRowTopLine,\r\n                        firstColumnLeftLine: firstColumnLeftLine\r\n                    };\r\n                    rendered.push(cell);\r\n                });\r\n            };\r\n            // run(this.topLeftItems, header, leftHeader, true, true);\r\n            run(this.topRightItems, header, rightHeader, true, true);\r\n            // run(this.bottomLeftItems, this._getActualItems(), leftItems, this.topRightItems.length <= 0, true);\r\n            // run(this.bottomRightItems, this._getActualItems(), rightItems, this.topRightItems.length <= 0, this.topLeftItems.length <= 0);\r\n\r\n            // this.topLeftCollection._populate(leftHeader);\r\n            this.topRightCollection._populate(rightHeader);\r\n            // this.bottomLeftCollection._populate(leftItems);\r\n            // this.bottomRightCollection._populate(rightItems);\r\n\r\n            this.bottomRight.populate(this.bottomRightItems);\r\n        },\r\n\r\n        _digestTable: function (header, items) {\r\n            var o = this.options;\r\n            var freezeColLength = this._getFreezeColLength();\r\n            // // 如果表头位置不够，取消表头冻结\r\n            // if (this._getFreezeHeaderHeight() <= 0) {\r\n            //     this.topLeftItems = [];\r\n            //     this.topRightItems = [];\r\n            //     this.bottomLeftItems = this._serialize(this._getActualItems(), 0, freezeColLength, o.rowSize, o.columnSize, o.mergeCols, BI.range(o.header.length));\r\n            //     this.bottomRightItems = this._serialize(this._getActualItems(), freezeColLength, o.columnSize.length, o.rowSize, o.columnSize, o.mergeCols, BI.range(o.header.length));\r\n            // } else {\r\n            // this.topLeftItems = this._serialize(header, 0, freezeColLength, o.headerRowSize, o.columnSize, o.mergeCols);\r\n            this.topRightItems = BI.CollectionTable.serialize(header, 0, o.columnSize.length, o.headerRowSize, o.columnSize, true, [], o.mergeRule);\r\n            // this.bottomLeftItems = this._serialize(o.items, 0, freezeColLength, o.rowSize, o.columnSize, o.mergeCols);\r\n            // this.bottomRightItems = this._serialize(o.items, freezeColLength, o.columnSize.length, o.rowSize, o.columnSize, o.mergeCols);\r\n            // }\r\n            this.bottomRightItems = this._serializeItems(items, 0, freezeColLength, o.rowSize, o.columnSize, o.mergeCols);\r\n        },\r\n\r\n        _serializeItems: function (items, startCol, endCol, rowHeight, columnSize, mergeCols, mergeRows) {\r\n            mergeCols = mergeCols || [];\r\n            mergeRows = mergeRows || [];\r\n            var self = this, o = this.options;\r\n            var count = o.startSequence;\r\n            var result = [], cache = {}, preCol = {}, preRow = {}, map = {};\r\n            var summaryColumnSize = [];\r\n            for (var i = startCol; i < endCol; i++) {\r\n                if (i === startCol) {\r\n                    summaryColumnSize[i] = columnSize[i];\r\n                } else {\r\n                    summaryColumnSize[i] = summaryColumnSize[i - 1] + columnSize[i];\r\n                }\r\n            }\r\n            var mergeRow = function (i, j) {\r\n                preCol[j]._height += rowHeight;\r\n                preCol[j].__mergeRows.push(i);\r\n                //指向前一列\r\n                preRow[i] = preCol[j];\r\n            };\r\n\r\n            var mergeCol = function (i, j) {\r\n                preRow[i]._width += columnSize[j];\r\n                preRow[i].__mergeCols.push(j);\r\n            };\r\n\r\n            var createOneEl = function (r, c) {\r\n                var width = columnSize[c];\r\n                var height = rowHeight;\r\n                map[r][c]._row = r;\r\n                map[r][c]._col = c;\r\n                map[r][c]._width = width;\r\n                map[r][c]._height = height;\r\n\r\n                var el = {\r\n                    x: summaryColumnSize[c] - columnSize[c],\r\n                    y: +r * rowHeight,\r\n                    item: map[r][c],\r\n                    parent: preRow[r] && preRow[r].el\r\n                };\r\n\r\n                preCol[c] = map[r][c];\r\n                preCol[c].__mergeRows = [r];\r\n                preRow[r] = map[r][c];\r\n                preRow[r].__mergeCols = [c];\r\n                preRow[r].el = el;\r\n\r\n                result.push(el);\r\n            };\r\n\r\n            BI.each(items, function (i, cols) {\r\n                for (var j = startCol; j < endCol; j++) {\r\n                    if (!cache[i]) {\r\n                        cache[i] = {};\r\n                    }\r\n                    if (!map[i]) {\r\n                        map[i] = {};\r\n                    }\r\n                    cache[i][j] = cols[j];\r\n                    map[i][j] = {};\r\n                    if (mergeCols === true || mergeCols.indexOf(j) > -1 || mergeRows === true || mergeRows.indexOf(i) > -1) {\r\n                        if (i === 0 && j === startCol) {\r\n                            createOneEl(0, startCol);\r\n                        } else if (j === startCol && i > 0) {\r\n                            var isNeedMergeRow = o.mergeRule(cache[i][j], cache[i - 1][j]);\r\n                            if (isNeedMergeRow === true) {\r\n                                mergeRow(i, j);\r\n                                preRow[i] = preCol[j];\r\n                            } else {\r\n                                createOneEl(i, j);\r\n                            }\r\n                        } else if (i === 0 && j > startCol) {\r\n                            var isNeedMergeCol = o.mergeRule(cache[i][j], cache[i][j - 1]);\r\n                            if (isNeedMergeCol === true) {\r\n                                mergeCol(i, j);\r\n                                preCol[j] = preRow[i];\r\n                            } else {\r\n                                createOneEl(i, j);\r\n                            }\r\n                        } else {\r\n                            var isNeedMergeRow = o.mergeRule(cache[i][j], cache[i - 1][j]);\r\n                            var isNeedMergeCol = o.mergeRule(cache[i][j], cache[i][j - 1]);\r\n                            if (isNeedMergeCol && isNeedMergeRow) {\r\n                                continue;\r\n                                // mergeRow(i, j);//优先合并列\r\n                            }\r\n                            if (isNeedMergeCol) {\r\n                                mergeCol(i, j);\r\n                            }\r\n                            if (isNeedMergeRow) {\r\n                                mergeRow(i, j);\r\n                            }\r\n                            if (!isNeedMergeCol && !isNeedMergeRow) {\r\n                                createOneEl(i, j);\r\n                            }\r\n                        }\r\n                    } else {\r\n                        createOneEl(i, j);\r\n                    }\r\n                }\r\n            });\r\n            var tree = [];\r\n            var prefix = BI.UUID();\r\n            BI.each(result, function (i, item) {\r\n                var layout = {\r\n                    type: \"bi.vertical\",\r\n                    scrolly: false,\r\n                    items: [{\r\n                        type: \"bi.layout\",\r\n                        tagName: \"input\",\r\n                        cls: \"spread-sequence-table-checkbox\",\r\n                        invisible: true,\r\n                        attributes: {\r\n                            type: \"checkbox\",\r\n                            id: prefix + \"-\" + item.item._row + \"-\" + item.item._col\r\n                        }\r\n                    }, !items[item.item._row][item.item._col].children ? { type: \"bi.layout\" } : {\r\n                        type: \"bi.vertical_adapt\",\r\n                        verticalAlign: \"stretch\",\r\n                        cls: \"summary-line\",\r\n                        items: [{\r\n                            el: createNode(item, {\r\n                                width: summaryColumnSize[endCol - 1] - (item.item._col > 0 ? summaryColumnSize[item.item._col - 1] : 0)\r\n                                // height: o.rowSize\r\n                            }, true)\r\n                        }, getLeaves(getSummaryRow(item.item._row, item.item._col))]\r\n                    }, {\r\n                        type: \"bi.vertical_adapt\",\r\n                        verticalAlign: \"stretch\",\r\n                        cls: \"expand-line\",\r\n                        items: [{\r\n                            el: createNode(item)\r\n                        }, {\r\n                            type: \"bi.vertical\",\r\n                            scrolly: false,\r\n                            items: []\r\n                        }]\r\n                    }]\r\n                };\r\n                item.layout = layout;\r\n                if (item.parent) {\r\n                    getNext(item.parent).push(layout);\r\n                }\r\n            });\r\n\r\n            function createNode(item, options, isPlus) {\r\n                var node = BI.extend({\r\n                    type: \"bi.label\",\r\n                    textAlign: \"left\",\r\n                    lgap: 25,\r\n                    width: item.item._width,\r\n                    // height: item.item._height,\r\n                    _columnIndex: item.item._col,\r\n                    _rowIndex: item.item._row,\r\n                    firstRowTopLine: false,\r\n                    firstColumnLeftLine: true,\r\n                    extraCls: \"collection-cell\" + (item.item._row === 0 ? \" first-row\" : \"\") + (item.item._col === 0 ? \" first-col\" : \"\"),\r\n                    mounted: function () {\r\n                        if (!item.isLastNode) {\r\n                            BI.createWidget({\r\n                                type: \"bi.absolute_vertical_adapt\",\r\n                                element: this,\r\n                                lgap: 6,\r\n                                items: [{\r\n                                    type: \"bi.icon_button\",\r\n                                    tagName: \"label\",\r\n                                    attributes: {\r\n                                        \"for\": prefix + \"-\" + item.item._row + \"-\" + item.item._col\r\n                                    },\r\n                                    cls: (isPlus ? \"plus-font\" : \"minus-font\") + \" icon-size-12\",\r\n                                    iconWidth: 12,\r\n                                    iconHeight: 12,\r\n                                    width: 12,\r\n                                    height: 12\r\n                                }]\r\n                            });\r\n                        }\r\n                    }\r\n                    // height: item.item._height\r\n                }, options, items[item.item._row][item.item._col]);\r\n                if (!item.parent && o.showSequence === true) {\r\n                    // 序号显示逐行递增，但最后一行的序号的样式和文本需要由summaryCellStyleGetter和summaryText决定\r\n                    var isSummarySeq = items.length - 1 === item.item._row;\r\n                    return {\r\n                        type: \"bi.vertical_adapt\",\r\n                        verticalAlign: \"stretch\",\r\n                        items: [{\r\n                            type: \"bi.table_style_cell\",\r\n                            cls: \"sequence-table-title-cell\",\r\n                            width: o.seqWidth,\r\n                            styleGetter: (function (key) {\r\n                                return function () {\r\n                                    return isSummarySeq ? o.summaryCellStyleGetter(true) : o.sequenceCellStyleGetter(key);\r\n                                };\r\n                            })(count),\r\n                            text: isPlus ? count : isSummarySeq ? o.summaryText : count++,\r\n                            _store: o.tableStyleCellStoreGetter\r\n                        }, {\r\n                            el: node\r\n                        }]\r\n                    };\r\n                }\r\n                return node;\r\n            }\r\n\r\n            function getSummaryRow(i, j) {\r\n                var item = map[i][j];\r\n                if (o.rowPosition === \"bottom\") {\r\n                    return i + item.__mergeRows.length - 1;\r\n                } else {\r\n                    return i;\r\n                }\r\n            }\r\n\r\n            function getNext(item) {\r\n                return item.layout.items[2].items[1].items;\r\n            }\r\n\r\n            function getLeaves(row) {\r\n                var leaves = items[row].slice(endCol);\r\n                return {\r\n                    type: \"bi.vertical_adapt\",\r\n                    items: BI.map(leaves, function (i, leaf) {\r\n                        return BI.extend({\r\n                            type: \"bi.label\",\r\n                            width: columnSize[endCol + i],\r\n                            height: rowHeight,\r\n                            extraCls: \"collection-cell\",\r\n                        }, leaf);\r\n                    })\r\n                };\r\n            }\r\n\r\n            BI.each(result, function (i, item) {\r\n                // 叶子节点\r\n                if (getNext(item).length === 0) {\r\n                    var leaves = getLeaves(item.item._row);\r\n                    item.isLastNode = true;\r\n                    getNext(item).push(leaves);\r\n                }\r\n                if (!item.parent) {\r\n                    tree.push(item.layout);\r\n                }\r\n            });\r\n            return tree;\r\n        },\r\n\r\n        _populate: function (header, items) {\r\n            if (this._isNeedDigest === true) {\r\n                this._digestTable(header, items);\r\n            }\r\n            this._isNeedDigest = false;\r\n            this._populateTable(header, items);\r\n        },\r\n\r\n        getRegionSize: function () {\r\n            var o = this.options;\r\n            var regionSize = o.regionColumnSize[0] || 0;\r\n            if (o.isNeedFreeze === false || o.freezeCols.length === 0) {\r\n                return 0;\r\n            }\r\n            if (!regionSize) {\r\n                BI.each(o.freezeCols, function (i, col) {\r\n                    regionSize += o.columnSize[col];\r\n                });\r\n            }\r\n            return regionSize;\r\n        },\r\n\r\n        setVerticalScroll: function (scrollTop) {\r\n        },\r\n\r\n        setLeftHorizontalScroll: function (scrollLeft) {\r\n        },\r\n\r\n        setRightHorizontalScroll: function (scrollLeft) {\r\n        },\r\n\r\n        getVerticalScroll: function () {\r\n        },\r\n\r\n        getLeftHorizontalScroll: function () {\r\n        },\r\n\r\n        getRightHorizontalScroll: function () {\r\n        },\r\n\r\n        setColumnSize: function (columnSize) {\r\n            this._isNeedDigest = true;\r\n            this.options.columnSize = columnSize;\r\n        },\r\n\r\n        setRegionColumnSize: function (regionColumnSize) {\r\n            this._isNeedDigest = true;\r\n            this.options.regionColumnSize = regionColumnSize;\r\n        },\r\n\r\n        getColumnSize: function () {\r\n            return this.options.columnSize;\r\n        },\r\n\r\n        getRegionColumnSize: function () {\r\n            return this.options.regionColumnSize;\r\n        },\r\n\r\n        _restore: function () {\r\n            // this.topLeftCollection.restore();\r\n            this.topRightCollection.restore();\r\n            // this.bottomLeftCollection.restore();\r\n            // this.bottomRightCollection.restore();\r\n        },\r\n\r\n        restore: function () {\r\n            this._restore();\r\n        }\r\n    });\r\n    BI.shortcut(\"bi.spread_sequence_table\", Widget);\r\n}());\r\n","import \"./stickytable.row\";\r\nimport {StickyTableLayout} from \"./stickytable.layout\";\r\nimport \"./stickytable.header\";\r\n\r\n/**\r\n * StickyTable\r\n *\r\n * Created by GUY on 2022/9/24.\r\n * @class StickyTable\r\n * @extends BI.Widget\r\n */\r\nvar FreezeTable = BI.inherit(BI.Widget, {\r\n    _defaultConfig: function () {\r\n        return BI.extend(FreezeTable.superclass._defaultConfig.apply(this, arguments), {\r\n            baseCls: \"bi-sticky-table\",\r\n            headerRowSize: 30,\r\n            rowSize: 30,\r\n\r\n            columnSize: [],\r\n            minColumnSize: [],\r\n            maxColumnSize: [],\r\n\r\n            freezeCols: [0],\r\n            scrollLeft: 0,\r\n            scrollTop: 0,\r\n\r\n            sortable: true,\r\n            checkable: true,\r\n            bordered: false,\r\n            stripe: false,\r\n            hover: false,\r\n\r\n            header: [],\r\n            items: [],\r\n            itemsCreator: BI.emptyFn,\r\n        });\r\n    },\r\n\r\n    // attr: function (key, value) {\r\n    //     var v = FreezeTable.superclass.attr.apply(this, arguments);\r\n    //     if (!value) {\r\n    //         return v;\r\n    //     }\r\n    //     return this.tableColletion.attr.apply(this.tableColletion, arguments);\r\n    // },\r\n\r\n    render: function () {\r\n        var self = this, o = this.options;\r\n\r\n        this.headerColletion = BI.createWidget({\r\n            type: \"bi.sticky_table_header\",\r\n            css: {\r\n                overflowY: \"scroll\",\r\n                overflowX: \"hidden\"\r\n            },\r\n            columnSize: o.columnSize,\r\n            minColumnSize: o.minColumnSize,\r\n            maxColumnSize: o.maxColumnSize,\r\n            freezeCols: o.freezeCols.slice(),\r\n            header: o.header,\r\n            headerRowSize: o.headerRowSize\r\n        });\r\n        this.bottomRightCollection = BI.createWidget({\r\n            type: \"bi.virtual_tree_list\",\r\n            css: {\r\n                overflowY: \"scroll\",\r\n                overflowX: \"auto\"\r\n            },\r\n            items: this._formatItems(o.items),\r\n            itemsCreator: (op, callback) => {\r\n                o.itemsCreator(op, (items) => {\r\n                    callback(this._formatItems(items));\r\n                });\r\n            },\r\n            el: {\r\n                type: 'bi.virtual_group_list',\r\n                configRender: function (render) {\r\n                    return {\r\n                        ...render,\r\n                        scrolly: false\r\n                    };\r\n                },\r\n                listeners: [{\r\n                    eventName: \"EVENT_CHANGE\",\r\n                    action: function () {\r\n                        self.fireEvent(\"EVENT_CHANGE\", arguments);\r\n                    }\r\n                }],\r\n                rowHeight: o.rowSize,\r\n                el: {\r\n                    type: \"bi.sticky_table_layout\",\r\n                    ref: (_ref) => {\r\n                        this.tableColletion = _ref;\r\n                    },\r\n                    mirror: {\r\n                        appendTo: this.element[0]\r\n                    },\r\n                    columnSize: o.columnSize,\r\n                    minColumnSize: o.minColumnSize,\r\n                    maxColumnSize: o.maxColumnSize,\r\n                    isNeedFreeze: o.isNeedFreeze,\r\n                    freezeCols: o.freezeCols.slice(),\r\n                    sortable: o.sortable,\r\n                    checkable: o.checkable,\r\n                    listeners: {\r\n                        [StickyTableLayout.EVENT_STOP_DRAG]: (move) => {\r\n                            BI.nextTick(() => {\r\n                                this.bottomRightCollection.move(move[0], move[1]);\r\n                                this.fireEvent(\"EVENT_STOP_DRAG\", this.bottomRightCollection.getTree(), move[0], move[1]);\r\n                                this.fireEvent(\"EVENT_SORT\", this.bottomRightCollection.getTree(), move[0], move[1]);\r\n                            })\r\n                        },\r\n                        [StickyTableLayout.EVENT_START_DRAG]: (sourceId) => {\r\n                            o.scrollLeft = 0;\r\n                            this._scrollHandler();\r\n                            this.bottomRightCollection.element.scrollLeft(0);\r\n                            this.headerColletion.element.scrollLeft(0);\r\n                            this.fireEvent(\"EVENT_START_DRAG\", this.bottomRightCollection.getTree(), sourceId);\r\n                        }\r\n                    },\r\n                }\r\n            }\r\n        });\r\n        this.contextLayout = BI.createWidget({\r\n            type: \"bi.vertical_fill\",\r\n            rowSize: [\"\", \"fill\"],\r\n            cls: `${o.bordered ? \"bordered\" : \"\"} ${o.stripe ? \"stripe\" : \"\"} ${o.hover ? \"hover\" : \"\"}`,\r\n            element: this,\r\n            items: [{\r\n                el: this.headerColletion,\r\n            }, {\r\n                el: this.bottomRightCollection\r\n            }]\r\n        });\r\n\r\n    },\r\n\r\n    _scrollHandler: function () {\r\n        var o = this.options;\r\n        if (o.scrollLeft > 0) {\r\n            this.element.addClass(\"fixed-left-scroll\");\r\n        } else {\r\n            this.element.removeClass(\"fixed-left-scroll\");\r\n        }\r\n        var containerWidth = this.tableColletion.table.element.width();\r\n        var clientWidth = this.element.width();\r\n        if (containerWidth - (o.scrollLeft + clientWidth - BI.GridTableScrollbar.SIZE) < 1) {\r\n            this.element.removeClass(\"fixed-right-scroll\");\r\n        } else {\r\n            this.element.addClass(\"fixed-right-scroll\");\r\n        }\r\n    },\r\n\r\n    _freeHandler: function () {\r\n        // 冻结列不止第一列和最后一列\r\n        if (this._hasOtherFreezeCol()) {\r\n            const realColumnSize = this.headerColletion.getRealColumnSize();\r\n            this.options.freezeCols.forEach((col) => {\r\n                const firstRowLength = this.options.header[0].length;\r\n                if (col !== 0 && col !== firstRowLength - 1) {\r\n                    this.element[0].style.setProperty(`--index-${col}-left`, `${realColumnSize.slice(0, col).reduce((item, sum) => sum + item, 0)}px`);\r\n                }\r\n            });\r\n        }\r\n    },\r\n\r\n    _handleResize: function () {\r\n        this.options.scrollLeft = this.bottomRightCollection.element.scrollLeft();\r\n        this._scrollHandler();\r\n        this._freeHandler();\r\n    },\r\n\r\n    _hasOtherFreezeCol: function () {\r\n        const o = this.options;\r\n        return BI.some(o.freezeCols, (i, col) => {\r\n            const firstRowLength = o.header[0].length;\r\n            if (col !== 0 && col !== firstRowLength - 1) {\r\n                return true;\r\n            }\r\n        });\r\n    },\r\n\r\n    mounted: function () {\r\n        var o = this.options;\r\n        if (o.header.length > 0 || o.items.length > 0) {\r\n            this._digest();\r\n            this._populate();\r\n        }\r\n        this._scrollHandler();\r\n        this._freeHandler();\r\n        this.bottomRightCollection.element.scroll(() => {\r\n            o.scrollTop = this.bottomRightCollection.element.scrollTop();\r\n            o.scrollLeft = this.bottomRightCollection.element.scrollLeft();\r\n            this._scrollHandler();\r\n            this.headerColletion.element.scrollLeft(o.scrollLeft);\r\n        });\r\n        this.resizeObserver = BI.ResizeDetector.addResizeListener(this, this._handleResize.bind(this));\r\n\r\n        // this.headerColletion.element.scroll(() => {\r\n        //     o.scrollLeft = this.headerColletion.element.scrollLeft();\r\n        //     this.bottomRightCollection.element.scrollLeft(o.scrollLeft);\r\n        // });\r\n    },\r\n\r\n    destroyed: function () {\r\n        this.resizeObserver();\r\n    },\r\n\r\n    _populateTable: function () {\r\n        var self = this, o = this.options;\r\n        this.headerColletion.populate(o.header);\r\n        this.bottomRightCollection.populate(this._formatItems(o.items));\r\n    },\r\n\r\n    _formatItems: function (items) {\r\n        return items.map(({ items, id, pId, layer, isParent, draggable, checkable, open, prevComponent, ...others }) => {\r\n            return {\r\n                type: \"bi.sticky_table_row\",\r\n                id,\r\n                pId,\r\n                layer,\r\n                isParent,\r\n                draggable,\r\n                checkable,\r\n                prevComponent,\r\n                open,\r\n                height: this.options.rowSize,\r\n                dimension: others,\r\n                items,\r\n            };\r\n        });\r\n    },\r\n\r\n    _digest: function () {\r\n        var o = this.options;\r\n        // var freezeColLength = this._getFreezeColLength();\r\n        // 如果表头位置不够，取消表头冻结\r\n        // if (this._getFreezeHeaderHeight() <= 0) {\r\n        //     this.topLeftItems = [];\r\n        //     this.topRightItems = [];\r\n        //     this.bottomLeftItems = BI.CollectionTable.serialize(this._getActualItems(), 0, freezeColLength, o.rowSize, o.columnSize, o.mergeCols, BI.range(o.header.length), o.mergeRule);\r\n        //     this.bottomRightItems = BI.CollectionTable.serialize(this._getActualItems(), freezeColLength, o.columnSize.length, o.rowSize, o.columnSize, o.mergeCols, BI.range(o.header.length), o.mergeRule);\r\n        // } else {\r\n        // this.topRightItems = BI.CollectionTable.serialize(o.header, freezeColLength, o.columnSize.length, o.headerRowSize, o.columnSize, true, [], o.mergeRule);\r\n        // this.bottomLeftItems = BI.CollectionTable.serialize(o.items, 0, freezeColLength, o.rowSize, o.columnSize, o.mergeCols, [], o.mergeRule);\r\n        // this.bottomRightItems = BI.CollectionTable.serialize(o.items, 0, o.columnSize.length, o.rowSize, o.columnSize, o.mergeCols, [], o.mergeRule);\r\n        // }\r\n    },\r\n\r\n    _populate: function () {\r\n        this._populateTable();\r\n    },\r\n\r\n    setVerticalScroll: function (scrollTop) {\r\n        return this.bottomRightCollection.scrollTo(scrollTop);\r\n    },\r\n\r\n    setLeftHorizontalScroll: function (scrollLeft) {\r\n    },\r\n\r\n    setRightHorizontalScroll: function (scrollLeft) {\r\n    },\r\n\r\n    getVerticalScroll: function () {\r\n        return this.options.scrollTop;\r\n    },\r\n\r\n    getRightHorizontalScroll: function () {\r\n        return this.options.scrollLeft;\r\n    },\r\n\r\n    setWidth: function (width) {\r\n        FreezeTable.superclass.setWidth.apply(this, arguments);\r\n        this._width = this.options.width - BI.GridTableScrollbar.SIZE;\r\n    },\r\n\r\n    setHeight: function (height) {\r\n        FreezeTable.superclass.setHeight.apply(this, arguments);\r\n        this._height = this.options.height - BI.GridTableScrollbar.SIZE;\r\n    },\r\n\r\n    setColumnSize: function (columnSize) {\r\n        const o = this.options;\r\n        this._isNeedDigest = true;\r\n        this.options.columnSize = columnSize;\r\n        this.headerColletion.setColumnSize(columnSize);\r\n        this.tableColletion.setColumnSize(columnSize);\r\n        this._scrollHandler();\r\n        this._freeHandler();\r\n    },\r\n\r\n    getColumnSize: function () {\r\n        return this.options.columnSize;\r\n    },\r\n\r\n    getRegionSize: function () {\r\n        return 0;\r\n    },\r\n\r\n    getRegionColumnSize: function () {\r\n        return [];\r\n    },\r\n\r\n    setRegionColumnSize: function () {\r\n\r\n    },\r\n\r\n    getValue: function () {\r\n        return this.bottomRightCollection.getValue();\r\n    },\r\n\r\n    populate: function (items, header) {\r\n        if (items && items !== this.options.items) {\r\n            this._isNeedDigest = true;\r\n            this.options.items = items;\r\n            this._restore();\r\n        }\r\n        if (header && header !== this.options.header) {\r\n            this._isNeedDigest = true;\r\n            this.options.header = header;\r\n            this._restore();\r\n        }\r\n        this._populate();\r\n    },\r\n\r\n    _restore: function () {\r\n    },\r\n\r\n    restore: function () {\r\n        this._restore();\r\n    }\r\n});\r\nBI.shortcut(\"bi.freeze_table\", FreezeTable);\r\n\r\nvar Table = BI.TableComponnet = BI.inherit(BI.Widget, {\r\n    _defaultConfig: function () {\r\n        return BI.extend(Table.superclass._defaultConfig.apply(this, arguments), {\r\n            freezeCols: [], // 冻结的列号,从0开始\r\n\r\n            isNeedMerge: false,\r\n            mergeRule: BI.emptyFn,\r\n\r\n            columnSize: [],\r\n            minColumnSize: [],\r\n            maxColumnSize: [],\r\n\r\n            headerRowSize: 30,\r\n            rowSize: 30,\r\n\r\n            sortable: true,\r\n            resizable: true, // API保持统一用这个\r\n            checkable: true,\r\n            bordered: false,\r\n            stripe: true,\r\n            hover: true,\r\n\r\n            header: [], // 二维数组\r\n            items: [],\r\n            itemsCreator: BI.emptyFn,\r\n        });\r\n    },\r\n\r\n    attr: function (key, value) {\r\n        var v = Table.superclass.attr.apply(this, arguments);\r\n        if (BI.isNull(value)) {\r\n            return v;\r\n        }\r\n        return this.table.attr.apply(this.table, arguments);\r\n    },\r\n\r\n    render: function () {\r\n        var o = this.options;\r\n        if (o.items[0] && o.items[0].length > 0) {\r\n            return {\r\n                type: \"bi.resizable_table\",\r\n                ref: (_ref) => {\r\n                    this.table = _ref;\r\n                },\r\n                el: {\r\n                    type: \"bi.table_view\",\r\n                    bordered: o.bordered,\r\n                    stripe: o.stripe,\r\n                    hover: o.hover\r\n                },\r\n                width: o.width,\r\n                height: o.height,\r\n                isNeedFreeze: true,\r\n                freezeCols: o.freezeCols,\r\n                isNeedResize: o.isNeedResize || o.resizable,\r\n                minColumnSize: o.minColumnSize,\r\n                maxColumnSize: o.maxColumnSize,\r\n                columnSize: o.columnSize,\r\n                headerRowSize: o.headerRowSize,\r\n                rowSize: o.rowSize,\r\n                isNeedMerge: o.isNeedMerge,\r\n                mergeRule: o.mergeRule,\r\n                header: o.header,\r\n                items: o.items\r\n            };\r\n        }\r\n        return {\r\n            type: \"bi.resizable_table\",\r\n            ref: (_ref) => {\r\n                this.table = _ref;\r\n            },\r\n            el: {\r\n                type: \"bi.freeze_table\",\r\n                ref: (_ref) => {\r\n                    this.innerTable = _ref;\r\n                },\r\n                listeners: [{\r\n                    eventName: \"EVENT_SORT\",\r\n                    action: (...args) => {\r\n                        this.fireEvent(\"EVENT_SORT\", ...args);\r\n                    }\r\n                }, {\r\n                    eventName: \"EVENT_START_DRAG\",\r\n                    action: (...args) => {\r\n                        this.fireEvent(\"EVENT_START_DRAG\", ...args);\r\n                    }\r\n                }, {\r\n                    eventName: \"EVENT_STOP_DRAG\",\r\n                    action: (...args) => {\r\n                        this.fireEvent(\"EVENT_STOP_DRAG\", ...args);\r\n                    }\r\n                }, {\r\n                    eventName: \"EVENT_CHANGE\",\r\n                    action: (...args) => {\r\n                        this.fireEvent(\"EVENT_CHANGE\", ...args);\r\n                    }\r\n                }],\r\n                freezeCols: o.freezeCols,\r\n                itemsCreator: o.itemsCreator,\r\n                sortable: o.sortable,\r\n                checkable: o.checkable,\r\n                bordered: o.bordered,\r\n                stripe: o.stripe,\r\n                hover: o.hover\r\n            },\r\n            width: o.width,\r\n            height: o.height,\r\n            isNeedResize: o.isNeedResize || o.resizable,\r\n            minColumnSize: o.minColumnSize,\r\n            maxColumnSize: o.maxColumnSize,\r\n            columnSize: o.columnSize,\r\n            headerRowSize: o.headerRowSize,\r\n            rowSize: o.rowSize,\r\n            header: o.header,\r\n            items: o.items\r\n        };\r\n    },\r\n\r\n    setVerticalScroll: function (scrollTop) {\r\n        return this.table.setVerticalScroll(scrollTop);\r\n    },\r\n\r\n    setLeftHorizontalScroll: function (scrollLeft) {\r\n    },\r\n\r\n    setRightHorizontalScroll: function (scrollLeft) {\r\n    },\r\n\r\n    getVerticalScroll: function () {\r\n        return this.table.getVerticalScroll();\r\n    },\r\n\r\n    getRightHorizontalScroll: function () {\r\n        return this.table.getRightHorizontalScroll();\r\n    },\r\n\r\n    setWidth: function (width) {\r\n        Table.superclass.setWidth.apply(this, arguments);\r\n        this.table.setWidth(width);\r\n    },\r\n\r\n    setHeight: function (height) {\r\n        Table.superclass.setHeight.apply(this, arguments);\r\n        this.table.setHeight(height);\r\n    },\r\n\r\n    setColumnSize: function (columnSize) {\r\n        this.table.setColumnSize(columnSize);\r\n    },\r\n\r\n    getColumnSize: function () {\r\n        return this.options.columnSize;\r\n    },\r\n\r\n    populate: function (items, header) {\r\n        this.table.populate(items, header);\r\n    },\r\n\r\n    getValue: function () {\r\n        return this.innerTable.getValue();\r\n    },\r\n\r\n    restore: function () {\r\n        this.table.restore();\r\n    }\r\n});\r\nBI.shortcut(\"bi.components.table\", Table);\r\n","/**\r\n * Created by astronaut007 on 2018/10/23\r\n */\r\n!(function () {\r\n    BI.WaterMark = BI.inherit(BI.Widget, {\r\n\r\n        props: {\r\n            baseCls: \"bi-watermark\",\r\n            watermark: {},\r\n            angle: 20 // 水印倾斜度数\r\n        },\r\n\r\n        mounted: function () {\r\n            var self = this;\r\n            BI.$(this.container.paper.canvas).css({\r\n                position: \"absolute\",\r\n                zIndex: \"99999\",\r\n                pointerEvents: \"none\"\r\n            });\r\n            this.canvas = BI.Func.createEmptyCanvas();\r\n            this._paint();\r\n            BI.ResizeDetector.addResizeListener(this, function () {\r\n                self._paint();\r\n            });\r\n        },\r\n\r\n        render: function () {\r\n            var self = this, o = this.options;\r\n            this.value = BI.extend({\r\n                text: \"\",\r\n                fontSize: 12,\r\n                color: \"#999\",\r\n                horizontalGap: 200,\r\n                verticalGap: 100\r\n            }, o.watermark);\r\n            return {\r\n                type: \"bi.svg\",\r\n                ref: function (_ref) {\r\n                    self.container = _ref;\r\n                }\r\n            };\r\n        },\r\n\r\n        _initCanvas: function () {\r\n            var containerWidth = this.container.element.width(),\r\n                containerHeight = this.container.element.height();\r\n            if (containerHeight === 0 || containerWidth === 0) {\r\n                return false;\r\n            }\r\n            this.canvas.width = containerWidth;\r\n            this.canvas.height = containerHeight;\r\n            return true;\r\n        },\r\n\r\n        _initSvg: function () {\r\n            if (this.svgImage) {\r\n                this.container.clear();\r\n            }\r\n        },\r\n\r\n        _paint: function () {\r\n            if (this._initCanvas()) {\r\n                this._initSvg();\r\n                // 将离屏canvas绘制的水印转为svg中的image元素\r\n                BI.Func.paintWaterMark(this.canvas, this.value);\r\n                var imgURL = this.canvas.toDataURL(\"image/png\");\r\n                this.svgImage = this.container.image(imgURL, 0, 0, this.canvas.width, this.canvas.height);\r\n            }\r\n        },\r\n\r\n        setValue: function (value) {\r\n            this.value = BI.extend(this.value, value);\r\n            this._paint();\r\n        }\r\n    });\r\n    BI.shortcut(\"bi.watermark\", BI.WaterMark);\r\n})();\r\n","/**\r\n * Created by astronaut007 on 2018/10/23\r\n */\r\n!(function () {\r\n    BI.DivWaterMark = BI.inherit(BI.Widget, {\r\n\r\n        props: {\r\n            baseCls: \"bi-div-watermark\",\r\n            watermark: {},\r\n            angle: 20 // 水印倾斜度数\r\n        },\r\n\r\n        mounted: function () {\r\n            var self = this, o = this.options;\r\n            this.element.css({\r\n                fontSize: this.value.fontSize + \"px\",\r\n                color: this.value.color\r\n            });\r\n            this._showWatermark();\r\n            BI.ResizeDetector.addResizeListener(this, function () {\r\n                self._showWatermark();\r\n            });\r\n        },\r\n\r\n        render: function () {\r\n            var self = this, o = this.options;\r\n            this.value = BI.extend({\r\n                text: \"\",\r\n                fontSize: 12,\r\n                color: \"#999\",\r\n                horizontalGap: 200,\r\n                verticalGap: 100\r\n            }, o.watermark);\r\n            this.deg = Math.PI / 180 * this.options.angle;\r\n            this.markWidth = BI.DOM.getTextSizeWidth(this.value.text, this.value.fontSize) + this.value.horizontalGap;\r\n            return {\r\n                type: \"bi.absolute\",\r\n                ref: function (ref) {\r\n                    self.container = ref;\r\n                },\r\n                items: [{\r\n                    el: {\r\n                        type: \"bi.button_group\",\r\n                        layouts: [{\r\n                            type: \"bi.vertical\",\r\n                            bgap: this.value.verticalGap\r\n                        }],\r\n                        cls: \"watermark-container\",\r\n                        ref: function (ref) {\r\n                            self.watermarkContainer = ref;\r\n                        }\r\n                    },\r\n                    left: 0,\r\n                    top: 0,\r\n                    right: 0,\r\n                    bottom: 0\r\n                }]\r\n            };\r\n        },\r\n\r\n        setValue: function (value) {\r\n            this.value = BI.extend(this.value, value);\r\n            this._showWatermark();\r\n        },\r\n\r\n        _showWatermark: function () {\r\n            var self = this, o = this.options;\r\n            var hgap = this.value.horizontalGap;\r\n            this.markWidth = BI.DOM.getTextSizeWidth(this.value.text, this.value.fontSize) + hgap;\r\n            var items = [], actualSize = this._getContainerSize();\r\n            var textHeight = BI.DOM.getTextSizeHeight(this.value.text, this.value.fontSize);\r\n            var watermarkHeight = textHeight + this.value.verticalGap;\r\n            var col = BI.parseInt(actualSize.width / (this.markWidth));\r\n            var row = BI.parseInt(actualSize.height / (watermarkHeight));\r\n            var style = this._addFilterForOldIE();\r\n            var texts = (this.value.text + \"\").split(\"\\n\");\r\n            for (var r = 0; r < row + 3; r++) {\r\n                var rowItems = [];\r\n                for (var c = 0; c < col + 3; c++) {\r\n                    var markItem;\r\n                    if (texts.length > 1) {\r\n                        markItem = BI.createWidget({\r\n                            type: \"bi.vertical\",\r\n                            hgap: hgap / 2,\r\n                            items: BI.map(texts, function (i, text) {\r\n                                return {\r\n                                    type: \"bi.label\",\r\n                                    cls: \"watermark-text\",\r\n                                    text: text\r\n                                };\r\n                            })\r\n                        });\r\n                    } else {\r\n                        markItem = BI.createWidget({\r\n                            type: \"bi.label\",\r\n                            hgap: hgap / 2,\r\n                            cls: \"watermark-text\",\r\n                            text: this.value.text\r\n                        });\r\n                    }\r\n                    markItem.element.css(BI.extend({\r\n                        fontSize: self.value.fontSize + \"px\",\r\n                        color: self.value.color\r\n                    }, style));\r\n                    rowItems.push(markItem);\r\n                }\r\n                items.push({\r\n                    el: {\r\n                        type: \"bi.horizontal\",\r\n                        scrollx: false,\r\n                        items: rowItems\r\n                    },\r\n                    lgap: r % 2 === 0 ? -(this.markWidth / 2) : 0\r\n                });\r\n            }\r\n            this.watermarkContainer.populate(items);\r\n\r\n            this.container.attr(\"items\")[0].left = -this._getContainerLeft();\r\n            this.container.attr(\"items\")[0].right = -this.markWidth;\r\n            this.container.attr(\"items\")[0].bottom = -this._getContainerBottom();\r\n            this.container.resize();\r\n        },\r\n\r\n        _addFilterForOldIE: function () {\r\n            if (BI.isIE9Below()) {\r\n                var rad = -this.deg;\r\n                var m11 = Math.cos(rad),\r\n                    m12 = -1 * Math.sin(rad),\r\n                    m21 = Math.sin(rad),\r\n                    m22 = m11;\r\n\r\n                var filters = \"progid:DXImageTransform.Microsoft.Chroma(color='white') progid:DXImageTransform.Microsoft.Matrix(M11=\" + m11 +\r\n          \",M12=\" + m12 +\r\n          \",M21=\" + m21 +\r\n          \",M22=\" + m22 +\r\n          \",SizingMethod='auto expand')\";\r\n                return {\r\n                    filter: filters\r\n                };\r\n            }\r\n            return {};\r\n        },\r\n\r\n        _getContainerSize: function () {\r\n            var height = this.element.height(), width = this.element.width();\r\n            return {\r\n                width: width * Math.cos(this.deg) + height * Math.sin(this.deg),\r\n                height: width * Math.sin(this.deg) + height / Math.cos(this.deg)\r\n            };\r\n        },\r\n\r\n        _getContainerLeft: function () {\r\n            var height = this.element.height();\r\n            return height * Math.tan(Math.PI / 180 * 20);\r\n        },\r\n\r\n        _getContainerBottom: function () {\r\n            return this._getContainerSize().height - this.element.height();\r\n        }\r\n    });\r\n    BI.shortcut(\"bi.div.watermark\", BI.DivWaterMark);\r\n})();","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\nmodule.exports = function(src) {\n\tfunction log(error) {\n\t\t(typeof console !== \"undefined\")\n\t\t&& (console.error || console.log)(\"[Script Loader]\", error);\n\t}\n\n\t// Check for IE =< 8\n\tfunction isIE() {\n\t\treturn typeof attachEvent !== \"undefined\" && typeof addEventListener === \"undefined\";\n\t}\n\n\ttry {\n\t\tif (typeof execScript !== \"undefined\" && isIE()) {\n\t\t\texecScript(src);\n\t\t} else if (typeof eval !== \"undefined\") {\n\t\t\teval.call(null, src);\n\t\t} else {\n\t\t\tlog(\"EvalError: No eval function available\");\n\t\t}\n\t} catch (error) {\n\t\tlog(error);\n\t}\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.VERSION = void 0;\n// needs a separate module as this is required inside chevrotain productive code\n// and also in the entry point for webpack(api.ts).\n// A separate file avoids cyclic dependencies and webpack errors.\nexports.VERSION = \"10.3.0\";\n","/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nmodule.exports = overArg;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nmodule.exports = toSource;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Set = getNative(root, 'Set');\n\nmodule.exports = Set;\n","var baseIsEqualDeep = require('./_baseIsEqualDeep'),\n    isObjectLike = require('./isObjectLike');\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Unordered comparison\n *  2 - Partial comparison\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, bitmask, customizer, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n}\n\nmodule.exports = baseIsEqual;\n","var SetCache = require('./_SetCache'),\n    arraySome = require('./_arraySome'),\n    cacheHas = require('./_cacheHas');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Check that cyclic values are equal.\n  var arrStacked = stack.get(array);\n  var othStacked = stack.get(other);\n  if (arrStacked && othStacked) {\n    return arrStacked == other && othStacked == array;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!cacheHas(seen, othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n              return seen.push(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, bitmask, customizer, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\nmodule.exports = equalArrays;\n","/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nmodule.exports = arraySome;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Uint8Array = root.Uint8Array;\n\nmodule.exports = Uint8Array;\n","var baseGetAllKeys = require('./_baseGetAllKeys'),\n    getSymbols = require('./_getSymbols'),\n    keys = require('./keys');\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\nmodule.exports = getAllKeys;\n","var arrayPush = require('./_arrayPush'),\n    isArray = require('./isArray');\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\nmodule.exports = baseGetAllKeys;\n","/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\nmodule.exports = stubArray;\n","var baseTimes = require('./_baseTimes'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isIndex = require('./_isIndex'),\n    isTypedArray = require('./isTypedArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayLikeKeys;\n","var isObject = require('./isObject');\n\n/**\n * Checks if `value` is suitable for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` if suitable for strict\n *  equality comparisons, else `false`.\n */\nfunction isStrictComparable(value) {\n  return value === value && !isObject(value);\n}\n\nmodule.exports = isStrictComparable;\n","/**\n * A specialized version of `matchesProperty` for source values suitable\n * for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction matchesStrictComparable(key, srcValue) {\n  return function(object) {\n    if (object == null) {\n      return false;\n    }\n    return object[key] === srcValue &&\n      (srcValue !== undefined || (key in Object(object)));\n  };\n}\n\nmodule.exports = matchesStrictComparable;\n","var baseToString = require('./_baseToString');\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\nmodule.exports = toString;\n","var castPath = require('./_castPath'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isIndex = require('./_isIndex'),\n    isLength = require('./isLength'),\n    toKey = require('./_toKey');\n\n/**\n * Checks if `path` exists on `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @param {Function} hasFunc The function to check properties.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n */\nfunction hasPath(object, path, hasFunc) {\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length,\n      result = false;\n\n  while (++index < length) {\n    var key = toKey(path[index]);\n    if (!(result = object != null && hasFunc(object, key))) {\n      break;\n    }\n    object = object[key];\n  }\n  if (result || ++index != length) {\n    return result;\n  }\n  length = object == null ? 0 : object.length;\n  return !!length && isLength(length) && isIndex(key, length) &&\n    (isArray(object) || isArguments(object));\n}\n\nmodule.exports = hasPath;\n","/**\n * The base implementation of `_.property` without support for deep paths.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction baseProperty(key) {\n  return function(object) {\n    return object == null ? undefined : object[key];\n  };\n}\n\nmodule.exports = baseProperty;\n","/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\nmodule.exports = arrayEach;\n","var getNative = require('./_getNative');\n\nvar defineProperty = (function() {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\nmodule.exports = defineProperty;\n","var arrayPush = require('./_arrayPush'),\n    getPrototype = require('./_getPrototype'),\n    getSymbols = require('./_getSymbols'),\n    stubArray = require('./stubArray');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own and inherited enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbolsIn = !nativeGetSymbols ? stubArray : function(object) {\n  var result = [];\n  while (object) {\n    arrayPush(result, getSymbols(object));\n    object = getPrototype(object);\n  }\n  return result;\n};\n\nmodule.exports = getSymbolsIn;\n","var overArg = require('./_overArg');\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\nmodule.exports = getPrototype;\n","var baseGetAllKeys = require('./_baseGetAllKeys'),\n    getSymbolsIn = require('./_getSymbolsIn'),\n    keysIn = require('./keysIn');\n\n/**\n * Creates an array of own and inherited enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeysIn(object) {\n  return baseGetAllKeys(object, keysIn, getSymbolsIn);\n}\n\nmodule.exports = getAllKeysIn;\n","var baseIsRegExp = require('./_baseIsRegExp'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsRegExp = nodeUtil && nodeUtil.isRegExp;\n\n/**\n * Checks if `value` is classified as a `RegExp` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a regexp, else `false`.\n * @example\n *\n * _.isRegExp(/abc/);\n * // => true\n *\n * _.isRegExp('/abc/');\n * // => false\n */\nvar isRegExp = nodeIsRegExp ? baseUnary(nodeIsRegExp) : baseIsRegExp;\n\nmodule.exports = isRegExp;\n","var arrayMap = require('./_arrayMap'),\n    baseIteratee = require('./_baseIteratee'),\n    basePickBy = require('./_basePickBy'),\n    getAllKeysIn = require('./_getAllKeysIn');\n\n/**\n * Creates an object composed of the `object` properties `predicate` returns\n * truthy for. The predicate is invoked with two arguments: (value, key).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The source object.\n * @param {Function} [predicate=_.identity] The function invoked per property.\n * @returns {Object} Returns the new object.\n * @example\n *\n * var object = { 'a': 1, 'b': '2', 'c': 3 };\n *\n * _.pickBy(object, _.isNumber);\n * // => { 'a': 1, 'c': 3 }\n */\nfunction pickBy(object, predicate) {\n  if (object == null) {\n    return {};\n  }\n  var props = arrayMap(getAllKeysIn(object), function(prop) {\n    return [prop];\n  });\n  predicate = baseIteratee(predicate);\n  return basePickBy(object, props, function(value, path) {\n    return predicate(value, path[0]);\n  });\n}\n\nmodule.exports = pickBy;\n","/**\n * The base implementation of `_.findIndex` and `_.findLastIndex` without\n * support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} predicate The function invoked per iteration.\n * @param {number} fromIndex The index to search from.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseFindIndex(array, predicate, fromIndex, fromRight) {\n  var length = array.length,\n      index = fromIndex + (fromRight ? 1 : -1);\n\n  while ((fromRight ? index-- : ++index < length)) {\n    if (predicate(array[index], index, array)) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = baseFindIndex;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.firstForTerminal = exports.firstForBranching = exports.firstForSequence = exports.first = void 0;\nvar flatten_1 = __importDefault(require(\"lodash/flatten\"));\nvar uniq_1 = __importDefault(require(\"lodash/uniq\"));\nvar map_1 = __importDefault(require(\"lodash/map\"));\nvar gast_1 = require(\"@chevrotain/gast\");\nvar gast_2 = require(\"@chevrotain/gast\");\nfunction first(prod) {\n    /* istanbul ignore else */\n    if (prod instanceof gast_1.NonTerminal) {\n        // this could in theory cause infinite loops if\n        // (1) prod A refs prod B.\n        // (2) prod B refs prod A\n        // (3) AB can match the empty set\n        // in other words a cycle where everything is optional so the first will keep\n        // looking ahead for the next optional part and will never exit\n        // currently there is no safeguard for this unique edge case because\n        // (1) not sure a grammar in which this can happen is useful for anything (productive)\n        return first(prod.referencedRule);\n    }\n    else if (prod instanceof gast_1.Terminal) {\n        return firstForTerminal(prod);\n    }\n    else if ((0, gast_2.isSequenceProd)(prod)) {\n        return firstForSequence(prod);\n    }\n    else if ((0, gast_2.isBranchingProd)(prod)) {\n        return firstForBranching(prod);\n    }\n    else {\n        throw Error(\"non exhaustive match\");\n    }\n}\nexports.first = first;\nfunction firstForSequence(prod) {\n    var firstSet = [];\n    var seq = prod.definition;\n    var nextSubProdIdx = 0;\n    var hasInnerProdsRemaining = seq.length > nextSubProdIdx;\n    var currSubProd;\n    // so we enter the loop at least once (if the definition is not empty\n    var isLastInnerProdOptional = true;\n    // scan a sequence until it's end or until we have found a NONE optional production in it\n    while (hasInnerProdsRemaining && isLastInnerProdOptional) {\n        currSubProd = seq[nextSubProdIdx];\n        isLastInnerProdOptional = (0, gast_2.isOptionalProd)(currSubProd);\n        firstSet = firstSet.concat(first(currSubProd));\n        nextSubProdIdx = nextSubProdIdx + 1;\n        hasInnerProdsRemaining = seq.length > nextSubProdIdx;\n    }\n    return (0, uniq_1.default)(firstSet);\n}\nexports.firstForSequence = firstForSequence;\nfunction firstForBranching(prod) {\n    var allAlternativesFirsts = (0, map_1.default)(prod.definition, function (innerProd) {\n        return first(innerProd);\n    });\n    return (0, uniq_1.default)((0, flatten_1.default)(allAlternativesFirsts));\n}\nexports.firstForBranching = firstForBranching;\nfunction firstForTerminal(terminal) {\n    return [terminal.terminalType];\n}\nexports.firstForTerminal = firstForTerminal;\n","var baseIndexOf = require('./_baseIndexOf');\n\n/**\n * A specialized version of `_.includes` for arrays without support for\n * specifying an index to search from.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludes(array, value) {\n  var length = array == null ? 0 : array.length;\n  return !!length && baseIndexOf(array, value, 0) > -1;\n}\n\nmodule.exports = arrayIncludes;\n","/**\n * This function is like `arrayIncludes` except that it accepts a comparator.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @param {Function} comparator The comparator invoked per element.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludesWith(array, value, comparator) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (comparator(value, array[index])) {\n      return true;\n    }\n  }\n  return false;\n}\n\nmodule.exports = arrayIncludesWith;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.IN = void 0;\n// TODO: can this be removed? where is it used?\nexports.IN = \"_~IN~_\";\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.charCodeToOptimizedIndex = exports.minOptimizationVal = exports.buildLineBreakIssueMessage = exports.LineTerminatorOptimizedTester = exports.isShortPattern = exports.isCustomPattern = exports.cloneEmptyGroups = exports.performWarningRuntimeChecks = exports.performRuntimeChecks = exports.addStickyFlag = exports.addStartOfInput = exports.findUnreachablePatterns = exports.findModesThatDoNotExist = exports.findInvalidGroupType = exports.findDuplicatePatterns = exports.findUnsupportedFlags = exports.findStartOfInputAnchor = exports.findEmptyMatchRegExps = exports.findEndOfInputAnchor = exports.findInvalidPatterns = exports.findMissingPatterns = exports.validatePatterns = exports.analyzeTokenTypes = exports.enableSticky = exports.disableSticky = exports.SUPPORT_STICKY = exports.MODES = exports.DEFAULT_MODE = void 0;\nvar regexp_to_ast_1 = require(\"regexp-to-ast\");\nvar lexer_public_1 = require(\"./lexer_public\");\nvar first_1 = __importDefault(require(\"lodash/first\"));\nvar isEmpty_1 = __importDefault(require(\"lodash/isEmpty\"));\nvar compact_1 = __importDefault(require(\"lodash/compact\"));\nvar isArray_1 = __importDefault(require(\"lodash/isArray\"));\nvar values_1 = __importDefault(require(\"lodash/values\"));\nvar flatten_1 = __importDefault(require(\"lodash/flatten\"));\nvar reject_1 = __importDefault(require(\"lodash/reject\"));\nvar difference_1 = __importDefault(require(\"lodash/difference\"));\nvar indexOf_1 = __importDefault(require(\"lodash/indexOf\"));\nvar map_1 = __importDefault(require(\"lodash/map\"));\nvar forEach_1 = __importDefault(require(\"lodash/forEach\"));\nvar isString_1 = __importDefault(require(\"lodash/isString\"));\nvar isFunction_1 = __importDefault(require(\"lodash/isFunction\"));\nvar isUndefined_1 = __importDefault(require(\"lodash/isUndefined\"));\nvar find_1 = __importDefault(require(\"lodash/find\"));\nvar has_1 = __importDefault(require(\"lodash/has\"));\nvar keys_1 = __importDefault(require(\"lodash/keys\"));\nvar isRegExp_1 = __importDefault(require(\"lodash/isRegExp\"));\nvar filter_1 = __importDefault(require(\"lodash/filter\"));\nvar defaults_1 = __importDefault(require(\"lodash/defaults\"));\nvar reduce_1 = __importDefault(require(\"lodash/reduce\"));\nvar includes_1 = __importDefault(require(\"lodash/includes\"));\nvar utils_1 = require(\"@chevrotain/utils\");\nvar reg_exp_1 = require(\"./reg_exp\");\nvar reg_exp_parser_1 = require(\"./reg_exp_parser\");\nvar PATTERN = \"PATTERN\";\nexports.DEFAULT_MODE = \"defaultMode\";\nexports.MODES = \"modes\";\nexports.SUPPORT_STICKY = typeof new RegExp(\"(?:)\").sticky === \"boolean\";\nfunction disableSticky() {\n    exports.SUPPORT_STICKY = false;\n}\nexports.disableSticky = disableSticky;\nfunction enableSticky() {\n    exports.SUPPORT_STICKY = true;\n}\nexports.enableSticky = enableSticky;\nfunction analyzeTokenTypes(tokenTypes, options) {\n    options = (0, defaults_1.default)(options, {\n        useSticky: exports.SUPPORT_STICKY,\n        debug: false,\n        safeMode: false,\n        positionTracking: \"full\",\n        lineTerminatorCharacters: [\"\\r\", \"\\n\"],\n        tracer: function (msg, action) { return action(); }\n    });\n    var tracer = options.tracer;\n    tracer(\"initCharCodeToOptimizedIndexMap\", function () {\n        initCharCodeToOptimizedIndexMap();\n    });\n    var onlyRelevantTypes;\n    tracer(\"Reject Lexer.NA\", function () {\n        onlyRelevantTypes = (0, reject_1.default)(tokenTypes, function (currType) {\n            return currType[PATTERN] === lexer_public_1.Lexer.NA;\n        });\n    });\n    var hasCustom = false;\n    var allTransformedPatterns;\n    tracer(\"Transform Patterns\", function () {\n        hasCustom = false;\n        allTransformedPatterns = (0, map_1.default)(onlyRelevantTypes, function (currType) {\n            var currPattern = currType[PATTERN];\n            /* istanbul ignore else */\n            if ((0, isRegExp_1.default)(currPattern)) {\n                var regExpSource = currPattern.source;\n                if (regExpSource.length === 1 &&\n                    // only these regExp meta characters which can appear in a length one regExp\n                    regExpSource !== \"^\" &&\n                    regExpSource !== \"$\" &&\n                    regExpSource !== \".\" &&\n                    !currPattern.ignoreCase) {\n                    return regExpSource;\n                }\n                else if (regExpSource.length === 2 &&\n                    regExpSource[0] === \"\\\\\" &&\n                    // not a meta character\n                    !(0, includes_1.default)([\n                        \"d\",\n                        \"D\",\n                        \"s\",\n                        \"S\",\n                        \"t\",\n                        \"r\",\n                        \"n\",\n                        \"t\",\n                        \"0\",\n                        \"c\",\n                        \"b\",\n                        \"B\",\n                        \"f\",\n                        \"v\",\n                        \"w\",\n                        \"W\"\n                    ], regExpSource[1])) {\n                    // escaped meta Characters: /\\+/ /\\[/\n                    // or redundant escaping: /\\a/\n                    // without the escaping \"\\\"\n                    return regExpSource[1];\n                }\n                else {\n                    return options.useSticky\n                        ? addStickyFlag(currPattern)\n                        : addStartOfInput(currPattern);\n                }\n            }\n            else if ((0, isFunction_1.default)(currPattern)) {\n                hasCustom = true;\n                // CustomPatternMatcherFunc - custom patterns do not require any transformations, only wrapping in a RegExp Like object\n                return { exec: currPattern };\n            }\n            else if (typeof currPattern === \"object\") {\n                hasCustom = true;\n                // ICustomPattern\n                return currPattern;\n            }\n            else if (typeof currPattern === \"string\") {\n                if (currPattern.length === 1) {\n                    return currPattern;\n                }\n                else {\n                    var escapedRegExpString = currPattern.replace(/[\\\\^$.*+?()[\\]{}|]/g, \"\\\\$&\");\n                    var wrappedRegExp = new RegExp(escapedRegExpString);\n                    return options.useSticky\n                        ? addStickyFlag(wrappedRegExp)\n                        : addStartOfInput(wrappedRegExp);\n                }\n            }\n            else {\n                throw Error(\"non exhaustive match\");\n            }\n        });\n    });\n    var patternIdxToType;\n    var patternIdxToGroup;\n    var patternIdxToLongerAltIdxArr;\n    var patternIdxToPushMode;\n    var patternIdxToPopMode;\n    tracer(\"misc mapping\", function () {\n        patternIdxToType = (0, map_1.default)(onlyRelevantTypes, function (currType) { return currType.tokenTypeIdx; });\n        patternIdxToGroup = (0, map_1.default)(onlyRelevantTypes, function (clazz) {\n            var groupName = clazz.GROUP;\n            /* istanbul ignore next */\n            if (groupName === lexer_public_1.Lexer.SKIPPED) {\n                return undefined;\n            }\n            else if ((0, isString_1.default)(groupName)) {\n                return groupName;\n            }\n            else if ((0, isUndefined_1.default)(groupName)) {\n                return false;\n            }\n            else {\n                throw Error(\"non exhaustive match\");\n            }\n        });\n        patternIdxToLongerAltIdxArr = (0, map_1.default)(onlyRelevantTypes, function (clazz) {\n            var longerAltType = clazz.LONGER_ALT;\n            if (longerAltType) {\n                var longerAltIdxArr = (0, isArray_1.default)(longerAltType)\n                    ? (0, map_1.default)(longerAltType, function (type) { return (0, indexOf_1.default)(onlyRelevantTypes, type); })\n                    : [(0, indexOf_1.default)(onlyRelevantTypes, longerAltType)];\n                return longerAltIdxArr;\n            }\n        });\n        patternIdxToPushMode = (0, map_1.default)(onlyRelevantTypes, function (clazz) { return clazz.PUSH_MODE; });\n        patternIdxToPopMode = (0, map_1.default)(onlyRelevantTypes, function (clazz) {\n            return (0, has_1.default)(clazz, \"POP_MODE\");\n        });\n    });\n    var patternIdxToCanLineTerminator;\n    tracer(\"Line Terminator Handling\", function () {\n        var lineTerminatorCharCodes = getCharCodes(options.lineTerminatorCharacters);\n        patternIdxToCanLineTerminator = (0, map_1.default)(onlyRelevantTypes, function (tokType) { return false; });\n        if (options.positionTracking !== \"onlyOffset\") {\n            patternIdxToCanLineTerminator = (0, map_1.default)(onlyRelevantTypes, function (tokType) {\n                if ((0, has_1.default)(tokType, \"LINE_BREAKS\")) {\n                    return !!tokType.LINE_BREAKS;\n                }\n                else {\n                    return (checkLineBreaksIssues(tokType, lineTerminatorCharCodes) === false &&\n                        (0, reg_exp_1.canMatchCharCode)(lineTerminatorCharCodes, tokType.PATTERN));\n                }\n            });\n        }\n    });\n    var patternIdxToIsCustom;\n    var patternIdxToShort;\n    var emptyGroups;\n    var patternIdxToConfig;\n    tracer(\"Misc Mapping #2\", function () {\n        patternIdxToIsCustom = (0, map_1.default)(onlyRelevantTypes, isCustomPattern);\n        patternIdxToShort = (0, map_1.default)(allTransformedPatterns, isShortPattern);\n        emptyGroups = (0, reduce_1.default)(onlyRelevantTypes, function (acc, clazz) {\n            var groupName = clazz.GROUP;\n            if ((0, isString_1.default)(groupName) && !(groupName === lexer_public_1.Lexer.SKIPPED)) {\n                acc[groupName] = [];\n            }\n            return acc;\n        }, {});\n        patternIdxToConfig = (0, map_1.default)(allTransformedPatterns, function (x, idx) {\n            return {\n                pattern: allTransformedPatterns[idx],\n                longerAlt: patternIdxToLongerAltIdxArr[idx],\n                canLineTerminator: patternIdxToCanLineTerminator[idx],\n                isCustom: patternIdxToIsCustom[idx],\n                short: patternIdxToShort[idx],\n                group: patternIdxToGroup[idx],\n                push: patternIdxToPushMode[idx],\n                pop: patternIdxToPopMode[idx],\n                tokenTypeIdx: patternIdxToType[idx],\n                tokenType: onlyRelevantTypes[idx]\n            };\n        });\n    });\n    var canBeOptimized = true;\n    var charCodeToPatternIdxToConfig = [];\n    if (!options.safeMode) {\n        tracer(\"First Char Optimization\", function () {\n            charCodeToPatternIdxToConfig = (0, reduce_1.default)(onlyRelevantTypes, function (result, currTokType, idx) {\n                if (typeof currTokType.PATTERN === \"string\") {\n                    var charCode = currTokType.PATTERN.charCodeAt(0);\n                    var optimizedIdx = charCodeToOptimizedIndex(charCode);\n                    addToMapOfArrays(result, optimizedIdx, patternIdxToConfig[idx]);\n                }\n                else if ((0, isArray_1.default)(currTokType.START_CHARS_HINT)) {\n                    var lastOptimizedIdx_1;\n                    (0, forEach_1.default)(currTokType.START_CHARS_HINT, function (charOrInt) {\n                        var charCode = typeof charOrInt === \"string\"\n                            ? charOrInt.charCodeAt(0)\n                            : charOrInt;\n                        var currOptimizedIdx = charCodeToOptimizedIndex(charCode);\n                        // Avoid adding the config multiple times\n                        /* istanbul ignore else */\n                        // - Difficult to check this scenario effects as it is only a performance\n                        //   optimization that does not change correctness\n                        if (lastOptimizedIdx_1 !== currOptimizedIdx) {\n                            lastOptimizedIdx_1 = currOptimizedIdx;\n                            addToMapOfArrays(result, currOptimizedIdx, patternIdxToConfig[idx]);\n                        }\n                    });\n                }\n                else if ((0, isRegExp_1.default)(currTokType.PATTERN)) {\n                    if (currTokType.PATTERN.unicode) {\n                        canBeOptimized = false;\n                        if (options.ensureOptimizations) {\n                            (0, utils_1.PRINT_ERROR)(\"\".concat(reg_exp_1.failedOptimizationPrefixMsg) +\n                                \"\\tUnable to analyze < \".concat(currTokType.PATTERN.toString(), \" > pattern.\\n\") +\n                                \"\\tThe regexp unicode flag is not currently supported by the regexp-to-ast library.\\n\" +\n                                \"\\tThis will disable the lexer's first char optimizations.\\n\" +\n                                \"\\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE\");\n                        }\n                    }\n                    else {\n                        var optimizedCodes = (0, reg_exp_1.getOptimizedStartCodesIndices)(currTokType.PATTERN, options.ensureOptimizations);\n                        /* istanbul ignore if */\n                        // start code will only be empty given an empty regExp or failure of regexp-to-ast library\n                        // the first should be a different validation and the second cannot be tested.\n                        if ((0, isEmpty_1.default)(optimizedCodes)) {\n                            // we cannot understand what codes may start possible matches\n                            // The optimization correctness requires knowing start codes for ALL patterns.\n                            // Not actually sure this is an error, no debug message\n                            canBeOptimized = false;\n                        }\n                        (0, forEach_1.default)(optimizedCodes, function (code) {\n                            addToMapOfArrays(result, code, patternIdxToConfig[idx]);\n                        });\n                    }\n                }\n                else {\n                    if (options.ensureOptimizations) {\n                        (0, utils_1.PRINT_ERROR)(\"\".concat(reg_exp_1.failedOptimizationPrefixMsg) +\n                            \"\\tTokenType: <\".concat(currTokType.name, \"> is using a custom token pattern without providing <start_chars_hint> parameter.\\n\") +\n                            \"\\tThis will disable the lexer's first char optimizations.\\n\" +\n                            \"\\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE\");\n                    }\n                    canBeOptimized = false;\n                }\n                return result;\n            }, []);\n        });\n    }\n    return {\n        emptyGroups: emptyGroups,\n        patternIdxToConfig: patternIdxToConfig,\n        charCodeToPatternIdxToConfig: charCodeToPatternIdxToConfig,\n        hasCustom: hasCustom,\n        canBeOptimized: canBeOptimized\n    };\n}\nexports.analyzeTokenTypes = analyzeTokenTypes;\nfunction validatePatterns(tokenTypes, validModesNames) {\n    var errors = [];\n    var missingResult = findMissingPatterns(tokenTypes);\n    errors = errors.concat(missingResult.errors);\n    var invalidResult = findInvalidPatterns(missingResult.valid);\n    var validTokenTypes = invalidResult.valid;\n    errors = errors.concat(invalidResult.errors);\n    errors = errors.concat(validateRegExpPattern(validTokenTypes));\n    errors = errors.concat(findInvalidGroupType(validTokenTypes));\n    errors = errors.concat(findModesThatDoNotExist(validTokenTypes, validModesNames));\n    errors = errors.concat(findUnreachablePatterns(validTokenTypes));\n    return errors;\n}\nexports.validatePatterns = validatePatterns;\nfunction validateRegExpPattern(tokenTypes) {\n    var errors = [];\n    var withRegExpPatterns = (0, filter_1.default)(tokenTypes, function (currTokType) {\n        return (0, isRegExp_1.default)(currTokType[PATTERN]);\n    });\n    errors = errors.concat(findEndOfInputAnchor(withRegExpPatterns));\n    errors = errors.concat(findStartOfInputAnchor(withRegExpPatterns));\n    errors = errors.concat(findUnsupportedFlags(withRegExpPatterns));\n    errors = errors.concat(findDuplicatePatterns(withRegExpPatterns));\n    errors = errors.concat(findEmptyMatchRegExps(withRegExpPatterns));\n    return errors;\n}\nfunction findMissingPatterns(tokenTypes) {\n    var tokenTypesWithMissingPattern = (0, filter_1.default)(tokenTypes, function (currType) {\n        return !(0, has_1.default)(currType, PATTERN);\n    });\n    var errors = (0, map_1.default)(tokenTypesWithMissingPattern, function (currType) {\n        return {\n            message: \"Token Type: ->\" +\n                currType.name +\n                \"<- missing static 'PATTERN' property\",\n            type: lexer_public_1.LexerDefinitionErrorType.MISSING_PATTERN,\n            tokenTypes: [currType]\n        };\n    });\n    var valid = (0, difference_1.default)(tokenTypes, tokenTypesWithMissingPattern);\n    return { errors: errors, valid: valid };\n}\nexports.findMissingPatterns = findMissingPatterns;\nfunction findInvalidPatterns(tokenTypes) {\n    var tokenTypesWithInvalidPattern = (0, filter_1.default)(tokenTypes, function (currType) {\n        var pattern = currType[PATTERN];\n        return (!(0, isRegExp_1.default)(pattern) &&\n            !(0, isFunction_1.default)(pattern) &&\n            !(0, has_1.default)(pattern, \"exec\") &&\n            !(0, isString_1.default)(pattern));\n    });\n    var errors = (0, map_1.default)(tokenTypesWithInvalidPattern, function (currType) {\n        return {\n            message: \"Token Type: ->\" +\n                currType.name +\n                \"<- static 'PATTERN' can only be a RegExp, a\" +\n                \" Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.\",\n            type: lexer_public_1.LexerDefinitionErrorType.INVALID_PATTERN,\n            tokenTypes: [currType]\n        };\n    });\n    var valid = (0, difference_1.default)(tokenTypes, tokenTypesWithInvalidPattern);\n    return { errors: errors, valid: valid };\n}\nexports.findInvalidPatterns = findInvalidPatterns;\nvar end_of_input = /[^\\\\][$]/;\nfunction findEndOfInputAnchor(tokenTypes) {\n    var EndAnchorFinder = /** @class */ (function (_super) {\n        __extends(EndAnchorFinder, _super);\n        function EndAnchorFinder() {\n            var _this = _super !== null && _super.apply(this, arguments) || this;\n            _this.found = false;\n            return _this;\n        }\n        EndAnchorFinder.prototype.visitEndAnchor = function (node) {\n            this.found = true;\n        };\n        return EndAnchorFinder;\n    }(regexp_to_ast_1.BaseRegExpVisitor));\n    var invalidRegex = (0, filter_1.default)(tokenTypes, function (currType) {\n        var pattern = currType.PATTERN;\n        try {\n            var regexpAst = (0, reg_exp_parser_1.getRegExpAst)(pattern);\n            var endAnchorVisitor = new EndAnchorFinder();\n            endAnchorVisitor.visit(regexpAst);\n            return endAnchorVisitor.found;\n        }\n        catch (e) {\n            // old behavior in case of runtime exceptions with regexp-to-ast.\n            /* istanbul ignore next - cannot ensure an error in regexp-to-ast*/\n            return end_of_input.test(pattern.source);\n        }\n    });\n    var errors = (0, map_1.default)(invalidRegex, function (currType) {\n        return {\n            message: \"Unexpected RegExp Anchor Error:\\n\" +\n                \"\\tToken Type: ->\" +\n                currType.name +\n                \"<- static 'PATTERN' cannot contain end of input anchor '$'\\n\" +\n                \"\\tSee chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS\" +\n                \"\\tfor details.\",\n            type: lexer_public_1.LexerDefinitionErrorType.EOI_ANCHOR_FOUND,\n            tokenTypes: [currType]\n        };\n    });\n    return errors;\n}\nexports.findEndOfInputAnchor = findEndOfInputAnchor;\nfunction findEmptyMatchRegExps(tokenTypes) {\n    var matchesEmptyString = (0, filter_1.default)(tokenTypes, function (currType) {\n        var pattern = currType.PATTERN;\n        return pattern.test(\"\");\n    });\n    var errors = (0, map_1.default)(matchesEmptyString, function (currType) {\n        return {\n            message: \"Token Type: ->\" +\n                currType.name +\n                \"<- static 'PATTERN' must not match an empty string\",\n            type: lexer_public_1.LexerDefinitionErrorType.EMPTY_MATCH_PATTERN,\n            tokenTypes: [currType]\n        };\n    });\n    return errors;\n}\nexports.findEmptyMatchRegExps = findEmptyMatchRegExps;\nvar start_of_input = /[^\\\\[][\\^]|^\\^/;\nfunction findStartOfInputAnchor(tokenTypes) {\n    var StartAnchorFinder = /** @class */ (function (_super) {\n        __extends(StartAnchorFinder, _super);\n        function StartAnchorFinder() {\n            var _this = _super !== null && _super.apply(this, arguments) || this;\n            _this.found = false;\n            return _this;\n        }\n        StartAnchorFinder.prototype.visitStartAnchor = function (node) {\n            this.found = true;\n        };\n        return StartAnchorFinder;\n    }(regexp_to_ast_1.BaseRegExpVisitor));\n    var invalidRegex = (0, filter_1.default)(tokenTypes, function (currType) {\n        var pattern = currType.PATTERN;\n        try {\n            var regexpAst = (0, reg_exp_parser_1.getRegExpAst)(pattern);\n            var startAnchorVisitor = new StartAnchorFinder();\n            startAnchorVisitor.visit(regexpAst);\n            return startAnchorVisitor.found;\n        }\n        catch (e) {\n            // old behavior in case of runtime exceptions with regexp-to-ast.\n            /* istanbul ignore next - cannot ensure an error in regexp-to-ast*/\n            return start_of_input.test(pattern.source);\n        }\n    });\n    var errors = (0, map_1.default)(invalidRegex, function (currType) {\n        return {\n            message: \"Unexpected RegExp Anchor Error:\\n\" +\n                \"\\tToken Type: ->\" +\n                currType.name +\n                \"<- static 'PATTERN' cannot contain start of input anchor '^'\\n\" +\n                \"\\tSee https://chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS\" +\n                \"\\tfor details.\",\n            type: lexer_public_1.LexerDefinitionErrorType.SOI_ANCHOR_FOUND,\n            tokenTypes: [currType]\n        };\n    });\n    return errors;\n}\nexports.findStartOfInputAnchor = findStartOfInputAnchor;\nfunction findUnsupportedFlags(tokenTypes) {\n    var invalidFlags = (0, filter_1.default)(tokenTypes, function (currType) {\n        var pattern = currType[PATTERN];\n        return pattern instanceof RegExp && (pattern.multiline || pattern.global);\n    });\n    var errors = (0, map_1.default)(invalidFlags, function (currType) {\n        return {\n            message: \"Token Type: ->\" +\n                currType.name +\n                \"<- static 'PATTERN' may NOT contain global('g') or multiline('m')\",\n            type: lexer_public_1.LexerDefinitionErrorType.UNSUPPORTED_FLAGS_FOUND,\n            tokenTypes: [currType]\n        };\n    });\n    return errors;\n}\nexports.findUnsupportedFlags = findUnsupportedFlags;\n// This can only test for identical duplicate RegExps, not semantically equivalent ones.\nfunction findDuplicatePatterns(tokenTypes) {\n    var found = [];\n    var identicalPatterns = (0, map_1.default)(tokenTypes, function (outerType) {\n        return (0, reduce_1.default)(tokenTypes, function (result, innerType) {\n            if (outerType.PATTERN.source === innerType.PATTERN.source &&\n                !(0, includes_1.default)(found, innerType) &&\n                innerType.PATTERN !== lexer_public_1.Lexer.NA) {\n                // this avoids duplicates in the result, each Token Type may only appear in one \"set\"\n                // in essence we are creating Equivalence classes on equality relation.\n                found.push(innerType);\n                result.push(innerType);\n                return result;\n            }\n            return result;\n        }, []);\n    });\n    identicalPatterns = (0, compact_1.default)(identicalPatterns);\n    var duplicatePatterns = (0, filter_1.default)(identicalPatterns, function (currIdenticalSet) {\n        return currIdenticalSet.length > 1;\n    });\n    var errors = (0, map_1.default)(duplicatePatterns, function (setOfIdentical) {\n        var tokenTypeNames = (0, map_1.default)(setOfIdentical, function (currType) {\n            return currType.name;\n        });\n        var dupPatternSrc = (0, first_1.default)(setOfIdentical).PATTERN;\n        return {\n            message: \"The same RegExp pattern ->\".concat(dupPatternSrc, \"<-\") +\n                \"has been used in all of the following Token Types: \".concat(tokenTypeNames.join(\", \"), \" <-\"),\n            type: lexer_public_1.LexerDefinitionErrorType.DUPLICATE_PATTERNS_FOUND,\n            tokenTypes: setOfIdentical\n        };\n    });\n    return errors;\n}\nexports.findDuplicatePatterns = findDuplicatePatterns;\nfunction findInvalidGroupType(tokenTypes) {\n    var invalidTypes = (0, filter_1.default)(tokenTypes, function (clazz) {\n        if (!(0, has_1.default)(clazz, \"GROUP\")) {\n            return false;\n        }\n        var group = clazz.GROUP;\n        return group !== lexer_public_1.Lexer.SKIPPED && group !== lexer_public_1.Lexer.NA && !(0, isString_1.default)(group);\n    });\n    var errors = (0, map_1.default)(invalidTypes, function (currType) {\n        return {\n            message: \"Token Type: ->\" +\n                currType.name +\n                \"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String\",\n            type: lexer_public_1.LexerDefinitionErrorType.INVALID_GROUP_TYPE_FOUND,\n            tokenTypes: [currType]\n        };\n    });\n    return errors;\n}\nexports.findInvalidGroupType = findInvalidGroupType;\nfunction findModesThatDoNotExist(tokenTypes, validModes) {\n    var invalidModes = (0, filter_1.default)(tokenTypes, function (clazz) {\n        return (clazz.PUSH_MODE !== undefined && !(0, includes_1.default)(validModes, clazz.PUSH_MODE));\n    });\n    var errors = (0, map_1.default)(invalidModes, function (tokType) {\n        var msg = \"Token Type: ->\".concat(tokType.name, \"<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->\").concat(tokType.PUSH_MODE, \"<-\") +\n            \"which does not exist\";\n        return {\n            message: msg,\n            type: lexer_public_1.LexerDefinitionErrorType.PUSH_MODE_DOES_NOT_EXIST,\n            tokenTypes: [tokType]\n        };\n    });\n    return errors;\n}\nexports.findModesThatDoNotExist = findModesThatDoNotExist;\nfunction findUnreachablePatterns(tokenTypes) {\n    var errors = [];\n    var canBeTested = (0, reduce_1.default)(tokenTypes, function (result, tokType, idx) {\n        var pattern = tokType.PATTERN;\n        if (pattern === lexer_public_1.Lexer.NA) {\n            return result;\n        }\n        // a more comprehensive validation for all forms of regExps would require\n        // deeper regExp analysis capabilities\n        if ((0, isString_1.default)(pattern)) {\n            result.push({ str: pattern, idx: idx, tokenType: tokType });\n        }\n        else if ((0, isRegExp_1.default)(pattern) && noMetaChar(pattern)) {\n            result.push({ str: pattern.source, idx: idx, tokenType: tokType });\n        }\n        return result;\n    }, []);\n    (0, forEach_1.default)(tokenTypes, function (tokType, testIdx) {\n        (0, forEach_1.default)(canBeTested, function (_a) {\n            var str = _a.str, idx = _a.idx, tokenType = _a.tokenType;\n            if (testIdx < idx && testTokenType(str, tokType.PATTERN)) {\n                var msg = \"Token: ->\".concat(tokenType.name, \"<- can never be matched.\\n\") +\n                    \"Because it appears AFTER the Token Type ->\".concat(tokType.name, \"<-\") +\n                    \"in the lexer's definition.\\n\" +\n                    \"See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNREACHABLE\";\n                errors.push({\n                    message: msg,\n                    type: lexer_public_1.LexerDefinitionErrorType.UNREACHABLE_PATTERN,\n                    tokenTypes: [tokType, tokenType]\n                });\n            }\n        });\n    });\n    return errors;\n}\nexports.findUnreachablePatterns = findUnreachablePatterns;\nfunction testTokenType(str, pattern) {\n    /* istanbul ignore else */\n    if ((0, isRegExp_1.default)(pattern)) {\n        var regExpArray = pattern.exec(str);\n        return regExpArray !== null && regExpArray.index === 0;\n    }\n    else if ((0, isFunction_1.default)(pattern)) {\n        // maintain the API of custom patterns\n        return pattern(str, 0, [], {});\n    }\n    else if ((0, has_1.default)(pattern, \"exec\")) {\n        // maintain the API of custom patterns\n        return pattern.exec(str, 0, [], {});\n    }\n    else if (typeof pattern === \"string\") {\n        return pattern === str;\n    }\n    else {\n        throw Error(\"non exhaustive match\");\n    }\n}\nfunction noMetaChar(regExp) {\n    //https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp\n    var metaChars = [\n        \".\",\n        \"\\\\\",\n        \"[\",\n        \"]\",\n        \"|\",\n        \"^\",\n        \"$\",\n        \"(\",\n        \")\",\n        \"?\",\n        \"*\",\n        \"+\",\n        \"{\"\n    ];\n    return ((0, find_1.default)(metaChars, function (char) { return regExp.source.indexOf(char) !== -1; }) === undefined);\n}\nfunction addStartOfInput(pattern) {\n    var flags = pattern.ignoreCase ? \"i\" : \"\";\n    // always wrapping in a none capturing group preceded by '^' to make sure matching can only work on start of input.\n    // duplicate/redundant start of input markers have no meaning (/^^^^A/ === /^A/)\n    return new RegExp(\"^(?:\".concat(pattern.source, \")\"), flags);\n}\nexports.addStartOfInput = addStartOfInput;\nfunction addStickyFlag(pattern) {\n    var flags = pattern.ignoreCase ? \"iy\" : \"y\";\n    // always wrapping in a none capturing group preceded by '^' to make sure matching can only work on start of input.\n    // duplicate/redundant start of input markers have no meaning (/^^^^A/ === /^A/)\n    return new RegExp(\"\".concat(pattern.source), flags);\n}\nexports.addStickyFlag = addStickyFlag;\nfunction performRuntimeChecks(lexerDefinition, trackLines, lineTerminatorCharacters) {\n    var errors = [];\n    // some run time checks to help the end users.\n    if (!(0, has_1.default)(lexerDefinition, exports.DEFAULT_MODE)) {\n        errors.push({\n            message: \"A MultiMode Lexer cannot be initialized without a <\" +\n                exports.DEFAULT_MODE +\n                \"> property in its definition\\n\",\n            type: lexer_public_1.LexerDefinitionErrorType.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE\n        });\n    }\n    if (!(0, has_1.default)(lexerDefinition, exports.MODES)) {\n        errors.push({\n            message: \"A MultiMode Lexer cannot be initialized without a <\" +\n                exports.MODES +\n                \"> property in its definition\\n\",\n            type: lexer_public_1.LexerDefinitionErrorType.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY\n        });\n    }\n    if ((0, has_1.default)(lexerDefinition, exports.MODES) &&\n        (0, has_1.default)(lexerDefinition, exports.DEFAULT_MODE) &&\n        !(0, has_1.default)(lexerDefinition.modes, lexerDefinition.defaultMode)) {\n        errors.push({\n            message: \"A MultiMode Lexer cannot be initialized with a \".concat(exports.DEFAULT_MODE, \": <\").concat(lexerDefinition.defaultMode, \">\") +\n                \"which does not exist\\n\",\n            type: lexer_public_1.LexerDefinitionErrorType.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST\n        });\n    }\n    if ((0, has_1.default)(lexerDefinition, exports.MODES)) {\n        (0, forEach_1.default)(lexerDefinition.modes, function (currModeValue, currModeName) {\n            (0, forEach_1.default)(currModeValue, function (currTokType, currIdx) {\n                if ((0, isUndefined_1.default)(currTokType)) {\n                    errors.push({\n                        message: \"A Lexer cannot be initialized using an undefined Token Type. Mode:\" +\n                            \"<\".concat(currModeName, \"> at index: <\").concat(currIdx, \">\\n\"),\n                        type: lexer_public_1.LexerDefinitionErrorType.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED\n                    });\n                }\n                else if ((0, has_1.default)(currTokType, \"LONGER_ALT\")) {\n                    var longerAlt = (0, isArray_1.default)(currTokType.LONGER_ALT)\n                        ? currTokType.LONGER_ALT\n                        : [currTokType.LONGER_ALT];\n                    (0, forEach_1.default)(longerAlt, function (currLongerAlt) {\n                        if (!(0, isUndefined_1.default)(currLongerAlt) &&\n                            !(0, includes_1.default)(currModeValue, currLongerAlt)) {\n                            errors.push({\n                                message: \"A MultiMode Lexer cannot be initialized with a longer_alt <\".concat(currLongerAlt.name, \"> on token <\").concat(currTokType.name, \"> outside of mode <\").concat(currModeName, \">\\n\"),\n                                type: lexer_public_1.LexerDefinitionErrorType.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE\n                            });\n                        }\n                    });\n                }\n            });\n        });\n    }\n    return errors;\n}\nexports.performRuntimeChecks = performRuntimeChecks;\nfunction performWarningRuntimeChecks(lexerDefinition, trackLines, lineTerminatorCharacters) {\n    var warnings = [];\n    var hasAnyLineBreak = false;\n    var allTokenTypes = (0, compact_1.default)((0, flatten_1.default)((0, values_1.default)(lexerDefinition.modes)));\n    var concreteTokenTypes = (0, reject_1.default)(allTokenTypes, function (currType) { return currType[PATTERN] === lexer_public_1.Lexer.NA; });\n    var terminatorCharCodes = getCharCodes(lineTerminatorCharacters);\n    if (trackLines) {\n        (0, forEach_1.default)(concreteTokenTypes, function (tokType) {\n            var currIssue = checkLineBreaksIssues(tokType, terminatorCharCodes);\n            if (currIssue !== false) {\n                var message = buildLineBreakIssueMessage(tokType, currIssue);\n                var warningDescriptor = {\n                    message: message,\n                    type: currIssue.issue,\n                    tokenType: tokType\n                };\n                warnings.push(warningDescriptor);\n            }\n            else {\n                // we don't want to attempt to scan if the user explicitly specified the line_breaks option.\n                if ((0, has_1.default)(tokType, \"LINE_BREAKS\")) {\n                    if (tokType.LINE_BREAKS === true) {\n                        hasAnyLineBreak = true;\n                    }\n                }\n                else {\n                    if ((0, reg_exp_1.canMatchCharCode)(terminatorCharCodes, tokType.PATTERN)) {\n                        hasAnyLineBreak = true;\n                    }\n                }\n            }\n        });\n    }\n    if (trackLines && !hasAnyLineBreak) {\n        warnings.push({\n            message: \"Warning: No LINE_BREAKS Found.\\n\" +\n                \"\\tThis Lexer has been defined to track line and column information,\\n\" +\n                \"\\tBut none of the Token Types can be identified as matching a line terminator.\\n\" +\n                \"\\tSee https://chevrotain.io/docs/guide/resolving_lexer_errors.html#LINE_BREAKS \\n\" +\n                \"\\tfor details.\",\n            type: lexer_public_1.LexerDefinitionErrorType.NO_LINE_BREAKS_FLAGS\n        });\n    }\n    return warnings;\n}\nexports.performWarningRuntimeChecks = performWarningRuntimeChecks;\nfunction cloneEmptyGroups(emptyGroups) {\n    var clonedResult = {};\n    var groupKeys = (0, keys_1.default)(emptyGroups);\n    (0, forEach_1.default)(groupKeys, function (currKey) {\n        var currGroupValue = emptyGroups[currKey];\n        /* istanbul ignore else */\n        if ((0, isArray_1.default)(currGroupValue)) {\n            clonedResult[currKey] = [];\n        }\n        else {\n            throw Error(\"non exhaustive match\");\n        }\n    });\n    return clonedResult;\n}\nexports.cloneEmptyGroups = cloneEmptyGroups;\n// TODO: refactor to avoid duplication\nfunction isCustomPattern(tokenType) {\n    var pattern = tokenType.PATTERN;\n    /* istanbul ignore else */\n    if ((0, isRegExp_1.default)(pattern)) {\n        return false;\n    }\n    else if ((0, isFunction_1.default)(pattern)) {\n        // CustomPatternMatcherFunc - custom patterns do not require any transformations, only wrapping in a RegExp Like object\n        return true;\n    }\n    else if ((0, has_1.default)(pattern, \"exec\")) {\n        // ICustomPattern\n        return true;\n    }\n    else if ((0, isString_1.default)(pattern)) {\n        return false;\n    }\n    else {\n        throw Error(\"non exhaustive match\");\n    }\n}\nexports.isCustomPattern = isCustomPattern;\nfunction isShortPattern(pattern) {\n    if ((0, isString_1.default)(pattern) && pattern.length === 1) {\n        return pattern.charCodeAt(0);\n    }\n    else {\n        return false;\n    }\n}\nexports.isShortPattern = isShortPattern;\n/**\n * Faster than using a RegExp for default newline detection during lexing.\n */\nexports.LineTerminatorOptimizedTester = {\n    // implements /\\n|\\r\\n?/g.test\n    test: function (text) {\n        var len = text.length;\n        for (var i = this.lastIndex; i < len; i++) {\n            var c = text.charCodeAt(i);\n            if (c === 10) {\n                this.lastIndex = i + 1;\n                return true;\n            }\n            else if (c === 13) {\n                if (text.charCodeAt(i + 1) === 10) {\n                    this.lastIndex = i + 2;\n                }\n                else {\n                    this.lastIndex = i + 1;\n                }\n                return true;\n            }\n        }\n        return false;\n    },\n    lastIndex: 0\n};\nfunction checkLineBreaksIssues(tokType, lineTerminatorCharCodes) {\n    if ((0, has_1.default)(tokType, \"LINE_BREAKS\")) {\n        // if the user explicitly declared the line_breaks option we will respect their choice\n        // and assume it is correct.\n        return false;\n    }\n    else {\n        /* istanbul ignore else */\n        if ((0, isRegExp_1.default)(tokType.PATTERN)) {\n            try {\n                // TODO: why is the casting suddenly needed?\n                (0, reg_exp_1.canMatchCharCode)(lineTerminatorCharCodes, tokType.PATTERN);\n            }\n            catch (e) {\n                /* istanbul ignore next - to test this we would have to mock <canMatchCharCode> to throw an error */\n                return {\n                    issue: lexer_public_1.LexerDefinitionErrorType.IDENTIFY_TERMINATOR,\n                    errMsg: e.message\n                };\n            }\n            return false;\n        }\n        else if ((0, isString_1.default)(tokType.PATTERN)) {\n            // string literal patterns can always be analyzed to detect line terminator usage\n            return false;\n        }\n        else if (isCustomPattern(tokType)) {\n            // custom token types\n            return { issue: lexer_public_1.LexerDefinitionErrorType.CUSTOM_LINE_BREAK };\n        }\n        else {\n            throw Error(\"non exhaustive match\");\n        }\n    }\n}\nfunction buildLineBreakIssueMessage(tokType, details) {\n    /* istanbul ignore else */\n    if (details.issue === lexer_public_1.LexerDefinitionErrorType.IDENTIFY_TERMINATOR) {\n        return (\"Warning: unable to identify line terminator usage in pattern.\\n\" +\n            \"\\tThe problem is in the <\".concat(tokType.name, \"> Token Type\\n\") +\n            \"\\t Root cause: \".concat(details.errMsg, \".\\n\") +\n            \"\\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR\");\n    }\n    else if (details.issue === lexer_public_1.LexerDefinitionErrorType.CUSTOM_LINE_BREAK) {\n        return (\"Warning: A Custom Token Pattern should specify the <line_breaks> option.\\n\" +\n            \"\\tThe problem is in the <\".concat(tokType.name, \"> Token Type\\n\") +\n            \"\\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK\");\n    }\n    else {\n        throw Error(\"non exhaustive match\");\n    }\n}\nexports.buildLineBreakIssueMessage = buildLineBreakIssueMessage;\nfunction getCharCodes(charsOrCodes) {\n    var charCodes = (0, map_1.default)(charsOrCodes, function (numOrString) {\n        if ((0, isString_1.default)(numOrString)) {\n            return numOrString.charCodeAt(0);\n        }\n        else {\n            return numOrString;\n        }\n    });\n    return charCodes;\n}\nfunction addToMapOfArrays(map, key, value) {\n    if (map[key] === undefined) {\n        map[key] = [value];\n    }\n    else {\n        map[key].push(value);\n    }\n}\nexports.minOptimizationVal = 256;\n/**\n * We are mapping charCode above ASCI (256) into buckets each in the size of 256.\n * This is because ASCI are the most common start chars so each one of those will get its own\n * possible token configs vector.\n *\n * Tokens starting with charCodes \"above\" ASCI are uncommon, so we can \"afford\"\n * to place these into buckets of possible token configs, What we gain from\n * this is avoiding the case of creating an optimization 'charCodeToPatternIdxToConfig'\n * which would contain 10,000+ arrays of small size (e.g unicode Identifiers scenario).\n * Our 'charCodeToPatternIdxToConfig' max size will now be:\n * 256 + (2^16 / 2^8) - 1 === 511\n *\n * note the hack for fast division integer part extraction\n * See: https://stackoverflow.com/a/4228528\n */\nvar charCodeToOptimizedIdxMap = [];\nfunction charCodeToOptimizedIndex(charCode) {\n    return charCode < exports.minOptimizationVal\n        ? charCode\n        : charCodeToOptimizedIdxMap[charCode];\n}\nexports.charCodeToOptimizedIndex = charCodeToOptimizedIndex;\n/**\n * This is a compromise between cold start / hot running performance\n * Creating this array takes ~3ms on a modern machine,\n * But if we perform the computation at runtime as needed the CSS Lexer benchmark\n * performance degrades by ~10%\n *\n * TODO: Perhaps it should be lazy initialized only if a charCode > 255 is used.\n */\nfunction initCharCodeToOptimizedIndexMap() {\n    if ((0, isEmpty_1.default)(charCodeToOptimizedIdxMap)) {\n        charCodeToOptimizedIdxMap = new Array(65536);\n        for (var i = 0; i < 65536; i++) {\n            charCodeToOptimizedIdxMap[i] = i > 255 ? 255 + ~~(i / 255) : i;\n        }\n    }\n}\n","var baseEach = require('./_baseEach');\n\n/**\n * The base implementation of `_.filter` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction baseFilter(collection, predicate) {\n  var result = [];\n  baseEach(collection, function(value, index, collection) {\n    if (predicate(value, index, collection)) {\n      result.push(value);\n    }\n  });\n  return result;\n}\n\nmodule.exports = baseFilter;\n","var baseFindIndex = require('./_baseFindIndex'),\n    baseIteratee = require('./_baseIteratee'),\n    toInteger = require('./toInteger');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * This method is like `_.find` except that it returns the index of the first\n * element `predicate` returns truthy for instead of the element itself.\n *\n * @static\n * @memberOf _\n * @since 1.1.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @param {number} [fromIndex=0] The index to search from.\n * @returns {number} Returns the index of the found element, else `-1`.\n * @example\n *\n * var users = [\n *   { 'user': 'barney',  'active': false },\n *   { 'user': 'fred',    'active': false },\n *   { 'user': 'pebbles', 'active': true }\n * ];\n *\n * _.findIndex(users, function(o) { return o.user == 'barney'; });\n * // => 0\n *\n * // The `_.matches` iteratee shorthand.\n * _.findIndex(users, { 'user': 'fred', 'active': false });\n * // => 1\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.findIndex(users, ['active', false]);\n * // => 0\n *\n * // The `_.property` iteratee shorthand.\n * _.findIndex(users, 'active');\n * // => 2\n */\nfunction findIndex(array, predicate, fromIndex) {\n  var length = array == null ? 0 : array.length;\n  if (!length) {\n    return -1;\n  }\n  var index = fromIndex == null ? 0 : toInteger(fromIndex);\n  if (index < 0) {\n    index = nativeMax(length + index, 0);\n  }\n  return baseFindIndex(array, baseIteratee(predicate, 3), index);\n}\n\nmodule.exports = findIndex;\n","var baseRest = require('./_baseRest'),\n    eq = require('./eq'),\n    isIterateeCall = require('./_isIterateeCall'),\n    keysIn = require('./keysIn');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns own and inherited enumerable string keyed properties of source\n * objects to the destination object for all destination properties that\n * resolve to `undefined`. Source objects are applied from left to right.\n * Once a property is set, additional values of the same property are ignored.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @see _.defaultsDeep\n * @example\n *\n * _.defaults({ 'a': 1 }, { 'b': 2 }, { 'a': 3 });\n * // => { 'a': 1, 'b': 2 }\n */\nvar defaults = baseRest(function(object, sources) {\n  object = Object(object);\n\n  var index = -1;\n  var length = sources.length;\n  var guard = length > 2 ? sources[2] : undefined;\n\n  if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n    length = 1;\n  }\n\n  while (++index < length) {\n    var source = sources[index];\n    var props = keysIn(source);\n    var propsIndex = -1;\n    var propsLength = props.length;\n\n    while (++propsIndex < propsLength) {\n      var key = props[propsIndex];\n      var value = object[key];\n\n      if (value === undefined ||\n          (eq(value, objectProto[key]) && !hasOwnProperty.call(object, key))) {\n        object[key] = source[key];\n      }\n    }\n  }\n\n  return object;\n});\n\nmodule.exports = defaults;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.defaultLexerErrorProvider = void 0;\nexports.defaultLexerErrorProvider = {\n    buildUnableToPopLexerModeMessage: function (token) {\n        return \"Unable to pop Lexer Mode after encountering Token ->\".concat(token.image, \"<- The Mode Stack is empty\");\n    },\n    buildUnexpectedCharactersMessage: function (fullText, startOffset, length, line, column) {\n        return (\"unexpected character: ->\".concat(fullText.charAt(startOffset), \"<- at offset: \").concat(startOffset, \",\") + \" skipped \".concat(length, \" characters.\"));\n    }\n};\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.checkPrefixAlternativesAmbiguities = exports.validateSomeNonEmptyLookaheadPath = exports.validateTooManyAlts = exports.RepetitionCollector = exports.validateAmbiguousAlternationAlternatives = exports.validateEmptyOrAlternative = exports.getFirstNoneTerminal = exports.validateNoLeftRecursion = exports.validateRuleIsOverridden = exports.validateRuleDoesNotAlreadyExist = exports.OccurrenceValidationCollector = exports.identifyProductionForDuplicates = exports.validateGrammar = void 0;\nvar first_1 = __importDefault(require(\"lodash/first\"));\nvar isEmpty_1 = __importDefault(require(\"lodash/isEmpty\"));\nvar drop_1 = __importDefault(require(\"lodash/drop\"));\nvar flatten_1 = __importDefault(require(\"lodash/flatten\"));\nvar filter_1 = __importDefault(require(\"lodash/filter\"));\nvar reject_1 = __importDefault(require(\"lodash/reject\"));\nvar difference_1 = __importDefault(require(\"lodash/difference\"));\nvar map_1 = __importDefault(require(\"lodash/map\"));\nvar forEach_1 = __importDefault(require(\"lodash/forEach\"));\nvar groupBy_1 = __importDefault(require(\"lodash/groupBy\"));\nvar reduce_1 = __importDefault(require(\"lodash/reduce\"));\nvar pickBy_1 = __importDefault(require(\"lodash/pickBy\"));\nvar values_1 = __importDefault(require(\"lodash/values\"));\nvar includes_1 = __importDefault(require(\"lodash/includes\"));\nvar flatMap_1 = __importDefault(require(\"lodash/flatMap\"));\nvar clone_1 = __importDefault(require(\"lodash/clone\"));\nvar parser_1 = require(\"../parser/parser\");\nvar gast_1 = require(\"@chevrotain/gast\");\nvar lookahead_1 = require(\"./lookahead\");\nvar interpreter_1 = require(\"./interpreter\");\nvar gast_2 = require(\"@chevrotain/gast\");\nvar gast_3 = require(\"@chevrotain/gast\");\nvar dropRight_1 = __importDefault(require(\"lodash/dropRight\"));\nvar compact_1 = __importDefault(require(\"lodash/compact\"));\nvar tokens_1 = require(\"../../scan/tokens\");\nfunction validateGrammar(topLevels, globalMaxLookahead, tokenTypes, errMsgProvider, grammarName) {\n    var duplicateErrors = (0, flatMap_1.default)(topLevels, function (currTopLevel) {\n        return validateDuplicateProductions(currTopLevel, errMsgProvider);\n    });\n    var leftRecursionErrors = (0, flatMap_1.default)(topLevels, function (currTopRule) {\n        return validateNoLeftRecursion(currTopRule, currTopRule, errMsgProvider);\n    });\n    var emptyAltErrors = [];\n    var ambiguousAltsErrors = [];\n    var emptyRepetitionErrors = [];\n    // left recursion could cause infinite loops in the following validations.\n    // It is safest to first have the user fix the left recursion errors first and only then examine Further issues.\n    if ((0, isEmpty_1.default)(leftRecursionErrors)) {\n        emptyAltErrors = (0, flatMap_1.default)(topLevels, function (currTopRule) {\n            return validateEmptyOrAlternative(currTopRule, errMsgProvider);\n        });\n        ambiguousAltsErrors = (0, flatMap_1.default)(topLevels, function (currTopRule) {\n            return validateAmbiguousAlternationAlternatives(currTopRule, globalMaxLookahead, errMsgProvider);\n        });\n        emptyRepetitionErrors = validateSomeNonEmptyLookaheadPath(topLevels, globalMaxLookahead, errMsgProvider);\n    }\n    var termsNamespaceConflictErrors = checkTerminalAndNoneTerminalsNameSpace(topLevels, tokenTypes, errMsgProvider);\n    var tooManyAltsErrors = (0, flatMap_1.default)(topLevels, function (curRule) {\n        return validateTooManyAlts(curRule, errMsgProvider);\n    });\n    var duplicateRulesError = (0, flatMap_1.default)(topLevels, function (curRule) {\n        return validateRuleDoesNotAlreadyExist(curRule, topLevels, grammarName, errMsgProvider);\n    });\n    return duplicateErrors.concat(emptyRepetitionErrors, leftRecursionErrors, emptyAltErrors, ambiguousAltsErrors, termsNamespaceConflictErrors, tooManyAltsErrors, duplicateRulesError);\n}\nexports.validateGrammar = validateGrammar;\nfunction validateDuplicateProductions(topLevelRule, errMsgProvider) {\n    var collectorVisitor = new OccurrenceValidationCollector();\n    topLevelRule.accept(collectorVisitor);\n    var allRuleProductions = collectorVisitor.allProductions;\n    var productionGroups = (0, groupBy_1.default)(allRuleProductions, identifyProductionForDuplicates);\n    var duplicates = (0, pickBy_1.default)(productionGroups, function (currGroup) {\n        return currGroup.length > 1;\n    });\n    var errors = (0, map_1.default)((0, values_1.default)(duplicates), function (currDuplicates) {\n        var firstProd = (0, first_1.default)(currDuplicates);\n        var msg = errMsgProvider.buildDuplicateFoundError(topLevelRule, currDuplicates);\n        var dslName = (0, gast_1.getProductionDslName)(firstProd);\n        var defError = {\n            message: msg,\n            type: parser_1.ParserDefinitionErrorType.DUPLICATE_PRODUCTIONS,\n            ruleName: topLevelRule.name,\n            dslName: dslName,\n            occurrence: firstProd.idx\n        };\n        var param = getExtraProductionArgument(firstProd);\n        if (param) {\n            defError.parameter = param;\n        }\n        return defError;\n    });\n    return errors;\n}\nfunction identifyProductionForDuplicates(prod) {\n    return \"\".concat((0, gast_1.getProductionDslName)(prod), \"_#_\").concat(prod.idx, \"_#_\").concat(getExtraProductionArgument(prod));\n}\nexports.identifyProductionForDuplicates = identifyProductionForDuplicates;\nfunction getExtraProductionArgument(prod) {\n    if (prod instanceof gast_2.Terminal) {\n        return prod.terminalType.name;\n    }\n    else if (prod instanceof gast_2.NonTerminal) {\n        return prod.nonTerminalName;\n    }\n    else {\n        return \"\";\n    }\n}\nvar OccurrenceValidationCollector = /** @class */ (function (_super) {\n    __extends(OccurrenceValidationCollector, _super);\n    function OccurrenceValidationCollector() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.allProductions = [];\n        return _this;\n    }\n    OccurrenceValidationCollector.prototype.visitNonTerminal = function (subrule) {\n        this.allProductions.push(subrule);\n    };\n    OccurrenceValidationCollector.prototype.visitOption = function (option) {\n        this.allProductions.push(option);\n    };\n    OccurrenceValidationCollector.prototype.visitRepetitionWithSeparator = function (manySep) {\n        this.allProductions.push(manySep);\n    };\n    OccurrenceValidationCollector.prototype.visitRepetitionMandatory = function (atLeastOne) {\n        this.allProductions.push(atLeastOne);\n    };\n    OccurrenceValidationCollector.prototype.visitRepetitionMandatoryWithSeparator = function (atLeastOneSep) {\n        this.allProductions.push(atLeastOneSep);\n    };\n    OccurrenceValidationCollector.prototype.visitRepetition = function (many) {\n        this.allProductions.push(many);\n    };\n    OccurrenceValidationCollector.prototype.visitAlternation = function (or) {\n        this.allProductions.push(or);\n    };\n    OccurrenceValidationCollector.prototype.visitTerminal = function (terminal) {\n        this.allProductions.push(terminal);\n    };\n    return OccurrenceValidationCollector;\n}(gast_3.GAstVisitor));\nexports.OccurrenceValidationCollector = OccurrenceValidationCollector;\nfunction validateRuleDoesNotAlreadyExist(rule, allRules, className, errMsgProvider) {\n    var errors = [];\n    var occurrences = (0, reduce_1.default)(allRules, function (result, curRule) {\n        if (curRule.name === rule.name) {\n            return result + 1;\n        }\n        return result;\n    }, 0);\n    if (occurrences > 1) {\n        var errMsg = errMsgProvider.buildDuplicateRuleNameError({\n            topLevelRule: rule,\n            grammarName: className\n        });\n        errors.push({\n            message: errMsg,\n            type: parser_1.ParserDefinitionErrorType.DUPLICATE_RULE_NAME,\n            ruleName: rule.name\n        });\n    }\n    return errors;\n}\nexports.validateRuleDoesNotAlreadyExist = validateRuleDoesNotAlreadyExist;\n// TODO: is there anyway to get only the rule names of rules inherited from the super grammars?\n// This is not part of the IGrammarErrorProvider because the validation cannot be performed on\n// The grammar structure, only at runtime.\nfunction validateRuleIsOverridden(ruleName, definedRulesNames, className) {\n    var errors = [];\n    var errMsg;\n    if (!(0, includes_1.default)(definedRulesNames, ruleName)) {\n        errMsg =\n            \"Invalid rule override, rule: ->\".concat(ruleName, \"<- cannot be overridden in the grammar: ->\").concat(className, \"<-\") +\n                \"as it is not defined in any of the super grammars \";\n        errors.push({\n            message: errMsg,\n            type: parser_1.ParserDefinitionErrorType.INVALID_RULE_OVERRIDE,\n            ruleName: ruleName\n        });\n    }\n    return errors;\n}\nexports.validateRuleIsOverridden = validateRuleIsOverridden;\nfunction validateNoLeftRecursion(topRule, currRule, errMsgProvider, path) {\n    if (path === void 0) { path = []; }\n    var errors = [];\n    var nextNonTerminals = getFirstNoneTerminal(currRule.definition);\n    if ((0, isEmpty_1.default)(nextNonTerminals)) {\n        return [];\n    }\n    else {\n        var ruleName = topRule.name;\n        var foundLeftRecursion = (0, includes_1.default)(nextNonTerminals, topRule);\n        if (foundLeftRecursion) {\n            errors.push({\n                message: errMsgProvider.buildLeftRecursionError({\n                    topLevelRule: topRule,\n                    leftRecursionPath: path\n                }),\n                type: parser_1.ParserDefinitionErrorType.LEFT_RECURSION,\n                ruleName: ruleName\n            });\n        }\n        // we are only looking for cyclic paths leading back to the specific topRule\n        // other cyclic paths are ignored, we still need this difference to avoid infinite loops...\n        var validNextSteps = (0, difference_1.default)(nextNonTerminals, path.concat([topRule]));\n        var errorsFromNextSteps = (0, flatMap_1.default)(validNextSteps, function (currRefRule) {\n            var newPath = (0, clone_1.default)(path);\n            newPath.push(currRefRule);\n            return validateNoLeftRecursion(topRule, currRefRule, errMsgProvider, newPath);\n        });\n        return errors.concat(errorsFromNextSteps);\n    }\n}\nexports.validateNoLeftRecursion = validateNoLeftRecursion;\nfunction getFirstNoneTerminal(definition) {\n    var result = [];\n    if ((0, isEmpty_1.default)(definition)) {\n        return result;\n    }\n    var firstProd = (0, first_1.default)(definition);\n    /* istanbul ignore else */\n    if (firstProd instanceof gast_2.NonTerminal) {\n        result.push(firstProd.referencedRule);\n    }\n    else if (firstProd instanceof gast_2.Alternative ||\n        firstProd instanceof gast_2.Option ||\n        firstProd instanceof gast_2.RepetitionMandatory ||\n        firstProd instanceof gast_2.RepetitionMandatoryWithSeparator ||\n        firstProd instanceof gast_2.RepetitionWithSeparator ||\n        firstProd instanceof gast_2.Repetition) {\n        result = result.concat(getFirstNoneTerminal(firstProd.definition));\n    }\n    else if (firstProd instanceof gast_2.Alternation) {\n        // each sub definition in alternation is a FLAT\n        result = (0, flatten_1.default)((0, map_1.default)(firstProd.definition, function (currSubDef) {\n            return getFirstNoneTerminal(currSubDef.definition);\n        }));\n    }\n    else if (firstProd instanceof gast_2.Terminal) {\n        // nothing to see, move along\n    }\n    else {\n        throw Error(\"non exhaustive match\");\n    }\n    var isFirstOptional = (0, gast_1.isOptionalProd)(firstProd);\n    var hasMore = definition.length > 1;\n    if (isFirstOptional && hasMore) {\n        var rest = (0, drop_1.default)(definition);\n        return result.concat(getFirstNoneTerminal(rest));\n    }\n    else {\n        return result;\n    }\n}\nexports.getFirstNoneTerminal = getFirstNoneTerminal;\nvar OrCollector = /** @class */ (function (_super) {\n    __extends(OrCollector, _super);\n    function OrCollector() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.alternations = [];\n        return _this;\n    }\n    OrCollector.prototype.visitAlternation = function (node) {\n        this.alternations.push(node);\n    };\n    return OrCollector;\n}(gast_3.GAstVisitor));\nfunction validateEmptyOrAlternative(topLevelRule, errMsgProvider) {\n    var orCollector = new OrCollector();\n    topLevelRule.accept(orCollector);\n    var ors = orCollector.alternations;\n    var errors = (0, flatMap_1.default)(ors, function (currOr) {\n        var exceptLast = (0, dropRight_1.default)(currOr.definition);\n        return (0, flatMap_1.default)(exceptLast, function (currAlternative, currAltIdx) {\n            var possibleFirstInAlt = (0, interpreter_1.nextPossibleTokensAfter)([currAlternative], [], tokens_1.tokenStructuredMatcher, 1);\n            if ((0, isEmpty_1.default)(possibleFirstInAlt)) {\n                return [\n                    {\n                        message: errMsgProvider.buildEmptyAlternationError({\n                            topLevelRule: topLevelRule,\n                            alternation: currOr,\n                            emptyChoiceIdx: currAltIdx\n                        }),\n                        type: parser_1.ParserDefinitionErrorType.NONE_LAST_EMPTY_ALT,\n                        ruleName: topLevelRule.name,\n                        occurrence: currOr.idx,\n                        alternative: currAltIdx + 1\n                    }\n                ];\n            }\n            else {\n                return [];\n            }\n        });\n    });\n    return errors;\n}\nexports.validateEmptyOrAlternative = validateEmptyOrAlternative;\nfunction validateAmbiguousAlternationAlternatives(topLevelRule, globalMaxLookahead, errMsgProvider) {\n    var orCollector = new OrCollector();\n    topLevelRule.accept(orCollector);\n    var ors = orCollector.alternations;\n    // New Handling of ignoring ambiguities\n    // - https://github.com/chevrotain/chevrotain/issues/869\n    ors = (0, reject_1.default)(ors, function (currOr) { return currOr.ignoreAmbiguities === true; });\n    var errors = (0, flatMap_1.default)(ors, function (currOr) {\n        var currOccurrence = currOr.idx;\n        var actualMaxLookahead = currOr.maxLookahead || globalMaxLookahead;\n        var alternatives = (0, lookahead_1.getLookaheadPathsForOr)(currOccurrence, topLevelRule, actualMaxLookahead, currOr);\n        var altsAmbiguityErrors = checkAlternativesAmbiguities(alternatives, currOr, topLevelRule, errMsgProvider);\n        var altsPrefixAmbiguityErrors = checkPrefixAlternativesAmbiguities(alternatives, currOr, topLevelRule, errMsgProvider);\n        return altsAmbiguityErrors.concat(altsPrefixAmbiguityErrors);\n    });\n    return errors;\n}\nexports.validateAmbiguousAlternationAlternatives = validateAmbiguousAlternationAlternatives;\nvar RepetitionCollector = /** @class */ (function (_super) {\n    __extends(RepetitionCollector, _super);\n    function RepetitionCollector() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.allProductions = [];\n        return _this;\n    }\n    RepetitionCollector.prototype.visitRepetitionWithSeparator = function (manySep) {\n        this.allProductions.push(manySep);\n    };\n    RepetitionCollector.prototype.visitRepetitionMandatory = function (atLeastOne) {\n        this.allProductions.push(atLeastOne);\n    };\n    RepetitionCollector.prototype.visitRepetitionMandatoryWithSeparator = function (atLeastOneSep) {\n        this.allProductions.push(atLeastOneSep);\n    };\n    RepetitionCollector.prototype.visitRepetition = function (many) {\n        this.allProductions.push(many);\n    };\n    return RepetitionCollector;\n}(gast_3.GAstVisitor));\nexports.RepetitionCollector = RepetitionCollector;\nfunction validateTooManyAlts(topLevelRule, errMsgProvider) {\n    var orCollector = new OrCollector();\n    topLevelRule.accept(orCollector);\n    var ors = orCollector.alternations;\n    var errors = (0, flatMap_1.default)(ors, function (currOr) {\n        if (currOr.definition.length > 255) {\n            return [\n                {\n                    message: errMsgProvider.buildTooManyAlternativesError({\n                        topLevelRule: topLevelRule,\n                        alternation: currOr\n                    }),\n                    type: parser_1.ParserDefinitionErrorType.TOO_MANY_ALTS,\n                    ruleName: topLevelRule.name,\n                    occurrence: currOr.idx\n                }\n            ];\n        }\n        else {\n            return [];\n        }\n    });\n    return errors;\n}\nexports.validateTooManyAlts = validateTooManyAlts;\nfunction validateSomeNonEmptyLookaheadPath(topLevelRules, maxLookahead, errMsgProvider) {\n    var errors = [];\n    (0, forEach_1.default)(topLevelRules, function (currTopRule) {\n        var collectorVisitor = new RepetitionCollector();\n        currTopRule.accept(collectorVisitor);\n        var allRuleProductions = collectorVisitor.allProductions;\n        (0, forEach_1.default)(allRuleProductions, function (currProd) {\n            var prodType = (0, lookahead_1.getProdType)(currProd);\n            var actualMaxLookahead = currProd.maxLookahead || maxLookahead;\n            var currOccurrence = currProd.idx;\n            var paths = (0, lookahead_1.getLookaheadPathsForOptionalProd)(currOccurrence, currTopRule, prodType, actualMaxLookahead);\n            var pathsInsideProduction = paths[0];\n            if ((0, isEmpty_1.default)((0, flatten_1.default)(pathsInsideProduction))) {\n                var errMsg = errMsgProvider.buildEmptyRepetitionError({\n                    topLevelRule: currTopRule,\n                    repetition: currProd\n                });\n                errors.push({\n                    message: errMsg,\n                    type: parser_1.ParserDefinitionErrorType.NO_NON_EMPTY_LOOKAHEAD,\n                    ruleName: currTopRule.name\n                });\n            }\n        });\n    });\n    return errors;\n}\nexports.validateSomeNonEmptyLookaheadPath = validateSomeNonEmptyLookaheadPath;\nfunction checkAlternativesAmbiguities(alternatives, alternation, rule, errMsgProvider) {\n    var foundAmbiguousPaths = [];\n    var identicalAmbiguities = (0, reduce_1.default)(alternatives, function (result, currAlt, currAltIdx) {\n        // ignore (skip) ambiguities with this alternative\n        if (alternation.definition[currAltIdx].ignoreAmbiguities === true) {\n            return result;\n        }\n        (0, forEach_1.default)(currAlt, function (currPath) {\n            var altsCurrPathAppearsIn = [currAltIdx];\n            (0, forEach_1.default)(alternatives, function (currOtherAlt, currOtherAltIdx) {\n                if (currAltIdx !== currOtherAltIdx &&\n                    (0, lookahead_1.containsPath)(currOtherAlt, currPath) &&\n                    // ignore (skip) ambiguities with this \"other\" alternative\n                    alternation.definition[currOtherAltIdx].ignoreAmbiguities !== true) {\n                    altsCurrPathAppearsIn.push(currOtherAltIdx);\n                }\n            });\n            if (altsCurrPathAppearsIn.length > 1 &&\n                !(0, lookahead_1.containsPath)(foundAmbiguousPaths, currPath)) {\n                foundAmbiguousPaths.push(currPath);\n                result.push({\n                    alts: altsCurrPathAppearsIn,\n                    path: currPath\n                });\n            }\n        });\n        return result;\n    }, []);\n    var currErrors = (0, map_1.default)(identicalAmbiguities, function (currAmbDescriptor) {\n        var ambgIndices = (0, map_1.default)(currAmbDescriptor.alts, function (currAltIdx) { return currAltIdx + 1; });\n        var currMessage = errMsgProvider.buildAlternationAmbiguityError({\n            topLevelRule: rule,\n            alternation: alternation,\n            ambiguityIndices: ambgIndices,\n            prefixPath: currAmbDescriptor.path\n        });\n        return {\n            message: currMessage,\n            type: parser_1.ParserDefinitionErrorType.AMBIGUOUS_ALTS,\n            ruleName: rule.name,\n            occurrence: alternation.idx,\n            alternatives: currAmbDescriptor.alts\n        };\n    });\n    return currErrors;\n}\nfunction checkPrefixAlternativesAmbiguities(alternatives, alternation, rule, errMsgProvider) {\n    // flatten\n    var pathsAndIndices = (0, reduce_1.default)(alternatives, function (result, currAlt, idx) {\n        var currPathsAndIdx = (0, map_1.default)(currAlt, function (currPath) {\n            return { idx: idx, path: currPath };\n        });\n        return result.concat(currPathsAndIdx);\n    }, []);\n    var errors = (0, compact_1.default)((0, flatMap_1.default)(pathsAndIndices, function (currPathAndIdx) {\n        var alternativeGast = alternation.definition[currPathAndIdx.idx];\n        // ignore (skip) ambiguities with this alternative\n        if (alternativeGast.ignoreAmbiguities === true) {\n            return [];\n        }\n        var targetIdx = currPathAndIdx.idx;\n        var targetPath = currPathAndIdx.path;\n        var prefixAmbiguitiesPathsAndIndices = (0, filter_1.default)(pathsAndIndices, function (searchPathAndIdx) {\n            // prefix ambiguity can only be created from lower idx (higher priority) path\n            return (\n            // ignore (skip) ambiguities with this \"other\" alternative\n            alternation.definition[searchPathAndIdx.idx].ignoreAmbiguities !==\n                true &&\n                searchPathAndIdx.idx < targetIdx &&\n                // checking for strict prefix because identical lookaheads\n                // will be be detected using a different validation.\n                (0, lookahead_1.isStrictPrefixOfPath)(searchPathAndIdx.path, targetPath));\n        });\n        var currPathPrefixErrors = (0, map_1.default)(prefixAmbiguitiesPathsAndIndices, function (currAmbPathAndIdx) {\n            var ambgIndices = [currAmbPathAndIdx.idx + 1, targetIdx + 1];\n            var occurrence = alternation.idx === 0 ? \"\" : alternation.idx;\n            var message = errMsgProvider.buildAlternationPrefixAmbiguityError({\n                topLevelRule: rule,\n                alternation: alternation,\n                ambiguityIndices: ambgIndices,\n                prefixPath: currAmbPathAndIdx.path\n            });\n            return {\n                message: message,\n                type: parser_1.ParserDefinitionErrorType.AMBIGUOUS_PREFIX_ALTS,\n                ruleName: rule.name,\n                occurrence: occurrence,\n                alternatives: ambgIndices\n            };\n        });\n        return currPathPrefixErrors;\n    }));\n    return errors;\n}\nexports.checkPrefixAlternativesAmbiguities = checkPrefixAlternativesAmbiguities;\nfunction checkTerminalAndNoneTerminalsNameSpace(topLevels, tokenTypes, errMsgProvider) {\n    var errors = [];\n    var tokenNames = (0, map_1.default)(tokenTypes, function (currToken) { return currToken.name; });\n    (0, forEach_1.default)(topLevels, function (currRule) {\n        var currRuleName = currRule.name;\n        if ((0, includes_1.default)(tokenNames, currRuleName)) {\n            var errMsg = errMsgProvider.buildNamespaceConflictError(currRule);\n            errors.push({\n                message: errMsg,\n                type: parser_1.ParserDefinitionErrorType.CONFLICT_TOKENS_RULES_NAMESPACE,\n                ruleName: currRuleName\n            });\n        }\n    });\n    return errors;\n}\n","var baseAssignValue = require('./_baseAssignValue'),\n    createAggregator = require('./_createAggregator');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an object composed of keys generated from the results of running\n * each element of `collection` thru `iteratee`. The order of grouped values\n * is determined by the order they occur in `collection`. The corresponding\n * value of each key is an array of elements responsible for generating the\n * key. The iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The iteratee to transform keys.\n * @returns {Object} Returns the composed aggregate object.\n * @example\n *\n * _.groupBy([6.1, 4.2, 6.3], Math.floor);\n * // => { '4': [4.2], '6': [6.1, 6.3] }\n *\n * // The `_.property` iteratee shorthand.\n * _.groupBy(['one', 'two', 'three'], 'length');\n * // => { '3': ['one', 'two'], '5': ['three'] }\n */\nvar groupBy = createAggregator(function(result, value, key) {\n  if (hasOwnProperty.call(result, key)) {\n    result[key].push(value);\n  } else {\n    baseAssignValue(result, key, [value]);\n  }\n});\n\nmodule.exports = groupBy;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.attemptInRepetitionRecovery = exports.Recoverable = exports.InRuleRecoveryException = exports.IN_RULE_RECOVERY_EXCEPTION = exports.EOF_FOLLOW_KEY = void 0;\nvar tokens_public_1 = require(\"../../../scan/tokens_public\");\nvar isEmpty_1 = __importDefault(require(\"lodash/isEmpty\"));\nvar dropRight_1 = __importDefault(require(\"lodash/dropRight\"));\nvar flatten_1 = __importDefault(require(\"lodash/flatten\"));\nvar map_1 = __importDefault(require(\"lodash/map\"));\nvar find_1 = __importDefault(require(\"lodash/find\"));\nvar has_1 = __importDefault(require(\"lodash/has\"));\nvar includes_1 = __importDefault(require(\"lodash/includes\"));\nvar clone_1 = __importDefault(require(\"lodash/clone\"));\nvar exceptions_public_1 = require(\"../../exceptions_public\");\nvar constants_1 = require(\"../../constants\");\nvar parser_1 = require(\"../parser\");\nexports.EOF_FOLLOW_KEY = {};\nexports.IN_RULE_RECOVERY_EXCEPTION = \"InRuleRecoveryException\";\nvar InRuleRecoveryException = /** @class */ (function (_super) {\n    __extends(InRuleRecoveryException, _super);\n    function InRuleRecoveryException(message) {\n        var _this = _super.call(this, message) || this;\n        _this.name = exports.IN_RULE_RECOVERY_EXCEPTION;\n        return _this;\n    }\n    return InRuleRecoveryException;\n}(Error));\nexports.InRuleRecoveryException = InRuleRecoveryException;\n/**\n * This trait is responsible for the error recovery and fault tolerant logic\n */\nvar Recoverable = /** @class */ (function () {\n    function Recoverable() {\n    }\n    Recoverable.prototype.initRecoverable = function (config) {\n        this.firstAfterRepMap = {};\n        this.resyncFollows = {};\n        this.recoveryEnabled = (0, has_1.default)(config, \"recoveryEnabled\")\n            ? config.recoveryEnabled // assumes end user provides the correct config value/type\n            : parser_1.DEFAULT_PARSER_CONFIG.recoveryEnabled;\n        // performance optimization, NOOP will be inlined which\n        // effectively means that this optional feature does not exist\n        // when not used.\n        if (this.recoveryEnabled) {\n            this.attemptInRepetitionRecovery = attemptInRepetitionRecovery;\n        }\n    };\n    Recoverable.prototype.getTokenToInsert = function (tokType) {\n        var tokToInsert = (0, tokens_public_1.createTokenInstance)(tokType, \"\", NaN, NaN, NaN, NaN, NaN, NaN);\n        tokToInsert.isInsertedInRecovery = true;\n        return tokToInsert;\n    };\n    Recoverable.prototype.canTokenTypeBeInsertedInRecovery = function (tokType) {\n        return true;\n    };\n    Recoverable.prototype.canTokenTypeBeDeletedInRecovery = function (tokType) {\n        return true;\n    };\n    Recoverable.prototype.tryInRepetitionRecovery = function (grammarRule, grammarRuleArgs, lookAheadFunc, expectedTokType) {\n        var _this = this;\n        // TODO: can the resyncTokenType be cached?\n        var reSyncTokType = this.findReSyncTokenType();\n        var savedLexerState = this.exportLexerState();\n        var resyncedTokens = [];\n        var passedResyncPoint = false;\n        var nextTokenWithoutResync = this.LA(1);\n        var currToken = this.LA(1);\n        var generateErrorMessage = function () {\n            var previousToken = _this.LA(0);\n            // we are preemptively re-syncing before an error has been detected, therefor we must reproduce\n            // the error that would have been thrown\n            var msg = _this.errorMessageProvider.buildMismatchTokenMessage({\n                expected: expectedTokType,\n                actual: nextTokenWithoutResync,\n                previous: previousToken,\n                ruleName: _this.getCurrRuleFullName()\n            });\n            var error = new exceptions_public_1.MismatchedTokenException(msg, nextTokenWithoutResync, _this.LA(0));\n            // the first token here will be the original cause of the error, this is not part of the resyncedTokens property.\n            error.resyncedTokens = (0, dropRight_1.default)(resyncedTokens);\n            _this.SAVE_ERROR(error);\n        };\n        while (!passedResyncPoint) {\n            // re-synced to a point where we can safely exit the repetition/\n            if (this.tokenMatcher(currToken, expectedTokType)) {\n                generateErrorMessage();\n                return; // must return here to avoid reverting the inputIdx\n            }\n            else if (lookAheadFunc.call(this)) {\n                // we skipped enough tokens so we can resync right back into another iteration of the repetition grammar rule\n                generateErrorMessage();\n                // recursive invocation in other to support multiple re-syncs in the same top level repetition grammar rule\n                grammarRule.apply(this, grammarRuleArgs);\n                return; // must return here to avoid reverting the inputIdx\n            }\n            else if (this.tokenMatcher(currToken, reSyncTokType)) {\n                passedResyncPoint = true;\n            }\n            else {\n                currToken = this.SKIP_TOKEN();\n                this.addToResyncTokens(currToken, resyncedTokens);\n            }\n        }\n        // we were unable to find a CLOSER point to resync inside the Repetition, reset the state.\n        // The parsing exception we were trying to prevent will happen in the NEXT parsing step. it may be handled by\n        // \"between rules\" resync recovery later in the flow.\n        this.importLexerState(savedLexerState);\n    };\n    Recoverable.prototype.shouldInRepetitionRecoveryBeTried = function (expectTokAfterLastMatch, nextTokIdx, notStuck) {\n        // Edge case of arriving from a MANY repetition which is stuck\n        // Attempting recovery in this case could cause an infinite loop\n        if (notStuck === false) {\n            return false;\n        }\n        // no need to recover, next token is what we expect...\n        if (this.tokenMatcher(this.LA(1), expectTokAfterLastMatch)) {\n            return false;\n        }\n        // error recovery is disabled during backtracking as it can make the parser ignore a valid grammar path\n        // and prefer some backtracking path that includes recovered errors.\n        if (this.isBackTracking()) {\n            return false;\n        }\n        // if we can perform inRule recovery (single token insertion or deletion) we always prefer that recovery algorithm\n        // because if it works, it makes the least amount of changes to the input stream (greedy algorithm)\n        //noinspection RedundantIfStatementJS\n        if (this.canPerformInRuleRecovery(expectTokAfterLastMatch, this.getFollowsForInRuleRecovery(expectTokAfterLastMatch, nextTokIdx))) {\n            return false;\n        }\n        return true;\n    };\n    // Error Recovery functionality\n    Recoverable.prototype.getFollowsForInRuleRecovery = function (tokType, tokIdxInRule) {\n        var grammarPath = this.getCurrentGrammarPath(tokType, tokIdxInRule);\n        var follows = this.getNextPossibleTokenTypes(grammarPath);\n        return follows;\n    };\n    Recoverable.prototype.tryInRuleRecovery = function (expectedTokType, follows) {\n        if (this.canRecoverWithSingleTokenInsertion(expectedTokType, follows)) {\n            var tokToInsert = this.getTokenToInsert(expectedTokType);\n            return tokToInsert;\n        }\n        if (this.canRecoverWithSingleTokenDeletion(expectedTokType)) {\n            var nextTok = this.SKIP_TOKEN();\n            this.consumeToken();\n            return nextTok;\n        }\n        throw new InRuleRecoveryException(\"sad sad panda\");\n    };\n    Recoverable.prototype.canPerformInRuleRecovery = function (expectedToken, follows) {\n        return (this.canRecoverWithSingleTokenInsertion(expectedToken, follows) ||\n            this.canRecoverWithSingleTokenDeletion(expectedToken));\n    };\n    Recoverable.prototype.canRecoverWithSingleTokenInsertion = function (expectedTokType, follows) {\n        var _this = this;\n        if (!this.canTokenTypeBeInsertedInRecovery(expectedTokType)) {\n            return false;\n        }\n        // must know the possible following tokens to perform single token insertion\n        if ((0, isEmpty_1.default)(follows)) {\n            return false;\n        }\n        var mismatchedTok = this.LA(1);\n        var isMisMatchedTokInFollows = (0, find_1.default)(follows, function (possibleFollowsTokType) {\n            return _this.tokenMatcher(mismatchedTok, possibleFollowsTokType);\n        }) !== undefined;\n        return isMisMatchedTokInFollows;\n    };\n    Recoverable.prototype.canRecoverWithSingleTokenDeletion = function (expectedTokType) {\n        if (!this.canTokenTypeBeDeletedInRecovery(expectedTokType)) {\n            return false;\n        }\n        var isNextTokenWhatIsExpected = this.tokenMatcher(this.LA(2), expectedTokType);\n        return isNextTokenWhatIsExpected;\n    };\n    Recoverable.prototype.isInCurrentRuleReSyncSet = function (tokenTypeIdx) {\n        var followKey = this.getCurrFollowKey();\n        var currentRuleReSyncSet = this.getFollowSetFromFollowKey(followKey);\n        return (0, includes_1.default)(currentRuleReSyncSet, tokenTypeIdx);\n    };\n    Recoverable.prototype.findReSyncTokenType = function () {\n        var allPossibleReSyncTokTypes = this.flattenFollowSet();\n        // this loop will always terminate as EOF is always in the follow stack and also always (virtually) in the input\n        var nextToken = this.LA(1);\n        var k = 2;\n        while (true) {\n            var foundMatch = (0, find_1.default)(allPossibleReSyncTokTypes, function (resyncTokType) {\n                var canMatch = (0, tokens_public_1.tokenMatcher)(nextToken, resyncTokType);\n                return canMatch;\n            });\n            if (foundMatch !== undefined) {\n                return foundMatch;\n            }\n            nextToken = this.LA(k);\n            k++;\n        }\n    };\n    Recoverable.prototype.getCurrFollowKey = function () {\n        // the length is at least one as we always add the ruleName to the stack before invoking the rule.\n        if (this.RULE_STACK.length === 1) {\n            return exports.EOF_FOLLOW_KEY;\n        }\n        var currRuleShortName = this.getLastExplicitRuleShortName();\n        var currRuleIdx = this.getLastExplicitRuleOccurrenceIndex();\n        var prevRuleShortName = this.getPreviousExplicitRuleShortName();\n        return {\n            ruleName: this.shortRuleNameToFullName(currRuleShortName),\n            idxInCallingRule: currRuleIdx,\n            inRule: this.shortRuleNameToFullName(prevRuleShortName)\n        };\n    };\n    Recoverable.prototype.buildFullFollowKeyStack = function () {\n        var _this = this;\n        var explicitRuleStack = this.RULE_STACK;\n        var explicitOccurrenceStack = this.RULE_OCCURRENCE_STACK;\n        return (0, map_1.default)(explicitRuleStack, function (ruleName, idx) {\n            if (idx === 0) {\n                return exports.EOF_FOLLOW_KEY;\n            }\n            return {\n                ruleName: _this.shortRuleNameToFullName(ruleName),\n                idxInCallingRule: explicitOccurrenceStack[idx],\n                inRule: _this.shortRuleNameToFullName(explicitRuleStack[idx - 1])\n            };\n        });\n    };\n    Recoverable.prototype.flattenFollowSet = function () {\n        var _this = this;\n        var followStack = (0, map_1.default)(this.buildFullFollowKeyStack(), function (currKey) {\n            return _this.getFollowSetFromFollowKey(currKey);\n        });\n        return (0, flatten_1.default)(followStack);\n    };\n    Recoverable.prototype.getFollowSetFromFollowKey = function (followKey) {\n        if (followKey === exports.EOF_FOLLOW_KEY) {\n            return [tokens_public_1.EOF];\n        }\n        var followName = followKey.ruleName + followKey.idxInCallingRule + constants_1.IN + followKey.inRule;\n        return this.resyncFollows[followName];\n    };\n    // It does not make any sense to include a virtual EOF token in the list of resynced tokens\n    // as EOF does not really exist and thus does not contain any useful information (line/column numbers)\n    Recoverable.prototype.addToResyncTokens = function (token, resyncTokens) {\n        if (!this.tokenMatcher(token, tokens_public_1.EOF)) {\n            resyncTokens.push(token);\n        }\n        return resyncTokens;\n    };\n    Recoverable.prototype.reSyncTo = function (tokType) {\n        var resyncedTokens = [];\n        var nextTok = this.LA(1);\n        while (this.tokenMatcher(nextTok, tokType) === false) {\n            nextTok = this.SKIP_TOKEN();\n            this.addToResyncTokens(nextTok, resyncedTokens);\n        }\n        // the last token is not part of the error.\n        return (0, dropRight_1.default)(resyncedTokens);\n    };\n    Recoverable.prototype.attemptInRepetitionRecovery = function (prodFunc, args, lookaheadFunc, dslMethodIdx, prodOccurrence, nextToksWalker, notStuck) {\n        // by default this is a NO-OP\n        // The actual implementation is with the function(not method) below\n    };\n    Recoverable.prototype.getCurrentGrammarPath = function (tokType, tokIdxInRule) {\n        var pathRuleStack = this.getHumanReadableRuleStack();\n        var pathOccurrenceStack = (0, clone_1.default)(this.RULE_OCCURRENCE_STACK);\n        var grammarPath = {\n            ruleStack: pathRuleStack,\n            occurrenceStack: pathOccurrenceStack,\n            lastTok: tokType,\n            lastTokOccurrence: tokIdxInRule\n        };\n        return grammarPath;\n    };\n    Recoverable.prototype.getHumanReadableRuleStack = function () {\n        var _this = this;\n        return (0, map_1.default)(this.RULE_STACK, function (currShortName) {\n            return _this.shortRuleNameToFullName(currShortName);\n        });\n    };\n    return Recoverable;\n}());\nexports.Recoverable = Recoverable;\nfunction attemptInRepetitionRecovery(prodFunc, args, lookaheadFunc, dslMethodIdx, prodOccurrence, nextToksWalker, notStuck) {\n    var key = this.getKeyForAutomaticLookahead(dslMethodIdx, prodOccurrence);\n    var firstAfterRepInfo = this.firstAfterRepMap[key];\n    if (firstAfterRepInfo === undefined) {\n        var currRuleName = this.getCurrRuleFullName();\n        var ruleGrammar = this.getGAstProductions()[currRuleName];\n        var walker = new nextToksWalker(ruleGrammar, prodOccurrence);\n        firstAfterRepInfo = walker.startWalking();\n        this.firstAfterRepMap[key] = firstAfterRepInfo;\n    }\n    var expectTokAfterLastMatch = firstAfterRepInfo.token;\n    var nextTokIdx = firstAfterRepInfo.occurrence;\n    var isEndOfRule = firstAfterRepInfo.isEndOfRule;\n    // special edge case of a TOP most repetition after which the input should END.\n    // this will force an attempt for inRule recovery in that scenario.\n    if (this.RULE_STACK.length === 1 &&\n        isEndOfRule &&\n        expectTokAfterLastMatch === undefined) {\n        expectTokAfterLastMatch = tokens_public_1.EOF;\n        nextTokIdx = 1;\n    }\n    // We don't have anything to re-sync to...\n    // this condition was extracted from `shouldInRepetitionRecoveryBeTried` to act as a type-guard\n    if (expectTokAfterLastMatch === undefined || nextTokIdx === undefined) {\n        return;\n    }\n    if (this.shouldInRepetitionRecoveryBeTried(expectTokAfterLastMatch, nextTokIdx, notStuck)) {\n        // TODO: performance optimization: instead of passing the original args here, we modify\n        // the args param (or create a new one) and make sure the lookahead func is explicitly provided\n        // to avoid searching the cache for it once more.\n        this.tryInRepetitionRecovery(prodFunc, args, lookaheadFunc, expectTokAfterLastMatch);\n    }\n}\nexports.attemptInRepetitionRecovery = attemptInRepetitionRecovery;\n","window.BICst = window.BICst || {};\r\n\r\nBICst.FORMULA_STATE = BICst.FORMULA_STATE || {};\r\nBICst.FORMULA_STATE.VALID = \"valid\";\r\nBICst.FORMULA_STATE.INVALID = \"invalid\";\r\nBICst.FORMULA_STATE.AGG_INVALID = \"aggInvalid\";\r\nBICst.FORMULA_STATE.FIXED_INVALID = \"fixedInvalid\";\r\nBICst.FORMULA_STATE.RAPID_INVALID = \"rapidInvalid\";\r\nBICst.FORMULA_STATE.FIELD_MISS = \"field_miss\";\r\nBICst.FORMULA_STATE.NOT_SUPPORT_STRING_OR_DATE = \"no_string_or_date\";\r\nBICst.FORMULA_STATE.DETAIL_FILTER_NOT_SUPPORT = \"detail filter not support\";\r\nBICst.FORMULA_WIDGET_FIELD_TYPE = BICst.FORMULA_WIDGET_FIELD_TYPE || {};\r\nBICst.FORMULA_WIDGET_FIELD_TYPE.DATE = 1;\r\nBICst.FORMULA_WIDGET_FIELD_TYPE.STRING = 2;\r\nBICst.FORMULA_WIDGET_FIELD_TYPE.NUMBER = 3;\r\nBICst.DESIGN = BICst.DESIGN || {};\r\nBICst.DESIGN.TABLE_ROW_SUM_POSITION = BICst.DESIGN.TABLE_ROW_SUM_POSITION || {};\r\nBICst.DESIGN.TABLE_ROW_SUM_POSITION.TOP = \"top\";\r\nBICst.DESIGN.TABLE_ROW_SUM_POSITION.BOTTOM = \"bottom\";\r\nBICst.FORMULA_KEYWORD_TYPE = {};\r\nBICst.FORMULA_KEYWORD_TYPE.KEYWORD = 1;\r\nBICst.FORMULA_KEYWORD_TYPE.FUNCTION = 2;\r\nBICst.FORMULA_KEYWORD_TYPE.PARAM = 3;","// 工程配置\r\n(function () {\r\n    // 注册滚动条\r\n    BI.config(\"bi.grid_table_scrollbar\", function (ob) {\r\n        if (BI.isIE9Below()) {\r\n            return BI.extend(ob, {type: \"bi.native_table_scrollbar\"});\r\n        }\r\n        return ob;\r\n\r\n    });\r\n    BI.config(\"bi.grid_table_horizontal_scrollbar\", function (ob) {\r\n        if (BI.isIE9Below()) {\r\n            return BI.extend(ob, {type: \"bi.native_table_horizontal_scrollbar\"});\r\n        }\r\n        return ob;\r\n\r\n    });\r\n\r\n    // 注册控件\r\n    // BI.Plugin.registerWidget(\"bi.grid_table\", function (ob) {\r\n    //     // 非chrome下滚动条滑动效果不好，禁止掉\r\n    //     if (!(BI.isChrome() && BI.isWindows() && !BI.isEdge())) {\r\n    //         return BI.extend(ob, {type: \"bi.quick_grid_table\"});\r\n    //     }\r\n    //     return ob;\r\n\r\n    // });\r\n    // BI.Plugin.registerWidget(\"bi.collection_table\", function (ob) {\r\n    //     // 非chrome下滚动条滑动效果不好，禁止掉\r\n    //     if (!(BI.isChrome() && BI.isWindows() && !BI.isEdge())) {\r\n    //         return BI.extend(ob, {type: \"bi.quick_collection_table\"});\r\n    //     }\r\n    //     return ob;\r\n\r\n    // });\r\n    // BI.Plugin.registerWidget(\"bi.dynamic_collection_table\", function (ob) {\r\n    //     // 非chrome下滚动条滑动效果不好，禁止掉\r\n    //     if (!(BI.isChrome() && BI.isWindows() && !BI.isEdge())) {\r\n    //         return BI.extend(ob, {type: \"bi.quick_dynamic_collection_table\"});\r\n    //     }\r\n    //     return ob;\r\n    //\r\n    // });\r\n\r\n    BI.config(\"bi.watermark\", function (ob) {\r\n        if (BI.isIE9Below()) {\r\n            return BI.extend(ob, {type: \"bi.div.watermark\"});\r\n        }\r\n        return ob;\r\n\r\n    });\r\n    // IE8下滚动条用原生的\r\n    _global.BI.$ && BI.$(function () {\r\n        if (BI.isIE9Below()) {\r\n            BI.GridTableScrollbar.SIZE = 18;\r\n        }\r\n    });\r\n})();\r\n","/* !\r\n * clipboard.js v1.6.1\r\n * https://zenorocha.github.io/clipboard.js\r\n *\r\n * Licensed MIT © Zeno Rocha\r\n */\r\ntry {// IE8下会抛错\r\n    (function (f) {\r\n            var g;\r\n            if (typeof window !== \"undefined\") {\r\n                g = window;\r\n            } else if (typeof global !== \"undefined\") {\r\n                g = global;\r\n            } else if (typeof self !== \"undefined\") {\r\n                g = self;\r\n            } else {\r\n                g = this;\r\n            }\r\n            g.Clipboard = f();\r\n    })(function () {\r\n        var define, module, exports;\r\n        return (function e (t, n, r) {\r\n            function s (o, u) {\r\n                if (!n[o]) {\r\n                    if (!t[o]) {\r\n                        var a = typeof require === \"function\" && require;\r\n                        if (!u && a)return a(o, !0);\r\n                        if (i)return i(o, !0);\r\n                        var f = new Error(\"Cannot find module '\" + o + \"'\");\r\n                        throw f.code = \"MODULE_NOT_FOUND\", f;\r\n                    }\r\n                    var l = n[o] = {exports: {}};\r\n                    t[o][0].call(l.exports, function (e) {\r\n                        var n = t[o][1][e];\r\n                        return s(n ? n : e);\r\n                    }, l, l.exports, e, t, n, r);\r\n                }\r\n                return n[o].exports;\r\n            }\r\n\r\n            var i = typeof require === \"function\" && require;\r\n            for (var o = 0; o < r.length; o++)s(r[o]);\r\n            return s;\r\n        })({\r\n            1: [function (require, module, exports) {\r\n                var DOCUMENT_NODE_TYPE = 9;\r\n\r\n                /**\r\n                 * A polyfill for Element.matches()\r\n                 */\r\n                if (typeof Element !== \"undefined\" && !Element.prototype.matches) {\r\n                    var proto = Element.prototype;\r\n\r\n                    proto.matches = proto.matchesSelector ||\r\n                        proto.mozMatchesSelector ||\r\n                        proto.msMatchesSelector ||\r\n                        proto.oMatchesSelector ||\r\n                        proto.webkitMatchesSelector;\r\n                }\r\n\r\n                /**\r\n                 * Finds the closest parent that matches a selector.\r\n                 *\r\n                 * @param {Element} element\r\n                 * @param {String} selector\r\n                 * @return {Function}\r\n                 */\r\n                function closest (element, selector) {\r\n                    while (element && element.nodeType !== DOCUMENT_NODE_TYPE) {\r\n                        if (element.matches(selector)) return element;\r\n                        element = element.parentNode;\r\n                    }\r\n                }\r\n\r\n                module.exports = closest;\r\n\r\n            }, {}], 2: [function (require, module, exports) {\r\n                var closest = require(\"./closest\");\r\n\r\n                /**\r\n                 * Delegates event to a selector.\r\n                 *\r\n                 * @param {Element} element\r\n                 * @param {String} selector\r\n                 * @param {String} type\r\n                 * @param {Function} callback\r\n                 * @param {Boolean} useCapture\r\n                 * @return {Object}\r\n                 */\r\n                function delegate (element, selector, type, callback, useCapture) {\r\n                    var listenerFn = listener.apply(this, arguments);\r\n\r\n                    element.addEventListener(type, listenerFn, useCapture);\r\n\r\n                    return {\r\n                        destroy: function () {\r\n                            element.removeEventListener(type, listenerFn, useCapture);\r\n                        }\r\n                    };\r\n                }\r\n\r\n                /**\r\n                 * Finds closest match and invokes callback.\r\n                 *\r\n                 * @param {Element} element\r\n                 * @param {String} selector\r\n                 * @param {String} type\r\n                 * @param {Function} callback\r\n                 * @return {Function}\r\n                 */\r\n                function listener (element, selector, type, callback) {\r\n                    return function (e) {\r\n                        e.delegateTarget = closest(e.target, selector);\r\n\r\n                        if (e.delegateTarget) {\r\n                            callback.call(element, e);\r\n                        }\r\n                    };\r\n                }\r\n\r\n                module.exports = delegate;\r\n\r\n            }, {\"./closest\": 1}], 3: [function (require, module, exports) {\r\n                /**\r\n                 * Check if argument is a HTML element.\r\n                 *\r\n                 * @param {Object} value\r\n                 * @return {Boolean}\r\n                 */\r\n                exports.node = function (value) {\r\n                    return value !== undefined\r\n                        && value instanceof HTMLElement\r\n                        && value.nodeType === 1;\r\n                };\r\n\r\n                /**\r\n                 * Check if argument is a list of HTML elements.\r\n                 *\r\n                 * @param {Object} value\r\n                 * @return {Boolean}\r\n                 */\r\n                exports.nodeList = function (value) {\r\n                    var type = Object.prototype.toString.call(value);\r\n\r\n                    return value !== undefined\r\n                        && (type === \"[object NodeList]\" || type === \"[object HTMLCollection]\")\r\n                        && (\"length\" in value)\r\n                        && (value.length === 0 || exports.node(value[0]));\r\n                };\r\n\r\n                /**\r\n                 * Check if argument is a string.\r\n                 *\r\n                 * @param {Object} value\r\n                 * @return {Boolean}\r\n                 */\r\n                exports.string = function (value) {\r\n                    return typeof value === \"string\"\r\n                        || value instanceof String;\r\n                };\r\n\r\n                /**\r\n                 * Check if argument is a function.\r\n                 *\r\n                 * @param {Object} value\r\n                 * @return {Boolean}\r\n                 */\r\n                exports.fn = function (value) {\r\n                    var type = Object.prototype.toString.call(value);\r\n\r\n                    return type === \"[object Function]\";\r\n                };\r\n\r\n            }, {}], 4: [function (require, module, exports) {\r\n                var is = require(\"./is\");\r\n                var delegate = require(\"delegate\");\r\n\r\n                /**\r\n                 * Validates all params and calls the right\r\n                 * listener function based on its target type.\r\n                 *\r\n                 * @param {String|HTMLElement|HTMLCollection|NodeList} target\r\n                 * @param {String} type\r\n                 * @param {Function} callback\r\n                 * @return {Object}\r\n                 */\r\n                function listen (target, type, callback) {\r\n                    if (!target && !type && !callback) {\r\n                        throw new Error(\"Missing required arguments\");\r\n                    }\r\n\r\n                    if (!is.string(type)) {\r\n                        throw new TypeError(\"Second argument must be a String\");\r\n                    }\r\n\r\n                    if (!is.fn(callback)) {\r\n                        throw new TypeError(\"Third argument must be a Function\");\r\n                    }\r\n\r\n                    if (is.node(target)) {\r\n                        return listenNode(target, type, callback);\r\n                    } else if (is.nodeList(target)) {\r\n                        return listenNodeList(target, type, callback);\r\n                    } else if (is.string(target)) {\r\n                        return listenSelector(target, type, callback);\r\n                    }\r\n\r\n                    throw new TypeError(\"First argument must be a String, HTMLElement, HTMLCollection, or NodeList\");\r\n\r\n                }\r\n\r\n                /**\r\n                 * Adds an event listener to a HTML element\r\n                 * and returns a remove listener function.\r\n                 *\r\n                 * @param {HTMLElement} node\r\n                 * @param {String} type\r\n                 * @param {Function} callback\r\n                 * @return {Object}\r\n                 */\r\n                function listenNode (node, type, callback) {\r\n                    node.addEventListener(type, callback);\r\n\r\n                    return {\r\n                        destroy: function () {\r\n                            node.removeEventListener(type, callback);\r\n                        }\r\n                    };\r\n                }\r\n\r\n                /**\r\n                 * Add an event listener to a list of HTML elements\r\n                 * and returns a remove listener function.\r\n                 *\r\n                 * @param {NodeList|HTMLCollection} nodeList\r\n                 * @param {String} type\r\n                 * @param {Function} callback\r\n                 * @return {Object}\r\n                 */\r\n                function listenNodeList (nodeList, type, callback) {\r\n                    Array.prototype.forEach.call(nodeList, function (node) {\r\n                        node.addEventListener(type, callback);\r\n                    });\r\n\r\n                    return {\r\n                        destroy: function () {\r\n                            Array.prototype.forEach.call(nodeList, function (node) {\r\n                                node.removeEventListener(type, callback);\r\n                            });\r\n                        }\r\n                    };\r\n                }\r\n\r\n                /**\r\n                 * Add an event listener to a selector\r\n                 * and returns a remove listener function.\r\n                 *\r\n                 * @param {String} selector\r\n                 * @param {String} type\r\n                 * @param {Function} callback\r\n                 * @return {Object}\r\n                 */\r\n                function listenSelector (selector, type, callback) {\r\n                    return delegate(document.body, selector, type, callback);\r\n                }\r\n\r\n                module.exports = listen;\r\n\r\n            }, {\"./is\": 3, delegate: 2}], 5: [function (require, module, exports) {\r\n                function select (element) {\r\n                    var selectedText;\r\n\r\n                    if (element.nodeName === \"SELECT\") {\r\n                        element.focus();\r\n\r\n                        selectedText = element.value;\r\n                    } else if (element.nodeName === \"INPUT\" || element.nodeName === \"TEXTAREA\") {\r\n                        var isReadOnly = element.hasAttribute(\"readonly\");\r\n\r\n                        if (!isReadOnly) {\r\n                            element.setAttribute(\"readonly\", \"\");\r\n                        }\r\n\r\n                        element.select();\r\n                        element.setSelectionRange(0, element.value.length);\r\n\r\n                        if (!isReadOnly) {\r\n                            element.removeAttribute(\"readonly\");\r\n                        }\r\n\r\n                        selectedText = element.value;\r\n                    } else {\r\n                        if (element.hasAttribute(\"contenteditable\")) {\r\n                            element.focus();\r\n                        }\r\n\r\n                        var selection = window.getSelection();\r\n                        var range = document.createRange();\r\n\r\n                        range.selectNodeContents(element);\r\n                        selection.removeAllRanges();\r\n                        selection.addRange(range);\r\n\r\n                        selectedText = selection.toString();\r\n                    }\r\n\r\n                    return selectedText;\r\n                }\r\n\r\n                module.exports = select;\r\n\r\n            }, {}], 6: [function (require, module, exports) {\r\n                function E () {\r\n                    // Keep this empty so it's easier to inherit from\r\n                    // (via https://github.com/lipsmack from https://github.com/scottcorgan/tiny-emitter/issues/3)\r\n                }\r\n\r\n                E.prototype = {\r\n                    on: function (name, callback, ctx) {\r\n                        var e = this.e || (this.e = {});\r\n\r\n                        (e[name] || (e[name] = [])).push({\r\n                            fn: callback,\r\n                            ctx: ctx\r\n                        });\r\n\r\n                        return this;\r\n                    },\r\n\r\n                    once: function (name, callback, ctx) {\r\n                        var self = this;\r\n\r\n                        function listener () {\r\n                            self.off(name, listener);\r\n                            callback.apply(ctx, arguments);\r\n                        }\r\n\r\n                        listener._ = callback;\r\n                        return this.on(name, listener, ctx);\r\n                    },\r\n\r\n                    emit: function (name) {\r\n                        var data = [].slice.call(arguments, 1);\r\n                        var evtArr = ((this.e || (this.e = {}))[name] || []).slice();\r\n                        var i = 0;\r\n                        var len = evtArr.length;\r\n\r\n                        for (i; i < len; i++) {\r\n                            evtArr[i].fn.apply(evtArr[i].ctx, data);\r\n                        }\r\n\r\n                        return this;\r\n                    },\r\n\r\n                    off: function (name, callback) {\r\n                        var e = this.e || (this.e = {});\r\n                        var evts = e[name];\r\n                        var liveEvents = [];\r\n\r\n                        if (evts && callback) {\r\n                            for (var i = 0, len = evts.length; i < len; i++) {\r\n                                if (evts[i].fn !== callback && evts[i].fn._ !== callback) {liveEvents.push(evts[i]);}\r\n                            }\r\n                        }\r\n\r\n                        // Remove event from queue to prevent memory leak\r\n                        // Suggested by https://github.com/lazd\r\n                        // Ref: https://github.com/scottcorgan/tiny-emitter/commit/c6ebfaa9bc973b33d110a84a307742b7cf94c953#commitcomment-5024910\r\n\r\n                        (liveEvents.length)\r\n                            ? e[name] = liveEvents\r\n                            : delete e[name];\r\n\r\n                        return this;\r\n                    }\r\n                };\r\n\r\n                module.exports = E;\r\n\r\n            }, {}], 7: [function (require, module, exports) {\r\n                (function (global, factory) {\r\n                    if (typeof define === \"function\" && define.amd) {\r\n                        define([\"module\", \"select\"], factory);\r\n                    } else if (typeof exports !== \"undefined\") {\r\n                        factory(module, require(\"select\"));\r\n                    } else {\r\n                        var mod = {\r\n                            exports: {}\r\n                        };\r\n                        factory(mod, global.select);\r\n                        global.clipboardAction = mod.exports;\r\n                    }\r\n                })(this, function (module, _select) {\r\n                    \"use strict\";\r\n\r\n                    var _select2 = _interopRequireDefault(_select);\r\n\r\n                    function _interopRequireDefault (obj) {\r\n                        return obj && obj.__esModule ? obj : {\r\n                            \"default\": obj\r\n                        };\r\n                    }\r\n\r\n                    var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\r\n                        return typeof obj;\r\n                    } : function (obj) {\r\n                        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\r\n                    };\r\n\r\n                    function _classCallCheck (instance, Constructor) {\r\n                        if (!(instance instanceof Constructor)) {\r\n                            throw new TypeError(\"Cannot call a class as a function\");\r\n                        }\r\n                    }\r\n\r\n                    var _createClass = function () {\r\n                        function defineProperties (target, props) {\r\n                            for (var i = 0; i < props.length; i++) {\r\n                                var descriptor = props[i];\r\n                                descriptor.enumerable = descriptor.enumerable || false;\r\n                                descriptor.configurable = true;\r\n                                if (\"value\" in descriptor) descriptor.writable = true;\r\n                                Object.defineProperty(target, descriptor.key, descriptor);\r\n                            }\r\n                        }\r\n\r\n                        return function (Constructor, protoProps, staticProps) {\r\n                            if (protoProps) defineProperties(Constructor.prototype, protoProps);\r\n                            if (staticProps) defineProperties(Constructor, staticProps);\r\n                            return Constructor;\r\n                        };\r\n                    }();\r\n\r\n                    var ClipboardAction = function () {\r\n                        /**\r\n                         * @param {Object} options\r\n                         */\r\n                        function ClipboardAction (options) {\r\n                            _classCallCheck(this, ClipboardAction);\r\n\r\n                            this.resolveOptions(options);\r\n                            this.initSelection();\r\n                        }\r\n\r\n                        /**\r\n                         * Defines base properties passed from constructor.\r\n                         * @param {Object} options\r\n                         */\r\n\r\n\r\n                        _createClass(ClipboardAction, [{\r\n                            key: \"resolveOptions\",\r\n                            value: function resolveOptions () {\r\n                                var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\r\n\r\n                                this.action = options.action;\r\n                                this.emitter = options.emitter;\r\n                                this.target = options.target;\r\n                                this.text = options.text;\r\n                                this.trigger = options.trigger;\r\n\r\n                                this.selectedText = \"\";\r\n                            }\r\n                        }, {\r\n                            key: \"initSelection\",\r\n                            value: function initSelection () {\r\n                                if (this.text) {\r\n                                    this.selectFake();\r\n                                } else if (this.target) {\r\n                                    this.selectTarget();\r\n                                }\r\n                            }\r\n                        }, {\r\n                            key: \"selectFake\",\r\n                            value: function selectFake () {\r\n                                var _this = this;\r\n\r\n                                var isRTL = document.documentElement.getAttribute(\"dir\") == \"rtl\";\r\n\r\n                                this.removeFake();\r\n\r\n                                this.fakeHandlerCallback = function () {\r\n                                    return _this.removeFake();\r\n                                };\r\n                                this.fakeHandler = document.body.addEventListener(\"click\", this.fakeHandlerCallback) || true;\r\n\r\n                                this.fakeElem = document.createElement(\"textarea\");\r\n                                // Prevent zooming on iOS\r\n                                this.fakeElem.style.fontSize = \"12pt\";\r\n                                // Reset box model\r\n                                this.fakeElem.style.border = \"0\";\r\n                                this.fakeElem.style.padding = \"0\";\r\n                                this.fakeElem.style.margin = \"0\";\r\n                                // Move element out of screen horizontally\r\n                                this.fakeElem.style.position = \"absolute\";\r\n                                this.fakeElem.style[isRTL ? \"right\" : \"left\"] = \"-9999px\";\r\n                                // Move element to the same position vertically\r\n                                var yPosition = window.pageYOffset || document.documentElement.scrollTop;\r\n                                this.fakeElem.style.top = yPosition + \"px\";\r\n\r\n                                this.fakeElem.setAttribute(\"readonly\", \"\");\r\n                                this.fakeElem.value = this.text;\r\n\r\n                                document.body.appendChild(this.fakeElem);\r\n\r\n                                this.selectedText = (0, _select2[\"default\"])(this.fakeElem);\r\n                                this.copyText();\r\n                            }\r\n                        }, {\r\n                            key: \"removeFake\",\r\n                            value: function removeFake () {\r\n                                if (this.fakeHandler) {\r\n                                    document.body.removeEventListener(\"click\", this.fakeHandlerCallback);\r\n                                    this.fakeHandler = null;\r\n                                    this.fakeHandlerCallback = null;\r\n                                }\r\n\r\n                                if (this.fakeElem) {\r\n                                    document.body.removeChild(this.fakeElem);\r\n                                    this.fakeElem = null;\r\n                                }\r\n                            }\r\n                        }, {\r\n                            key: \"selectTarget\",\r\n                            value: function selectTarget () {\r\n                                this.selectedText = (0, _select2[\"default\"])(this.target);\r\n                                this.copyText();\r\n                            }\r\n                        }, {\r\n                            key: \"copyText\",\r\n                            value: function copyText () {\r\n                                var succeeded = void 0;\r\n\r\n                                try {\r\n                                    succeeded = document.execCommand(this.action);\r\n                                } catch (err) {\r\n                                    succeeded = false;\r\n                                }\r\n\r\n                                this.handleResult(succeeded);\r\n                            }\r\n                        }, {\r\n                            key: \"handleResult\",\r\n                            value: function handleResult (succeeded) {\r\n                                this.emitter.emit(succeeded ? \"success\" : \"error\", {\r\n                                    action: this.action,\r\n                                    text: this.selectedText,\r\n                                    trigger: this.trigger,\r\n                                    clearSelection: this.clearSelection.bind(this)\r\n                                });\r\n                            }\r\n                        }, {\r\n                            key: \"clearSelection\",\r\n                            value: function clearSelection () {\r\n                                if (this.target) {\r\n                                    this.target.blur();\r\n                                }\r\n\r\n                                window.getSelection().removeAllRanges();\r\n                            }\r\n                        }, {\r\n                            key: \"destroy\",\r\n                            value: function destroy () {\r\n                                this.removeFake();\r\n                            }\r\n                        }, {\r\n                            key: \"action\",\r\n                            set: function set () {\r\n                                var action = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"copy\";\r\n\r\n                                this._action = action;\r\n\r\n                                if (this._action !== \"copy\" && this._action !== \"cut\") {\r\n                                    throw new Error(\"Invalid \\\"action\\\" value, use either \\\"copy\\\" or \\\"cut\\\"\");\r\n                                }\r\n                            },\r\n                            get: function get () {\r\n                                return this._action;\r\n                            }\r\n                        }, {\r\n                            key: \"target\",\r\n                            set: function set (target) {\r\n                                if (target !== undefined) {\r\n                                    if (target && (typeof target === \"undefined\" ? \"undefined\" : _typeof(target)) === \"object\" && target.nodeType === 1) {\r\n                                        if (this.action === \"copy\" && target.hasAttribute(\"disabled\")) {\r\n                                            throw new Error(\"Invalid \\\"target\\\" attribute. Please use \\\"readonly\\\" instead of \\\"disabled\\\" attribute\");\r\n                                        }\r\n\r\n                                        if (this.action === \"cut\" && (target.hasAttribute(\"readonly\") || target.hasAttribute(\"disabled\"))) {\r\n                                            throw new Error(\"Invalid \\\"target\\\" attribute. You can't cut text from elements with \\\"readonly\\\" or \\\"disabled\\\" attributes\");\r\n                                        }\r\n\r\n                                        this._target = target;\r\n                                    } else {\r\n                                        throw new Error(\"Invalid \\\"target\\\" value, use a valid Element\");\r\n                                    }\r\n                                }\r\n                            },\r\n                            get: function get () {\r\n                                return this._target;\r\n                            }\r\n                        }]);\r\n\r\n                        return ClipboardAction;\r\n                    }();\r\n\r\n                    module.exports = ClipboardAction;\r\n                });\r\n\r\n            }, {select: 5}], 8: [function (require, module, exports) {\r\n                (function (global, factory) {\r\n                    if (typeof define === \"function\" && define.amd) {\r\n                        define([\"module\", \"./clipboard-action\", \"tiny-emitter\", \"good-listener\"], factory);\r\n                    } else if (typeof exports !== \"undefined\") {\r\n                        factory(module, require(\"./clipboard-action\"), require(\"tiny-emitter\"), require(\"good-listener\"));\r\n                    } else {\r\n                        var mod = {\r\n                            exports: {}\r\n                        };\r\n                        factory(mod, global.clipboardAction, global.tinyEmitter, global.goodListener);\r\n                        global.clipboard = mod.exports;\r\n                    }\r\n                })(this, function (module, _clipboardAction, _tinyEmitter, _goodListener) {\r\n                    \"use strict\";\r\n\r\n                    var _clipboardAction2 = _interopRequireDefault(_clipboardAction);\r\n\r\n                    var _tinyEmitter2 = _interopRequireDefault(_tinyEmitter);\r\n\r\n                    var _goodListener2 = _interopRequireDefault(_goodListener);\r\n\r\n                    function _interopRequireDefault (obj) {\r\n                        return obj && obj.__esModule ? obj : {\r\n                            \"default\": obj\r\n                        };\r\n                    }\r\n\r\n                    function _classCallCheck (instance, Constructor) {\r\n                        if (!(instance instanceof Constructor)) {\r\n                            throw new TypeError(\"Cannot call a class as a function\");\r\n                        }\r\n                    }\r\n\r\n                    var _createClass = function () {\r\n                        function defineProperties (target, props) {\r\n                            for (var i = 0; i < props.length; i++) {\r\n                                var descriptor = props[i];\r\n                                descriptor.enumerable = descriptor.enumerable || false;\r\n                                descriptor.configurable = true;\r\n                                if (\"value\" in descriptor) descriptor.writable = true;\r\n                                Object.defineProperty(target, descriptor.key, descriptor);\r\n                            }\r\n                        }\r\n\r\n                        return function (Constructor, protoProps, staticProps) {\r\n                            if (protoProps) defineProperties(Constructor.prototype, protoProps);\r\n                            if (staticProps) defineProperties(Constructor, staticProps);\r\n                            return Constructor;\r\n                        };\r\n                    }();\r\n\r\n                    function _possibleConstructorReturn (self, call) {\r\n                        if (!self) {\r\n                            throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\r\n                        }\r\n\r\n                        return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\r\n                    }\r\n\r\n                    function _inherits (subClass, superClass) {\r\n                        if (typeof superClass !== \"function\" && superClass !== null) {\r\n                            throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\r\n                        }\r\n\r\n                        subClass.prototype = Object.create(superClass && superClass.prototype, {\r\n                            constructor: {\r\n                                value: subClass,\r\n                                enumerable: false,\r\n                                writable: true,\r\n                                configurable: true\r\n                            }\r\n                        });\r\n                        if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\r\n                    }\r\n\r\n                    var Clipboard = function (_Emitter) {\r\n                        _inherits(Clipboard, _Emitter);\r\n\r\n                        /**\r\n                         * @param {String|HTMLElement|HTMLCollection|NodeList} trigger\r\n                         * @param {Object} options\r\n                         */\r\n                        function Clipboard (trigger, options) {\r\n                            _classCallCheck(this, Clipboard);\r\n\r\n                            var _this = _possibleConstructorReturn(this, (Clipboard.__proto__ || Object.getPrototypeOf(Clipboard)).call(this));\r\n\r\n                            _this.resolveOptions(options);\r\n                            _this.listenClick(trigger);\r\n                            return _this;\r\n                        }\r\n\r\n                        /**\r\n                         * Defines if attributes would be resolved using internal setter functions\r\n                         * or custom functions that were passed in the constructor.\r\n                         * @param {Object} options\r\n                         */\r\n\r\n\r\n                        _createClass(Clipboard, [{\r\n                            key: \"resolveOptions\",\r\n                            value: function resolveOptions () {\r\n                                var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\r\n\r\n                                this.action = typeof options.action === \"function\" ? options.action : this.defaultAction;\r\n                                this.target = typeof options.target === \"function\" ? options.target : this.defaultTarget;\r\n                                this.text = typeof options.text === \"function\" ? options.text : this.defaultText;\r\n                            }\r\n                        }, {\r\n                            key: \"listenClick\",\r\n                            value: function listenClick (trigger) {\r\n                                var _this2 = this;\r\n\r\n                                this.listener = (0, _goodListener2[\"default\"])(trigger, \"click\", function (e) {\r\n                                    return _this2.onClick(e);\r\n                                });\r\n                            }\r\n                        }, {\r\n                            key: \"onClick\",\r\n                            value: function onClick (e) {\r\n                                var trigger = e.delegateTarget || e.currentTarget;\r\n\r\n                                if (this.clipboardAction) {\r\n                                    this.clipboardAction = null;\r\n                                }\r\n\r\n                                this.clipboardAction = new _clipboardAction2[\"default\"]({\r\n                                    action: this.action(trigger),\r\n                                    target: this.target(trigger),\r\n                                    text: this.text(trigger),\r\n                                    trigger: trigger,\r\n                                    emitter: this\r\n                                });\r\n                            }\r\n                        }, {\r\n                            key: \"defaultAction\",\r\n                            value: function defaultAction (trigger) {\r\n                                return getAttributeValue(\"action\", trigger);\r\n                            }\r\n                        }, {\r\n                            key: \"defaultTarget\",\r\n                            value: function defaultTarget (trigger) {\r\n                                var selector = getAttributeValue(\"target\", trigger);\r\n\r\n                                if (selector) {\r\n                                    return document.querySelector(selector);\r\n                                }\r\n                            }\r\n                        }, {\r\n                            key: \"defaultText\",\r\n                            value: function defaultText (trigger) {\r\n                                return getAttributeValue(\"text\", trigger);\r\n                            }\r\n                        }, {\r\n                            key: \"destroy\",\r\n                            value: function destroy () {\r\n                                this.listener.destroy();\r\n\r\n                                if (this.clipboardAction) {\r\n                                    this.clipboardAction.destroy();\r\n                                    this.clipboardAction = null;\r\n                                }\r\n                            }\r\n                        }], [{\r\n                            key: \"isSupported\",\r\n                            value: function isSupported () {\r\n                                var action = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [\"copy\", \"cut\"];\r\n\r\n                                var actions = typeof action === \"string\" ? [action] : action;\r\n                                var support = !!document.queryCommandSupported;\r\n\r\n                                actions.forEach(function (action) {\r\n                                    support = support && !!document.queryCommandSupported(action);\r\n                                });\r\n\r\n                                return support;\r\n                            }\r\n                        }]);\r\n\r\n                        return Clipboard;\r\n                    }(_tinyEmitter2[\"default\"]);\r\n\r\n                    /**\r\n                     * Helper function to retrieve attribute value.\r\n                     * @param {String} suffix\r\n                     * @param {Element} element\r\n                     */\r\n                    function getAttributeValue (suffix, element) {\r\n                        var attribute = \"data-clipboard-\" + suffix;\r\n\r\n                        if (!element.hasAttribute(attribute)) {\r\n                            return;\r\n                        }\r\n\r\n                        return element.getAttribute(attribute);\r\n                    }\r\n\r\n                    module.exports = Clipboard;\r\n                });\r\n\r\n            }, {\"./clipboard-action\": 7, \"good-listener\": 4, \"tiny-emitter\": 6}]\r\n        }, {}, [8])(8);\r\n    });\r\n} catch (e) {}","/**\r\n * 复制\r\n * Created by GUY on 2016/2/16.\r\n * @class BI.ClipBoard\r\n * @extends BI.BasicButton\r\n */\r\nBI.ClipBoard = BI.inherit(BI.BasicButton, {\r\n    _defaultConfig: function () {\r\n        return BI.extend(BI.ClipBoard.superclass._defaultConfig.apply(this, arguments), {\r\n            extraCls: \"bi-clipboard\",\r\n            el: {\r\n                type: \"bi.layout\"\r\n            },\r\n            copy: BI.emptyFn,\r\n            afterCopy: BI.emptyFn\r\n        });\r\n    },\r\n\r\n    render: function () {\r\n        return this.options.el;\r\n    },\r\n\r\n    mounted: function () {\r\n        var self = this, o = this.options;\r\n        if (window.Clipboard) {\r\n            this.clipboard = new Clipboard(this.element[0], {\r\n                text: function () {\r\n                    return BI.isFunction(o.copy) ? o.copy() : o.copy;\r\n                }\r\n            });\r\n            this.clipboard.on(\"success\", o.afterCopy);\r\n        } else if (window.clipboardData) { // IE8下支持复制功能\r\n            this.element.on(\"click\", function () {\r\n                var result = window.clipboardData.setData(\"Text\", BI.isFunction(o.copy) ? o.copy() : o.copy);\r\n                if (result) {\r\n                    o.afterCopy();\r\n                }\r\n            });\r\n        } else {\r\n            throw new Error(\"not support\");\r\n        }\r\n    },\r\n\r\n    destroyed: function () {\r\n        this.clipboard && this.clipboard.destroy();\r\n    }\r\n});\r\n\r\nBI.shortcut(\"bi.clipboard\", BI.ClipBoard);\r\n","!(function () {\r\n    BI.Draggable = BI.inherit(BI.Widget, {\r\n        props: {\r\n            baseCls: \"bi-materials-draggable\",\r\n            onDragStart: BI.emptyFn,\r\n            onDrag: BI.emptyFn,\r\n            onDragEnd: BI.emptyFn,\r\n            el: {}\r\n        },\r\n\r\n        render: function () {\r\n            var self = this, o = this.options;\r\n            this.startX = 0;\r\n            this.startY = 0;\r\n            this.tracker = new BI.MouseMoveTracker(function (deltaX, deltaY) {\r\n                var W = BI.$(\"body\").width(), H = BI.$(\"body\").height();\r\n                var size = self.element.bounds();\r\n                self.startX += deltaX;\r\n                self.startY += deltaY;\r\n                var left = BI.clamp(self.startX, 0, W - size.width);\r\n                var top = BI.clamp(self.startY, 0, H - size.height);\r\n                self.element.css({\r\n                    left: left + \"px\",\r\n                    top: top + \"px\"\r\n                });\r\n                o.onDrag({\r\n                    left: left,\r\n                    top: top\r\n                });\r\n            }, function () {\r\n                self.tracker.releaseMouseMoves();\r\n                o.onDragEnd();\r\n            }, window);\r\n\r\n            return this.options.el;\r\n        },\r\n\r\n        mounted: function () {\r\n            var self = this, o = this.options;\r\n            this.element.mousedown(function (e) {\r\n                var pos = self.element.offset();\r\n                self.startX = pos.left;\r\n                self.startY = pos.top;\r\n                self.tracker.captureMouseMoves(e);\r\n                o.onDragStart();\r\n            });\r\n        }\r\n    });\r\n    BI.shortcut(\"bi.materials.draggable\", BI.Draggable);\r\n})();","/**\r\n *\r\n * Created by GUY on 2016/1/15.\r\n * @class BI.CodeEditor\r\n * @extends BI.Single\r\n */\r\nBI.CodeEditor = BI.inherit(BI.Single, {\r\n    props: {\r\n        baseCls: \"bi-code-editor\",\r\n        value: \"\",\r\n        watermark: \"\",\r\n        lineHeight: 2,\r\n        readOnly: false,\r\n        lineNumbers: false,\r\n        paramMatch: true, // 用来判断是否需要在代码中匹配参数，默认为true, R语言是不需要匹配参数\r\n        // 参数显示值构造函数\r\n        paramFormatter: function (v) {\r\n            return v;\r\n        }\r\n    },\r\n\r\n    render: function () {\r\n        var o = this.options, self = this;\r\n        var conf = {\r\n            lineWrapping: true,\r\n            lineNumbers: o.lineNumbers,\r\n            readOnly: o.readOnly,\r\n            // 解决插入字段由括号或其他特殊字符包围时分裂的bug\r\n            specialChars: /[\\u0000-\\u001f\\u007f\\u00ad\\u200c-\\u200f\\u2028\\u2029\\ufeff]/,\r\n            mode: o.mode\r\n        };\r\n        o.readOnly && (conf.cursorBlinkRate = -1);\r\n        this.editor = BI.CodeMirror(this.element[0], conf);\r\n        o.lineHeight === 1 ? this.element.addClass(\"codemirror-low-line-height\") : this.element.addClass(\"codemirror-high-line-height\");\r\n        this.editor.on(\"change\", function (cm, change) {\r\n            if (cm.options.readOnly === true && change.origin === \"paste\") {\r\n                self.editor.setValue(o.value);\r\n            }\r\n            self._checkWaterMark();\r\n            BI.nextTick(function () {\r\n                self.fireEvent(BI.CodeEditor.EVENT_CHANGE);\r\n            });\r\n        });\r\n\r\n        this.editor.on(\"focus\", function () {\r\n            self._checkWaterMark(false);\r\n            self.fireEvent(BI.CodeEditor.EVENT_FOCUS);\r\n        });\r\n\r\n        this.editor.on(\"blur\", function () {\r\n            self.watermark.setVisible(BI.isEmptyString(self.getValue()));\r\n            self.fireEvent(BI.CodeEditor.EVENT_BLUR);\r\n        });\r\n\r\n        // this.editor.on(\"mousedown\", function (cm, e) {\r\n        //     //IE下mousedown之后会触发blur,所以nextTick后再做focus\r\n        //     BI.nextTick(function () {\r\n        //         self.fireEvent(BI.CodeEditor.EVENT_FOCUS);\r\n        //     });\r\n        //     //e.stopPropagation();\r\n        // });\r\n\r\n        // this.editor.on(\"blur\", function () {\r\n        //     self.editor.execCommand(\"goLineEnd\");\r\n        // });\r\n\r\n        // BI-39228 这边是codemirror的bug, 在设置了lineWrapping的情况下，paste文本会出现定位不准\r\n        // 这边采用paste之后重新插入字符来解决一下\r\n        this.editor.on(\"inputRead\", function (cm, info) {\r\n            if (info.origin === \"paste\") {\r\n                BI.nextTick(function () {\r\n                    self.editor.replaceSelection(\" \");\r\n                    var endPos = self.editor.getDoc().getCursor();\r\n                    self.editor.getDoc().replaceRange(\"\", {\r\n                        line: endPos.line,\r\n                        ch: endPos.ch - 1\r\n                    }, endPos);\r\n                });\r\n\r\n            }\r\n        });\r\n\r\n        // 水印\r\n        this.watermark = BI.createWidget({\r\n            type: \"bi.label\",\r\n            text: o.watermark,\r\n            cls: \"bi-water-mark\",\r\n            whiteSpace: \"normal\",\r\n            textAlign: \"left\"\r\n        });\r\n        this.watermark.element.bind(\r\n            \"mousedown\", function (e) {\r\n                self.insertString(\"\");\r\n                self.editor.focus();\r\n                e.stopEvent();\r\n            }\r\n        );\r\n        this.watermark.element.bind(\"click\", function (e) {\r\n            self.editor.focus();\r\n            e.stopEvent();\r\n        });\r\n        BI.createWidget({\r\n            type: \"bi.absolute\",\r\n            element: this,\r\n            items: [{\r\n                el: this.watermark,\r\n                top: 3,\r\n                left: o.lineNumbers ? 30 + 6 : 6,\r\n                right: o.lineNumbers ? 30 + 6 : 6\r\n            }]\r\n        });\r\n    },\r\n\r\n    mounted: function () {\r\n        var o = this.options;\r\n        if (BI.isNumber(o.value) || BI.isString(o.value)) {\r\n            this.setValue(o.value);\r\n        }\r\n\r\n        if (BI.isNotNull(o.style)) {\r\n            this.setStyle(o.style);\r\n        }\r\n    },\r\n\r\n    _setEnable: function (b) {\r\n        BI.CodeEditor.superclass._setEnable.apply(this, arguments);\r\n        this.editor.setOption(\"readOnly\", b === true ? false : \"nocursor\");\r\n    },\r\n\r\n    _checkWaterMark: function () {\r\n        var o = this.options;\r\n        if (BI.isEmptyString(this.editor.getValue()) && BI.isKey(o.watermark)) {\r\n            this.watermark && this.watermark.visible();\r\n        } else {\r\n            this.watermark && this.watermark.invisible();\r\n        }\r\n    },\r\n\r\n    _insertParam: function (param) {\r\n        var value = param;\r\n        var className = \"param\";\r\n        param = this.options.paramFormatter(param);\r\n        if (BI.isNotNull(param.match(/^<!.*!>$/))) {\r\n            className = \"error-param\";\r\n        }\r\n\r\n        // 如果有选中，则先删除选中部分的文本，防止光标位置计算出错(有可能会算入应当被删除的文本的length)\r\n        if (BI.isNotEmptyString(this.editor.getSelection())) {\r\n            this.editor.replaceSelection(\"\");\r\n        }\r\n\r\n        var from = this.editor.getCursor();\r\n        // 解决插入字段由括号或其他特殊字符包围时分裂的bug,在两端以不可见字符包裹一下\r\n        this.editor.replaceSelection(\"\\u200b\" + param + \"\\u200b\");\r\n        var to = this.editor.getCursor();\r\n        var options = {\r\n            className: className,\r\n            atomic: true,\r\n            replacedWith: BI.$(\"<span class='\" + className + \" start end' />\").text(param)[0]\r\n        };\r\n        options.value = value;\r\n        this.editor.markText(from, to, options);\r\n    },\r\n\r\n    _insertString: function (str) {\r\n        this.editor.replaceSelection(str);\r\n    },\r\n\r\n    _analyzeContent: function (v) {\r\n        var regx = /\\n|\\$[\\{][^\\}]*[\\}]|((?!\\$\\{).)*((?!\\$\\{).)|\\$[^\\{]*[^\\$\\{]/g;\r\n        return v.match(regx);\r\n    },\r\n\r\n    getValue: function () {\r\n        return this.editor.getValue(\"\\n\", function (line) {\r\n            var value = line.text, num = 0;\r\n            // 根据插入位置不同，line.markedSpan可能是乱序的\r\n            _.forEach(_.sortBy(line.markedSpans, \"from\"), function (i, ms) {\r\n                switch (i.marker.className) {\r\n                    case \"param\":\r\n                    case \"error-param\":\r\n                        var fieldNameLength = i.to - i.from;\r\n                        value = value.substr(0, i.from + num) + \"$\\{\" + i.marker.value + \"\\}\" + value.substr(i.to + num, value.length);\r\n                        // 加上${}的偏移\r\n                        num += 3;\r\n                        // 加上实际值和显示值的长度差的偏移\r\n                        num += (i.marker.value.length - fieldNameLength);\r\n                        break;\r\n                }\r\n            });\r\n            return value;\r\n        });\r\n    },\r\n\r\n    setValue: function (v) {\r\n        var self = this, o = this.options, result;\r\n        this.refresh();\r\n        this.options.value = v;\r\n        self.editor.setValue(\"\");\r\n        if (o.paramMatch) {\r\n            result = this._analyzeContent(v || \"\");\r\n            BI.each(result, function (i, item) {\r\n                var fieldRegx = /\\$[\\{][^\\}]*[\\}]/;\r\n                var str = item.match(fieldRegx);\r\n                if (BI.isNotEmptyArray(str)) {\r\n                    self._insertParam(str[0].substring(2, item.length - 1));\r\n                } else {\r\n                    self._insertString(item);\r\n                }\r\n            });\r\n        } else {\r\n            self.editor.setValue(v);\r\n        }\r\n        this._checkWaterMark();\r\n    },\r\n\r\n    insertParam: function (param) {\r\n        this._insertParam(param);\r\n        this.editor.focus();\r\n    },\r\n\r\n    insertString: function (str) {\r\n        this._insertString(str);\r\n        this.editor.focus();\r\n    },\r\n\r\n    focus: function () {\r\n        this.editor.focus();\r\n    },\r\n\r\n    blur: function () {\r\n        this.editor.getInputField().blur();\r\n    },\r\n\r\n    setStyle: function (style) {\r\n        this.style = style;\r\n        this.element.css(style);\r\n    },\r\n\r\n    getStyle: function () {\r\n        return this.style;\r\n    },\r\n\r\n    refresh: function () {\r\n        var self = this;\r\n        BI.nextTick(function () {\r\n            self.editor.refresh();\r\n        });\r\n    },\r\n\r\n    setVisible: function (visible) {\r\n        BI.CodeEditor.superclass.setVisible.apply(this, arguments);\r\n        visible && this.refresh();\r\n    }\r\n});\r\nBI.CodeEditor.EVENT_CHANGE = \"EVENT_CHANGE\";\r\nBI.CodeEditor.EVENT_BLUR = \"EVENT_BLUR\";\r\nBI.CodeEditor.EVENT_FOCUS = \"EVENT_FOCUS\";\r\nBI.shortcut(\"bi.code_editor\", BI.CodeEditor);\r\n","/**\r\n * @author windy\r\n * @version 2.0\r\n * Created by windy on 2021/8/2\r\n */\r\n!(function (){\r\n    function Beautify(tokens, cm, options) {\r\n        options = options || {};\r\n        this.tokens = tokens;\r\n        this.flags = {\r\n            lastToken: null,\r\n            indentationLevel: 0,\r\n        }\r\n        this.flagsStore = [];\r\n        this.valueGetter = options.valueGetter;\r\n        this.output = cm.getOutput();\r\n    }\r\n\r\n    Beautify.prototype.beautify = function () {\r\n        var currentToken = this.tokens.next();\r\n        while (currentToken) {\r\n            this.handleToken(currentToken);\r\n            this.flags.lastToken = currentToken;\r\n            currentToken = this.tokens.next();\r\n        }\r\n\r\n        return this.output.getResult();\r\n    }\r\n\r\n    Beautify.prototype.handleToken = function (currentToken) {\r\n        switch (currentToken.type) {\r\n            case 'string':\r\n                this.handleString(currentToken);\r\n                break;\r\n            case 'field':\r\n                this.handleField(currentToken);\r\n                break;\r\n            case 'comma': // 函数参数分割\r\n                this.handleComma(currentToken);\r\n                break;\r\n            case 'bracket':\r\n                this.handleBracket(currentToken);\r\n                break;\r\n            case 'atom':\r\n                this.handleWord(currentToken);\r\n                break;\r\n            case 'word':\r\n                this.handleWord(currentToken);\r\n                break;\r\n            case 'keyword':\r\n                this.handleKeyword(currentToken);\r\n                break;\r\n            case 'operator':\r\n                this.handleOperator(currentToken);\r\n                break;\r\n            default:\r\n                this.handleCommon(currentToken);\r\n                break;\r\n        }\r\n    }\r\n\r\n    Beautify.prototype.handleCommon = function (currentToken) {\r\n        this.checkNeedSpace();\r\n        this.output.addToken(currentToken);\r\n    }\r\n\r\n    Beautify.prototype.handleOperator = function (currentToken) {\r\n        this.output.addSpaceBeforeToken();\r\n        this.output.addToken(currentToken);\r\n    }\r\n\r\n    Beautify.prototype.handleKeyword = function (currentToken) {\r\n        this.checkNeedSpace();\r\n        this.output.addToken(currentToken);\r\n    }\r\n\r\n    Beautify.prototype.handleBracket = function (currentToken) {\r\n        this.checkNeedSpace();\r\n        if (currentToken.string === '(') {\r\n            this.flagsStore.push(this.flags);\r\n            this.flags = {\r\n                lastToken: null,\r\n                indentationLevel: this.flags.indentationLevel,\r\n            }\r\n            this.output.addToken(currentToken);\r\n            this.indent();\r\n            this.output.addNewLine();\r\n        }\r\n        if (currentToken.string === ')') {\r\n            if (this.flagsStore.length > 0) {\r\n                this.flags = this.flagsStore.pop();\r\n                this.setIndent();\r\n                this.output.addNewLine();\r\n                this.output.addToken(currentToken);\r\n            }\r\n        }\r\n    }\r\n\r\n    Beautify.prototype.checkNeedSpace = function() {\r\n        if (this.flags.lastToken && this.flags.lastToken.type === 'operator') {\r\n            this.output.addSpaceBeforeToken();\r\n        }\r\n    }\r\n\r\n    Beautify.prototype.handleComma = function(currentToken) {\r\n        this.output.addToken(currentToken);\r\n        this.output.addNewLine();\r\n    };\r\n\r\n    Beautify.prototype.handleString = function(currentToken) {\r\n        this.checkNeedSpace();\r\n        this.output.addToken(currentToken);\r\n    };\r\n\r\n    Beautify.prototype.handleField = function(currentToken) {\r\n        this.checkNeedSpace();\r\n        this.output.addToken(currentToken, {\r\n            valueGetter: this.valueGetter\r\n        });\r\n    };\r\n\r\n    Beautify.prototype.handleWord = function(currentToken) {\r\n        this.checkNeedSpace();\r\n        this.output.addToken(currentToken);\r\n    };\r\n\r\n    Beautify.prototype.indent = function() {\r\n        this.flags.indentationLevel += 1;\r\n        this.output.setIndent(this.flags.indentationLevel);\r\n    };\r\n\r\n    Beautify.prototype.setIndent = function() {\r\n        this.output.setIndent(this.flags.indentationLevel);\r\n    };\r\n\r\n    Beautify.prototype.deIndent = function() {\r\n        this.flags.indentationLevel = this.flags.indentationLevel < 0 ? 0 : (this.flags.indentationLevel - 1);\r\n        this.output.setIndent(this.flags.indentationLevel);\r\n    };\r\n    BI.CodeMirror.defineExtension(\"beautify\", function (options) {\r\n        var beautify = new Beautify(this.getTokens(), this, options);\r\n        return beautify.beautify();\r\n    });\r\n})()","/**\r\n * @author windy\r\n * @version 2.0\r\n * Created by windy on 2021/8/3\r\n */\r\n\r\n!(function (){\r\n    function Output() {\r\n        this.lines = [];\r\n        this.previousLine = null;\r\n        this.currentLine = null;\r\n        this.nextLine = new Line();\r\n        this.addOutputLine();\r\n    }\r\n\r\n    Output.prototype.addToken = function (token, options) {\r\n        options = options || {};\r\n        this.currentLine.addText(options.valueGetter ? options.valueGetter(token.string) : token.string);\r\n    }\r\n\r\n    Output.prototype.addNewLine = function (force) {\r\n        if (this.isEmpty() || (!force && this.justAddedNewline())) {\r\n            return false;\r\n        }\r\n        this.addOutputLine();\r\n        return true;\r\n    }\r\n\r\n    Output.prototype.addNewLine = function (force) {\r\n        if (this.isEmpty() || (!force && this.justAddedNewline())) {\r\n            return false;\r\n        }\r\n        this.addOutputLine();\r\n        return true;\r\n    }\r\n\r\n    Output.prototype.addOutputLine = function() {\r\n        this.previousLine = this.currentLine;\r\n        this.currentLine = this.nextLine.cloneEmpty();\r\n        this.lines.push(this.currentLine);\r\n    };\r\n\r\n    Output.prototype.justAddedNewline = function() {\r\n        return this.currentLine.isEmpty();\r\n    };\r\n\r\n    Output.prototype.isEmpty = function() {\r\n        return !this.previousLine && this.currentLine.isEmpty();\r\n    };\r\n\r\n    Output.prototype.setIndent = function(indent) {\r\n        indent = indent || 0;\r\n        this.nextLine.setIndent(indent);\r\n    };\r\n\r\n    Output.prototype.addSpaceBeforeToken = function() {\r\n        if (!this.justAddedNewline()) {\r\n            this.currentLine.addText(' ');\r\n        }\r\n    };\r\n\r\n    Output.prototype.getResult = function(indent) {\r\n        return this.lines.join('\\n');\r\n    };\r\n\r\n    function Line() {\r\n        this._indent_count = 0;\r\n        this.items = [];\r\n    }\r\n\r\n    Line.prototype.setIndent = function (indent) {\r\n        if (this.isEmpty()) {\r\n            this._indent_count = indent || 0;\r\n        }\r\n    }\r\n\r\n    Line.prototype.addText = function (text) {\r\n        this.items.push(text);\r\n    }\r\n\r\n    Line.prototype.cloneEmpty = function() {\r\n        var line = new Line();\r\n        line.setIndent(this._indent_count);\r\n        return line;\r\n    };\r\n\r\n    Line.prototype.isEmpty = function() {\r\n        return this.items.length === 0;\r\n    };\r\n\r\n    Line.prototype.toString = function() {\r\n        var result = \"\";\r\n        for(var i = 0; i < this._indent_count; i++) {\r\n            result += '\\t';\r\n        }\r\n        return result + this.items.join('');\r\n    };\r\n\r\n    BI.CodeMirror.defineExtension(\"getOutput\", function () {\r\n        return new Output();\r\n    });\r\n})()","/**\r\n * @author windy\r\n * @version 2.0\r\n * Created by windy on 2021/8/2\r\n * 利用下codemirror内置的tokens,以后有需要再看看是不是实现一下\r\n */\r\n!(function (){\r\n    function Token(tokens) {\r\n        this.tokens = tokens.filter(function (token) {\r\n            return !token.string.match(/\\s/)\r\n        }) || [];\r\n        this.position = -1;\r\n    }\r\n\r\n    Token.prototype.hasNext = function () {\r\n        return this.tokens.length > 0 && this.position < this.tokens.length - 1;\r\n    }\r\n\r\n    Token.prototype.next = function () {\r\n        var token = null;\r\n        if(this.hasNext()) {\r\n            token = this.tokens[++this.position];\r\n        }\r\n        return token;\r\n    }\r\n\r\n    Token.prototype.peek = function (index) {\r\n        var token = null;\r\n        index = index || 0;\r\n        index += this.position;\r\n        if (index >= 0 && index < this.tokens.length) {\r\n            token = this.tokens[index];\r\n        }\r\n        return token;\r\n    }\r\n\r\n    BI.CodeMirror.defineExtension(\"getTokens\", function () {\r\n        var self = this;\r\n        var tokens = BI.flatten(BI.map(BI.range(0, this.getDoc().lineCount()), function (idx){\r\n            return self.getLineTokens(idx)\r\n        }));\r\n        return new Token(tokens);\r\n    });\r\n})();","(function (mod) {\r\n    mod(BI.CodeMirror);\r\n})(function (CodeMirror) {\r\n    var Pos = CodeMirror.Pos;\r\n\r\n    function forEach (arr, f) {\r\n        for (var i = 0, e = arr.length; i < e; ++i) f(arr[i]);\r\n    }\r\n\r\n    function scriptHint (editor, keywords, getToken, options) {\r\n        // Find the token at the cursor\r\n        var cur = editor.getCursor(), token = getToken(editor, cur);\r\n        if (/\\b(?:string)\\b/.test(token.type)) {\r\n            return;\r\n        }\r\n        token.state = CodeMirror.innerMode(editor.getMode(), token.state).state;\r\n\r\n        if (!/^[\\w$_\\u4e00-\\u9fa5]*$/.test(token.string)) {\r\n            token = {\r\n                start: cur.ch, end: cur.ch, string: \"\", state: token.state,\r\n                type: token.string == \".\" ? \"property\" : null\r\n            };\r\n        } else if (token.end > cur.ch) {\r\n            token.end = cur.ch;\r\n            token.string = token.string.slice(0, cur.ch - token.start);\r\n        }\r\n\r\n        var tprop = token;\r\n        // If it is a property, find out what it is a property of.\r\n        while (tprop.type == \"property\") {\r\n            tprop = getToken(editor, Pos(cur.line, tprop.start));\r\n            if (tprop.string != \".\") return;\r\n            tprop = getToken(editor, Pos(cur.line, tprop.start));\r\n            if (!context) var context = [];\r\n            context.push(tprop);\r\n        }\r\n        return {\r\n            list: getCompletions(token, context, keywords, options),\r\n            from: Pos(cur.line, token.start),\r\n            to: Pos(cur.line, token.end)\r\n        };\r\n    }\r\n\r\n    function formulaHint (editor, options) {\r\n        return scriptHint(editor, editor.keywordsGetter(),\r\n            function (e, cur) {\r\n                return e.getTokenAt(cur);\r\n            },\r\n            options);\r\n    }\r\n    CodeMirror.registerHelper(\"hint\", \"formula\", formulaHint);\r\n\r\n    function getCompletions (token, context, keywords, options) {\r\n        var found = [], foundText = [], start = token.string;\r\n        if (!start) {\r\n            return found;\r\n        }\r\n        function maybeAdd (obj) {\r\n            // 首字母也可搜出中文函数或者字段\r\n            var text = [obj.text];\r\n            if (obj.type === BICst.FORMULA_KEYWORD_TYPE.PARAM) {\r\n                var py = BI.makeFirstPY(obj.text, {\r\n                    splitChar: \"\\u200b\"\r\n                });\r\n                var upperPy = py.toUpperCase();\r\n                text = py.split(\"\\u200b\").concat(upperPy.split(\"\\u200b\"));\r\n                text.push(obj.text);\r\n            }\r\n            var searched = BI.some(text, function (idx, s) {\r\n                return s.lastIndexOf(start, 0) == 0\r\n            })\r\n            if (searched) {\r\n                var results = BI.filter(found, function (idx, item) {\r\n                    return item.value === obj.value;\r\n                });\r\n                var typeExist = BI.some(results, function (idx, result) {\r\n                    return result.type === obj.type;\r\n                });\r\n                if(BI.isEmptyArray(results) || !typeExist) {\r\n                    foundText.push(obj.text);\r\n                    found.push(obj);\r\n                }\r\n            }\r\n        }\r\n\r\n        if (context && context.length) {\r\n            context.pop();\r\n        } else {\r\n            forEach(keywords, maybeAdd);\r\n        }\r\n        return found;\r\n    }\r\n});","// CodeMirror, copyright (c) by Marijn Haverbeke and others\r\n// Distributed under an MIT license: http://codemirror.net/LICENSE\r\n// version 5.42.2\r\n(function (mod) {\r\n    mod(BI.CodeMirror);\r\n})(function (CodeMirror) {\r\n    \"use strict\";\r\n\r\n    var HINT_ELEMENT_CLASS = \"CodeMirror-hint\";\r\n    var ACTIVE_HINT_ELEMENT_CLASS = \"CodeMirror-hint-active\";\r\n\r\n    // This is the old interface, kept around for now to stay\r\n    // backwards-compatible.\r\n    CodeMirror.showHint = function (cm, getHints, options) {\r\n        if (!getHints) return cm.showHint(options);\r\n        if (options && options.async) getHints.async = true;\r\n        var newOpts = {hint: getHints};\r\n        if (options) for (var prop in options) newOpts[prop] = options[prop];\r\n        return cm.showHint(newOpts);\r\n    };\r\n\r\n    CodeMirror.defineExtension(\"showHint\", function (options) {\r\n        options = parseOptions(this, this.getCursor(\"start\"), options);\r\n        var selections = this.listSelections()\r\n        if (selections.length > 1) return;\r\n        // By default, don't allow completion when something is selected.\r\n        // A hint function can have a `supportsSelection` property to\r\n        // indicate that it can handle selections.\r\n        if (this.somethingSelected()) {\r\n            if (!options.hint.supportsSelection) return;\r\n            // Don't try with cross-line selections\r\n            for (var i = 0; i < selections.length; i++)\r\n                if (selections[i].head.line != selections[i].anchor.line) return;\r\n        }\r\n\r\n        if (this.state.completionActive) this.state.completionActive.close();\r\n        var completion = this.state.completionActive = new Completion(this, options);\r\n        if (!completion.options.hint) return;\r\n\r\n        CodeMirror.signal(this, \"startCompletion\", this);\r\n        completion.update(true);\r\n    });\r\n\r\n    CodeMirror.defineExtension(\"closeHint\", function () {\r\n        if (this.state.completionActive) this.state.completionActive.close()\r\n    });\r\n\r\n    function Completion(cm, options) {\r\n        this.cm = cm;\r\n        this.options = options;\r\n        this.widget = null;\r\n        this.debounce = 0;\r\n        this.tick = 0;\r\n        this.startPos = this.cm.getCursor(\"start\");\r\n        this.startLen = this.cm.getLine(this.startPos.line).length - this.cm.getSelection().length;\r\n\r\n        var self = this;\r\n        cm.on(\"cursorActivity\", this.activityFunc = function () {\r\n            self.cursorActivity();\r\n        });\r\n    }\r\n\r\n    var requestAnimationFrame = window.requestAnimationFrame || function (fn) {\r\n        return setTimeout(fn, 1000 / 60);\r\n    };\r\n    var cancelAnimationFrame = window.cancelAnimationFrame || clearTimeout;\r\n\r\n    Completion.prototype = {\r\n        close: function () {\r\n            if (!this.active()) return;\r\n            this.cm.state.completionActive = null;\r\n            this.tick = null;\r\n            this.cm.off(\"cursorActivity\", this.activityFunc);\r\n\r\n            if (this.widget && this.data) CodeMirror.signal(this.data, \"close\");\r\n            if (this.widget) this.widget.close();\r\n            CodeMirror.signal(this.cm, \"endCompletion\", this.cm);\r\n        },\r\n\r\n        active: function () {\r\n            return this.cm.state.completionActive == this;\r\n        },\r\n\r\n        pick: function (data, i) {\r\n            var completion = data.list[i];\r\n            if (completion.hint) completion.hint(this.cm, data, completion);\r\n            else {\r\n                switch (completion.type) {\r\n                    case BICst.FORMULA_KEYWORD_TYPE.KEYWORD:\r\n                        this.cm.replaceRange(getText(completion).toUpperCase(), completion.from || data.from,\r\n                            completion.to || data.to, \"complete\");\r\n                        // 插入关键字添加空格\r\n                        this.cm.replaceSelection(\" \");\r\n                        break;\r\n                    case BICst.FORMULA_KEYWORD_TYPE.FUNCTION:\r\n                        this.cm.replaceRange(getText(completion).toUpperCase(), completion.from || data.from,\r\n                            completion.to || data.to, \"complete\");\r\n                        var to = this.cm.getCursor();\r\n                        this.cm.markText(completion.from || data.from, to, {className: \"#function\", atomic: true});\r\n                        this.cm.replaceSelection(\"()\");\r\n                        to = this.cm.getCursor();\r\n                        to.ch = to.ch - 1;\r\n                        this.cm.setCursor(to);\r\n                        this.cm.focus();\r\n                        break;\r\n                    case BICst.FORMULA_KEYWORD_TYPE.PARAM:\r\n                        var value = completion.value;\r\n                        var fieldFormattedName = completion.text;\r\n                        var from = data.from;\r\n                        // // 解决插入字段由括号或其他特殊字符包围时分裂的bug,在两端以不可见字符包裹一下\r\n                        var showName = fieldFormattedName.replaceAll(\"^<!.*!>$\", function (str) {\r\n                            return str.substring(2, str.length - 2);\r\n                        });\r\n                        this.cm.replaceRange(\"\\u200b\" + showName + \"\\u200b\", from, data.to, \"complete\");\r\n                        var to = this.cm.getCursor(\"to\");\r\n                        var className = \"fieldName\";\r\n                        // // handleMouseEvents和replacedWith需要搭配使用，让codemirror接管鼠标事件\r\n                        this.cm.markText(from, to, {\r\n                            className: className,\r\n                            handleMouseEvents: true,\r\n                            atomic: true,\r\n                            startStyle: \"start\",\r\n                            endStyle: \"end\",\r\n                            value: value,\r\n                            replacedWith: BI.$(\"<span class='\" + className + \"  start end' />\").text(showName)[0]\r\n                        });\r\n                        break;\r\n                    default:\r\n                        break;\r\n                }\r\n            }\r\n            CodeMirror.signal(data, \"pick\", completion);\r\n            this.close();\r\n        },\r\n\r\n        cursorActivity: function () {\r\n            if (this.debounce) {\r\n                cancelAnimationFrame(this.debounce);\r\n                this.debounce = 0;\r\n            }\r\n\r\n            var pos = this.cm.getCursor(), line = this.cm.getLine(pos.line);\r\n            if (pos.line != this.startPos.line || line.length - pos.ch != this.startLen - this.startPos.ch ||\r\n                pos.ch < this.startPos.ch || this.cm.somethingSelected() ||\r\n                (!pos.ch || this.options.closeCharacters.test(line.charAt(pos.ch - 1)))) {\r\n                this.close();\r\n            } else {\r\n                var self = this;\r\n                this.debounce = requestAnimationFrame(function () {\r\n                    self.update();\r\n                });\r\n                if (this.widget) this.widget.disable();\r\n            }\r\n        },\r\n\r\n        update: function (first) {\r\n            if (this.tick == null) return;\r\n            var self = this, myTick = ++this.tick\r\n            fetchHints(this.options.hint, this.cm, this.options, function (data) {\r\n                if (self.tick == myTick) self.finishUpdate(data, first);\r\n            });\r\n        },\r\n\r\n        finishUpdate: function (data, first) {\r\n            if (this.data) CodeMirror.signal(this.data, \"update\");\r\n\r\n            var picked = (this.widget && this.widget.picked) || (first && this.options.completeSingle);\r\n            if (this.widget) this.widget.close();\r\n\r\n            this.data = data;\r\n\r\n            if (data && data.list.length) {\r\n                if (picked && data.list.length == 1) {\r\n                    this.pick(data, 0);\r\n                } else {\r\n                    this.widget = new Widget(this, data);\r\n                    CodeMirror.signal(data, \"shown\");\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    function parseOptions(cm, pos, options) {\r\n        var editor = cm.options.hintOptions;\r\n        var out = {};\r\n        for (var prop in defaultOptions) out[prop] = defaultOptions[prop];\r\n        if (editor) for (var prop in editor)\r\n            if (editor[prop] !== undefined) out[prop] = editor[prop];\r\n        if (options) for (var prop in options)\r\n            if (options[prop] !== undefined) out[prop] = options[prop];\r\n        if (out.hint.resolve) out.hint = out.hint.resolve(cm, pos)\r\n        return out;\r\n    }\r\n\r\n    function getText(completion) {\r\n        if (typeof completion === \"string\") return completion;\r\n        return completion.text;\r\n    }\r\n\r\n    function buildKeyMap(completion, handle) {\r\n        var baseMap = {\r\n            Up: function () {\r\n                handle.moveFocus(-1);\r\n            },\r\n            Down: function () {\r\n                handle.moveFocus(1);\r\n            },\r\n            PageUp: function () {\r\n                handle.moveFocus(-handle.menuSize() + 1, true);\r\n            },\r\n            PageDown: function () {\r\n                handle.moveFocus(handle.menuSize() - 1, true);\r\n            },\r\n            Home: function () {\r\n                handle.setFocus(0);\r\n            },\r\n            End: function () {\r\n                handle.setFocus(handle.length - 1);\r\n            },\r\n            Enter: handle.pick,\r\n            Tab: handle.pick,\r\n            Esc: handle.close\r\n        };\r\n        var custom = completion.options.customKeys;\r\n        var ourMap = custom ? {} : baseMap;\r\n\r\n        function addBinding(key, val) {\r\n            var bound;\r\n            if (typeof val !== \"string\") {\r\n                bound = function (cm) {\r\n                    return val(cm, handle);\r\n                };\r\n            }\r\n            // This mechanism is deprecated\r\n            else if (baseMap.hasOwnProperty(val)) {\r\n                bound = baseMap[val];\r\n            } else {\r\n                bound = val;\r\n            }\r\n            ourMap[key] = bound;\r\n        }\r\n\r\n        if (custom) {\r\n            for (var key in custom) {\r\n                if (custom.hasOwnProperty(key)) {\r\n                    addBinding(key, custom[key]);\r\n                }\r\n            }\r\n        }\r\n        var extra = completion.options.extraKeys;\r\n        if (extra) {\r\n            for (var key in extra) {\r\n                if (extra.hasOwnProperty(key)) {\r\n                    addBinding(key, extra[key]);\r\n                }\r\n            }\r\n        }\r\n        return ourMap;\r\n    }\r\n\r\n    function getHintElement(hintsElement, el) {\r\n        while (el && el != hintsElement) {\r\n            if (el.nodeName.toUpperCase() === \"DIV\" && el.parentNode == hintsElement) return el;\r\n            el = el.parentNode;\r\n        }\r\n    }\r\n\r\n    function Widget(completion, data) {\r\n        this.completion = completion;\r\n        this.data = data;\r\n        this.picked = false;\r\n        var widget = this, cm = completion.cm;\r\n        var ownerDocument = cm.getInputField().ownerDocument;\r\n        var parentWindow = ownerDocument.defaultView || ownerDocument.parentWindow;\r\n\r\n        var hints = this.hints = ownerDocument.createElement(\"div\");\r\n        // 主题不给配, 恁地?\r\n        // var theme = completion.cm.options.theme;\r\n        var hintsWidget = BI.createWidget({\r\n            type: \"bi.button_group\",\r\n            cls: \"CodeMirror-hints bi-card\",\r\n            element: hints,\r\n            layouts: [{\r\n                type: \"bi.vertical\"\r\n            }]\r\n        });\r\n        this.selectedHint = data.selectedHint || 0;\r\n\r\n        var completions = data.list;\r\n        var eltLists = [];\r\n        for (var i = 0; i < completions.length; ++i) {\r\n            var elt = ownerDocument.createElement(\"div\"), cur = completions[i];\r\n            var eltObj = {};\r\n            var className = HINT_ELEMENT_CLASS + (i != this.selectedHint ? \"\" : \" \" + ACTIVE_HINT_ELEMENT_CLASS);\r\n            if (cur.className != null) className = cur.className + \" \" + className;\r\n            if (cur.render) {\r\n                eltObj = BI.createWidget(cur.render(elt, data, cur));\r\n            } else {\r\n                var text = cur.displayText || getText(cur);\r\n                eltObj = BI.createWidget({\r\n                    type: BI.isNotNull(cur.iconCls) ? \"bi.icon_text_item\" : \"bi.single_select_item\",\r\n                    logic: {\r\n                        dynamic: true,\r\n                    },\r\n                    height: 24,\r\n                    cls: BI.isNotNull(cur.iconCls) ? (className + ' ' + cur.iconCls) : className,\r\n                    textAlign: \"left\",\r\n                    text: text,\r\n                    title: text,\r\n                });\r\n            }\r\n            eltObj.element[0].hintId = i;\r\n            eltLists.push(eltObj);\r\n        }\r\n        hintsWidget.populate(eltLists);\r\n\r\n        var pos = cm.cursorCoords(completion.options.alignWithWord ? data.from : null);\r\n        var left = pos.left, top = pos.bottom, below = true;\r\n        hints.style.left = left + \"px\";\r\n        hints.style.top = top + \"px\";\r\n        // If we're at the edge of the screen, then we want the menu to appear on the left of the cursor.\r\n        var winW = parentWindow.innerWidth || Math.max(ownerDocument.body.offsetWidth, ownerDocument.documentElement.offsetWidth);\r\n        var winH = parentWindow.innerHeight || Math.max(ownerDocument.body.offsetHeight, ownerDocument.documentElement.offsetHeight);\r\n        (completion.options.container || ownerDocument.body).appendChild(hints);\r\n        var box = hints.getBoundingClientRect(), overlapY = box.bottom - winH;\r\n        var scrolls = hints.scrollHeight > hints.clientHeight + 1\r\n        var startScroll = cm.getScrollInfo();\r\n\r\n        if (overlapY > 0) {\r\n            var height = box.bottom - box.top, curTop = pos.top - (pos.bottom - box.top);\r\n            if (curTop - height > 0) { // Fits above cursor\r\n                hints.style.top = (top = pos.top - height) + \"px\";\r\n                below = false;\r\n            } else if (height > winH) {\r\n                hints.style.height = (winH - 5) + \"px\";\r\n                hints.style.top = (top = pos.bottom - box.top) + \"px\";\r\n                var cursor = cm.getCursor();\r\n                if (data.from.ch != cursor.ch) {\r\n                    pos = cm.cursorCoords(cursor);\r\n                    hints.style.left = (left = pos.left) + \"px\";\r\n                    box = hints.getBoundingClientRect();\r\n                }\r\n            }\r\n        }\r\n        var overlapX = box.right - winW;\r\n        if (overlapX > 0) {\r\n            if (box.right - box.left > winW) {\r\n                hints.style.width = (winW - 5) + \"px\";\r\n                overlapX -= (box.right - box.left) - winW;\r\n            }\r\n            hints.style.left = (left = pos.left - overlapX) + \"px\";\r\n        }\r\n        if (scrolls) for (var node = hints.firstChild; node; node = node.nextSibling)\r\n            node.style.paddingRight = cm.display.nativeBarWidth + \"px\"\r\n\r\n        cm.addKeyMap(this.keyMap = buildKeyMap(completion, {\r\n            moveFocus: function (n, avoidWrap) {\r\n                widget.changeActive(widget.selectedHint + n, avoidWrap);\r\n            },\r\n            setFocus: function (n) {\r\n                widget.changeActive(n);\r\n            },\r\n            menuSize: function () {\r\n                return widget.screenAmount();\r\n            },\r\n            length: completions.length,\r\n            close: function () {\r\n                completion.close();\r\n            },\r\n            pick: function () {\r\n                widget.pick();\r\n            },\r\n            data: data\r\n        }));\r\n\r\n        if (completion.options.closeOnUnfocus) {\r\n            var closingOnBlur;\r\n            cm.on(\"blur\", this.onBlur = function () {\r\n                closingOnBlur = setTimeout(function () {\r\n                    completion.close();\r\n                }, 100);\r\n            });\r\n            cm.on(\"focus\", this.onFocus = function () {\r\n                clearTimeout(closingOnBlur);\r\n            });\r\n        }\r\n\r\n        cm.on(\"scroll\", this.onScroll = function () {\r\n            var curScroll = cm.getScrollInfo(), editor = cm.getWrapperElement().getBoundingClientRect();\r\n            var newTop = top + startScroll.top - curScroll.top;\r\n            var point = newTop - (parentWindow.pageYOffset || (ownerDocument.documentElement || ownerDocument.body).scrollTop);\r\n            if (!below) point += hints.offsetHeight;\r\n            if (point <= editor.top || point >= editor.bottom) return completion.close();\r\n            hints.style.top = newTop + \"px\";\r\n            hints.style.left = (left + startScroll.left - curScroll.left) + \"px\";\r\n        });\r\n\r\n        CodeMirror.on(hints, \"dblclick\", function (e) {\r\n            var t = getHintElement(hints, e.target || e.srcElement);\r\n            if (t && t.hintId != null) {\r\n                widget.changeActive(t.hintId);\r\n                widget.pick();\r\n            }\r\n        });\r\n\r\n        CodeMirror.on(hints, \"click\", function (e) {\r\n            var t = getHintElement(hints, e.target || e.srcElement);\r\n            if (t && t.hintId != null) {\r\n                widget.changeActive(t.hintId);\r\n                if (completion.options.completeOnSingleClick) widget.pick();\r\n            }\r\n        });\r\n\r\n        CodeMirror.on(hints, \"mousedown\", function () {\r\n            setTimeout(function () {\r\n                cm.focus();\r\n            }, 20);\r\n        });\r\n\r\n        CodeMirror.signal(data, \"select\", completions[this.selectedHint], hints.childNodes[this.selectedHint]);\r\n        return true;\r\n    }\r\n\r\n    Widget.prototype = {\r\n        close: function () {\r\n            if (this.completion.widget != this) return;\r\n            this.completion.widget = null;\r\n            this.hints.parentNode.removeChild(this.hints);\r\n            this.completion.cm.removeKeyMap(this.keyMap);\r\n\r\n            var cm = this.completion.cm;\r\n            if (this.completion.options.closeOnUnfocus) {\r\n                cm.off(\"blur\", this.onBlur);\r\n                cm.off(\"focus\", this.onFocus);\r\n            }\r\n            cm.off(\"scroll\", this.onScroll);\r\n        },\r\n\r\n        disable: function () {\r\n            this.completion.cm.removeKeyMap(this.keyMap);\r\n            var widget = this;\r\n            this.keyMap = {\r\n                Enter: function () {\r\n                    widget.picked = true;\r\n                }\r\n            };\r\n            this.completion.cm.addKeyMap(this.keyMap);\r\n        },\r\n\r\n        pick: function () {\r\n            this.completion.pick(this.data, this.selectedHint);\r\n        },\r\n\r\n        changeActive: function (i, avoidWrap) {\r\n            if (i >= this.data.list.length)\r\n                i = avoidWrap ? this.data.list.length - 1 : 0;\r\n            else if (i < 0)\r\n                i = avoidWrap ? 0 : this.data.list.length - 1;\r\n            if (this.selectedHint == i) return;\r\n            var node = this.hints.childNodes[this.selectedHint];\r\n            if (node) node.className = node.className.replace(\" \" + ACTIVE_HINT_ELEMENT_CLASS, \"\");\r\n            node = this.hints.childNodes[this.selectedHint = i];\r\n            node.className += \" \" + ACTIVE_HINT_ELEMENT_CLASS;\r\n            if (node.offsetTop < this.hints.scrollTop)\r\n                this.hints.scrollTop = node.offsetTop - 3;\r\n            else if (node.offsetTop + node.offsetHeight > this.hints.scrollTop + this.hints.clientHeight)\r\n                this.hints.scrollTop = node.offsetTop + node.offsetHeight - this.hints.clientHeight + 3;\r\n            CodeMirror.signal(this.data, \"select\", this.data.list[this.selectedHint], node);\r\n        },\r\n\r\n        screenAmount: function () {\r\n            return Math.floor(this.hints.clientHeight / this.hints.firstChild.offsetHeight) || 1;\r\n        }\r\n    };\r\n\r\n    function applicableHelpers(cm, helpers) {\r\n        if (!cm.somethingSelected()) return helpers\r\n        var result = []\r\n        for (var i = 0; i < helpers.length; i++)\r\n            if (helpers[i].supportsSelection) result.push(helpers[i])\r\n        return result\r\n    }\r\n\r\n    function fetchHints(hint, cm, options, callback) {\r\n        if (hint.async) {\r\n            hint(cm, callback, options)\r\n        } else {\r\n            var result = hint(cm, options)\r\n            if (result && result.then) result.then(callback)\r\n            else callback(result)\r\n        }\r\n    }\r\n\r\n    function resolveAutoHints(cm, pos) {\r\n        var helpers = cm.getHelpers(pos, \"hint\"), words\r\n        if (helpers.length) {\r\n            var resolved = function (cm, callback, options) {\r\n                var app = applicableHelpers(cm, helpers);\r\n\r\n                function run(i) {\r\n                    if (i == app.length) return callback(null)\r\n                    fetchHints(app[i], cm, options, function (result) {\r\n                        if (result && result.list.length > 0) callback(result)\r\n                        else run(i + 1)\r\n                    })\r\n                }\r\n\r\n                run(0)\r\n            }\r\n            resolved.async = true\r\n            resolved.supportsSelection = true\r\n            return resolved\r\n        } else if (words = cm.getHelper(cm.getCursor(), \"hintWords\")) {\r\n            return function (cm) {\r\n                return CodeMirror.hint.fromList(cm, {words: words})\r\n            }\r\n        } else if (CodeMirror.hint.anyword) {\r\n            return function (cm, options) {\r\n                return CodeMirror.hint.anyword(cm, options)\r\n            }\r\n        } else {\r\n            return function () {\r\n            }\r\n        }\r\n    }\r\n\r\n    CodeMirror.registerHelper(\"hint\", \"auto\", {\r\n        resolve: resolveAutoHints\r\n    });\r\n\r\n    CodeMirror.registerHelper(\"hint\", \"fromList\", function (cm, options) {\r\n        var cur = cm.getCursor(), token = cm.getTokenAt(cur)\r\n        var term, from = CodeMirror.Pos(cur.line, token.start), to = cur\r\n        if (token.start < cur.ch && /\\w/.test(token.string.charAt(cur.ch - token.start - 1))) {\r\n            term = token.string.substr(0, cur.ch - token.start)\r\n        } else {\r\n            term = \"\"\r\n            from = cur\r\n        }\r\n        var found = [];\r\n        for (var i = 0; i < options.words.length; i++) {\r\n            var word = options.words[i];\r\n            if (word.slice(0, term.length) == term)\r\n                found.push(word);\r\n        }\r\n\r\n        if (found.length) return {list: found, from: from, to: to};\r\n    });\r\n\r\n    CodeMirror.commands.autocomplete = CodeMirror.showHint;\r\n\r\n    var defaultOptions = {\r\n        hint: CodeMirror.hint.auto,\r\n        completeSingle: true,\r\n        alignWithWord: true,\r\n        closeCharacters: /[\\s()\\[\\]{};:>,]/,\r\n        closeOnUnfocus: true,\r\n        completeOnSingleClick: true,\r\n        container: null,\r\n        customKeys: null,\r\n        extraKeys: null\r\n    };\r\n\r\n    CodeMirror.defineOption(\"hintOptions\", null);\r\n});","// CodeMirror, copyright (c) by Marijn Haverbeke and others\r\n// Distributed under an MIT license: https://codemirror.net/LICENSE\r\n// version 5.42.2\r\n(function (mod) {\r\n    mod(BI.CodeMirror);\r\n})(function (CodeMirror) {\r\n    var ie_lt8 = /MSIE \\d/.test(navigator.userAgent) &&\r\n        (document.documentMode == null || document.documentMode < 8);\r\n\r\n    var Pos = CodeMirror.Pos;\r\n\r\n    var matching = {\"(\": \")>\", \")\": \"(<\", \"[\": \"]>\", \"]\": \"[<\", \"{\": \"}>\", \"}\": \"{<\", \"<\": \">>\", \">\": \"<<\"};\r\n\r\n    function bracketRegex(config) {\r\n        return config && config.bracketRegex || /[(){}[\\]]/\r\n    }\r\n\r\n    function findMatchingBracket(cm, where, config) {\r\n        var line = cm.getLineHandle(where.line), pos = where.ch - 1;\r\n        var afterCursor = config && config.afterCursor\r\n        if (afterCursor == null)\r\n            afterCursor = /(^| )cm-fat-cursor($| )/.test(cm.getWrapperElement().className)\r\n        var re = bracketRegex(config)\r\n\r\n        // A cursor is defined as between two characters, but in in vim command mode\r\n        // (i.e. not insert mode), the cursor is visually represented as a\r\n        // highlighted box on top of the 2nd character. Otherwise, we allow matches\r\n        // from before or after the cursor.\r\n        var match = (!afterCursor && pos >= 0 && re.test(line.text.charAt(pos)) && matching[line.text.charAt(pos)]) ||\r\n            re.test(line.text.charAt(pos + 1)) && matching[line.text.charAt(++pos)];\r\n        if (!match) return null;\r\n        var dir = match.charAt(1) == \">\" ? 1 : -1;\r\n        if (config && config.strict && (dir > 0) != (pos == where.ch)) return null;\r\n        var style = cm.getTokenTypeAt(Pos(where.line, pos + 1));\r\n\r\n        var found = scanForBracket(cm, Pos(where.line, pos + (dir > 0 ? 1 : 0)), dir, style || null, config);\r\n        if (found == null) return null;\r\n        return {\r\n            from: Pos(where.line, pos), to: found && found.pos,\r\n            match: found && found.ch == match.charAt(0), forward: dir > 0\r\n        };\r\n    }\r\n\r\n    // bracketRegex is used to specify which type of bracket to scan\r\n    // should be a regexp, e.g. /[[\\]]/\r\n    //\r\n    // Note: If \"where\" is on an open bracket, then this bracket is ignored.\r\n    //\r\n    // Returns false when no bracket was found, null when it reached\r\n    // maxScanLines and gave up\r\n    function scanForBracket(cm, where, dir, style, config) {\r\n        var maxScanLen = (config && config.maxScanLineLength) || 10000;\r\n        var maxScanLines = (config && config.maxScanLines) || 1000;\r\n\r\n        var stack = [];\r\n        var re = bracketRegex(config)\r\n        var lineEnd = dir > 0 ? Math.min(where.line + maxScanLines, cm.lastLine() + 1)\r\n            : Math.max(cm.firstLine() - 1, where.line - maxScanLines);\r\n        for (var lineNo = where.line; lineNo != lineEnd; lineNo += dir) {\r\n            var line = cm.getLine(lineNo);\r\n            if (!line) continue;\r\n            var pos = dir > 0 ? 0 : line.length - 1, end = dir > 0 ? line.length : -1;\r\n            if (line.length > maxScanLen) continue;\r\n            if (lineNo == where.line) pos = where.ch - (dir < 0 ? 1 : 0);\r\n            for (; pos != end; pos += dir) {\r\n                var ch = line.charAt(pos);\r\n                if (re.test(ch) && (style === undefined || cm.getTokenTypeAt(Pos(lineNo, pos + 1)) == style)) {\r\n                    var match = matching[ch];\r\n                    if ((match.charAt(1) == \">\") == (dir > 0)) stack.push(ch);\r\n                    else if (!stack.length) return {pos: Pos(lineNo, pos), ch: ch};\r\n                    else stack.pop();\r\n                }\r\n            }\r\n        }\r\n        return lineNo - dir == (dir > 0 ? cm.lastLine() : cm.firstLine()) ? false : null;\r\n    }\r\n\r\n    function matchBrackets(cm, autoclear, config) {\r\n        // Disable brace matching in long lines, since it'll cause hugely slow updates\r\n        var maxHighlightLen = cm.state.matchBrackets.maxHighlightLineLength || 1000;\r\n        var marks = [], ranges = cm.listSelections();\r\n        for (var i = 0; i < ranges.length; i++) {\r\n            var match = ranges[i].empty() && findMatchingBracket(cm, ranges[i].head, config);\r\n            if (match && cm.getLine(match.from.line).length <= maxHighlightLen) {\r\n                var style = match.match ? \"CodeMirror-matchingbracket\" : \"CodeMirror-nonmatchingbracket\";\r\n                marks.push(cm.markText(match.from, Pos(match.from.line, match.from.ch + 1), {className: style}));\r\n                if (match.to && cm.getLine(match.to.line).length <= maxHighlightLen)\r\n                    marks.push(cm.markText(match.to, Pos(match.to.line, match.to.ch + 1), {className: style}));\r\n            }\r\n        }\r\n\r\n        if (marks.length) {\r\n            // Kludge to work around the IE bug from issue #1193, where text\r\n            // input stops going to the textare whever this fires.\r\n            if (ie_lt8 && cm.state.focused) cm.focus();\r\n\r\n            var clear = function () {\r\n                cm.operation(function () {\r\n                    for (var i = 0; i < marks.length; i++) marks[i].clear();\r\n                });\r\n            };\r\n            if (autoclear) setTimeout(clear, 800);\r\n            else return clear;\r\n        }\r\n    }\r\n\r\n    function doMatchBrackets(cm) {\r\n        cm.operation(function () {\r\n            if (cm.state.matchBrackets.currentlyHighlighted) {\r\n                cm.state.matchBrackets.currentlyHighlighted();\r\n                cm.state.matchBrackets.currentlyHighlighted = null;\r\n            }\r\n            cm.state.matchBrackets.currentlyHighlighted = matchBrackets(cm, false, cm.state.matchBrackets);\r\n        });\r\n    }\r\n\r\n    CodeMirror.defineOption(\"matchBrackets\", false, function (cm, val, old) {\r\n        // matchBrackets的默认配置会使得上层接收到的e.target在父亲中无法找到\r\n        // 可以看到matchBrackets的逻辑是将括号重新做了markText,这一步操作可能与鼠标的focus相冲突(标记后再focus,对象不一致？)\r\n        // 既然是冲突的，那么就先让鼠标focus之后, 再去做markText\r\n        var func = function () {\r\n            var args = arguments;\r\n            BI.defer(function () {\r\n                doMatchBrackets.apply(null, args);\r\n            });\r\n        };\r\n        if (old && old != CodeMirror.Init) {\r\n            cm.off(\"cursorActivity\", func);\r\n            if (cm.state.matchBrackets && cm.state.matchBrackets.currentlyHighlighted) {\r\n                cm.state.matchBrackets.currentlyHighlighted();\r\n                cm.state.matchBrackets.currentlyHighlighted = null;\r\n            }\r\n        }\r\n        if (val) {\r\n            cm.state.matchBrackets = typeof val == \"object\" ? val : {};\r\n            cm.on(\"cursorActivity\", func);\r\n        }\r\n    });\r\n\r\n    CodeMirror.defineExtension(\"matchBrackets\", function () {\r\n        matchBrackets(this, true);\r\n    });\r\n    CodeMirror.defineExtension(\"findMatchingBracket\", function (pos, config, oldConfig) {\r\n        // Backwards-compatibility kludge\r\n        if (oldConfig || typeof config == \"boolean\") {\r\n            if (!oldConfig) {\r\n                config = config ? {strict: true} : null;\r\n            } else {\r\n                oldConfig.strict = config;\r\n                config = oldConfig;\r\n            }\r\n        }\r\n        return findMatchingBracket(this, pos, config);\r\n    });\r\n    CodeMirror.defineExtension(\"scanForBracket\", function (pos, dir, style, config) {\r\n        return scanForBracket(this, pos, dir, style, config);\r\n    });\r\n});","(function (mod) {\r\n    mod(BI.CodeMirror);\r\n})(function (CodeMirror) {\r\n    \"use strict\";\r\n\r\n    CodeMirror.defineMode(\"formula\", function (options) {\r\n        function wordObj (words) {\r\n            var o = {};\r\n            for (var i = 0, e = words.length; i < e; ++i) o[words[i]] = true;\r\n            return o;\r\n        }\r\n\r\n        var atoms = wordObj([\"false\", \"true\"]);\r\n        var keywords = wordObj(BI.map(options.keywordsGetter(), \"text\"));\r\n\r\n        function tokenBase (stream, state) {\r\n            if (stream.eatSpace()) {\r\n                return null;\r\n            }\r\n            var ch = stream.next();\r\n\r\n            if (ch === \"\\\"\" || ch === \"'\") {\r\n                nextUntilUnescaped(stream, ch);\r\n                return \"string\";\r\n            }\r\n            // if (ch === \"{\") {\r\n            //     nextUntilUnescaped(stream, \"}\");\r\n            //     return \"string\";\r\n            // }\r\n            if (ch === \"\\u200b\") {\r\n                nextUntilUnescaped(stream, ch);\r\n                return \"field\";\r\n            }\r\n            if (/,/.test(ch)) {\r\n                return \"comma\";\r\n            }\r\n            if (/[()\\[\\]]/.test(ch)) {\r\n                return \"bracket\";\r\n            }\r\n\r\n            if (/[+\\-*\\/=<>!&\\^|]/.test(ch)) {\r\n                return \"operator\";\r\n            }\r\n\r\n            // richie：暂时不需要解析操作符号\r\n            // if (/[+\\-*\\/=<>!&|]/.test(ch)) {\r\n            //  return 'operator';\r\n            // }\r\n            // if (/\\d|\\d./.test(ch)) {\r\n            //    stream.eatWhile(/\\d|\\./);\r\n            //    if (stream.eol() || !/\\w/.test(stream.peek())) {\r\n            //        return 'number';\r\n            //    }\r\n            // }\r\n\r\n\r\n            // 汉字和英文单词都吞一下\r\n            stream.eatWhile(/[\\u4e00-\\u9fa5\\w-.]/);\r\n            var word = stream.current();\r\n            if (atoms.hasOwnProperty(word)) {\r\n                return \"atom\";\r\n            }\r\n            if (keywords.hasOwnProperty(word)) {\r\n                return \"keyword\";\r\n            }\r\n            return 'word';\r\n        }\r\n\r\n        function nextUntilUnescaped (stream, end) {\r\n            var escaped = false, next;\r\n            while ((next = stream.next()) != null) {\r\n                if (next === end && !escaped) {\r\n                    return false;\r\n                }\r\n                escaped = !escaped && next === \"\\\\\";\r\n            }\r\n            return escaped;\r\n        }\r\n\r\n        function tokenize (stream, state) {\r\n            return (state.tokens[0] || tokenBase)(stream, state);\r\n        }\r\n\r\n        return {\r\n            startState: function () {\r\n                return {tokens: []};\r\n            },\r\n            token: function (stream, state) {\r\n                return tokenize(stream, state);\r\n            },\r\n            fold: \"brace\"\r\n        };\r\n    });\r\n    CodeMirror.defineMIME(\"text/fx-formula\", \"formula\");\r\n\r\n    CodeMirror.defineOption(\"keywordsGetter\", false, function (cm, val) {\r\n        cm.keywordsGetter = BI.isFunction(val) ? val : function (v) {\r\n            return v;\r\n        }\r\n    });\r\n});\r\n","/**\r\n * Created by User on 2017/3/21.\r\n */\r\nBI.FormulaCollections = [\"abs\", \"ABS\", \"acos\", \"ACOS\", \"acosh\", \"ACOSH\", \"add2array\", \"ADD2ARRAY\", \"and\", \"AND\", \"array\", \"ARRAY\", \"asin\", \"ASIN\", \"asinh\", \"ASINH\", \"atan\", \"ATAN\", \"atan2\", \"ATAN2\", \"atanh\", \"ATANH\", \"average\", \"AVERAGE\", \"bitnot\", \"BITNOT\", \"bitoperation\", \"BITOPERATION\", \"ceiling\", \"CEILING\", \"char\", \"CHAR\", \"circular\", \"CIRCULAR\", \"class\", \"CLASS\", \"cnmoney\", \"CNMONEY\", \"code\", \"CODE\", \"col\", \"COL\", \"colcount\", \"COLCOUNT\", \"colname\", \"COLNAME\", \"combin\", \"COMBIN\", \"concatenate\", \"CONCATENATE\", \"correl\", \"CORREL\", \"cos\", \"COS\", \"cosh\", \"COSH\", \"count\", \"COUNT\", \"crosslayertotal\", \"CROSSLAYERTOTAL\", \"date\", \"DATE\", \"datedelta\", \"DATEDELTA\", \"datedif\", \"DATEDIF\", \"dateinmonth\", \"DATEINMONTH\", \"dateinquarter\", \"DATEINQUARTER\", \"dateinweek\", \"DATEINWEEK\", \"dateinyear\", \"DATEINYEAR\", \"datesubdate\", \"DATESUBDATE\", \"datetime\", \"DATETIME\", \"datetonumber\", \"DATETONUMBER\", \"day\", \"DAY\", \"days360\", \"DAYS360\", \"daysofmonth\", \"DAYSOFMONTH\", \"daysofquarter\", \"DAYSOFQUARTER\", \"daysofyear\", \"DAYSOFYEAR\", \"dayvalue\", \"DAYVALUE\", \"decimal\", \"DECIMAL\", \"decode\", \"DECODE\", \"degrees\", \"DEGREES\", \"encode\", \"ENCODE\", \"endwith\", \"ENDWITH\", \"enmoney\", \"ENMONEY\", \"ennumber\", \"ENNUMBER\", \"eval\", \"EVAL\", \"even\", \"EVEN\", \"exact\", \"EXACT\", \"exp\", \"EXP\", \"fact\", \"FACT\", \"fields\", \"FIELDS\", \"filename\", \"FILENAME\", \"filesize\", \"FILESIZE\", \"filetype\", \"FILETYPE\", \"find\", \"FIND\", \"floor\", \"FLOOR\", \"format\", \"FORMAT\", \"getuserdepartments\", \"GETUSERDEPARTMENTS\", \"getuserjobtitles\", \"GETUSERJOBTITLES\", \"greparray\", \"GREPARRAY\", \"hierarchy\", \"HIERARCHY\", \"hour\", \"HOUR\", \"i18n\", \"I18N\", \"if\", \"IF\", \"inarray\", \"INARRAY\", \"index\", \"INDEX\", \"indexof\", \"INDEXOF\", \"indexofarray\", \"INDEXOFARRAY\", \"int\", \"INT\", \"isnull\", \"ISNULL\", \"joinarray\", \"JOINARRAY\", \"jvm\", \"JVM\", \"layertotal\", \"LAYERTOTAL\", \"left\", \"LEFT\", \"len\", \"LEN\", \"let\", \"LET\", \"ln\", \"LN\", \"log\", \"LOG\", \"log10\", \"LOG10\", \"lower\", \"LOWER\", \"lunar\", \"LUNAR\", \"map\", \"MAP\", \"maparray\", \"MAPARRAY\", \"max\", \"MAX\", \"median\", \"MEDIAN\", \"mid\", \"MID\", \"min\", \"MIN\", \"minute\", \"MINUTE\", \"mod\", \"MOD\", \"mom\", \"MOM\", \"month\", \"MONTH\", \"monthdelta\", \"MONTHDELTA\", \"now\", \"NOW\", \"numto\", \"NUMTO\", \"nvl\", \"NVL\", \"odd\", \"ODD\", \"or\", \"OR\", \"pi\", \"PI\", \"power\", \"POWER\", \"product\", \"PRODUCT\", \"promotion\", \"PROMOTION\", \"proper\", \"PROPER\", \"proportion\", \"PROPORTION\", \"radians\", \"RADIANS\", \"rand\", \"RAND\", \"randbetween\", \"RANDBETWEEN\", \"range\", \"RANGE\", \"rank\", \"RANK\", \"records\", \"RECORDS\", \"regexp\", \"REGEXP\", \"removearray\", \"REMOVEARRAY\", \"repeat\", \"REPEAT\", \"replace\", \"REPLACE\", \"reverse\", \"REVERSE\", \"reversearray\", \"REVERSEARRAY\", \"right\", \"RIGHT\", \"round\", \"ROUND\", \"round5\", \"ROUND5\", \"rounddown\", \"ROUNDDOWN\", \"roundup\", \"ROUNDUP\", \"row\", \"ROW\", \"rowcount\", \"ROWCOUNT\", \"second\", \"SECOND\", \"seq\", \"SEQ\", \"sign\", \"SIGN\", \"sin\", \"SIN\", \"sinh\", \"SINH\", \"slicearray\", \"SLICEARRAY\", \"sort\", \"SORT\", \"sortarray\", \"SORTARRAY\", \"split\", \"SPLIT\", \"sql\", \"SQL\", \"sqrt\", \"SQRT\", \"startwith\", \"STARTWITH\", \"stdev\", \"STDEV\", \"substitute\", \"SUBSTITUTE\", \"sum\", \"SUM\", \"sumsq\", \"SUMSQ\", \"switch\", \"SWITCH\", \"tabledatafields\", \"TABLEDATAFIELDS\", \"tabledatas\", \"TABLEDATAS\", \"tables\", \"TABLES\", \"tan\", \"TAN\", \"tanh\", \"TANH\", \"time\", \"TIME\", \"tobigdecimal\", \"TOBIGDECIMAL\", \"tobinary\", \"TOBINARY\", \"todate\", \"TODATE\", \"today\", \"TODAY\", \"todouble\", \"TODOUBLE\", \"tohex\", \"TOHEX\", \"toimage\", \"TOIMAGE\", \"tointeger\", \"TOINTEGER\", \"tooctal\", \"TOOCTAL\", \"totext\", \"TOTEXT\", \"treelayer\", \"TREELAYER\", \"trim\", \"TRIM\", \"trunc\", \"TRUNC\", \"uniquearray\", \"UNIQUEARRAY\", \"upper\", \"UPPER\", \"uuid\", \"UUID\", \"value\", \"VALUE\", \"webimage\", \"WEBIMAGE\", \"week\", \"WEEK\", \"weekdate\", \"WEEKDATE\", \"weekday\", \"WEEKDAY\", \"weightedaverage\", \"WEIGHTEDAVERAGE\", \"year\", \"YEAR\", \"yeardelta\", \"YEARDELTA\"];\r\n","import FormulaCheck from \"./FormulaCheck\";\r\n\r\nconst Provider = function () {\r\n    const checkers = {};\r\n\r\n    this.addChecker = function (checker) {\r\n        BI.extend(checkers, checker);\r\n    };\r\n\r\n    this.$get = function () {\r\n        return function () {\r\n            return checkers;\r\n        };\r\n    };\r\n};\r\n\r\nBI.provider(\"bi.formula_editor.checker\", Provider);\r\n/**\r\n * 公式编辑控件\r\n * @class BI.FormulaEditor\r\n * @extends BI.Widget\r\n */\r\nBI.FormulaEditor = BI.inherit(BI.Single, {\r\n\r\n    constants: {\r\n        paramRegex: /(\\$[\\{][^\\}]*[\\}])/\r\n    },\r\n\r\n    props: {\r\n        baseCls: \"bi-formula-editor\",\r\n        watermark: \"\",\r\n        value: \"\",\r\n        showHint: true,\r\n        showTip: true,\r\n        lineHeight: 2,\r\n        lineWrapping: true,\r\n        lineNumbers: false,\r\n        paramFormatter: function (v) {\r\n            return v;\r\n        },\r\n        valueGetter: function (text) {\r\n            return text;\r\n        },\r\n        keywordsGetter: function () {\r\n            return BI.FormulaCollections;\r\n        },\r\n        // 公式校验时用到的两个函数\r\n        formulaChecker: BI.emptyFn,\r\n        paramTypeGetter: BI.emptyFn\r\n    },\r\n\r\n    render: function () {\r\n        var o = this.options, self = this;\r\n        this.errorTipText = \"\";\r\n        this._isEditing = false;\r\n        this.formulaEditor = BI.createWidget({\r\n            type: \"bi.default\"\r\n        });\r\n        var formulaHint = BI.CodeMirror.hint.formula;\r\n        BI.CodeMirror.hint.formula = function (cm, options) {\r\n            var result = formulaHint(cm, options);\r\n            if (result) {\r\n                BI.CodeMirror.on(result, \"shown\", function () {\r\n                    self.fireEvent(\"EVENT_SHOW_HINT\", BI.get(result, \"list\", []));\r\n                });\r\n\r\n                BI.CodeMirror.on(result, \"select\", function (comp) {\r\n                    self.fireEvent(\"EVENT_SELECT_HINT\", comp);\r\n                });\r\n\r\n                BI.CodeMirror.on(result, \"pick\", function (comp) {\r\n                    self.fireEvent(\"EVENT_PICK_HINT\", comp);\r\n                });\r\n            }\r\n\r\n            return result;\r\n        };\r\n        this.editor = BI.CodeMirror(this.formulaEditor.element[0], {\r\n            lineWrapping: o.lineWrapping,\r\n            lineNumbers: o.lineNumbers,\r\n            mode: \"formula\",\r\n            // 解决插入字段由括号或其他特殊字符包围时分裂的bug\r\n            specialChars: /[\\u0000-\\u001f\\u007f\\u00ad\\u200c-\\u200f\\u2028\\u2029\\ufeff]/,\r\n            // 光标旁的括号对高亮标记, 极限搜索范围2000个字符\r\n            // DEC-7094 IE下高亮括号会使得鼠标无法框选文本, 目前实在看不出来是为什么, 先在IE下取消使用了\r\n            matchBrackets: BI.isIE() ? null : {\r\n                maxScanLines: 2e3,\r\n                maxHighlightLineLength: 2e3\r\n            },\r\n            keywordsGetter: function () {\r\n                var keywords = o.keywordsGetter();\r\n                return BI.map(keywords, function (idx, obj) {\r\n                    if (BI.isKey(obj)) {\r\n                        return {\r\n                            text: obj,\r\n                            value: obj,\r\n                            type: BICst.FORMULA_KEYWORD_TYPE.FUNCTION,\r\n                            iconCls: \"formula-function-font\"\r\n                        };\r\n                    }\r\n                    return obj;\r\n                });\r\n            },\r\n            configureMouse: function () {\r\n                return {\r\n                    addNew: false\r\n                };\r\n            }\r\n        });\r\n        o.lineHeight === 1 ? this.element.addClass(\"codemirror-low-line-height\") : this.element.addClass(\"codemirror-high-line-height\");\r\n        var func = BI.debounce(function () {\r\n            BI.nextTick(function () {\r\n                self.fireEvent(BI.FormulaEditor.EVENT_CHANGE);\r\n            });\r\n        }, 300);\r\n        this.editor.on(\"change\", function (cm, change) {\r\n            self._checkWaterMark();\r\n            // 调用setValue也会触发change, 提示框只需要在编辑的时候触发\r\n            if (o.showHint && self.editor.hasFocus()) {\r\n                BI.CodeMirror.showHint(cm, BI.CodeMirror.formulaHint, { completeSingle: false });\r\n            }\r\n            // 与input一样, 防止抖动\r\n            func();\r\n        });\r\n\r\n        // 拦截ctrl + X, ctrl + C, 重新处理选中文本到剪贴板\r\n        this.editor.setOption(\"extraKeys\", {\r\n            \"Ctrl-X\": function (cm) {\r\n                self._getSelection(cm);\r\n                cm.replaceSelection(\"\");\r\n                cm.focus();\r\n            },\r\n\r\n            \"Cmd-X\": function (cm) {\r\n                self._getSelection(cm);\r\n                cm.replaceSelection(\"\");\r\n                cm.focus();\r\n            },\r\n\r\n            \"Cmd-C\": function (cm) {\r\n                self._getSelection(cm);\r\n            },\r\n\r\n            \"Ctrl-C\": function (cm) {\r\n                self._getSelection(cm);\r\n            }\r\n        });\r\n\r\n        var KEYMAP = {\r\n            \"（）\": \"()\",\r\n            \"【】\": \"[]\",\r\n            \"｛｝\": \"{}\",\r\n            \"「」\": \"{}\",\r\n            \"『』\": \"{}\",\r\n            \"，\": \",\",\r\n            \"（\": \"(\",\r\n            \"【\": \"[\",\r\n            \"｛\": \"{\",\r\n            \"）\": \")\",\r\n            \"】\": \"]\",\r\n            \"｝\": \"}\",\r\n            \"「\": \"{\",\r\n            \"」\": \"}\",\r\n            \"『\": \"{\",\r\n            \"』\": \"}\",\r\n            \"“”\": \"\\\"\\\"\",\r\n            \"‘’\": \"''\",\r\n            \"“\": \"\\\"\",\r\n            \"‘\": \"'\",\r\n            \"”\": \"\\\"\",\r\n            \"’\": \"'\"\r\n        };\r\n\r\n        // 不知道为啥copy和paste事件都触发不了\r\n        this.editor.on(\"inputRead\", function (cm, info) {\r\n            if (info.origin === \"*compose\" || info.origin === \"+input\") {\r\n                if (KEYMAP[info.text[0]]) {\r\n                    var cur = cm.getCursor(), token = cm.getTokenAt(cur);\r\n                    if (/\\b(?:string)\\b/.test(token.type)) {\r\n                        const length = token[\"string\"].length;\r\n                        if (token[\"string\"].length > 2 &&token[\"string\"].charAt(0) === '\"' && token[\"string\"].charAt(length - 1) === '\"') {\r\n                            return;\r\n                        }\r\n                    }\r\n\r\n                    var fromPos = BI.clone(info.from);\r\n                    BI.nextTick(function () {\r\n                        // 把默认粘贴进去的文本删除掉\r\n                        var endPos = self.editor.getDoc().getCursor();\r\n                        self.editor.getDoc().replaceRange(\"\", fromPos, endPos);\r\n                        // 使用一般的方法重新插入value值\r\n                        self._setValue(KEYMAP[info.text[0]], fromPos);\r\n                        func();\r\n                    });\r\n                }\r\n            }\r\n            if (info.origin === \"paste\") {\r\n                var fromPos = BI.clone(info.from);\r\n                // TODO 因为无法阻止默认的文本粘贴，此处先把粘贴的文本删掉，再次插入format的文本\r\n                BI.nextTick(function () {\r\n                    // 把默认粘贴进去的文本删除掉\r\n                    var endPos = self.editor.getDoc().getCursor();\r\n                    self.editor.getDoc().replaceRange(\"\", fromPos, endPos);\r\n                    // 使用一般的方法重新插入value值\r\n                    self._setValue(self._removeInvisibleChar(info.text.join(\"\\n\")), fromPos);\r\n                    func();\r\n                });\r\n            }\r\n        });\r\n\r\n        this.editor.on(\"focus\", function () {\r\n            self._isEditing = true;\r\n            self._checkWaterMark();\r\n            self.fireEvent(BI.FormulaEditor.EVENT_FOCUS);\r\n        });\r\n\r\n        this.editor.on(\"blur\", function () {\r\n            self._isEditing = false;\r\n            self.fireEvent(BI.FormulaEditor.EVENT_BLUR);\r\n        });\r\n\r\n        this.editor.on(\"keyup\", function (cm, keyboard) {\r\n            self.fireEvent(BI.FormulaEditor.EVENT_KEY_UP, keyboard.key);\r\n        });\r\n        this.editor.on(\"cursorActivity\", function (cm) {\r\n            self.fireEvent(BI.FormulaEditor.EVENT_CURSOR_ACTIVITY, cm);\r\n        });\r\n\r\n\r\n        var tips = [{\r\n            el: {\r\n                type: \"bi.vertical\",\r\n                invisible: true,\r\n                items: [{\r\n                    type: \"bi.label\",\r\n                    cls: \"error-tip\",\r\n                    hgap: 5,\r\n                    vgap: 2,\r\n                    ref: function (_ref) {\r\n                        self.errorText = _ref;\r\n                    },\r\n                    text: \"\"\r\n                }],\r\n                ref: function (_ref) {\r\n                    self.errorTip = _ref;\r\n                }\r\n            },\r\n            left: 0,\r\n            bottom: 0\r\n        }, {\r\n            el: {\r\n                type: \"bi.vertical\",\r\n                invisible: !o.showTip,\r\n                items: [{\r\n                    type: \"bi.label\",\r\n                    hgap: 5,\r\n                    vgap: 2,\r\n                    cls: \"bi-tips\",\r\n                    text: BI.i18nText(\"BI-Basic_Formula_Valid\")\r\n                }],\r\n                ref: function (_ref) {\r\n                    self.normalTip = _ref;\r\n                }\r\n            },\r\n            left: 0,\r\n            bottom: 0\r\n        }];\r\n\r\n        if (BI.isKey(this.options.watermark)) {\r\n            var self = this;\r\n            this.watermark = BI.createWidget({\r\n                type: \"bi.text\",\r\n                cls: \"bi-water-mark\",\r\n                text: this.options.watermark,\r\n                whiteSpace: \"normal\",\r\n                textAlign: \"left\"\r\n            });\r\n            BI.createWidget({\r\n                type: \"bi.absolute\",\r\n                element: self,\r\n                items: [{\r\n                    el: this.formulaEditor,\r\n                    left: 0,\r\n                    right: 0,\r\n                    top: 0,\r\n                    bottom: o.showTip ? 24 : 0\r\n                }, {\r\n                    el: self.watermark,\r\n                    left: 6,\r\n                    right: 6,\r\n                    top: 3\r\n                }].concat(tips)\r\n            });\r\n\r\n            this.watermark.element.bind(\r\n                \"mousedown\", function (e) {\r\n                    self.insertString(\"\");\r\n                    self.editor.focus();\r\n                    e.stopEvent();\r\n                }\r\n            );\r\n            this.watermark.element.bind(\"click\", function (e) {\r\n                self.editor.focus();\r\n                e.stopEvent();\r\n            });\r\n        } else {\r\n            BI.createWidget({\r\n                type: \"bi.absolute\",\r\n                element: self,\r\n                items: [{\r\n                    el: this.formulaEditor,\r\n                    left: 0,\r\n                    right: 0,\r\n                    top: 0,\r\n                    bottom: o.showTip ? 24 : 0\r\n                }].concat(tips)\r\n            });\r\n        }\r\n\r\n    },\r\n\r\n    mounted: function () {\r\n        var o = this.options;\r\n        if (BI.isNotNull(o.value)) {\r\n            this.setValue(o.value);\r\n        }\r\n    },\r\n\r\n    _removeInvisibleChar: function (v) {\r\n        return BI.replaceAll(v || \"\", \"\\u200b\", \"\");\r\n    },\r\n\r\n    _getSelection: function (cm) {\r\n        var self = this;\r\n        if (!this.clipboard) {\r\n            var adaptCopyWidget = BI.createWidget({\r\n                type: \"bi.layout\",\r\n                invisible: true\r\n            });\r\n            this.clipboard = BI.createWidget({\r\n                type: \"bi.clipboard\",\r\n                el: adaptCopyWidget,\r\n                copy: function () {\r\n                    return selectString;\r\n                },\r\n                afterCopy: function () {\r\n                    self.clipboard.destroy();\r\n                    self.clipboard = null;\r\n                }\r\n            });\r\n            BI.createWidget({\r\n                type: \"bi.absolute\",\r\n                element: \"body\",\r\n                items: [{\r\n                    el: this.clipboard\r\n                }]\r\n            });\r\n        }\r\n        var selectString = cm.getDoc().getSelection() || \"\";\r\n        var allParams = BI.filter(selectString.split(\"\\u200b\"), function (idx) {\r\n            return idx % 2 === 1;\r\n        });\r\n        // BI-79714 需要优先匹配最长的\r\n        var paramArray = allParams.sort(function (a, b) {\r\n            return b.length - a.length;\r\n        });\r\n        // BI-82911 转义正则的特殊字符\r\n        paramArray = BI.map(paramArray, function (idx, param) {\r\n            return param.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, \"\\\\$&\");\r\n        });\r\n        selectString = selectString.replaceAll(BI.concat(paramArray, \"\\u200b\").join(\"|\"), function (matchStr, index) {\r\n            switch (matchStr) {\r\n                case \"\\u200b\":\r\n                    return \"\";\r\n                default:\r\n                    return (index === 0 || selectString[index - 1] !== \"\\u200b\") ? matchStr : (\"${\" + matchStr + \"}\");\r\n            }\r\n        });\r\n        this.clipboard.element.click();\r\n    },\r\n\r\n    _checkWaterMark: function () {\r\n        var o = this.options;\r\n        if (!this.disabledWaterMark && BI.isEmptyString(this.editor.getValue()) && BI.isKey(o.watermark)) {\r\n            this.watermark && this.watermark.visible();\r\n        } else {\r\n            this.watermark && this.watermark.invisible();\r\n        }\r\n    },\r\n\r\n    _setEnable: function (b) {\r\n        BI.FormulaEditor.superclass._setEnable.apply(this, arguments);\r\n        this.editor.setOption(\"readOnly\", b === true ? false : \"nocursor\");\r\n    },\r\n\r\n    _analyzeContent: function (v) {\r\n        // \\w*\\w 这是干啥呢, 至少匹配一次\\w ? 那可以用\\w+\r\n        var regx = /\\$[\\{][^\\}]*[\\}]|(\\w|\\.)+|\\$\\{[^\\$\\(\\)\\+\\-\\*\\/)\\$,]*\\w\\}|\\$\\{[^\\$\\(\\)\\+\\-\\*\\/]*\\w\\}|\\$\\{[^\\$\\(\\)\\+\\-\\*\\/]*[\\u4e00-\\u9fa5]\\}|\\w|(.)|\\n/g;\r\n\r\n        return v.match(regx);\r\n    },\r\n\r\n    selectAll: function () {\r\n        this.editor.execCommand(\"selectAll\");\r\n        this._isEditing = true;\r\n    },\r\n\r\n    disableWaterMark: function () {\r\n        this.disabledWaterMark = true;\r\n        this._checkWaterMark();\r\n    },\r\n\r\n    focus: function () {\r\n        if (!this._isEditing === true) {\r\n            this.editor.focus();\r\n            this.selectAll();\r\n        }\r\n    },\r\n\r\n    showTip: function (v) {\r\n        this.normalTip.setVisible(false);\r\n        this.errorTip.setVisible(true);\r\n        v && this.errorText.setText(v);\r\n    },\r\n\r\n    hideTip: function () {\r\n        this.normalTip.setVisible(true);\r\n        this.errorTip.setVisible(false);\r\n    },\r\n\r\n    getTip: function () {\r\n        return this.errorTipText;\r\n    },\r\n\r\n    /**\r\n     * 添加字段\r\n     * @param fieldId\r\n     * @param force, 判断是否强制不标红\r\n     */\r\n    _insertField: function (fieldId, force) {\r\n        var value = fieldId;\r\n        var fieldFormattedName = this.options.paramFormatter(fieldId) || \"undefined\";\r\n        var from = BI.clone(this.editor.getCursor(\"from\"));\r\n        // 解决插入字段由括号或其他特殊字符包围时分裂的bug,在两端以不可见字符包裹一下\r\n        var showName = fieldFormattedName.replaceAll(\"^<!.*!>$\", function (str) {\r\n            return str.substring(2, str.length - 2);\r\n        });\r\n        this.editor.replaceSelection(\"\\u200b\" + showName + \"\\u200b\");\r\n        var to = this.editor.getCursor(\"to\");\r\n        var className = \"fieldName\";\r\n        if (BI.isNotNull(fieldFormattedName.match(\"^<!.*!>$\")) && !force) {\r\n            className = \"error-field\";\r\n        }\r\n        // handleMouseEvents和replacedWith需要搭配使用，让codemirror接管鼠标事件\r\n        this.editor.markText(from, to, {\r\n            className: className,\r\n            handleMouseEvents: true,\r\n            atomic: true,\r\n            startStyle: \"start\",\r\n            endStyle: \"end\",\r\n            value: value,\r\n            replacedWith: BI.$(\"<span class='\" + className + \"  start end' />\").text(showName)[0]\r\n        });\r\n    },\r\n\r\n    insertField: function (fieldId, force) {\r\n        this._insertField(fieldId, force);\r\n        this.editor.focus();\r\n    },\r\n\r\n    _insertFunction: function (fn) {\r\n        var from = BI.clone(this.editor.getCursor(\"from\"));\r\n        this.editor.replaceSelection(fn);\r\n        var to = this.editor.getCursor(\"to\");\r\n        this.editor.markText(from, to, {className: \"#function\", atomic: true});\r\n        this.editor.replaceSelection(\"()\");\r\n        to = this.editor.getCursor();\r\n        to.ch = to.ch - 1;\r\n        this.editor.setCursor(to);\r\n    },\r\n\r\n    _isFunction: function (str) {\r\n        return BI.some(this.options.keywordsGetter(), function (idx, obj) {\r\n            var text = obj.text || obj;\r\n            return str === text.toLowerCase() || str === text.toUpperCase();\r\n        });\r\n    },\r\n\r\n    _setFunction: function (v) {\r\n        var from = this.editor.getCursor();\r\n        this.editor.replaceSelection(v);\r\n        var to = this.editor.getCursor();\r\n        this.editor.markText(from, to, {className: \"#function\", atomic: true});\r\n    },\r\n\r\n    insertFunction: function (fn) {\r\n        this._insertFunction(fn);\r\n        this.editor.focus();\r\n    },\r\n\r\n    _insertOperator: function (op) {\r\n        var from = this.editor.getCursor();\r\n        this.editor.replaceSelection(op);\r\n        var to = this.editor.getCursor();\r\n        this.editor.markText(from, to, {className: \"%operator\", atomic: true});\r\n    },\r\n\r\n    insertOperator: function (op) {\r\n        this._insertOperator(op);\r\n        this.editor.focus();\r\n    },\r\n\r\n    _insertString: function (str) {\r\n        this.editor.replaceSelection(str);\r\n    },\r\n\r\n    insertString: function (str) {\r\n        this._insertString(str);\r\n        this.editor.focus();\r\n    },\r\n\r\n    getFormulaString: function () {\r\n        return this.editor.getValue();\r\n    },\r\n\r\n    getUsedFields: function () {\r\n        var fields = [];\r\n        this.editor.getValue(true, function (line) {\r\n            _.forEach(line.markedSpans, function (i, ms) {\r\n                switch (i.marker.className) {\r\n                    case \"fieldName\":\r\n                    case \"error-field\":\r\n                        // 因为插入字段的时候首尾加了不可见字符，所以首尾缩进一个字符\r\n                        var dId = i.marker.value;\r\n                        if (!BI.contains(fields, dId)) {\r\n                            fields.push(dId);\r\n                        }\r\n\r\n                }\r\n            });\r\n        });\r\n        return fields;\r\n    },\r\n\r\n    getCheckString: function () {\r\n        return this.editor.getValue(true, function (line) {\r\n            var value = line.text, num = 0;\r\n            var markedSpans = _.clone(line.markedSpans) || [];\r\n            markedSpans.sort(function (a, b) {\r\n                return a.from - b.from;\r\n            });\r\n\r\n            _.forEach(markedSpans, function (i, ms) {\r\n\r\n                switch (i.marker.className) {\r\n                    case \"fieldName\":\r\n                    case \"error-field\":\r\n                        var fieldNameLength = i.to - i.from;\r\n                        value = value.substr(0, i.from + num) + \"$a\" + value.substr(i.to + num, value.length);\r\n                        num = num + 2 - fieldNameLength;\r\n                        break;\r\n                    default:\r\n                }\r\n\r\n            });\r\n            return value;\r\n        }).replaceAll(\"(\\\\$\\\\{.*?\\\\})\\\\s*|\\u200b\", function (matchStr, groupStr) {\r\n            switch (matchStr) {\r\n                case \"\\u200b\":\r\n                    return \"\";\r\n                default:\r\n                    return groupStr;\r\n            }\r\n        });\r\n    },\r\n\r\n    getValue: function () {\r\n        var v = this.editor.getValue(\"\\n\", function (line) {\r\n            var value = line.text, num = 0;\r\n            var markedSpans = _.clone(line.markedSpans) || [];\r\n            markedSpans.sort(function (a, b) {\r\n                return a.from - b.from;\r\n            });\r\n\r\n            _.forEach(markedSpans, function (i, ms) {\r\n                switch (i.marker.className) {\r\n                    case \"fieldName\":\r\n                    case \"error-field\":\r\n                        var fieldNameLength = i.to - i.from;\r\n                        var fieldId = i.marker.value;\r\n                        // 这边直接跳过了不可见字符\r\n                        value = value.substr(0, i.from + num) + \"$\\{\" + fieldId + \"\\}\" + value.substr(i.to + num, value.length);\r\n                        num += fieldId.length - fieldNameLength + 3;\r\n                        break;\r\n                    default:\r\n                }\r\n            });\r\n            return value;\r\n        });\r\n        return v.replaceAll(\"(\\\\$\\\\{.*?\\\\})\\\\s*|\\u200b\", function (matchStr, groupStr) {\r\n            switch (matchStr) {\r\n                case \"\\u200b\":\r\n                    return \"\";\r\n                default:\r\n                    return groupStr;\r\n            }\r\n        });\r\n    },\r\n\r\n    markField: function (field) {\r\n        var className = field.invalid ? \"error-field\" : \"fieldName\";\r\n        this.editor.markText(field.from, field.to, {\r\n            handleMouseEvents: true,\r\n            className: className,\r\n            atomic: true,\r\n            startStyle: \"start\",\r\n            endStyle: \"end\",\r\n            value: field.value,\r\n            replacedWith: BI.$(\"<span class='\" + className + \"  start end' />\").text(field.text)[0]\r\n        });\r\n    },\r\n\r\n    markFunction: function (func) {\r\n        this.editor.markText(func.from, func.to, {\r\n            className: \"#function\",\r\n            atomic: true\r\n        });\r\n    },\r\n\r\n    getParamWrap: function () {\r\n        return \"\\u200b\";\r\n    },\r\n\r\n    beautify: function () {\r\n        var self = this, o = this.options;\r\n        var v = this.editor.beautify({\r\n            valueGetter: function (v) {\r\n                return \"${\" + o.valueGetter(self._removeInvisibleChar(v)) + \"}\";\r\n            }\r\n        });\r\n        this.setValue(v);\r\n    },\r\n\r\n    /**\r\n     * 原来的setValue是按照编辑公式的模式, 循环插字符，插字段，插公式一个个步骤做的，在长公式的情况下性能很差\r\n     * 现在采用以下方式做优化:\r\n     *      1、整个公式当成字符串直接setValue进去\r\n     *      2、对其中的字段和函数进行标记\r\n     */\r\n    _setValue: function (value, position) {\r\n        var self = this, c = this.constants, o = this.options;\r\n        value = value || \"\";\r\n        var result = this._analyzeContent(value);\r\n        var fieldArray = [], functionArray = [];\r\n        var lineNum = 0;\r\n        var offset = 0;\r\n        var valueString = \"\";\r\n        if (BI.isNotNull(position)) {\r\n            lineNum = position.line;\r\n            offset = position.ch;\r\n        }\r\n        var wrapChar = self.getParamWrap();\r\n        BI.each(result, function (i, str) {\r\n            var nextStr = (i === result.length - 1) ? \"\" : result[i + 1];\r\n            if (c.paramRegex.test(str)) {\r\n                var fieldId = str.substring(2, str.length - 1);\r\n                var fieldFormattedName = o.paramFormatter(fieldId);\r\n                // fieldId未匹配到报错字段和正常字段\r\n                if (BI.isNull(fieldFormattedName)) {\r\n                    // 尝试以fieldId作为显示值匹配\r\n                    if (o.valueGetter(fieldId)) {\r\n                        // 匹配到则转化为正常的字段参数格式\r\n                        fieldFormattedName = fieldId;\r\n                        fieldId = o.valueGetter(fieldFormattedName);\r\n                        fieldFormattedName = o.paramFormatter(fieldId);\r\n                    } else {\r\n                        // 未匹配到标红显示显示值字段\r\n                        fieldFormattedName = \"<!\" + fieldId + \"!>\";\r\n                    }\r\n                }\r\n                var showName = fieldFormattedName.replaceAll(\"^<!.*!>$\", function (str) {\r\n                    return str.substring(2, str.length - 2);\r\n                });\r\n                showName = wrapChar + showName + wrapChar;\r\n                var fromPos = BI.CodeMirror.Pos(lineNum, offset);\r\n                valueString += showName;\r\n                offset += showName.length;\r\n                var endPos = BI.CodeMirror.Pos(lineNum, offset);\r\n                fieldArray.push({\r\n                    from: fromPos,\r\n                    to: endPos,\r\n                    value: fieldId,\r\n                    invalid: /^<!.*!>$/.test(fieldFormattedName),\r\n                    text: showName\r\n                });\r\n            } else {\r\n                // 是函数\r\n                if (nextStr[0] === \"(\" && self._isFunction(str)) {\r\n                    var fromPos = BI.CodeMirror.Pos(lineNum, offset);\r\n                    var endPos = BI.CodeMirror.Pos(lineNum, offset + str.length);\r\n                    functionArray.push({\r\n                        from: fromPos,\r\n                        to: endPos,\r\n                        value: str\r\n                    });\r\n\r\n                }\r\n                if (str === \"\\n\") {\r\n                    lineNum++;\r\n                    offset = 0;\r\n                }\r\n                valueString += str;\r\n                str !== \"\\n\" && (offset += str.length);\r\n            }\r\n        });\r\n        this.insertString(valueString);\r\n        BI.each(fieldArray, function (idx, field) {\r\n            self.markField(field);\r\n        });\r\n        BI.each(functionArray, function (idx, field) {\r\n            self.markFunction(field);\r\n        });\r\n\r\n    },\r\n\r\n    setValue: function (v) {\r\n        this.editor.setValue(\"\");\r\n        this._setValue(v);\r\n    },\r\n\r\n    refresh: function () {\r\n        var self = this;\r\n        BI.nextTick(function () {\r\n            self.editor.refresh();\r\n        });\r\n    },\r\n\r\n    setVisible: function (visible) {\r\n        BI.FormulaEditor.superclass.setVisible.apply(this, arguments);\r\n        visible && this.refresh();\r\n    },\r\n\r\n    check: function (value) {\r\n        const formulaCheck = new FormulaCheck(this.options.formulaChecker());\r\n\r\n        const formula = value || this.getValue();\r\n        if (!formula) {\r\n            return;\r\n        }\r\n        let error;\r\n        try {\r\n            formulaCheck.parse(formula.replace(/\\$\\{.*?\\}/g, (matchStr) => {\r\n                const field = matchStr.substring(2, matchStr.length - 1);\r\n                const paramType = this.options.paramTypeGetter(field);\r\n                switch (paramType) {\r\n                    case \"number\":\r\n                        return 1;\r\n                    case \"boolean\":\r\n                        return true;\r\n                    case \"date\":\r\n                        return \"\\\"bi-date-place-holder\\\"\";\r\n                    default:\r\n                        return \"\\\"\" + field + \"\\\"\";\r\n                }\r\n            }));\r\n        } catch (err) {\r\n            error = err;\r\n        }\r\n        return error;\r\n    }\r\n});\r\nBI.FormulaEditor.EVENT_CHANGE = \"EVENT_CHANGE\";\r\nBI.FormulaEditor.EVENT_BLUR = \"EVENT_BLUR\";\r\nBI.FormulaEditor.EVENT_FOCUS = \"EVENT_FOCUS\";\r\nBI.FormulaEditor.EVENT_KEY_UP = \"EVENT_KEY_UP\";\r\nBI.FormulaEditor.EVENT_CURSOR_ACTIVITY = \"EVENT_CURSOR_ACTIVITY\";\r\nBI.shortcut(\"bi.formula_editor\", BI.FormulaEditor);\r\n","/**\r\n *\r\n * Created by GUY on 2017/09/18.\r\n * @class BI.TextToolbar\r\n * @extends BI.Widget\r\n */\r\nBI.RichEditorAction = BI.inherit(BI.Widget, {\r\n    _defaultConfig: function () {\r\n        return BI.extend(BI.RichEditorAction.superclass._defaultConfig.apply(this, arguments), {\r\n            width: 20,\r\n            height: 20,\r\n            command: \"\",\r\n            used: true\r\n        });\r\n    },\r\n\r\n    _init: function () {\r\n        BI.RichEditorAction.superclass._init.apply(this, arguments);\r\n        var self = this, o = this.options;\r\n        o.editor.on(BI.NicEditor.EVENT_SELECTED, function (e) {\r\n            BI.defer(function () {\r\n                if (o.used === true) {\r\n                    var focus = window.getSelection().focusNode;\r\n                    self.setEnable(true);\r\n                    self.checkNodes(focus || e.target);\r\n                    self.key(e);\r\n                }\r\n            });\r\n        });\r\n        // o.editor.on(BI.NicEditor.EVENT_BLUR, function () {\r\n        //     self.setEnable(false);\r\n        // });\r\n        // o.editor.on(BI.NicEditor.EVENT_KEYDOWN, BI.bind(this.keydown, this));\r\n        // if (o.used === false) {\r\n        //     this.setEnable(false);\r\n        // }\r\n    },\r\n\r\n    checkNodes: function (e) {\r\n        if (!e) {\r\n            return false;\r\n        }\r\n        var elm = e, self = this;\r\n        do {\r\n            if (this.options.tags && BI.contains(this.options.tags, elm.nodeName)) {\r\n                this.activate();\r\n                return true;\r\n            }\r\n        } while (elm = elm.parentNode && elm.className && elm.className.indexOf(\"bi-nic-editor\") >= -1);\r\n        elm = e;\r\n        while (elm.nodeType == 3) {\r\n            elm = elm.parentNode;\r\n        }\r\n        if (this.options.css) {\r\n            for (var itm in this.options.css) {\r\n                if (this.options.css[itm] == null) {\r\n                    this.activate(self._getDomStyle(elm, itm), e);\r\n                    return true;\r\n                }\r\n                if (BI.$(elm).css(itm) == this.options.css[itm]) {\r\n                    this.activate();\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        this.deactivate();\r\n        return false;\r\n    },\r\n\r\n    start: function () {\r\n\r\n    },\r\n\r\n    key: function () {\r\n\r\n    },\r\n\r\n    keydown: function () {\r\n    },\r\n\r\n    hideIf: function (e) {\r\n\r\n    },\r\n\r\n    activate: function () {\r\n    },\r\n\r\n    deactivate: function () {\r\n    },\r\n\r\n    restoreRng: function () {\r\n        this.options.editor.restoreRng();\r\n    },\r\n\r\n    doCommand: function (args) {\r\n        // 执行命令前先恢复选区\r\n        this.restoreRng();\r\n\r\n        if (this.options.command) {\r\n            this.options.editor.nicCommand(this.options.command, args);\r\n        }\r\n    },\r\n\r\n    getValue: function () {\r\n\r\n    },\r\n\r\n    _getDomStyle: function (el, itm) {\r\n        var self = this;\r\n        if (itm === \"color\") {\r\n            return self._getDomColor(el);\r\n        }\r\n        var nodeStyle = BI.$(el).css(itm);\r\n        // 只有一个子元素时直接使用字元素的fontSize\r\n        if (el.children && el.children.length === 1) {\r\n            return self._getDomStyle(el.children[0], itm) || nodeStyle;\r\n        }\r\n        var style = null;\r\n        BI.each(el.children, function (idx, child) {\r\n            if (child.innerText !== \"\") {\r\n                var s = self._getDomStyle(child, itm) || nodeStyle;\r\n                if (!style) {\r\n                    style = s;\r\n                } else if (style !== s) {\r\n                    style = nodeStyle;\r\n                }\r\n            }\r\n        });\r\n        return style || nodeStyle;\r\n    },\r\n\r\n    _getDomColor: function (el) {\r\n        var color = BI.get(el, [\"style\", \"color\"], BI.DOM.hex2rgb(el.getAttribute(\"color\")));\r\n        while (BI.isEmpty(color) && el.tagName !== \"P\") {\r\n            el = el.parentNode;\r\n            color = BI.get(el, [\"style\", \"color\"], BI.DOM.hex2rgb(el.getAttribute(\"color\")));\r\n        }\r\n\r\n        if (color === \"\" || color === \"inherit\") {\r\n            color = \"\";\r\n        }\r\n        if (color === \"transparent\") {\r\n            color = \"rgba(0, 0, 0, 0)\";\r\n        }\r\n\r\n        return color;\r\n    }\r\n\r\n});\r\n","/**\r\n *\r\n * Created by GUY on 2017/09/18.\r\n * @class BI.RichEditorParamAction\r\n * @extends BI.Widget\r\n */\r\nBI.RichEditorParamAction = BI.inherit(BI.RichEditorAction, {\r\n    _defaultConfig: function () {\r\n        return BI.extend(BI.RichEditorParamAction.superclass._defaultConfig.apply(this, arguments), {\r\n            paramFormatter: function (v) {\r\n                return v;\r\n            }\r\n        });\r\n    },\r\n\r\n    _init: function () {\r\n        BI.RichEditorParamAction.superclass._init.apply(this, arguments);\r\n    },\r\n\r\n    // _createBlankNode: function () {\r\n    //     return BI.$(\"<span>\").html(\"&nbsp;\");\r\n    // },\r\n\r\n    // _addBlank: function ($param) {\r\n    //     var o = this.options;\r\n    //     var instance = o.editor.selectedInstance;\r\n    //     var next = $param.next();\r\n    //     if (next.length === 0) {\r\n    //         var nextNode = this._createBlankNode();\r\n    //         $param.after(nextNode);\r\n    //         instance.setFocus(nextNode[0]);\r\n    //     } else {\r\n    //         instance.setFocus(next[0]);\r\n    //     }\r\n    // },\r\n    //\r\n    // _get$Sel: function () {\r\n    //     var o = this.options;\r\n    //     var instance = o.editor.selectedInstance;\r\n    //     var sel = BI.$(instance.selElm());\r\n    //     return sel;\r\n    // },\r\n\r\n    addParam: function (param, encodeFn) {\r\n        var o = this.options;\r\n        var instance = o.editor.instance;\r\n        var image = new Image();\r\n        var name = o.paramFormatter(param);\r\n        var attrs = BI.DOM.getImage(name);\r\n        image.src = attrs.src;\r\n        image.alt = BI.isFunction(encodeFn) ? encodeFn(param) : param;\r\n        BI.$(image).addClass(\"rich-editor-param\");\r\n        BI.$(image).attr(\"style\", attrs.style);\r\n        BI.$(image).attr(\"name\", window.encodeURIComponent(name));\r\n        instance.insertHTML(BI.$(\"<div>\").append(image).html(), true);\r\n        // var sel = this._get$Sel();\r\n        // var wrapper = o.editor.instance.getElm().element;\r\n        // if (wrapper.find(sel).length <= 0) {\r\n        //     wrapper.append(image);\r\n        // } else {\r\n        //     sel.after(image);\r\n        // }\r\n        // this._addBlank(BI.$(image));\r\n    }\r\n});\r\n\r\n// /**\r\n//  *\r\n//  * Created by GUY on 2017/09/18.\r\n//  * @class BI.RichEditorParamAction\r\n//  * @extends BI.Widget\r\n//  */\r\n// BI.RichEditorParamAction = BI.inherit(BI.RichEditorAction, {\r\n//     _defaultConfig: function () {\r\n//         return BI.extend(BI.RichEditorParamAction.superclass._defaultConfig.apply(this, arguments), {});\r\n//     },\r\n//\r\n//     _init: function () {\r\n//         BI.RichEditorParamAction.superclass._init.apply(this, arguments);\r\n//     },\r\n//\r\n//     _isParam: function (sel) {\r\n//         return sel.attr(\"data-type\") === \"param\";\r\n//     },\r\n//\r\n//     _createBlankNode: function () {\r\n//         return BI.$(\"<span>\").html(\"&nbsp;\");\r\n//     },\r\n//\r\n//     _addBlank: function ($param) {\r\n//         var o = this.options;\r\n//         var instance = o.editor.selectedInstance;\r\n//         var next = $param.next();\r\n//         if (next.length === 0 || this._isParam(next)) {\r\n//             var preNode = this._createBlankNode();\r\n//             var nextNode = this._createBlankNode();\r\n//             $param.before(preNode);\r\n//             $param.after(nextNode);\r\n//             instance.setFocus(nextNode[0]);\r\n//         } else {\r\n//             instance.setFocus(next[0]);\r\n//         }\r\n//     },\r\n//\r\n//     _get$Sel: function () {\r\n//         var o = this.options;\r\n//         var instance = o.editor.selectedInstance;\r\n//         var sel = $(instance.selElm());\r\n//         if (sel[0].nodeType === 3 && this._isParam(sel.parent())) {\r\n//             sel = sel.parent();\r\n//         }\r\n//         return sel;\r\n//     },\r\n//\r\n//     addParam: function (param) {\r\n//         var o = this.options;\r\n//         var sel = this._get$Sel();\r\n//         var $param = BI.$(\"<span>\").attr({\r\n//             \"data-type\": \"param\",\r\n//             \"data-value\": param\r\n//         }).css({\r\n//             color: \"white\",\r\n//             backgroundColor: \"#009de3\",\r\n//             padding: \"0 5px\"\r\n//         }).text(param).keydown(function (e) {\r\n//             if (e.keyCode === BI.KeyCode.BACKSPACE || e.keyCode === BI.KeyCode.DELETE) {\r\n//                 $param.destroy();\r\n//             }\r\n//             e.stopEvent();\r\n//             return false;\r\n//         });\r\n//         var wrapper = o.editor.instance.getElm().element;\r\n//         if (wrapper.find(sel).length <= 0) {\r\n//             wrapper.append($param);\r\n//         } else {\r\n//             sel.after($param);\r\n//         }\r\n//         this._addBlank($param);\r\n//     },\r\n//\r\n//     keydown: function (e) {\r\n//         var o = this.options;\r\n//         var sel = this._get$Sel();\r\n//         if (e.keyCode === 229) {// 中文输入法\r\n//             if (this._isParam(sel)) {\r\n//                 this._addBlank(sel);\r\n//                 e.stopEvent();\r\n//                 return false;\r\n//             }\r\n//         }\r\n//         if (BI.Key[e.keyCode] || e.keyCode === BI.KeyCode.TAB || e.keyCode === BI.KeyCode.ENTER || e.keyCode === BI.KeyCode.SPACE) {\r\n//             if (this._isParam(sel)) {\r\n//                 e.stopEvent();\r\n//                 return false;\r\n//             }\r\n//         }\r\n//         if (e.keyCode === BI.KeyCode.BACKSPACE || e.keyCode === BI.KeyCode.DELETE) {\r\n//             if (this._isParam(sel)) {\r\n//                 sel.destroy();\r\n//                 e.preventDefault();\r\n//                 return false;\r\n//             }\r\n//         }\r\n//     },\r\n//\r\n//     key: function (e) {\r\n//     }\r\n// });\r\n\r\n","/**\r\n * 颜色选择\r\n *\r\n * Created by GUY on 2015/11/26.\r\n * @class BI.RichEditorTextToolbar\r\n * @extends BI.Widget\r\n */\r\nBI.RichEditorTextToolbar = BI.inherit(BI.Widget, {\r\n    _defaultConfig: function () {\r\n        return BI.extend(BI.RichEditorTextToolbar.superclass._defaultConfig.apply(this, arguments), {\r\n            baseCls: \"bi-rich-editor-text-toolbar\",\r\n            buttons: [\r\n                {type: \"bi.rich_editor_font_chooser\"},\r\n                {type: \"bi.rich_editor_size_chooser\"},\r\n                {type: \"bi.rich_editor_bold_button\"},\r\n                {type: \"bi.rich_editor_italic_button\"},\r\n                {type: \"bi.rich_editor_underline_button\"},\r\n                {type: \"bi.rich_editor_color_chooser\"},\r\n                {type: \"bi.rich_editor_background_color_chooser\"},\r\n                {type: \"bi.rich_editor_align_left_button\"},\r\n                {type: \"bi.rich_editor_align_center_button\"},\r\n                {type: \"bi.rich_editor_align_right_button\"},\r\n                {type: \"bi.rich_editor_param_button\"}\r\n            ],\r\n            height: 34\r\n        });\r\n    },\r\n\r\n    _init: function () {\r\n        BI.RichEditorTextToolbar.superclass._init.apply(this, arguments);\r\n        var self = this, o = this.options;\r\n        var buttons = BI.createWidgets(BI.map(o.buttons, function (i, btn) {\r\n            return BI.extend(btn, {\r\n                editor: o.editor,\r\n                height: 24\r\n            });\r\n        }));\r\n        BI.createWidget({\r\n            type: \"bi.horizontal\",\r\n            element: this,\r\n            items: buttons,\r\n            hgap: 3,\r\n            vgap: 5\r\n        });\r\n    },\r\n\r\n    mounted: function () {\r\n        var self = this;\r\n        if (BI.isIE9Below()) {// IE8下必须要设置unselectable才能不blur输入框\r\n            this.element.mousedown(function () {\r\n                self._noSelect(self.element[0]);\r\n            });\r\n            this._noSelect(this.element[0]);\r\n        }\r\n    },\r\n\r\n    _noSelect: function (element) {\r\n        if (element.setAttribute && element.nodeName.toLowerCase() != \"input\" && element.nodeName.toLowerCase() != \"textarea\") {\r\n            element.setAttribute(\"unselectable\", \"on\");\r\n        }\r\n        for (var i = 0; i < element.childNodes.length; i++) {\r\n            this._noSelect(element.childNodes[i]);\r\n        }\r\n    }\r\n});\r\nBI.shortcut(\"bi.rich_editor_text_toolbar\", BI.RichEditorTextToolbar);","/**\r\n * 富文本编辑器\r\n *\r\n * Created by GUY on 2017/9/15.\r\n * @class BI.NicEditor\r\n * @extends BI.Widget\r\n */\r\n!(function () {\r\n    function isIE11Below () {\r\n        if (!BI.isIE()) {\r\n            return false;\r\n        }\r\n        return BI.getIEVersion() < 11;\r\n    }\r\n\r\n    function clearSelectionRange () {\r\n        var selection = window.getSelection ? window.getSelection() : document.selection;\r\n\r\n        selection.removeAllRanges();\r\n    }\r\n\r\n    var SPECIAL_TAGS = {\r\n        \"&\": \"&amp;\",\r\n        \"$\": \"&dollar;\",\r\n        \"{\": \"&lcub;\",\r\n        \"}\": \"&rcub;\",\r\n        \"\\\"\": \"&quot;\",\r\n        \"<\": \"&lt;\",\r\n        \">\": \"&gt;\"\r\n    };\r\n\r\n    function htmlEncode (text) {\r\n        return BI.isNull(text) ? \"\" : BI.replaceAll(text + \"\", \"&|\\\\$|{|}|\\\"|<|>\", function (v) {\r\n            return SPECIAL_TAGS[v] ? SPECIAL_TAGS[v] : \"&nbsp;\";\r\n        });\r\n    }\r\n\r\n    function htmlDecode (text) {\r\n        return BI.isNull(text) ? \"\" : BI.replaceAll(text + \"\", \"&amp;|&dollar;|&lcub;|&rcub;|&quot;|&lt;|&gt;|&nbsp;\", function (v) {\r\n            switch (v) {\r\n                case \"&amp;\":\r\n                    return \"&\";\r\n                case \"&dollar;\":\r\n                    return \"$\";\r\n                case \"&lcub;\":\r\n                    return \"{\";\r\n                case \"&rcub;\":\r\n                    return \"}\";\r\n                case \"&quot;\":\r\n                    return \"\\\"\";\r\n                case \"&lt;\":\r\n                    return \"<\";\r\n                case \"&gt;\":\r\n                    return \">\";\r\n                case \"&nbsp;\":\r\n                default:\r\n                    return \" \";\r\n            }\r\n        });\r\n    }\r\n\r\n    function convert2HTML (input) {\r\n        var singleTag = [\"img\", \"br\", \"input\", \"hr\", \"meta\", \"link\", \"param\"];\r\n        var propFix = {for: \"htmlFor\", class: \"className\"};\r\n        var prefix = \"\", suffix = \"\", child = \"\";\r\n        var obj = input;\r\n        var nodeType = obj.nodeType;\r\n        var tag = String.prototype.toLowerCase.call(obj.tagName || \"\");\r\n\r\n        switch (nodeType) {\r\n            case 1:\r\n                var attrs = obj.attributes;\r\n                var result = \"\";\r\n                if (attrs) {\r\n                    var attrNames = {};\r\n                    for (var i = 0; i < attrs.length; i++) {\r\n                        attrNames[attrs[i].nodeName] = undefined;\r\n                    }\r\n                    if (obj.tagName === \"input\") {\r\n                        if (obj.type === \"checkbox\" || obj.type === \"radio\") {\r\n                            attrNames.checked = false;\r\n                        } else if (obj.type !== \"file\") {\r\n                            attrNames.value = \"\";\r\n                        }\r\n                    } else if (tag === \"option\") {\r\n                        attrNames.selected = false;\r\n                    } else if (tag === \"textarea\") {\r\n                        attrNames.value = \"\";\r\n                    }\r\n                    BI.each(attrNames, function (name, defaultValue) {\r\n                        var propName = propFix[name] || name;\r\n                        var value = obj.getAttribute ? obj.getAttribute(name) : obj[propName];\r\n                        if (value !== defaultValue) {\r\n                            result = result + \" \" + name + \"=\\\"\" + htmlEncode(obj.getAttribute(name)) + \"\\\"\";\r\n                        }\r\n                    });\r\n                }\r\n                prefix = \"<\" + tag + result + \">\";\r\n                if (!BI.contains(singleTag, tag)) {\r\n                    suffix = \"</\" + tag + \">\";\r\n                }\r\n                break;\r\n            case 3:\r\n                prefix = htmlEncode(obj.nodeValue) || \"\";\r\n                break;\r\n\r\n        }\r\n\r\n        BI.each(obj.childNodes, function (idx, childNode) {\r\n            child += convert2HTML(childNode);\r\n        });\r\n\r\n        return prefix + child + suffix;\r\n    }\r\n\r\n    function dom2JSON (node) {\r\n        var propFix = {for: \"htmlFor\", class: \"className\"};\r\n        var obj = {\r\n            nodeType: node.nodeType\r\n        };\r\n        if (node.tagName) {\r\n            obj.tagName = node.tagName.toLowerCase();\r\n        } else if (node.nodeName) {\r\n            obj.nodeName = node.nodeName;\r\n        }\r\n        if (node.nodeValue) {\r\n            obj.nodeValue = node.nodeValue;\r\n        }\r\n        var attrs = node.attributes;\r\n        if (attrs) {\r\n            var attrNames = {};\r\n            for (var i = 0; i < attrs.length; i++) {\r\n                attrNames[attrs[i].nodeName] = undefined;\r\n            }\r\n            if (obj.tagName === \"input\") {\r\n                if (node.type === \"checkbox\" || node.type === \"radio\") {\r\n                    attrNames.checked = false;\r\n                } else if (node.type !== \"file\") {\r\n                    attrNames.value = \"\";\r\n                }\r\n            } else if (obj.tagName === \"option\") {\r\n                attrNames.selected = false;\r\n            } else if (obj.tagName === \"textarea\") {\r\n                attrNames.value = \"\";\r\n            }\r\n            var arr = [];\r\n            BI.each(attrNames, function (name, defaultValue) {\r\n                var propName = propFix[name] || name;\r\n                var value = node.getAttribute ? node.getAttribute(name) : node[propName];\r\n                if (value !== defaultValue) {\r\n                    arr.push([name, value]);\r\n                }\r\n            });\r\n            if (arr.length) {\r\n                obj.attributes = arr;\r\n            }\r\n        }\r\n        var childNodes = node.childNodes;\r\n        if (obj.tagName !== \"textarea\" && childNodes && childNodes.length) {\r\n            var arr = (obj.childNodes = []);\r\n            for (var i = 0; i < childNodes.length; i++) {\r\n                arr[i] = dom2JSON(childNodes[i]);\r\n            }\r\n        }\r\n        return obj;\r\n    }\r\n\r\n    function JSON2HTML (input) {\r\n        var singleTag = [\"img\", \"br\", \"input\", \"hr\", \"meta\", \"link\", \"param\"];\r\n        var prefix = \"\", suffix = \"\", child = \"\";\r\n        var obj = typeof input === \"string\" ? JSON.parse(input) : input;\r\n        var nodeType = obj.nodeType;\r\n        var tag = obj.tagName;\r\n\r\n        switch (nodeType) {\r\n            case 1:\r\n                prefix = \"<\" + tag + BI.reduce(obj.attributes, function (attr, result) {\r\n                    return result + \" \" + htmlEncode(attr[0]) + \"=\\\"\" + htmlEncode(attr[1]) + \"\\\"\";\r\n                }, \"\") + \">\";\r\n                if (!BI.contains(singleTag, tag)) {\r\n                    suffix = \"</\" + tag + \">\";\r\n                }\r\n                break;\r\n            case 3:\r\n                prefix = htmlEncode(obj.nodeValue) || \"\";\r\n                break;\r\n\r\n        }\r\n\r\n        BI.each(obj.childNodes, function (idx, childNode) {\r\n            child += JSON2HTML(childNode);\r\n        });\r\n\r\n        return prefix + child + suffix;\r\n    }\r\n\r\n    var formatType = {\r\n        NORMAL: \"normal\",\r\n        ESCAPE: \"escape\",\r\n        JSON: \"json\"\r\n    };\r\n    BI.NicEditor = BI.inherit(BI.Widget, {\r\n        _defaultConfig: function () {\r\n            return BI.extend(\r\n                BI.NicEditor.superclass._defaultConfig.apply(this, arguments),\r\n                {\r\n                    baseCls: \"bi-nic-editor\",\r\n                    $testId: \"bi-nic-editor\",\r\n                    scrollable: true\r\n                }\r\n            );\r\n        },\r\n        _init: function () {\r\n            BI.NicEditor.superclass._init.apply(this, arguments);\r\n            var o = this.options;\r\n            BI.$(document).bind(\r\n                \"mousedown.\" + this.getName(),\r\n                BI.bind(this.selectCheck, this)\r\n            );\r\n            var scrollOpt = o.scrollable ? {} : {\r\n                scrollable: false,\r\n                scrolly: false\r\n            };\r\n            BI.createWidget(BI.extend(scrollOpt, {\r\n                type: \"bi.vertical\",\r\n                element: this,\r\n                items: [(this.instance = this.addInstance())]\r\n            }));\r\n        },\r\n\r\n        addInstance: function () {\r\n            var o = this.options;\r\n            var conf = {\r\n                type: \"bi.nic_editor_instance\",\r\n                ne: this,\r\n                height: o.height,\r\n                maxHeight: o.maxHeight ? o.maxHeight : null,\r\n                readOnly: o.readOnly,\r\n                singleLine: o.singleLine\r\n            };\r\n            if (this.element[0].contentEditable || !!window.opera) {\r\n                var newInstance = BI.createWidget(conf);\r\n            } else {\r\n                console.error(\"不支持此浏览器\");\r\n            }\r\n            return newInstance;\r\n        },\r\n\r\n        insertElem: function ($elem) {\r\n            if (this.selectedInstance) {\r\n                this.selectedInstance.insertElem($elem);\r\n            }\r\n        },\r\n\r\n        insertHTML: function (html) {\r\n            if (this.selectedInstance) {\r\n                this.selectedInstance.insertHTML(html);\r\n            }\r\n        },\r\n\r\n        nicCommand: function (cmd, args) {\r\n            if (this.selectedInstance) {\r\n                this.selectedInstance.nicCommand(cmd, args);\r\n            }\r\n        },\r\n\r\n        selectCheck: function (e) {\r\n            var t = e.target;\r\n            do {\r\n                if (\r\n                    // 当前元素或不可见元素不触发 blur\r\n                    t === this.instance.element[0] || !this.instance.element.is(':visible')\r\n                ) {\r\n                    return;\r\n                }\r\n                if (this.instance.checkToolbar(t)) {\r\n                    this.instance.saveRng();\r\n                    return;\r\n                }\r\n            } while ((t = t.parentNode));\r\n            this.instance.saveRng();\r\n            this.fireEvent(\"blur\", t);\r\n            this.lastSelectedInstance =\r\n                this.selectedInstance || this.lastSelectedInstance;\r\n            this.selectedInstance = null;\r\n            // return false;\r\n        },\r\n\r\n        blur: function () {\r\n            this.instance.blur();\r\n            this.instance.nicCommand(\"UnSelect\");\r\n        },\r\n\r\n        focus: function () {\r\n            this.instance.focus();\r\n        },\r\n\r\n        bindToolbar: function (toolbar) {\r\n            this.instance.bindToolbar(toolbar);\r\n        },\r\n\r\n        setValue: function (v) {\r\n            if (BI.isString(v)) {\r\n                this.instance.setContent(v);\r\n            } else {\r\n                this.instance.setJSONValue(v);\r\n            }\r\n        },\r\n\r\n        getValue: function (type) {\r\n            switch (type) {\r\n                case formatType.ESCAPE:\r\n                    return this.instance.getEscapeContent();\r\n                case formatType.JSON:\r\n                    return this.instance.getJSONValue();\r\n                case formatType.NORMAL:\r\n                default:\r\n                    return this.instance.getContent();\r\n            }\r\n        },\r\n\r\n\r\n        getContentHeight: function () {\r\n            return this.instance.getContentHeight();\r\n        },\r\n\r\n        getInstance: function () {\r\n            return this.instance;\r\n        },\r\n\r\n        restoreRng: function () {\r\n            this.selectedInstance = this.instance;\r\n            this.selectedInstance.restoreRng();\r\n        },\r\n\r\n        destroyed: function () {\r\n            clearSelectionRange();\r\n            BI.$(document).unbind(\"mousedown.\" + this.getName());\r\n        }\r\n    });\r\n    BI.NicEditor.EVENT_SELECTED = \"selected\";\r\n    BI.NicEditor.EVENT_BLUR = \"blur\";\r\n    BI.NicEditor.EVENT_FOCUS = \"focus\";\r\n    BI.NicEditor.EVENT_KEYDOWN = \"keydown\";\r\n    BI.NicEditor.EVENT_KEYUP = \"keyup\";\r\n    BI.NicEditor.htmlEncode = htmlEncode;\r\n    BI.NicEditor.htmlDecode = htmlDecode;\r\n    BI.NicEditor.FormatType = formatType;\r\n    BI.shortcut(\"bi.nic_editor\", BI.NicEditor);\r\n\r\n    var prefix = \"niceditor-\";\r\n    // attr白名单阻止复制或者篡改富文本内容\r\n    var attrWhiteList = [\"class\", \"style\", \"color\", \"face\", \"name\", \"width\", \"height\", \"alt\", \"src\", \"align\", \"href\", \"target\"];\r\n\r\n    var sizeMap = {\r\n        1: 12,\r\n        2: 13,\r\n        3: 16,\r\n        4: 18,\r\n        5: 24,\r\n        6: 32,\r\n        7: 48\r\n    };\r\n\r\n    var SUPPORTED_TAGS = [\"div\", \"p\", \"span\", \"font\", \"b\", \"strong\", \"i\", \"u\", \"em\", \"br\"];\r\n\r\n    var SUPPORTED_STYLE = [\"color\", \"font-family\", \"font-size\", \"font-weight\"];\r\n\r\n    var SUPPORTED_ATTR = [\"style\", \"face\", \"color\"];\r\n\r\n    var cleanNode = function(node) {\r\n        if (node.nodeType === 3) {\r\n            return node;\r\n        }\r\n\r\n        if (node.nodeType === 1 && node.tagName.toLowerCase() !== \"img\") {\r\n            node.style.cssText = BI.reduce(node.style.cssText.split(\";\"), function(cssText, result) {\r\n                var key = BI.replaceAll(cssText.split(\":\")[0], \" \", \"\");\r\n                var curr = \"\";\r\n                if (SUPPORTED_STYLE.includes(key)) {\r\n                    curr = key + \":\" + cssText.split(\":\")[1];\r\n                }\r\n                return result + curr + \";\";\r\n            }, \"\");\r\n\r\n            BI.each(Object.values(node.attributes), function (idx, attr) {\r\n                if (attr && !SUPPORTED_ATTR.includes(attr.name)) {\r\n                    node.removeAttribute(attr.name);\r\n                }\r\n            });\r\n        }\r\n\r\n        return node;\r\n    }\r\n\r\n    var formatNode = function(node) {\r\n        if (!node) {\r\n            return node;\r\n        }\r\n\r\n        if (node.nodeType === 3) {\r\n            return node;\r\n        }\r\n\r\n\r\n\r\n        if (node.nodeType === 1) {\r\n            var tagName = node.tagName.toLowerCase();\r\n            if (\r\n                SUPPORTED_TAGS.includes(tagName) ||\r\n                (tagName === \"img\" && node.className.includes(\"rich-editor-param\"))\r\n            ) {\r\n                cleanNode(node);\r\n            } else {\r\n                // 目前不支持的dom节点，全部转化成textNode\r\n                try {\r\n                    var text = node.innerText;\r\n                    if (tagName === 'style' || tagName === 'script' || tagName === 'title') {\r\n                        text = '';\r\n                    }\r\n                    node.parentNode.replaceChild(document.createTextNode(text), node);\r\n                    return node;\r\n                } catch (e) {\r\n                    console.log(e);\r\n                }\r\n            }\r\n        }\r\n\r\n        for (var j = node.childNodes.length - 1; j>= 0; j--) {\r\n            if (node.childNodes[j].nodeType !== 1 && node.childNodes[j].nodeType !== 3) {\r\n                node.removeChild(node.childNodes[j]);\r\n            } else {\r\n                formatNode(node.childNodes[j]);\r\n            }\r\n        }\r\n\r\n        return node;\r\n    }\r\n\r\n    var pasteHandler = {\r\n        replaceHtmlSymbol: function (html) {\r\n            if (html == null) {\r\n                return \"\";\r\n            }\r\n            return html\r\n                .replace(/</gm, \"&lt;\")\r\n                .replace(/>/gm, \"&gt;\")\r\n                .replace(/\"/gm, \"&quot;\")\r\n                .replace(/(\\r\\n|\\r|\\n)/g, \"<br/>\");\r\n        },\r\n\r\n        _cleanBlockAttr: function (content, styleFilterConfig) {\r\n            function cleanNode (node) {\r\n                var jNode = BI.$(node),\r\n                    allAttributes = BI.map(node.attributes, function (\r\n                        idx,\r\n                        attribute\r\n                    ) {\r\n                        return attribute.nodeName;\r\n                    });\r\n                if (jNode[0] && jNode[0].tagName === \"SCRIPT\") {\r\n                    jNode.destroy();\r\n                    return null;\r\n                }\r\n                if (jNode[0] && jNode[0].nodeType === 3) {\r\n                    return jNode[0];\r\n                }\r\n                BI.each(styleFilterConfig, function (style, value) {\r\n                    if (value) {\r\n                        if (style === \"fontSize\" && jNode[0].style && jNode[0].style.fontSize) {\r\n                            var size = jNode[0].style.fontSize;\r\n                            var scale = size.indexOf(\"pt\") > -1 ? 4 / 3 : 1;\r\n                            var range = BI.Constants.getConstant(\"bi.constant.materials.rich_editor.font_size_range\");\r\n                            jNode.css(style, BI.clamp(\r\n                                parseInt(size) * scale,\r\n                                range.MIN, range.MAX,\r\n                            ) + \"px\");\r\n                        } else {\r\n                            jNode.css(style, \"\");\r\n                        }\r\n                    }\r\n                });\r\n                BI.each(allAttributes, function (idx, attribute) {\r\n                    try {\r\n                        if (attribute === \"size\" && jNode[0].tagName === \"FONT\") {\r\n                            jNode.css(\"fontSize\", sizeMap[jNode.attr(\"size\")]);\r\n                        }\r\n                        !BI.contains(attrWhiteList, attribute) &&\r\n                        jNode.removeAttr(attribute);\r\n                    } catch (error) {\r\n                        // 无效的attr，继续运行\r\n                    }\r\n                });\r\n                BI.each(node.children, function (idx, childNode) {\r\n                    cleanNode(childNode);\r\n                });\r\n                return node;\r\n            }\r\n\r\n            return cleanNode(content);\r\n        },\r\n\r\n        _formatAttr: function (node) {\r\n            var isIE = BI.isIE();\r\n\r\n            function formatAttr (node) {\r\n                if (isIE && node.style && node.style.textAlign !== \"\") {\r\n                    node.align = node.style.textAlign;\r\n                    node.style.textAlign = \"\";\r\n                }\r\n\r\n                BI.each(node.children, function (idx, childNode) {\r\n                    formatAttr(childNode);\r\n                });\r\n\r\n                return node;\r\n            }\r\n\r\n            return formatAttr(node);\r\n        },\r\n\r\n        getPasteHtml: function (pasteContent, pasteText) {\r\n            if (!pasteContent && pasteText) {\r\n                pasteContent = BI.$(\"<p>\" + pasteHandler.replaceHtmlSymbol(pasteText) + \"</p>\");\r\n            }\r\n            if (!pasteContent) {\r\n                return \"\";\r\n            }\r\n\r\n            // 放在一个div上，父元素在DocumentFragment上时无法replaceChild\r\n            var parent = document.createElement('div');\r\n            BI.each(pasteContent, function(idx, content) {\r\n                parent.appendChild(content);\r\n            })\r\n            formatNode(parent);\r\n\r\n            // 清除部分样式(可能造成问题的样式)\r\n            return BI.reduce(parent.childNodes, function (node, result) {\r\n                return result += (node.nodeType === 3 ? node.nodeValue : node.outerHTML) || \"\";\r\n            }, \"\");\r\n        },\r\n\r\n        getFormatHtml: function (content) {\r\n            return BI.reduce(content, function (node, result) {\r\n                var cleanNode = pasteHandler._cleanBlockAttr(node, {fontSize: true});\r\n                cleanNode = pasteHandler._formatAttr(cleanNode);\r\n                return result += (cleanNode.nodeType === 3 ? cleanNode.nodeValue : cleanNode.outerHTML) || \"\";\r\n            }, \"\");\r\n        }\r\n    };\r\n\r\n    var nicEditorInstance = BI.inherit(BI.Layout, {\r\n        isSelected: false,\r\n        _init: function () {\r\n            nicEditorInstance.superclass._init.apply(this, arguments);\r\n            var o = this.options;\r\n            var initValue = o.value || \"<br>\";\r\n            initValue = initValue.startWith(\"<p>\")\r\n                ? initValue\r\n                : \"<p>\" + initValue + \"</p>\";\r\n            this.ne = this.options.ne;\r\n            this.elm = BI.createWidget({\r\n                type: \"bi.layout\",\r\n                width: o.width - 8,\r\n                scrollable: false\r\n            });\r\n            this.elm.element\r\n                .css({\r\n                    minHeight: BI.isNumber(o.height)\r\n                        ? o.height - 8 + \"px\"\r\n                        : o.height,\r\n                    outline: \"none\",\r\n                    padding: \"0 10px\",\r\n                    wordBreak: \"break-all\"\r\n                })\r\n                .html(o.readOnly ? BI.Text.formatText(initValue) : initValue);\r\n\r\n            if (o.readOnly) {\r\n                this.elm.element.attr(\"contentEditable\", false);\r\n            }\r\n\r\n            this.element.css(\r\n                \"maxHeight\",\r\n                o.maxHeight ? o.maxHeight + \"px\" : null\r\n            );\r\n\r\n            this.e = BI.createWidget({\r\n                type: \"bi.layout\",\r\n                invisible: true,\r\n                tagName: \"textarea\"\r\n            });\r\n            BI.createWidget({\r\n                type: \"bi.default\",\r\n                element: this,\r\n                scrolly: true,\r\n                items: [this.elm, this.e]\r\n            });\r\n\r\n            this.ne.on(\"blur\", BI.bind(this.blur, this));\r\n\r\n            this.start();\r\n            this.blur();\r\n        },\r\n\r\n        start: function () {\r\n            this.elm.element.attr(\r\n                \"contentEditable\",\r\n                this.options.readOnly !== true\r\n            );\r\n            if (this.getContent() == \"\") {\r\n                // this.setContent(\"<br />\");\r\n            }\r\n            this.instanceDoc = document.defaultView;\r\n            this.elm.element.on(\"mousedown\", BI.bind(this.selected, this));\r\n            this.elm.element.on(\"keydown\", BI.bind(this.keyDown, this));\r\n            this.elm.element.on(\"focus\", BI.bind(this.selected, this));\r\n            this.elm.element.on(\"blur\", BI.bind(this.blur, this));\r\n            this.elm.element.on(\"keyup\", BI.bind(this.selected, this));\r\n            this.elm.element.on(\"paste\", BI.bind(this.paste, this));\r\n            this.ne.fireEvent(\"add\");\r\n        },\r\n\r\n        getSel: function () {\r\n            return window.getSelection\r\n                ? window.getSelection()\r\n                : document.selection;\r\n        },\r\n\r\n        getRng: function () {\r\n            var s = this.getSel();\r\n            if (!s || s.rangeCount === 0) {\r\n                return;\r\n            }\r\n            return s.rangeCount > 0 ? s.getRangeAt(0) : s.createRange();\r\n        },\r\n\r\n        getSavedRng: function () {\r\n            return this.savedRange;\r\n        },\r\n\r\n        selRng: function (rng, s) {\r\n            if (window.getSelection) {\r\n                s.removeAllRanges();\r\n                s.addRange(rng);\r\n            } else {\r\n                rng.select();\r\n            }\r\n        },\r\n\r\n        selElm: function () {\r\n            var r = this.getRng();\r\n            if (!r) {\r\n                return;\r\n            }\r\n            if (r.startContainer) {\r\n                var contain = r.startContainer;\r\n                if (r.cloneContents().childNodes.length == 1) {\r\n                    for (var i = 0; i < contain.childNodes.length; i++) {\r\n                        var rng = contain.childNodes[\r\n                            i\r\n                            ].ownerDocument.createRange();\r\n                        rng.selectNode(contain.childNodes[i]);\r\n                        if (\r\n                            r.compareBoundaryPoints(\r\n                                Range.START_TO_START,\r\n                                rng\r\n                            ) != 1 &&\r\n                            r.compareBoundaryPoints(Range.END_TO_END, rng) != -1\r\n                        ) {\r\n                            return contain.childNodes[i];\r\n                        }\r\n                    }\r\n                }\r\n                return contain;\r\n            }\r\n            return this.getSel().type == \"Control\"\r\n                ? r.item(0)\r\n                : r.parentElement();\r\n        },\r\n\r\n        saveRng: function (force) {\r\n            try {\r\n                var range = this.getRng();\r\n                if (\r\n                    (!this._isChildOf(\r\n                        this.getSelectionContainerElem(range),\r\n                        this.element[0]\r\n                    ) || (this.savedRange && !this.savedRange.collapsed)) && !force\r\n                ) {\r\n                    return;\r\n                }\r\n                this.savedRange = range;\r\n                this.savedSel = this.getSel();\r\n            } catch (e) {\r\n                // 不支持IE8及以下浏览器\r\n            }\r\n        },\r\n\r\n        getSelectionContainerElem: function (range) {\r\n            if (range) {\r\n                var elem = range.commonAncestorContainer;\r\n                return elem.nodeType === 1 ? elem : elem.parentNode;\r\n            }\r\n        },\r\n\r\n        setFocus: function (el) {\r\n            try {\r\n                el.focus();\r\n            } catch (e) {\r\n            }\r\n            if (!window.getSelection) {\r\n                var rng;\r\n                try {\r\n                    el.focus();\r\n                } catch (e) {\r\n                }\r\n                rng = document.selection.createRange();\r\n                rng.moveStart(\"character\", -el.innerText.length);\r\n                var text = rng.text;\r\n                for (var i = 0; i < el.innerText.length; i++) {\r\n                    if (\r\n                        el.innerText.substring(0, i + 1) ==\r\n                        text.substring(text.length - i - 1, text.length)\r\n                    ) {\r\n                        result = i + 1;\r\n                    }\r\n                }\r\n            } else {\r\n                var nodeLenght = getNodeLenght(el);\r\n                var lastNode = BI.$(el)\r\n                    .contents()\r\n                    .last();\r\n                var range = document.createRange();\r\n                if (lastNode.is(\"br\")) {\r\n                    nodeLenght -= 1;\r\n                } else if (!lastNode[0] && el.nodeType !== 3) {\r\n                    nodeLenght = 0;\r\n                }\r\n                if (BI.$(el).is(\"img\")) {\r\n                    range.setEndAfter(el, nodeLenght);\r\n                } else {\r\n                    range.setEnd(el, nodeLenght);\r\n                }\r\n                range.collapse(false);\r\n                var sel = window.getSelection();\r\n                sel.removeAllRanges();\r\n                sel.addRange(range);\r\n            }\r\n\r\n            function getNodeLenght (el) {\r\n                var node = BI.$(el)[0];\r\n                if (!node) {\r\n                    return 0;\r\n                }\r\n                switch (node.nodeType) {\r\n                    case 7:\r\n                    case 10:\r\n                        return 0;\r\n                    case 3:\r\n                    case 8:\r\n                        return node.length;\r\n                    default:\r\n                        return node.childNodes.length;\r\n                }\r\n            }\r\n        },\r\n\r\n        removeRng: function () {\r\n            this.savedRange = null;\r\n        },\r\n\r\n        restoreRng: function () {\r\n            if (this.savedRange) {\r\n                this.selRng(this.savedRange, this.savedSel);\r\n            }\r\n            this.savedRange = null;\r\n        },\r\n\r\n        restoreRngAndClearRange: function () {\r\n            if (this.savedRange) {\r\n                this.savedRange.setStart(\r\n                    this.savedRange.endContainer,\r\n                    this.savedRange.endOffset\r\n                );\r\n                this.selRng(this.savedRange, this.savedSel);\r\n            }\r\n        },\r\n\r\n        keyDown: function (e, t) {\r\n            if (e.keyCode === 8) {\r\n                var html = this.elm.element\r\n                    .html()\r\n                    .toLowerCase()\r\n                    .trim();\r\n                if (html === \"<p><br></p>\" || html === \"<p></p>\") {\r\n                    e.preventDefault();\r\n                    return;\r\n                }\r\n            }\r\n            if (e.keyCode === 13 && this.options.singleLine) {\r\n                e.preventDefault();\r\n                return;\r\n            }\r\n            this.ne.fireEvent(\"keydown\", e);\r\n        },\r\n\r\n        selected: function (e) {\r\n            // BI-84171 在mousedown事件时删除已保存的选区，防止有新选区后恢复到上次的选区\r\n            // 选区域A，点击外部，再选区域B进行设置时恢复到了A\r\n            if (e.type === \"mousedown\") {\r\n                this.removeRng();\r\n            }\r\n            var t = e.target;\r\n            if (!t && !(t = this.selElm())) {\r\n                t = this.selElm();\r\n            }\r\n            if (!e.ctrlKey) {\r\n                var selInstance = this.ne.selectedInstance;\r\n                if (selInstance != this) {\r\n                    if (selInstance) {\r\n                        this.ne.fireEvent(\"blur\", e);\r\n                    }\r\n                    this.ne.selectedInstance = this;\r\n                    this.ne.fireEvent(\"focus\", e);\r\n                }\r\n                this.ne.fireEvent(\"selected\", e);\r\n                this.isFocused = true;\r\n                this.elm.element.addClass(prefix + \"selected\");\r\n            }\r\n            this.ne.fireEvent(\"keyup\", e);\r\n\r\n            if (e.keyCode !== 8) {\r\n                return;\r\n            }\r\n            var newLine;\r\n            var html = this.elm.element\r\n                .html()\r\n                .toLowerCase()\r\n                .trim();\r\n            if (!html || html === \"<br>\") {\r\n                newLine = BI.$(this._getNewLine());\r\n                this.elm.element.html(\"\");\r\n                this.elm.element.append(newLine);\r\n                this.setFocus(newLine[0]);\r\n            }\r\n            // return false;\r\n        },\r\n\r\n        focus: function () {\r\n            var self = this;\r\n            try {\r\n                this.removeRng();\r\n                this.setFocus(this.elm.element[0]);\r\n                this.nicCommand(\"selectAll\");\r\n            } catch (e) {\r\n                setTimeout(function () {\r\n                    self.focus();\r\n                });\r\n            }\r\n        },\r\n\r\n        blur: function () {\r\n            this.isFocused = false;\r\n            this.elm.element.removeClass(prefix + \"selected\");\r\n        },\r\n\r\n        paste: function (e) {\r\n            var pasteHtml = \"\",\r\n                pasteText = \"\";\r\n            if (e.originalEvent.clipboardData && !BI.isIE()) {\r\n                pasteHtml = e.originalEvent.clipboardData.getData(\"text/html\");\r\n                pasteText = e.originalEvent.clipboardData.getData(\"text/plain\");\r\n            }\r\n\r\n            if (pasteHtml) {\r\n                try {\r\n                    this.saveRng();\r\n                    this.insertHTML(pasteHandler.getPasteHtml(BI.$(pasteHtml), pasteText));\r\n                    e.preventDefault();\r\n                } catch (e) {\r\n                    this._pasteByBin();\r\n                }\r\n            } else if (BI.isEmpty(pasteText)) {\r\n                this._pasteByBin();\r\n            }\r\n\r\n        },\r\n\r\n        // 为了兼容IE采取这样的方案，创建一个div用于存放插入的html，之后再格式化html放到真正的editor中\r\n        _pasteByBin: function () {\r\n            var self = this;\r\n            var pasteBin = BI.$(\"<div contenteditable='true' />\")\r\n                .addClass(\"bi-paste-bin\")\r\n                .attr(\"tabIndex\", \"-1\")\r\n                .appendTo(this.element);\r\n            this.savedRange = null;\r\n            this.saveRng(true);\r\n            pasteBin.focus();\r\n\r\n            BI.defer(function () {\r\n                self.restoreRng();\r\n                var pasteContent = BI.$(\"<div />\").append(pasteBin.contents());\r\n                var pasteText = pasteBin[0].innerText;\r\n                var pasteHtml = pasteHandler.getPasteHtml(\r\n                    pasteContent,\r\n                    pasteText\r\n                );\r\n\r\n                // firefox插入没<ul>的<li>使用pasteText兼容\r\n                try {\r\n                    self.insertHTML(pasteHtml);\r\n                } catch (ex) {\r\n                    self.insertHTML(\"<p>\" + pasteText + \"</p>\");\r\n                }\r\n                pasteBin.remove();\r\n            });\r\n        },\r\n\r\n        saveContent: function () {\r\n            this.ne.fireEvent(\"save\");\r\n            this.e.element.value(this.getContent());\r\n        },\r\n\r\n        getElm: function () {\r\n            return this.elm;\r\n        },\r\n\r\n        getEscapeContent: function () {\r\n            this.ne.fireEvent(\"get\");\r\n            return this.elm.element ? BI.reduce(this.elm.element.contents(), function (el, html) {\r\n                return html + convert2HTML(el);\r\n            }, \"\") : \"\";\r\n        },\r\n\r\n        getContent: function () {\r\n            this.content = this.getElm().element.html();\r\n            this.ne.fireEvent(\"get\");\r\n            return this.content;\r\n        },\r\n\r\n        getParseContent: function () {\r\n\r\n        },\r\n\r\n        getContentHeight: function () {\r\n            return this.elm.element.height();\r\n        },\r\n\r\n        getJSONValue: function () {\r\n            this.getContent();\r\n\r\n            return {\r\n                tagName: \"root\",\r\n                childNodes: BI.map(this.getElm().element.contents(), function (el, html) {\r\n                    return dom2JSON(html);\r\n                })\r\n            };\r\n        },\r\n\r\n        setJSONValue: function (v) {\r\n            v = v || {};\r\n\r\n            var nodes;\r\n            var content = \"\";\r\n            if (v.tagName === \"root\") {\r\n                nodes = v.childNodes;\r\n            } else {\r\n                nodes = BI.isArray(v) ? v : [v];\r\n            }\r\n\r\n            BI.each(nodes, function (idx, node) {\r\n                content += JSON2HTML(node);\r\n            });\r\n\r\n            this.setContent(content);\r\n        },\r\n\r\n        setContent: function (v) {\r\n            // 格式化成 <p>---</p> 形式\r\n            v = v || (isIE11Below() ? \"\" : \"<br>\");\r\n            v = v.startWith(\"<p\") ? v : \"<p>\" + v;\r\n            v = v.endWith(\"</p>\") ? v : v + \"</p>\";\r\n            this.content = pasteHandler.getFormatHtml(BI.$(v));\r\n            this.ne.fireEvent(\"set\");\r\n            this.elm.element.html(this.content);\r\n        },\r\n\r\n        insertElem: function ($elem) {\r\n            var range = this.getRng();\r\n\r\n            if (range.insertNode) {\r\n                range.deleteContents();\r\n                range.insertNode($elem);\r\n            }\r\n        },\r\n\r\n        insertHTML: function (html, force) {\r\n            this.restoreRng();\r\n            var selection = this.getSel();\r\n            var range = this.savedRange || this.getRng();\r\n            if (!range) {\r\n                return;\r\n            }\r\n            // CHART-9028 原生接口插入图片是会出现一些问题,所以添加一个参数强制使用兼容方法插入img\r\n            if (force) {\r\n                return insert(html);\r\n            }\r\n            try {\r\n                // w3c\r\n                if (document.queryCommandSupported(\"insertHTML\")) {\r\n                    this.nicCommand(\"insertHTML\", html);\r\n                } else {\r\n                    throw new Error(\"Does not support this command\");\r\n                }\r\n            } catch (e) {\r\n                insert(html);\r\n            }\r\n\r\n            function insert (html) {\r\n                if (range.insertNode) {\r\n                    // IE\r\n                    var nodes = BI.$(html);\r\n                    range.deleteContents();\r\n                    // CHART-9564 如果是插入的是br标签，需要把range的选中元素变成其父亲\r\n                    if (range.startContainer\r\n                        && range.endContainer\r\n                        && range.endContainer === range.startContainer\r\n                        && range.startContainer.tagName === \"BR\") {\r\n                        try {\r\n                            range.setStart(range.startContainer.parentNode, range.startContainer.parentNode.childNodes.length - 1);\r\n                            range.setEnd(range.endContainer.parentNode, range.endContainer.parentNode.childNodes.length);\r\n                        } catch (e) {\r\n                            range.setStart(range.startContainer.parentNode, 0);\r\n                            range.setEnd(range.endContainer.parentNode, 0);\r\n                        }\r\n                    }\r\n                    for (var i = 0; i < nodes.length; i++) {\r\n                        range.insertNode(nodes[i]);\r\n                    }\r\n                    if (range.endContainer) {\r\n                        selection.removeAllRanges();\r\n                        range.setStart(range.endContainer, range.endOffset);\r\n                        range.setEnd(range.endContainer, range.endOffset);\r\n                        selection.addRange(range);\r\n                    }\r\n                } else if (range.pasteHTML) {\r\n                    // IE <= 10\r\n                    range.pasteHTML(html);\r\n                }\r\n            }\r\n        },\r\n\r\n        bindToolbar: function (toolbar) {\r\n            this.toolbar = toolbar;\r\n        },\r\n\r\n        checkToolbar: function (element) {\r\n            return this.toolbar && this.toolbar.element[0] === element;\r\n        },\r\n\r\n        nicCommand: function (cmd, args) {\r\n            document.execCommand(cmd, false, args);\r\n        },\r\n\r\n        initSelection: function (newLine) {\r\n            var newLineHtml = this._getNewLine();\r\n            var el = this.elm.element;\r\n            var children = el.children();\r\n            if (!children.length) {\r\n                // 如果编辑器区域无内容，添加一个空行，重新设置选区\r\n                el.append(newLineHtml);\r\n                this.initSelection();\r\n                return;\r\n            }\r\n\r\n            var last = children.last();\r\n\r\n            if (newLine) {\r\n                // 新增一个空行\r\n                var html = last.html().toLowerCase();\r\n                var nodeName = last.nodeName;\r\n                if ((html !== \"<br>\" && html !== \"<br/>\") || nodeName !== \"P\") {\r\n                    // 最后一个元素不是空行，添加一个空行，重新设置选区\r\n                    el.append(newLineHtml);\r\n                    this.initSelection();\r\n                    return;\r\n                }\r\n            }\r\n\r\n            var lastNode = last[0];\r\n            var focus;\r\n            while (lastNode) {\r\n                focus = lastNode;\r\n                if (lastNode.childNodes) {\r\n                    lastNode = lastNode.childNodes[lastNode.childNodes.length - 1];\r\n                } else {\r\n                    lastNode = null;\r\n                }\r\n            }\r\n\r\n            this.setFocus(focus);\r\n        },\r\n\r\n        _getNewLine: function () {\r\n            return isIE11Below() ? \"<p>&nbsp;</p>\" : \"<p><br></p>\";\r\n        },\r\n\r\n        _isChildOf: function (child, parent) {\r\n            var parentNode;\r\n            if (child && parent) {\r\n                parentNode = child.parentNode;\r\n                while (parentNode) {\r\n                    if (parent === parentNode) {\r\n                        return true;\r\n                    }\r\n                    parentNode = parentNode.parentNode;\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n    });\r\n\r\n    BI.shortcut(\"bi.nic_editor_instance\", nicEditorInstance);\r\n})();\r\n","/**\r\n * 颜色选择trigger\r\n *\r\n * Created by GUY on 2015/11/26.\r\n * @class BI.RichEditorBackgroundChooserTrigger\r\n * @extends BI.Widget\r\n */\r\nBI.RichEditorBackgroundChooserTrigger = BI.inherit(BI.Widget, {\r\n    _defaultConfig: function () {\r\n        var conf = BI.RichEditorBackgroundChooserTrigger.superclass._defaultConfig.apply(this, arguments);\r\n        return BI.extend(conf, {\r\n            width: 20,\r\n            height: 20\r\n        });\r\n    },\r\n\r\n    _init: function () {\r\n        BI.RichEditorBackgroundChooserTrigger.superclass._init.apply(this, arguments);\r\n        this.font = BI.createWidget({\r\n            type: \"bi.icon_button\",\r\n            title: BI.i18nText(\"BI-Basic_Background_Color\"),\r\n            cls: \"text-background-font\"\r\n        });\r\n\r\n        this.underline = BI.createWidget({\r\n            type: \"bi.icon_button\",\r\n            cls: \"text-color-underline-font\"\r\n        });\r\n\r\n        BI.createWidget({\r\n            type: \"bi.absolute_center_adapt\",\r\n            element: this,\r\n            items: [{\r\n                el: this.underline\r\n            }, {\r\n                el: this.font\r\n            }]\r\n        });\r\n    },\r\n\r\n    setValue: function (color) {\r\n        this.underline.element.css(\"color\", color);\r\n    },\r\n\r\n    getValue: function () {\r\n        return this.underline.element.css(\"color\");\r\n    }\r\n});\r\nBI.shortcut(\"bi.rich_editor_background_color_chooser_trigger\", BI.RichEditorBackgroundChooserTrigger);","/**\r\n *\r\n * Created by GUY on 2015/11/26.\r\n * @class BI.RichEditorAlignCenterButton\r\n * @extends BI.RichEditorAction\r\n */\r\nBI.RichEditorAlignCenterButton = BI.inherit(BI.RichEditorAction, {\r\n    _defaultConfig: function () {\r\n        return BI.extend(BI.RichEditorAlignCenterButton.superclass._defaultConfig.apply(this, arguments), {\r\n            width: 20,\r\n            height: 20,\r\n            command: \"justifycenter\"\r\n        });\r\n    },\r\n\r\n    _init: function () {\r\n        BI.RichEditorAlignCenterButton.superclass._init.apply(this, arguments);\r\n        var self = this;\r\n        var o = this.options;\r\n        this.align = BI.createWidget({\r\n            type: \"bi.icon_button\",\r\n            element: this,\r\n            title: BI.i18nText(\"BI-Word_Align_Center\"),\r\n            height: o.height,\r\n            width: o.width,\r\n            cls: \"text-toolbar-button bi-list-item-active text-align-center-font\"\r\n        });\r\n        this.align.on(BI.IconButton.EVENT_CHANGE, function () {\r\n            self.doCommand();\r\n        });\r\n    },\r\n\r\n    checkNodes: function (e) {\r\n        var self = this;\r\n        var elm = e;\r\n        while (elm.nodeType === 3) {\r\n            elm = elm.parentNode;\r\n        }\r\n        while (elm.nodeType === 1 && elm.tagName.toLowerCase() === \"div\") {\r\n            // 兼容ie。div获取textAlign不正确。\r\n            elm = elm.firstChild;\r\n        }\r\n        // 一些特殊情况：div直接包裹文字,此时textAlign属性在div上，可直接获取。\r\n        if (!(elm && elm.nodeType === 1) && !BI.isNotNull(elm.tagName)) {\r\n            elm = elm.parentNode;\r\n        }\r\n        try {\r\n            BI.defer(function() {\r\n                // 火狐下获取到-moz-center\r\n                if (BI.get(getComputedStyle(elm), \"textAlign\") === \"center\" || BI.get(getComputedStyle(elm), \"textAlign\") === \"-moz-center\") {\r\n                    self.activate();\r\n                } else {\r\n                    self.deactivate();\r\n                }\r\n            });\r\n        } catch (error) {\r\n            BI.RichEditorBoldButton.superclass.checkNodes(e);\r\n        }\r\n    },\r\n\r\n    activate: function () {\r\n        this.align.setSelected(true);\r\n    },\r\n\r\n    deactivate: function () {\r\n        this.align.setSelected(false);\r\n    }\r\n});\r\nBI.shortcut(\"bi.rich_editor_align_center_button\", BI.RichEditorAlignCenterButton);","/**\r\n *\r\n * Created by GUY on 2015/11/26.\r\n * @class BI.RichEditorAlignLeftButton\r\n * @extends BI.RichEditorAction\r\n */\r\nBI.RichEditorAlignLeftButton = BI.inherit(BI.RichEditorAction, {\r\n    _defaultConfig: function () {\r\n        return BI.extend(BI.RichEditorAlignLeftButton.superclass._defaultConfig.apply(this, arguments), {\r\n            width: 20,\r\n            height: 20,\r\n            command: \"justifyleft\"\r\n        });\r\n    },\r\n\r\n    _init: function () {\r\n        BI.RichEditorAlignLeftButton.superclass._init.apply(this, arguments);\r\n        var self = this;\r\n        var o = this.options;\r\n        this.align = BI.createWidget({\r\n            type: \"bi.icon_button\",\r\n            element: this,\r\n            title: BI.i18nText(\"BI-Word_Align_Left\"),\r\n            height: o.height,\r\n            width: o.width,\r\n            cls: \"text-toolbar-button bi-list-item-active text-align-left-font\"\r\n        });\r\n        this.align.on(BI.IconButton.EVENT_CHANGE, function () {\r\n            self.doCommand();\r\n        });\r\n    },\r\n\r\n    checkNodes: function (e) {\r\n        var self = this;\r\n        var elm = e;\r\n        while (elm.nodeType === 3) {\r\n            elm = elm.parentNode;\r\n        }\r\n        while (elm.nodeType === 1 && elm.tagName.toLowerCase() === \"div\") {\r\n            // 兼容ie。div获取textAlign不正确。\r\n            elm = elm.firstChild;\r\n        }\r\n        // 一些特殊情况：div直接包裹文字,此时textAlign属性在div上，可直接获取。\r\n        if (!(elm && elm.nodeType === 1) && !BI.isNotNull(elm.tagName)) {\r\n            elm = elm.parentNode;\r\n        }\r\n        try {\r\n            BI.defer(function() {\r\n                if (BI.get(getComputedStyle(elm), \"textAlign\") === \"left\" || BI.get(getComputedStyle(elm), \"textAlign\") === \"start\" || BI.get(getComputedStyle(elm), \"textAlign\") === \"-moz-left\") {\r\n                    self.activate();\r\n                } else {\r\n                    self.deactivate();\r\n                }\r\n            });\r\n        } catch (error) {\r\n            BI.RichEditorBoldButton.superclass.checkNodes(e);\r\n        }\r\n    },\r\n\r\n    activate: function () {\r\n        this.align.setSelected(true);\r\n    },\r\n\r\n    deactivate: function () {\r\n        this.align.setSelected(false);\r\n    }\r\n});\r\nBI.shortcut(\"bi.rich_editor_align_left_button\", BI.RichEditorAlignLeftButton);","/**\r\n *\r\n * Created by GUY on 2015/11/26.\r\n * @class BI.RichEditorAlignRightButton\r\n * @extends BI.RichEditorAction\r\n */\r\nBI.RichEditorAlignRightButton = BI.inherit(BI.RichEditorAction, {\r\n    _defaultConfig: function () {\r\n        return BI.extend(BI.RichEditorAlignRightButton.superclass._defaultConfig.apply(this, arguments), {\r\n            width: 20,\r\n            height: 20,\r\n            command: \"justifyright\"\r\n        });\r\n    },\r\n\r\n    _init: function () {\r\n        BI.RichEditorAlignRightButton.superclass._init.apply(this, arguments);\r\n        var self = this;\r\n        var o = this.options;\r\n        this.align = BI.createWidget({\r\n            type: \"bi.icon_button\",\r\n            element: this,\r\n            title: BI.i18nText(\"BI-Word_Align_Right\"),\r\n            height: o.height,\r\n            width: o.width,\r\n            cls: \"text-toolbar-button bi-list-item-active text-align-right-font\",\r\n        });\r\n        this.align.on(BI.IconButton.EVENT_CHANGE, function () {\r\n            self.doCommand();\r\n        });\r\n    },\r\n\r\n    checkNodes: function (e) {\r\n        var self = this;\r\n        var elm = e;\r\n        while (elm.nodeType === 3) {\r\n            elm = elm.parentNode;\r\n        }\r\n        while (elm.nodeType === 1 && elm.tagName.toLowerCase() === \"div\") {\r\n            // 兼容ie。div获取textAlign不正确。\r\n            elm = elm.firstChild;\r\n        }\r\n        // 一些特殊情况：div直接包裹文字,此时textAlign属性在div上，可直接获取。\r\n        if (!(elm && elm.nodeType === 1) && !BI.isNotNull(elm.tagName)) {\r\n            elm = elm.parentNode;\r\n        }\r\n        try {\r\n            BI.defer(function() {\r\n                if (BI.get(getComputedStyle(elm), \"textAlign\") === \"right\" || BI.get(getComputedStyle(elm), \"textAlign\") === \"-moz-right\") {\r\n                    self.activate();\r\n                } else {\r\n                    self.deactivate();\r\n                }\r\n            });\r\n        } catch (error) {\r\n            BI.RichEditorBoldButton.superclass.checkNodes(e);\r\n        }\r\n    },\r\n\r\n    activate: function () {\r\n        this.align.setSelected(true);\r\n    },\r\n\r\n    deactivate: function () {\r\n        this.align.setSelected(false);\r\n    },\r\n});\r\nBI.shortcut(\"bi.rich_editor_align_right_button\", BI.RichEditorAlignRightButton);","/**\r\n *\r\n * Created by GUY on 2015/11/26.\r\n * @class BI.RichEditorBoldButton\r\n * @extends BI.RichEditorAction\r\n */\r\nBI.RichEditorBoldButton = BI.inherit(BI.RichEditorAction, {\r\n    _defaultConfig: function () {\r\n        return BI.extend(BI.RichEditorBoldButton.superclass._defaultConfig.apply(this, arguments), {\r\n            width: 20,\r\n            height: 20,\r\n            command: \"Bold\",\r\n            tags: [\"B\", \"STRONG\"],\r\n            css: {}\r\n        });\r\n    },\r\n\r\n    _init: function () {\r\n        BI.RichEditorBoldButton.superclass._init.apply(this, arguments);\r\n        var self = this, o = this.options;\r\n        this.bold = BI.createWidget({\r\n            type: \"bi.icon_button\",\r\n            element: this,\r\n            title: BI.i18nText(\"BI-Basic_Bold\"),\r\n            height: o.height,\r\n            width: o.width,\r\n            cls: \"text-toolbar-button bi-list-item-active text-bold-font\"\r\n        });\r\n        this.bold.on(BI.IconButton.EVENT_CHANGE, function () {\r\n            self.doCommand();\r\n        });\r\n    },\r\n\r\n    checkNodes: function (e) {\r\n        var self = this;\r\n        try {\r\n            BI.defer(function() {\r\n                if(document.queryCommandState(\"bold\") ) {\r\n                    self.activate();\r\n                } else {\r\n                    self.deactivate();\r\n                }\r\n            });\r\n        } catch (error) {\r\n            BI.RichEditorBoldButton.superclass.checkNodes(e);\r\n        }\r\n    },\r\n\r\n    activate: function () {\r\n        this.bold.setSelected(true);\r\n    },\r\n\r\n    deactivate: function () {\r\n        this.bold.setSelected(false);\r\n    }\r\n});\r\nBI.shortcut(\"bi.rich_editor_bold_button\", BI.RichEditorBoldButton);","/**\r\n *\r\n * Created by GUY on 2015/11/26.\r\n * @class BI.RichEditorItalicButton\r\n * @extends BI.RichEditorAction\r\n */\r\nBI.RichEditorItalicButton = BI.inherit(BI.RichEditorAction, {\r\n    _defaultConfig: function () {\r\n        return BI.extend(BI.RichEditorItalicButton.superclass._defaultConfig.apply(this, arguments), {\r\n            width: 20,\r\n            height: 20,\r\n            command: \"Italic\",\r\n            tags: [\"EM\", \"I\"],\r\n            css: {fontStyle: \"italic\"}\r\n        });\r\n    },\r\n\r\n    _init: function () {\r\n        BI.RichEditorItalicButton.superclass._init.apply(this, arguments);\r\n        var self = this, o = this.options;\r\n        this.italic = BI.createWidget({\r\n            type: \"bi.icon_button\",\r\n            element: this,\r\n            title: BI.i18nText(\"BI-Basic_Italic\"),\r\n            height: o.height,\r\n            width: o.width,\r\n            cls: \"text-toolbar-button bi-list-item-active text-italic-font\"\r\n        });\r\n        this.italic.on(BI.IconButton.EVENT_CHANGE, function () {\r\n            self.doCommand();\r\n        });\r\n    },\r\n\r\n    checkNodes: function (e) {\r\n        var self = this;\r\n        try {\r\n            BI.defer(function() {\r\n                if(document.queryCommandState(\"italic\") ) {\r\n                    self.activate();\r\n                } else {\r\n                    self.deactivate();\r\n                }\r\n            });\r\n        } catch (error) {\r\n            BI.RichEditorBoldButton.superclass.checkNodes(e);\r\n        }\r\n    },\r\n\r\n    activate: function () {\r\n        this.italic.setSelected(true);\r\n    },\r\n\r\n    deactivate: function () {\r\n        this.italic.setSelected(false);\r\n    }\r\n});\r\nBI.shortcut(\"bi.rich_editor_italic_button\", BI.RichEditorItalicButton);","/**\r\n *\r\n * Created by GUY on 2015/11/26.\r\n * @class BI.RichEditorParamButton\r\n * @extends BI.RichEditorParamAction\r\n */\r\nBI.RichEditorParamButton = BI.inherit(BI.RichEditorParamAction, {\r\n    _defaultConfig: function () {\r\n        return BI.extend(BI.RichEditorParamButton.superclass._defaultConfig.apply(this, arguments), {\r\n            width: 20,\r\n            height: 30\r\n        });\r\n    },\r\n\r\n    _init: function () {\r\n        BI.RichEditorParamButton.superclass._init.apply(this, arguments);\r\n        var self = this, o = this.options;\r\n        this.param = BI.createWidget({\r\n            type: \"bi.button\",\r\n            element: this,\r\n            level: \"ignore\",\r\n            minWidth: 0,\r\n            text: BI.i18nText(\"BI-Formula_Insert\"),\r\n            height: o.height,\r\n            width: o.width\r\n        });\r\n        this.param.on(BI.Button.EVENT_CHANGE, function () {\r\n            self.addParam(\"参数\");\r\n        });\r\n    },\r\n    activate: function () {\r\n    },\r\n\r\n    deactivate: function () {\r\n    }\r\n});\r\nBI.shortcut(\"bi.rich_editor_param_button\", BI.RichEditorParamButton);","/**\r\n *\r\n * Created by GUY on 2015/11/26.\r\n * @class BI.RichEditorItalicButton\r\n * @extends BI.RichEditorAction\r\n */\r\nBI.RichEditorUnderlineButton = BI.inherit(BI.RichEditorAction, {\r\n    _defaultConfig: function () {\r\n        return BI.extend(BI.RichEditorUnderlineButton.superclass._defaultConfig.apply(this, arguments), {\r\n            width: 20,\r\n            height: 20,\r\n            command: \"Underline\",\r\n            tags: [\"U\"],\r\n            css: {}\r\n        });\r\n    },\r\n\r\n    _init: function () {\r\n        BI.RichEditorUnderlineButton.superclass._init.apply(this, arguments);\r\n        var self = this, o = this.options;\r\n        this.underline = BI.createWidget({\r\n            type: \"bi.icon_button\",\r\n            element: this,\r\n            title: BI.i18nText(\"BI-Basic_Underline\"),\r\n            height: o.height,\r\n            width: o.width,\r\n            cls: \"text-toolbar-button bi-list-item-active text-underline-font\"\r\n        });\r\n        this.underline.on(BI.IconButton.EVENT_CHANGE, function () {\r\n            self.doCommand();\r\n        });\r\n    },\r\n\r\n    checkNodes: function (e) {\r\n        var self = this;\r\n        try {\r\n            BI.defer(function() {\r\n                if(document.queryCommandState(\"underline\") ) {\r\n                    self.activate();\r\n                } else {\r\n                    self.deactivate();\r\n                }\r\n            });\r\n        } catch (error) {\r\n            BI.RichEditorBoldButton.superclass.checkNodes(e);\r\n        }\r\n    },\r\n\r\n    activate: function () {\r\n        this.underline.setSelected(true);\r\n    },\r\n\r\n    deactivate: function () {\r\n        this.underline.setSelected(false);\r\n    }\r\n});\r\nBI.shortcut(\"bi.rich_editor_underline_button\", BI.RichEditorUnderlineButton);","/**\r\n * 颜色选择trigger\r\n *\r\n * Created by GUY on 2015/11/26.\r\n * @class BI.RichEditorColorChooserTrigger\r\n * @extends BI.Widget\r\n */\r\nBI.RichEditorColorChooserTrigger = BI.inherit(BI.Widget, {\r\n    _defaultConfig: function () {\r\n        var conf = BI.RichEditorColorChooserTrigger.superclass._defaultConfig.apply(this, arguments);\r\n        return BI.extend(conf, {\r\n            width: 20,\r\n            height: 20\r\n        });\r\n    },\r\n\r\n    _init: function () {\r\n        BI.RichEditorColorChooserTrigger.superclass._init.apply(this, arguments);\r\n        this.font = BI.createWidget({\r\n            type: \"bi.icon_button\",\r\n            title: BI.i18nText(\"BI-Basic_Font_Color\"),\r\n            cls: \"text-color-font\",\r\n            warningTitle: this.options.warningTitle,\r\n        });\r\n\r\n        this.underline = BI.createWidget({\r\n            type: \"bi.icon_button\",\r\n            cls: \"text-color-underline-font\"\r\n        });\r\n\r\n        BI.createWidget({\r\n            type: \"bi.absolute_center_adapt\",\r\n            element: this,\r\n            items: [{\r\n                el: this.underline\r\n            }, {\r\n                el: this.font\r\n            }]\r\n        });\r\n\r\n        if (BI.isNotNull(this.options.value)) {\r\n            this.setValue(this.options.value);\r\n        }\r\n    },\r\n\r\n    setValue: function (color) {\r\n        this.underline.element.css(\"color\", color);\r\n    },\r\n\r\n    getValue: function () {\r\n        return this.underline.element.css(\"color\");\r\n    }\r\n});\r\nBI.shortcut(\"bi.rich_editor_color_chooser_trigger\", BI.RichEditorColorChooserTrigger);\r\n","/**\r\n * 颜色选择\r\n *\r\n * Created by GUY on 2015/11/26.\r\n * @class BI.RichEditorBackgroundColorChooser\r\n * @extends BI.RichEditorAction\r\n */\r\nBI.RichEditorBackgroundColorChooser = BI.inherit(BI.RichEditorAction, {\r\n    _defaultConfig: function () {\r\n        return BI.extend(BI.RichEditorBackgroundColorChooser.superclass._defaultConfig.apply(this, arguments), {\r\n            width: 20,\r\n            height: 20\r\n        });\r\n    },\r\n\r\n    _init: function () {\r\n        BI.RichEditorBackgroundColorChooser.superclass._init.apply(this, arguments);\r\n        var self = this, o = this.options;\r\n        this.colorchooser = BI.createWidget({\r\n            type: \"bi.color_chooser\",\r\n            container: null,\r\n            element: this,\r\n            width: o.width,\r\n            height: o.height,\r\n            destroyWhenHide: o.destroyWhenHide,\r\n            recommendColorsGetter: o.recommendColorsGetter,\r\n            el: {\r\n                type: \"bi.rich_editor_background_color_chooser_trigger\",\r\n                title: BI.i18nText(\"BI-Widget_Background_Colour\"),\r\n                cls: \"text-toolbar-button\"\r\n            }\r\n        });\r\n        this.colorchooser.on(BI.ColorChooser.EVENT_CHANGE, function () {\r\n            var backgroundColor = this.getValue();\r\n            self.fireEvent(\"EVENT_CHANGE\", backgroundColor);\r\n        });\r\n        this.colorchooser.on(BI.ColorChooser.EVENT_AFTER_POPUPVIEW, function () {\r\n            self.fireEvent(\"EVENT_AFTER_POPUPVIEW\");\r\n        });\r\n    },\r\n\r\n    setValue: function (color) {\r\n        this.colorchooser.setValue(color);\r\n    },\r\n\r\n    hideIf: function (e) {\r\n        if(!this.colorchooser.element.find(e.target).length > 0) {\r\n            this.colorchooser.hideView();\r\n        }\r\n    },\r\n\r\n    deactivate: function () {\r\n    }\r\n});\r\nBI.RichEditorBackgroundColorChooser.EVENT_CHANGE = \"EVENT_CHANGE\";\r\nBI.RichEditorBackgroundColorChooser.EVENT_AFTER_POPUPVIEW = \"EVENT_AFTER_POPUPVIEW\";\r\nBI.shortcut(\"bi.rich_editor_background_color_chooser\", BI.RichEditorBackgroundColorChooser);","/**\r\n * 颜色选择\r\n *\r\n * Created by GUY on 2015/11/26.\r\n * @class BI.RichEditorColorChooser\r\n * @extends BI.RichEditorAction\r\n */\r\nBI.RichEditorColorChooser = BI.inherit(BI.RichEditorAction, {\r\n    _defaultConfig: function () {\r\n        return BI.extend(BI.RichEditorColorChooser.superclass._defaultConfig.apply(this, arguments), {\r\n            width: 20,\r\n            height: 20,\r\n            command: \"foreColor\",\r\n            css: {color: null}\r\n        });\r\n    },\r\n\r\n    _init: function () {\r\n        BI.RichEditorColorChooser.superclass._init.apply(this, arguments);\r\n        var self = this, o = this.options;\r\n        this.colorchooser = BI.createWidget({\r\n            type: \"bi.color_chooser\",\r\n            container: null,\r\n            element: this,\r\n            width: o.width,\r\n            height: o.height,\r\n            destroyWhenHide: o.destroyWhenHide,\r\n            recommendColorsGetter: o.recommendColorsGetter,\r\n            el: {\r\n                type: \"bi.rich_editor_color_chooser_trigger\",\r\n                title: BI.i18nText(\"BI-Font_Colour\"),\r\n                cls: \"text-toolbar-button\",\r\n                disabled: o.disabled,\r\n                warningTitle: o.warningTitle,\r\n            }\r\n        });\r\n        this.colorchooser.on(BI.ColorChooser.EVENT_CHANGE, function () {\r\n            var value = this.getValue();\r\n            // 用span代替font\r\n            if(BI.isIE()) {\r\n                self.doCommand(value);\r\n            } else {\r\n                document.execCommand('styleWithCSS', null, true);\r\n                self.doCommand(value || \"inherit\");\r\n                document.execCommand('styleWithCSS', null, false);\r\n            }\r\n        });\r\n\r\n    },\r\n\r\n    hideIf: function (e) {\r\n        if (!this.colorchooser.element.find(e.target).length > 0) {\r\n            this.colorchooser.hideView();\r\n        }\r\n    },\r\n\r\n    activate: function (rgb) {\r\n        var self = this;\r\n\r\n        // 等下EVENT_CHANGE\r\n        BI.delay(function () {\r\n            var color = BI.DOM.rgb2hex(rgb);\r\n            var rgba = BI.DOM.isRGBColor(rgb) ? BI.DOM.rgba2json(rgb) : {};\r\n            if (rgba.a === 0){\r\n                color = \"transparent\";\r\n            }\r\n            self.colorchooser.setValue(color);\r\n        }, 0);\r\n    },\r\n\r\n    deactivate: function () {\r\n        this.colorchooser.setValue(\"\");\r\n    }\r\n});\r\nBI.shortcut(\"bi.rich_editor_color_chooser\", BI.RichEditorColorChooser);\r\n","BI.RichEditorFontChooser = BI.inherit(BI.RichEditorAction, {\r\n    _defaultConfig: function () {\r\n        return BI.extend(\r\n            BI.RichEditorFontChooser.superclass._defaultConfig.apply(\r\n                this,\r\n                arguments\r\n            ), {\r\n                baseCls: \"bi-rich-editor-font-chooser bi-card\",\r\n                command: \"FontName\",\r\n                width: 100,\r\n                height: 24,\r\n                css: {\r\n                    fontFamily: null\r\n                },\r\n                $testId: \"bi-rich-editor-font-chooser\",\r\n                simple: false\r\n            }\r\n        );\r\n    },\r\n\r\n    _init: function () {\r\n        BI.RichEditorSizeChooser.superclass._init.apply(this, arguments);\r\n        var self = this,\r\n            o = this.options;\r\n        this.trigger = BI.createWidget({\r\n            type: \"bi.text_trigger\",\r\n            height: o.height,\r\n            triggerWidth: 16,\r\n            text: BI.i18nText(\"BI-Basic_Default\")\r\n        });\r\n\r\n        this.combo = BI.createWidget({\r\n            type: \"bi.combo\",\r\n            cls: o.simple ? 'bi-border-bottom' : 'bi-border',\r\n            container: null,\r\n            element: this,\r\n            el: this.trigger,\r\n            adjustLength: 1,\r\n            popup: {\r\n                minWidth: 70,\r\n                el: {\r\n                    type: \"bi.button_group\",\r\n                    items: BI.createItems(\r\n                        self._formatArray(\r\n                            BI.isNotEmptyArray(o.fontList)\r\n                                ? o.fontList\r\n                                : BI.Constants.getConstant('bi.constant.materials.rich_editor.font_family')\r\n                        ),\r\n                        {\r\n                            type: \"bi.single_select_item\",\r\n                        }\r\n                    ),\r\n                    layouts: [{\r\n                        type: \"bi.vertical\"\r\n                    }]\r\n                }\r\n            }\r\n        });\r\n        this.combo.on(BI.Combo.EVENT_CHANGE, function () {\r\n            var val = this.getValue()[0];\r\n            self.activate(val);\r\n            self.doCommand(val);\r\n            this.hideView();\r\n            this.setValue([]);\r\n        });\r\n    },\r\n\r\n    _formatArray: function (arr) {\r\n        return BI.map(arr, function (i, item) {\r\n            return {\r\n                text: item.text,\r\n                value: BI.isString(item.value) ? item.value.replaceAll(\"\\\"\",\"\") : \"\"\r\n            };\r\n        });\r\n    },\r\n\r\n    hideIf: function (e) {\r\n        if (!this.combo.element.find(e.target).length > 0) {\r\n            this.combo.hideView();\r\n        }\r\n    },\r\n\r\n    activate: function (fontFamily) {\r\n        var o = this.options;\r\n        // CHART-19802 后端导出要用真·中文才能匹配，兼容一下老模板的选中效果\r\n        var map = {\r\n            'STHeiti, Hei, SimHei': 'STHeiti, Hei, SimHei, 黑体',\r\n            'STSong, Song, SimSun': 'STSong, Song, SimSun, 宋体',\r\n            'STFangSong, \"Fang Song\", FangSong': 'STFangSong, \"Fang Song\", FangSong, 仿宋',\r\n            'STKaiti, Kai, KaiTi': 'STKaiti, Kai, KaiTi, 楷体',\r\n        };\r\n        fontFamily = map[fontFamily] || fontFamily;\r\n        var text = BI.i18nText(\"BI-Basic_Default\");\r\n        BI.any(o.fontList || BI.Constants.getConstant(\"bi.constant.materials.rich_editor.font_family\"), function (idx, item) {\r\n            // 判断时由于浏览器不同传入的时有些会带\\\"有些不会带，统一去除判断\r\n            if (fontFamily.replaceAll(\"\\\"\",\"\") === item.value.replaceAll(\"\\\"\",\"\")) {\r\n                text = item.text;\r\n                return true;\r\n            }\r\n        });\r\n        this.fontFamily = fontFamily;\r\n        this.trigger.setText(text);\r\n        this.combo.setValue(fontFamily.replaceAll(\"\\\"\",\"\"));\r\n    },\r\n\r\n    deactivate: function () {\r\n        this.trigger.setText(BI.i18nText(\"BI-Basic_Default\"));\r\n        this.combo.setValue();\r\n    },\r\n\r\n    getValue: function () {\r\n        return this.fontFamily || BI.FontFamily.DEFAULT;\r\n    }\r\n});\r\nBI.shortcut(\"bi.rich_editor_font_chooser\", BI.RichEditorFontChooser);\r\n\r\n// 高版本Mac OS已经没有Song（宋体），而是ST Song（华文宋体），仿宋同\r\nBI.FontFamily = {\r\n    DEFAULT: 'Avenir, Segoe UI, PingFangSC-Regular, \"Microsoft YaHei\"',\r\n    SIM_HEI: \"STHeiti, Hei, SimHei, 黑体\",\r\n    SIM_SUN: \"STSong, Song, SimSun, 宋体\",\r\n    FANG_SONG: 'STFangSong, \"Fang Song\", FangSong, 仿宋',\r\n    KAI_TI: \"STKaiti, Kai, KaiTi, 楷体\",\r\n    YOU_SHE: \"YouShe\",\r\n    PANG_MEM: \"pangMen\",\r\n    ARIAL: \"Arial\",\r\n    HELVETICA_NEUE: '\"Helvetica Neue\"',\r\n    VERDANA: \"Verdana\",\r\n    TIMES_NEW_ROMAN: '\"Times New Roman\"',\r\n    DIGITAL_NUMBERS: '\"Digital Numbers\"',\r\n    POPPINS_BOLD: '\"Poppins Bold\"',\r\n};\r\n","/**\r\n * 字体大小选择\r\n *\r\n * Created by GUY on 2015/11/26.\r\n * @class BI.RichEditorSizeChooser\r\n * @extends BI.RichEditorAction\r\n */\r\nBI.RichEditorSizeChooser = BI.inherit(BI.RichEditorAction, {\r\n    _defaultConfig: function () {\r\n        return BI.extend(\r\n            BI.RichEditorSizeChooser.superclass._defaultConfig.apply(\r\n                this,\r\n                arguments\r\n            ),\r\n            {\r\n                baseCls: \"bi-rich-editor-size-chooser bi-card\",\r\n                command: \"FontSize\",\r\n                width: 50,\r\n                height: 24,\r\n                css: {fontSize: null},\r\n                $testId: \"bi-rich-editor-size-chooser\",\r\n                simple: false,\r\n            }\r\n        );\r\n    },\r\n\r\n    _init: function () {\r\n        BI.RichEditorSizeChooser.superclass._init.apply(this, arguments);\r\n        var self = this,\r\n            o = this.options;\r\n        this.trigger = BI.createWidget({\r\n            type: \"bi.text_trigger\",\r\n            height: o.height,\r\n            triggerWidth: 16,\r\n            text: BI.i18nText(\"BI-Font_Size\"),\r\n            disabled: o.disabled,\r\n            warningTitle: o.warningTitle,\r\n        });\r\n\r\n        this.combo = BI.createWidget({\r\n            type: \"bi.combo\",\r\n            cls: o.simple ? \"bi-border-bottom\" : \"bi-border\",\r\n            container: null,\r\n            element: this,\r\n            el: this.trigger,\r\n            adjustLength: 1,\r\n            popup: {\r\n                maxWidth: 70,\r\n                minWidth: 70,\r\n                el: {\r\n                    type: \"bi.button_group\",\r\n                    items: BI.createItems(BI.Constants.getConstant(\"bi.constant.materials.rich_editor.font_size\"), {\r\n                        type: \"bi.single_select_item\"\r\n                    }),\r\n                    layouts: [\r\n                        {\r\n                            type: \"bi.vertical\"\r\n                        }\r\n                    ]\r\n                }\r\n            }\r\n        });\r\n        this.combo.on(BI.Combo.EVENT_CHANGE, function () {\r\n            var val = this.getValue()[0];\r\n            self.doAction(val);\r\n            this.hideView();\r\n            this.setValue([]);\r\n        });\r\n    },\r\n\r\n    hideIf: function (e) {\r\n        if (!this.combo.element.find(e.target).length > 0) {\r\n            this.combo.hideView();\r\n        }\r\n    },\r\n\r\n    doAction: function (fontSize) {\r\n        function cleanFontSize (node) {\r\n            BI.$(node).css(\"font-size\", \"\");\r\n            BI.each(node.childNodes, function (idx, child) {\r\n                cleanFontSize(child);\r\n            });\r\n        }\r\n        this.activate(fontSize);\r\n        var editor = this.options.editor.instance;\r\n        var range = editor.getSavedRng();\r\n        var commonSize = 7;\r\n        if (range && !range.collapsed) {\r\n            this.doCommand(commonSize);\r\n            BI.each(document.getElementsByTagName(\"font\"), function (idx, el) {\r\n                if (\r\n                    BI.contains(BI.$(el).parents(), editor.element[0]) &&\r\n                    el[\"size\"] == commonSize\r\n                ) {\r\n                    cleanFontSize(el);\r\n                    BI.$(el)\r\n                        .removeAttr(\"size\")\r\n                        .css(\"font-size\", fontSize + \"px\");\r\n                }\r\n            });\r\n        } else {\r\n            editor.restoreRng();\r\n        }\r\n    },\r\n\r\n    activate: function (fontSize) {\r\n        fontSize = (fontSize || 12) + \"\";\r\n        var size = fontSize.replace(\"px\", \"\");\r\n        this.fontSize = size;\r\n        this.trigger.setText(size);\r\n        this.combo.setValue(BI.parseInt(size));\r\n    },\r\n\r\n    deactivate: function () {\r\n        this.trigger.setText(BI.i18nText(\"BI-Font_Size\"));\r\n        this.combo.setValue();\r\n    },\r\n\r\n    getValue: function () {\r\n        return this.fontSize || 12;\r\n    }\r\n});\r\nBI.shortcut(\"bi.rich_editor_size_chooser\", BI.RichEditorSizeChooser);\r\n","/**\r\n * @author windy\r\n * @version 10.0\r\n * Created by windy on 2019/9/10\r\n */\r\n!(function () {\r\n    BI.constant(\"bi.constant.materials.rich_editor.font_family\", [{\r\n        value: BI.FontFamily.DEFAULT,\r\n        text: BI.i18nText(\"BI-Basic_Default\")\r\n    }, {\r\n        value: BI.FontFamily.SIM_HEI,\r\n        text: BI.i18nText(\"BI-Basic_Sim_Hei\")\r\n    }, {\r\n        value: BI.FontFamily.SIM_SUN,\r\n        text: BI.i18nText(\"BI-Basic_Sim_Sun\")\r\n    }, {\r\n        value: BI.FontFamily.FANG_SONG,\r\n        text: BI.i18nText(\"BI-Basic_Fang_Song\")\r\n    }, {\r\n        value: BI.FontFamily.KAI_TI,\r\n        text: BI.i18nText(\"BI-Basic_Kai_Ti\")\r\n    }, {\r\n        value: BI.FontFamily.ARIAL,\r\n        text: \"Arial\"\r\n    }, {\r\n        value: BI.FontFamily.HELVETICA_NEUE,\r\n        text: \"Helvetica Neue\"\r\n    }, {\r\n        value: BI.FontFamily.VERDANA,\r\n        text: \"Verdana\"\r\n    }, {\r\n        value: BI.FontFamily.TIMES_NEW_ROMAN,\r\n        text: \"Times New Roman\"\r\n    }]);\r\n\r\n    BI.constant(\"bi.constant.materials.rich_editor.font_size\", [\r\n        {\r\n            value: 12,\r\n            text: 12\r\n        },\r\n        {\r\n            value: 13,\r\n            text: 13\r\n        },\r\n        {\r\n            value: 14,\r\n            text: 14\r\n        },\r\n        {\r\n            value: 16,\r\n            text: 16\r\n        },\r\n        {\r\n            value: 18,\r\n            text: 18\r\n        },\r\n        {\r\n            value: 20,\r\n            text: 20\r\n        },\r\n        {\r\n            value: 22,\r\n            text: 22\r\n        },\r\n        {\r\n            value: 24,\r\n            text: 24\r\n        },\r\n        {\r\n            value: 26,\r\n            text: 26\r\n        },\r\n        {\r\n            value: 28,\r\n            text: 28\r\n        },\r\n        {\r\n            value: 30,\r\n            text: 30\r\n        },\r\n        {\r\n            value: 32,\r\n            text: 32\r\n        },\r\n        {\r\n            value: 34,\r\n            text: 34\r\n        },\r\n        {\r\n            value: 36,\r\n            text: 36\r\n        },\r\n        {\r\n            value: 38,\r\n            text: 38\r\n        },\r\n        {\r\n            value: 40,\r\n            text: 40\r\n        },\r\n        {\r\n            value: 64,\r\n            text: 64\r\n        },\r\n        {\r\n            value: 128,\r\n            text: 128\r\n        }\r\n    ]);\r\n\r\n    BI.constant(\"bi.constant.materials.rich_editor.font_size_range\", {\r\n        MAX: 128,\r\n        MIN: 12\r\n    });\r\n})();\r\n","/**\r\n * 富文本编辑器\r\n *\r\n * Created by GUY on 2017/9/15.\r\n * @class BI.RichEditor\r\n * @extends BI.Widget\r\n */\r\nBI.RichEditor = BI.inherit(BI.Widget, {\r\n\r\n    props: {\r\n        baseCls: \"bi-rich-editor bi-textarea\" + (BI.isIE() ? \" hack\" : \"\"),\r\n        toolbar: {},\r\n        readOnly: false,\r\n        scrollable: true\r\n    },\r\n\r\n    _defaultConfig: function () {\r\n        return BI.extend(BI.RichEditor.superclass._defaultConfig.apply(this, arguments), {\r\n            adjustLength: 1,\r\n            adjustXOffset: 0,\r\n            adjustYOffset: 0\r\n        });\r\n    },\r\n\r\n    render: function () {\r\n        var self = this, o = this.options;\r\n        var editor = {\r\n            type: \"bi.nic_editor\",\r\n            width: o.width,\r\n            height: o.height,\r\n            readOnly: o.readOnly,\r\n            scrollable: o.scrollable,\r\n            ref: function () {\r\n                self.editor = this;\r\n            },\r\n            listeners: [{\r\n                eventName: BI.NicEditor.EVENT_BLUR,\r\n                action: function () {\r\n                    if (!o.readOnly && self.combo.isViewVisible()) {\r\n                        self.combo.hideView();\r\n                    }\r\n                    self.fireEvent(BI.RichEditor.EVENT_CONFIRM);\r\n                }\r\n            }, {\r\n                eventName: BI.NicEditor.EVENT_FOCUS,\r\n                action: function () {\r\n                    if (!o.readOnly && !self.combo.isViewVisible()) {\r\n                        self.combo.showView();\r\n                    }\r\n                    self.fireEvent(BI.RichEditor.EVENT_FOCUS);\r\n                }\r\n            }]\r\n        };\r\n        if(o.readOnly) {\r\n            return editor;\r\n        }\r\n        this.editor = BI.createWidget(editor);\r\n        return {\r\n            type: \"bi.combo\",\r\n            container: o.container,\r\n            toggle: false,\r\n            trigger: \"click\",\r\n            direction: \"top,right\",\r\n            isNeedAdjustWidth: false,\r\n            isNeedAdjustHeight: false,\r\n            adjustLength: o.adjustLength,\r\n            adjustXOffset: o.adjustXOffset,\r\n            adjustYOffset: o.adjustYOffset,\r\n            ref: function () {\r\n                self.combo = this;\r\n            },\r\n            el: this.editor,\r\n            popup: {\r\n                el: BI.extend({\r\n                    type: \"bi.rich_editor_text_toolbar\",\r\n                    editor: this.editor\r\n                }, o.toolbar, {\r\n                    ref: function (_ref) {\r\n                        self.editor.bindToolbar(_ref);\r\n                        o.toolbar.ref && o.toolbar.ref(_ref);\r\n                    }\r\n                }),\r\n                height: 34,\r\n                stopPropagation: false,\r\n                stopEvent: false\r\n            },\r\n            listeners: [{\r\n                eventName: BI.Combo.EVENT_AFTER_HIDEVIEW,\r\n                action: function () {\r\n                    self.fireEvent(BI.RichEditor.EVENT_AFTER_HIDEVIEW);\r\n                }\r\n            }]\r\n        };\r\n    },\r\n\r\n    mounted: function () {\r\n        var o = this.options;\r\n        if(BI.isNotNull(o.value)) {\r\n            this.editor.setValue(o.value);\r\n        }\r\n    },\r\n\r\n    focus: function () {\r\n        this.editor.focus();\r\n    },\r\n\r\n    setValue: function (v) {\r\n        this.editor.setValue(v);\r\n    },\r\n\r\n    getValue: function (type) {\r\n        return this.editor.getValue(type);\r\n    },\r\n\r\n    setVisible: function (v) {\r\n        if (!v) {\r\n            this.combo.hideView();\r\n        }\r\n        BI.RichEditor.superclass.setVisible.apply(this, arguments);\r\n    },\r\n\r\n    getContentHeight: function () {\r\n        return this.editor.getContentHeight();\r\n    },\r\n\r\n    getEditor: function () {\r\n        return this.editor;\r\n    }\r\n});\r\nBI.RichEditor.EVENT_AFTER_HIDEVIEW = \"EVENT_AFTER_HIDEVIEW\";\r\nBI.RichEditor.EVENT_CONFIRM = \"EVENT_CONFIRM\";\r\nBI.RichEditor.EVENT_FOCUS = \"EVENT_FOCUS\";\r\nBI.shortcut(\"bi.rich_editor\", BI.RichEditor);\r\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\r\n// Distributed under an MIT license: http://codemirror.net/LICENSE\r\n\r\n(function (mod) {\r\n    mod(BI.CodeMirror);\r\n})(function (CodeMirror) {\r\n\r\n    var tables;\r\n    var defaultTable;\r\n    var keywords;\r\n    var identifierQuote;\r\n    var CONS = {\r\n        QUERY_DIV: \";\",\r\n        ALIAS_KEYWORD: \"AS\"\r\n    };\r\n    var Pos = CodeMirror.Pos, cmpPos = CodeMirror.cmpPos;\r\n\r\n    function isArray (val) { return Object.prototype.toString.call(val) == \"[object Array]\"; }\r\n\r\n    function getKeywords (editor) {\r\n        var mode = editor.doc.modeOption;\r\n        if (mode === \"sql\") mode = \"text/x-sql\";\r\n        return CodeMirror.resolveMode(mode).keywords;\r\n    }\r\n\r\n    function getIdentifierQuote (editor) {\r\n        var mode = editor.doc.modeOption;\r\n        if (mode === \"sql\") mode = \"text/x-sql\";\r\n        return CodeMirror.resolveMode(mode).identifierQuote || \"`\";\r\n    }\r\n\r\n    function getText (item) {\r\n        return typeof item === \"string\" ? item : item.text;\r\n    }\r\n\r\n    function wrapTable (name, value) {\r\n        if (isArray(value)) value = {columns: value};\r\n        if (!value.text) value.text = name;\r\n        return value;\r\n    }\r\n\r\n    function parseTables (input) {\r\n        var result = {};\r\n        if (isArray(input)) {\r\n            for (var i = input.length - 1; i >= 0; i--) {\r\n                var item = input[i];\r\n                result[getText(item).toUpperCase()] = wrapTable(getText(item), item);\r\n            }\r\n        } else if (input) {\r\n            for (var name in input) {result[name.toUpperCase()] = wrapTable(name, input[name]);}\r\n        }\r\n        return result;\r\n    }\r\n\r\n    function getTable (name) {\r\n        return tables[name.toUpperCase()];\r\n    }\r\n\r\n    function shallowClone (object) {\r\n        var result = {};\r\n        for (var key in object) {\r\n            if (object.hasOwnProperty(key)) {result[key] = object[key];}\r\n        }\r\n        return result;\r\n    }\r\n\r\n    function match (string, word) {\r\n        if (BI.isNotEmptyString(string)) {\r\n            var len = string.length;\r\n            var sub = getText(word).substr(0, len);\r\n            return string.toUpperCase() === sub.toUpperCase();\r\n        }\r\n    }\r\n\r\n    function addMatches (result, search, wordlist, formatter) {\r\n        if (isArray(wordlist)) {\r\n            for (var i = 0; i < wordlist.length; i++) {if (match(search, wordlist[i])) result.push(formatter(wordlist[i], i));}\r\n        } else {\r\n            for (var word in wordlist) {\r\n                if (wordlist.hasOwnProperty(word)) {\r\n                    var val = wordlist[word];\r\n                    if (!val || val === true) {val = word;} else {val = val.displayText ? {text: val.text, displayText: val.displayText} : val.text;}\r\n                    if (match(search, val)) result.push(formatter(val, -1));\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    function cleanName (name) {\r\n    // Get rid name from identifierQuote and preceding dot(.)\r\n        if (name.charAt(0) == \".\") {\r\n            name = name.substr(1);\r\n        }\r\n        // replace doublicated identifierQuotes with single identifierQuotes\r\n        // and remove single identifierQuotes\r\n        var nameParts = name.split(identifierQuote + identifierQuote);\r\n        for (var i = 0; i < nameParts.length; i++) {nameParts[i] = nameParts[i].replace(new RegExp(identifierQuote, \"g\"), \"\");}\r\n        return nameParts.join(identifierQuote);\r\n    }\r\n\r\n    function insertIdentifierQuotes (name) {\r\n        var nameParts = getText(name).split(\".\");\r\n        for (var i = 0; i < nameParts.length; i++) {\r\n            nameParts[i] = identifierQuote +\r\n        // doublicate identifierQuotes\r\n        nameParts[i].replace(new RegExp(identifierQuote, \"g\"), identifierQuote + identifierQuote) +\r\n        identifierQuote;\r\n        }\r\n        var escaped = nameParts.join(\".\");\r\n        if (typeof name === \"string\") return escaped;\r\n        name = shallowClone(name);\r\n        name.text = escaped;\r\n        return name;\r\n    }\r\n\r\n    function nameCompletion (cur, token, result, editor) {\r\n    // Try to complete table, column names and return start position of completion\r\n        var useIdentifierQuotes = false;\r\n        var nameParts = [];\r\n        var start = token.start;\r\n        var cont = true;\r\n        while (cont) {\r\n            cont = (token.string.charAt(0) == \".\");\r\n            useIdentifierQuotes = useIdentifierQuotes || (token.string.charAt(0) == identifierQuote);\r\n\r\n            start = token.start;\r\n            nameParts.unshift(cleanName(token.string));\r\n\r\n            token = editor.getTokenAt(Pos(cur.line, token.start));\r\n            if (token.string == \".\") {\r\n                cont = true;\r\n                token = editor.getTokenAt(Pos(cur.line, token.start));\r\n            }\r\n        }\r\n\r\n        // Try to complete table names\r\n        var string = nameParts.join(\".\");\r\n        addMatches(result, string, tables, function (w) {\r\n            return useIdentifierQuotes ? insertIdentifierQuotes(w) : w;\r\n        });\r\n\r\n        // Try to complete columns from defaultTable\r\n        addMatches(result, string, defaultTable, function (w) {\r\n            return useIdentifierQuotes ? insertIdentifierQuotes(w) : w;\r\n        });\r\n\r\n        // Try to complete columns\r\n        string = nameParts.pop();\r\n        var table = nameParts.join(\".\");\r\n\r\n        var alias = false;\r\n        var aliasTable = table;\r\n        // Check if table is available. If not, find table by Alias\r\n        if (!getTable(table)) {\r\n            var oldTable = table;\r\n            table = findTableByAlias(table, editor);\r\n            if (table !== oldTable) alias = true;\r\n        }\r\n\r\n        var columns = getTable(table);\r\n        if (columns && columns.columns) {columns = columns.columns;}\r\n\r\n        if (columns) {\r\n            addMatches(result, string, columns, function (w) {\r\n                var tableInsert = table;\r\n                if (alias == true) tableInsert = aliasTable;\r\n                if (typeof w === \"string\") {\r\n                    w = tableInsert + \".\" + w;\r\n                } else {\r\n                    w = shallowClone(w);\r\n                    w.text = tableInsert + \".\" + w.text;\r\n                }\r\n                return useIdentifierQuotes ? insertIdentifierQuotes(w) : w;\r\n            });\r\n        }\r\n\r\n        return start;\r\n    }\r\n\r\n    function eachWord (lineText, f) {\r\n        var words = lineText.split(/\\s+/);\r\n        for (var i = 0; i < words.length; i++) {if (words[i]) f(words[i].replace(/[,;]/g, \"\"));}\r\n    }\r\n\r\n    function findTableByAlias (alias, editor) {\r\n        var doc = editor.doc;\r\n        var fullQuery = doc.getValue();\r\n        var aliasUpperCase = alias.toUpperCase();\r\n        var previousWord = \"\";\r\n        var table = \"\";\r\n        var separator = [];\r\n        var validRange = {\r\n            start: Pos(0, 0),\r\n            end: Pos(editor.lastLine(), editor.getLineHandle(editor.lastLine()).length)\r\n        };\r\n\r\n        // add separator\r\n        var indexOfSeparator = fullQuery.indexOf(CONS.QUERY_DIV);\r\n        while(indexOfSeparator != -1) {\r\n            separator.push(doc.posFromIndex(indexOfSeparator));\r\n            indexOfSeparator = fullQuery.indexOf(CONS.QUERY_DIV, indexOfSeparator + 1);\r\n        }\r\n        separator.unshift(Pos(0, 0));\r\n        separator.push(Pos(editor.lastLine(), editor.getLineHandle(editor.lastLine()).text.length));\r\n\r\n        // find valid range\r\n        var prevItem = null;\r\n        var current = editor.getCursor();\r\n        for (var i = 0; i < separator.length; i++) {\r\n            if ((prevItem == null || cmpPos(current, prevItem) > 0) && cmpPos(current, separator[i]) <= 0) {\r\n                validRange = {start: prevItem, end: separator[i]};\r\n                break;\r\n            }\r\n            prevItem = separator[i];\r\n        }\r\n\r\n        var query = doc.getRange(validRange.start, validRange.end, false);\r\n\r\n        for (var i = 0; i < query.length; i++) {\r\n            var lineText = query[i];\r\n            eachWord(lineText, function (word) {\r\n                var wordUpperCase = word.toUpperCase();\r\n                if (wordUpperCase === aliasUpperCase && getTable(previousWord)) {table = previousWord;}\r\n                if (wordUpperCase !== CONS.ALIAS_KEYWORD) {previousWord = word;}\r\n            });\r\n            if (table) break;\r\n        }\r\n        return table;\r\n    }\r\n\r\n    CodeMirror.registerHelper(\"hint\", \"sql\", function (editor, options) {\r\n        tables = parseTables(options && options.tables);\r\n        var defaultTableName = options && options.defaultTable;\r\n        var disableKeywords = options && options.disableKeywords;\r\n        defaultTable = defaultTableName && getTable(defaultTableName);\r\n        keywords = getKeywords(editor);\r\n        var keywordsCount = BI.size(keywords);\r\n        var functions = [];\r\n        var cur = editor.getCursor();\r\n        var token = editor.getTokenAt(cur);\r\n        if(options.supportFunction){\r\n            BI.each(BI.FormulaCollections, function (idx, formula) {\r\n                if(formula.lastIndexOf(token.string, 0) == 0 && !BI.contains(functions, formula)) {\r\n                    functions.push(formula);\r\n                }\r\n            });\r\n            var keywords = BI.keys(keywords);\r\n            BI.each(functions, function(idx, func) {\r\n                var lowerCase = func.toLowerCase();\r\n                var upperCase = func.toUpperCase();\r\n                if(!BI.contains(keywords, lowerCase) && !BI.contains(keywords, upperCase)) {\r\n                    keywords.push(func)\r\n                }\r\n            });\r\n        }\r\n        identifierQuote = getIdentifierQuote(editor);\r\n\r\n        if (defaultTableName && !defaultTable) {defaultTable = findTableByAlias(defaultTableName, editor);}\r\n\r\n        defaultTable = defaultTable || [];\r\n\r\n        if (defaultTable.columns) {defaultTable = defaultTable.columns;}\r\n\r\n        var result = [];\r\n        var start, end, search;\r\n        if (token.end > cur.ch) {\r\n            token.end = cur.ch;\r\n            token.string = token.string.slice(0, cur.ch - token.start);\r\n        }\r\n\r\n        if (token.string.match(/^[.`\"\\w@]\\w*$/)) {\r\n            search = token.string;\r\n            start = token.start;\r\n            end = token.end;\r\n        } else {\r\n            start = end = cur.ch;\r\n            search = \"\";\r\n        }\r\n        if (search.charAt(0) == \".\" || search.charAt(0) == identifierQuote) {\r\n            start = nameCompletion(cur, token, result, editor);\r\n        } else {\r\n            addMatches(result, search, tables, function (w) {return w;});\r\n            addMatches(result, search, defaultTable, function (w) {return w;});\r\n            if (!disableKeywords) {\r\n                addMatches(result, search, keywords, function (w, i) {\r\n                    var isKeyword = i < keywordsCount;\r\n                    return {\r\n                        type: isKeyword ? BICst.FORMULA_KEYWORD_TYPE.KEYWORD :BICst.FORMULA_KEYWORD_TYPE.FUNCTION,\r\n                        text: w\r\n                    // description: desc[w] || \"SQL关键字\",\r\n                    // className: isKeyword ? \"sql-keyword\" : \"sql-fr-function\",\r\n                    // render: function (Element, self, data) {\r\n                    //   var label = BI.createWidget({\r\n                    //     type: \"bi.label\",\r\n                    //     element: Element,\r\n                    //     text: data.displayText || getText(data)\r\n                    //   });\r\n                    //   label.setTitle(data.description, {\r\n                    //     container: \"body\"\r\n\r\n                    //   });\r\n                    // }\r\n                    };\r\n                });\r\n            }\r\n        }\r\n\r\n        return {list: result, from: Pos(cur.line, start), to: Pos(cur.line, end)};\r\n    });\r\n});\r\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\r\n// Distributed under an MIT license: http://codemirror.net/LICENSE\r\n\r\n(function (mod) {\r\n    mod(BI.CodeMirror);\r\n})(function (CodeMirror) {\r\n    \"use strict\";\r\n\r\n    CodeMirror.defineMode(\"sql\", function (config, parserConfig) {\r\n        \"use strict\";\r\n\r\n        var client         = parserConfig.client || {},\r\n            atoms          = parserConfig.atoms || {\"false\": true, \"true\": true, \"null\": true},\r\n            builtin        = parserConfig.builtin || {},\r\n            keywords       = parserConfig.keywords || {},\r\n            operatorChars  = parserConfig.operatorChars || /^[*+\\-%<>!=&|~^]/,\r\n            support        = parserConfig.support || {},\r\n            hooks          = parserConfig.hooks || {},\r\n            dateSQL        = parserConfig.dateSQL || {date: true, time: true, timestamp: true},\r\n            functions      = parserConfig.functions || {};\r\n\r\n        function tokenBase (stream, state) {\r\n            var ch = stream.next();\r\n\r\n            // call hooks from the mime type\r\n            if (hooks[ch]) {\r\n                var result = hooks[ch](stream, state);\r\n                if (result !== false) return result;\r\n            }\r\n\r\n            if (support.hexNumber &&\r\n      ((ch == \"0\" && stream.match(/^[xX][0-9a-fA-F]+/))\r\n      || (ch == \"x\" || ch == \"X\") && stream.match(/^'[0-9a-fA-F]+'/))) {\r\n                // hex\r\n                // ref: http://dev.mysql.com/doc/refman/5.5/en/hexadecimal-literals.html\r\n                return \"number\";\r\n            } else if (support.binaryNumber &&\r\n      (((ch == \"b\" || ch == \"B\") && stream.match(/^'[01]+'/))\r\n      || (ch == \"0\" && stream.match(/^b[01]+/)))) {\r\n                // bitstring\r\n                // ref: http://dev.mysql.com/doc/refman/5.5/en/bit-field-literals.html\r\n                return \"number\";\r\n            } else if (ch.charCodeAt(0) > 47 && ch.charCodeAt(0) < 58) {\r\n                // numbers\r\n                // ref: http://dev.mysql.com/doc/refman/5.5/en/number-literals.html\r\n                stream.match(/^[0-9]*(\\.[0-9]+)?([eE][-+]?[0-9]+)?/);\r\n                support.decimallessFloat && stream.match(/^\\.(?!\\.)/);\r\n                return \"number\";\r\n            } else if (ch == \"?\" && (stream.eatSpace() || stream.eol() || stream.eat(\";\"))) {\r\n                // placeholders\r\n                return \"variable-3\";\r\n            } else if (ch == \"'\" || (ch == \"\\\"\" && support.doubleQuote)) {\r\n                // strings\r\n                // ref: http://dev.mysql.com/doc/refman/5.5/en/string-literals.html\r\n                state.tokenize = tokenLiteral(ch);\r\n                return state.tokenize(stream, state);\r\n            } else if ((((support.nCharCast && (ch == \"n\" || ch == \"N\"))\r\n        || (support.charsetCast && ch == \"_\" && stream.match(/[a-z][a-z0-9]*/i)))\r\n        && (stream.peek() == \"'\" || stream.peek() == \"\\\"\"))) {\r\n                // charset casting: _utf8'str', N'str', n'str'\r\n                // ref: http://dev.mysql.com/doc/refman/5.5/en/string-literals.html\r\n                return \"keyword\";\r\n            } else if (/^[\\(\\),\\;\\[\\]]/.test(ch)) {\r\n                // no highlighting\r\n                return null;\r\n            } else if (support.commentSlashSlash && ch == \"/\" && stream.eat(\"/\")) {\r\n                // 1-line comment\r\n                stream.skipToEnd();\r\n                return \"comment\";\r\n            } else if ((support.commentHash && ch == \"#\")\r\n        || (ch == \"-\" && stream.eat(\"-\") && (!support.commentSpaceRequired || stream.eat(\" \")))) {\r\n                // 1-line comments\r\n                // ref: https://kb.askmonty.org/en/comment-syntax/\r\n                stream.skipToEnd();\r\n                return \"comment\";\r\n            } else if (ch == \"/\" && stream.eat(\"*\")) {\r\n                // multi-line comments\r\n                // ref: https://kb.askmonty.org/en/comment-syntax/\r\n                state.tokenize = tokenComment(1);\r\n                return state.tokenize(stream, state);\r\n            } else if (ch == \".\") {\r\n                // .1 for 0.1\r\n                if (support.zerolessFloat && stream.match(/^(?:\\d+(?:e[+-]?\\d+)?)/i)) {return \"number\";}\r\n                if (stream.match(/^\\.+/)) {return null;}\r\n                // .table_name (ODBC)\r\n                // // ref: http://dev.mysql.com/doc/refman/5.6/en/identifier-qualifiers.html\r\n                if (support.ODBCdotTable && stream.match(/^[\\w\\d_]+/)) {return \"variable-2\";}\r\n            } else if (operatorChars.test(ch)) {\r\n                // operators\r\n                stream.eatWhile(operatorChars);\r\n                return null;\r\n            } else if (ch == \"{\" &&\r\n        (stream.match(/^( )*(d|D|t|T|ts|TS)( )*'[^']*'( )*}/) || stream.match(/^( )*(d|D|t|T|ts|TS)( )*\"[^\"]*\"( )*}/))) {\r\n                // dates (weird ODBC syntax)\r\n                // ref: http://dev.mysql.com/doc/refman/5.5/en/date-and-time-literals.html\r\n                return \"number\";\r\n            } else {\r\n                stream.eatWhile(/^[_\\w\\d]/);\r\n                var word = stream.current().toLowerCase();\r\n                // dates (standard SQL syntax)\r\n                // ref: http://dev.mysql.com/doc/refman/5.5/en/date-and-time-literals.html\r\n                if (dateSQL.hasOwnProperty(word) && (stream.match(/^( )+'[^']*'/) || stream.match(/^( )+\"[^\"]*\"/))) {return \"number\";}\r\n                if (atoms.hasOwnProperty(word)) return \"atom\";\r\n                if (builtin.hasOwnProperty(word)) return \"builtin\";\r\n                if (functions.hasOwnProperty(word) && stream.peek() === \"(\") return \"function\";\r\n                if (keywords.hasOwnProperty(word)) return \"keyword\";\r\n                if (client.hasOwnProperty(word)) return \"string-2\";\r\n                return null;\r\n            }\r\n        }\r\n\r\n        // 'string', with char specified in quote escaped by '\\'\r\n        function tokenLiteral (quote) {\r\n            return function (stream, state) {\r\n                var escaped = false, ch;\r\n                while ((ch = stream.next()) != null) {\r\n                    if (ch == quote && !escaped) {\r\n                        state.tokenize = tokenBase;\r\n                        break;\r\n                    }\r\n                    escaped = !escaped && ch == \"\\\\\";\r\n                }\r\n                return \"string\";\r\n            };\r\n        }\r\n        function tokenComment (depth) {\r\n            return function (stream, state) {\r\n                var m = stream.match(/^.*?(\\/\\*|\\*\\/)/);\r\n                if (!m) stream.skipToEnd();\r\n                else if (m[1] == \"/*\") state.tokenize = tokenComment(depth + 1);\r\n                else if (depth > 1) state.tokenize = tokenComment(depth - 1);\r\n                else state.tokenize = tokenBase;\r\n                return \"comment\";\r\n            };\r\n        }\r\n\r\n        function pushContext (stream, state, type) {\r\n            state.context = {\r\n                prev: state.context,\r\n                indent: stream.indentation(),\r\n                col: stream.column(),\r\n                type: type\r\n            };\r\n        }\r\n\r\n        function popContext (state) {\r\n            state.indent = state.context.indent;\r\n            state.context = state.context.prev;\r\n        }\r\n\r\n        return {\r\n            startState: function () {\r\n                return {tokenize: tokenBase, context: null};\r\n            },\r\n\r\n            token: function (stream, state) {\r\n                if (stream.sol()) {\r\n                    if (state.context && state.context.align == null) {state.context.align = false;}\r\n                }\r\n                if (state.tokenize == tokenBase && stream.eatSpace()) return null;\r\n\r\n                var style = state.tokenize(stream, state);\r\n                if (style == \"comment\") return style;\r\n\r\n                if (state.context && state.context.align == null) {state.context.align = true;}\r\n\r\n                var tok = stream.current();\r\n                if (tok == \"(\") {pushContext(stream, state, \")\");} else if (tok == \"[\") {pushContext(stream, state, \"]\");} else if (state.context && state.context.type == tok) {popContext(state);}\r\n                return style;\r\n            },\r\n\r\n            indent: function (state, textAfter) {\r\n                var cx = state.context;\r\n                if (!cx) return CodeMirror.Pass;\r\n                var closing = textAfter.charAt(0) == cx.type;\r\n                if (cx.align) return cx.col + (closing ? 0 : 1);\r\n                return cx.indent + (closing ? 0 : config.indentUnit);\r\n            },\r\n\r\n            blockCommentStart: \"/*\",\r\n            blockCommentEnd: \"*/\",\r\n            lineComment: support.commentSlashSlash ? \"//\" : support.commentHash ? \"#\" : \"--\"\r\n        };\r\n    });\r\n\r\n    (function () {\r\n        \"use strict\";\r\n\r\n        // `identifier`\r\n        function hookIdentifier (stream) {\r\n            // MySQL/MariaDB identifiers\r\n            // ref: http://dev.mysql.com/doc/refman/5.6/en/identifier-qualifiers.html\r\n            var ch;\r\n            while ((ch = stream.next()) != null) {\r\n                if (ch == \"`\" && !stream.eat(\"`\")) return \"variable-2\";\r\n            }\r\n            stream.backUp(stream.current().length - 1);\r\n            return stream.eatWhile(/\\w/) ? \"variable-2\" : null;\r\n        }\r\n\r\n        // \"identifier\"\r\n        function hookIdentifierDoublequote (stream) {\r\n            // Standard SQL /SQLite identifiers\r\n            // ref: http://web.archive.org/web/20160813185132/http://savage.net.au/SQL/sql-99.bnf.html#delimited%20identifier\r\n            // ref: http://sqlite.org/lang_keywords.html\r\n            var ch;\r\n            while ((ch = stream.next()) != null) {\r\n                if (ch == \"\\\"\" && !stream.eat(\"\\\"\")) return \"variable-2\";\r\n            }\r\n            stream.backUp(stream.current().length - 1);\r\n            return stream.eatWhile(/\\w/) ? \"variable-2\" : null;\r\n        }\r\n\r\n        // variable token\r\n        function hookVar (stream) {\r\n            // variables\r\n            // @@prefix.varName @varName\r\n            // varName can be quoted with ` or ' or \"\r\n            // ref: http://dev.mysql.com/doc/refman/5.5/en/user-variables.html\r\n            if (stream.eat(\"@\")) {\r\n                stream.match(/^session\\./);\r\n                stream.match(/^local\\./);\r\n                stream.match(/^global\\./);\r\n            }\r\n\r\n            if (stream.eat(\"'\")) {\r\n                stream.match(/^.*'/);\r\n                return \"variable-2\";\r\n            } else if (stream.eat(\"\\\"\")) {\r\n                stream.match(/^.*\"/);\r\n                return \"variable-2\";\r\n            } else if (stream.eat(\"`\")) {\r\n                stream.match(/^.*`/);\r\n                return \"variable-2\";\r\n            } else if (stream.match(/^[0-9a-zA-Z$\\.\\_]+/)) {\r\n                return \"variable-2\";\r\n            }\r\n            return null;\r\n        }\r\n\r\n        // short client keyword token\r\n        function hookClient (stream) {\r\n            // \\N means NULL\r\n            // ref: http://dev.mysql.com/doc/refman/5.5/en/null-values.html\r\n            if (stream.eat(\"N\")) {\r\n                return \"atom\";\r\n            }\r\n            // \\g, etc\r\n            // ref: http://dev.mysql.com/doc/refman/5.5/en/mysql-commands.html\r\n            return stream.match(/^[a-zA-Z.#!?]/) ? \"variable-2\" : null;\r\n        }\r\n\r\n        // these keywords are used by all SQL dialects (however, a mode can still overwrite it)\r\n        var sqlKeywords = \"alter and as asc between by count create delete desc distinct drop from group having in insert into is join like not on or order select set table union update values where limit \";\r\n\r\n        // turn a space-separated list into an array\r\n        function set (str) {\r\n            var obj = {}, words = str.split(\" \");\r\n            for (var i = 0; i < words.length; ++i) obj[words[i]] = true;\r\n            return obj;\r\n        }\r\n\r\n        // A generic SQL Mode. It's not a standard, it just try to support what is generally supported\r\n        CodeMirror.defineMIME(\"text/x-sql\", {\r\n            name: \"sql\",\r\n            keywords: set(sqlKeywords + \"begin\"),\r\n            builtin: set(\"bool boolean bit blob enum long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text bigint int int1 int2 int3 int4 int8 integer float float4 float8 double char varbinary varchar varcharacter precision real date datetime year unsigned signed decimal numeric\"),\r\n            atoms: set(\"false true null unknown\"),\r\n            operatorChars: /^[*+\\-%<>!=]/,\r\n            dateSQL: set(\"date time timestamp\"),\r\n            support: set(\"ODBCdotTable doubleQuote binaryNumber hexNumber\"),\r\n            functions: BI.makeObject(BI.FormulaCollections, true)\r\n        });\r\n    }());\r\n\r\n});\r\n\r\n/*\r\n  How Properties of Mime Types are used by SQL Mode\r\n  =================================================\r\n\r\n  keywords:\r\n    A list of keywords you want to be highlighted.\r\n  builtin:\r\n    A list of builtin types you want to be highlighted (if you want types to be of class \"builtin\" instead of \"keyword\").\r\n  operatorChars:\r\n    All characters that must be handled as operators.\r\n  client:\r\n    Commands parsed and executed by the client (not the server).\r\n  support:\r\n    A list of supported syntaxes which are not common, but are supported by more than 1 DBMS.\r\n    * ODBCdotTable: .tableName\r\n    * zerolessFloat: .1\r\n    * doubleQuote\r\n    * nCharCast: N'string'\r\n    * charsetCast: _utf8'string'\r\n    * commentHash: use # char for comments\r\n    * commentSlashSlash: use // for comments\r\n    * commentSpaceRequired: require a space after -- for comments\r\n  atoms:\r\n    Keywords that must be highlighted as atoms,. Some DBMS's support more atoms than others:\r\n    UNKNOWN, INFINITY, UNDERFLOW, NaN...\r\n  dateSQL:\r\n    Used for date/time SQL standard syntax, because not all DBMS's support same temporal types.\r\n*/\r\n","/**\r\n * Created by Windy on 2017/12/15.\r\n */\r\nBI.SQLEditor = BI.inherit(BI.Widget, {\r\n    props: function () {\r\n        return {\r\n            baseCls: \"bi-sql-editor\",\r\n            value: \"\",\r\n            lineHeight: 2,\r\n            showHint: true,\r\n            supportFunction: false,\r\n            supportParam: false,\r\n            // 参数显示值构造函数\r\n            paramFormatter: function (v) {\r\n                return v;\r\n            },\r\n            watermark: BI.i18nText(\"BI-Please_Enter_SQL\"),\r\n            lineWrapping: true,\r\n            lineNumbers: false,\r\n        };\r\n    },\r\n\r\n    render: function () {\r\n        var o = this.options, self = this;\r\n        var conf = {\r\n            mode: \"text/x-sql\",\r\n            lineWrapping: o.lineWrapping,\r\n            lineNumbers: o.lineNumbers,\r\n            readOnly: o.readOnly,\r\n        };\r\n        o.readOnly && (conf.cursorBlinkRate = -1);\r\n        this.editor = BI.CodeMirror(this.element[0], conf);\r\n        o.lineHeight === 1 ? this.element.addClass(\"codemirror-low-line-height\") : this.element.addClass(\"codemirror-high-line-height\");\r\n\r\n        this.editor.on(\"change\", function (cm, change) {\r\n            self._checkWaterMark();\r\n            // 调用setValue也会触发change, 提示框只需要在编辑的时候触发\r\n            if (o.showHint && self.editor.hasFocus()) {\r\n                BI.CodeMirror.showHint(cm, BI.CodeMirror.sqlHint, {\r\n                    completeSingle: false,\r\n                    supportFunction: o.supportFunction\r\n                });\r\n            }\r\n            BI.nextTick(function () {\r\n                self.fireEvent(BI.FormulaEditor.EVENT_CHANGE);\r\n            });\r\n        });\r\n\r\n        this.editor.on(\"focus\", function () {\r\n            self._checkWaterMark();\r\n            self.fireEvent(BI.FormulaEditor.EVENT_FOCUS);\r\n        });\r\n\r\n        this.editor.on(\"blur\", function () {\r\n            self.fireEvent(BI.FormulaEditor.EVENT_BLUR);\r\n        });\r\n\r\n        // 水印\r\n        this.watermark = BI.createWidget({\r\n            type: \"bi.label\",\r\n            text: o.watermark,\r\n            cls: \"bi-water-mark\",\r\n            whiteSpace: \"normal\",\r\n            textAlign: \"left\"\r\n        });\r\n        this.watermark.element.bind(\r\n            \"mousedown\", function (e) {\r\n                self._insertString(\"\");\r\n                self.editor.focus();\r\n                e.stopEvent();\r\n            }\r\n        );\r\n        this.watermark.element.bind(\"click\", function (e) {\r\n            self.editor.focus();\r\n            e.stopEvent();\r\n        });\r\n        BI.createWidget({\r\n            type: \"bi.absolute\",\r\n            element: this,\r\n            items: [{\r\n                el: this.watermark,\r\n                top: 3,\r\n                left: 6,\r\n                right: 6\r\n            }]\r\n        });\r\n        if (BI.isKey(o.value)) {\r\n            BI.nextTick(function () {\r\n                self.setValue(o.value);\r\n            });\r\n        }\r\n    },\r\n\r\n    _setEnable: function (b) {\r\n        BI.SQLEditor.superclass._setEnable.apply(this, arguments);\r\n        this.editor.setOption(\"readOnly\", b === true ? false : \"nocursor\");\r\n    },\r\n\r\n    _insertString: function (str) {\r\n        this.editor.replaceSelection(str);\r\n    },\r\n\r\n    _insertParam: function (param) {\r\n        var value = param;\r\n        param = this.options.paramFormatter(param);\r\n        var from = this.editor.getCursor();\r\n        // 解决插入字段由括号或其他特殊字符包围时分裂的bug,在两端以不可见字符包裹一下\r\n        this.editor.replaceSelection(\"\\u200b\" + param + \"\\u200b\");\r\n        var to = this.editor.getCursor();\r\n        var className = \"param\";\r\n        if (BI.isNotNull(param.match(/^<!.*!>$/))) {\r\n            className = \"error-param\";\r\n        }\r\n        var options = {\r\n            className: className,\r\n            atomic: true,\r\n            replacedWith: BI.$(\"<span class='\" + className + \" start end' />\").text(param)[0]\r\n        };\r\n        options.value = value;\r\n        this.editor.markText(from, to, options);\r\n    },\r\n\r\n    _checkWaterMark: function () {\r\n        var o = this.options;\r\n        if (!this.disabledWaterMark && BI.isEmptyString(this.editor.getValue()) && BI.isKey(o.watermark)) {\r\n            this.watermark && this.watermark.visible();\r\n        } else {\r\n            this.watermark && this.watermark.invisible();\r\n        }\r\n    },\r\n\r\n    insertString: function (str) {\r\n        this._insertString(str);\r\n        this.editor.focus();\r\n    },\r\n\r\n    insertParam: function (param) {\r\n        this._insertParam(param);\r\n        this.editor.focus();\r\n    },\r\n\r\n    _analyzeContent: function (v) {\r\n        var regx = /\\n|\\$[\\{][^\\}]*[\\}]|((?!\\$\\{).)*((?!\\$\\{).)|\\$[^\\{]*[^\\$\\{]/g;\r\n        return v.match(regx);\r\n    },\r\n\r\n    getValue: function () {\r\n        return this.editor.getValue(\"\\n\", function (line) {\r\n            var value = line.text, num = 0;\r\n            _.forEach(_.sortBy(line.markedSpans, \"from\"), function (i, ms) {\r\n                switch (i.marker.className) {\r\n                    case \"param\":\r\n                    case \"error-param\":\r\n                        var fieldNameLength = i.to - i.from;\r\n                        value = value.substr(0, i.from + num) + \"$\\{\" + i.marker.value + \"\\}\" + value.substr(i.to + num, value.length);\r\n                        // 加上${}的偏移\r\n                        num += 3;\r\n                        // 加上实际值和显示值的长度差的偏移\r\n                        num += (i.marker.value.length - fieldNameLength);\r\n                        break;\r\n                }\r\n            });\r\n            return value;\r\n        });\r\n    },\r\n\r\n    setValue: function (v) {\r\n        var self = this, result, o = this.options;\r\n        this.refresh();\r\n        self.editor.setValue(\"\");\r\n        if (!o.supportParam) {\r\n            this._insertString(v);\r\n            this._checkWaterMark();\r\n\r\n            return;\r\n        }\r\n\r\n        result = this._analyzeContent(v || \"\");\r\n        BI.each(result, function (i, item) {\r\n            var fieldRegx = /\\$[\\{][^\\}]*[\\}]/;\r\n            var str = item.match(fieldRegx);\r\n            if (BI.isNotEmptyArray(str)) {\r\n                self._insertParam(str[0].substring(2, item.length - 1));\r\n            } else {\r\n                self._insertString(item);\r\n            }\r\n        });\r\n        this._checkWaterMark();\r\n    },\r\n\r\n    refresh: function () {\r\n        var self = this;\r\n        BI.nextTick(function () {\r\n            self.editor.refresh();\r\n        });\r\n    },\r\n\r\n    setVisible: function (visible) {\r\n        BI.SQLEditor.superclass.setVisible.apply(this, arguments);\r\n        visible && this.refresh();\r\n    }\r\n});\r\nBI.shortcut(\"bi.sql_editor\", BI.SQLEditor);\r\n","/**\r\n * Created by Urthur on 2017/11/14.\r\n */\r\nBI.FormulaFieldPane = BI.inherit(BI.Widget, {\r\n    props: {\r\n        baseCls: \"bi-formula-field-pane bi-card\",\r\n        items: [],\r\n        itemsCreator: undefined,\r\n        searcherHeight: 28,\r\n        searcherGap: 8,\r\n        itemHeight: 24,\r\n        leafItemHeight: 24,\r\n        fieldTreeHgap: 0,\r\n        nodeGap: 0\r\n    },\r\n\r\n    _store: function () {\r\n        return BI.Models.getModel(\"bi.model.material.formula_field_pane\");\r\n    },\r\n\r\n    watch: {\r\n        fieldKeyword: function () {\r\n            this._search();\r\n        }\r\n    },\r\n\r\n    render: function () {\r\n        var self = this, o = this.options;\r\n        return {\r\n            type: \"bi.vtape\",\r\n            vgap: o.searcherGap,\r\n            hgap: o.searcherGap,\r\n            items: [{\r\n                el: {\r\n                    type: \"bi.vertical\",\r\n                    items: [{\r\n                        type: \"bi.search_editor\",\r\n                        ref: function (ref) {\r\n                            self.search = ref;\r\n                        },\r\n                        height: o.searcherHeight,\r\n                        listeners: [{\r\n                            eventName: BI.SearchEditor.EVENT_CHANGE,\r\n                            action: BI.debounce(BI.bind(function () {\r\n                                self.store.setKeyword(self.search.getValue());\r\n                            }), BI.EVENT_RESPONSE_TIME),\r\n                        }, {\r\n                            eventName: BI.SearchEditor.EVENT_CLEAR,\r\n                            action: BI.debounce(BI.bind(function () {\r\n                                self.store.setKeyword(self.search.getValue());\r\n                            }), BI.EVENT_RESPONSE_TIME),\r\n                        }],\r\n                    }],\r\n                },\r\n                height: o.searcherHeight,\r\n            }, {\r\n                el: {\r\n                    type: \"bi.vertical\",\r\n                    items: [\r\n                        {\r\n                            type: \"bi.formula_fields_tree\",\r\n                            items: o.items,\r\n                            itemsCreator: o.itemsCreator,\r\n                            itemHeight: o.itemHeight,\r\n                            leafItemHeight: o.leafItemHeight,\r\n                            nodeGap: o.nodeGap,\r\n                            redmark: function () {\r\n                                return true;\r\n                            },\r\n                            ref: function (_ref) {\r\n                                self.fieldTree = _ref;\r\n                            },\r\n                            listeners: [{\r\n                                eventName: BI.FormulaFieldsTree.EVENT_CHANGE,\r\n                                action: function () {\r\n                                    self.fireEvent(BI.FormulaFieldPane.EVENT_CHANGE, this.getValue());\r\n                                }\r\n                            }]\r\n                        }\r\n                    ],\r\n                },\r\n                hgap: o.fieldTreeHgap\r\n            }]\r\n        };\r\n    },\r\n\r\n    _search: function () {\r\n        var self = this, o = this.options;\r\n        var items = BI.map(o.items, function (index, item) {\r\n            var res = BI.Func.getSearchResult(item, self.model.fieldKeyword, \"text\");\r\n            return res.match.concat(res.find);\r\n        });\r\n        this.fieldTree.populate(items, this.model.fieldKeyword);\r\n    },\r\n\r\n    getAllLeaves: function () {\r\n        return this.fieldTree.getAllLeaves();\r\n    },\r\n\r\n    populate: function (items, keyword) {\r\n        this.options.items = items;\r\n        this.fieldTree.populate(items, keyword);\r\n    }\r\n\r\n});\r\nBI.FormulaFieldPane.EVENT_SEARCH = \"EVENT_SEARCH\";\r\nBI.FormulaFieldPane.EVENT_CHANGE = \"EVENT_CHANGE\";\r\nBI.shortcut(\"bi.formula_field_pane\", BI.FormulaFieldPane);\r\n","!(function () {\r\n    var Model = BI.inherit(Fix.Model, {\r\n\r\n        context: [\"fieldKeyword\"],\r\n\r\n        state: function () {\r\n            return {\r\n\r\n            };\r\n        },\r\n\r\n        computed: {\r\n\r\n        },\r\n\r\n        actions: {\r\n            setKeyword: function (v) {\r\n                this.model.fieldKeyword = v;\r\n            }\r\n        }\r\n    });\r\n    BI.model(\"bi.model.material.formula_field_pane\", Model);\r\n})();","var Item = BI.inherit(BI.BasicButton, {\r\n    props: function () {\r\n        return  {\r\n            extraCls:\"bi-list-item\",\r\n            id: \"\",\r\n            pId: \"\",\r\n            height: 24,\r\n            hgap: 0,\r\n            lgap: 0,\r\n            rgap: 0\r\n        };\r\n    },\r\n\r\n    render: function () {\r\n        var self = this, o = this.options;\r\n\r\n        return {\r\n            type: \"bi.label\",\r\n            ref: function (_ref) {\r\n                self.text = _ref;\r\n            },\r\n            textAlign: \"left\",\r\n            whiteSpace: \"nowrap\",\r\n            textHeight: o.height,\r\n            height: o.height,\r\n            hgap: o.hgap,\r\n            lgap: o.lgap,\r\n            rgap: o.hgap,\r\n            text: o.text,\r\n            value: o.value,\r\n            py: o.py,\r\n            keyword: o.keyword\r\n        }\r\n    },\r\n\r\n    doRedMark: function () {\r\n        this.text.doRedMark.apply(this.text, arguments);\r\n    },\r\n\r\n    unRedMark: function () {\r\n        this.text.unRedMark.apply(this.text, arguments);\r\n    },\r\n\r\n    doHighLight: function () {\r\n        this.text.doHighLight.apply(this.text, arguments);\r\n    },\r\n\r\n    unHighLight: function () {\r\n        this.text.unHighLight.apply(this.text, arguments);\r\n    },\r\n\r\n    getId: function () {\r\n        return this.options.id;\r\n    },\r\n\r\n    getPId: function () {\r\n        return this.options.pId;\r\n    }\r\n});\r\n\r\nBI.shortcut(\"bi.formula_fields_tree.item\", Item);\r\n","BI.FormulaFieldsTree = BI.inherit(BI.Widget, {\r\n    _const: {\r\n        leafGap: 40\r\n    },\r\n\r\n    props: {\r\n        baseCls: \"bi-formula-field-tree\",\r\n        chooseType: 0,\r\n        items: [],\r\n        itemsCreator: undefined,\r\n        redmark: BI.emptyFn,\r\n        itemHeight: 24,\r\n        leafItemHeight: 24,\r\n        nodeGap: 0,\r\n    },\r\n\r\n    render: function () {\r\n        var o = this.options, c = this._const, self = this;\r\n        var nodes = this._formatItems(BI.deepClone(o.items));\r\n        return {\r\n            type: \"bi.level_tree\",\r\n            element: this,\r\n            chooseType: o.chooseType,\r\n            expander: {\r\n                isDefaultInit: true,\r\n                showLine: false,\r\n            },\r\n            items: nodes,\r\n            el: {\r\n                behaviors: {\r\n                    redmark: o.redmark\r\n                }\r\n            },\r\n            ref: function (_ref) {\r\n                self.fieldtree = _ref;\r\n            },\r\n            listeners: [{\r\n                eventName: BI.LevelTree.EVENT_CHANGE,\r\n                action: function () {\r\n                    self.fireEvent(BI.FormulaFieldsTree.EVENT_CHANGE);\r\n                    self.fieldtree.setValue();\r\n                }\r\n            }]\r\n        };\r\n    },\r\n\r\n    _getFieldNum: function (map, fieldtype) {\r\n        if (BI.isNotNull(map[fieldtype])) {\r\n            return map[fieldtype].length;\r\n        }\r\n        return 0;\r\n    },\r\n\r\n    _formatItems: function (items, openWhenNotEmpty) {\r\n        var o = this.options, c = this._const, self = this;\r\n\r\n        if (o.itemsCreator) {\r\n            return o.itemsCreator(items, openWhenNotEmpty);\r\n        }\r\n\r\n        var map = {};\r\n        BI.each(items, function (i, typeItem) {\r\n            BI.each(BI.Func.getSortedResult(typeItem, \"text\"), function (i, item) {\r\n                if (item.fieldType === BICst.COLUMN.CALCULATE) {\r\n                    item.fieldType = BICst.COLUMN.NUMBER;\r\n                }\r\n\r\n                if (!map[item.fieldType]) {\r\n                    map[item.fieldType] = [];\r\n                }\r\n                map[item.fieldType].push(item);\r\n            });\r\n        });\r\n\r\n        var nodes = [{\r\n            id: BICst.COLUMN.NUMBER,\r\n            type: \"bi.arrow_group_node\",\r\n            $testId: \"bi-formula-field-tree-number-node\",\r\n            text: BI.i18nText(\"BI-Conf_Formula_Numberic_Field\") + \"(\" + self._getFieldNum(map, BICst.COLUMN.NUMBER) + \")\",\r\n            value: BICst.COLUMN.NUMBER,\r\n            isParent: true,\r\n            open: true || (openWhenNotEmpty ? self._getFieldNum(map, BICst.COLUMN.NUMBER) > 0 : false)\r\n        }];\r\n\r\n        if (items.length > 1) {\r\n            nodes.push({\r\n                id: BICst.COLUMN.STRING,\r\n                type: \"bi.arrow_group_node\",\r\n                $testId: \"bi-formula-field-tree-string-node\",\r\n                text: BI.i18nText(\"BI-Conf_Formula_Text_Field\") + \"(\" + self._getFieldNum(map, BICst.COLUMN.STRING) + \")\",\r\n                value: BICst.COLUMN.STRING,\r\n                isParent: true,\r\n                open: (openWhenNotEmpty ? self._getFieldNum(map, BICst.COLUMN.STRING) > 0 : false) || false\r\n            });\r\n        }\r\n\r\n        if (items.length > 2) {\r\n            nodes.push({\r\n                id: BICst.COLUMN.DATE,\r\n                type: \"bi.arrow_group_node\",\r\n                $testId: \"bi-formula-field-tree-date-node\",\r\n                text: BI.i18nText(\"BI-Conf_Formula_Time_Field\") + \"(\" + self._getFieldNum(map, BICst.COLUMN.DATE) + \")\",\r\n                value: BICst.COLUMN.DATE,\r\n                isParent: true,\r\n                open: (openWhenNotEmpty ? self._getFieldNum(map, BICst.COLUMN.DATE) > 0 : false) || false\r\n            });\r\n        }\r\n\r\n        if (items.length > 3) {\r\n            nodes.push({\r\n                id: BICst.FORMULA_WIDGET_FIELD_TYPE.DATE,\r\n                $testId: \"bi-formula-field-tree-date-widget-node\",\r\n                type: \"bi.arrow_group_node\",\r\n                text: BI.i18nText(\"BI-Design_Date_Widget_Field\") + \"(\" + items[3].length + \")\",\r\n                value: BICst.FORMULA_WIDGET_FIELD_TYPE.DATE,\r\n                isParent: true,\r\n                open: (openWhenNotEmpty ? items[3].length > 0 : false) || false\r\n            });\r\n        }\r\n\r\n        if (items.length > 4) {\r\n            nodes.push({\r\n                id: BICst.FORMULA_WIDGET_FIELD_TYPE.STRING,\r\n                $testId: \"bi-formula-field-tree-string-widget-node\",\r\n                type: \"bi.arrow_group_node\",\r\n                text: BI.i18nText(\"BI-Design_String_Widget_Field\") + \"(\" + items[4].length + \")\",\r\n                value: BICst.FORMULA_WIDGET_FIELD_TYPE.STRING,\r\n                isParent: true,\r\n                open: (openWhenNotEmpty ? items[4].length > 0 : false) || false\r\n            });\r\n        }\r\n\r\n        if (items.length > 5) {\r\n            nodes.push({\r\n                id: BICst.FORMULA_WIDGET_FIELD_TYPE.NUMBER,\r\n                $testId: \"bi-formula-field-tree-number-widget-node\",\r\n                type: \"bi.arrow_group_node\",\r\n                text: BI.i18nText(\"BI-Design_Number_Widget_Field\") + \"(\" + items[5].length + \")\",\r\n                value: BICst.FORMULA_WIDGET_FIELD_TYPE.NUMBER,\r\n                isParent: true,\r\n                open: (openWhenNotEmpty ? items[5].length > 0 : false) || false\r\n            });\r\n        }\r\n\r\n        BI.each(nodes, function (_idx, node) {\r\n            BI.extend(node, {\r\n                height: o.itemHeight,\r\n                hgap: o.nodeGap,\r\n                iconWrapperWidth: 24,\r\n                expandIcon: 'tree-expander-expand-font',\r\n                collapseIcon: 'tree-expander-collapse-font',\r\n            });\r\n        });\r\n\r\n        BI.each(items, function (idx, typeItems) {\r\n            BI.each(typeItems, function (i, item) {\r\n                nodes.push(BI.extend({\r\n                    id: BI.UUID(),\r\n                    pId: item.fieldType\r\n                }, item, {\r\n                    type: \"bi.formula_fields_tree.item\",\r\n                    $testId: \"bi-formula-field-tree-field-item-\" + item.text,\r\n                    cls: \"field-item-draggable\",\r\n                    textAlign: \"left\",\r\n                    lgap: c.leafGap,\r\n                    height: o.leafItemHeight\r\n                }));\r\n            });\r\n        });\r\n        return nodes;\r\n    },\r\n\r\n    populate: function (items, keyword) {\r\n        var nodes = this._formatItems(BI.deepClone(items), BI.isNotNull(keyword) && BI.isNotEmptyString(keyword));\r\n        this.fieldtree.populate(nodes, keyword);\r\n    },\r\n\r\n    getValue: function () {\r\n        return this.fieldtree.getValue();\r\n    },\r\n\r\n    setValue: function (v) {\r\n        this.fieldtree.setValue(v);\r\n    },\r\n\r\n    doBehavior: function () {\r\n        this.fieldtree.doBehavior.apply(this.fieldtree, arguments);\r\n    },\r\n\r\n    getNodeByValue: function (v) {\r\n        return this.fieldtree.getNodeByValue(v);\r\n    },\r\n\r\n    setTriggerExpand: function (v) {\r\n        var node = this.fieldtree.getNodeById(v);\r\n        if (BI.isNotNull(node)) {\r\n            node.showView();\r\n        }\r\n    },\r\n\r\n    setTriggerCollapse: function (v) {\r\n        var node = this.fieldtree.getNodeById(v);\r\n        node.hideView();\r\n    },\r\n\r\n    expandAll: function () {\r\n        var self = this;\r\n        BI.each([BICst.COLUMN.NUMBER, BICst.COLUMN.STRING, BICst.COLUMN.DATE], function (i, id) {\r\n            self.setTriggerExpand(id);\r\n        });\r\n    },\r\n\r\n    getAllLeaves: function () {\r\n        return this.fieldtree.getAllLeaves();\r\n    }\r\n});\r\nBI.FormulaFieldsTree.EVENT_CHANGE = \"EVENT_CHANGE\";\r\nBI.shortcut(\"bi.formula_fields_tree\", BI.FormulaFieldsTree);\r\n","var FunctionDescribe = BI.inherit(BI.Widget, {\r\n    props: {\r\n        baseCls: \"bi-formula-function-describe\",\r\n        open: false,\r\n        expandable: true,\r\n        defaultHyperLink: null,\r\n    },\r\n\r\n    render: function () {\r\n        var self = this, o = this.options;\r\n\r\n        return {\r\n            type: \"bi.vertical_fill\",\r\n            rowSize: [36, o.expandable ? 164 : \"fill\"],\r\n            cls: \"bi-split-top formula-describe-pane\",\r\n            items: [\r\n                {\r\n                    el: {\r\n                        type: \"bi.basic_button\",\r\n                        ref: function (_ref) {\r\n                            self.expanderTrigger = _ref;\r\n                        },\r\n                        selected: true,\r\n                        invisible: true,\r\n                        render: function () {\r\n                            return {\r\n                                type: \"bi.left_right_vertical_adapt\",\r\n                                height: 36,\r\n                                items: {\r\n                                    left: [{\r\n                                        type: \"bi.label\",\r\n                                        text: BI.i18nText(\"BI-Conf_Function_Description\"),\r\n                                        cls: \"more-function-button\",\r\n                                    }],\r\n                                    right: [{\r\n                                        type: \"bi.icon_change_button\",\r\n                                        iconCls: \"column-next-page-h-font\",\r\n                                        width: 25,\r\n                                        invisible: !o.expandable,\r\n                                        ref: function (_ref) {\r\n                                            self.describeButton = _ref;\r\n                                        }\r\n                                    }]\r\n                                },\r\n                                lhgap: 10,\r\n                                rhgap: 10\r\n                            };\r\n                        },\r\n                        handler: function () {\r\n                            if (o.expandable) {\r\n                                var selected = this.isSelected();\r\n                                if (selected) {\r\n                                    self.describeButton.setIcon(\"column-next-page-h-font\");\r\n                                    self.describeGroup.setVisible(true);\r\n                                } else {\r\n                                    self.describeButton.setIcon(\"column-pre-page-h-font\");\r\n                                    self.describeGroup.setVisible(false);\r\n                                }\r\n                            }\r\n                        }\r\n                    },\r\n                }, {\r\n                    type: \"bi.button_group\",\r\n                    layouts: [{\r\n                        type: \"bi.vertical\",\r\n                        hgap: 20,\r\n                        vgap: 5\r\n                    }],\r\n                    ref: function (_ref) {\r\n                        self.describeGroup = _ref;\r\n                    },\r\n                    items: [\r\n                        {\r\n                            type: \"bi.vertical\",\r\n                            vgap: 10,\r\n                            items: [\r\n                                {\r\n                                    type: \"bi.text\",\r\n                                    whiteSpace: \"normal\",\r\n                                    textAlign: \"left\",\r\n                                    text: BI.i18nText(\"BI-Formula_Function_Tip1\"),\r\n                                }, {\r\n                                    type: \"bi.html_label\",\r\n                                    cls: \"cm-s-default\",\r\n                                    whiteSpace: \"normal\",\r\n                                    textAlign: \"left\",\r\n                                    text: BI.i18nText(\"BI-Formula_Function_Tip2\"),\r\n                                }, o.defaultHyperLink ? {\r\n                                    type: \"bi.a\",\r\n                                    cls: \"hyperlink-button\",\r\n                                    whiteSpace: \"normal\",\r\n                                    textAlign: \"left\",\r\n                                    text: BI.i18nText(\"BI-Formula_Help_Document\"),\r\n                                    href: o.defaultHyperLink,\r\n                                } : null\r\n                            ]\r\n                        }\r\n                    ]\r\n                }\r\n            ]\r\n        };\r\n    },\r\n\r\n    populate: function (func) {\r\n        this.expanderTrigger.setVisible(true);\r\n        this.describeGroup.populate([\r\n            BI.isFunction(func.description)\r\n                ? func.description()\r\n                : {\r\n                    type: \"bi.vertical\",\r\n                    bgap: 5,\r\n                    items: [\r\n                        {\r\n                            type: \"bi.label\",\r\n                            cls: \"cm-strong\",\r\n                            textAlign: \"left\",\r\n                            text: func.text + \":\"\r\n                        }, {\r\n                            type: \"bi.label\",\r\n                            whiteSpace: \"normal\",\r\n                            textAlign: \"left\",\r\n                            text: func.description\r\n                        }, func.hyperlink ? {\r\n                            type: \"bi.a\",\r\n                            text: BI.i18nText(\"BI-Formula_Function_More_Example\"),\r\n                            href: func.hyperlink,\r\n                        } : null\r\n                    ]\r\n                }\r\n        ]);\r\n    }\r\n\r\n\r\n});\r\n\r\nBI.shortcut(\"bi.formula_function_describe\", FunctionDescribe);\r\n","var Item = BI.inherit(BI.BasicButton, {\r\n    _defaultConfig: function () {\r\n        return BI.extend(BI.TreeTextLeafItem.superclass._defaultConfig.apply(this, arguments), {\r\n            extraCls: \"bi-list-item-active2\",\r\n            id: \"\",\r\n            pId: \"\",\r\n            height: 24,\r\n            hgap: 0,\r\n            lgap: 0,\r\n            rgap: 0,\r\n            description: \"\",\r\n        });\r\n    },\r\n\r\n    mounted: function () {\r\n        this.element.hover(() => {\r\n            this.fireEvent(\"EVENT_HOVER\", this.getValue());\r\n        });\r\n    },\r\n\r\n    render: function () {\r\n        var self = this, o = this.options;\r\n\r\n        return {\r\n            type: \"bi.label\",\r\n            ref: function (_ref) {\r\n                self.text = _ref;\r\n            },\r\n            cls: \"draggable-handle\",\r\n            textAlign: \"left\",\r\n            whiteSpace: \"nowrap\",\r\n            height: o.height,\r\n            hgap: o.hgap,\r\n            lgap: o.lgap,\r\n            rgap: o.hgap,\r\n            text: o.text,\r\n            value: o.value,\r\n            py: o.py,\r\n            keyword: o.keyword,\r\n        };\r\n    },\r\n\r\n    doRedMark: function () {\r\n        this.text.doRedMark.apply(this.text, arguments);\r\n    },\r\n\r\n    unRedMark: function () {\r\n        this.text.unRedMark.apply(this.text, arguments);\r\n    },\r\n\r\n    doHighLight: function () {\r\n        this.text.doHighLight.apply(this.text, arguments);\r\n    },\r\n\r\n    unHighLight: function () {\r\n        this.text.unHighLight.apply(this.text, arguments);\r\n    },\r\n\r\n    getId: function () {\r\n        return this.options.id;\r\n    },\r\n\r\n    getPId: function () {\r\n        return this.options.pId;\r\n    }\r\n});\r\n\r\nBI.shortcut(\"bi.formula_functions_tree.item\", Item);\r\n","/**\r\n * Created by roy on 15/9/14.\r\n */\r\nBI.FormulaFunctionsTree = BI.inherit(BI.Widget, {\r\n    _const: {\r\n        leafGap: 40\r\n    },\r\n\r\n    props: {\r\n        baseCls: \"bi-formula-function-tree bi-card\",\r\n        chooseType: 0,\r\n        items: [],\r\n        redmark: BI.emptyFn,\r\n        itemHeight: 24,\r\n        leafItemHeight: 24,\r\n        nodeGap: 0,\r\n    },\r\n\r\n    _store: function () {\r\n        return BI.Models.getModel(\"bi.model.material.formula_functions_tree\");\r\n    },\r\n\r\n    render: function () {\r\n        var self = this, o = this.options;\r\n\r\n        return {\r\n            type: \"bi.level_tree\",\r\n            expander: {\r\n                isDefaultInit: true,\r\n                showLine: false,\r\n            },\r\n            items: this._getFormatNodes(o.items),\r\n            el: {\r\n                behaviors: {\r\n                    redmark: o.redmark\r\n                }\r\n            },\r\n            ref: function () {\r\n                self.fieldtree = this;\r\n            },\r\n            listeners: [\r\n                {\r\n                    eventName: BI.LevelTree.EVENT_CHANGE,\r\n                    action: function () {\r\n                        self.fireEvent(BI.FormulaFunctionsTree.EVENT_CHANGE, self._getSelectItem(self.getValue(), o.items));\r\n                        self.fieldtree.setValue(self.getValue());\r\n                    }\r\n                },\r\n            ]\r\n        };\r\n    },\r\n\r\n    _getFieldNum: function (map, fieldtype) {\r\n        if (BI.isNotNull(map[fieldtype])) {\r\n            return map[fieldtype].length;\r\n        }\r\n        return 0;\r\n\r\n    },\r\n\r\n    _getFormatNodes: function (items, keyword) {\r\n        var o = this.options, c = this._const, self = this;\r\n        var map = {};\r\n        BI.each(items, function (i, item) {\r\n            if (!map[item.fieldType]) {\r\n                map[item.fieldType] = [];\r\n            }\r\n            map[item.fieldType].push(item);\r\n        });\r\n        var isOpen = BI.isNotNull(keyword) && BI.isNotEmptyString(keyword);\r\n        var templateNodes = [{\r\n            id: BICst.FUNCTION.MATH,\r\n            type: \"bi.arrow_group_node\",\r\n            $testId: \"bi-formula-function-tree-math-node\",\r\n            text: BI.i18nText(\"BI-Conf_Formula_Numberic_Function\") + \"(\" + self._getFieldNum(map, BICst.FUNCTION.MATH) + \")\",\r\n            value: BICst.FUNCTION.MATH,\r\n            isParent: true,\r\n            open: isOpen\r\n        }, {\r\n            id: BICst.FUNCTION.TEXT,\r\n            type: \"bi.arrow_group_node\",\r\n            $testId: \"bi-formula-function-tree-text-node\",\r\n            text: BI.i18nText(\"BI-Conf_Formula_Text_Function\") + \"(\" + self._getFieldNum(map, BICst.FUNCTION.TEXT) + \")\",\r\n            value: BICst.FUNCTION.TEXT,\r\n            isParent: true,\r\n            open: isOpen\r\n        }, {\r\n            id: BICst.FUNCTION.DATE,\r\n            type: \"bi.arrow_group_node\",\r\n            $testId: \"bi-formula-function-tree-date-node\",\r\n            text: BI.i18nText(\"BI-Conf_Formula_Time_Function\") + \"(\" + self._getFieldNum(map, BICst.FUNCTION.DATE) + \")\",\r\n            value: BICst.FUNCTION.DATE,\r\n            isParent: true,\r\n            open: isOpen\r\n        }, {\r\n            id: BICst.FUNCTION.ARRAY,\r\n            type: \"bi.arrow_group_node\",\r\n            $testId: \"bi-formula-function-tree-array-node\",\r\n            text: BI.i18nText(\"BI-Conf_Formula_Array_Function\") + \"(\" + self._getFieldNum(map, BICst.FUNCTION.ARRAY) + \")\",\r\n            value: BICst.FUNCTION.ARRAY,\r\n            isParent: true,\r\n            open: isOpen\r\n        }, {\r\n            id: BICst.FUNCTION.LOGIC,\r\n            type: \"bi.arrow_group_node\",\r\n            $testId: \"bi-formula-function-tree-logic-node\",\r\n            text: BI.i18nText(\"BI-Conf_Formula_Logic_Function\") + \"(\" + self._getFieldNum(map, BICst.FUNCTION.LOGIC) + \")\",\r\n            value: BICst.FUNCTION.LOGIC,\r\n            isParent: true,\r\n            open: isOpen\r\n        }, {\r\n            id: BICst.FUNCTION.ANALYSIS,\r\n            type: \"bi.arrow_group_node\",\r\n            text: BI.i18nText(\"BI-Conf_Formula_Analysis\") + \"(\" + self._getFieldNum(map, BICst.FUNCTION.ANALYSIS) + \")\",\r\n            value: BICst.FUNCTION.ANALYSIS,\r\n            isParent: true,\r\n            open: isOpen\r\n        }, {\r\n            id: BICst.FUNCTION.OTHER,\r\n            $testId: \"bi-formula-function-tree-other-node\",\r\n            type: \"bi.arrow_group_node\",\r\n            text: BI.i18nText(\"BI-Conf_Formula_Other_Function\") + \"(\" + self._getFieldNum(map, BICst.FUNCTION.OTHER) + \")\",\r\n            value: BICst.FUNCTION.OTHER,\r\n            isParent: true,\r\n            open: isOpen\r\n        }, {\r\n            id: BICst.FUNCTION.AGG,\r\n            type: \"bi.arrow_group_node\",\r\n            $testId: \"bi-formula-function-tree-agg-node\",\r\n            text: BI.i18nText(\"BI-Design_Function_AGG\") + \"(\" + self._getFieldNum(map, BICst.FUNCTION.AGG) + \")\",\r\n            value: BICst.FUNCTION.AGG,\r\n            isParent: true,\r\n            open: isOpen\r\n        }, {\r\n            id: BICst.FUNCTION.TABLE_CAL,\r\n            type: \"bi.arrow_group_node\",\r\n            $testId: \"bi-formula-function-tree-table-cal-node\",\r\n            text: BI.i18nText(\"BI-Design_Rapid_Function\") + \"(\" + self._getFieldNum(map, BICst.FUNCTION.TABLE_CAL) + \")\",\r\n            value: BICst.FUNCTION.TABLE_CAL,\r\n            isParent: true,\r\n            open: isOpen\r\n        }, {\r\n            id: BICst.FUNCTION.COMMON,\r\n            type: \"bi.arrow_group_node\",\r\n            $testId: \"bi-formula-function-tree-common-node\",\r\n            text: BI.i18nText(\"BI-Basic_Common_Function\") + \"(\" + self._getFieldNum(map, BICst.FUNCTION.COMMON) + \")\",\r\n            value: BICst.FUNCTION.COMMON,\r\n            isParent: true,\r\n            open: isOpen\r\n        }, {\r\n            id: BICst.FUNCTION.FIXED_CAL,\r\n            type: \"bi.arrow_group_node\",\r\n            $testId: \"bi-formula-function-tree-fixed-cal-node\",\r\n            text: BI.i18nText(\"BI-Design_Fixed_Function\") + \"(\" + self._getFieldNum(map, BICst.FUNCTION.FIXED_CAL) + \")\",\r\n            value: BICst.FUNCTION.FIXED_CAL,\r\n            isParent: true,\r\n            open: isOpen\r\n        }];\r\n\r\n        var nodes = BI.filter(templateNodes, function (index, node) {\r\n            BI.extend(node, {\r\n                height: o.itemHeight,\r\n                hgap: o.nodeGap,\r\n                iconWrapperWidth: 24,\r\n                expandIcon: 'tree-expander-expand-font',\r\n                collapseIcon: 'tree-expander-collapse-font',\r\n            });\r\n\r\n            return BI.contains(self.model.availableFunctionValues, node.value);\r\n        });\r\n\r\n        nodes.sort(function (a, b) {\r\n            var indexA = BI.indexOf(self.model.availableFunctionValues, a.value);\r\n            var indexB = BI.indexOf(self.model.availableFunctionValues, b.value);\r\n\r\n            return indexA - indexB;\r\n        });\r\n\r\n        BI.first(nodes).open = true;\r\n\r\n        BI.each(items, function (i, item) {\r\n            nodes.push(BI.extend({\r\n                id: BI.UUID(),\r\n                pId: item.fieldType\r\n            }, item, {\r\n                type: \"bi.formula_functions_tree.item\",\r\n                $testId: \"bi-formula-function-tree-item-\" + BI.toLowerCase(item.text),\r\n                cls: \"function-item-draggable\",\r\n                textAlign: \"left\",\r\n                lgap: c.leafGap,\r\n                height: o.leafItemHeight,\r\n                listeners: [\r\n                    {\r\n                        eventName: \"EVENT_HOVER\",\r\n                        action: function () {\r\n                            self.fieldtree.setValue(item.value);\r\n                            self.fireEvent(BI.FormulaFunctionsTree.EVENT_HOVER, self._getSelectItem([item.value], o.items));\r\n                        }\r\n                    }\r\n                ]\r\n            }));\r\n        });\r\n\r\n        return nodes;\r\n    },\r\n\r\n    populate: function (items, keyword) {\r\n        var o = this.options;\r\n        o.items = items;\r\n        this.fieldtree.populate(this._getFormatNodes(items, keyword), keyword);\r\n    },\r\n\r\n    getValue: function () {\r\n        return this.fieldtree.getValue();\r\n    },\r\n\r\n    setValue: function (v) {\r\n        this.fieldtree.setValue(v);\r\n    },\r\n\r\n    doBehavior: function () {\r\n        this.fieldtree.doBehavior.apply(this.fieldtree, arguments);\r\n    },\r\n\r\n    getNodeByValue: function (v) {\r\n        return this.fieldtree.getNodeByValue(v);\r\n    },\r\n\r\n    setTriggerExpand: function (v) {\r\n        var node = this.fieldtree.getNodeById(v);\r\n        if (BI.isNotNull(node)) {\r\n            node.showView();\r\n        }\r\n    },\r\n\r\n    setTriggerCollapse: function (v) {\r\n        var node = this.fieldtree.getNodeById(v);\r\n        node.hideView();\r\n    },\r\n\r\n    expandAll: function () {\r\n        var self = this;\r\n        BI.each([BICst.FUNCTION.MATH, BICst.FUNCTION.ARRAY, BICst.FUNCTION.DATE, BICst.FUNCTION.LOGIC, BICst.FUNCTION.ANALYSIS, BICst.FUNCTION.OTHER, BICst.FUNCTION.TEXT, BICst.FUNCTION.COMMON, BICst.FUNCTION.AGG, BICst.FUNCTION.FIXED_CAL], function (i, id) {\r\n            self.setTriggerExpand(id);\r\n        });\r\n    },\r\n\r\n    _getSelectItem: function (v, items) {\r\n        return BI.find(items, function (i, item) {\r\n            return item.value === v[0];\r\n        });\r\n    },\r\n\r\n    getAllLeaves: function () {\r\n        return this.fieldtree.getAllLeaves();\r\n    }\r\n});\r\nBI.FormulaFunctionsTree.EVENT_CHANGE = \"EVENT_CHANGE\";\r\nBI.FormulaFunctionsTree.EVENT_HOVER = \"EVENT_HOVER\";\r\nBI.shortcut(\"bi.formula_functions_tree\", BI.FormulaFunctionsTree);\r\n","!(function () {\r\n    var Model = BI.inherit(Fix.Model, {\r\n        context: [\"functionTypes\"],\r\n\r\n        computed: {\r\n            availableFunctionValues: function () {\r\n                var service = BI.Services.getService(\"bi.service.material.formula_insert\");\r\n\r\n                return BI.map(this.model.functionTypes, function (index, type) {\r\n                    return service.getFunctionValueByType(type);\r\n                });\r\n            }\r\n        }\r\n    });\r\n    BI.model(\"bi.model.material.formula_functions_tree\", Model);\r\n})();\r\n","/**\r\n * Created by roy on 15/9/14.\r\n */\r\nBI.FormulaFunctionPane = BI.inherit(BI.Widget, {\r\n    props: {\r\n        baseCls: \"bi-formula-function-pane bi-card\",\r\n        items: [],\r\n        searcherHeight: 24,\r\n        searcherGap: 10,\r\n        functionTreeHgap: 0,\r\n        itemHeight: 24,\r\n        leafItemHeight: 24,\r\n        nodeGap: 0\r\n    },\r\n\r\n    _store: function () {\r\n        return BI.Models.getModel(\"bi.model.material.formula_function_pane\");\r\n    },\r\n\r\n    watch: {\r\n        functionKeyword: function (functionKeyword) {\r\n            var o = this.options;\r\n            var keyword = functionKeyword.toLowerCase();\r\n            var resultArray = [];\r\n            BI.each(o.items, function (i, item) {\r\n                if (item.value.toLowerCase().indexOf(keyword) > -1 || BI.isEmptyString(keyword)) {\r\n                    resultArray.push(item);\r\n                }\r\n            });\r\n            this.functionTree.populate(resultArray, keyword);\r\n            this.fireEvent(BI.FormulaFunctionPane.EVENT_SEARCH);\r\n        }\r\n    },\r\n\r\n    render: function () {\r\n        var self = this, o = this.options;\r\n\r\n        return {\r\n            type: \"bi.htape\",\r\n            items: [{\r\n                el: {\r\n                    type: \"bi.vtape\",\r\n                    cls: \"bi-split-left\",\r\n                    vgap: o.searcherGap,\r\n                    hgap: o.searcherGap,\r\n                    items: [{\r\n                        el: {\r\n                            type: \"bi.vertical\",\r\n                            items: [{\r\n                                type: \"bi.search_editor\",\r\n                                height: o.searcherHeight,\r\n                                listeners: [{\r\n                                    eventName: BI.SearchEditor.EVENT_CHANGE,\r\n                                    action: function () {\r\n                                        self.store.setKeyword(this.getValue());\r\n                                    },\r\n                                }, {\r\n                                    eventName: BI.SearchEditor.EVENT_CLEAR,\r\n                                    action: function () {\r\n                                        self.store.setKeyword(this.getValue());\r\n                                    },\r\n                                }],\r\n                            }],\r\n                        },\r\n                        height: o.searcherHeight\r\n                    }, {\r\n                        el: {\r\n                            type: \"bi.vertical\",\r\n                            items: [\r\n                                {\r\n                                    type: \"bi.formula_functions_tree\",\r\n                                    cls: \"style-top\",\r\n                                    items: o.items,\r\n                                    itemHeight: o.itemHeight,\r\n                                    leafItemHeight: o.leafItemHeight,\r\n                                    nodeGap: o.nodeGap,\r\n                                    ref: function (ref) {\r\n                                        self.functionTree = ref;\r\n                                    },\r\n                                    redmark: function () {\r\n                                        return true;\r\n                                    },\r\n                                    listeners: [\r\n                                        {\r\n                                            eventName: BI.FormulaFunctionsTree.EVENT_CHANGE,\r\n                                            action: function (v) {\r\n                                                self.fireEvent(BI.FormulaFunctionPane.EVENT_INSET, v);\r\n                                            }\r\n                                        }, {\r\n                                            eventName: BI.FormulaFunctionsTree.EVENT_HOVER,\r\n                                            action: function (v) {\r\n                                                self.fireEvent(BI.FormulaFunctionPane.EVENT_HOVER, v);\r\n                                            }\r\n                                        }\r\n                                    ]\r\n                                }\r\n                            ],\r\n                        },\r\n                        hgap: o.functionTreeHgap\r\n                    }]\r\n                }\r\n            }]\r\n        };\r\n    },\r\n\r\n    getAllLeaves: function () {\r\n        return this.functionTree.getAllLeaves();\r\n    },\r\n\r\n    setValue: function (v) {\r\n        this.functionTree.setValue(v);\r\n    }\r\n\r\n});\r\nBI.FormulaFunctionPane.EVENT_INSET = \"EVENT_INSET\";\r\nBI.FormulaFunctionPane.EVENT_HOVER = \"EVENT_HOVER\";\r\nBI.FormulaFunctionPane.EVENT_CLOSE = \"EVENT_CLOSE\";\r\nBI.FormulaFunctionPane.EVENT_SEARCH = \"EVENT_SEARCH\";\r\nBI.shortcut(\"bi.formula_function_pane\", BI.FormulaFunctionPane);\r\n","!(function () {\r\n    var Model = BI.inherit(Fix.Model, {\r\n\r\n        context: [\"functionKeyword\"],\r\n\r\n        state: function () {\r\n            return {\r\n\r\n            };\r\n        },\r\n\r\n        computed: {\r\n            \r\n        },\r\n\r\n        actions: {\r\n            setKeyword: function (v) {\r\n                this.model.functionKeyword = v;\r\n            }\r\n        }\r\n    });\r\n    BI.model(\"bi.model.material.formula_function_pane\", Model);\r\n})();","/**\r\n * Created by roy on 15/9/29.\r\n */\r\n\r\n!(function () {\r\n    var SymbolGroup = BI.inherit(BI.Widget, {\r\n        constants: {\r\n            hgap: 7.5,\r\n            textWidth: 14,\r\n            textHeight: 17,\r\n            enableSwitcher: false\r\n        },\r\n\r\n        _defaultConfig: function () {\r\n            return BI.extend(SymbolGroup.superclass._defaultConfig.apply(this, arguments), {\r\n                baseCls: \"bi-formula-symbol-group\",\r\n                fieldType: BICst.FORMULA_GENERATE_TYPE.AUTO,\r\n                itemHeight: 24\r\n            });\r\n        },\r\n\r\n        render: function () {\r\n            var self = this, c = this.constants, o = this.options;\r\n\r\n            var items = [{\r\n                cls: \"operator-plus-font\",\r\n                $testId: \"bi-formula-symbol-group-plus\",\r\n                value: \"+\"\r\n            }, {\r\n                cls: \"operator-minus-font\",\r\n                $testId: \"bi-formula-symbol-group-minus\",\r\n                value: \"-\"\r\n            }, {\r\n                cls: \"operator-multi-font\",\r\n                $testId: \"bi-formula-symbol-group-mul\",\r\n                value: \"*\"\r\n            }, {\r\n                cls: \"operator-divide-font\",\r\n                $testId: \"bi-formula-symbol-group-div\",\r\n                value: \"/\"\r\n            }, {\r\n                cls: \"operator-left-brackets-font\",\r\n                $testId: \"bi-formula-symbol-group-left-brackets\",\r\n                value: \"(\"\r\n            }, {\r\n                cls: \"operator-right-brackets-font\",\r\n                $testId: \"bi-formula-symbol-group-right-brackets\",\r\n                value: \")\"\r\n            }];\r\n\r\n            var layoutItems = {\r\n                left: [{\r\n                    type: \"bi.button_group\",\r\n                    chooseType: -1,\r\n                    items: BI.createItems(items, {\r\n                        type: \"bi.icon_button\",\r\n                        forceNotSelected: true,\r\n                        once: false,\r\n                        textWidth: c.textWidth,\r\n                        textHeight: c.textHeight,\r\n                        cls: \"symbol-button bi-list-item\"\r\n                    }),\r\n                    layouts: [{\r\n                        type: \"bi.vertical_adapt\",\r\n                        lgap: 15\r\n                    }],\r\n                    listeners: [{\r\n                        eventName: BI.ButtonGroup.EVENT_CHANGE,\r\n                        action: function (v) {\r\n                            self.fireEvent(\"EVENT_CHANGE\", v);\r\n                        }\r\n                    }],\r\n                    ref: function (_ref) {\r\n                        self.symbolgroup = _ref;\r\n                    }\r\n                }]\r\n            };\r\n\r\n            if (this.options.enableSwitcher === true) {\r\n                layoutItems.right = [{\r\n                    el: {\r\n                        type: \"bi.label\",\r\n                        text: BI.i18nText(\"BI-Basic_Field_Type\")\r\n                    },\r\n                    rgap: 10\r\n                }, {\r\n                    el: {\r\n                        type: \"bi.icon_combo\",\r\n                        cls: \"bi-list-item\",\r\n                        items: [{\r\n                            iconCls: \"formula-auto-font\",\r\n                            text: BI.i18nText(\"BI-Basic_Auto\"),\r\n                            $testId: \"bi-formula-symbol-group-auto\",\r\n                            value: BICst.FORMULA_GENERATE_TYPE.AUTO,\r\n                            height: o.itemHeight\r\n                        }, {\r\n                            iconCls: \"string-field-font\",\r\n                            $testId: \"bi-formula-symbol-group-string\",\r\n                            text: BI.i18nText(\"BI-Basic_Text\"),\r\n                            value: BICst.FORMULA_GENERATE_TYPE.STRING,\r\n                            height: o.itemHeight\r\n                        }, {\r\n                            iconCls: \"number-field-font\",\r\n                            $testId: \"bi-formula-symbol-group-number\",\r\n                            text: BI.i18nText(\"BI-Basic_Number\"),\r\n                            value: BICst.FORMULA_GENERATE_TYPE.NUMBER,\r\n                            height: o.itemHeight\r\n                        }, {\r\n                            iconCls: \"date-field-font\",\r\n                            $testId: \"bi-formula-symbol-group-date\",\r\n                            text: BI.i18nText(\"BI-Basic_Time\"),\r\n                            value: BICst.FORMULA_GENERATE_TYPE.DATE,\r\n                            height: o.itemHeight\r\n                        }],\r\n                        value: this.options.fieldType,\r\n                        ref: function (_ref) {\r\n                            self.iconCombo = _ref;\r\n                        },\r\n                        listeners: [{\r\n                            eventName: BI.IconCombo.EVENT_CHANGE,\r\n                            action: function () {\r\n                                self.fireEvent(\"EVENT_TYPE_CHANGE\");\r\n                            }\r\n                        }]\r\n                    },\r\n                    rgap: 5\r\n                }];\r\n            }\r\n\r\n            return {\r\n                type: \"bi.left_right_vertical_adapt\",\r\n                llgap: 5,\r\n                items: layoutItems\r\n            };\r\n        },\r\n\r\n        getValue: function () {\r\n            if (BI.isNotNull(this.iconCombo)) {\r\n                return this.iconCombo.getValue();\r\n            }\r\n        },\r\n\r\n        setValue: function (v) {\r\n            if (BI.isNotNull(this.iconCombo)) {\r\n                this.iconCombo.setValue(v || BICst.FORMULA_GENERATE_TYPE.AUTO);\r\n            }\r\n        }\r\n    });\r\n\r\n    BI.shortcut(\"bi.symbol_group\", SymbolGroup);\r\n})();\r\n","BI.FormulaInsert = BI.inherit(BI.Widget, {\r\n    constants: {\r\n        height: 30,\r\n        width: 160,\r\n        right: 10,\r\n        button_bottom: 7,\r\n        pane_bottom: -1,\r\n        MORE_FUNCTION: 0,\r\n        RETRACT: 1,\r\n        retract_width: 30,\r\n        more_width: 200,\r\n        function_pane_width: 180,\r\n        field_pane_width: 220,\r\n        describe_height: 200,\r\n        describe_retract_height: 36,\r\n        enableSwitcher: false,\r\n        abandonFunctions: [],\r\n        functionRegex: /\\w+/\r\n    },\r\n\r\n    props: () => ({\r\n        baseCls: \"bi-formula-insert\",\r\n        fieldItems: [],\r\n        fieldItemsCreator: undefined,\r\n        errorFieldItems: [],\r\n        functionTypes: [\"COMMON\", \"MATH\", \"DATETIME\", \"ARRAY\", \"TEXT\", \"LOGIC\", \"OTHER\"],\r\n        validationChecker: function () {\r\n            return BICst.FORMULA_STATE.VALID;\r\n        },\r\n        keywordsGetter: function () {\r\n            return BI.FormulaCollections;\r\n        },\r\n        formulaJSONGetter: function () {\r\n            return BI.FormulaJSONs;\r\n        },\r\n        checkFormulaValidation: BI.Func.checkFormulaValidation,\r\n        searcherHeight: 24,\r\n        searcherGap: 10,\r\n        functionTreeHgap: 0,\r\n        fieldTreeHgap: 0,\r\n        itemHeight: 24,\r\n        nodeGap: 0,\r\n        functionPaneOpened: false,\r\n        autoCheck: true,\r\n        direction: \"horizontal\",\r\n        watermark: BI.i18nText(\"BI-Conf_Formula_Water_Mark\"),\r\n    }),\r\n\r\n    _store: function () {\r\n        return BI.Models.getModel(\"bi.model.material.formula_insert\", {\r\n            fieldItems: this.options.fieldItems,\r\n            functionTypes: this.options.functionTypes,\r\n            formulaJSONGetter: this.options.formulaJSONGetter,\r\n        });\r\n    },\r\n\r\n    render: function () {\r\n        var self = this, o = this.options, c = this.constants;\r\n        self.validation = BICst.FORMULA_STATE.VALID;\r\n\r\n        BI.FormulaCollections = BI.filter(BI.FormulaOriginCollections, function (index, name) {\r\n            return BI.contains(self.model.availableFunctions, name.toUpperCase());\r\n        });\r\n\r\n        this.fieldPane = BI.createWidget({\r\n            type: \"bi.formula_field_pane\",\r\n            cls: \"bi-formula-field-pane\",\r\n            items: o.fieldItems,\r\n            itemsCreator: o.fieldItemsCreator,\r\n            searcherGap: o.searcherGap,\r\n            searcherHeight: o.searcherHeight,\r\n            fieldTreeHgap: o.fieldTreeHgap,\r\n            itemHeight: o.itemHeight,\r\n            leafItemHeight: o.leafItemHeight || o.itemHeight,\r\n            nodeGap: o.nodeGap,\r\n            width: c.field_pane_width,\r\n            listeners: [{\r\n                eventName: BI.FormulaFieldPane.EVENT_CHANGE,\r\n                action: function (v) {\r\n                    self.store.insertField(v[0]);\r\n                    self.formulaedit.insertField(v[0], true);\r\n                }\r\n            }, {\r\n                eventName: BI.FormulaFieldPane.EVENT_SEARCH,\r\n                action: function () {\r\n                    self._bindFieldDragEvent();\r\n                }\r\n            }]\r\n        });\r\n\r\n        this.symbolgroup = BI.createWidget({\r\n            type: \"bi.symbol_group\",\r\n            height: c.height,\r\n            enableSwitcher: o.enableSwitcher,\r\n            fieldType: o.fieldType,\r\n            itemHeight: o.itemHeight,\r\n            cls: \"symbol-group-column\",\r\n            listeners: [{\r\n                eventName: \"EVENT_CHANGE\",\r\n                action: function (v) {\r\n                    self.store.insertOperator(v);\r\n                    self.formulaedit.insertOperator(v);\r\n                }\r\n            }, {\r\n                eventName: \"EVENT_TYPE_CHANGE\",\r\n                action: function () {\r\n                    self.fireEvent(BI.FormulaInsert.EVENT_TYPE_CHANGE);\r\n                }\r\n            }]\r\n        });\r\n\r\n        this.formulaedit = BI.createWidget({\r\n            type: \"bi.formula_editor\",\r\n            $testId: \"bi-formula-editor\",\r\n            cls: \"bi-split-top\",\r\n            tipType: \"warning\",\r\n            paramFormatter: BI.bind(this._paramFormatter, this),\r\n            valueGetter: BI.bind(this._valueGetter, this),\r\n            formulaChecker: o.formulaChecker,\r\n            paramTypeGetter: function (id) {\r\n                var info = self.fieldsDetailMap[id] || {};\r\n                switch (info.type) {\r\n                    case BICst.COLUMN.DATE:\r\n                        return 'date';\r\n                    case BICst.COLUMN.NUMBER:\r\n                        return 'number';\r\n                    case BICst.COLUMN.STRING:\r\n                        return \"string\";\r\n                    default:\r\n                        return info.type;\r\n                }\r\n            },\r\n            keywordsGetter: function () {\r\n                var keywords = o.keywordsGetter();\r\n                return keywords.concat(BI.map(BI.flatten(self._getSortedResult(o.fieldItems)), function (idx, field) {\r\n                    return {\r\n                        iconCls: self._getIconCls(field),\r\n                        text: field.text,\r\n                        value: field.value,\r\n                        type: BICst.FORMULA_KEYWORD_TYPE.PARAM,\r\n                    };\r\n                }));\r\n            },\r\n            watermark: o.watermark,\r\n            listeners: [\r\n                {\r\n                    eventName: BI.FormulaEditor.EVENT_CHANGE,\r\n                    action: function () {\r\n                        self._checkValidation();\r\n                    }\r\n                }, {\r\n                    eventName: BI.FormulaEditor.EVENT_BLUR,\r\n                    action: function () {\r\n                        self.hideTip();\r\n                        if (!self.checkValidation()) {\r\n                            self.formulaedit.setTitle(self.formulaedit.getTip() || self.getErrorText() || BI.i18nText(\"BI-Basic_Formula_Invalid\"), { belowMouse: true });\r\n                            self.showTip();\r\n                        }\r\n                    }\r\n                }, {\r\n                    eventName: BI.FormulaEditor.EVENT_FOCUS,\r\n                    action: function () {\r\n                        self.formulaedit.setTitle(\"\");\r\n                        if (!self.checkValidation()) {\r\n                            self.showTip();\r\n                        }\r\n                    }\r\n                }, {\r\n                    eventName: BI.FormulaEditor.EVENT_KEY_UP,\r\n                    action: function (key) {\r\n                        self.store.inputOperator(key);\r\n                    }\r\n                }, {\r\n                    eventName: BI.FormulaEditor.EVENT_CURSOR_ACTIVITY,\r\n                    action: function (cm) {\r\n                        //  点击公式中函数名显示函数释义,识别光标位置为函数名与函数左括号\r\n                        var cur = cm.getCursor();\r\n                        var token = cm.getTokenAt(cur);\r\n                        var str = \"\";\r\n                        if (token.type === \"keyword\") {\r\n                            str = token.string;\r\n                        } else if (token.type === \"bracket\" && token.string === \"(\") {\r\n                            var tokens = cm.getLineTokens(cur.line);\r\n                            BI.some(tokens, function (i, t) {\r\n                                if (t.end === cur.ch - 1) {\r\n                                    str = t.string;\r\n                                }\r\n                            });\r\n                        }\r\n                        var v = self._getFunction(str);\r\n                        if (BI.isNotNull(v)) {\r\n                            self.describePane.setVisible(true);\r\n                            self.describePane.populate(v);\r\n                            self.functionpane.setValue(v.value);\r\n                        }\r\n                    }\r\n                }, {\r\n                    eventName: \"EVENT_SELECT_HINT\",\r\n                    action: function (comp) {\r\n                        // nothing\r\n                    }\r\n                }, {\r\n                    eventName: \"EVENT_PICK_HINT\",\r\n                    action: function (comp) {\r\n                        var v = self._getFunction(comp.value);\r\n                        if (BI.isNotNull(v)) {\r\n                            self.describePane.setVisible(true);\r\n                            self.describePane.populate(v);\r\n                            self.functionpane.setValue(v.value);\r\n                        }\r\n                    }\r\n                }\r\n            ]\r\n        });\r\n\r\n        this.describePane = BI.createWidget({\r\n            type: \"bi.formula_function_describe\",\r\n            cls: \"bi-split-top formula-describe-pane\",\r\n            expandable: o.direction === \"horizontal\",\r\n            invisible: o.direction === \"horizontal\",\r\n            defaultHyperLink: o.defaultHyperLink,\r\n        });\r\n\r\n        this.functionbutton = BI.createWidget({\r\n            type: \"bi.node_button\",\r\n            open: o.functionPaneOpened,\r\n            render: function () {\r\n                return {\r\n                    type: \"bi.vertical\",\r\n                    width: c.retract_width,\r\n                    cls: \"bi-background\",\r\n                    items: [\r\n                        {\r\n                            type: \"bi.icon_change_button\",\r\n                            ref: function (_ref) {\r\n                                self.functionTriggerBtn = _ref;\r\n                            },\r\n                            iconCls: o.functionPaneOpened ? \"formula-collapse\" : \"formula-expand\",\r\n                            cls: \"more-function-button\",\r\n                            height: 30,\r\n                        }, {\r\n                            type: \"bi.label\",\r\n                            textWidth: 13,\r\n                            textHeight: 18,\r\n                            whiteSpace: \"normal\",\r\n                            text: BI.i18nText(\"BI-Basic_Function\")\r\n                        }\r\n                    ]\r\n                };\r\n            },\r\n            handler: function () {\r\n                this.isOpened() ? self._closeFunctionPane() : self._openFunctionPane();\r\n            }\r\n        });\r\n\r\n        this.functionpane = BI.createWidget({\r\n            type: \"bi.formula_function_pane\",\r\n            items: self.model.functionItems,\r\n            searcherHeight: o.searcherHeight,\r\n            searcherGap: o.searcherGap,\r\n            functionTreeHgap: o.functionTreeHgap,\r\n            itemHeight: o.itemHeight,\r\n            leafItemHeight: o.leafItemHeight || o.itemHeight,\r\n            nodeGap: o.nodeGap,\r\n            width: c.function_pane_width,\r\n            invisible: o.direction === \"horizontal\" ? !o.functionPaneOpened : false,\r\n            listeners: [{\r\n                eventName: BI.FormulaFunctionPane.EVENT_INSET,\r\n                action: function (v) {\r\n                    var functionName = v.text;\r\n                    if (BI.isNotEmptyString(functionName)) {\r\n                        self.store.insertFunction(functionName);\r\n                        self.formulaedit.insertFunction(functionName);\r\n                    }\r\n                }\r\n            }, {\r\n                eventName: BI.FormulaFunctionPane.EVENT_SEARCH,\r\n                action: function () {\r\n                    self._bindFunctionDragEvent();\r\n                }\r\n            }, {\r\n                eventName: BI.FormulaFunctionPane.EVENT_HOVER,\r\n                action: function (v) {\r\n                    var functionName = v.text;\r\n                    if (BI.isNotEmptyString(functionName)) {\r\n                        self.describePane.setVisible(true);\r\n                        self.describePane.populate(v);\r\n                    }\r\n                }\r\n            }]\r\n        });\r\n\r\n        this.formulaedit.element.droppable({\r\n            accept: \".field-item-draggable,.function-item-draggable\",\r\n            drop: function (event, ui) {\r\n                var fieldId = ui.helper.attr(\"fieldId\"),\r\n                    func = ui.helper.attr(\"func\");\r\n                if (BI.isNotNull(fieldId)) {\r\n                    self.store.insertDragField(fieldId, true);\r\n                    self.formulaedit.insertField(fieldId, true);\r\n                }\r\n                if (BI.isNotNull(func)) {\r\n                    self.store.insertDragFunction(func);\r\n                    self.formulaedit.insertFunction(func);\r\n                }\r\n            }\r\n        });\r\n\r\n        this._bindFunctionDragEvent();\r\n        this.populate(o.fieldItems);\r\n\r\n        if (o.direction === \"vertical\") {\r\n            return {\r\n                type: \"bi.vertical_fill\",\r\n                rowSize: [0.5, \"fill\"],\r\n                items: [\r\n                    {\r\n                        el: {\r\n                            type: \"bi.vertical_fill\",\r\n                            rowSize: [\"\", \"fill\"],\r\n                            horizontalAlign: \"stretch\",\r\n                            items: [\r\n                                {\r\n                                    el: this.symbolgroup,\r\n                                }, {\r\n                                    el: this.formulaedit,\r\n                                }\r\n                            ]\r\n                        }\r\n                    }, {\r\n                        el: {\r\n                            type: \"bi.horizontal_fill\",\r\n                            columnSize: [0.5, 0.5],\r\n                            items: [\r\n                                {\r\n                                    type: \"bi.horizontal_fill\",\r\n                                    columnSize: [0.6, 0.4],\r\n                                    cls: \"bi-split-top bi-split-right\",\r\n                                    items: [\r\n                                        {\r\n                                            el: this.fieldPane,\r\n                                        }, {\r\n                                            el: this.functionpane\r\n                                        },\r\n                                    ]\r\n                                }, {\r\n                                    el: this.describePane,\r\n                                }\r\n                            ]\r\n                        }\r\n                    }\r\n                ],\r\n                ref: function (_ref) {\r\n                    self.formulaPane = _ref;\r\n                }\r\n            };\r\n        }\r\n\r\n        return {\r\n            type: \"bi.horizontal_fill\",\r\n            columnSize: [\"\", \"fill\"],\r\n            items: [\r\n                {\r\n                    el: {\r\n                        type: \"bi.horizontal_fill\",\r\n                        cls: \"bi-split-right\",\r\n                        items: [\r\n                            {\r\n                                el: this.functionbutton\r\n                            }, {\r\n                                el: this.functionpane\r\n                            }\r\n                        ],\r\n                    }\r\n                },\r\n                {\r\n                    el: {\r\n                        type: \"bi.horizontal_fill\",\r\n                        columnSize: [\"\", \"fill\"],\r\n                        items: [\r\n                            {\r\n                                el: this.fieldPane,\r\n                            }, {\r\n                                type: \"bi.vertical_fill\",\r\n                                rowSize: [\"\", \"fill\", \"\"],\r\n                                cls: \"bi-split-left\",\r\n                                items: [\r\n                                    {\r\n                                        el: this.symbolgroup,\r\n                                    }, {\r\n                                        el: this.formulaedit,\r\n                                    }, {\r\n                                        el: this.describePane,\r\n                                    }\r\n                                ]\r\n                            }\r\n                        ],\r\n                    }\r\n                },\r\n            ],\r\n            ref: function (_ref) {\r\n                self.formulaPane = _ref;\r\n            }\r\n        };\r\n    },\r\n\r\n    mounted: function () {\r\n        var o = this.options;\r\n        if (BI.isNotNull(o.value)) {\r\n            this.setValue(o.value);\r\n        }\r\n    },\r\n\r\n    _getSortedResult: function (fieldItems) {\r\n        return BI.map(fieldItems, function (i, itemArray) {\r\n            return BI.Func.getSortedResult(itemArray, \"text\");\r\n        });\r\n    },\r\n\r\n    _getIconCls: function (field) {\r\n        if (field.iconCls) {\r\n            return field.iconCls;\r\n        }\r\n        var iconCls;\r\n        switch (field.fieldType) {\r\n            case BICst.COLUMN.STRING:\r\n                iconCls = 'string-field-font';\r\n                break;\r\n            case BICst.COLUMN.NUMBER:\r\n                iconCls = 'number-field-font';\r\n                break;\r\n            case BICst.COLUMN.DATE:\r\n                iconCls = 'date-field-font';\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        return iconCls;\r\n    },\r\n\r\n    _paramFormatter: function (fieldId) {\r\n        if (BI.has(this.fieldErrorValueTextMap, fieldId)) {\r\n            return \"<!\" + this.fieldErrorValueTextMap[fieldId] + \"!>\";\r\n        }\r\n\r\n        return this.fieldValueTextMap[fieldId];\r\n    },\r\n\r\n    _valueGetter: function (text) {\r\n        return this.fieldErrorTextValueMap[text] || this.fieldTextValueMap[text];\r\n    },\r\n\r\n    _getFunctionItems: function (v) {\r\n        var self = this, c = this.constants,\r\n            result = this._analyzeContent(v.replaceAll(/[\\'\\\"](.+?)[\\'\\\"]/g, \"\") || \"\") || [];\r\n        this.functionArray = [];\r\n        BI.each(result.reverse(), function (i, str) {\r\n            var func = self._getFunction(str);\r\n            if (BI.isNotEmptyObject(func) && !BI.some(self.functionArray, function (j, item) {\r\n                var text = item.text.toLowerCase();\r\n                var lowerString = str.toLowerCase();\r\n                return text === lowerString;\r\n            })) {\r\n                self.functionArray.push(func);\r\n            }\r\n        });\r\n\r\n        var items = [];\r\n        BI.each(this.functionArray, function (index, valueObj) {\r\n            var item = BI.createWidget({\r\n                    type: \"bi.vertical\",\r\n                    items: [{\r\n                        type: \"bi.label\",\r\n                        cls: \"cm-strong\",\r\n                        textAlign: \"left\",\r\n                        text: valueObj.text + \":\"\r\n                    }, {\r\n                        type: \"bi.label\",\r\n                        whiteSpace: \"normal\",\r\n                        textAlign: \"left\",\r\n                        text: valueObj.description\r\n                    }]\r\n                }\r\n            );\r\n            items.push(item);\r\n        });\r\n        this.describePane.populate(items.slice(0, 1));\r\n        if (BI.isEmptyArray(items)) {\r\n            this.describePane.setVisible(false);\r\n        } else {\r\n            if (!this.describePane.isVisible()) {\r\n                this.describePane.setVisible(true);\r\n            }\r\n        }\r\n    },\r\n\r\n    _reHsize: function (size) {\r\n        this.formulaPane.options.items[0].width = size;\r\n        this.formulaPane.resize();\r\n    },\r\n\r\n    _getFunction: function (str) {\r\n        return BI.find(this.model.functionItems, function (i, item) {\r\n            // BI-93848 如果带匹配列表中有直接相同的，匹配上\r\n            if (item.text === str) {\r\n                return true;\r\n            }\r\n            var text = item.text.toLowerCase();\r\n            var lowerString = str.toLowerCase();\r\n            //BI-51959 非直接相等的函数名不允许function字符串大小写混写\r\n            var upperString = str.toUpperCase();\r\n            var notMixedString = (upperString === str || lowerString === str);\r\n            return text === lowerString && notMixedString;\r\n        });\r\n    },\r\n\r\n    _checkValidation: function () {\r\n        var self = this, o = this.options;\r\n\r\n        var str = self.formulaedit.getCheckString();\r\n        var formula = self.getValue();\r\n        var usedFields = self.getUsedFields();\r\n\r\n        var allInvalidIds = BI.map(o.errorFieldItems, \"value\");\r\n\r\n        var isAllFieldNotInErrorFields = !BI.some(usedFields, function (index, fId) {\r\n            return BI.contains(allInvalidIds, fId);\r\n        });\r\n        var isAllFieldValid = isAllFieldNotInErrorFields;\r\n        if (isAllFieldNotInErrorFields) {\r\n            var allValidIds = BI.map(BI.flatten(o.fieldItems), \"value\");\r\n            isAllFieldValid = !BI.some(usedFields, function (index, fId) {\r\n                return !BI.contains(allValidIds, fId);\r\n            });\r\n        }\r\n\r\n        if (!isAllFieldValid) {\r\n            self.validation = BICst.FORMULA_STATE.FIELD_MISS;\r\n            self.showTip();\r\n            self.fireEvent(BI.FormulaInsert.EVENT_ERROR);\r\n        } else {\r\n            var checkId = BI.UUID();\r\n\r\n            self.store.setLastCheckId(checkId);\r\n\r\n            var checkResult = this.formulaedit.check(formula);\r\n            if (o.autoCheck && BI.isNotNull(checkResult)) {\r\n                var errorInfo = JSON.parse(checkResult.message);\r\n                this._dealCheckResult(checkId, formula, false, {\r\n                    errorCode: [],\r\n                    errorMessage: [errorInfo.errorText],\r\n                }, {\r\n                    usedFields: usedFields,\r\n                });\r\n            } else if (o.checkFormulaValidation) {\r\n                o.checkFormulaValidation({\r\n                    str: str,\r\n                    origin: formula,\r\n                    fieldsMap: this.fieldsDetailMap,\r\n                }, function (valid, response) {\r\n                    self._dealCheckResult(checkId, formula, valid, response, {\r\n                        usedFields: usedFields,\r\n                    });\r\n                });\r\n            } else {\r\n                self._dealCheckResult(checkId, formula, true, {}, {\r\n                    usedFields: usedFields,\r\n                });\r\n            }\r\n        }\r\n    },\r\n\r\n    _dealCheckResult: function (checkId, formula, valid, response, opt) {\r\n        opt = opt || {};\r\n        response = response || {};\r\n        this.errorMessage = [];\r\n        if (checkId !== this.model.lastCheckId) return;\r\n\r\n        var validState,\r\n            errorCode = response.errorCode,\r\n            errorMessage = response.errorMessage;\r\n\r\n        if (valid) {\r\n            validState = this.options.validationChecker(opt.usedFields, formula, response);\r\n        } else {\r\n            this.errorMessage = errorMessage;\r\n            if (BI.contains(errorCode, BICst.ErrorCode.FORMULA_ERROR.DIS_AGGRESSIVE_FUNCTION_HAS_FIELD_WITH_DETAIL_FILTER)) {\r\n                validState = BICst.FORMULA_STATE.DETAIL_FILTER_NOT_SUPPORT;\r\n            }\r\n        }\r\n\r\n        if (BI.isNull(validState)) {\r\n            validState = valid ? BICst.FORMULA_STATE.VALID : BICst.FORMULA_STATE.INVALID;\r\n        }\r\n\r\n        var validation = validState === BICst.FORMULA_STATE.VALID;\r\n\r\n        if (validation) {\r\n            this.validation = BICst.FORMULA_STATE.VALID;\r\n            this.hideTip();\r\n            this.fireEvent(BI.FormulaInsert.EVENT_CHANGE);\r\n            this.fireEvent(BI.FormulaInsert.EVENT_VALID);\r\n        } else {\r\n            this.validation = validState;\r\n            this.showTip();\r\n            this.fireEvent(BI.FormulaInsert.EVENT_ERROR);\r\n        }\r\n    },\r\n\r\n    _analyzeContent: function (v) {\r\n        // \\w*\\w 这是干啥呢, 至少匹配一次\\w ? 那可以用\\w+\r\n        var regx = /\\$[\\{][^\\}]*[\\}]|\\w+(\\.\\w+)*|\\$\\{[^\\$\\(\\)\\+\\-\\*\\/)\\$,]*\\w\\}|\\$\\{[^\\$\\(\\)\\+\\-\\*\\/]*\\w\\}|\\$\\{[^\\$\\(\\)\\+\\-\\*\\/]*[\\u4e00-\\u9fa5]\\}|\\w|(.)|\\n/g;\r\n        return v.match(regx);\r\n    },\r\n\r\n    _createFieldTextValueMap: function (fieldItems) {\r\n        var fieldMap = {};\r\n        BI.each(fieldItems, function (idx, typeItems) {\r\n            BI.each(typeItems, function (i, fieldItem) {\r\n                fieldMap[fieldItem.text] = fieldItem.value;\r\n            });\r\n        });\r\n        return fieldMap;\r\n    },\r\n\r\n    _createErrorTextValueMap: function () {\r\n        var fieldMap = {};\r\n        BI.each(this.options.errorFieldItems, function (idx, fieldItem) {\r\n            fieldMap[fieldItem.text] = fieldItem.value;\r\n        });\r\n        return fieldMap;\r\n    },\r\n\r\n    _createErrorValueTextMap: function () {\r\n        var fieldMap = {};\r\n        BI.each(this.options.errorFieldItems, function (idx, fieldItem) {\r\n            fieldMap[fieldItem.value] = fieldItem.text;\r\n        });\r\n        return fieldMap;\r\n    },\r\n\r\n    _createFieldValueTextMap: function (fieldItems) {\r\n        var fieldMap = {};\r\n        BI.each(fieldItems, function (idx, typeItems) {\r\n            BI.each(typeItems, function (i, fieldItem) {\r\n                fieldMap[fieldItem.value] = fieldItem.text;\r\n            });\r\n        });\r\n        return fieldMap;\r\n    },\r\n\r\n    _createFieldDetailMap: function (fieldItems) {\r\n        var fieldMap = {};\r\n        BI.each(fieldItems, function (idx, typeItems) {\r\n            BI.each(typeItems, function (i, fieldItem) {\r\n                var fType = fieldItem.fieldType;\r\n\r\n                switch (fType) {\r\n                    case BICst.FORMULA_WIDGET_FIELD_TYPE.DATE:\r\n                        fType = BICst.COLUMN.DATE;\r\n                        break;\r\n                    case BICst.FORMULA_WIDGET_FIELD_TYPE.STRING:\r\n                        fType = BICst.COLUMN.STRING;\r\n                        break;\r\n                    case BICst.FORMULA_WIDGET_FIELD_TYPE.NUMBER:\r\n                    case BICst.COLUMN.CALCULATE:\r\n                        fType = BICst.COLUMN.NUMBER;\r\n                        break;\r\n                    default:\r\n                }\r\n\r\n                fieldMap[fieldItem.value] = {\r\n                    type: fType,\r\n                    isAgg: fieldItem.isAgg || false,\r\n                    hasDetailFilter: fieldItem.hasDetailFilter || false,\r\n                    freeAggregate: fieldItem.freeAggregate || false\r\n                };\r\n            });\r\n        });\r\n        return fieldMap;\r\n    },\r\n\r\n    _bindFieldDragEvent: function () {\r\n        var self = this;\r\n        BI.each(self.fieldPane.getAllLeaves(), function (i, node) {\r\n            node.element.draggable({\r\n                cursorAt: { top: 5, left: 5 },\r\n                helper: function () {\r\n                    var hint = BI.createWidget({\r\n                        type: \"bi.helper\",\r\n                        value: node.getValue(),\r\n                        text: self.fieldValueTextMap[node.getValue()]\r\n                    });\r\n                    BI.createWidget({\r\n                        element: self,\r\n                        type: \"bi.default\",\r\n                        items: [hint]\r\n                    });\r\n                    hint.element.attr({\r\n                        fieldId: node.getValue(),\r\n                        field: self.fieldValueTextMap[node.getValue()]\r\n                    });\r\n                    return hint.element;\r\n\r\n                }\r\n            });\r\n        });\r\n    },\r\n\r\n    _bindFunctionDragEvent: function () {\r\n        var self = this;\r\n        BI.each(self.functionpane.getAllLeaves(), function (i, node) {\r\n            node.element.draggable({\r\n                cursorAt: { top: 5, left: 5 },\r\n                handle: \".draggable-handle\",\r\n                helper: function () {\r\n                    var hint = BI.createWidget({\r\n                        type: \"bi.helper\",\r\n                        value: node.getValue(),\r\n                        text: node.getValue()\r\n                    });\r\n                    BI.createWidget({\r\n                        element: self,\r\n                        type: \"bi.default\",\r\n                        items: [hint]\r\n                    });\r\n                    hint.element.attr({ func: node.getValue() });\r\n                    return hint.element;\r\n                }\r\n            });\r\n        });\r\n    },\r\n\r\n    _openFunctionPane: function () {\r\n        this.functionTriggerBtn.setIcon(\"formula-collapse\");\r\n        this.functionpane.setVisible(true);\r\n    },\r\n\r\n    _closeFunctionPane: function () {\r\n        this.functionTriggerBtn.setIcon(\"formula-expand\");\r\n        this.functionpane.setVisible(false);\r\n    },\r\n\r\n    checkValidation: function () {\r\n        return this.validation === BICst.FORMULA_STATE.VALID;\r\n    },\r\n\r\n    getErrorText: function () {\r\n        if (BI.isEmptyString(this.getValue())) {\r\n            return BI.i18nText(\"BI-Basic_Please_Add_Formula\");\r\n        }\r\n\r\n        if (BI.isNotEmptyArray(this.errorMessage)) {\r\n            return this.errorMessage.join(\"\\n\");\r\n        }\r\n\r\n        var errorText = \"\";\r\n        switch (this.validation) {\r\n            case BICst.FORMULA_STATE.DETAIL_FILTER_NOT_SUPPORT:\r\n                errorText = BI.i18nText(\"BI-Design_Formula_Not_Support_Detail_Filter\");\r\n                break;\r\n            case BICst.FORMULA_STATE.AGG_INVALID:\r\n                errorText = BI.i18nText(\"BI-Design_Detail_Table_Not_Support_AGG\");\r\n                break;\r\n            case BICst.FORMULA_STATE.FIXED_INVALID:\r\n                errorText = BI.i18nText(\"BI-Design_Detail_Table_Not_Support_Fixed\");\r\n                break;\r\n            case BICst.FORMULA_STATE.FIELD_MISS:\r\n                errorText = BI.i18nText(\"BI-Basic_Field_Cannot_Find\");\r\n                break;\r\n            case BICst.FORMULA_STATE.NOT_SUPPORT_STRING_OR_DATE:\r\n                errorText = BI.i18nText(\"BI-Design_Not_Support_Date_Or_String\");\r\n                break;\r\n            case BICst.FORMULA_STATE.RAPID_INVALID:\r\n                errorText = BI.i18nText(\"BI-Design_Detail_Table_Not_Support_Rapid\");\r\n                break;\r\n            default:\r\n                errorText = BI.i18nText(\"BI-Basic_Formula_Invalid\");\r\n        }\r\n\r\n        return errorText;\r\n    },\r\n\r\n    showTip: function () {\r\n        // if (BI.isNull(this.errorTip)) return;\r\n        // this.errorText.setValue(errorText);\r\n\r\n        // this.errorTip.setVisible(true);\r\n        // this.normalTip.setVisible(false);\r\n        this.formulaedit.showTip(this.getErrorText());\r\n    },\r\n\r\n    hideTip: function () {\r\n        // if (BI.isNull(this.errorTip)) return;\r\n        // this.normalTip.setVisible(this.checkValidation());\r\n        // this.errorTip.setVisible(false);\r\n        this.formulaedit.hideTip();\r\n    },\r\n\r\n    refresh: function () {\r\n        this.formulaedit.refresh();\r\n    },\r\n\r\n    setValue: function (v) {\r\n        this.formulaedit.refresh();\r\n        this.formulaedit.setValue(v);\r\n        this._checkValidation();\r\n    },\r\n\r\n    getFormulaString: function () {\r\n        return this.formulaedit.getFormulaString();\r\n    },\r\n\r\n    getUsedFields: function () {\r\n        return this.formulaedit.getUsedFields();\r\n    },\r\n\r\n    setFormulaFieldType: function (v) {\r\n        return this.symbolgroup.setValue(v);\r\n    },\r\n\r\n    getFormulaFieldType: function () {\r\n        return this.symbolgroup.getValue();\r\n    },\r\n\r\n    getValue: function () {\r\n        return this.formulaedit.getValue();\r\n    },\r\n    populate: function (fieldItems) {\r\n        this.options.fieldItems = fieldItems;\r\n        this.fieldTextValueMap = this._createFieldTextValueMap(fieldItems);\r\n        this.fieldValueTextMap = this._createFieldValueTextMap(fieldItems);\r\n        this.fieldErrorTextValueMap = this._createErrorTextValueMap();\r\n        this.fieldErrorValueTextMap = this._createErrorValueTextMap();\r\n        this.fieldsDetailMap = this._createFieldDetailMap(fieldItems);\r\n        this.fieldPane.populate(fieldItems);\r\n        this._bindFieldDragEvent();\r\n    }\r\n\r\n\r\n});\r\nBI.FormulaInsert.EVENT_VALID = \"EVENT_VALID\";\r\nBI.FormulaInsert.EVENT_ERROR = \"EVENT_ERROR\";\r\nBI.FormulaInsert.EVENT_CHANGE = \"EVENT_CHANGE\";\r\nBI.FormulaInsert.EVENT_TYPE_CHANGE = \"EVENT_TYPE_CHANGE\";\r\nBI.shortcut(\"bi.formula_insert\", BI.FormulaInsert);\r\n","!(function () {\r\n    var Model = BI.inherit(Fix.Model, {\r\n\r\n        childContext: [\"fieldKeyword\", \"functionKeyword\", \"functionTypes\"],\r\n\r\n        state: function () {\r\n            var o = this.options;\r\n\r\n            return {\r\n                fieldItems: o.fieldItems,\r\n                fieldKeyword: \"\",\r\n                functionKeyword: \"\",\r\n                functionTypes: o.functionTypes,\r\n                lastCheckId: null,\r\n            };\r\n        },\r\n\r\n        computed: {\r\n            allFieldItems: function () {\r\n                return BI.flatten(this.options.fieldItems);\r\n            },\r\n            numberFieldItems: function () {\r\n                return BI.filter(this.model.allFieldItems, function (index, fieldItem) {\r\n                    return fieldItem.fieldType === BICst.COLUMN.NUMBER;\r\n                });\r\n            },\r\n            numberFieldIds: function () {\r\n                return BI.map(this.model.numberFieldItems, \"value\");\r\n            },\r\n            stringFieldItems: function () {\r\n                return BI.filter(this.model.allFieldItems, function (index, fieldItem) {\r\n                    return fieldItem.fieldType === BICst.COLUMN.STRING;\r\n                });\r\n            },\r\n            stringFieldIds: function () {\r\n                return BI.map(this.model.stringFieldItems, \"value\");\r\n            },\r\n            dateFieldItems: function () {\r\n                return BI.filter(this.model.allFieldItems, function (index, fieldItem) {\r\n                    return fieldItem.fieldType === BICst.COLUMN.DATE;\r\n                });\r\n            },\r\n            dateFieldIds: function () {\r\n                return BI.map(this.model.dateFieldItems, \"value\");\r\n            },\r\n            functionItems: function () {\r\n                var self = this;\r\n                var functionObjs = this.options.formulaJSONGetter();\r\n                var functionItems = [];\r\n                var service = BI.Services.getService(\"bi.service.material.formula_insert\");\r\n\r\n                BI.each(functionObjs, function (i, functionObj) {\r\n                    if (self.model.functionTypes.includes(functionObj.type)) {\r\n                        functionItems.push({\r\n                            text: functionObj.name,\r\n                            value: functionObj.name,\r\n                            fieldType: service.getFunctionValueByType(functionObj.type),\r\n                            description: functionObj.def,\r\n                        });\r\n                    }\r\n                });\r\n\r\n                return functionItems;\r\n            },\r\n            availableFunctions: function () {\r\n                return BI.map(this.model.functionItems, \"value\");\r\n            }\r\n        },\r\n\r\n        actions: {\r\n            insertOperator: function (v) {\r\n\r\n            },\r\n            inputOperator: function (v) {\r\n\r\n            },\r\n            insertField: function (v) {\r\n\r\n            },\r\n            insertFunction: function (func) {\r\n\r\n            },\r\n            insertDragFunction: function (id) {\r\n\r\n            },\r\n            insertDragField: function (fieldId) {\r\n\r\n            },\r\n            addFunctionType: function (type) {\r\n                this.model.functionTypes.push(type);\r\n            },\r\n            setLastCheckId: function (value) {\r\n                this.model.lastCheckId = value;\r\n            }\r\n        }\r\n    });\r\n    BI.model(\"bi.model.material.formula_insert\", Model);\r\n})();\r\n","!(function () {\r\n    var Service = BI.inherit(BI.OB, {\r\n        getFunctionValueByType: function (functionType) {\r\n            switch (functionType) {\r\n                case \"MATH\":\r\n                    return BICst.FUNCTION.MATH;\r\n                case \"TEXT\":\r\n                    return BICst.FUNCTION.TEXT;\r\n                case \"DATETIME\":\r\n                    return BICst.FUNCTION.DATE;\r\n                case \"ARRAY\":\r\n                    return BICst.FUNCTION.ARRAY;\r\n                case \"LOGIC\":\r\n                    return BICst.FUNCTION.LOGIC;\r\n                case \"AGG\":\r\n                    return BICst.FUNCTION.AGG;\r\n                case \"COMMON\":\r\n                    return BICst.FUNCTION.COMMON;\r\n                case \"TABLE_CAL\":\r\n                    return BICst.FUNCTION.TABLE_CAL;\r\n                case \"ANALYSIS\":\r\n                    return BICst.FUNCTION.ANALYSIS;\r\n                case \"OTHER\":\r\n                    return BICst.FUNCTION.OTHER;\r\n                case \"FIXED_CAL\":\r\n                    return BICst.FUNCTION.FIXED_CAL;\r\n                default:\r\n                    return;\r\n            }\r\n        }\r\n    });\r\n    BI.service(\"bi.service.material.formula_insert\", Service);\r\n})();","/**\r\n * @author: Teller\r\n * @createdAt: 2018/7/6 下午1:59\r\n * @Description\r\n*/\r\n\r\n!(function () {\r\n    var Button = BI.inherit(BI.BasicButton, {\r\n\r\n        props: {\r\n            baseCls: \"bi-components-formula-text-func-button cursor-pointer\",\r\n            $testId: \"bi-components-formula-text-func-button\"\r\n        },\r\n\r\n        render: function () {\r\n            return {\r\n                type: \"bi.horizontal_adapt\",\r\n                items: [{\r\n                    type: \"bi.text_button\",\r\n                    textWidth: 13,\r\n                    textHeight: 18,\r\n                    whiteSpace: \"normal\",\r\n                    text: BI.i18nText(\"BI-Basic_Function\")\r\n                }]\r\n            };\r\n        }\r\n    });\r\n    BI.shortcut(\"bi.components.formula.text_func_button\", Button);\r\n})();\r\n","require(\"!!E:\\\\Jenkins\\\\workspace\\\\auto-pack\\\\fineui-materials\\\\feature-x\\\\fineui-materials\\\\node_modules\\\\script-loader\\\\addScript.js\")(require(\"!!E:\\\\Jenkins\\\\workspace\\\\auto-pack\\\\fineui-materials\\\\feature-x\\\\fineui-materials\\\\node_modules\\\\raw-loader\\\\index.js!E:\\\\Jenkins\\\\workspace\\\\auto-pack\\\\fineui-materials\\\\feature-x\\\\fineui-materials\\\\src\\\\js\\\\components\\\\foundation\\\\svg\\\\raphael.js\"))","/**\r\n * svg绘图\r\n *\r\n * Created by GUY on 2015/12/3.\r\n * @class BI.Svg\r\n * @extends BI.Widget\r\n */\r\nBI.Svg = BI.inherit(BI.Widget, {\r\n\r\n    _defaultConfig: function () {\r\n        return BI.extend(BI.Svg.superclass._defaultConfig.apply(this, arguments), {\r\n            baseCls: \"bi-svg\"\r\n        });\r\n    },\r\n\r\n    _init: function () {\r\n        BI.Svg.superclass._init.apply(this, arguments);\r\n        this.paper = Raphael(this.element[0]);\r\n\r\n        this.element.css(\"overflow\", \"hidden\");\r\n        BI.$(this.paper.canvas).width(\"100%\").height(\"100%\").css({left: \"0\", top: \"0\"}).appendTo(this.element);\r\n\r\n        this.top = this.paper.top;\r\n        this.bottom = this.paper.bottom;\r\n        this.customAttributes = this.paper.customAttributes;\r\n        this.ca = this.paper.ca;\r\n        this.raphael = this.paper.raphael;\r\n    },\r\n\r\n    add: function () {\r\n        return this.paper.add.apply(this.paper, arguments);\r\n    },\r\n\r\n    path: function () {\r\n        return this.paper.path.apply(this.paper, arguments);\r\n    },\r\n\r\n    image: function () {\r\n        return this.paper.image.apply(this.paper, arguments);\r\n    },\r\n\r\n    rect: function () {\r\n        return this.paper.rect.apply(this.paper, arguments);\r\n    },\r\n\r\n    circle: function () {\r\n        return this.paper.circle.apply(this.paper, arguments);\r\n    },\r\n\r\n    ellipse: function () {\r\n        return this.paper.ellipse.apply(this.paper, arguments);\r\n    },\r\n\r\n    text: function () {\r\n        return this.paper.text.apply(this.paper, arguments);\r\n    },\r\n\r\n    print: function () {\r\n        return this.paper.print.apply(this.paper, arguments);\r\n    },\r\n\r\n\r\n    setStart: function () {\r\n        return this.paper.setStart.apply(this.paper, arguments);\r\n    },\r\n\r\n    setFinish: function () {\r\n        return this.paper.setFinish.apply(this.paper, arguments);\r\n    },\r\n\r\n    setSize: function () {\r\n        return this.paper.setSize.apply(this.paper, arguments);\r\n    },\r\n\r\n    setViewBox: function () {\r\n        return this.paper.setViewBox.apply(this.paper, arguments);\r\n    },\r\n\r\n\r\n    getById: function () {\r\n        return this.paper.getById.apply(this.paper, arguments);\r\n    },\r\n\r\n    getElementByPoint: function () {\r\n        return this.paper.getElementByPoint.apply(this.paper, arguments);\r\n    },\r\n\r\n    getElementsByPoint: function () {\r\n        return this.paper.getElementsByPoint.apply(this.paper, arguments);\r\n    },\r\n\r\n    getFont: function () {\r\n        return this.paper.getFont.apply(this.paper, arguments);\r\n    },\r\n\r\n\r\n    set: function () {\r\n        return this.paper.set.apply(this.paper, arguments);\r\n    },\r\n    remove: function () {\r\n        return this.paper.remove.apply(this.paper, arguments);\r\n    },\r\n    clear: function () {\r\n        return this.paper.clear.apply(this.paper, arguments);\r\n    }\r\n});\r\nBI.shortcut(\"bi.svg\", BI.Svg);","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"Draggable\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Draggable\"] = factory();\n\telse\n\t\troot[\"Draggable\"] = factory();\n})(window, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// define __esModule on exports\n/******/ \t__webpack_require__.r = function(exports) {\n/******/ \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t}\n/******/ \t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t};\n/******/\n/******/ \t// create a fake namespace object\n/******/ \t// mode & 1: value is a module id, require it\n/******/ \t// mode & 2: merge all properties of value into the ns\n/******/ \t// mode & 4: return value when already ns object\n/******/ \t// mode & 8|1: behave like require\n/******/ \t__webpack_require__.t = function(value, mode) {\n/******/ \t\tif(mode & 1) value = __webpack_require__(value);\n/******/ \t\tif(mode & 8) return value;\n/******/ \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n/******/ \t\tvar ns = Object.create(null);\n/******/ \t\t__webpack_require__.r(ns);\n/******/ \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n/******/ \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n/******/ \t\treturn ns;\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 66);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _AbstractEvent = __webpack_require__(64);\n\nvar _AbstractEvent2 = _interopRequireDefault(_AbstractEvent);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _AbstractEvent2.default;\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _AbstractPlugin = __webpack_require__(60);\n\nvar _AbstractPlugin2 = _interopRequireDefault(_AbstractPlugin);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _AbstractPlugin2.default;\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _closest = __webpack_require__(51);\n\nObject.defineProperty(exports, 'closest', {\n  enumerable: true,\n  get: function () {\n    return _interopRequireDefault(_closest).default;\n  }\n});\n\nvar _requestNextAnimationFrame = __webpack_require__(49);\n\nObject.defineProperty(exports, 'requestNextAnimationFrame', {\n  enumerable: true,\n  get: function () {\n    return _interopRequireDefault(_requestNextAnimationFrame).default;\n  }\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _SensorEvent = __webpack_require__(44);\n\nObject.keys(_SensorEvent).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function () {\n      return _SensorEvent[key];\n    }\n  });\n});\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _Sensor = __webpack_require__(47);\n\nvar _Sensor2 = _interopRequireDefault(_Sensor);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _Sensor2.default;\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _DragEvent = __webpack_require__(14);\n\nObject.keys(_DragEvent).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function () {\n      return _DragEvent[key];\n    }\n  });\n});\n\nvar _DraggableEvent = __webpack_require__(13);\n\nObject.keys(_DraggableEvent).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function () {\n      return _DraggableEvent[key];\n    }\n  });\n});\n\nvar _Plugins = __webpack_require__(12);\n\nObject.keys(_Plugins).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function () {\n      return _Plugins[key];\n    }\n  });\n});\n\nvar _Sensors = __webpack_require__(6);\n\nObject.keys(_Sensors).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function () {\n      return _Sensors[key];\n    }\n  });\n});\n\nvar _Draggable = __webpack_require__(37);\n\nvar _Draggable2 = _interopRequireDefault(_Draggable);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _Draggable2.default;\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _Sensor = __webpack_require__(4);\n\nObject.defineProperty(exports, 'Sensor', {\n  enumerable: true,\n  get: function () {\n    return _interopRequireDefault(_Sensor).default;\n  }\n});\n\nvar _MouseSensor = __webpack_require__(46);\n\nObject.defineProperty(exports, 'MouseSensor', {\n  enumerable: true,\n  get: function () {\n    return _interopRequireDefault(_MouseSensor).default;\n  }\n});\n\nvar _TouchSensor = __webpack_require__(43);\n\nObject.defineProperty(exports, 'TouchSensor', {\n  enumerable: true,\n  get: function () {\n    return _interopRequireDefault(_TouchSensor).default;\n  }\n});\n\nvar _DragSensor = __webpack_require__(41);\n\nObject.defineProperty(exports, 'DragSensor', {\n  enumerable: true,\n  get: function () {\n    return _interopRequireDefault(_DragSensor).default;\n  }\n});\n\nvar _ForceTouchSensor = __webpack_require__(39);\n\nObject.defineProperty(exports, 'ForceTouchSensor', {\n  enumerable: true,\n  get: function () {\n    return _interopRequireDefault(_ForceTouchSensor).default;\n  }\n});\n\nvar _SensorEvent = __webpack_require__(3);\n\nObject.keys(_SensorEvent).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function () {\n      return _SensorEvent[key];\n    }\n  });\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _SnappableEvent = __webpack_require__(18);\n\nObject.keys(_SnappableEvent).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function () {\n      return _SnappableEvent[key];\n    }\n  });\n});\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _CollidableEvent = __webpack_require__(23);\n\nObject.keys(_CollidableEvent).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function () {\n      return _CollidableEvent[key];\n    }\n  });\n});\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _SortableEvent = __webpack_require__(27);\n\nObject.keys(_SortableEvent).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function () {\n      return _SortableEvent[key];\n    }\n  });\n});\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _SwappableEvent = __webpack_require__(30);\n\nObject.keys(_SwappableEvent).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function () {\n      return _SwappableEvent[key];\n    }\n  });\n});\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _DroppableEvent = __webpack_require__(33);\n\nObject.keys(_DroppableEvent).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function () {\n      return _DroppableEvent[key];\n    }\n  });\n});\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _Announcement = __webpack_require__(62);\n\nObject.defineProperty(exports, 'Announcement', {\n  enumerable: true,\n  get: function () {\n    return _interopRequireDefault(_Announcement).default;\n  }\n});\nObject.defineProperty(exports, 'defaultAnnouncementOptions', {\n  enumerable: true,\n  get: function () {\n    return _Announcement.defaultOptions;\n  }\n});\n\nvar _Focusable = __webpack_require__(59);\n\nObject.defineProperty(exports, 'Focusable', {\n  enumerable: true,\n  get: function () {\n    return _interopRequireDefault(_Focusable).default;\n  }\n});\n\nvar _Mirror = __webpack_require__(57);\n\nObject.defineProperty(exports, 'Mirror', {\n  enumerable: true,\n  get: function () {\n    return _interopRequireDefault(_Mirror).default;\n  }\n});\nObject.defineProperty(exports, 'defaultMirrorOptions', {\n  enumerable: true,\n  get: function () {\n    return _Mirror.defaultOptions;\n  }\n});\n\nvar _Scrollable = __webpack_require__(53);\n\nObject.defineProperty(exports, 'Scrollable', {\n  enumerable: true,\n  get: function () {\n    return _interopRequireDefault(_Scrollable).default;\n  }\n});\nObject.defineProperty(exports, 'defaultScrollableOptions', {\n  enumerable: true,\n  get: function () {\n    return _Scrollable.defaultOptions;\n  }\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _DraggableEvent = __webpack_require__(63);\n\nObject.keys(_DraggableEvent).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function () {\n      return _DraggableEvent[key];\n    }\n  });\n});\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _DragEvent = __webpack_require__(65);\n\nObject.keys(_DragEvent).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function () {\n      return _DragEvent[key];\n    }\n  });\n});\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.defaultOptions = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _AbstractPlugin = __webpack_require__(1);\n\nvar _AbstractPlugin2 = _interopRequireDefault(_AbstractPlugin);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst onSortableSorted = Symbol('onSortableSorted');\n\n/**\n * SwapAnimation default options\n * @property {Object} defaultOptions\n * @property {Number} defaultOptions.duration\n * @property {String} defaultOptions.easingFunction\n * @property {Boolean} defaultOptions.horizontal\n * @type {Object}\n */\nconst defaultOptions = exports.defaultOptions = {\n  duration: 150,\n  easingFunction: 'ease-in-out',\n  horizontal: false\n};\n\n/**\n * SwapAnimation plugin adds swap animations for sortable\n * @class SwapAnimation\n * @module SwapAnimation\n * @extends AbstractPlugin\n */\nclass SwapAnimation extends _AbstractPlugin2.default {\n  /**\n   * SwapAnimation constructor.\n   * @constructs SwapAnimation\n   * @param {Draggable} draggable - Draggable instance\n   */\n  constructor(draggable) {\n    super(draggable);\n\n    /**\n     * SwapAnimation options\n     * @property {Object} options\n     * @property {Number} defaultOptions.duration\n     * @property {String} defaultOptions.easingFunction\n     * @type {Object}\n     */\n    this.options = _extends({}, defaultOptions, this.getOptions());\n\n    /**\n     * Last animation frame\n     * @property {Number} lastAnimationFrame\n     * @type {Number}\n     */\n    this.lastAnimationFrame = null;\n\n    this[onSortableSorted] = this[onSortableSorted].bind(this);\n  }\n\n  /**\n   * Attaches plugins event listeners\n   */\n  attach() {\n    this.draggable.on('sortable:sorted', this[onSortableSorted]);\n  }\n\n  /**\n   * Detaches plugins event listeners\n   */\n  detach() {\n    this.draggable.off('sortable:sorted', this[onSortableSorted]);\n  }\n\n  /**\n   * Returns options passed through draggable\n   * @return {Object}\n   */\n  getOptions() {\n    return this.draggable.options.swapAnimation || {};\n  }\n\n  /**\n   * Sortable sorted handler\n   * @param {SortableSortedEvent} sortableEvent\n   * @private\n   */\n  [onSortableSorted]({ oldIndex, newIndex, dragEvent }) {\n    const { source, over } = dragEvent;\n\n    cancelAnimationFrame(this.lastAnimationFrame);\n\n    // Can be done in a separate frame\n    this.lastAnimationFrame = requestAnimationFrame(() => {\n      if (oldIndex >= newIndex) {\n        animate(source, over, this.options);\n      } else {\n        animate(over, source, this.options);\n      }\n    });\n  }\n}\n\nexports.default = SwapAnimation; /**\n                                  * Animates two elements\n                                  * @param {HTMLElement} from\n                                  * @param {HTMLElement} to\n                                  * @param {Object} options\n                                  * @param {Number} options.duration\n                                  * @param {String} options.easingFunction\n                                  * @param {String} options.horizontal\n                                  * @private\n                                  */\n\nfunction animate(from, to, { duration, easingFunction, horizontal }) {\n  for (const element of [from, to]) {\n    element.style.pointerEvents = 'none';\n  }\n\n  if (horizontal) {\n    const width = from.offsetWidth;\n    from.style.transform = `translate3d(${width}px, 0, 0)`;\n    to.style.transform = `translate3d(-${width}px, 0, 0)`;\n  } else {\n    const height = from.offsetHeight;\n    from.style.transform = `translate3d(0, ${height}px, 0)`;\n    to.style.transform = `translate3d(0, -${height}px, 0)`;\n  }\n\n  requestAnimationFrame(() => {\n    for (const element of [from, to]) {\n      element.addEventListener('transitionend', resetElementOnTransitionEnd);\n      element.style.transition = `transform ${duration}ms ${easingFunction}`;\n      element.style.transform = '';\n    }\n  });\n}\n\n/**\n * Resets animation style properties after animation has completed\n * @param {Event} event\n * @private\n */\nfunction resetElementOnTransitionEnd(event) {\n  event.target.style.transition = '';\n  event.target.style.pointerEvents = '';\n  event.target.removeEventListener('transitionend', resetElementOnTransitionEnd);\n}\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.defaultOptions = undefined;\n\nvar _SwapAnimation = __webpack_require__(15);\n\nvar _SwapAnimation2 = _interopRequireDefault(_SwapAnimation);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _SwapAnimation2.default;\nexports.defaultOptions = _SwapAnimation.defaultOptions;\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _AbstractPlugin = __webpack_require__(1);\n\nvar _AbstractPlugin2 = _interopRequireDefault(_AbstractPlugin);\n\nvar _SnappableEvent = __webpack_require__(7);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst onDragStart = Symbol('onDragStart');\nconst onDragStop = Symbol('onDragStop');\nconst onDragOver = Symbol('onDragOver');\nconst onDragOut = Symbol('onDragOut');\nconst onMirrorCreated = Symbol('onMirrorCreated');\nconst onMirrorDestroy = Symbol('onMirrorDestroy');\n\n/**\n * Snappable plugin which snaps draggable elements into place\n * @class Snappable\n * @module Snappable\n * @extends AbstractPlugin\n */\nclass Snappable extends _AbstractPlugin2.default {\n  /**\n   * Snappable constructor.\n   * @constructs Snappable\n   * @param {Draggable} draggable - Draggable instance\n   */\n  constructor(draggable) {\n    super(draggable);\n\n    /**\n     * Keeps track of the first source element\n     * @property {HTMLElement|null} firstSource\n     */\n    this.firstSource = null;\n\n    /**\n     * Keeps track of the mirror element\n     * @property {HTMLElement} mirror\n     */\n    this.mirror = null;\n\n    this[onDragStart] = this[onDragStart].bind(this);\n    this[onDragStop] = this[onDragStop].bind(this);\n    this[onDragOver] = this[onDragOver].bind(this);\n    this[onDragOut] = this[onDragOut].bind(this);\n    this[onMirrorCreated] = this[onMirrorCreated].bind(this);\n    this[onMirrorDestroy] = this[onMirrorDestroy].bind(this);\n  }\n\n  /**\n   * Attaches plugins event listeners\n   */\n  attach() {\n    this.draggable.on('drag:start', this[onDragStart]).on('drag:stop', this[onDragStop]).on('drag:over', this[onDragOver]).on('drag:out', this[onDragOut]).on('droppable:over', this[onDragOver]).on('droppable:out', this[onDragOut]).on('mirror:created', this[onMirrorCreated]).on('mirror:destroy', this[onMirrorDestroy]);\n  }\n\n  /**\n   * Detaches plugins event listeners\n   */\n  detach() {\n    this.draggable.off('drag:start', this[onDragStart]).off('drag:stop', this[onDragStop]).off('drag:over', this[onDragOver]).off('drag:out', this[onDragOut]).off('droppable:over', this[onDragOver]).off('droppable:out', this[onDragOut]).off('mirror:created', this[onMirrorCreated]).off('mirror:destroy', this[onMirrorDestroy]);\n  }\n\n  /**\n   * Drag start handler\n   * @private\n   * @param {DragStartEvent} event - Drag start event\n   */\n  [onDragStart](event) {\n    if (event.canceled()) {\n      return;\n    }\n\n    this.firstSource = event.source;\n  }\n\n  /**\n   * Drag stop handler\n   * @private\n   * @param {DragStopEvent} event - Drag stop event\n   */\n  [onDragStop]() {\n    this.firstSource = null;\n  }\n\n  /**\n   * Drag over handler\n   * @private\n   * @param {DragOverEvent|DroppableOverEvent} event - Drag over event\n   */\n  [onDragOver](event) {\n    if (event.canceled()) {\n      return;\n    }\n\n    const source = event.source || event.dragEvent.source;\n\n    if (source === this.firstSource) {\n      this.firstSource = null;\n      return;\n    }\n\n    const snapInEvent = new _SnappableEvent.SnapInEvent({\n      dragEvent: event,\n      snappable: event.over || event.droppable\n    });\n\n    this.draggable.trigger(snapInEvent);\n\n    if (snapInEvent.canceled()) {\n      return;\n    }\n\n    if (this.mirror) {\n      this.mirror.style.display = 'none';\n    }\n\n    source.classList.remove(this.draggable.getClassNameFor('source:dragging'));\n    source.classList.add(this.draggable.getClassNameFor('source:placed'));\n\n    // Need to cancel this in drag out\n    setTimeout(() => {\n      source.classList.remove(this.draggable.getClassNameFor('source:placed'));\n    }, this.draggable.options.placedTimeout);\n  }\n\n  /**\n   * Drag out handler\n   * @private\n   * @param {DragOutEvent|DroppableOutEvent} event - Drag out event\n   */\n  [onDragOut](event) {\n    if (event.canceled()) {\n      return;\n    }\n\n    const source = event.source || event.dragEvent.source;\n\n    const snapOutEvent = new _SnappableEvent.SnapOutEvent({\n      dragEvent: event,\n      snappable: event.over || event.droppable\n    });\n\n    this.draggable.trigger(snapOutEvent);\n\n    if (snapOutEvent.canceled()) {\n      return;\n    }\n\n    if (this.mirror) {\n      this.mirror.style.display = '';\n    }\n\n    source.classList.add(this.draggable.getClassNameFor('source:dragging'));\n  }\n\n  /**\n   * Mirror created handler\n   * @param {MirrorCreatedEvent} mirrorEvent\n   * @private\n   */\n  [onMirrorCreated]({ mirror }) {\n    this.mirror = mirror;\n  }\n\n  /**\n   * Mirror destroy handler\n   * @param {MirrorDestroyEvent} mirrorEvent\n   * @private\n   */\n  [onMirrorDestroy]() {\n    this.mirror = null;\n  }\n}\nexports.default = Snappable;\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SnapOutEvent = exports.SnapInEvent = exports.SnapEvent = undefined;\n\nvar _AbstractEvent = __webpack_require__(0);\n\nvar _AbstractEvent2 = _interopRequireDefault(_AbstractEvent);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Base snap event\n * @class SnapEvent\n * @module SnapEvent\n * @extends AbstractEvent\n */\nclass SnapEvent extends _AbstractEvent2.default {\n\n  /**\n   * Drag event that triggered this snap event\n   * @property dragEvent\n   * @type {DragEvent}\n   * @readonly\n   */\n  get dragEvent() {\n    return this.data.dragEvent;\n  }\n\n  /**\n   * Snappable element\n   * @property snappable\n   * @type {HTMLElement}\n   * @readonly\n   */\n  get snappable() {\n    return this.data.snappable;\n  }\n}\n\nexports.SnapEvent = SnapEvent; /**\n                                * Snap in event\n                                * @class SnapInEvent\n                                * @module SnapInEvent\n                                * @extends SnapEvent\n                                */\n\nSnapEvent.type = 'snap';\nclass SnapInEvent extends SnapEvent {}\n\nexports.SnapInEvent = SnapInEvent; /**\n                                    * Snap out event\n                                    * @class SnapOutEvent\n                                    * @module SnapOutEvent\n                                    * @extends SnapEvent\n                                    */\n\nSnapInEvent.type = 'snap:in';\nSnapInEvent.cancelable = true;\nclass SnapOutEvent extends SnapEvent {}\nexports.SnapOutEvent = SnapOutEvent;\nSnapOutEvent.type = 'snap:out';\nSnapOutEvent.cancelable = true;\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _SnappableEvent = __webpack_require__(7);\n\nObject.keys(_SnappableEvent).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function () {\n      return _SnappableEvent[key];\n    }\n  });\n});\n\nvar _Snappable = __webpack_require__(17);\n\nvar _Snappable2 = _interopRequireDefault(_Snappable);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _Snappable2.default;\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.defaultOptions = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _AbstractPlugin = __webpack_require__(1);\n\nvar _AbstractPlugin2 = _interopRequireDefault(_AbstractPlugin);\n\nvar _utils = __webpack_require__(2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst onMirrorCreated = Symbol('onMirrorCreated');\nconst onMirrorDestroy = Symbol('onMirrorDestroy');\nconst onDragOver = Symbol('onDragOver');\nconst resize = Symbol('resize');\n\n/**\n * ResizeMirror default options\n * @property {Object} defaultOptions\n * @type {Object}\n */\nconst defaultOptions = exports.defaultOptions = {};\n\n/**\n * The ResizeMirror plugin resizes the mirror element to the dimensions of the draggable element that the mirror is hovering over\n * @class ResizeMirror\n * @module ResizeMirror\n * @extends AbstractPlugin\n */\nclass ResizeMirror extends _AbstractPlugin2.default {\n  /**\n   * ResizeMirror constructor.\n   * @constructs ResizeMirror\n   * @param {Draggable} draggable - Draggable instance\n   */\n  constructor(draggable) {\n    super(draggable);\n\n    /**\n     * ResizeMirror options\n     * @property {Object} options\n     * @type {Object}\n     */\n    this.options = _extends({}, defaultOptions, this.getOptions());\n\n    /**\n     * ResizeMirror remembers the last width when resizing the mirror\n     * to avoid additional writes to the DOM\n     * @property {number} lastWidth\n     */\n    this.lastWidth = 0;\n\n    /**\n     * ResizeMirror remembers the last height when resizing the mirror\n     * to avoid additional writes to the DOM\n     * @property {number} lastHeight\n     */\n    this.lastHeight = 0;\n\n    /**\n     * Keeps track of the mirror element\n     * @property {HTMLElement} mirror\n     */\n    this.mirror = null;\n\n    this[onMirrorCreated] = this[onMirrorCreated].bind(this);\n    this[onMirrorDestroy] = this[onMirrorDestroy].bind(this);\n    this[onDragOver] = this[onDragOver].bind(this);\n  }\n\n  /**\n   * Attaches plugins event listeners\n   */\n  attach() {\n    this.draggable.on('mirror:created', this[onMirrorCreated]).on('drag:over', this[onDragOver]).on('drag:over:container', this[onDragOver]);\n  }\n\n  /**\n   * Detaches plugins event listeners\n   */\n  detach() {\n    this.draggable.off('mirror:created', this[onMirrorCreated]).off('mirror:destroy', this[onMirrorDestroy]).off('drag:over', this[onDragOver]).off('drag:over:container', this[onDragOver]);\n  }\n\n  /**\n   * Returns options passed through draggable\n   * @return {Object}\n   */\n  getOptions() {\n    return this.draggable.options.resizeMirror || {};\n  }\n\n  /**\n   * Mirror created handler\n   * @param {MirrorCreatedEvent} mirrorEvent\n   * @private\n   */\n  [onMirrorCreated]({ mirror }) {\n    this.mirror = mirror;\n  }\n\n  /**\n   * Mirror destroy handler\n   * @param {MirrorDestroyEvent} mirrorEvent\n   * @private\n   */\n  [onMirrorDestroy]() {\n    this.mirror = null;\n  }\n\n  /**\n   * Drag over handler\n   * @param {DragOverEvent | DragOverContainer} dragEvent\n   * @private\n   */\n  [onDragOver](dragEvent) {\n    this[resize](dragEvent);\n  }\n\n  /**\n   * Resize function for\n   * @param {DragOverEvent | DragOverContainer} dragEvent\n   * @private\n   */\n  [resize]({ overContainer, over }) {\n    requestAnimationFrame(() => {\n      if (this.mirror.parentNode !== overContainer) {\n        overContainer.appendChild(this.mirror);\n      }\n\n      const overElement = over || this.draggable.getDraggableElementsForContainer(overContainer)[0];\n\n      if (!overElement) {\n        return;\n      }\n\n      (0, _utils.requestNextAnimationFrame)(() => {\n        const overRect = overElement.getBoundingClientRect();\n\n        if (this.lastHeight === overRect.height && this.lastWidth === overRect.width) {\n          return;\n        }\n\n        this.mirror.style.width = `${overRect.width}px`;\n        this.mirror.style.height = `${overRect.height}px`;\n\n        this.lastWidth = overRect.width;\n        this.lastHeight = overRect.height;\n      });\n    });\n  }\n}\nexports.default = ResizeMirror;\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.defaultOptions = undefined;\n\nvar _ResizeMirror = __webpack_require__(20);\n\nvar _ResizeMirror2 = _interopRequireDefault(_ResizeMirror);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _ResizeMirror2.default;\nexports.defaultOptions = _ResizeMirror.defaultOptions;\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _AbstractPlugin = __webpack_require__(1);\n\nvar _AbstractPlugin2 = _interopRequireDefault(_AbstractPlugin);\n\nvar _utils = __webpack_require__(2);\n\nvar _CollidableEvent = __webpack_require__(8);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst onDragMove = Symbol('onDragMove');\nconst onDragStop = Symbol('onDragStop');\nconst onRequestAnimationFrame = Symbol('onRequestAnimationFrame');\n\n/**\n * Collidable plugin which detects colliding elements while dragging\n * @class Collidable\n * @module Collidable\n * @extends AbstractPlugin\n */\nclass Collidable extends _AbstractPlugin2.default {\n  /**\n   * Collidable constructor.\n   * @constructs Collidable\n   * @param {Draggable} draggable - Draggable instance\n   */\n  constructor(draggable) {\n    super(draggable);\n\n    /**\n     * Keeps track of currently colliding elements\n     * @property {HTMLElement|null} currentlyCollidingElement\n     * @type {HTMLElement|null}\n     */\n    this.currentlyCollidingElement = null;\n\n    /**\n     * Keeps track of currently colliding elements\n     * @property {HTMLElement|null} lastCollidingElement\n     * @type {HTMLElement|null}\n     */\n    this.lastCollidingElement = null;\n\n    /**\n     * Animation frame for finding colliding elements\n     * @property {Number|null} currentAnimationFrame\n     * @type {Number|null}\n     */\n    this.currentAnimationFrame = null;\n\n    this[onDragMove] = this[onDragMove].bind(this);\n    this[onDragStop] = this[onDragStop].bind(this);\n    this[onRequestAnimationFrame] = this[onRequestAnimationFrame].bind(this);\n  }\n\n  /**\n   * Attaches plugins event listeners\n   */\n  attach() {\n    this.draggable.on('drag:move', this[onDragMove]).on('drag:stop', this[onDragStop]);\n  }\n\n  /**\n   * Detaches plugins event listeners\n   */\n  detach() {\n    this.draggable.off('drag:move', this[onDragMove]).off('drag:stop', this[onDragStop]);\n  }\n\n  /**\n   * Returns current collidables based on `collidables` option\n   * @return {HTMLElement[]}\n   */\n  getCollidables() {\n    const collidables = this.draggable.options.collidables;\n\n    if (typeof collidables === 'string') {\n      return Array.prototype.slice.call(document.querySelectorAll(collidables));\n    } else if (collidables instanceof NodeList || collidables instanceof Array) {\n      return Array.prototype.slice.call(collidables);\n    } else if (collidables instanceof HTMLElement) {\n      return [collidables];\n    } else if (typeof collidables === 'function') {\n      return collidables();\n    } else {\n      return [];\n    }\n  }\n\n  /**\n   * Drag move handler\n   * @private\n   * @param {DragMoveEvent} event - Drag move event\n   */\n  [onDragMove](event) {\n    const target = event.sensorEvent.target;\n\n    this.currentAnimationFrame = requestAnimationFrame(this[onRequestAnimationFrame](target));\n\n    if (this.currentlyCollidingElement) {\n      event.cancel();\n    }\n\n    const collidableInEvent = new _CollidableEvent.CollidableInEvent({\n      dragEvent: event,\n      collidingElement: this.currentlyCollidingElement\n    });\n\n    const collidableOutEvent = new _CollidableEvent.CollidableOutEvent({\n      dragEvent: event,\n      collidingElement: this.lastCollidingElement\n    });\n\n    const enteringCollidable = Boolean(this.currentlyCollidingElement && this.lastCollidingElement !== this.currentlyCollidingElement);\n    const leavingCollidable = Boolean(!this.currentlyCollidingElement && this.lastCollidingElement);\n\n    if (enteringCollidable) {\n      if (this.lastCollidingElement) {\n        this.draggable.trigger(collidableOutEvent);\n      }\n\n      this.draggable.trigger(collidableInEvent);\n    } else if (leavingCollidable) {\n      this.draggable.trigger(collidableOutEvent);\n    }\n\n    this.lastCollidingElement = this.currentlyCollidingElement;\n  }\n\n  /**\n   * Drag stop handler\n   * @private\n   * @param {DragStopEvent} event - Drag stop event\n   */\n  [onDragStop](event) {\n    const lastCollidingElement = this.currentlyCollidingElement || this.lastCollidingElement;\n    const collidableOutEvent = new _CollidableEvent.CollidableOutEvent({\n      dragEvent: event,\n      collidingElement: lastCollidingElement\n    });\n\n    if (lastCollidingElement) {\n      this.draggable.trigger(collidableOutEvent);\n    }\n\n    this.lastCollidingElement = null;\n    this.currentlyCollidingElement = null;\n  }\n\n  /**\n   * Animation frame function\n   * @private\n   * @param {HTMLElement} target - Current move target\n   * @return {Function}\n   */\n  [onRequestAnimationFrame](target) {\n    return () => {\n      const collidables = this.getCollidables();\n      this.currentlyCollidingElement = (0, _utils.closest)(target, element => collidables.includes(element));\n    };\n  }\n}\nexports.default = Collidable;\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CollidableOutEvent = exports.CollidableInEvent = exports.CollidableEvent = undefined;\n\nvar _AbstractEvent = __webpack_require__(0);\n\nvar _AbstractEvent2 = _interopRequireDefault(_AbstractEvent);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Base collidable event\n * @class CollidableEvent\n * @module CollidableEvent\n * @extends AbstractEvent\n */\nclass CollidableEvent extends _AbstractEvent2.default {\n\n  /**\n   * Drag event that triggered this colliable event\n   * @property dragEvent\n   * @type {DragEvent}\n   * @readonly\n   */\n  get dragEvent() {\n    return this.data.dragEvent;\n  }\n}\n\nexports.CollidableEvent = CollidableEvent; /**\n                                            * Collidable in event\n                                            * @class CollidableInEvent\n                                            * @module CollidableInEvent\n                                            * @extends CollidableEvent\n                                            */\n\nCollidableEvent.type = 'collidable';\nclass CollidableInEvent extends CollidableEvent {\n\n  /**\n   * Element you are currently colliding with\n   * @property collidingElement\n   * @type {HTMLElement}\n   * @readonly\n   */\n  get collidingElement() {\n    return this.data.collidingElement;\n  }\n}\n\nexports.CollidableInEvent = CollidableInEvent; /**\n                                                * Collidable out event\n                                                * @class CollidableOutEvent\n                                                * @module CollidableOutEvent\n                                                * @extends CollidableEvent\n                                                */\n\nCollidableInEvent.type = 'collidable:in';\nclass CollidableOutEvent extends CollidableEvent {\n\n  /**\n   * Element you were previously colliding with\n   * @property collidingElement\n   * @type {HTMLElement}\n   * @readonly\n   */\n  get collidingElement() {\n    return this.data.collidingElement;\n  }\n}\nexports.CollidableOutEvent = CollidableOutEvent;\nCollidableOutEvent.type = 'collidable:out';\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _CollidableEvent = __webpack_require__(8);\n\nObject.keys(_CollidableEvent).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function () {\n      return _CollidableEvent[key];\n    }\n  });\n});\n\nvar _Collidable = __webpack_require__(22);\n\nvar _Collidable2 = _interopRequireDefault(_Collidable);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _Collidable2.default;\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _Collidable = __webpack_require__(24);\n\nObject.defineProperty(exports, 'Collidable', {\n  enumerable: true,\n  get: function () {\n    return _interopRequireDefault(_Collidable).default;\n  }\n});\n\nvar _ResizeMirror = __webpack_require__(21);\n\nObject.defineProperty(exports, 'ResizeMirror', {\n  enumerable: true,\n  get: function () {\n    return _interopRequireDefault(_ResizeMirror).default;\n  }\n});\nObject.defineProperty(exports, 'defaultResizeMirrorOptions', {\n  enumerable: true,\n  get: function () {\n    return _ResizeMirror.defaultOptions;\n  }\n});\n\nvar _Snappable = __webpack_require__(19);\n\nObject.defineProperty(exports, 'Snappable', {\n  enumerable: true,\n  get: function () {\n    return _interopRequireDefault(_Snappable).default;\n  }\n});\n\nvar _SwapAnimation = __webpack_require__(16);\n\nObject.defineProperty(exports, 'SwapAnimation', {\n  enumerable: true,\n  get: function () {\n    return _interopRequireDefault(_SwapAnimation).default;\n  }\n});\nObject.defineProperty(exports, 'defaultSwapAnimationOptions', {\n  enumerable: true,\n  get: function () {\n    return _SwapAnimation.defaultOptions;\n  }\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _Draggable = __webpack_require__(5);\n\nvar _Draggable2 = _interopRequireDefault(_Draggable);\n\nvar _SortableEvent = __webpack_require__(9);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst onDragStart = Symbol('onDragStart');\nconst onDragOverContainer = Symbol('onDragOverContainer');\nconst onDragOver = Symbol('onDragOver');\nconst onDragStop = Symbol('onDragStop');\n\n/**\n * Returns announcement message when a Draggable element has been sorted with another Draggable element\n * or moved into a new container\n * @param {SortableSortedEvent} sortableEvent\n * @return {String}\n */\nfunction onSortableSortedDefaultAnnouncement({ dragEvent }) {\n  const sourceText = dragEvent.source.textContent.trim() || dragEvent.source.id || 'sortable element';\n\n  if (dragEvent.over) {\n    const overText = dragEvent.over.textContent.trim() || dragEvent.over.id || 'sortable element';\n    const isFollowing = dragEvent.source.compareDocumentPosition(dragEvent.over) & Node.DOCUMENT_POSITION_FOLLOWING;\n\n    if (isFollowing) {\n      return `Placed ${sourceText} after ${overText}`;\n    } else {\n      return `Placed ${sourceText} before ${overText}`;\n    }\n  } else {\n    // need to figure out how to compute container name\n    return `Placed ${sourceText} into a different container`;\n  }\n}\n\n/**\n * @const {Object} defaultAnnouncements\n * @const {Function} defaultAnnouncements['sortable:sorted']\n */\nconst defaultAnnouncements = {\n  'sortable:sorted': onSortableSortedDefaultAnnouncement\n};\n\n/**\n * Sortable is built on top of Draggable and allows sorting of draggable elements. Sortable will keep\n * track of the original index and emits the new index as you drag over draggable elements.\n * @class Sortable\n * @module Sortable\n * @extends Draggable\n */\nclass Sortable extends _Draggable2.default {\n  /**\n   * Sortable constructor.\n   * @constructs Sortable\n   * @param {HTMLElement[]|NodeList|HTMLElement} containers - Sortable containers\n   * @param {Object} options - Options for Sortable\n   */\n  constructor(containers = [], options = {}) {\n    super(containers, _extends({}, options, {\n      announcements: _extends({}, defaultAnnouncements, options.announcements || {})\n    }));\n\n    /**\n     * start index of source on drag start\n     * @property startIndex\n     * @type {Number}\n     */\n    this.startIndex = null;\n\n    /**\n     * start container on drag start\n     * @property startContainer\n     * @type {HTMLElement}\n     * @default null\n     */\n    this.startContainer = null;\n\n    this[onDragStart] = this[onDragStart].bind(this);\n    this[onDragOverContainer] = this[onDragOverContainer].bind(this);\n    this[onDragOver] = this[onDragOver].bind(this);\n    this[onDragStop] = this[onDragStop].bind(this);\n\n    this.on('drag:start', this[onDragStart]).on('drag:over:container', this[onDragOverContainer]).on('drag:over', this[onDragOver]).on('drag:stop', this[onDragStop]);\n  }\n\n  /**\n   * Destroys Sortable instance.\n   */\n  destroy() {\n    super.destroy();\n\n    this.off('drag:start', this[onDragStart]).off('drag:over:container', this[onDragOverContainer]).off('drag:over', this[onDragOver]).off('drag:stop', this[onDragStop]);\n  }\n\n  /**\n   * Returns true index of element within its container during drag operation, i.e. excluding mirror and original source\n   * @param {HTMLElement} element - An element\n   * @return {Number}\n   */\n  index(element) {\n    return this.getDraggableElementsForContainer(element.parentNode).indexOf(element);\n  }\n\n  /**\n   * Drag start handler\n   * @private\n   * @param {DragStartEvent} event - Drag start event\n   */\n  [onDragStart](event) {\n    this.startContainer = event.source.parentNode;\n    this.startIndex = this.index(event.source);\n\n    const sortableStartEvent = new _SortableEvent.SortableStartEvent({\n      dragEvent: event,\n      startIndex: this.startIndex,\n      startContainer: this.startContainer\n    });\n\n    this.trigger(sortableStartEvent);\n\n    if (sortableStartEvent.canceled()) {\n      event.cancel();\n    }\n  }\n\n  /**\n   * Drag over container handler\n   * @private\n   * @param {DragOverContainerEvent} event - Drag over container event\n   */\n  [onDragOverContainer](event) {\n    if (event.canceled()) {\n      return;\n    }\n\n    const { source, over, overContainer } = event;\n    const oldIndex = this.index(source);\n\n    const sortableSortEvent = new _SortableEvent.SortableSortEvent({\n      dragEvent: event,\n      currentIndex: oldIndex,\n      source,\n      over\n    });\n\n    this.trigger(sortableSortEvent);\n\n    if (sortableSortEvent.canceled()) {\n      return;\n    }\n\n    const children = this.getDraggableElementsForContainer(overContainer);\n    const moves = move({ source, over, overContainer, children });\n\n    if (!moves) {\n      return;\n    }\n\n    const { oldContainer, newContainer } = moves;\n    const newIndex = this.index(event.source);\n\n    const sortableSortedEvent = new _SortableEvent.SortableSortedEvent({\n      dragEvent: event,\n      oldIndex,\n      newIndex,\n      oldContainer,\n      newContainer\n    });\n\n    this.trigger(sortableSortedEvent);\n  }\n\n  /**\n   * Drag over handler\n   * @private\n   * @param {DragOverEvent} event - Drag over event\n   */\n  [onDragOver](event) {\n    if (event.over === event.originalSource || event.over === event.source) {\n      return;\n    }\n\n    const { source, over, overContainer } = event;\n    const oldIndex = this.index(source);\n\n    const sortableSortEvent = new _SortableEvent.SortableSortEvent({\n      dragEvent: event,\n      currentIndex: oldIndex,\n      source,\n      over\n    });\n\n    this.trigger(sortableSortEvent);\n\n    if (sortableSortEvent.canceled()) {\n      return;\n    }\n\n    const children = this.getDraggableElementsForContainer(overContainer);\n    const moves = move({ source, over, overContainer, children });\n\n    if (!moves) {\n      return;\n    }\n\n    const { oldContainer, newContainer } = moves;\n    const newIndex = this.index(source);\n\n    const sortableSortedEvent = new _SortableEvent.SortableSortedEvent({\n      dragEvent: event,\n      oldIndex,\n      newIndex,\n      oldContainer,\n      newContainer\n    });\n\n    this.trigger(sortableSortedEvent);\n  }\n\n  /**\n   * Drag stop handler\n   * @private\n   * @param {DragStopEvent} event - Drag stop event\n   */\n  [onDragStop](event) {\n    const sortableStopEvent = new _SortableEvent.SortableStopEvent({\n      dragEvent: event,\n      oldIndex: this.startIndex,\n      newIndex: this.index(event.source),\n      oldContainer: this.startContainer,\n      newContainer: event.source.parentNode\n    });\n\n    this.trigger(sortableStopEvent);\n\n    this.startIndex = null;\n    this.startContainer = null;\n  }\n}\n\nexports.default = Sortable;\nfunction index(element) {\n  return Array.prototype.indexOf.call(element.parentNode.children, element);\n}\n\nfunction move({ source, over, overContainer, children }) {\n  const emptyOverContainer = !children.length;\n  const differentContainer = source.parentNode !== overContainer;\n  const sameContainer = over && !differentContainer;\n\n  if (emptyOverContainer) {\n    return moveInsideEmptyContainer(source, overContainer);\n  } else if (sameContainer) {\n    return moveWithinContainer(source, over);\n  } else if (differentContainer) {\n    return moveOutsideContainer(source, over, overContainer);\n  } else {\n    return null;\n  }\n}\n\nfunction moveInsideEmptyContainer(source, overContainer) {\n  const oldContainer = source.parentNode;\n\n  overContainer.appendChild(source);\n\n  return { oldContainer, newContainer: overContainer };\n}\n\nfunction moveWithinContainer(source, over) {\n  const oldIndex = index(source);\n  const newIndex = index(over);\n\n  if (oldIndex < newIndex) {\n    source.parentNode.insertBefore(source, over.nextElementSibling);\n  } else {\n    source.parentNode.insertBefore(source, over);\n  }\n\n  return { oldContainer: source.parentNode, newContainer: source.parentNode };\n}\n\nfunction moveOutsideContainer(source, over, overContainer) {\n  const oldContainer = source.parentNode;\n\n  if (over) {\n    over.parentNode.insertBefore(source, over);\n  } else {\n    // need to figure out proper position\n    overContainer.appendChild(source);\n  }\n\n  return { oldContainer, newContainer: source.parentNode };\n}\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SortableStopEvent = exports.SortableSortedEvent = exports.SortableSortEvent = exports.SortableStartEvent = exports.SortableEvent = undefined;\n\nvar _AbstractEvent = __webpack_require__(0);\n\nvar _AbstractEvent2 = _interopRequireDefault(_AbstractEvent);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Base sortable event\n * @class SortableEvent\n * @module SortableEvent\n * @extends AbstractEvent\n */\nclass SortableEvent extends _AbstractEvent2.default {\n\n  /**\n   * Original drag event that triggered this sortable event\n   * @property dragEvent\n   * @type {DragEvent}\n   * @readonly\n   */\n  get dragEvent() {\n    return this.data.dragEvent;\n  }\n}\n\nexports.SortableEvent = SortableEvent; /**\n                                        * Sortable start event\n                                        * @class SortableStartEvent\n                                        * @module SortableStartEvent\n                                        * @extends SortableEvent\n                                        */\n\nSortableEvent.type = 'sortable';\nclass SortableStartEvent extends SortableEvent {\n\n  /**\n   * Start index of source on sortable start\n   * @property startIndex\n   * @type {Number}\n   * @readonly\n   */\n  get startIndex() {\n    return this.data.startIndex;\n  }\n\n  /**\n   * Start container on sortable start\n   * @property startContainer\n   * @type {HTMLElement}\n   * @readonly\n   */\n  get startContainer() {\n    return this.data.startContainer;\n  }\n}\n\nexports.SortableStartEvent = SortableStartEvent; /**\n                                                  * Sortable sort event\n                                                  * @class SortableSortEvent\n                                                  * @module SortableSortEvent\n                                                  * @extends SortableEvent\n                                                  */\n\nSortableStartEvent.type = 'sortable:start';\nSortableStartEvent.cancelable = true;\nclass SortableSortEvent extends SortableEvent {\n\n  /**\n   * Index of current draggable element\n   * @property currentIndex\n   * @type {Number}\n   * @readonly\n   */\n  get currentIndex() {\n    return this.data.currentIndex;\n  }\n\n  /**\n   * Draggable element you are hovering over\n   * @property over\n   * @type {HTMLElement}\n   * @readonly\n   */\n  get over() {\n    return this.data.oldIndex;\n  }\n\n  /**\n   * Draggable container element you are hovering over\n   * @property overContainer\n   * @type {HTMLElement}\n   * @readonly\n   */\n  get overContainer() {\n    return this.data.newIndex;\n  }\n}\n\nexports.SortableSortEvent = SortableSortEvent; /**\n                                                * Sortable sorted event\n                                                * @class SortableSortedEvent\n                                                * @module SortableSortedEvent\n                                                * @extends SortableEvent\n                                                */\n\nSortableSortEvent.type = 'sortable:sort';\nSortableSortEvent.cancelable = true;\nclass SortableSortedEvent extends SortableEvent {\n\n  /**\n   * Index of last sorted event\n   * @property oldIndex\n   * @type {Number}\n   * @readonly\n   */\n  get oldIndex() {\n    return this.data.oldIndex;\n  }\n\n  /**\n   * New index of this sorted event\n   * @property newIndex\n   * @type {Number}\n   * @readonly\n   */\n  get newIndex() {\n    return this.data.newIndex;\n  }\n\n  /**\n   * Old container of draggable element\n   * @property oldContainer\n   * @type {HTMLElement}\n   * @readonly\n   */\n  get oldContainer() {\n    return this.data.oldContainer;\n  }\n\n  /**\n   * New container of draggable element\n   * @property newContainer\n   * @type {HTMLElement}\n   * @readonly\n   */\n  get newContainer() {\n    return this.data.newContainer;\n  }\n}\n\nexports.SortableSortedEvent = SortableSortedEvent; /**\n                                                    * Sortable stop event\n                                                    * @class SortableStopEvent\n                                                    * @module SortableStopEvent\n                                                    * @extends SortableEvent\n                                                    */\n\nSortableSortedEvent.type = 'sortable:sorted';\nclass SortableStopEvent extends SortableEvent {\n\n  /**\n   * Original index on sortable start\n   * @property oldIndex\n   * @type {Number}\n   * @readonly\n   */\n  get oldIndex() {\n    return this.data.oldIndex;\n  }\n\n  /**\n   * New index of draggable element\n   * @property newIndex\n   * @type {Number}\n   * @readonly\n   */\n  get newIndex() {\n    return this.data.newIndex;\n  }\n\n  /**\n   * Original container of draggable element\n   * @property oldContainer\n   * @type {HTMLElement}\n   * @readonly\n   */\n  get oldContainer() {\n    return this.data.oldContainer;\n  }\n\n  /**\n   * New container of draggable element\n   * @property newContainer\n   * @type {HTMLElement}\n   * @readonly\n   */\n  get newContainer() {\n    return this.data.newContainer;\n  }\n}\nexports.SortableStopEvent = SortableStopEvent;\nSortableStopEvent.type = 'sortable:stop';\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _SortableEvent = __webpack_require__(9);\n\nObject.keys(_SortableEvent).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function () {\n      return _SortableEvent[key];\n    }\n  });\n});\n\nvar _Sortable = __webpack_require__(26);\n\nvar _Sortable2 = _interopRequireDefault(_Sortable);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _Sortable2.default;\n\n/***/ }),\n/* 29 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _Draggable = __webpack_require__(5);\n\nvar _Draggable2 = _interopRequireDefault(_Draggable);\n\nvar _SwappableEvent = __webpack_require__(10);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst onDragStart = Symbol('onDragStart');\nconst onDragOver = Symbol('onDragOver');\nconst onDragStop = Symbol('onDragStop');\n\n/**\n * Returns an announcement message when the Draggable element is swapped with another draggable element\n * @param {SwappableSwappedEvent} swappableEvent\n * @return {String}\n */\nfunction onSwappableSwappedDefaultAnnouncement({ dragEvent, swappedElement }) {\n  const sourceText = dragEvent.source.textContent.trim() || dragEvent.source.id || 'swappable element';\n  const overText = swappedElement.textContent.trim() || swappedElement.id || 'swappable element';\n\n  return `Swapped ${sourceText} with ${overText}`;\n}\n\n/**\n * @const {Object} defaultAnnouncements\n * @const {Function} defaultAnnouncements['swappabled:swapped']\n */\nconst defaultAnnouncements = {\n  'swappabled:swapped': onSwappableSwappedDefaultAnnouncement\n};\n\n/**\n * Swappable is built on top of Draggable and allows swapping of draggable elements.\n * Order is irrelevant to Swappable.\n * @class Swappable\n * @module Swappable\n * @extends Draggable\n */\nclass Swappable extends _Draggable2.default {\n  /**\n   * Swappable constructor.\n   * @constructs Swappable\n   * @param {HTMLElement[]|NodeList|HTMLElement} containers - Swappable containers\n   * @param {Object} options - Options for Swappable\n   */\n  constructor(containers = [], options = {}) {\n    super(containers, _extends({}, options, {\n      announcements: _extends({}, defaultAnnouncements, options.announcements || {})\n    }));\n\n    /**\n     * Last draggable element that was dragged over\n     * @property lastOver\n     * @type {HTMLElement}\n     */\n    this.lastOver = null;\n\n    this[onDragStart] = this[onDragStart].bind(this);\n    this[onDragOver] = this[onDragOver].bind(this);\n    this[onDragStop] = this[onDragStop].bind(this);\n\n    this.on('drag:start', this[onDragStart]).on('drag:over', this[onDragOver]).on('drag:stop', this[onDragStop]);\n  }\n\n  /**\n   * Destroys Swappable instance.\n   */\n  destroy() {\n    super.destroy();\n\n    this.off('drag:start', this._onDragStart).off('drag:over', this._onDragOver).off('drag:stop', this._onDragStop);\n  }\n\n  /**\n   * Drag start handler\n   * @private\n   * @param {DragStartEvent} event - Drag start event\n   */\n  [onDragStart](event) {\n    const swappableStartEvent = new _SwappableEvent.SwappableStartEvent({\n      dragEvent: event\n    });\n\n    this.trigger(swappableStartEvent);\n\n    if (swappableStartEvent.canceled()) {\n      event.cancel();\n    }\n  }\n\n  /**\n   * Drag over handler\n   * @private\n   * @param {DragOverEvent} event - Drag over event\n   */\n  [onDragOver](event) {\n    if (event.over === event.originalSource || event.over === event.source || event.canceled()) {\n      return;\n    }\n\n    const swappableSwapEvent = new _SwappableEvent.SwappableSwapEvent({\n      dragEvent: event,\n      over: event.over,\n      overContainer: event.overContainer\n    });\n\n    this.trigger(swappableSwapEvent);\n\n    if (swappableSwapEvent.canceled()) {\n      return;\n    }\n\n    // swap originally swapped element back\n    if (this.lastOver && this.lastOver !== event.over) {\n      swap(this.lastOver, event.source);\n    }\n\n    if (this.lastOver === event.over) {\n      this.lastOver = null;\n    } else {\n      this.lastOver = event.over;\n    }\n\n    swap(event.source, event.over);\n\n    const swappableSwappedEvent = new _SwappableEvent.SwappableSwappedEvent({\n      dragEvent: event,\n      swappedElement: event.over\n    });\n\n    this.trigger(swappableSwappedEvent);\n  }\n\n  /**\n   * Drag stop handler\n   * @private\n   * @param {DragStopEvent} event - Drag stop event\n   */\n  [onDragStop](event) {\n    const swappableStopEvent = new _SwappableEvent.SwappableStopEvent({\n      dragEvent: event\n    });\n\n    this.trigger(swappableStopEvent);\n    this.lastOver = null;\n  }\n}\n\nexports.default = Swappable;\nfunction withTempElement(callback) {\n  const tmpElement = document.createElement('div');\n  callback(tmpElement);\n  tmpElement.parentNode.removeChild(tmpElement);\n}\n\nfunction swap(source, over) {\n  const overParent = over.parentNode;\n  const sourceParent = source.parentNode;\n\n  withTempElement(tmpElement => {\n    sourceParent.insertBefore(tmpElement, source);\n    overParent.insertBefore(source, over);\n    sourceParent.insertBefore(over, tmpElement);\n  });\n}\n\n/***/ }),\n/* 30 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SwappableStopEvent = exports.SwappableSwappedEvent = exports.SwappableSwapEvent = exports.SwappableStartEvent = exports.SwappableEvent = undefined;\n\nvar _AbstractEvent = __webpack_require__(0);\n\nvar _AbstractEvent2 = _interopRequireDefault(_AbstractEvent);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Base swappable event\n * @class SwappableEvent\n * @module SwappableEvent\n * @extends AbstractEvent\n */\nclass SwappableEvent extends _AbstractEvent2.default {\n\n  /**\n   * Original drag event that triggered this swappable event\n   * @property dragEvent\n   * @type {DragEvent}\n   * @readonly\n   */\n  get dragEvent() {\n    return this.data.dragEvent;\n  }\n}\n\nexports.SwappableEvent = SwappableEvent; /**\n                                          * Swappable start event\n                                          * @class SwappableStartEvent\n                                          * @module SwappableStartEvent\n                                          * @extends SwappableEvent\n                                          */\n\nSwappableEvent.type = 'swappable';\nclass SwappableStartEvent extends SwappableEvent {}\n\nexports.SwappableStartEvent = SwappableStartEvent; /**\n                                                    * Swappable swap event\n                                                    * @class SwappableSwapEvent\n                                                    * @module SwappableSwapEvent\n                                                    * @extends SwappableEvent\n                                                    */\n\nSwappableStartEvent.type = 'swappable:start';\nSwappableStartEvent.cancelable = true;\nclass SwappableSwapEvent extends SwappableEvent {\n\n  /**\n   * Draggable element you are over\n   * @property over\n   * @type {HTMLElement}\n   * @readonly\n   */\n  get over() {\n    return this.data.over;\n  }\n\n  /**\n   * Draggable container you are over\n   * @property overContainer\n   * @type {HTMLElement}\n   * @readonly\n   */\n  get overContainer() {\n    return this.data.overContainer;\n  }\n}\n\nexports.SwappableSwapEvent = SwappableSwapEvent; /**\n                                                  * Swappable swapped event\n                                                  * @class SwappableSwappedEvent\n                                                  * @module SwappableSwappedEvent\n                                                  * @extends SwappableEvent\n                                                  */\n\nSwappableSwapEvent.type = 'swappable:swap';\nSwappableSwapEvent.cancelable = true;\nclass SwappableSwappedEvent extends SwappableEvent {\n\n  /**\n   * The draggable element that you swapped with\n   * @property swappedElement\n   * @type {HTMLElement}\n   * @readonly\n   */\n  get swappedElement() {\n    return this.data.swappedElement;\n  }\n}\n\nexports.SwappableSwappedEvent = SwappableSwappedEvent; /**\n                                                        * Swappable stop event\n                                                        * @class SwappableStopEvent\n                                                        * @module SwappableStopEvent\n                                                        * @extends SwappableEvent\n                                                        */\n\nSwappableSwappedEvent.type = 'swappable:swapped';\nclass SwappableStopEvent extends SwappableEvent {}\nexports.SwappableStopEvent = SwappableStopEvent;\nSwappableStopEvent.type = 'swappable:stop';\n\n/***/ }),\n/* 31 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _SwappableEvent = __webpack_require__(10);\n\nObject.keys(_SwappableEvent).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function () {\n      return _SwappableEvent[key];\n    }\n  });\n});\n\nvar _Swappable = __webpack_require__(29);\n\nvar _Swappable2 = _interopRequireDefault(_Swappable);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _Swappable2.default;\n\n/***/ }),\n/* 32 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _utils = __webpack_require__(2);\n\nvar _Draggable = __webpack_require__(5);\n\nvar _Draggable2 = _interopRequireDefault(_Draggable);\n\nvar _DroppableEvent = __webpack_require__(11);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst onDragStart = Symbol('onDragStart');\nconst onDragMove = Symbol('onDragMove');\nconst onDragStop = Symbol('onDragStop');\nconst dropInDropzone = Symbol('dropInDropZone');\nconst returnToOriginalDropzone = Symbol('returnToOriginalDropzone');\nconst closestDropzone = Symbol('closestDropzone');\nconst getDropzones = Symbol('getDropzones');\n\n/**\n * Returns an announcement message when the Draggable element is dropped into a dropzone element\n * @param {DroppableDroppedEvent} droppableEvent\n * @return {String}\n */\nfunction onDroppableDroppedDefaultAnnouncement({ dragEvent, dropzone }) {\n  const sourceText = dragEvent.source.textContent.trim() || dragEvent.source.id || 'draggable element';\n  const dropzoneText = dropzone.textContent.trim() || dropzone.id || 'droppable element';\n\n  return `Dropped ${sourceText} into ${dropzoneText}`;\n}\n\n/**\n * Returns an announcement message when the Draggable element has returned to its original dropzone element\n * @param {DroppableReturnedEvent} droppableEvent\n * @return {String}\n */\nfunction onDroppableReturnedDefaultAnnouncement({ dragEvent, dropzone }) {\n  const sourceText = dragEvent.source.textContent.trim() || dragEvent.source.id || 'draggable element';\n  const dropzoneText = dropzone.textContent.trim() || dropzone.id || 'droppable element';\n\n  return `Returned ${sourceText} from ${dropzoneText}`;\n}\n\n/**\n * @const {Object} defaultAnnouncements\n * @const {Function} defaultAnnouncements['droppable:dropped']\n * @const {Function} defaultAnnouncements['droppable:returned']\n */\nconst defaultAnnouncements = {\n  'droppable:dropped': onDroppableDroppedDefaultAnnouncement,\n  'droppable:returned': onDroppableReturnedDefaultAnnouncement\n};\n\nconst defaultClasses = {\n  'droppable:active': 'draggable-dropzone--active',\n  'droppable:occupied': 'draggable-dropzone--occupied'\n};\n\nconst defaultOptions = {\n  dropzone: '.draggable-droppable'\n};\n\n/**\n * Droppable is built on top of Draggable and allows dropping draggable elements\n * into dropzone element\n * @class Droppable\n * @module Droppable\n * @extends Draggable\n */\nclass Droppable extends _Draggable2.default {\n  /**\n   * Droppable constructor.\n   * @constructs Droppable\n   * @param {HTMLElement[]|NodeList|HTMLElement} containers - Droppable containers\n   * @param {Object} options - Options for Droppable\n   */\n  constructor(containers = [], options = {}) {\n    super(containers, _extends({}, defaultOptions, options, {\n      classes: _extends({}, defaultClasses, options.classes || {}),\n      announcements: _extends({}, defaultAnnouncements, options.announcements || {})\n    }));\n\n    /**\n     * All dropzone elements on drag start\n     * @property dropzones\n     * @type {HTMLElement[]}\n     */\n    this.dropzones = null;\n\n    /**\n     * Last dropzone element that the source was dropped into\n     * @property lastDropzone\n     * @type {HTMLElement}\n     */\n    this.lastDropzone = null;\n\n    /**\n     * Initial dropzone element that the source was drag from\n     * @property initialDropzone\n     * @type {HTMLElement}\n     */\n    this.initialDropzone = null;\n\n    this[onDragStart] = this[onDragStart].bind(this);\n    this[onDragMove] = this[onDragMove].bind(this);\n    this[onDragStop] = this[onDragStop].bind(this);\n\n    this.on('drag:start', this[onDragStart]).on('drag:move', this[onDragMove]).on('drag:stop', this[onDragStop]);\n  }\n\n  /**\n   * Destroys Droppable instance.\n   */\n  destroy() {\n    super.destroy();\n\n    this.off('drag:start', this[onDragStart]).off('drag:move', this[onDragMove]).off('drag:stop', this[onDragStop]);\n  }\n\n  /**\n   * Drag start handler\n   * @private\n   * @param {DragStartEvent} event - Drag start event\n   */\n  [onDragStart](event) {\n    if (event.canceled()) {\n      return;\n    }\n\n    this.dropzones = [...this[getDropzones]()];\n    const dropzone = (0, _utils.closest)(event.sensorEvent.target, this.options.dropzone);\n\n    if (!dropzone) {\n      event.cancel();\n      return;\n    }\n\n    const droppableStartEvent = new _DroppableEvent.DroppableStartEvent({\n      dragEvent: event,\n      dropzone\n    });\n\n    this.trigger(droppableStartEvent);\n\n    if (droppableStartEvent.canceled()) {\n      event.cancel();\n      return;\n    }\n\n    this.initialDropzone = dropzone;\n\n    for (const dropzoneElement of this.dropzones) {\n      if (dropzoneElement.classList.contains(this.getClassNameFor('droppable:occupied'))) {\n        continue;\n      }\n\n      dropzoneElement.classList.add(this.getClassNameFor('droppable:active'));\n    }\n  }\n\n  /**\n   * Drag move handler\n   * @private\n   * @param {DragMoveEvent} event - Drag move event\n   */\n  [onDragMove](event) {\n    if (event.canceled()) {\n      return;\n    }\n\n    const dropzone = this[closestDropzone](event.sensorEvent.target);\n    const overEmptyDropzone = dropzone && !dropzone.classList.contains(this.getClassNameFor('droppable:occupied'));\n\n    if (overEmptyDropzone && this[dropInDropzone](event, dropzone)) {\n      this.lastDropzone = dropzone;\n    } else if ((!dropzone || dropzone === this.initialDropzone) && this.lastDropzone) {\n      this[returnToOriginalDropzone](event);\n      this.lastDropzone = null;\n    }\n  }\n\n  /**\n   * Drag stop handler\n   * @private\n   * @param {DragStopEvent} event - Drag stop event\n   */\n  [onDragStop](event) {\n    const droppableStopEvent = new _DroppableEvent.DroppableStopEvent({\n      dragEvent: event,\n      dropzone: this.lastDropzone || this.initialDropzone\n    });\n\n    this.trigger(droppableStopEvent);\n\n    const occupiedClass = this.getClassNameFor('droppable:occupied');\n\n    for (const dropzone of this.dropzones) {\n      dropzone.classList.remove(this.getClassNameFor('droppable:active'));\n    }\n\n    if (this.lastDropzone && this.lastDropzone !== this.initialDropzone) {\n      this.initialDropzone.classList.remove(occupiedClass);\n    }\n\n    this.dropzones = null;\n    this.lastDropzone = null;\n    this.initialDropzone = null;\n  }\n\n  /**\n   * Drops a draggable element into a dropzone element\n   * @private\n   * @param {DragMoveEvent} event - Drag move event\n   * @param {HTMLElement} dropzone - Dropzone element to drop draggable into\n   */\n  [dropInDropzone](event, dropzone) {\n    const droppableDroppedEvent = new _DroppableEvent.DroppableDroppedEvent({\n      dragEvent: event,\n      dropzone\n    });\n\n    this.trigger(droppableDroppedEvent);\n\n    if (droppableDroppedEvent.canceled()) {\n      return false;\n    }\n\n    const occupiedClass = this.getClassNameFor('droppable:occupied');\n\n    if (this.lastDropzone) {\n      this.lastDropzone.classList.remove(occupiedClass);\n    }\n\n    dropzone.appendChild(event.source);\n    dropzone.classList.add(occupiedClass);\n\n    return true;\n  }\n\n  /**\n   * Moves the previously dropped element back into its original dropzone\n   * @private\n   * @param {DragMoveEvent} event - Drag move event\n   */\n  [returnToOriginalDropzone](event) {\n    const droppableReturnedEvent = new _DroppableEvent.DroppableReturnedEvent({\n      dragEvent: event,\n      dropzone: this.lastDropzone\n    });\n\n    this.trigger(droppableReturnedEvent);\n\n    if (droppableReturnedEvent.canceled()) {\n      return;\n    }\n\n    this.initialDropzone.appendChild(event.source);\n    this.lastDropzone.classList.remove(this.getClassNameFor('droppable:occupied'));\n  }\n\n  /**\n   * Returns closest dropzone element for even target\n   * @private\n   * @param {HTMLElement} target - Event target\n   * @return {HTMLElement|null}\n   */\n  [closestDropzone](target) {\n    if (!this.dropzones) {\n      return null;\n    }\n\n    return (0, _utils.closest)(target, this.dropzones);\n  }\n\n  /**\n   * Returns all current dropzone elements for this draggable instance\n   * @private\n   * @return {NodeList|HTMLElement[]|Array}\n   */\n  [getDropzones]() {\n    const dropzone = this.options.dropzone;\n\n    if (typeof dropzone === 'string') {\n      return document.querySelectorAll(dropzone);\n    } else if (dropzone instanceof NodeList || dropzone instanceof Array) {\n      return dropzone;\n    } else if (typeof dropzone === 'function') {\n      return dropzone();\n    } else {\n      return [];\n    }\n  }\n}\nexports.default = Droppable;\n\n/***/ }),\n/* 33 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DroppableStopEvent = exports.DroppableReturnedEvent = exports.DroppableDroppedEvent = exports.DroppableStartEvent = exports.DroppableEvent = undefined;\n\nvar _AbstractEvent = __webpack_require__(0);\n\nvar _AbstractEvent2 = _interopRequireDefault(_AbstractEvent);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Base droppable event\n * @class DroppableEvent\n * @module DroppableEvent\n * @extends AbstractEvent\n */\nclass DroppableEvent extends _AbstractEvent2.default {\n\n  /**\n   * Original drag event that triggered this droppable event\n   * @property dragEvent\n   * @type {DragEvent}\n   * @readonly\n   */\n  get dragEvent() {\n    return this.data.dragEvent;\n  }\n}\n\nexports.DroppableEvent = DroppableEvent; /**\n                                          * Droppable start event\n                                          * @class DroppableStartEvent\n                                          * @module DroppableStartEvent\n                                          * @extends DroppableEvent\n                                          */\n\nDroppableEvent.type = 'droppable';\nclass DroppableStartEvent extends DroppableEvent {\n\n  /**\n   * The initial dropzone element of the currently dragging draggable element\n   * @property dropzone\n   * @type {HTMLElement}\n   * @readonly\n   */\n  get dropzone() {\n    return this.data.dropzone;\n  }\n}\n\nexports.DroppableStartEvent = DroppableStartEvent; /**\n                                                    * Droppable dropped event\n                                                    * @class DroppableDroppedEvent\n                                                    * @module DroppableDroppedEvent\n                                                    * @extends DroppableEvent\n                                                    */\n\nDroppableStartEvent.type = 'droppable:start';\nDroppableStartEvent.cancelable = true;\nclass DroppableDroppedEvent extends DroppableEvent {\n\n  /**\n   * The dropzone element you dropped the draggable element into\n   * @property dropzone\n   * @type {HTMLElement}\n   * @readonly\n   */\n  get dropzone() {\n    return this.data.dropzone;\n  }\n}\n\nexports.DroppableDroppedEvent = DroppableDroppedEvent; /**\n                                                        * Droppable returned event\n                                                        * @class DroppableReturnedEvent\n                                                        * @module DroppableReturnedEvent\n                                                        * @extends DroppableEvent\n                                                        */\n\nDroppableDroppedEvent.type = 'droppable:dropped';\nDroppableDroppedEvent.cancelable = true;\nclass DroppableReturnedEvent extends DroppableEvent {\n\n  /**\n   * The dropzone element you dragged away from\n   * @property dropzone\n   * @type {HTMLElement}\n   * @readonly\n   */\n  get dropzone() {\n    return this.data.dropzone;\n  }\n}\n\nexports.DroppableReturnedEvent = DroppableReturnedEvent; /**\n                                                          * Droppable stop event\n                                                          * @class DroppableStopEvent\n                                                          * @module DroppableStopEvent\n                                                          * @extends DroppableEvent\n                                                          */\n\nDroppableReturnedEvent.type = 'droppable:returned';\nDroppableReturnedEvent.cancelable = true;\nclass DroppableStopEvent extends DroppableEvent {\n\n  /**\n   * The final dropzone element of the draggable element\n   * @property dropzone\n   * @type {HTMLElement}\n   * @readonly\n   */\n  get dropzone() {\n    return this.data.dropzone;\n  }\n}\nexports.DroppableStopEvent = DroppableStopEvent;\nDroppableStopEvent.type = 'droppable:stop';\nDroppableStopEvent.cancelable = true;\n\n/***/ }),\n/* 34 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _DroppableEvent = __webpack_require__(11);\n\nObject.keys(_DroppableEvent).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function () {\n      return _DroppableEvent[key];\n    }\n  });\n});\n\nvar _Droppable = __webpack_require__(32);\n\nvar _Droppable2 = _interopRequireDefault(_Droppable);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _Droppable2.default;\n\n/***/ }),\n/* 35 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * The Emitter is a simple emitter class that provides you with `on()`, `off()` and `trigger()` methods\n * @class Emitter\n * @module Emitter\n */\nclass Emitter {\n  constructor() {\n    this.callbacks = {};\n  }\n\n  /**\n   * Registers callbacks by event name\n   * @param {String} type\n   * @param {...Function} callbacks\n   */\n  on(type, ...callbacks) {\n    if (!this.callbacks[type]) {\n      this.callbacks[type] = [];\n    }\n\n    this.callbacks[type].push(...callbacks);\n\n    return this;\n  }\n\n  /**\n   * Unregisters callbacks by event name\n   * @param {String} type\n   * @param {Function} callback\n   */\n  off(type, callback) {\n    if (!this.callbacks[type]) {\n      return null;\n    }\n\n    const copy = this.callbacks[type].slice(0);\n\n    for (let i = 0; i < copy.length; i++) {\n      if (callback === copy[i]) {\n        this.callbacks[type].splice(i, 1);\n      }\n    }\n\n    return this;\n  }\n\n  /**\n   * Triggers event callbacks by event object\n   * @param {AbstractEvent} event\n   */\n  trigger(event) {\n    if (!this.callbacks[event.type]) {\n      return null;\n    }\n\n    const callbacks = [...this.callbacks[event.type]];\n    const caughtErrors = [];\n\n    for (let i = callbacks.length - 1; i >= 0; i--) {\n      const callback = callbacks[i];\n\n      try {\n        callback(event);\n      } catch (error) {\n        caughtErrors.push(error);\n      }\n    }\n\n    if (caughtErrors.length) {\n      /* eslint-disable no-console */\n      console.error(`Draggable caught errors while triggering '${event.type}'`, caughtErrors);\n      /* eslint-disable no-console */\n    }\n\n    return this;\n  }\n}\nexports.default = Emitter;\n\n/***/ }),\n/* 36 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _Emitter = __webpack_require__(35);\n\nvar _Emitter2 = _interopRequireDefault(_Emitter);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _Emitter2.default;\n\n/***/ }),\n/* 37 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.defaultOptions = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _utils = __webpack_require__(2);\n\nvar _Plugins = __webpack_require__(12);\n\nvar _Emitter = __webpack_require__(36);\n\nvar _Emitter2 = _interopRequireDefault(_Emitter);\n\nvar _Sensors = __webpack_require__(6);\n\nvar _DraggableEvent = __webpack_require__(13);\n\nvar _DragEvent = __webpack_require__(14);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst onDragStart = Symbol('onDragStart');\nconst onDragMove = Symbol('onDragMove');\nconst onDragStop = Symbol('onDragStop');\nconst onDragPressure = Symbol('onDragPressure');\n\n/**\n * @const {Object} defaultAnnouncements\n * @const {Function} defaultAnnouncements['drag:start']\n * @const {Function} defaultAnnouncements['drag:stop']\n */\nconst defaultAnnouncements = {\n  'drag:start': event => `Picked up ${event.source.textContent.trim() || event.source.id || 'draggable element'}`,\n  'drag:stop': event => `Released ${event.source.textContent.trim() || event.source.id || 'draggable element'}`\n};\n\nconst defaultClasses = {\n  'container:dragging': 'draggable-container--is-dragging',\n  'source:dragging': 'draggable-source--is-dragging',\n  'source:placed': 'draggable-source--placed',\n  'container:placed': 'draggable-container--placed',\n  'body:dragging': 'draggable--is-dragging',\n  'draggable:over': 'draggable--over',\n  'container:over': 'draggable-container--over',\n  'source:original': 'draggable--original',\n  mirror: 'draggable-mirror'\n};\n\nconst defaultOptions = exports.defaultOptions = {\n  draggable: '.draggable-source',\n  handle: null,\n  delay: 100,\n  placedTimeout: 800,\n  plugins: [],\n  sensors: []\n};\n\n/**\n * This is the core draggable library that does the heavy lifting\n * @class Draggable\n * @module Draggable\n */\nclass Draggable {\n\n  /**\n   * Draggable constructor.\n   * @constructs Draggable\n   * @param {HTMLElement[]|NodeList|HTMLElement} containers - Draggable containers\n   * @param {Object} options - Options for draggable\n   */\n  constructor(containers = [document.body], options = {}) {\n    /**\n     * Draggable containers\n     * @property containers\n     * @type {HTMLElement[]}\n     */\n    if (containers instanceof NodeList || containers instanceof Array) {\n      this.containers = [...containers];\n    } else if (containers instanceof HTMLElement) {\n      this.containers = [containers];\n    } else {\n      throw new Error('Draggable containers are expected to be of type `NodeList`, `HTMLElement[]` or `HTMLElement`');\n    }\n\n    this.options = _extends({}, defaultOptions, options, {\n      classes: _extends({}, defaultClasses, options.classes || {}),\n      announcements: _extends({}, defaultAnnouncements, options.announcements || {})\n    });\n\n    /**\n     * Draggables event emitter\n     * @property emitter\n     * @type {Emitter}\n     */\n    this.emitter = new _Emitter2.default();\n\n    /**\n     * Current drag state\n     * @property dragging\n     * @type {Boolean}\n     */\n    this.dragging = false;\n\n    /**\n     * Active plugins\n     * @property plugins\n     * @type {Plugin[]}\n     */\n    this.plugins = [];\n\n    /**\n     * Active sensors\n     * @property sensors\n     * @type {Sensor[]}\n     */\n    this.sensors = [];\n\n    this[onDragStart] = this[onDragStart].bind(this);\n    this[onDragMove] = this[onDragMove].bind(this);\n    this[onDragStop] = this[onDragStop].bind(this);\n    this[onDragPressure] = this[onDragPressure].bind(this);\n\n    document.addEventListener('drag:start', this[onDragStart], true);\n    document.addEventListener('drag:move', this[onDragMove], true);\n    document.addEventListener('drag:stop', this[onDragStop], true);\n    document.addEventListener('drag:pressure', this[onDragPressure], true);\n\n    const defaultPlugins = Object.values(Draggable.Plugins).map(Plugin => Plugin);\n    const defaultSensors = [_Sensors.MouseSensor, _Sensors.TouchSensor];\n\n    this.addPlugin(...[...defaultPlugins, ...this.options.plugins]);\n    this.addSensor(...[...defaultSensors, ...this.options.sensors]);\n\n    const draggableInitializedEvent = new _DraggableEvent.DraggableInitializedEvent({\n      draggable: this\n    });\n\n    this.on('mirror:created', ({ mirror }) => this.mirror = mirror);\n    this.on('mirror:destroy', () => this.mirror = null);\n\n    this.trigger(draggableInitializedEvent);\n  }\n\n  /**\n   * Destroys Draggable instance. This removes all internal event listeners and\n   * deactivates sensors and plugins\n   */\n\n  /**\n   * Default plugins draggable uses\n   * @static\n   * @property {Object} Plugins\n   * @property {Announcement} Plugins.Announcement\n   * @property {Focusable} Plugins.Focusable\n   * @property {Mirror} Plugins.Mirror\n   * @property {Scrollable} Plugins.Scrollable\n   * @type {Object}\n   */\n  destroy() {\n    document.removeEventListener('drag:start', this[onDragStart], true);\n    document.removeEventListener('drag:move', this[onDragMove], true);\n    document.removeEventListener('drag:stop', this[onDragStop], true);\n    document.removeEventListener('drag:pressure', this[onDragPressure], true);\n\n    const draggableDestroyEvent = new _DraggableEvent.DraggableDestroyEvent({\n      draggable: this\n    });\n\n    this.trigger(draggableDestroyEvent);\n\n    this.removePlugin(...this.plugins.map(plugin => plugin.constructor));\n    this.removeSensor(...this.sensors.map(sensor => sensor.constructor));\n  }\n\n  /**\n   * Adds plugin to this draggable instance. This will end up calling the attach method of the plugin\n   * @param {...typeof Plugin} plugins - Plugins that you want attached to draggable\n   * @return {Draggable}\n   * @example draggable.addPlugin(CustomA11yPlugin, CustomMirrorPlugin)\n   */\n  addPlugin(...plugins) {\n    const activePlugins = plugins.map(Plugin => new Plugin(this));\n\n    activePlugins.forEach(plugin => plugin.attach());\n    this.plugins = [...this.plugins, ...activePlugins];\n\n    return this;\n  }\n\n  /**\n   * Removes plugins that are already attached to this draggable instance. This will end up calling\n   * the detach method of the plugin\n   * @param {...typeof Plugin} plugins - Plugins that you want detached from draggable\n   * @return {Draggable}\n   * @example draggable.removePlugin(MirrorPlugin, CustomMirrorPlugin)\n   */\n  removePlugin(...plugins) {\n    const removedPlugins = this.plugins.filter(plugin => plugins.includes(plugin.constructor));\n\n    removedPlugins.forEach(plugin => plugin.detach());\n    this.plugins = this.plugins.filter(plugin => !plugins.includes(plugin.constructor));\n\n    return this;\n  }\n\n  /**\n   * Adds sensors to this draggable instance. This will end up calling the attach method of the sensor\n   * @param {...typeof Sensor} sensors - Sensors that you want attached to draggable\n   * @return {Draggable}\n   * @example draggable.addSensor(ForceTouchSensor, CustomSensor)\n   */\n  addSensor(...sensors) {\n    const activeSensors = sensors.map(Sensor => new Sensor(this.containers, this.options));\n\n    activeSensors.forEach(sensor => sensor.attach());\n    this.sensors = [...this.sensors, ...activeSensors];\n\n    return this;\n  }\n\n  /**\n   * Removes sensors that are already attached to this draggable instance. This will end up calling\n   * the detach method of the sensor\n   * @param {...typeof Sensor} sensors - Sensors that you want attached to draggable\n   * @return {Draggable}\n   * @example draggable.removeSensor(TouchSensor, DragSensor)\n   */\n  removeSensor(...sensors) {\n    const removedSensors = this.sensors.filter(sensor => sensors.includes(sensor.constructor));\n\n    removedSensors.forEach(sensor => sensor.detach());\n    this.sensors = this.sensors.filter(sensor => !sensors.includes(sensor.constructor));\n\n    return this;\n  }\n\n  /**\n   * Adds container to this draggable instance\n   * @param {...HTMLElement} containers - Containers you want to add to draggable\n   * @return {Draggable}\n   * @example draggable.addContainer(document.body)\n   */\n  addContainer(...containers) {\n    this.containers = [...this.containers, ...containers];\n    this.sensors.forEach(sensor => sensor.addContainer(...containers));\n    return this;\n  }\n\n  /**\n   * Removes container from this draggable instance\n   * @param {...HTMLElement} containers - Containers you want to remove from draggable\n   * @return {Draggable}\n   * @example draggable.removeContainer(document.body)\n   */\n  removeContainer(...containers) {\n    this.containers = this.containers.filter(container => !containers.includes(container));\n    this.sensors.forEach(sensor => sensor.removeContainer(...containers));\n    return this;\n  }\n\n  /**\n   * Adds listener for draggable events\n   * @param {String} type - Event name\n   * @param {...Function} callbacks - Event callbacks\n   * @return {Draggable}\n   * @example draggable.on('drag:start', (dragEvent) => dragEvent.cancel());\n   */\n  on(type, ...callbacks) {\n    this.emitter.on(type, ...callbacks);\n    return this;\n  }\n\n  /**\n   * Removes listener from draggable\n   * @param {String} type - Event name\n   * @param {Function} callback - Event callback\n   * @return {Draggable}\n   * @example draggable.off('drag:start', handlerFunction);\n   */\n  off(type, callback) {\n    this.emitter.off(type, callback);\n    return this;\n  }\n\n  /**\n   * Triggers draggable event\n   * @param {AbstractEvent} event - Event instance\n   * @return {Draggable}\n   * @example draggable.trigger(event);\n   */\n  trigger(event) {\n    this.emitter.trigger(event);\n    return this;\n  }\n\n  /**\n   * Returns class name for class identifier\n   * @param {String} name - Name of class identifier\n   * @return {String|null}\n   */\n  getClassNameFor(name) {\n    return this.options.classes[name];\n  }\n\n  /**\n   * Returns true if this draggable instance is currently dragging\n   * @return {Boolean}\n   */\n  isDragging() {\n    return Boolean(this.dragging);\n  }\n\n  /**\n   * Returns all draggable elements\n   * @return {HTMLElement[]}\n   */\n  getDraggableElements() {\n    return this.containers.reduce((current, container) => {\n      return [...current, ...this.getDraggableElementsForContainer(container)];\n    }, []);\n  }\n\n  /**\n   * Returns draggable elements for a given container, excluding the mirror and\n   * original source element if present\n   * @param {HTMLElement} container\n   * @return {HTMLElement[]}\n   */\n  getDraggableElementsForContainer(container) {\n    const allDraggableElements = container.querySelectorAll(this.options.draggable);\n\n    return [...allDraggableElements].filter(childElement => {\n      return childElement !== this.originalSource && childElement !== this.mirror;\n    });\n  }\n\n  /**\n   * Drag start handler\n   * @private\n   * @param {Event} event - DOM Drag event\n   */\n  [onDragStart](event) {\n    const sensorEvent = getSensorEvent(event);\n    const { target, container } = sensorEvent;\n\n    if (!this.containers.includes(container)) {\n      return;\n    }\n\n    if (this.options.handle && target && !(0, _utils.closest)(target, this.options.handle)) {\n      sensorEvent.cancel();\n      return;\n    }\n\n    // Find draggable source element\n    this.originalSource = (0, _utils.closest)(target, this.options.draggable);\n    this.sourceContainer = container;\n\n    if (!this.originalSource) {\n      sensorEvent.cancel();\n      return;\n    }\n\n    if (this.lastPlacedSource && this.lastPlacedContainer) {\n      clearTimeout(this.placedTimeoutID);\n      this.lastPlacedSource.classList.remove(this.getClassNameFor('source:placed'));\n      this.lastPlacedContainer.classList.remove(this.getClassNameFor('container:placed'));\n    }\n\n    this.source = this.originalSource.cloneNode(true);\n    this.originalSource.parentNode.insertBefore(this.source, this.originalSource);\n    this.originalSource.style.display = 'none';\n\n    const dragEvent = new _DragEvent.DragStartEvent({\n      source: this.source,\n      originalSource: this.originalSource,\n      sourceContainer: container,\n      sensorEvent\n    });\n\n    this.trigger(dragEvent);\n\n    this.dragging = !dragEvent.canceled();\n\n    if (dragEvent.canceled()) {\n      this.source.parentNode.removeChild(this.source);\n      this.originalSource.style.display = null;\n      return;\n    }\n\n    this.originalSource.classList.add(this.getClassNameFor('source:original'));\n    this.source.classList.add(this.getClassNameFor('source:dragging'));\n    this.sourceContainer.classList.add(this.getClassNameFor('container:dragging'));\n    document.body.classList.add(this.getClassNameFor('body:dragging'));\n    applyUserSelect(document.body, 'none');\n\n    requestAnimationFrame(() => {\n      const oldSensorEvent = getSensorEvent(event);\n      const newSensorEvent = oldSensorEvent.clone({ target: this.source });\n\n      this[onDragMove](_extends({}, event, {\n        detail: newSensorEvent\n      }));\n    });\n  }\n\n  /**\n   * Drag move handler\n   * @private\n   * @param {Event} event - DOM Drag event\n   */\n  [onDragMove](event) {\n    if (!this.dragging) {\n      return;\n    }\n\n    const sensorEvent = getSensorEvent(event);\n    const { container } = sensorEvent;\n    let target = sensorEvent.target;\n\n    const dragMoveEvent = new _DragEvent.DragMoveEvent({\n      source: this.source,\n      originalSource: this.originalSource,\n      sourceContainer: container,\n      sensorEvent\n    });\n\n    this.trigger(dragMoveEvent);\n\n    if (dragMoveEvent.canceled()) {\n      sensorEvent.cancel();\n    }\n\n    target = (0, _utils.closest)(target, this.options.draggable);\n    const withinCorrectContainer = (0, _utils.closest)(sensorEvent.target, this.containers);\n    const overContainer = sensorEvent.overContainer || withinCorrectContainer;\n    const isLeavingContainer = this.currentOverContainer && overContainer !== this.currentOverContainer;\n    const isLeavingDraggable = this.currentOver && target !== this.currentOver;\n    const isOverContainer = overContainer && this.currentOverContainer !== overContainer;\n    const isOverDraggable = withinCorrectContainer && target && this.currentOver !== target;\n\n    if (isLeavingDraggable) {\n      const dragOutEvent = new _DragEvent.DragOutEvent({\n        source: this.source,\n        originalSource: this.originalSource,\n        sourceContainer: container,\n        sensorEvent,\n        over: this.currentOver\n      });\n\n      this.currentOver.classList.remove(this.getClassNameFor('draggable:over'));\n      this.currentOver = null;\n\n      this.trigger(dragOutEvent);\n    }\n\n    if (isLeavingContainer) {\n      const dragOutContainerEvent = new _DragEvent.DragOutContainerEvent({\n        source: this.source,\n        originalSource: this.originalSource,\n        sourceContainer: container,\n        sensorEvent,\n        overContainer: this.currentOverContainer\n      });\n\n      this.currentOverContainer.classList.remove(this.getClassNameFor('container:over'));\n      this.currentOverContainer = null;\n\n      this.trigger(dragOutContainerEvent);\n    }\n\n    if (isOverContainer) {\n      overContainer.classList.add(this.getClassNameFor('container:over'));\n\n      const dragOverContainerEvent = new _DragEvent.DragOverContainerEvent({\n        source: this.source,\n        originalSource: this.originalSource,\n        sourceContainer: container,\n        sensorEvent,\n        overContainer\n      });\n\n      this.currentOverContainer = overContainer;\n\n      this.trigger(dragOverContainerEvent);\n    }\n\n    if (isOverDraggable) {\n      target.classList.add(this.getClassNameFor('draggable:over'));\n\n      const dragOverEvent = new _DragEvent.DragOverEvent({\n        source: this.source,\n        originalSource: this.originalSource,\n        sourceContainer: container,\n        sensorEvent,\n        overContainer,\n        over: target\n      });\n\n      this.currentOver = target;\n\n      this.trigger(dragOverEvent);\n    }\n  }\n\n  /**\n   * Drag stop handler\n   * @private\n   * @param {Event} event - DOM Drag event\n   */\n  [onDragStop](event) {\n    if (!this.dragging) {\n      return;\n    }\n\n    this.dragging = false;\n\n    const dragStopEvent = new _DragEvent.DragStopEvent({\n      source: this.source,\n      originalSource: this.originalSource,\n      sensorEvent: event.sensorEvent,\n      sourceContainer: this.sourceContainer\n    });\n\n    this.trigger(dragStopEvent);\n\n    this.source.parentNode.insertBefore(this.originalSource, this.source);\n    this.source.parentNode.removeChild(this.source);\n    this.originalSource.style.display = '';\n\n    this.source.classList.remove(this.getClassNameFor('source:dragging'));\n    this.originalSource.classList.remove(this.getClassNameFor('source:original'));\n    this.originalSource.classList.add(this.getClassNameFor('source:placed'));\n    this.sourceContainer.classList.add(this.getClassNameFor('container:placed'));\n    this.sourceContainer.classList.remove(this.getClassNameFor('container:dragging'));\n    document.body.classList.remove(this.getClassNameFor('body:dragging'));\n    applyUserSelect(document.body, '');\n\n    if (this.currentOver) {\n      this.currentOver.classList.remove(this.getClassNameFor('draggable:over'));\n    }\n\n    if (this.currentOverContainer) {\n      this.currentOverContainer.classList.remove(this.getClassNameFor('container:over'));\n    }\n\n    this.lastPlacedSource = this.originalSource;\n    this.lastPlacedContainer = this.sourceContainer;\n\n    this.placedTimeoutID = setTimeout(() => {\n      if (this.lastPlacedSource) {\n        this.lastPlacedSource.classList.remove(this.getClassNameFor('source:placed'));\n      }\n\n      if (this.lastPlacedContainer) {\n        this.lastPlacedContainer.classList.remove(this.getClassNameFor('container:placed'));\n      }\n\n      this.lastPlacedSource = null;\n      this.lastPlacedContainer = null;\n    }, this.options.placedTimeout);\n\n    this.source = null;\n    this.originalSource = null;\n    this.currentOverContainer = null;\n    this.currentOver = null;\n    this.sourceContainer = null;\n  }\n\n  /**\n   * Drag pressure handler\n   * @private\n   * @param {Event} event - DOM Drag event\n   */\n  [onDragPressure](event) {\n    if (!this.dragging) {\n      return;\n    }\n\n    const sensorEvent = getSensorEvent(event);\n    const source = this.source || (0, _utils.closest)(sensorEvent.originalEvent.target, this.options.draggable);\n\n    const dragPressureEvent = new _DragEvent.DragPressureEvent({\n      sensorEvent,\n      source,\n      pressure: sensorEvent.pressure\n    });\n\n    this.trigger(dragPressureEvent);\n  }\n}\n\nexports.default = Draggable;\nDraggable.Plugins = { Announcement: _Plugins.Announcement, Focusable: _Plugins.Focusable, Mirror: _Plugins.Mirror, Scrollable: _Plugins.Scrollable };\nfunction getSensorEvent(event) {\n  return event.detail;\n}\n\nfunction applyUserSelect(element, value) {\n  element.style.webkitUserSelect = value;\n  element.style.mozUserSelect = value;\n  element.style.msUserSelect = value;\n  element.style.oUserSelect = value;\n  element.style.userSelect = value;\n}\n\n/***/ }),\n/* 38 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _Sensor = __webpack_require__(4);\n\nvar _Sensor2 = _interopRequireDefault(_Sensor);\n\nvar _SensorEvent = __webpack_require__(3);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst onMouseForceWillBegin = Symbol('onMouseForceWillBegin');\nconst onMouseForceDown = Symbol('onMouseForceDown');\nconst onMouseDown = Symbol('onMouseDown');\nconst onMouseForceChange = Symbol('onMouseForceChange');\nconst onMouseMove = Symbol('onMouseMove');\nconst onMouseUp = Symbol('onMouseUp');\nconst onMouseForceGlobalChange = Symbol('onMouseForceGlobalChange');\n\n/**\n * This sensor picks up native force touch events and dictates drag operations\n * @class ForceTouchSensor\n * @module ForceTouchSensor\n * @extends Sensor\n */\nclass ForceTouchSensor extends _Sensor2.default {\n  /**\n   * ForceTouchSensor constructor.\n   * @constructs ForceTouchSensor\n   * @param {HTMLElement[]|NodeList|HTMLElement} containers - Containers\n   * @param {Object} options - Options\n   */\n  constructor(containers = [], options = {}) {\n    super(containers, options);\n\n    /**\n     * Draggable element needs to be remembered to unset the draggable attribute after drag operation has completed\n     * @property mightDrag\n     * @type {Boolean}\n     */\n    this.mightDrag = false;\n\n    this[onMouseForceWillBegin] = this[onMouseForceWillBegin].bind(this);\n    this[onMouseForceDown] = this[onMouseForceDown].bind(this);\n    this[onMouseDown] = this[onMouseDown].bind(this);\n    this[onMouseForceChange] = this[onMouseForceChange].bind(this);\n    this[onMouseMove] = this[onMouseMove].bind(this);\n    this[onMouseUp] = this[onMouseUp].bind(this);\n  }\n\n  /**\n   * Attaches sensors event listeners to the DOM\n   */\n  attach() {\n    for (const container of this.containers) {\n      container.addEventListener('webkitmouseforcewillbegin', this[onMouseForceWillBegin], false);\n      container.addEventListener('webkitmouseforcedown', this[onMouseForceDown], false);\n      container.addEventListener('mousedown', this[onMouseDown], true);\n      container.addEventListener('webkitmouseforcechanged', this[onMouseForceChange], false);\n    }\n\n    document.addEventListener('mousemove', this[onMouseMove]);\n    document.addEventListener('mouseup', this[onMouseUp]);\n  }\n\n  /**\n   * Detaches sensors event listeners to the DOM\n   */\n  detach() {\n    for (const container of this.containers) {\n      container.removeEventListener('webkitmouseforcewillbegin', this[onMouseForceWillBegin], false);\n      container.removeEventListener('webkitmouseforcedown', this[onMouseForceDown], false);\n      container.removeEventListener('mousedown', this[onMouseDown], true);\n      container.removeEventListener('webkitmouseforcechanged', this[onMouseForceChange], false);\n    }\n\n    document.removeEventListener('mousemove', this[onMouseMove]);\n    document.removeEventListener('mouseup', this[onMouseUp]);\n  }\n\n  /**\n   * Mouse force will begin handler\n   * @private\n   * @param {Event} event - Mouse force will begin event\n   */\n  [onMouseForceWillBegin](event) {\n    event.preventDefault();\n    this.mightDrag = true;\n  }\n\n  /**\n   * Mouse force down handler\n   * @private\n   * @param {Event} event - Mouse force down event\n   */\n  [onMouseForceDown](event) {\n    if (this.dragging) {\n      return;\n    }\n\n    const target = document.elementFromPoint(event.clientX, event.clientY);\n    const container = event.currentTarget;\n\n    const dragStartEvent = new _SensorEvent.DragStartSensorEvent({\n      clientX: event.clientX,\n      clientY: event.clientY,\n      target,\n      container,\n      originalEvent: event\n    });\n\n    this.trigger(container, dragStartEvent);\n\n    this.currentContainer = container;\n    this.dragging = !dragStartEvent.canceled();\n    this.mightDrag = false;\n  }\n\n  /**\n   * Mouse up handler\n   * @private\n   * @param {Event} event - Mouse up event\n   */\n  [onMouseUp](event) {\n    if (!this.dragging) {\n      return;\n    }\n\n    const dragStopEvent = new _SensorEvent.DragStopSensorEvent({\n      clientX: event.clientX,\n      clientY: event.clientY,\n      target: null,\n      container: this.currentContainer,\n      originalEvent: event\n    });\n\n    this.trigger(this.currentContainer, dragStopEvent);\n\n    this.currentContainer = null;\n    this.dragging = false;\n    this.mightDrag = false;\n  }\n\n  /**\n   * Mouse down handler\n   * @private\n   * @param {Event} event - Mouse down event\n   */\n  [onMouseDown](event) {\n    if (!this.mightDrag) {\n      return;\n    }\n\n    // Need workaround for real click\n    // Cancel potential drag events\n    event.stopPropagation();\n    event.stopImmediatePropagation();\n    event.preventDefault();\n  }\n\n  /**\n   * Mouse move handler\n   * @private\n   * @param {Event} event - Mouse force will begin event\n   */\n  [onMouseMove](event) {\n    if (!this.dragging) {\n      return;\n    }\n\n    const target = document.elementFromPoint(event.clientX, event.clientY);\n\n    const dragMoveEvent = new _SensorEvent.DragMoveSensorEvent({\n      clientX: event.clientX,\n      clientY: event.clientY,\n      target,\n      container: this.currentContainer,\n      originalEvent: event\n    });\n\n    this.trigger(this.currentContainer, dragMoveEvent);\n  }\n\n  /**\n   * Mouse force change handler\n   * @private\n   * @param {Event} event - Mouse force change event\n   */\n  [onMouseForceChange](event) {\n    if (this.dragging) {\n      return;\n    }\n\n    const target = event.target;\n    const container = event.currentTarget;\n\n    const dragPressureEvent = new _SensorEvent.DragPressureSensorEvent({\n      pressure: event.webkitForce,\n      clientX: event.clientX,\n      clientY: event.clientY,\n      target,\n      container,\n      originalEvent: event\n    });\n\n    this.trigger(container, dragPressureEvent);\n  }\n\n  /**\n   * Mouse force global change handler\n   * @private\n   * @param {Event} event - Mouse force global change event\n   */\n  [onMouseForceGlobalChange](event) {\n    if (!this.dragging) {\n      return;\n    }\n\n    const target = event.target;\n\n    const dragPressureEvent = new _SensorEvent.DragPressureSensorEvent({\n      pressure: event.webkitForce,\n      clientX: event.clientX,\n      clientY: event.clientY,\n      target,\n      container: this.currentContainer,\n      originalEvent: event\n    });\n\n    this.trigger(this.currentContainer, dragPressureEvent);\n  }\n}\nexports.default = ForceTouchSensor;\n\n/***/ }),\n/* 39 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _ForceTouchSensor = __webpack_require__(38);\n\nvar _ForceTouchSensor2 = _interopRequireDefault(_ForceTouchSensor);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _ForceTouchSensor2.default;\n\n/***/ }),\n/* 40 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _utils = __webpack_require__(2);\n\nvar _Sensor = __webpack_require__(4);\n\nvar _Sensor2 = _interopRequireDefault(_Sensor);\n\nvar _SensorEvent = __webpack_require__(3);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst onMouseDown = Symbol('onMouseDown');\nconst onMouseUp = Symbol('onMouseUp');\nconst onDragStart = Symbol('onDragStart');\nconst onDragOver = Symbol('onDragOver');\nconst onDragEnd = Symbol('onDragEnd');\nconst onDrop = Symbol('onDrop');\nconst reset = Symbol('reset');\n\n/**\n * This sensor picks up native browser drag events and dictates drag operations\n * @class DragSensor\n * @module DragSensor\n * @extends Sensor\n */\nclass DragSensor extends _Sensor2.default {\n  /**\n   * DragSensor constructor.\n   * @constructs DragSensor\n   * @param {HTMLElement[]|NodeList|HTMLElement} containers - Containers\n   * @param {Object} options - Options\n   */\n  constructor(containers = [], options = {}) {\n    super(containers, options);\n\n    /**\n     * Mouse down timer which will end up setting the draggable attribute, unless canceled\n     * @property mouseDownTimeout\n     * @type {Number}\n     */\n    this.mouseDownTimeout = null;\n\n    /**\n     * Draggable element needs to be remembered to unset the draggable attribute after drag operation has completed\n     * @property draggableElement\n     * @type {HTMLElement}\n     */\n    this.draggableElement = null;\n\n    /**\n     * Native draggable element could be links or images, their draggable state will be disabled during drag operation\n     * @property nativeDraggableElement\n     * @type {HTMLElement}\n     */\n    this.nativeDraggableElement = null;\n\n    this[onMouseDown] = this[onMouseDown].bind(this);\n    this[onMouseUp] = this[onMouseUp].bind(this);\n    this[onDragStart] = this[onDragStart].bind(this);\n    this[onDragOver] = this[onDragOver].bind(this);\n    this[onDragEnd] = this[onDragEnd].bind(this);\n    this[onDrop] = this[onDrop].bind(this);\n  }\n\n  /**\n   * Attaches sensors event listeners to the DOM\n   */\n  attach() {\n    document.addEventListener('mousedown', this[onMouseDown], true);\n  }\n\n  /**\n   * Detaches sensors event listeners to the DOM\n   */\n  detach() {\n    document.removeEventListener('mousedown', this[onMouseDown], true);\n  }\n\n  /**\n   * Drag start handler\n   * @private\n   * @param {Event} event - Drag start event\n   */\n  [onDragStart](event) {\n    // Need for firefox. \"text\" key is needed for IE\n    event.dataTransfer.setData('text', '');\n    event.dataTransfer.effectAllowed = this.options.type;\n\n    const target = document.elementFromPoint(event.clientX, event.clientY);\n    this.currentContainer = (0, _utils.closest)(event.target, this.containers);\n\n    if (!this.currentContainer) {\n      return;\n    }\n\n    const dragStartEvent = new _SensorEvent.DragStartSensorEvent({\n      clientX: event.clientX,\n      clientY: event.clientY,\n      target,\n      container: this.currentContainer,\n      originalEvent: event\n    });\n\n    // Workaround\n    setTimeout(() => {\n      this.trigger(this.currentContainer, dragStartEvent);\n\n      if (dragStartEvent.canceled()) {\n        this.dragging = false;\n      } else {\n        this.dragging = true;\n      }\n    }, 0);\n  }\n\n  /**\n   * Drag over handler\n   * @private\n   * @param {Event} event - Drag over event\n   */\n  [onDragOver](event) {\n    if (!this.dragging) {\n      return;\n    }\n\n    const target = document.elementFromPoint(event.clientX, event.clientY);\n    const container = this.currentContainer;\n\n    const dragMoveEvent = new _SensorEvent.DragMoveSensorEvent({\n      clientX: event.clientX,\n      clientY: event.clientY,\n      target,\n      container,\n      originalEvent: event\n    });\n\n    this.trigger(container, dragMoveEvent);\n\n    if (!dragMoveEvent.canceled()) {\n      event.preventDefault();\n      event.dataTransfer.dropEffect = this.options.type;\n    }\n  }\n\n  /**\n   * Drag end handler\n   * @private\n   * @param {Event} event - Drag end event\n   */\n  [onDragEnd](event) {\n    if (!this.dragging) {\n      return;\n    }\n\n    document.removeEventListener('mouseup', this[onMouseUp], true);\n\n    const target = document.elementFromPoint(event.clientX, event.clientY);\n    const container = this.currentContainer;\n\n    const dragStopEvent = new _SensorEvent.DragStopSensorEvent({\n      clientX: event.clientX,\n      clientY: event.clientY,\n      target,\n      container,\n      originalEvent: event\n    });\n\n    this.trigger(container, dragStopEvent);\n\n    this.dragging = false;\n\n    this[reset]();\n  }\n\n  /**\n   * Drop handler\n   * @private\n   * @param {Event} event - Drop event\n   */\n  [onDrop](event) {\n    // eslint-disable-line class-methods-use-this\n    event.preventDefault();\n  }\n\n  /**\n   * Mouse down handler\n   * @private\n   * @param {Event} event - Mouse down event\n   */\n  [onMouseDown](event) {\n    // Firefox bug for inputs within draggables https://bugzilla.mozilla.org/show_bug.cgi?id=739071\n    if (event.target && (event.target.form || event.target.contenteditable)) {\n      return;\n    }\n\n    const nativeDraggableElement = (0, _utils.closest)(event.target, element => element.draggable);\n\n    if (nativeDraggableElement) {\n      nativeDraggableElement.draggable = false;\n      this.nativeDraggableElement = nativeDraggableElement;\n    }\n\n    document.addEventListener('mouseup', this[onMouseUp], true);\n    document.addEventListener('dragstart', this[onDragStart], false);\n    document.addEventListener('dragover', this[onDragOver], false);\n    document.addEventListener('dragend', this[onDragEnd], false);\n    document.addEventListener('drop', this[onDrop], false);\n\n    const target = (0, _utils.closest)(event.target, this.options.draggable);\n\n    if (!target) {\n      return;\n    }\n\n    this.mouseDownTimeout = setTimeout(() => {\n      target.draggable = true;\n      this.draggableElement = target;\n    }, this.options.delay);\n  }\n\n  /**\n   * Mouse up handler\n   * @private\n   * @param {Event} event - Mouse up event\n   */\n  [onMouseUp]() {\n    this[reset]();\n  }\n\n  /**\n   * Mouse up handler\n   * @private\n   * @param {Event} event - Mouse up event\n   */\n  [reset]() {\n    clearTimeout(this.mouseDownTimeout);\n\n    document.removeEventListener('mouseup', this[onMouseUp], true);\n    document.removeEventListener('dragstart', this[onDragStart], false);\n    document.removeEventListener('dragover', this[onDragOver], false);\n    document.removeEventListener('dragend', this[onDragEnd], false);\n    document.removeEventListener('drop', this[onDrop], false);\n\n    if (this.nativeDraggableElement) {\n      this.nativeDraggableElement.draggable = true;\n      this.nativeDraggableElement = null;\n    }\n\n    if (this.draggableElement) {\n      this.draggableElement.draggable = false;\n      this.draggableElement = null;\n    }\n  }\n}\nexports.default = DragSensor;\n\n/***/ }),\n/* 41 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _DragSensor = __webpack_require__(40);\n\nvar _DragSensor2 = _interopRequireDefault(_DragSensor);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _DragSensor2.default;\n\n/***/ }),\n/* 42 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _utils = __webpack_require__(2);\n\nvar _Sensor = __webpack_require__(4);\n\nvar _Sensor2 = _interopRequireDefault(_Sensor);\n\nvar _SensorEvent = __webpack_require__(3);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst onTouchStart = Symbol('onTouchStart');\nconst onTouchHold = Symbol('onTouchHold');\nconst onTouchEnd = Symbol('onTouchEnd');\nconst onTouchMove = Symbol('onTouchMove');\n\n/**\n * Prevents scrolling when set to true\n * @var {Boolean} preventScrolling\n */\nlet preventScrolling = false;\n\n// WebKit requires cancelable `touchmove` events to be added as early as possible\nwindow.addEventListener('touchmove', event => {\n  if (!preventScrolling) {\n    return;\n  }\n\n  // Prevent scrolling\n  event.preventDefault();\n}, { passive: false });\n\n/**\n * This sensor picks up native browser touch events and dictates drag operations\n * @class TouchSensor\n * @module TouchSensor\n * @extends Sensor\n */\nclass TouchSensor extends _Sensor2.default {\n  /**\n   * TouchSensor constructor.\n   * @constructs TouchSensor\n   * @param {HTMLElement[]|NodeList|HTMLElement} containers - Containers\n   * @param {Object} options - Options\n   */\n  constructor(containers = [], options = {}) {\n    super(containers, options);\n\n    /**\n     * Closest scrollable container so accidental scroll can cancel long touch\n     * @property currentScrollableParent\n     * @type {HTMLElement}\n     */\n    this.currentScrollableParent = null;\n\n    /**\n     * TimeoutID for long touch\n     * @property tapTimeout\n     * @type {Number}\n     */\n    this.tapTimeout = null;\n\n    /**\n     * touchMoved indicates if touch has moved during tapTimeout\n     * @property touchMoved\n     * @type {Boolean}\n     */\n    this.touchMoved = false;\n\n    this[onTouchStart] = this[onTouchStart].bind(this);\n    this[onTouchHold] = this[onTouchHold].bind(this);\n    this[onTouchEnd] = this[onTouchEnd].bind(this);\n    this[onTouchMove] = this[onTouchMove].bind(this);\n  }\n\n  /**\n   * Attaches sensors event listeners to the DOM\n   */\n  attach() {\n    document.addEventListener('touchstart', this[onTouchStart]);\n  }\n\n  /**\n   * Detaches sensors event listeners to the DOM\n   */\n  detach() {\n    document.removeEventListener('touchstart', this[onTouchStart]);\n  }\n\n  /**\n   * Touch start handler\n   * @private\n   * @param {Event} event - Touch start event\n   */\n  [onTouchStart](event) {\n    const container = (0, _utils.closest)(event.target, this.containers);\n\n    if (!container) {\n      return;\n    }\n\n    document.addEventListener('touchmove', this[onTouchMove]);\n    document.addEventListener('touchend', this[onTouchEnd]);\n    document.addEventListener('touchcancel', this[onTouchEnd]);\n    container.addEventListener('contextmenu', onContextMenu);\n\n    this.currentContainer = container;\n    this.tapTimeout = setTimeout(this[onTouchHold](event, container), this.options.delay);\n  }\n\n  /**\n   * Touch hold handler\n   * @private\n   * @param {Event} event - Touch start event\n   * @param {HTMLElement} container - Container element\n   */\n  [onTouchHold](event, container) {\n    return () => {\n      if (this.touchMoved) {\n        return;\n      }\n\n      const touch = event.touches[0] || event.changedTouches[0];\n      const target = event.target;\n\n      const dragStartEvent = new _SensorEvent.DragStartSensorEvent({\n        clientX: touch.pageX,\n        clientY: touch.pageY,\n        target,\n        container,\n        originalEvent: event\n      });\n\n      this.trigger(container, dragStartEvent);\n\n      this.dragging = !dragStartEvent.canceled();\n      preventScrolling = this.dragging;\n    };\n  }\n\n  /**\n   * Touch move handler\n   * @private\n   * @param {Event} event - Touch move event\n   */\n  [onTouchMove](event) {\n    this.touchMoved = true;\n\n    if (!this.dragging) {\n      return;\n    }\n\n    const touch = event.touches[0] || event.changedTouches[0];\n    const target = document.elementFromPoint(touch.pageX - window.scrollX, touch.pageY - window.scrollY);\n\n    const dragMoveEvent = new _SensorEvent.DragMoveSensorEvent({\n      clientX: touch.pageX,\n      clientY: touch.pageY,\n      target,\n      container: this.currentContainer,\n      originalEvent: event\n    });\n\n    this.trigger(this.currentContainer, dragMoveEvent);\n  }\n\n  /**\n   * Touch end handler\n   * @private\n   * @param {Event} event - Touch end event\n   */\n  [onTouchEnd](event) {\n    this.touchMoved = false;\n    preventScrolling = false;\n\n    document.removeEventListener('touchend', this[onTouchEnd]);\n    document.removeEventListener('touchcancel', this[onTouchEnd]);\n    document.removeEventListener('touchmove', this[onTouchMove]);\n\n    if (this.currentContainer) {\n      this.currentContainer.removeEventListener('contextmenu', onContextMenu);\n    }\n\n    clearTimeout(this.tapTimeout);\n\n    if (!this.dragging) {\n      return;\n    }\n\n    const touch = event.touches[0] || event.changedTouches[0];\n    const target = document.elementFromPoint(touch.pageX - window.scrollX, touch.pageY - window.scrollY);\n\n    event.preventDefault();\n\n    const dragStopEvent = new _SensorEvent.DragStopSensorEvent({\n      clientX: touch.pageX,\n      clientY: touch.pageY,\n      target,\n      container: this.currentContainer,\n      originalEvent: event\n    });\n\n    this.trigger(this.currentContainer, dragStopEvent);\n\n    this.currentContainer = null;\n    this.dragging = false;\n  }\n}\n\nexports.default = TouchSensor;\nfunction onContextMenu(event) {\n  event.preventDefault();\n  event.stopPropagation();\n}\n\n/***/ }),\n/* 43 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _TouchSensor = __webpack_require__(42);\n\nvar _TouchSensor2 = _interopRequireDefault(_TouchSensor);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _TouchSensor2.default;\n\n/***/ }),\n/* 44 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DragPressureSensorEvent = exports.DragStopSensorEvent = exports.DragMoveSensorEvent = exports.DragStartSensorEvent = exports.SensorEvent = undefined;\n\nvar _AbstractEvent = __webpack_require__(0);\n\nvar _AbstractEvent2 = _interopRequireDefault(_AbstractEvent);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Base sensor event\n * @class SensorEvent\n * @module SensorEvent\n * @extends AbstractEvent\n */\nclass SensorEvent extends _AbstractEvent2.default {\n  /**\n   * Original browser event that triggered a sensor\n   * @property originalEvent\n   * @type {Event}\n   * @readonly\n   */\n  get originalEvent() {\n    return this.data.originalEvent;\n  }\n\n  /**\n   * Normalized clientX for both touch and mouse events\n   * @property clientX\n   * @type {Number}\n   * @readonly\n   */\n  get clientX() {\n    return this.data.clientX;\n  }\n\n  /**\n   * Normalized clientY for both touch and mouse events\n   * @property clientY\n   * @type {Number}\n   * @readonly\n   */\n  get clientY() {\n    return this.data.clientY;\n  }\n\n  /**\n   * Normalized target for both touch and mouse events\n   * Returns the element that is behind cursor or touch pointer\n   * @property target\n   * @type {HTMLElement}\n   * @readonly\n   */\n  get target() {\n    return this.data.target;\n  }\n\n  /**\n   * Container that initiated the sensor\n   * @property container\n   * @type {HTMLElement}\n   * @readonly\n   */\n  get container() {\n    return this.data.container;\n  }\n\n  /**\n   * Trackpad pressure\n   * @property pressure\n   * @type {Number}\n   * @readonly\n   */\n  get pressure() {\n    return this.data.pressure;\n  }\n}\n\nexports.SensorEvent = SensorEvent; /**\n                                    * Drag start sensor event\n                                    * @class DragStartSensorEvent\n                                    * @module DragStartSensorEvent\n                                    * @extends SensorEvent\n                                    */\n\nclass DragStartSensorEvent extends SensorEvent {}\n\nexports.DragStartSensorEvent = DragStartSensorEvent; /**\n                                                      * Drag move sensor event\n                                                      * @class DragMoveSensorEvent\n                                                      * @module DragMoveSensorEvent\n                                                      * @extends SensorEvent\n                                                      */\n\nDragStartSensorEvent.type = 'drag:start';\nclass DragMoveSensorEvent extends SensorEvent {}\n\nexports.DragMoveSensorEvent = DragMoveSensorEvent; /**\n                                                    * Drag stop sensor event\n                                                    * @class DragStopSensorEvent\n                                                    * @module DragStopSensorEvent\n                                                    * @extends SensorEvent\n                                                    */\n\nDragMoveSensorEvent.type = 'drag:move';\nclass DragStopSensorEvent extends SensorEvent {}\n\nexports.DragStopSensorEvent = DragStopSensorEvent; /**\n                                                    * Drag pressure sensor event\n                                                    * @class DragPressureSensorEvent\n                                                    * @module DragPressureSensorEvent\n                                                    * @extends SensorEvent\n                                                    */\n\nDragStopSensorEvent.type = 'drag:stop';\nclass DragPressureSensorEvent extends SensorEvent {}\nexports.DragPressureSensorEvent = DragPressureSensorEvent;\nDragPressureSensorEvent.type = 'drag:pressure';\n\n/***/ }),\n/* 45 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _utils = __webpack_require__(2);\n\nvar _Sensor = __webpack_require__(4);\n\nvar _Sensor2 = _interopRequireDefault(_Sensor);\n\nvar _SensorEvent = __webpack_require__(3);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst onContextMenuWhileDragging = Symbol('onContextMenuWhileDragging');\nconst onMouseDown = Symbol('onMouseDown');\nconst onMouseMove = Symbol('onMouseMove');\nconst onMouseUp = Symbol('onMouseUp');\n\n/**\n * This sensor picks up native browser mouse events and dictates drag operations\n * @class MouseSensor\n * @module MouseSensor\n * @extends Sensor\n */\nclass MouseSensor extends _Sensor2.default {\n  /**\n   * MouseSensor constructor.\n   * @constructs MouseSensor\n   * @param {HTMLElement[]|NodeList|HTMLElement} containers - Containers\n   * @param {Object} options - Options\n   */\n  constructor(containers = [], options = {}) {\n    super(containers, options);\n\n    /**\n     * Indicates if mouse button is still down\n     * @property mouseDown\n     * @type {Boolean}\n     */\n    this.mouseDown = false;\n\n    /**\n     * Mouse down timer which will end up triggering the drag start operation\n     * @property mouseDownTimeout\n     * @type {Number}\n     */\n    this.mouseDownTimeout = null;\n\n    /**\n     * Indicates if context menu has been opened during drag operation\n     * @property openedContextMenu\n     * @type {Boolean}\n     */\n    this.openedContextMenu = false;\n\n    this[onContextMenuWhileDragging] = this[onContextMenuWhileDragging].bind(this);\n    this[onMouseDown] = this[onMouseDown].bind(this);\n    this[onMouseMove] = this[onMouseMove].bind(this);\n    this[onMouseUp] = this[onMouseUp].bind(this);\n  }\n\n  /**\n   * Attaches sensors event listeners to the DOM\n   */\n  attach() {\n    document.addEventListener('mousedown', this[onMouseDown], true);\n  }\n\n  /**\n   * Detaches sensors event listeners to the DOM\n   */\n  detach() {\n    document.removeEventListener('mousedown', this[onMouseDown], true);\n  }\n\n  /**\n   * Mouse down handler\n   * @private\n   * @param {Event} event - Mouse down event\n   */\n  [onMouseDown](event) {\n    if (event.button !== 0 || event.ctrlKey || event.metaKey) {\n      return;\n    }\n\n    document.addEventListener('mouseup', this[onMouseUp]);\n\n    const target = document.elementFromPoint(event.clientX, event.clientY);\n    const container = (0, _utils.closest)(target, this.containers);\n\n    if (!container) {\n      return;\n    }\n\n    document.addEventListener('dragstart', preventNativeDragStart);\n\n    this.mouseDown = true;\n\n    clearTimeout(this.mouseDownTimeout);\n    this.mouseDownTimeout = setTimeout(() => {\n      if (!this.mouseDown) {\n        return;\n      }\n\n      const dragStartEvent = new _SensorEvent.DragStartSensorEvent({\n        clientX: event.clientX,\n        clientY: event.clientY,\n        target,\n        container,\n        originalEvent: event\n      });\n\n      this.trigger(container, dragStartEvent);\n\n      this.currentContainer = container;\n      this.dragging = !dragStartEvent.canceled();\n\n      if (this.dragging) {\n        document.addEventListener('contextmenu', this[onContextMenuWhileDragging]);\n        document.addEventListener('mousemove', this[onMouseMove]);\n      }\n    }, this.options.delay);\n  }\n\n  /**\n   * Mouse move handler\n   * @private\n   * @param {Event} event - Mouse move event\n   */\n  [onMouseMove](event) {\n    if (!this.dragging) {\n      return;\n    }\n\n    const target = document.elementFromPoint(event.clientX, event.clientY);\n\n    const dragMoveEvent = new _SensorEvent.DragMoveSensorEvent({\n      clientX: event.clientX,\n      clientY: event.clientY,\n      target,\n      container: this.currentContainer,\n      originalEvent: event\n    });\n\n    this.trigger(this.currentContainer, dragMoveEvent);\n  }\n\n  /**\n   * Mouse up handler\n   * @private\n   * @param {Event} event - Mouse up event\n   */\n  [onMouseUp](event) {\n    this.mouseDown = Boolean(this.openedContextMenu);\n\n    if (this.openedContextMenu) {\n      this.openedContextMenu = false;\n      return;\n    }\n\n    document.removeEventListener('mouseup', this[onMouseUp]);\n    document.removeEventListener('dragstart', preventNativeDragStart);\n\n    if (!this.dragging) {\n      return;\n    }\n\n    const target = document.elementFromPoint(event.clientX, event.clientY);\n\n    const dragStopEvent = new _SensorEvent.DragStopSensorEvent({\n      clientX: event.clientX,\n      clientY: event.clientY,\n      target,\n      container: this.currentContainer,\n      originalEvent: event\n    });\n\n    this.trigger(this.currentContainer, dragStopEvent);\n\n    document.removeEventListener('contextmenu', this[onContextMenuWhileDragging]);\n    document.removeEventListener('mousemove', this[onMouseMove]);\n\n    this.currentContainer = null;\n    this.dragging = false;\n  }\n\n  /**\n   * Context menu handler\n   * @private\n   * @param {Event} event - Context menu event\n   */\n  [onContextMenuWhileDragging](event) {\n    event.preventDefault();\n    this.openedContextMenu = true;\n  }\n}\n\nexports.default = MouseSensor;\nfunction preventNativeDragStart(event) {\n  event.preventDefault();\n}\n\n/***/ }),\n/* 46 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _MouseSensor = __webpack_require__(45);\n\nvar _MouseSensor2 = _interopRequireDefault(_MouseSensor);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _MouseSensor2.default;\n\n/***/ }),\n/* 47 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\n/**\n * Base sensor class. Extend from this class to create a new or custom sensor\n * @class Sensor\n * @module Sensor\n */\nclass Sensor {\n  /**\n   * Sensor constructor.\n   * @constructs Sensor\n   * @param {HTMLElement[]|NodeList|HTMLElement} containers - Containers\n   * @param {Object} options - Options\n   */\n  constructor(containers = [], options = {}) {\n    /**\n     * Current containers\n     * @property containers\n     * @type {HTMLElement[]}\n     */\n    this.containers = [...containers];\n\n    /**\n     * Current options\n     * @property options\n     * @type {Object}\n     */\n    this.options = _extends({}, options);\n\n    /**\n     * Current drag state\n     * @property dragging\n     * @type {Boolean}\n     */\n    this.dragging = false;\n\n    /**\n     * Current container\n     * @property currentContainer\n     * @type {HTMLElement}\n     */\n    this.currentContainer = null;\n  }\n\n  /**\n   * Attaches sensors event listeners to the DOM\n   * @return {Sensor}\n   */\n  attach() {\n    return this;\n  }\n\n  /**\n   * Detaches sensors event listeners to the DOM\n   * @return {Sensor}\n   */\n  detach() {\n    return this;\n  }\n\n  /**\n   * Adds container to this sensor instance\n   * @param {...HTMLElement} containers - Containers you want to add to this sensor\n   * @example draggable.addContainer(document.body)\n   */\n  addContainer(...containers) {\n    this.containers = [...this.containers, ...containers];\n  }\n\n  /**\n   * Removes container from this sensor instance\n   * @param {...HTMLElement} containers - Containers you want to remove from this sensor\n   * @example draggable.removeContainer(document.body)\n   */\n  removeContainer(...containers) {\n    this.containers = this.containers.filter(container => !containers.includes(container));\n  }\n\n  /**\n   * Triggers event on target element\n   * @param {HTMLElement} element - Element to trigger event on\n   * @param {SensorEvent} sensorEvent - Sensor event to trigger\n   */\n  trigger(element, sensorEvent) {\n    const event = document.createEvent('Event');\n    event.detail = sensorEvent;\n    event.initEvent(sensorEvent.type, true, true);\n    element.dispatchEvent(event);\n    this.lastEvent = sensorEvent;\n\n    return sensorEvent;\n  }\n}\nexports.default = Sensor;\n\n/***/ }),\n/* 48 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = requestNextAnimationFrame;\nfunction requestNextAnimationFrame(callback) {\n  return requestAnimationFrame(() => {\n    requestAnimationFrame(callback);\n  });\n}\n\n/***/ }),\n/* 49 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _requestNextAnimationFrame = __webpack_require__(48);\n\nvar _requestNextAnimationFrame2 = _interopRequireDefault(_requestNextAnimationFrame);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _requestNextAnimationFrame2.default;\n\n/***/ }),\n/* 50 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = closest;\nconst matchFunction = Element.prototype.matches || Element.prototype.webkitMatchesSelector || Element.prototype.mozMatchesSelector || Element.prototype.msMatchesSelector;\n\n/**\n * Get the closest parent element of a given element that matches the given\n * selector string or matching function\n *\n * @param {Element} element The child element to find a parent of\n * @param {String|Function} selector The string or function to use to match\n *     the parent element\n * @return {Element|null}\n */\nfunction closest(element, value) {\n  if (!element) {\n    return null;\n  }\n\n  const selector = value;\n  const callback = value;\n  const nodeList = value;\n  const singleElement = value;\n\n  const isSelector = Boolean(typeof value === 'string');\n  const isFunction = Boolean(typeof value === 'function');\n  const isNodeList = Boolean(value instanceof NodeList || value instanceof Array);\n  const isElement = Boolean(value instanceof HTMLElement);\n\n  function conditionFn(currentElement) {\n    if (!currentElement) {\n      return currentElement;\n    } else if (isSelector) {\n      return matchFunction.call(currentElement, selector);\n    } else if (isNodeList) {\n      return [...nodeList].includes(currentElement);\n    } else if (isElement) {\n      return singleElement === currentElement;\n    } else if (isFunction) {\n      return callback(currentElement);\n    } else {\n      return null;\n    }\n  }\n\n  let current = element;\n\n  do {\n    current = current.correspondingUseElement || current.correspondingElement || current;\n\n    if (conditionFn(current)) {\n      return current;\n    }\n\n    current = current.parentNode;\n  } while (current && current !== document.body && current !== document);\n\n  return null;\n}\n\n/***/ }),\n/* 51 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _closest = __webpack_require__(50);\n\nvar _closest2 = _interopRequireDefault(_closest);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _closest2.default;\n\n/***/ }),\n/* 52 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.defaultOptions = exports.scroll = exports.onDragStop = exports.onDragMove = exports.onDragStart = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _AbstractPlugin = __webpack_require__(1);\n\nvar _AbstractPlugin2 = _interopRequireDefault(_AbstractPlugin);\n\nvar _utils = __webpack_require__(2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst onDragStart = exports.onDragStart = Symbol('onDragStart');\nconst onDragMove = exports.onDragMove = Symbol('onDragMove');\nconst onDragStop = exports.onDragStop = Symbol('onDragStop');\nconst scroll = exports.scroll = Symbol('scroll');\n\n/**\n * Scrollable default options\n * @property {Object} defaultOptions\n * @property {Number} defaultOptions.speed\n * @property {Number} defaultOptions.sensitivity\n * @property {HTMLElement[]} defaultOptions.scrollableElements\n * @type {Object}\n */\nconst defaultOptions = exports.defaultOptions = {\n  speed: 6,\n  sensitivity: 50,\n  scrollableElements: []\n};\n\n/**\n * Scrollable plugin which scrolls the closest scrollable parent\n * @class Scrollable\n * @module Scrollable\n * @extends AbstractPlugin\n */\nclass Scrollable extends _AbstractPlugin2.default {\n  /**\n   * Scrollable constructor.\n   * @constructs Scrollable\n   * @param {Draggable} draggable - Draggable instance\n   */\n  constructor(draggable) {\n    super(draggable);\n\n    /**\n     * Scrollable options\n     * @property {Object} options\n     * @property {Number} options.speed\n     * @property {Number} options.sensitivity\n     * @property {HTMLElement[]} options.scrollableElements\n     * @type {Object}\n     */\n    this.options = _extends({}, defaultOptions, this.getOptions());\n\n    /**\n     * Keeps current mouse position\n     * @property {Object} currentMousePosition\n     * @property {Number} currentMousePosition.clientX\n     * @property {Number} currentMousePosition.clientY\n     * @type {Object|null}\n     */\n    this.currentMousePosition = null;\n\n    /**\n     * Scroll animation frame\n     * @property scrollAnimationFrame\n     * @type {Number|null}\n     */\n    this.scrollAnimationFrame = null;\n\n    /**\n     * Closest scrollable element\n     * @property scrollableElement\n     * @type {HTMLElement|null}\n     */\n    this.scrollableElement = null;\n\n    /**\n     * Animation frame looking for the closest scrollable element\n     * @property findScrollableElementFrame\n     * @type {Number|null}\n     */\n    this.findScrollableElementFrame = null;\n\n    this[onDragStart] = this[onDragStart].bind(this);\n    this[onDragMove] = this[onDragMove].bind(this);\n    this[onDragStop] = this[onDragStop].bind(this);\n    this[scroll] = this[scroll].bind(this);\n  }\n\n  /**\n   * Attaches plugins event listeners\n   */\n  attach() {\n    this.draggable.on('drag:start', this[onDragStart]).on('drag:move', this[onDragMove]).on('drag:stop', this[onDragStop]);\n  }\n\n  /**\n   * Detaches plugins event listeners\n   */\n  detach() {\n    this.draggable.off('drag:start', this[onDragStart]).off('drag:move', this[onDragMove]).off('drag:stop', this[onDragStop]);\n  }\n\n  /**\n   * Returns options passed through draggable\n   * @return {Object}\n   */\n  getOptions() {\n    return this.draggable.options.scrollable || {};\n  }\n\n  /**\n   * Returns closest scrollable elements by element\n   * @param {HTMLElement} target\n   * @return {HTMLElement}\n   */\n  getScrollableElement(target) {\n    if (this.hasDefinedScrollableElements()) {\n      return (0, _utils.closest)(target, this.options.scrollableElements) || document.documentElement;\n    } else {\n      return closestScrollableElement(target);\n    }\n  }\n\n  /**\n   * Returns true if at least one scrollable element have been defined via options\n   * @param {HTMLElement} target\n   * @return {Boolean}\n   */\n  hasDefinedScrollableElements() {\n    return Boolean(this.options.scrollableElements.length !== 0);\n  }\n\n  /**\n   * Drag start handler. Finds closest scrollable parent in separate frame\n   * @param {DragStartEvent} dragEvent\n   * @private\n   */\n  [onDragStart](dragEvent) {\n    this.findScrollableElementFrame = requestAnimationFrame(() => {\n      this.scrollableElement = this.getScrollableElement(dragEvent.source);\n    });\n  }\n\n  /**\n   * Drag move handler. Remembers mouse position and initiates scrolling\n   * @param {DragMoveEvent} dragEvent\n   * @private\n   */\n  [onDragMove](dragEvent) {\n    this.findScrollableElementFrame = requestAnimationFrame(() => {\n      this.scrollableElement = this.getScrollableElement(dragEvent.sensorEvent.target);\n    });\n\n    if (!this.scrollableElement) {\n      return;\n    }\n\n    const sensorEvent = dragEvent.sensorEvent;\n    const scrollOffset = { x: 0, y: 0 };\n\n    if ('ontouchstart' in window) {\n      scrollOffset.y = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0;\n      scrollOffset.x = window.pageXOffset || document.documentElement.scrollLeft || document.body.scrollLeft || 0;\n    }\n\n    this.currentMousePosition = {\n      clientX: sensorEvent.clientX - scrollOffset.x,\n      clientY: sensorEvent.clientY - scrollOffset.y\n    };\n\n    this.scrollAnimationFrame = requestAnimationFrame(this[scroll]);\n  }\n\n  /**\n   * Drag stop handler. Cancels scroll animations and resets state\n   * @private\n   */\n  [onDragStop]() {\n    cancelAnimationFrame(this.scrollAnimationFrame);\n    cancelAnimationFrame(this.findScrollableElementFrame);\n\n    this.scrollableElement = null;\n    this.scrollAnimationFrame = null;\n    this.findScrollableElementFrame = null;\n    this.currentMousePosition = null;\n  }\n\n  /**\n   * Scroll function that does the heavylifting\n   * @private\n   */\n  [scroll]() {\n    if (!this.scrollableElement || !this.currentMousePosition) {\n      return;\n    }\n\n    cancelAnimationFrame(this.scrollAnimationFrame);\n\n    const { speed, sensitivity } = this.options;\n\n    const rect = this.scrollableElement.getBoundingClientRect();\n    const bottomCutOff = rect.bottom > window.innerHeight;\n    const topCutOff = rect.top < 0;\n    const cutOff = topCutOff || bottomCutOff;\n\n    const documentScrollingElement = getDocumentScrollingElement();\n    const scrollableElement = this.scrollableElement;\n    const clientX = this.currentMousePosition.clientX;\n    const clientY = this.currentMousePosition.clientY;\n\n    if (scrollableElement !== document.body && scrollableElement !== document.documentElement && !cutOff) {\n      const { offsetHeight, offsetWidth } = scrollableElement;\n\n      if (rect.top + offsetHeight - clientY < sensitivity) {\n        scrollableElement.scrollTop += speed;\n      } else if (clientY - rect.top < sensitivity) {\n        scrollableElement.scrollTop -= speed;\n      }\n\n      if (rect.left + offsetWidth - clientX < sensitivity) {\n        scrollableElement.scrollLeft += speed;\n      } else if (clientX - rect.left < sensitivity) {\n        scrollableElement.scrollLeft -= speed;\n      }\n    } else {\n      const { innerHeight, innerWidth } = window;\n\n      if (clientY < sensitivity) {\n        documentScrollingElement.scrollTop -= speed;\n      } else if (innerHeight - clientY < sensitivity) {\n        documentScrollingElement.scrollTop += speed;\n      }\n\n      if (clientX < sensitivity) {\n        documentScrollingElement.scrollLeft -= speed;\n      } else if (innerWidth - clientX < sensitivity) {\n        documentScrollingElement.scrollLeft += speed;\n      }\n    }\n\n    this.scrollAnimationFrame = requestAnimationFrame(this[scroll]);\n  }\n}\n\nexports.default = Scrollable; /**\n                               * Returns true if the passed element has overflow\n                               * @param {HTMLElement} element\n                               * @return {Boolean}\n                               * @private\n                               */\n\nfunction hasOverflow(element) {\n  const overflowRegex = /(auto|scroll)/;\n  const computedStyles = getComputedStyle(element, null);\n\n  const overflow = computedStyles.getPropertyValue('overflow') + computedStyles.getPropertyValue('overflow-y') + computedStyles.getPropertyValue('overflow-x');\n\n  return overflowRegex.test(overflow);\n}\n\n/**\n * Returns true if the passed element is statically positioned\n * @param {HTMLElement} element\n * @return {Boolean}\n * @private\n */\nfunction isStaticallyPositioned(element) {\n  const position = getComputedStyle(element).getPropertyValue('position');\n  return position === 'static';\n}\n\n/**\n * Finds closest scrollable element\n * @param {HTMLElement} element\n * @return {HTMLElement}\n * @private\n */\nfunction closestScrollableElement(element) {\n  if (!element) {\n    return getDocumentScrollingElement();\n  }\n\n  const position = getComputedStyle(element).getPropertyValue('position');\n  const excludeStaticParents = position === 'absolute';\n\n  const scrollableElement = (0, _utils.closest)(element, parent => {\n    if (excludeStaticParents && isStaticallyPositioned(parent)) {\n      return false;\n    }\n    return hasOverflow(parent);\n  });\n\n  if (position === 'fixed' || !scrollableElement) {\n    return getDocumentScrollingElement();\n  } else {\n    return scrollableElement;\n  }\n}\n\n/**\n * Returns element that scrolls document\n * @return {HTMLElement}\n * @private\n */\nfunction getDocumentScrollingElement() {\n  return document.scrollingElement || document.documentElement;\n}\n\n/***/ }),\n/* 53 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.defaultOptions = undefined;\n\nvar _Scrollable = __webpack_require__(52);\n\nvar _Scrollable2 = _interopRequireDefault(_Scrollable);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _Scrollable2.default;\nexports.defaultOptions = _Scrollable.defaultOptions;\n\n/***/ }),\n/* 54 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MirrorDestroyEvent = exports.MirrorMoveEvent = exports.MirrorAttachedEvent = exports.MirrorCreatedEvent = exports.MirrorCreateEvent = exports.MirrorEvent = undefined;\n\nvar _AbstractEvent = __webpack_require__(0);\n\nvar _AbstractEvent2 = _interopRequireDefault(_AbstractEvent);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Base mirror event\n * @class MirrorEvent\n * @module MirrorEvent\n * @extends AbstractEvent\n */\nclass MirrorEvent extends _AbstractEvent2.default {\n  /**\n   * Draggables source element\n   * @property source\n   * @type {HTMLElement}\n   * @readonly\n   */\n  get source() {\n    return this.data.source;\n  }\n\n  /**\n   * Draggables original source element\n   * @property originalSource\n   * @type {HTMLElement}\n   * @readonly\n   */\n  get originalSource() {\n    return this.data.originalSource;\n  }\n\n  /**\n   * Draggables source container element\n   * @property sourceContainer\n   * @type {HTMLElement}\n   * @readonly\n   */\n  get sourceContainer() {\n    return this.data.sourceContainer;\n  }\n\n  /**\n   * Sensor event\n   * @property sensorEvent\n   * @type {SensorEvent}\n   * @readonly\n   */\n  get sensorEvent() {\n    return this.data.sensorEvent;\n  }\n\n  /**\n   * Drag event\n   * @property dragEvent\n   * @type {DragEvent}\n   * @readonly\n   */\n  get dragEvent() {\n    return this.data.dragEvent;\n  }\n\n  /**\n   * Original event that triggered sensor event\n   * @property originalEvent\n   * @type {Event}\n   * @readonly\n   */\n  get originalEvent() {\n    if (this.sensorEvent) {\n      return this.sensorEvent.originalEvent;\n    }\n\n    return null;\n  }\n}\n\nexports.MirrorEvent = MirrorEvent; /**\n                                    * Mirror create event\n                                    * @class MirrorCreateEvent\n                                    * @module MirrorCreateEvent\n                                    * @extends MirrorEvent\n                                    */\n\nclass MirrorCreateEvent extends MirrorEvent {}\n\nexports.MirrorCreateEvent = MirrorCreateEvent; /**\n                                                * Mirror created event\n                                                * @class MirrorCreatedEvent\n                                                * @module MirrorCreatedEvent\n                                                * @extends MirrorEvent\n                                                */\n\nMirrorCreateEvent.type = 'mirror:create';\nclass MirrorCreatedEvent extends MirrorEvent {\n\n  /**\n   * Draggables mirror element\n   * @property mirror\n   * @type {HTMLElement}\n   * @readonly\n   */\n  get mirror() {\n    return this.data.mirror;\n  }\n}\n\nexports.MirrorCreatedEvent = MirrorCreatedEvent; /**\n                                                  * Mirror attached event\n                                                  * @class MirrorAttachedEvent\n                                                  * @module MirrorAttachedEvent\n                                                  * @extends MirrorEvent\n                                                  */\n\nMirrorCreatedEvent.type = 'mirror:created';\nclass MirrorAttachedEvent extends MirrorEvent {\n\n  /**\n   * Draggables mirror element\n   * @property mirror\n   * @type {HTMLElement}\n   * @readonly\n   */\n  get mirror() {\n    return this.data.mirror;\n  }\n}\n\nexports.MirrorAttachedEvent = MirrorAttachedEvent; /**\n                                                    * Mirror move event\n                                                    * @class MirrorMoveEvent\n                                                    * @module MirrorMoveEvent\n                                                    * @extends MirrorEvent\n                                                    */\n\nMirrorAttachedEvent.type = 'mirror:attached';\nclass MirrorMoveEvent extends MirrorEvent {\n\n  /**\n   * Draggables mirror element\n   * @property mirror\n   * @type {HTMLElement}\n   * @readonly\n   */\n  get mirror() {\n    return this.data.mirror;\n  }\n}\n\nexports.MirrorMoveEvent = MirrorMoveEvent; /**\n                                            * Mirror destroy event\n                                            * @class MirrorDestroyEvent\n                                            * @module MirrorDestroyEvent\n                                            * @extends MirrorEvent\n                                            */\n\nMirrorMoveEvent.type = 'mirror:move';\nMirrorMoveEvent.cancelable = true;\nclass MirrorDestroyEvent extends MirrorEvent {\n\n  /**\n   * Draggables mirror element\n   * @property mirror\n   * @type {HTMLElement}\n   * @readonly\n   */\n  get mirror() {\n    return this.data.mirror;\n  }\n}\nexports.MirrorDestroyEvent = MirrorDestroyEvent;\nMirrorDestroyEvent.type = 'mirror:destroy';\nMirrorDestroyEvent.cancelable = true;\n\n/***/ }),\n/* 55 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _MirrorEvent = __webpack_require__(54);\n\nObject.keys(_MirrorEvent).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function () {\n      return _MirrorEvent[key];\n    }\n  });\n});\n\n/***/ }),\n/* 56 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.defaultOptions = exports.getAppendableContainer = exports.onScroll = exports.onMirrorMove = exports.onMirrorCreated = exports.onDragStop = exports.onDragMove = exports.onDragStart = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _AbstractPlugin = __webpack_require__(1);\n\nvar _AbstractPlugin2 = _interopRequireDefault(_AbstractPlugin);\n\nvar _MirrorEvent = __webpack_require__(55);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nconst onDragStart = exports.onDragStart = Symbol('onDragStart');\nconst onDragMove = exports.onDragMove = Symbol('onDragMove');\nconst onDragStop = exports.onDragStop = Symbol('onDragStop');\nconst onMirrorCreated = exports.onMirrorCreated = Symbol('onMirrorCreated');\nconst onMirrorMove = exports.onMirrorMove = Symbol('onMirrorMove');\nconst onScroll = exports.onScroll = Symbol('onScroll');\nconst getAppendableContainer = exports.getAppendableContainer = Symbol('getAppendableContainer');\n\n/**\n * Mirror default options\n * @property {Object} defaultOptions\n * @property {Boolean} defaultOptions.constrainDimensions\n * @property {Boolean} defaultOptions.xAxis\n * @property {Boolean} defaultOptions.yAxis\n * @property {null} defaultOptions.cursorOffsetX\n * @property {null} defaultOptions.cursorOffsetY\n * @type {Object}\n */\nconst defaultOptions = exports.defaultOptions = {\n  constrainDimensions: false,\n  xAxis: true,\n  yAxis: true,\n  cursorOffsetX: null,\n  cursorOffsetY: null\n};\n\n/**\n * Mirror plugin which controls the mirror positioning while dragging\n * @class Mirror\n * @module Mirror\n * @extends AbstractPlugin\n */\nclass Mirror extends _AbstractPlugin2.default {\n  /**\n   * Mirror constructor.\n   * @constructs Mirror\n   * @param {Draggable} draggable - Draggable instance\n   */\n  constructor(draggable) {\n    super(draggable);\n\n    /**\n     * Mirror options\n     * @property {Object} options\n     * @property {Boolean} options.constrainDimensions\n     * @property {Boolean} options.xAxis\n     * @property {Boolean} options.yAxis\n     * @property {Number|null} options.cursorOffsetX\n     * @property {Number|null} options.cursorOffsetY\n     * @property {String|HTMLElement|Function} options.appendTo\n     * @type {Object}\n     */\n    this.options = _extends({}, defaultOptions, this.getOptions());\n\n    /**\n     * Scroll offset for touch devices because the mirror is positioned fixed\n     * @property {Object} scrollOffset\n     * @property {Number} scrollOffset.x\n     * @property {Number} scrollOffset.y\n     */\n    this.scrollOffset = { x: 0, y: 0 };\n\n    /**\n     * Initial scroll offset for touch devices because the mirror is positioned fixed\n     * @property {Object} scrollOffset\n     * @property {Number} scrollOffset.x\n     * @property {Number} scrollOffset.y\n     */\n    this.initialScrollOffset = {\n      x: window.scrollX,\n      y: window.scrollY\n    };\n\n    this[onDragStart] = this[onDragStart].bind(this);\n    this[onDragMove] = this[onDragMove].bind(this);\n    this[onDragStop] = this[onDragStop].bind(this);\n    this[onMirrorCreated] = this[onMirrorCreated].bind(this);\n    this[onMirrorMove] = this[onMirrorMove].bind(this);\n    this[onScroll] = this[onScroll].bind(this);\n  }\n\n  /**\n   * Attaches plugins event listeners\n   */\n  attach() {\n    this.draggable.on('drag:start', this[onDragStart]).on('drag:move', this[onDragMove]).on('drag:stop', this[onDragStop]).on('mirror:created', this[onMirrorCreated]).on('mirror:move', this[onMirrorMove]);\n  }\n\n  /**\n   * Detaches plugins event listeners\n   */\n  detach() {\n    this.draggable.off('drag:start', this[onDragStart]).off('drag:move', this[onDragMove]).off('drag:stop', this[onDragStop]).off('mirror:created', this[onMirrorCreated]).off('mirror:move', this[onMirrorMove]);\n  }\n\n  /**\n   * Returns options passed through draggable\n   * @return {Object}\n   */\n  getOptions() {\n    return this.draggable.options.mirror || {};\n  }\n\n  [onDragStart](dragEvent) {\n    if (dragEvent.canceled()) {\n      return;\n    }\n\n    if ('ontouchstart' in window) {\n      document.addEventListener('scroll', this[onScroll], true);\n    }\n\n    this.initialScrollOffset = {\n      x: window.scrollX,\n      y: window.scrollY\n    };\n\n    const { source, originalSource, sourceContainer, sensorEvent } = dragEvent;\n\n    const mirrorCreateEvent = new _MirrorEvent.MirrorCreateEvent({\n      source,\n      originalSource,\n      sourceContainer,\n      sensorEvent,\n      dragEvent\n    });\n\n    this.draggable.trigger(mirrorCreateEvent);\n\n    if (isNativeDragEvent(sensorEvent) || mirrorCreateEvent.canceled()) {\n      return;\n    }\n\n    const appendableContainer = this[getAppendableContainer](source) || sourceContainer;\n    this.mirror = source.cloneNode(true);\n\n    const mirrorCreatedEvent = new _MirrorEvent.MirrorCreatedEvent({\n      source,\n      originalSource,\n      sourceContainer,\n      sensorEvent,\n      dragEvent,\n      mirror: this.mirror\n    });\n\n    const mirrorAttachedEvent = new _MirrorEvent.MirrorAttachedEvent({\n      source,\n      originalSource,\n      sourceContainer,\n      sensorEvent,\n      dragEvent,\n      mirror: this.mirror\n    });\n\n    this.draggable.trigger(mirrorCreatedEvent);\n    appendableContainer.appendChild(this.mirror);\n    this.draggable.trigger(mirrorAttachedEvent);\n  }\n\n  [onDragMove](dragEvent) {\n    if (!this.mirror || dragEvent.canceled()) {\n      return;\n    }\n\n    const { source, originalSource, sourceContainer, sensorEvent } = dragEvent;\n\n    const mirrorMoveEvent = new _MirrorEvent.MirrorMoveEvent({\n      source,\n      originalSource,\n      sourceContainer,\n      sensorEvent,\n      dragEvent,\n      mirror: this.mirror\n    });\n\n    this.draggable.trigger(mirrorMoveEvent);\n  }\n\n  [onDragStop](dragEvent) {\n    if ('ontouchstart' in window) {\n      document.removeEventListener('scroll', this[onScroll], true);\n    }\n\n    this.initialScrollOffset = { x: 0, y: 0 };\n    this.scrollOffset = { x: 0, y: 0 };\n\n    if (!this.mirror) {\n      return;\n    }\n\n    const { source, sourceContainer, sensorEvent } = dragEvent;\n\n    const mirrorDestroyEvent = new _MirrorEvent.MirrorDestroyEvent({\n      source,\n      mirror: this.mirror,\n      sourceContainer,\n      sensorEvent,\n      dragEvent\n    });\n\n    this.draggable.trigger(mirrorDestroyEvent);\n\n    if (!mirrorDestroyEvent.canceled()) {\n      this.mirror.parentNode.removeChild(this.mirror);\n    }\n  }\n\n  [onScroll]() {\n    this.scrollOffset = {\n      x: window.scrollX - this.initialScrollOffset.x,\n      y: window.scrollY - this.initialScrollOffset.y\n    };\n  }\n\n  /**\n   * Mirror created handler\n   * @param {MirrorCreatedEvent} mirrorEvent\n   * @return {Promise}\n   * @private\n   */\n  [onMirrorCreated]({ mirror, source, sensorEvent }) {\n    const mirrorClass = this.draggable.getClassNameFor('mirror');\n\n    const setState = (_ref) => {\n      let { mirrorOffset, initialX, initialY } = _ref,\n          args = _objectWithoutProperties(_ref, ['mirrorOffset', 'initialX', 'initialY']);\n\n      this.mirrorOffset = mirrorOffset;\n      this.initialX = initialX;\n      this.initialY = initialY;\n      return _extends({ mirrorOffset, initialX, initialY }, args);\n    };\n\n    const initialState = {\n      mirror,\n      source,\n      sensorEvent,\n      mirrorClass,\n      scrollOffset: this.scrollOffset,\n      options: this.options\n    };\n\n    return Promise.resolve(initialState)\n    // Fix reflow here\n    .then(computeMirrorDimensions).then(calculateMirrorOffset).then(resetMirror).then(addMirrorClasses).then(positionMirror({ initial: true })).then(removeMirrorID).then(setState);\n  }\n\n  /**\n   * Mirror move handler\n   * @param {MirrorMoveEvent} mirrorEvent\n   * @return {Promise|null}\n   * @private\n   */\n  [onMirrorMove](mirrorEvent) {\n    if (mirrorEvent.canceled()) {\n      return null;\n    }\n\n    const initialState = {\n      mirror: mirrorEvent.mirror,\n      sensorEvent: mirrorEvent.sensorEvent,\n      mirrorOffset: this.mirrorOffset,\n      options: this.options,\n      initialX: this.initialX,\n      initialY: this.initialY,\n      scrollOffset: this.scrollOffset\n    };\n\n    return Promise.resolve(initialState).then(positionMirror({ raf: true }));\n  }\n\n  /**\n   * Returns appendable container for mirror based on the appendTo option\n   * @private\n   * @param {Object} options\n   * @param {HTMLElement} options.source - Current source\n   * @return {HTMLElement}\n   */\n  [getAppendableContainer](source) {\n    const appendTo = this.options.appendTo;\n\n    if (typeof appendTo === 'string') {\n      return document.querySelector(appendTo);\n    } else if (appendTo instanceof HTMLElement) {\n      return appendTo;\n    } else if (typeof appendTo === 'function') {\n      return appendTo(source);\n    } else {\n      return source.parentNode;\n    }\n  }\n}\n\nexports.default = Mirror; /**\n                           * Computes mirror dimensions based on the source element\n                           * Adds sourceRect to state\n                           * @param {Object} state\n                           * @param {HTMLElement} state.source\n                           * @return {Promise}\n                           * @private\n                           */\n\nfunction computeMirrorDimensions(_ref2) {\n  let { source } = _ref2,\n      args = _objectWithoutProperties(_ref2, ['source']);\n\n  return withPromise(resolve => {\n    const sourceRect = source.getBoundingClientRect();\n    resolve(_extends({ source, sourceRect }, args));\n  });\n}\n\n/**\n * Calculates mirror offset\n * Adds mirrorOffset to state\n * @param {Object} state\n * @param {SensorEvent} state.sensorEvent\n * @param {DOMRect} state.sourceRect\n * @return {Promise}\n * @private\n */\nfunction calculateMirrorOffset(_ref3) {\n  let { sensorEvent, sourceRect, options } = _ref3,\n      args = _objectWithoutProperties(_ref3, ['sensorEvent', 'sourceRect', 'options']);\n\n  return withPromise(resolve => {\n    const top = options.cursorOffsetY === null ? sensorEvent.clientY - sourceRect.top : options.cursorOffsetY;\n    const left = options.cursorOffsetX === null ? sensorEvent.clientX - sourceRect.left : options.cursorOffsetX;\n\n    const mirrorOffset = { top, left };\n\n    resolve(_extends({ sensorEvent, sourceRect, mirrorOffset, options }, args));\n  });\n}\n\n/**\n * Applys mirror styles\n * @param {Object} state\n * @param {HTMLElement} state.mirror\n * @param {HTMLElement} state.source\n * @param {Object} state.options\n * @return {Promise}\n * @private\n */\nfunction resetMirror(_ref4) {\n  let { mirror, source, options } = _ref4,\n      args = _objectWithoutProperties(_ref4, ['mirror', 'source', 'options']);\n\n  return withPromise(resolve => {\n    let offsetHeight;\n    let offsetWidth;\n\n    if (options.constrainDimensions) {\n      const computedSourceStyles = getComputedStyle(source);\n      offsetHeight = computedSourceStyles.getPropertyValue('height');\n      offsetWidth = computedSourceStyles.getPropertyValue('width');\n    }\n\n    mirror.style.position = 'fixed';\n    mirror.style.pointerEvents = 'none';\n    mirror.style.top = 0;\n    mirror.style.left = 0;\n    mirror.style.margin = 0;\n\n    if (options.constrainDimensions) {\n      mirror.style.height = offsetHeight;\n      mirror.style.width = offsetWidth;\n    }\n\n    resolve(_extends({ mirror, source, options }, args));\n  });\n}\n\n/**\n * Applys mirror class on mirror element\n * @param {Object} state\n * @param {HTMLElement} state.mirror\n * @param {String} state.mirrorClass\n * @return {Promise}\n * @private\n */\nfunction addMirrorClasses(_ref5) {\n  let { mirror, mirrorClass } = _ref5,\n      args = _objectWithoutProperties(_ref5, ['mirror', 'mirrorClass']);\n\n  return withPromise(resolve => {\n    mirror.classList.add(mirrorClass);\n    resolve(_extends({ mirror, mirrorClass }, args));\n  });\n}\n\n/**\n * Removes source ID from cloned mirror element\n * @param {Object} state\n * @param {HTMLElement} state.mirror\n * @return {Promise}\n * @private\n */\nfunction removeMirrorID(_ref6) {\n  let { mirror } = _ref6,\n      args = _objectWithoutProperties(_ref6, ['mirror']);\n\n  return withPromise(resolve => {\n    mirror.removeAttribute('id');\n    delete mirror.id;\n    resolve(_extends({ mirror }, args));\n  });\n}\n\n/**\n * Positions mirror with translate3d\n * @param {Object} state\n * @param {HTMLElement} state.mirror\n * @param {SensorEvent} state.sensorEvent\n * @param {Object} state.mirrorOffset\n * @param {Number} state.initialY\n * @param {Number} state.initialX\n * @param {Object} state.options\n * @return {Promise}\n * @private\n */\nfunction positionMirror({ withFrame = false, initial = false } = {}) {\n  return (_ref7) => {\n    let { mirror, sensorEvent, mirrorOffset, initialY, initialX, scrollOffset, options } = _ref7,\n        args = _objectWithoutProperties(_ref7, ['mirror', 'sensorEvent', 'mirrorOffset', 'initialY', 'initialX', 'scrollOffset', 'options']);\n\n    return withPromise(resolve => {\n      const result = _extends({\n        mirror,\n        sensorEvent,\n        mirrorOffset,\n        options\n      }, args);\n\n      if (mirrorOffset) {\n        const x = sensorEvent.clientX - mirrorOffset.left - scrollOffset.x;\n        const y = sensorEvent.clientY - mirrorOffset.top - scrollOffset.y;\n\n        if (options.xAxis && options.yAxis || initial) {\n          mirror.style.transform = `translate3d(${x}px, ${y}px, 0)`;\n        } else if (options.xAxis && !options.yAxis) {\n          mirror.style.transform = `translate3d(${x}px, ${initialY}px, 0)`;\n        } else if (options.yAxis && !options.xAxis) {\n          mirror.style.transform = `translate3d(${initialX}px, ${y}px, 0)`;\n        }\n\n        if (initial) {\n          result.initialX = x;\n          result.initialY = y;\n        }\n      }\n\n      resolve(result);\n    }, { frame: withFrame });\n  };\n}\n\n/**\n * Wraps functions in promise with potential animation frame option\n * @param {Function} callback\n * @param {Object} options\n * @param {Boolean} options.raf\n * @return {Promise}\n * @private\n */\nfunction withPromise(callback, { raf = false } = {}) {\n  return new Promise((resolve, reject) => {\n    if (raf) {\n      requestAnimationFrame(() => {\n        callback(resolve, reject);\n      });\n    } else {\n      callback(resolve, reject);\n    }\n  });\n}\n\n/**\n * Returns true if the sensor event was triggered by a native browser drag event\n * @param {SensorEvent} sensorEvent\n */\nfunction isNativeDragEvent(sensorEvent) {\n  return (/^drag/.test(sensorEvent.originalEvent.type)\n  );\n}\n\n/***/ }),\n/* 57 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.defaultOptions = undefined;\n\nvar _Mirror = __webpack_require__(56);\n\nvar _Mirror2 = _interopRequireDefault(_Mirror);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _Mirror2.default;\nexports.defaultOptions = _Mirror.defaultOptions;\n\n/***/ }),\n/* 58 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _AbstractPlugin = __webpack_require__(1);\n\nvar _AbstractPlugin2 = _interopRequireDefault(_AbstractPlugin);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst onInitialize = Symbol('onInitialize');\nconst onDestroy = Symbol('onDestroy');\n\n/**\n * Focusable default options\n * @property {Object} defaultOptions\n * @type {Object}\n */\nconst defaultOptions = {};\n\n/**\n * Focusable plugin\n * @class Focusable\n * @module Focusable\n * @extends AbstractPlugin\n */\nclass Focusable extends _AbstractPlugin2.default {\n  /**\n   * Focusable constructor.\n   * @constructs Focusable\n   * @param {Draggable} draggable - Draggable instance\n   */\n  constructor(draggable) {\n    super(draggable);\n\n    /**\n     * Focusable options\n     * @property {Object} options\n     * @type {Object}\n     */\n    this.options = _extends({}, defaultOptions, this.getOptions());\n\n    this[onInitialize] = this[onInitialize].bind(this);\n    this[onDestroy] = this[onDestroy].bind(this);\n  }\n\n  /**\n   * Attaches listeners to draggable\n   */\n  attach() {\n    this.draggable.on('draggable:initialize', this[onInitialize]).on('draggable:destroy', this[onDestroy]);\n  }\n\n  /**\n   * Detaches listeners from draggable\n   */\n  detach() {\n    this.draggable.off('draggable:initialize', this[onInitialize]).off('draggable:destroy', this[onDestroy]);\n  }\n\n  /**\n   * Returns options passed through draggable\n   * @return {Object}\n   */\n  getOptions() {\n    return this.draggable.options.focusable || {};\n  }\n\n  /**\n   * Returns draggable containers and elements\n   * @return {HTMLElement[]}\n   */\n  getElements() {\n    return [...this.draggable.containers, ...this.draggable.getDraggableElements()];\n  }\n\n  /**\n   * Intialize handler\n   * @private\n   */\n  [onInitialize]() {\n    // Can wait until the next best frame is available\n    requestAnimationFrame(() => {\n      this.getElements().forEach(element => decorateElement(element));\n    });\n  }\n\n  /**\n   * Destroy handler\n   * @private\n   */\n  [onDestroy]() {\n    // Can wait until the next best frame is available\n    requestAnimationFrame(() => {\n      this.getElements().forEach(element => stripElement(element));\n    });\n  }\n}\n\nexports.default = Focusable; /**\n                              * Keeps track of all the elements that are missing tabindex attributes\n                              * so they can be reset when draggable gets destroyed\n                              * @const {HTMLElement[]} elementsWithMissingTabIndex\n                              */\n\nconst elementsWithMissingTabIndex = [];\n\n/**\n * Decorates element with tabindex attributes\n * @param {HTMLElement} element\n * @return {Object}\n * @private\n */\nfunction decorateElement(element) {\n  const hasMissingTabIndex = Boolean(!element.getAttribute('tabindex') && element.tabIndex === -1);\n\n  if (hasMissingTabIndex) {\n    elementsWithMissingTabIndex.push(element);\n    element.tabIndex = 0;\n  }\n}\n\n/**\n * Removes elements tabindex attributes\n * @param {HTMLElement} element\n * @private\n */\nfunction stripElement(element) {\n  const tabIndexElementPosition = elementsWithMissingTabIndex.indexOf(element);\n\n  if (tabIndexElementPosition !== -1) {\n    element.tabIndex = -1;\n    elementsWithMissingTabIndex.splice(tabIndexElementPosition, 1);\n  }\n}\n\n/***/ }),\n/* 59 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _Focusable = __webpack_require__(58);\n\nvar _Focusable2 = _interopRequireDefault(_Focusable);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _Focusable2.default;\n\n/***/ }),\n/* 60 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * All draggable plugins inherit from this class.\n * @abstract\n * @class AbstractPlugin\n * @module AbstractPlugin\n */\nclass AbstractPlugin {\n  /**\n   * AbstractPlugin constructor.\n   * @constructs AbstractPlugin\n   * @param {Draggable} draggable - Draggable instance\n   */\n  constructor(draggable) {\n    /**\n     * Draggable instance\n     * @property draggable\n     * @type {Draggable}\n     */\n    this.draggable = draggable;\n  }\n\n  /**\n   * Override to add listeners\n   * @abstract\n   */\n  attach() {\n    throw new Error('Not Implemented');\n  }\n\n  /**\n   * Override to remove listeners\n   * @abstract\n   */\n  detach() {\n    throw new Error('Not Implemented');\n  }\n}\nexports.default = AbstractPlugin;\n\n/***/ }),\n/* 61 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.defaultOptions = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _AbstractPlugin = __webpack_require__(1);\n\nvar _AbstractPlugin2 = _interopRequireDefault(_AbstractPlugin);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst onInitialize = Symbol('onInitialize');\nconst onDestroy = Symbol('onDestroy');\nconst announceEvent = Symbol('announceEvent');\nconst announceMessage = Symbol('announceMessage');\n\nconst ARIA_RELEVANT = 'aria-relevant';\nconst ARIA_ATOMIC = 'aria-atomic';\nconst ARIA_LIVE = 'aria-live';\nconst ROLE = 'role';\n\n/**\n * Announcement default options\n * @property {Object} defaultOptions\n * @property {Number} defaultOptions.expire\n * @type {Object}\n */\nconst defaultOptions = exports.defaultOptions = {\n  expire: 7000\n};\n\n/**\n * Announcement plugin\n * @class Announcement\n * @module Announcement\n * @extends AbstractPlugin\n */\nclass Announcement extends _AbstractPlugin2.default {\n  /**\n   * Announcement constructor.\n   * @constructs Announcement\n   * @param {Draggable} draggable - Draggable instance\n   */\n  constructor(draggable) {\n    super(draggable);\n\n    /**\n     * Plugin options\n     * @property options\n     * @type {Object}\n     */\n    this.options = _extends({}, defaultOptions, this.getOptions());\n\n    /**\n     * Original draggable trigger method. Hack until we have onAll or on('all')\n     * @property originalTriggerMethod\n     * @type {Function}\n     */\n    this.originalTriggerMethod = this.draggable.trigger;\n\n    this[onInitialize] = this[onInitialize].bind(this);\n    this[onDestroy] = this[onDestroy].bind(this);\n  }\n\n  /**\n   * Attaches listeners to draggable\n   */\n  attach() {\n    this.draggable.on('draggable:initialize', this[onInitialize]);\n  }\n\n  /**\n   * Detaches listeners from draggable\n   */\n  detach() {\n    this.draggable.off('draggable:destroy', this[onDestroy]);\n  }\n\n  /**\n   * Returns passed in options\n   */\n  getOptions() {\n    return this.draggable.options.announcements || {};\n  }\n\n  /**\n   * Announces event\n   * @private\n   * @param {AbstractEvent} event\n   */\n  [announceEvent](event) {\n    const message = this.options[event.type];\n\n    if (message && typeof message === 'string') {\n      this[announceMessage](message);\n    }\n\n    if (message && typeof message === 'function') {\n      this[announceMessage](message(event));\n    }\n  }\n\n  /**\n   * Announces message to screen reader\n   * @private\n   * @param {String} message\n   */\n  [announceMessage](message) {\n    announce(message, { expire: this.options.expire });\n  }\n\n  /**\n   * Initialize hander\n   * @private\n   */\n  [onInitialize]() {\n    // Hack until there is an api for listening for all events\n    this.draggable.trigger = event => {\n      try {\n        this[announceEvent](event);\n      } finally {\n        // Ensure that original trigger is called\n        this.originalTriggerMethod.call(this.draggable, event);\n      }\n    };\n  }\n\n  /**\n   * Destroy hander\n   * @private\n   */\n  [onDestroy]() {\n    this.draggable.trigger = this.originalTriggerMethod;\n  }\n}\n\nexports.default = Announcement; /**\n                                 * @const {HTMLElement} liveRegion\n                                 */\n\nconst liveRegion = createRegion();\n\n/**\n * Announces message via live region\n * @param {String} message\n * @param {Object} options\n * @param {Number} options.expire\n */\nfunction announce(message, { expire }) {\n  const element = document.createElement('div');\n\n  element.textContent = message;\n  liveRegion.appendChild(element);\n\n  return setTimeout(() => {\n    liveRegion.removeChild(element);\n  }, expire);\n}\n\n/**\n * Creates region element\n * @return {HTMLElement}\n */\nfunction createRegion() {\n  const element = document.createElement('div');\n\n  element.setAttribute('id', 'draggable-live-region');\n  element.setAttribute(ARIA_RELEVANT, 'additions');\n  element.setAttribute(ARIA_ATOMIC, 'true');\n  element.setAttribute(ARIA_LIVE, 'assertive');\n  element.setAttribute(ROLE, 'log');\n\n  element.style.position = 'fixed';\n  element.style.width = '1px';\n  element.style.height = '1px';\n  element.style.top = '-1px';\n  element.style.overflow = 'hidden';\n\n  return element;\n}\n\n// Append live region element as early as possible\ndocument.addEventListener('DOMContentLoaded', () => {\n  document.body.appendChild(liveRegion);\n});\n\n/***/ }),\n/* 62 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.defaultOptions = undefined;\n\nvar _Announcement = __webpack_require__(61);\n\nvar _Announcement2 = _interopRequireDefault(_Announcement);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _Announcement2.default;\nexports.defaultOptions = _Announcement.defaultOptions;\n\n/***/ }),\n/* 63 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DraggableDestroyEvent = exports.DraggableInitializedEvent = exports.DraggableEvent = undefined;\n\nvar _AbstractEvent = __webpack_require__(0);\n\nvar _AbstractEvent2 = _interopRequireDefault(_AbstractEvent);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Base draggable event\n * @class DraggableEvent\n * @module DraggableEvent\n * @extends AbstractEvent\n */\nclass DraggableEvent extends _AbstractEvent2.default {\n\n  /**\n   * Draggable instance\n   * @property draggable\n   * @type {Draggable}\n   * @readonly\n   */\n  get draggable() {\n    return this.data.draggable;\n  }\n}\n\nexports.DraggableEvent = DraggableEvent; /**\n                                          * Draggable initialized event\n                                          * @class DraggableInitializedEvent\n                                          * @module DraggableInitializedEvent\n                                          * @extends DraggableEvent\n                                          */\n\nDraggableEvent.type = 'draggable';\nclass DraggableInitializedEvent extends DraggableEvent {}\n\nexports.DraggableInitializedEvent = DraggableInitializedEvent; /**\n                                                                * Draggable destory event\n                                                                * @class DraggableInitializedEvent\n                                                                * @module DraggableDestroyEvent\n                                                                * @extends DraggableDestroyEvent\n                                                                */\n\nDraggableInitializedEvent.type = 'draggable:initialize';\nclass DraggableDestroyEvent extends DraggableEvent {}\nexports.DraggableDestroyEvent = DraggableDestroyEvent;\nDraggableDestroyEvent.type = 'draggable:destroy';\n\n/***/ }),\n/* 64 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nconst canceled = Symbol('canceled');\n\n/**\n * All events fired by draggable inherit this class. You can call `cancel()` to\n * cancel a specific event or you can check if an event has been canceled by\n * calling `canceled()`.\n * @abstract\n * @class AbstractEvent\n * @module AbstractEvent\n */\nclass AbstractEvent {\n\n  /**\n   * AbstractEvent constructor.\n   * @constructs AbstractEvent\n   * @param {object} data - Event data\n   */\n\n  /**\n   * Event type\n   * @static\n   * @abstract\n   * @property type\n   * @type {String}\n   */\n  constructor(data) {\n    this[canceled] = false;\n    this.data = data;\n  }\n\n  /**\n   * Read-only type\n   * @abstract\n   * @return {String}\n   */\n\n\n  /**\n   * Event cancelable\n   * @static\n   * @abstract\n   * @property cancelable\n   * @type {Boolean}\n   */\n  get type() {\n    return this.constructor.type;\n  }\n\n  /**\n   * Read-only cancelable\n   * @abstract\n   * @return {Boolean}\n   */\n  get cancelable() {\n    return this.constructor.cancelable;\n  }\n\n  /**\n   * Cancels the event instance\n   * @abstract\n   */\n  cancel() {\n    this[canceled] = true;\n  }\n\n  /**\n   * Check if event has been canceled\n   * @abstract\n   * @return {Boolean}\n   */\n  canceled() {\n    return Boolean(this[canceled]);\n  }\n\n  /**\n   * Returns new event instance with existing event data.\n   * This method allows for overriding of event data.\n   * @param {Object} data\n   * @return {AbstractEvent}\n   */\n  clone(data) {\n    return new this.constructor(_extends({}, this.data, data));\n  }\n}\nexports.default = AbstractEvent;\nAbstractEvent.type = 'event';\nAbstractEvent.cancelable = false;\n\n/***/ }),\n/* 65 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DragStopEvent = exports.DragPressureEvent = exports.DragOutContainerEvent = exports.DragOverContainerEvent = exports.DragOutEvent = exports.DragOverEvent = exports.DragMoveEvent = exports.DragStartEvent = exports.DragEvent = undefined;\n\nvar _AbstractEvent = __webpack_require__(0);\n\nvar _AbstractEvent2 = _interopRequireDefault(_AbstractEvent);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Base drag event\n * @class DragEvent\n * @module DragEvent\n * @extends AbstractEvent\n */\nclass DragEvent extends _AbstractEvent2.default {\n\n  /**\n   * Draggables source element\n   * @property source\n   * @type {HTMLElement}\n   * @readonly\n   */\n  get source() {\n    return this.data.source;\n  }\n\n  /**\n   * Draggables original source element\n   * @property originalSource\n   * @type {HTMLElement}\n   * @readonly\n   */\n  get originalSource() {\n    return this.data.originalSource;\n  }\n\n  /**\n   * Draggables mirror element\n   * @property mirror\n   * @type {HTMLElement}\n   * @readonly\n   */\n  get mirror() {\n    return this.data.mirror;\n  }\n\n  /**\n   * Draggables source container element\n   * @property sourceContainer\n   * @type {HTMLElement}\n   * @readonly\n   */\n  get sourceContainer() {\n    return this.data.sourceContainer;\n  }\n\n  /**\n   * Sensor event\n   * @property sensorEvent\n   * @type {SensorEvent}\n   * @readonly\n   */\n  get sensorEvent() {\n    return this.data.sensorEvent;\n  }\n\n  /**\n   * Original event that triggered sensor event\n   * @property originalEvent\n   * @type {Event}\n   * @readonly\n   */\n  get originalEvent() {\n    if (this.sensorEvent) {\n      return this.sensorEvent.originalEvent;\n    }\n\n    return null;\n  }\n}\n\nexports.DragEvent = DragEvent; /**\n                                * Drag start event\n                                * @class DragStartEvent\n                                * @module DragStartEvent\n                                * @extends DragEvent\n                                */\n\nDragEvent.type = 'drag';\nclass DragStartEvent extends DragEvent {}\n\nexports.DragStartEvent = DragStartEvent; /**\n                                          * Drag move event\n                                          * @class DragMoveEvent\n                                          * @module DragMoveEvent\n                                          * @extends DragEvent\n                                          */\n\nDragStartEvent.type = 'drag:start';\nDragStartEvent.cancelable = true;\nclass DragMoveEvent extends DragEvent {}\n\nexports.DragMoveEvent = DragMoveEvent; /**\n                                        * Drag over event\n                                        * @class DragOverEvent\n                                        * @module DragOverEvent\n                                        * @extends DragEvent\n                                        */\n\nDragMoveEvent.type = 'drag:move';\nclass DragOverEvent extends DragEvent {\n\n  /**\n   * Draggable container you are over\n   * @property overContainer\n   * @type {HTMLElement}\n   * @readonly\n   */\n  get overContainer() {\n    return this.data.overContainer;\n  }\n\n  /**\n   * Draggable element you are over\n   * @property over\n   * @type {HTMLElement}\n   * @readonly\n   */\n  get over() {\n    return this.data.over;\n  }\n}\n\nexports.DragOverEvent = DragOverEvent; /**\n                                        * Drag out event\n                                        * @class DragOutEvent\n                                        * @module DragOutEvent\n                                        * @extends DragEvent\n                                        */\n\nDragOverEvent.type = 'drag:over';\nDragOverEvent.cancelable = true;\nclass DragOutEvent extends DragEvent {\n\n  /**\n   * Draggable container you are over\n   * @property overContainer\n   * @type {HTMLElement}\n   * @readonly\n   */\n  get overContainer() {\n    return this.data.overContainer;\n  }\n\n  /**\n   * Draggable element you left\n   * @property over\n   * @type {HTMLElement}\n   * @readonly\n   */\n  get over() {\n    return this.data.over;\n  }\n}\n\nexports.DragOutEvent = DragOutEvent; /**\n                                      * Drag over container event\n                                      * @class DragOverContainerEvent\n                                      * @module DragOverContainerEvent\n                                      * @extends DragEvent\n                                      */\n\nDragOutEvent.type = 'drag:out';\nclass DragOverContainerEvent extends DragEvent {\n\n  /**\n   * Draggable container you are over\n   * @property overContainer\n   * @type {HTMLElement}\n   * @readonly\n   */\n  get overContainer() {\n    return this.data.overContainer;\n  }\n}\n\nexports.DragOverContainerEvent = DragOverContainerEvent; /**\n                                                          * Drag out container event\n                                                          * @class DragOutContainerEvent\n                                                          * @module DragOutContainerEvent\n                                                          * @extends DragEvent\n                                                          */\n\nDragOverContainerEvent.type = 'drag:over:container';\nclass DragOutContainerEvent extends DragEvent {\n\n  /**\n   * Draggable container you left\n   * @property overContainer\n   * @type {HTMLElement}\n   * @readonly\n   */\n  get overContainer() {\n    return this.data.overContainer;\n  }\n}\n\nexports.DragOutContainerEvent = DragOutContainerEvent; /**\n                                                        * Drag pressure event\n                                                        * @class DragPressureEvent\n                                                        * @module DragPressureEvent\n                                                        * @extends DragEvent\n                                                        */\n\nDragOutContainerEvent.type = 'drag:out:container';\nclass DragPressureEvent extends DragEvent {\n\n  /**\n   * Pressure applied on draggable element\n   * @property pressure\n   * @type {Number}\n   * @readonly\n   */\n  get pressure() {\n    return this.data.pressure;\n  }\n}\n\nexports.DragPressureEvent = DragPressureEvent; /**\n                                                * Drag stop event\n                                                * @class DragStopEvent\n                                                * @module DragStopEvent\n                                                * @extends DragEvent\n                                                */\n\nDragPressureEvent.type = 'drag:pressure';\nclass DragStopEvent extends DragEvent {}\nexports.DragStopEvent = DragStopEvent;\nDragStopEvent.type = 'drag:stop';\n\n/***/ }),\n/* 66 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Plugins = exports.Sensors = exports.Sortable = exports.Swappable = exports.Droppable = exports.Draggable = exports.BasePlugin = exports.BaseEvent = undefined;\n\nvar _Draggable = __webpack_require__(5);\n\nObject.defineProperty(exports, 'Draggable', {\n  enumerable: true,\n  get: function () {\n    return _interopRequireDefault(_Draggable).default;\n  }\n});\n\nvar _Droppable = __webpack_require__(34);\n\nObject.defineProperty(exports, 'Droppable', {\n  enumerable: true,\n  get: function () {\n    return _interopRequireDefault(_Droppable).default;\n  }\n});\n\nvar _Swappable = __webpack_require__(31);\n\nObject.defineProperty(exports, 'Swappable', {\n  enumerable: true,\n  get: function () {\n    return _interopRequireDefault(_Swappable).default;\n  }\n});\n\nvar _Sortable = __webpack_require__(28);\n\nObject.defineProperty(exports, 'Sortable', {\n  enumerable: true,\n  get: function () {\n    return _interopRequireDefault(_Sortable).default;\n  }\n});\n\nvar _AbstractEvent = __webpack_require__(0);\n\nvar _AbstractEvent2 = _interopRequireDefault(_AbstractEvent);\n\nvar _AbstractPlugin = __webpack_require__(1);\n\nvar _AbstractPlugin2 = _interopRequireDefault(_AbstractPlugin);\n\nvar _Sensors = __webpack_require__(6);\n\nvar Sensors = _interopRequireWildcard(_Sensors);\n\nvar _Plugins = __webpack_require__(25);\n\nvar Plugins = _interopRequireWildcard(_Plugins);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.BaseEvent = _AbstractEvent2.default;\nexports.BasePlugin = _AbstractPlugin2.default;\nexports.Sensors = Sensors;\nexports.Plugins = Plugins;\n\n/***/ })\n/******/ ]);\n});","import { FormulaInserter } from \"./foundation/formula/inserter/inserter.basic\";\r\nimport { ComplexFormulaInserter } from \"./foundation/formula/inserter/inserter.complex\";\r\nimport { RegularFormulaInserter } from \"./foundation/formula/inserter/inserter.regular\";\r\nimport { FormulaOpeartingPanel } from \"./foundation/formula/formula\";\r\nimport { ParameterEditor } from \"./foundation/parameter/parameter\";\r\nimport { initSocket } from \"./utils/socket\";\r\n\r\nBI.extend(BI, {\r\n    FormulaInserter,\r\n    ComplexFormulaInserter,\r\n    RegularFormulaInserter,\r\n    FormulaOpeartingPanel,\r\n    ParameterEditor,\r\n    initSocket,\r\n});\r\n","module.exports = BI.CodeMirror;","import { shortcut } from \"../../../core/decorator\";\r\n\r\n@shortcut()\r\nexport class FormulaFunctionItem extends BI.BasicButton {\r\n    static xtype = \"bi.formula.function_item\";\r\n\r\n    props = {\r\n        baseCls: \"bi-list-item-select\",\r\n        text: \"\",\r\n        title: \"\",\r\n        value: \"\",\r\n    };\r\n\r\n    render() {\r\n        return {\r\n            type: BI.TextButton.xtype,\r\n            text: this.options.text,\r\n            value: this.options.value,\r\n            trigger: \"dblclick\",\r\n            textAlign: \"left\",\r\n            hgap: 5,\r\n            handler: (...args: any[]) => {\r\n                this.fireEvent(BI.Controller.EVENT_CHANGE, BI.Events.CLICK, ...args);\r\n            },\r\n        };\r\n    }\r\n}\r\n","import { shortcut } from \"../../../core/decorator\";\r\n\r\n@shortcut()\r\nexport class FormulaVarItem extends BI.BasicButton {\r\n    static xtype = \"bi.formula.var_item\";\r\n\r\n    private leaf: any;\r\n\r\n    props = {\r\n        text: \"\",\r\n        title: \"\",\r\n        value: \"\",\r\n        layoutType: BI.MidTreeLeafItem.xtype,\r\n    };\r\n\r\n    render() {\r\n        return {\r\n            type: BI.HTapeLayout.xtype,\r\n            items: [{\r\n                type: BI.Label.xtype,\r\n                width: 16,\r\n            }, {\r\n                type: this.options.layoutType,\r\n                cls: \"bi-list-item-select\",\r\n                ref: (_ref: any) => {\r\n                    this.leaf = _ref;\r\n                },\r\n                text: this.options.text,\r\n                value: this.options.value,\r\n                trigger: \"dblclick\",\r\n                textAlign: \"left\",\r\n                handler: (...args: any[]) => {\r\n                    this.fireEvent(BI.Controller.EVENT_CHANGE, BI.Events.CLICK, ...args);\r\n                },\r\n            }],\r\n        };\r\n    }\r\n\r\n    setSelected(flag: boolean) {\r\n        super.setSelected(flag);\r\n\r\n        this.leaf.setSelected(flag);\r\n    }\r\n}\r\n","import { FormulaInserter } from \"./inserter.basic\";\r\nimport { shortcut } from \"../../../core/decorator\";\r\n\r\n@shortcut()\r\nexport class ComplexFormulaInserter extends FormulaInserter {\r\n    static xtype = \"bi.formula_operating_panel.complex.inserter\";\r\n\r\n    props = {\r\n        value: {\r\n            formula: \"\",\r\n            keepFormulaWhenExportOrEdit: false,\r\n            keepFormulaWhenReportOrAnalyze: true,\r\n        },\r\n    }\r\n\r\n    private exportOrEditCheckbox: any;\r\n\r\n    private reportOrAnalyzeCheckbox: any;\r\n    \r\n    protected getToolbarLayout() {\r\n        return {\r\n            type: BI.VerticalAdaptLayout.xtype,\r\n            items: [{\r\n                type: BI.MultiSelectItem.xtype,\r\n                ref: (_ref: any) => {\r\n                    this.exportOrEditCheckbox = _ref;\r\n                },\r\n                width: 180,\r\n                lgap: 10,\r\n                text: BI.i18nText(\"BI-Basic_Export_Or_Edit_Keep_Formula\"),\r\n                selected: this.options.value.keepFormulaWhenExportOrEdit,\r\n                listeners: [{\r\n                    eventName: BI.MultiSelectItem.EVENT_CHANGE,\r\n                    action: () => {\r\n                        const isSelected = this.exportOrEditCheckbox.isSelected();\r\n\r\n                        if (isSelected) {\r\n                            this.reportOrAnalyzeCheckbox.setEnable(false);\r\n                            this.reportOrAnalyzeCheckbox.setSelected(true);\r\n                        } else {\r\n                            this.reportOrAnalyzeCheckbox.setEnable(true);\r\n                        }\r\n                    },\r\n                }],\r\n            }, {\r\n                type: BI.MultiSelectItem.xtype,\r\n                ref: (_ref: any) => {\r\n                    this.reportOrAnalyzeCheckbox = _ref;\r\n                },\r\n                width: 220,\r\n                lgap: 10,\r\n                text: BI.i18nText(\"BI-Basic_Report_Or_Analyze_Keep_Formula\"),\r\n                disabled: this.options.value.keepFormulaWhenExportOrEdit,\r\n                selected: this.options.value.keepFormulaWhenReportOrAnalyze,\r\n            }, {\r\n                type: BI.Button.xtype,\r\n                text: BI.i18nText(\"BI-Basic_Check_Validation\"),\r\n                handler: () => {\r\n                    this.validate();\r\n                },\r\n            }],\r\n        };\r\n    }\r\n\r\n    getValue() {\r\n        return {\r\n            formula: this.formulaEditor.getValue(),\r\n            keepFormulaWhenExportOrEdit: this.exportOrEditCheckbox.isSelected(),\r\n            keepFormulaWhenReportOrAnalyze: this.reportOrAnalyzeCheckbox.isSelected(),\r\n        };\r\n    }\r\n}\r\n","import { FormulaInserter } from \"./inserter.basic\";\r\nimport { shortcut } from \"../../../core/decorator\";\r\n\r\n@shortcut()\r\nexport class RegularFormulaInserter extends FormulaInserter {\r\n    static xtype = \"bi.formula_operating_panel.regular.inserter\";\r\n    \r\n    protected getToolbarLayout() {\r\n        return {\r\n            type: BI.AbsoluteLayout.xtype,\r\n            items: [{\r\n                el: {\r\n                    type: BI.Button.xtype,\r\n                    text: BI.i18nText(\"BI-Basic_Check_Validation\"),\r\n                    handler: () => {\r\n                        this.validate();\r\n                    },\r\n                },\r\n                right: 93,\r\n                top: 12,\r\n            }],\r\n        };\r\n    }\r\n}\r\n","import { shortcut, store } from \"../../core/decorator\";\r\nimport { transformFormulaJSONs2FunctionTypes, transformFormulaVarItems, isBelong2FormulaFunction, isFormulaConfigCached, setFormulaConfigCache } from \"./formula.service\";\r\nimport { FormulaModel } from \"./formula.model\";\r\nimport { FormulaInserter } from \"./inserter/inserter.basic\";\r\nimport { DEFAULT_FUNCTION_NAME } from \"./formula.constants\";\r\nimport { ButtonGroup, CustomTree, SearchEditor, Text } from '@fui/core';\r\n\r\nconst searchPaneWidth = 253;\r\nconst searchButtonWidth = 54;\r\nconst LabelTitleHeight = 24;\r\n\r\n@shortcut()\r\n@store(FormulaModel)\r\nexport class FormulaOpeartingPanel extends BI.Pane {\r\n    static xtype = \"bi.formula_operating_panel\";\r\n\r\n    private functionTypeGroup: ButtonGroup;\r\n\r\n    private functionNameGroup: ButtonGroup;\r\n\r\n    private model: FormulaModel[\"model\"];\r\n\r\n    private store: FormulaModel[\"store\"];\r\n\r\n    private descriptionLabel: Text;\r\n\r\n    private searchEditor: SearchEditor;\r\n\r\n    private relatedFunctionNameGroup: ButtonGroup;\r\n\r\n    private formulaEditor: FormulaInserter;\r\n\r\n    private varTree: CustomTree;\r\n\r\n    props: {\r\n        inserterType: string;\r\n        value: {\r\n            formula: string;\r\n            [key: string]: any;\r\n        },\r\n        configLoader: (..._args: any[]) => Promise<{\r\n            vars: {\r\n                text: string;\r\n                value: string;\r\n                type: string;\r\n                def: string;\r\n            }[];\r\n            JSONs: {\r\n                def: string;\r\n                name: string;\r\n                type: string;\r\n            }[];\r\n        }>\r\n    } = {\r\n        inserterType: FormulaInserter.xtype,\r\n        value: {\r\n            formula: \"\",\r\n        },\r\n        configLoader: () => new Promise(resolve => {\r\n            resolve({\r\n                vars: [],\r\n                JSONs: [],\r\n            });\r\n        }),\r\n    };\r\n\r\n    watch = {\r\n        functionNames: () => {\r\n            this.functionNameGroup.populate(this.model.functionNames);\r\n\r\n            this.scrollFunctionName2View();\r\n        },\r\n\r\n        selectedFunctionNameOrVarName: () => {\r\n            if (isBelong2FormulaFunction(this.model.selectedFunctionNameOrVarName)) {\r\n                this.functionNameGroup.setValue(this.model.selectedFunctionNameOrVarName);\r\n\r\n                this.scrollFunctionName2View();\r\n            }\r\n        },\r\n\r\n        selectedFunctionType: () => {\r\n            this.functionTypeGroup.setValue(this.model.selectedFunctionType);\r\n\r\n            this.functionNameGroup.setValue(this.model.selectedFunctionNameOrVarName);\r\n        },\r\n\r\n        functionDescription: () => {\r\n            this.descriptionLabel.setText(this.model.functionDescription);\r\n        },\r\n\r\n        relatedFunctionNames: () => {\r\n            const relatedFunctionNames = this.model.relatedFunctionNames;\r\n\r\n            this.relatedFunctionNameGroup.populate(relatedFunctionNames);\r\n\r\n            const relatedFunctionName = BI.isEmptyArray(relatedFunctionNames) ? null : BI.first(relatedFunctionNames).value;\r\n\r\n            this.relatedFunctionNameGroup.setValue(relatedFunctionName);\r\n\r\n            relatedFunctionName && this.store.setSelectedFunctionName(relatedFunctionName);\r\n        },\r\n\r\n        isCached: () => {\r\n            this.functionTypeGroup.populate(transformFormulaJSONs2FunctionTypes());\r\n            this.functionTypeGroup.setValue(this.model.selectedFunctionType);\r\n            this.functionNameGroup.setValue(this.model.selectedFunctionNameOrVarName);\r\n            this.varTree.populate(transformFormulaVarItems());\r\n        },\r\n    }\r\n\r\n    render() {\r\n        return {\r\n            type: BI.VTapeLayout.xtype,\r\n            items: [{\r\n                el: {\r\n                    type: BI.LeftRightVerticalAdaptLayout.xtype,\r\n                    items: {\r\n                        left: [{\r\n                            type: BI.Label.xtype,\r\n                            text: BI.i18nText(\"BI-Basic_Please_Input_Formula\"),\r\n                        }],\r\n                        right: [{\r\n                            type: BI.SearchEditor.xtype,\r\n                            ref: (_ref: SearchEditor) => {\r\n                                this.searchEditor = _ref;\r\n                            },\r\n                            width: searchPaneWidth - searchButtonWidth - 5,\r\n                            listeners: [{\r\n                                eventName: BI.SearchEditor.EVENT_ENTER,\r\n                                action: () => {\r\n                                    this.store.setKeyword(this.searchEditor.getValue());\r\n                                },\r\n                            }, {\r\n                                eventName: BI.SearchEditor.EVENT_EMPTY,\r\n                                action: () => {\r\n                                    this.store.setKeyword(\"\");\r\n                                },\r\n                            }],\r\n                        }, {\r\n                            lgap: 5,\r\n                            el: {\r\n                                type: BI.Button.xtype,\r\n                                text: BI.i18nText(\"BI-Basic_Search\"),\r\n                                minWidth: 0,\r\n                                width: searchButtonWidth,\r\n                                handler: () => {\r\n                                    this.store.setKeyword(this.searchEditor.getValue());\r\n                                },\r\n                            },\r\n                        }],\r\n                    },\r\n                },\r\n                height: LabelTitleHeight,\r\n            }, {\r\n                el: {\r\n                    type: BI.HTapeLayout.xtype,\r\n                    items: [{\r\n                        type: this.options.inserterType,\r\n                        ref: (_ref: FormulaInserter) => {\r\n                            this.formulaEditor = _ref;\r\n                        },\r\n                        value: this.options.value,\r\n                        rgap: 10,\r\n                        listeners: [{\r\n                            eventName: \"EVENT_SHOW_HINT\",\r\n                            action: (hint: string) => {\r\n                                this.store.setSelectedFunctionName(hint);\r\n\r\n                                this.scrollFunctionName2View();\r\n                            },\r\n                        }, {\r\n                            eventName: \"EVENT_SELECT_HINT\",\r\n                            action: (hint: string) => {\r\n                                this.store.setSelectedFunctionName(hint);\r\n\r\n                                this.scrollFunctionName2View();\r\n                            },\r\n                        }],\r\n                    }, {\r\n                        el: {\r\n                            type: BI.ButtonGroup.xtype,\r\n                            ref: (_ref: ButtonGroup) => {\r\n                                this.relatedFunctionNameGroup = _ref;\r\n                            },\r\n                            cls: \"bi-border\",\r\n                            items: this.model.relatedFunctionNames,\r\n                            layouts: [{\r\n                                type: BI.VerticalLayout.xtype,\r\n                            }],\r\n                            listeners: [{\r\n                                eventName: BI.ButtonGroup.EVENT_CHANGE,\r\n                                action: (val: string) => {\r\n                                    this.store.setSelectedFunctionName(val);\r\n                                },\r\n                            }],\r\n                        },\r\n                        width: searchPaneWidth,\r\n                    }],\r\n                },\r\n                height: 200,\r\n                tgap: 10,\r\n            }, {\r\n                type: BI.HTapeLayout.xtype,\r\n                items: [{\r\n                    el: {\r\n                        type: BI.VTapeLayout.xtype,\r\n                        items: [{\r\n                            el: {\r\n                                type: BI.Label.xtype,\r\n                                text: BI.i18nText(\"BI-Basic_Function_Type\"),\r\n                                textAlign: \"left\",\r\n                            },\r\n                            height: LabelTitleHeight,\r\n                        }, {\r\n                            type: BI.ButtonGroup.xtype,\r\n                            ref: (_ref: ButtonGroup) => {\r\n                                this.functionTypeGroup = _ref;\r\n                            },\r\n                            value: this.model.selectedFunctionType,\r\n                            cls: \"bi-border\",\r\n                            items: transformFormulaJSONs2FunctionTypes(),\r\n                            layouts: [{\r\n                                type: BI.VerticalLayout.xtype,\r\n                            }],\r\n                            listeners: [{\r\n                                eventName: BI.ButtonGroup.EVENT_CHANGE,\r\n                                action: (val: string) => {\r\n                                    this.store.setSelectedFunctionType(val);\r\n                                },\r\n                            }],\r\n                        }],\r\n                    },\r\n                    width: 135,\r\n                }, {\r\n                    el: {\r\n                        type: BI.VTapeLayout.xtype,\r\n                        items: [{\r\n                            el: {\r\n                                type: BI.Label.xtype,\r\n                                text: BI.i18nText(\"BI-Basic_Function_Name\"),\r\n                                textAlign: \"left\",\r\n                            },\r\n                            height: LabelTitleHeight,\r\n                        }, {\r\n                            type: BI.ButtonGroup.xtype,\r\n                            ref: (_ref: ButtonGroup) => {\r\n                                this.functionNameGroup = _ref;\r\n                            },\r\n                            value: this.model.selectedFunctionNameOrVarName,\r\n                            cls: \"bi-border\",\r\n                            items: this.model.functionNames,\r\n                            layouts: [{\r\n                                type: BI.VerticalLayout.xtype,\r\n                            }],\r\n                            listeners: [{\r\n                                eventName: BI.Controller.EVENT_CHANGE,\r\n                                action: (_type: string, val: string, _widget: any, e: any) => {\r\n                                    this.store.setSelectedFunctionName(val, false);\r\n\r\n                                    if (e.type === \"dblclick\") {\r\n                                        this.formulaEditor.insertFunction(val);\r\n                                    }\r\n                                },\r\n                            }],\r\n                        }],\r\n                    },\r\n                    lgap: 5,\r\n                    width: 135,\r\n                }, {\r\n                    el: {\r\n                        type: BI.VTapeLayout.xtype,\r\n                        items: [{\r\n                            el: {\r\n                                type: BI.Label.xtype,\r\n                                text: BI.i18nText(\"BI-Basic_Vars\"),\r\n                                textAlign: \"left\",\r\n                            },\r\n                            height: LabelTitleHeight,\r\n                        }, {\r\n                            type: BI.CustomTree.xtype,\r\n                            cls: \"bi-border\",\r\n                            chooseType: BI.Selection.Single,\r\n                            ref: (_ref: CustomTree) => {\r\n                                this.varTree = _ref;\r\n                            },\r\n                            el: {\r\n                                type: BI.ButtonTree.xtype,\r\n                                layouts: [{\r\n                                    type: BI.VerticalLayout.xtype,\r\n                                }],\r\n                            },\r\n                            items: transformFormulaVarItems(),\r\n                            listeners: [{\r\n                                eventName: BI.Controller.EVENT_CHANGE,\r\n                                action: (type: string, val: string, _widget: any, e: any) => {\r\n                                    if (type !== BI.Events.CLICK) {\r\n                                        return;\r\n                                    }\r\n\r\n                                    this.store.setSelectedVarName(val);\r\n\r\n                                    if (e && e.type === \"dblclick\") {\r\n                                        this.formulaEditor.insertField(val);\r\n                                    }\r\n                                },\r\n                            }],\r\n                        }],\r\n                    },\r\n                    lgap: 5,\r\n                    width: 300,\r\n                }, {\r\n                    el: {\r\n                        type: BI.VTapeLayout.xtype,\r\n                        items: [{\r\n                            el: {\r\n                                type: BI.Label.xtype,\r\n                                text: BI.i18nText(\"BI-Basic_Function_Description\"),\r\n                                textAlign: \"left\",\r\n                            },\r\n                            height: LabelTitleHeight,\r\n                        }, {\r\n                            type: BI.VerticalLayout.xtype,\r\n                            cls: \"bi-border\",\r\n                            items: [{\r\n                                el: {\r\n                                    type: BI.Text.xtype,\r\n                                    ref: (_ref: Text) => {\r\n                                        this.descriptionLabel = _ref;\r\n                                    },\r\n                                    text: this.model.functionDescription,\r\n                                    whiteSpace: \"normal\",\r\n                                    hgap: 5,\r\n                                },\r\n                            }],\r\n                        }],\r\n                    },\r\n                    lgap: 5,\r\n                }],\r\n            }],\r\n        };\r\n    }\r\n\r\n    beforeRender(callback: Function) {\r\n        if (isFormulaConfigCached()) {\r\n            callback();\r\n\r\n            return;\r\n        }\r\n\r\n        this.loading();\r\n        this.options.configLoader()\r\n            .then(data => {\r\n                this.loaded();\r\n                setFormulaConfigCache(data);\r\n\r\n                this.store.setSelectedFunctionName(DEFAULT_FUNCTION_NAME);\r\n\r\n                callback();\r\n            });\r\n    }\r\n\r\n    /**\r\n     * functionName滚动到可见区域\r\n     */\r\n    private scrollFunctionName2View(): void {\r\n        if (!this.model.needScrollToView) {\r\n            return;\r\n        }\r\n\r\n        const functionNameWidget = this.functionNameGroup.getAllButtons<any>()\r\n            .find((functionNameWidget: any) => functionNameWidget.getValue() === this.model.selectedFunctionNameOrVarName);\r\n\r\n        if (BI.isNull(functionNameWidget)) {\r\n            return;\r\n        }\r\n\r\n        functionNameWidget.element[0].scrollIntoView();\r\n    }\r\n\r\n    getValue() {\r\n        return this.formulaEditor.getValue();\r\n    }\r\n\r\n    /**\r\n     * 对外加载数据的接口\r\n     * @param data 数据\r\n     */\r\n    loadConfigData(data: {\r\n        vars: {\r\n            text: string;\r\n            value: string;\r\n            type: string;\r\n            def: string;\r\n        }[];\r\n        JSONs: {\r\n            def: string;\r\n            name: string;\r\n            type: string;\r\n        }[];\r\n    }) {\r\n        if (isFormulaConfigCached()) {\r\n            return;\r\n        }\r\n\r\n        setFormulaConfigCache(data);\r\n\r\n        this.store.setSelectedFunctionName(DEFAULT_FUNCTION_NAME);\r\n    }\r\n}\r\n","import { model, Model } from \"../../core/decorator\";\r\nimport { getFunctionTypeByFunctionName, transformFormulaJSONs2FunctionNames, getFunctionDescriptionByFunctionName, getSearchedFunctionNames, getVarDescriptionByVarName } from \"./formula.service\";\r\nimport { DEFAULT_FUNCTION_NAME, DEFAULT_FUNCTION_TYPE } from \"./formula.constants\";\r\n\r\n@model()\r\nexport class FormulaModel extends Model {\r\n    static xtype = \"bi.model.formula_operating_panel\";\r\n\r\n    state() {\r\n        return {\r\n            selectedFunctionType: getFunctionTypeByFunctionName(DEFAULT_FUNCTION_NAME) || DEFAULT_FUNCTION_TYPE,\r\n            selectedFunctionNameOrVarName: DEFAULT_FUNCTION_NAME,\r\n            keyword: \"\",\r\n            needScrollToView: true,\r\n        };\r\n    }\r\n\r\n    computed = {\r\n        functionNames: () => transformFormulaJSONs2FunctionNames(this.model.selectedFunctionType),\r\n\r\n        functionDescription: () => getFunctionDescriptionByFunctionName(this.model.selectedFunctionNameOrVarName) || getVarDescriptionByVarName(this.model.selectedFunctionNameOrVarName),\r\n\r\n        relatedFunctionNames: () => getSearchedFunctionNames(this.model.keyword),\r\n    }\r\n\r\n    actions = {\r\n        setSelectedFunctionType: (val: string): void => {\r\n            this.model.selectedFunctionType = val;\r\n\r\n            this.model.selectedFunctionNameOrVarName = (BI.first(transformFormulaJSONs2FunctionNames(this.model.selectedFunctionType)) || {}as {\r\n                text: string;\r\n                value: string;\r\n                title: string;\r\n            }).value;\r\n        },\r\n\r\n        setSelectedFunctionName: (_functionName: string, needScrollToView = true): void => {\r\n            const functionName = _functionName.toUpperCase();\r\n\r\n            const speculatedFunctionType = getFunctionTypeByFunctionName(functionName);\r\n\r\n            if (BI.isNull(speculatedFunctionType)) {\r\n                return;\r\n            }\r\n\r\n            this.model.selectedFunctionType = speculatedFunctionType;\r\n\r\n            this.model.selectedFunctionNameOrVarName = functionName;\r\n\r\n            this.model.needScrollToView = needScrollToView;\r\n        },\r\n\r\n        setKeyword: (val: string): void => {\r\n            this.model.keyword = val;\r\n        },\r\n\r\n        setSelectedVarName: (val: string): void => {\r\n            this.model.selectedFunctionNameOrVarName = val;\r\n        },\r\n    }\r\n}\r\n","import { shortcut, store } from \"../../core/decorator\";\r\nimport { ParameterModel } from \"./parameter.model\";\r\nimport { ParameterInput } from \"./parameter_input/parameter_input\";\r\nimport { ParameterHeader } from \"./parameter_header/parameter_header\";\r\nimport { defaultHeaderItems } from \"./parameter_header/parameter_header.constant\";\r\nimport { ButtonGroup } from '@fui/core';\r\n@shortcut()\r\n@store(ParameterModel)\r\nexport class ParameterEditor extends BI.Widget {\r\n    static xtype = \"bi.parameter_editor\";\r\n\r\n    props = {\r\n        height: 200,\r\n        title: \"\",\r\n        headers: defaultHeaderItems,\r\n        value: [] as ParametersType[],\r\n    }\r\n\r\n    parameterInputs: ButtonGroup;\r\n\r\n    model: ParameterModel[\"model\"]\r\n    store: ParameterModel[\"store\"]\r\n\r\n    watch = {\r\n        parameters: () => {\r\n            this.parameterInputs.populate(this.renderParameterInputs());\r\n        },\r\n        selectedId: (id: string) => {\r\n            this.parameterInputs.setValue(id);\r\n        },\r\n    }\r\n\r\n    render() {\r\n        this.setDefaultValue();\r\n        \r\n        return {\r\n            type: BI.VTapeLayout.xtype,\r\n            items: [{\r\n                el: this.renderHeader(),\r\n                height: 25,\r\n            }, {\r\n                el: {\r\n                    type: BI.CenterLayout.xtype,\r\n                    cls: \"bi-border\",\r\n                    items: [{\r\n                        type: BI.Label.xtype,\r\n                        text: BI.i18nText(\"BI-Basic_Parameter_Name\"),\r\n                    }, {\r\n                        type: BI.Label.xtype,\r\n                        cls: \"bi-border-left\",\r\n                        text: BI.i18nText(\"BI-Basic_Parameter_Value\"),\r\n                    }],\r\n                },\r\n                height: 25,\r\n            }, {\r\n                type: BI.ButtonGroup.xtype,\r\n                cls: \"bi-border\",\r\n                layouts: [{\r\n                    type: BI.VerticalLayout.xtype,\r\n                }],\r\n                items: this.renderParameterInputs(),\r\n                ref: (_ref: ButtonGroup) => {\r\n                    this.parameterInputs = _ref;\r\n                },\r\n            }],\r\n        };\r\n    }\r\n\r\n    private renderHeader() {\r\n        const { title, headers } = this.options;\r\n        \r\n        return {\r\n            type: ParameterHeader.xtype,\r\n            title,\r\n            headers,\r\n            listeners: [{\r\n                eventName: \"EVENT_INSERT\",\r\n                action: () => {\r\n                    this.addItem({\r\n                        name: \"\",\r\n                        value: \"\",\r\n                        id: BI.UUID(),\r\n                        type: \"String\",\r\n                    });\r\n                },\r\n            }, {\r\n                eventName: \"EVENT_DELETE\",\r\n                action: () => {\r\n                    this.removeSelectedItem();\r\n                },\r\n            }, {\r\n                eventName: \"EVENT_MOVE_UP\",\r\n                action: () => {\r\n                    this.moveUp();\r\n                },\r\n            }, {\r\n                eventName: \"EVENT_MOVE_DOWN\",\r\n                action: () => {\r\n                    this.moveDown();\r\n                },\r\n            }, {\r\n                eventName: \"EVENT_REFRESH\",\r\n                action: () => {\r\n                    this.refresh();\r\n                    this.fireEvent(\"EVENT_REFRESH\");\r\n                },\r\n            }],\r\n        };\r\n    }\r\n\r\n    public getValue() {\r\n        return this.model.parameters.map(item => {\r\n            return {\r\n                name: item.name,\r\n                value: item.value,\r\n                type: item.type,\r\n            };\r\n        });\r\n    }\r\n\r\n    public setValue(value: ParametersType[]) {\r\n        this.store.setParameters(value.map(item => {\r\n            return {\r\n                ...item,\r\n                id: BI.UUID(),\r\n            };\r\n        }));\r\n    }\r\n\r\n    public addItem(item: ParametersType) {\r\n        const { name = \"\", value = \"\", type = \"String\" } = item;\r\n        this.store.setParameters([...this.model.parameters, {\r\n            name,\r\n            value,\r\n            type,\r\n            id: BI.UUID(),\r\n        }]);\r\n    }\r\n\r\n    public removeSelectedItem() {\r\n        if (this.model.selectedId) {\r\n            BI.Msg.confirm(BI.i18nText(\"BI-Basic_Prompt\"), BI.i18nText(\"BI-Basic_Parameter_Delete_Confirm\"), (re: boolean) => {\r\n                if (re) {\r\n                    this.store.removeSelectedParameter();\r\n                }\r\n            });\r\n        } else {\r\n            BI.Msg.alert(BI.i18nText(\"BI-Basic_Prompt\"), BI.i18nText(\"BI-Basic_Parameter_Delete_Alert\"));\r\n        }\r\n    }\r\n\r\n    public moveUp() {\r\n        this.store.move(\"up\");\r\n    }\r\n\r\n    public moveDown() {\r\n        this.store.move(\"down\");\r\n    }\r\n\r\n    public refresh() {\r\n        this.setDefaultValue();\r\n    }\r\n\r\n    private setDefaultValue() {\r\n        const { value = [] } = this.options;\r\n        this.setValue(value);\r\n    }\r\n\r\n    private renderParameterInputs() {\r\n        return this.model.parameters.map(item => {\r\n            return {\r\n                type: ParameterInput.xtype,\r\n                inputName: item.name,\r\n                inputValue: item.value,\r\n                inputType: item.type,\r\n                id: item.id,\r\n                value: item.id,\r\n                selected: item.id === this.model.selectedId,\r\n                listeners: [{\r\n                    eventName: 'EVENT_CHANGE',\r\n                    action: () => {\r\n                        this.fireEvent('EVENT_CHANGE');\r\n                    },\r\n                }],\r\n            };\r\n        });\r\n    }\r\n}\r\n\r\n\r\nexport interface ParametersType {\r\n    name: string;\r\n    value: string;\r\n    id?: string;\r\n    type: inputTypes;\r\n}\r\n\r\nexport type inputTypes = \"String\" | \"Integer\" | \"Double\" | \"Date\" | \"Boolean\" | \"Formula\"\r\n","import { model, Model } from \"../../core/decorator\";\r\nimport { ParametersType } from \"./parameter\";\r\n\r\n@model()\r\nexport class ParameterModel extends Model {\r\n    static xtype = \"bi.model.parameter_editor\";\r\n\r\n    childContext = <const>[\"selectedId\", \"parameters\"];\r\n\r\n    state() {\r\n        return {\r\n            parameters: [] as ParametersType[],\r\n            selectedId: \"\",\r\n        };\r\n    }\r\n\r\n    actions = {\r\n        setParameters: (parameters: ParametersType[]) => {\r\n            this.model.parameters = parameters;\r\n        },\r\n        removeSelectedParameter: () => {\r\n            this.setParameters(this.model.parameters.filter(item => item.id !== this.model.selectedId));\r\n        },\r\n        move: (type: \"up\"|\"down\") => {\r\n            if (this.model.selectedId) {\r\n                const index = this.model.parameters.findIndex(item => item.id === this.model.selectedId);\r\n                if (type === \"up\" && index > 0) {\r\n                    const oldItem = this.model.parameters.splice(index, 1)[0];\r\n                    this.model.parameters.splice(index - 1, 0, oldItem);\r\n                }\r\n                if (type === \"down\" && index < this.model.parameters.length - 1) {\r\n                    const oldItem = this.model.parameters.splice(index, 1)[0];\r\n                    this.model.parameters.splice(index + 1, 0, oldItem);\r\n                }\r\n            }\r\n        },\r\n    }\r\n}\r\n\r\n\r\n","import { shortcut, store } from \"../../../core/decorator\";\r\nimport { inputTypes } from \"../parameter\";\r\nimport \"./input/input\";\r\nimport { getInput } from \"./input/input.service\";\r\nimport \"./parameter_input.less\";\r\nimport { ParameterInputModel } from \"./parameter_input.model\";\r\nconst tipType = \"tip\";\r\n@shortcut()\r\n@store(ParameterInputModel)\r\nexport class ParameterInput extends BI.BasicButton {\r\n    static xtype = \"bi.parameter_editor.parameter_input\"\r\n\r\n    props = {\r\n        inputName: \"\",\r\n        inputValue: \"\",\r\n        inputType: \"String\",\r\n        height: 22,\r\n        id: \"\",\r\n        baseCls: \"parameter-editor-input\",\r\n        value: \"\",\r\n    }\r\n\r\n    store: ParameterInputModel[\"store\"]\r\n    model: ParameterInputModel[\"model\"]\r\n\r\n    tab: any;\r\n    parameterName: any;\r\n    parameterValue: any;\r\n    iconCombo: any;\r\n\r\n    render() {\r\n        let { inputName, inputValue } = this.options;\r\n        const { inputType } = this.options;\r\n        const { id } = this.options;\r\n\r\n        return {\r\n            type: BI.CenterLayout.xtype,\r\n            cls: \"bi-border\",\r\n            items: [{\r\n                type: BI.Editor.xtype,\r\n                height: 22,\r\n                allowBlank: true,\r\n                value: inputName,\r\n                ref: (_ref: any) => {\r\n                    this.parameterName = _ref;\r\n                },\r\n                listeners: [{\r\n                    eventName: BI.TextEditor.EVENT_CHANGE,\r\n                    action: () => {\r\n                        inputName = this.parameterName.getValue();\r\n                        this.tab.setSelect(inputName ? inputType : tipType);\r\n                        inputValue = inputName ? inputValue : \"\";\r\n                        this.store.setParameterName(id, inputName);\r\n                        this.fireEvent(BI.TextEditor.EVENT_CHANGE);\r\n                    },\r\n                }, {\r\n                    eventName: BI.TextEditor.EVENT_FOCUS,\r\n                    action: () => {\r\n                        this.store.setSelectedId(id);\r\n                    },\r\n                }],\r\n            }, {\r\n                type: BI.HTapeLayout.xtype,\r\n                items: [{\r\n                    type: BI.Tab.xtype,\r\n                    single: true,\r\n                    showIndex: inputName ? inputType : tipType,\r\n                    ref: (_ref: any) => {\r\n                        this.tab = _ref;\r\n                    },\r\n                    cardCreator: (index: inputTypes | \"tip\") => this.renderInputs(index),\r\n                }],\r\n            }],\r\n        };\r\n    }\r\n\r\n    private renderInputs(type: inputTypes | \"tip\") {\r\n        const { inputValue, id } = this.options;\r\n        if (type === \"tip\") {\r\n            return {\r\n                type: BI.TextButton.xtype,\r\n                cls: \"bi-error bi-border-left\",\r\n                text: BI.i18nText(\"BI-Basic_Parameter_Please_Set_Parameter_Name\"),\r\n                handler: () => {\r\n                    this.parameterName.focus();\r\n                },\r\n            };\r\n        }\r\n        const xtype = getInput(type);\r\n\r\n        return {\r\n            type: BI.HTapeLayout.xtype,\r\n            items: [{\r\n                el: {\r\n                    type: BI.IconCombo.xtype,\r\n                    cls: \"bi-border-left bi-border-right\",\r\n                    height: 22,\r\n                    width: 25,\r\n                    value: type,\r\n                    items: this.renderDownList(),\r\n                    ref: (_ref: any) => {\r\n                        this.iconCombo = _ref;\r\n                    },\r\n                    listeners: [{\r\n                        eventName: \"EVENT_CHANGE\",\r\n                        action: () => {\r\n                            this.tab.setSelect(tipType);\r\n                            const typeValue = this.iconCombo.getValue()[0];\r\n                            if (typeValue) {\r\n                                this.tab.setSelect(typeValue);\r\n                            }\r\n                            this.store.setParameterValue(id, \"\", typeValue);\r\n                            this.fireEvent('EVENT_CHANGE');\r\n                        },\r\n                    }],\r\n                },\r\n                width: 25,\r\n            }, {\r\n                type: xtype,\r\n                value: inputValue,\r\n                listeners: [{\r\n                    eventName: \"EVENT_CHANGE\",\r\n                    action: (value: string) => {\r\n                        const type = this.iconCombo.getValue()[0];\r\n                        this.store.setParameterValue(id, value, type);\r\n                        this.fireEvent(\"EVENT_CHANGE\");\r\n                    },\r\n                }, {\r\n                    eventName: \"EVENT_FOCUS\",\r\n                    action: () => {\r\n                        this.store.setSelectedId(id);\r\n                    },\r\n                }],\r\n            }],\r\n        };\r\n    }\r\n\r\n    private renderDownList() {\r\n        return [{\r\n            text: BI.i18nText(\"BI-Basic_Parameter_Type_String\"),\r\n            value: \"String\",\r\n            iconCls: \"parameter-string-font\",\r\n        }, {\r\n            text: BI.i18nText(\"BI-Basic_Parameter_Type_Int\"),\r\n            value: \"Integer\",\r\n            iconCls: \"parameter-int-font\",\r\n        }, {\r\n            text: BI.i18nText(\"BI-Basic_Parameter_Type_Number\"),\r\n            value: \"Double\",\r\n            iconCls: \"parameter-double-font\",\r\n        }, {\r\n            text: BI.i18nText(\"BI-Basic_Parameter_Type_Date\"),\r\n            value: \"Date\",\r\n            iconCls: \"parameter-date-font\",\r\n        }, {\r\n            text: BI.i18nText(\"BI-Basic_Parameter_Type_Boolean\"),\r\n            value: \"Boolean\",\r\n            iconCls: \"parameter-boolean-font\",\r\n        }, {\r\n            text: BI.i18nText(\"BI-Basic_Parameter_Type_Formula\"),\r\n            value: \"Formula\",\r\n            iconCls: \"parameter-formula-font\",\r\n        }];\r\n    }\r\n}\r\n","import \"./input_boolean\";\r\nimport \"./input_date\";\r\nimport \"./input_int\";\r\nimport \"./input_double\";\r\nimport \"./input_string\";\r\nimport \"./input_formula\";\r\n","import { shortcut } from \"../../../../core/decorator\";\r\nimport { input } from \"./input.service\";\r\n\r\n@shortcut()\r\n@input(\"Boolean\")\r\nexport class InputBoolean extends BI.BasicButton {\r\n    static xtype = \"bi.parameter_editor.parameter_input.boolean\"\r\n\r\n    props = {\r\n        value: \"\",\r\n    }\r\n\r\n    input: any;\r\n    hasSelected: boolean;\r\n    \r\n    render() {\r\n        const { value } = this.options;\r\n        this.hasSelected = value === \"true\";\r\n        \r\n        return {\r\n            type: BI.MultiSelectItem.xtype,\r\n            width: 80,\r\n            selected: this.hasSelected,\r\n            text: \"true\",\r\n            ref: (_ref: any) => {\r\n                this.input = _ref;\r\n            },\r\n            listeners: [{\r\n                eventName: BI.MultiSelectItem.EVENT_CHANGE,\r\n                action: () => {\r\n                    this.hasSelected = !this.hasSelected;\r\n                    this.fireEvent(\"EVENT_CHANGE\", this.hasSelected);\r\n                },\r\n            }],\r\n        };\r\n    }\r\n\r\n    doClick() {\r\n        this.fireEvent(\"EVENT_FOCUS\");\r\n    }\r\n}\r\n","import { shortcut } from \"../../../../core/decorator\";\r\nimport { input } from \"./input.service\";\r\n\r\n@shortcut()\r\n@input(\"Date\")\r\nexport class InputDate extends BI.Widget {\r\n    static xtype = \"bi.parameter_editor.parameter_input.date\"\r\n\r\n    props = {\r\n        value: \"\",\r\n    }\r\n\r\n    input: any;\r\n    \r\n    render() {\r\n        const { value } = this.options;\r\n        const dates = value.split(\"-\");\r\n        \r\n        return {\r\n            type: BI.DynamicDateCombo.xtype,\r\n            height: 22,\r\n            allowBlank: true,\r\n            value: dates.length === 3 ? {\r\n                year: dates[0],\r\n                month: dates[1],\r\n                day: dates[2],\r\n            } : \"\",\r\n            ref: (_ref: any) => {\r\n                this.input = _ref;\r\n            },\r\n            listeners: [{\r\n                eventName: BI.DynamicDateCombo.EVENT_CONFIRM,\r\n                action: () => {\r\n                    const { day, month, year } = this.input.getValue().value as {\r\n                            day: number;\r\n                            month: number;\r\n                            year: number;\r\n                    };\r\n                    this.fireEvent(\"EVENT_CHANGE\", `${year}-${month}-${day}`);\r\n                },\r\n            }, {\r\n                eventName: BI.DynamicDateCombo.EVENT_FOCUS,\r\n                action: () => {\r\n                    this.fireEvent(\"EVENT_FOCUS\");\r\n                },\r\n            }],\r\n        };\r\n    }\r\n}\r\n","import { shortcut } from \"../../../../core/decorator\";\r\nimport { input } from \"./input.service\";\r\n\r\n@shortcut()\r\n@input(\"Integer\")\r\nexport class InputInt extends BI.Widget {\r\n    static xtype = \"bi.parameter_editor.parameter_input.int\"\r\n\r\n    props = {\r\n        value: \"\",\r\n    }\r\n\r\n    input: any;\r\n    \r\n    render() {\r\n        const { value } = this.options;\r\n        \r\n        return {\r\n            type: BI.Editor.xtype,\r\n            height: 22,\r\n            allowBlank: true,\r\n            value,\r\n            ref: (_ref: any) => {\r\n                this.input = _ref;\r\n            },\r\n            validationChecker: (v: string) => BI.isInteger(v),\r\n            listeners: [{\r\n                eventName: BI.Editor.EVENT_CHANGE,\r\n                action: () => {\r\n                    const value = this.input.getValue();\r\n                    this.fireEvent(\"EVENT_CHANGE\", value);\r\n                },\r\n            }, {\r\n                eventName: BI.Editor.EVENT_FOCUS,\r\n                action: () => {\r\n                    this.fireEvent(\"EVENT_FOCUS\");\r\n                },\r\n            }],\r\n        };\r\n    }\r\n}\r\n","import { shortcut } from \"../../../../core/decorator\";\r\nimport { input } from \"./input.service\";\r\n\r\n@shortcut()\r\n@input(\"Double\")\r\nexport class InputDouble extends BI.Widget {\r\n    static xtype = \"bi.parameter_editor.parameter_input.double\"\r\n\r\n    props = {\r\n        value: \"\",\r\n    }\r\n\r\n    input: any;\r\n    \r\n    render() {\r\n        const { value } = this.options;\r\n        \r\n        return {\r\n            type: BI.Editor.xtype,\r\n            height: 22,\r\n            allowBlank: true,\r\n            value,\r\n            ref: (_ref: any) => {\r\n                this.input = _ref;\r\n            },\r\n            validationChecker: (v: string) => BI.isNumeric(v),\r\n            listeners: [{\r\n                eventName: BI.Editor.EVENT_CHANGE,\r\n                action: () => {\r\n                    const value = this.input.getValue();\r\n                    this.fireEvent(\"EVENT_CHANGE\", value);\r\n                },\r\n            }, {\r\n                eventName: BI.Editor.EVENT_FOCUS,\r\n                action: () => {\r\n                    this.fireEvent(\"EVENT_FOCUS\");\r\n                },\r\n            }],\r\n        };\r\n    }\r\n}\r\n","import { shortcut } from \"../../../../core/decorator\";\r\nimport { input } from \"./input.service\";\r\n\r\n@shortcut()\r\n@input(\"String\")\r\nexport class InputString extends BI.Widget {\r\n    static xtype = \"bi.parameter_editor.parameter_input.string\"\r\n\r\n    props = {\r\n        value: \"\",\r\n    }\r\n\r\n    input: any;\r\n    \r\n    render() {\r\n        const { value } = this.options;\r\n        \r\n        return {\r\n            type: BI.Editor.xtype,\r\n            height: 22,\r\n            allowBlank: true,\r\n            value,\r\n            ref: (_ref: any) => {\r\n                this.input = _ref;\r\n            },\r\n            listeners: [{\r\n                eventName: BI.Editor.EVENT_CHANGE,\r\n                action: () => {\r\n                    const value = this.input.getValue();\r\n                    this.fireEvent(\"EVENT_CHANGE\", value);\r\n                },\r\n            }, {\r\n                eventName: BI.Editor.EVENT_FOCUS,\r\n                action: () => {\r\n                    this.fireEvent(\"EVENT_FOCUS\");\r\n                },\r\n            }],\r\n        };\r\n    }\r\n}\r\n","import { shortcut } from \"../../../../core/decorator\";\r\nimport { input } from \"./input.service\";\r\n\r\n@shortcut()\r\n@input(\"Formula\")\r\nexport class InputFormula extends BI.Widget {\r\n    static xtype = \"bi.parameter_editor.parameter_input.formula\"\r\n\r\n    props = {\r\n        value: \"\",\r\n    }\r\n\r\n    input: any;\r\n\r\n    mounted() {\r\n        // TODO: 打开公式编辑器\r\n    }\r\n    \r\n    render() {\r\n        const { value } = this.options;\r\n        \r\n        return {\r\n            type: BI.Editor.xtype,\r\n            height: 22,\r\n            allowBlank: true,\r\n            value,\r\n            ref: (_ref: any) => {\r\n                this.input = _ref;\r\n            },\r\n            listeners: [{\r\n                eventName: BI.Editor.EVENT_CHANGE,\r\n                action: () => {\r\n                    const value = this.input.getValue();\r\n                    this.fireEvent(\"EVENT_CHANGE\", value);\r\n                },\r\n            }, {\r\n                eventName: BI.Editor.EVENT_FOCUS,\r\n                action: () => {\r\n                    this.fireEvent(\"EVENT_FOCUS\");\r\n                },\r\n            }],\r\n        };\r\n    }\r\n}\r\n","import { model, Model } from \"../../../core/decorator\";\r\nimport { ParameterModel } from \"../parameter.model\";\r\nimport { inputTypes } from \"../parameter\";\r\n\r\n@model()\r\nexport class ParameterInputModel extends Model<{\r\n    types: {\r\n        selectedId: ParameterModel[\"TYPE\"][\"selectedId\"];\r\n        parameters: ParameterModel[\"TYPE\"][\"parameters\"];\r\n    },\r\n    context: ParameterInputModel[\"context\"];\r\n}> {\r\n    static xtype = \"bi.model.parameter_editor.parameter_input\";\r\n\r\n    context = <const>[\"selectedId\", \"parameters\"];\r\n\r\n    actions = {\r\n        setSelectedId: (id: string) => {\r\n            this.model.selectedId = id;\r\n        },\r\n        setParameterName: (id: string, name: string) => {\r\n            const thisParameter = this.getParameter(id);\r\n            if (thisParameter) {\r\n                thisParameter.name = name;\r\n            }\r\n        },\r\n        setParameterValue: (id: string, value: string, type: inputTypes) => {\r\n            const thisParameter = this.getParameter(id);\r\n            if (thisParameter) {\r\n                thisParameter.value = value;\r\n                thisParameter.type = type;\r\n            }\r\n        },\r\n    }\r\n    private getParameter(id: string) {\r\n        return this.model.parameters.find(item => item.id === id);\r\n    }\r\n}\r\n\r\n\r\n","import { shortcut } from \"../../../core/decorator\";\r\nimport { headerItemsData, defaultHeaderItems } from \"./parameter_header.constant\";\r\n@shortcut()\r\nexport class ParameterHeader extends BI.Widget {\r\n    static xtype = \"bi.parameter_editor.header\";\r\n    props = {\r\n        title: \"\",\r\n        headers: defaultHeaderItems,\r\n    }\r\n\r\n    render() {\r\n        const { title } = this.options;\r\n        \r\n        return {\r\n            type: BI.LeftRightVerticalAdaptLayout.xtype,\r\n            items: {\r\n                left: [{\r\n                    type: BI.Label.xtype,\r\n                    lgap: 2,\r\n                    text: title,\r\n                    textAlign: \"left\",\r\n                }],\r\n                right: this.renderItem(),\r\n            },\r\n        };\r\n    }\r\n\r\n    private renderItem() {\r\n        const { headers } = this.options;\r\n        \r\n        return headers.map(item => {\r\n            if (BI.isString(item)) {\r\n                const head = headerItemsData.find(data => data.type === item);\r\n                if (head) {\r\n                    return {\r\n                        type: BI.IconButton.xtype,\r\n                        cls: head.cls,\r\n                        width: 25,\r\n                        title: BI.i18nText(head.title),\r\n                        handler: () => {\r\n                            this.fireEvent(head.event);\r\n                        },\r\n                    };\r\n                }\r\n                \r\n                return {\r\n                    type: \"bi.default\",\r\n                };\r\n            }\r\n            \r\n            return item;\r\n        });\r\n    }\r\n}","interface Emitter {\r\n\r\n    on(event: string, fn: Function): Emitter;\r\n\r\n    off(event: string, fn?: Function): Emitter;\r\n\r\n    emit(event: string, ...args: any[]): Emitter;\r\n}\r\n\r\ninterface Socket extends Emitter {\r\n\r\n    io: Manager;\r\n\r\n    nsp: string;\r\n\r\n    id: string;\r\n\r\n    connected: boolean;\r\n\r\n    disconnected: boolean;\r\n\r\n    connect(): Socket;\r\n\r\n    send(...args: any[]): Socket;\r\n\r\n    emit(event: string, ...args: any[]): Socket;\r\n\r\n    close(): Socket;\r\n\r\n    disconnect(): Socket;\r\n}\r\n\r\ninterface Manager extends Emitter {\r\n\r\n    /**\r\n     * The connect options that we used when creating this Manager\r\n     */\r\n    opts: ConnectOpts;\r\n\r\n    /**\r\n     * The URI that this manager is for (host + port), e.g. 'http://localhost:4000'\r\n     */\r\n    uri: string;\r\n\r\n    connect(fn?: (err?: any) => void): Manager;\r\n}\r\n\r\ninterface SocketIOClientStatic {\r\n\r\n    (uri: string, opts?: ConnectOpts): Socket;\r\n\r\n    protocol: number;\r\n\r\n    Socket: Socket;\r\n}\r\n\r\ninterface ConnectOpts {\r\n\r\n    /**\r\n     * Should we force a new Manager for this connection?\r\n     * @default false\r\n     */\r\n    forceNew?: boolean;\r\n\r\n    /**\r\n     * Should we multiplex our connection (reuse existing Manager) ?\r\n     * @default true\r\n     */\r\n    multiplex?: boolean;\r\n\r\n    /**\r\n     * The path to get our client file from, in the case of the server\r\n     * serving it\r\n     * @default '/socket.io'\r\n     */\r\n    path?: string;\r\n\r\n    /**\r\n     * Should we allow reconnections?\r\n     * @default true\r\n     */\r\n    reconnection?: boolean;\r\n\r\n    /**\r\n     * How many reconnection attempts should we try?\r\n     * @default Infinity\r\n     */\r\n    reconnectionAttempts?: number;\r\n\r\n    /**\r\n     * The time delay in milliseconds between reconnection attempts\r\n     * @default 1000\r\n     */\r\n    reconnectionDelay?: number;\r\n\r\n    /**\r\n     * The max time delay in milliseconds between reconnection attempts\r\n     * @default 5000\r\n     */\r\n    reconnectionDelayMax?: number;\r\n\r\n    /**\r\n     * Used in the exponential backoff jitter when reconnecting\r\n     * @default 0.5\r\n     */\r\n    randomizationFactor?: number;\r\n\r\n    /**\r\n     * The timeout in milliseconds for our connection attempt\r\n     * @default 20000\r\n     */\r\n    timeout?: number;\r\n\r\n    /**\r\n     * Should we automically connect?\r\n     * @default true\r\n     */\r\n    autoConnect?: boolean;\r\n\r\n    /**\r\n     * The host that we're connecting to. Set from the URI passed when connecting\r\n     */\r\n    host?: string;\r\n\r\n    /**\r\n     * The hostname for our connection. Set from the URI passed when connecting\r\n     */\r\n    hostname?: string;\r\n\r\n    /**\r\n     * If this is a secure connection. Set from the URI passed when connecting\r\n     */\r\n    secure?: boolean;\r\n\r\n    /**\r\n     * The port for our connection. Set from the URI passed when connecting\r\n     */\r\n    port?: string;\r\n\r\n    /**\r\n     * Any query parameters in our uri. Set from the URI passed when connecting\r\n     */\r\n    query?: Object;\r\n\r\n    /**\r\n     * `http.Agent` to use, defaults to `false` (NodeJS only)\r\n     */\r\n    agent?: string | boolean;\r\n\r\n    /**\r\n     * Whether the client should try to upgrade the transport from\r\n     * long-polling to something better.\r\n     * @default true\r\n     */\r\n    upgrade?: boolean;\r\n\r\n    /**\r\n     * Forces JSONP for polling transport.\r\n     */\r\n    forceJSONP?: boolean;\r\n\r\n    /**\r\n     * Determines whether to use JSONP when necessary for polling. If\r\n     * disabled (by settings to false) an error will be emitted (saying\r\n     * \"No transports available\") if no other transports are available.\r\n     * If another transport is available for opening a connection (e.g.\r\n     * WebSocket) that transport will be used instead.\r\n     * @default true\r\n     */\r\n    jsonp?: boolean;\r\n\r\n    /**\r\n     * Forces base 64 encoding for polling transport even when XHR2\r\n     * responseType is available and WebSocket even if the used standard\r\n     * supports binary.\r\n     */\r\n    forceBase64?: boolean;\r\n\r\n    /**\r\n     * Enables XDomainRequest for IE8 to avoid loading bar flashing with\r\n     * click sound. default to `false` because XDomainRequest has a flaw\r\n     * of not sending cookie.\r\n     * @default false\r\n     */\r\n    enablesXDR?: boolean;\r\n\r\n    /**\r\n     * The param name to use as our timestamp key\r\n     * @default 't'\r\n     */\r\n    timestampParam?: string;\r\n\r\n    /**\r\n     * Whether to add the timestamp with each transport request. Note: this\r\n     * is ignored if the browser is IE or Android, in which case requests\r\n     * are always stamped\r\n     * @default false\r\n     */\r\n    timestampRequests?: boolean;\r\n\r\n    /**\r\n     * A list of transports to try (in order). Engine.io always attempts to\r\n     * connect directly with the first one, provided the feature detection test\r\n     * for it passes.\r\n     * @default ['polling','websocket']\r\n     */\r\n    transports?: string[];\r\n\r\n    /**\r\n     * The port the policy server listens on\r\n     * @default 843\r\n     */\r\n    policyPost?: number;\r\n\r\n    /**\r\n     * If true and if the previous websocket connection to the server succeeded,\r\n     * the connection attempt will bypass the normal upgrade process and will\r\n     * initially try websocket. A connection attempt following a transport error\r\n     * will use the normal upgrade process. It is recommended you turn this on\r\n     * only when using SSL/TLS connections, or if you know that your network does\r\n     * not block websockets.\r\n     * @default false\r\n     */\r\n    rememberUpgrade?: boolean;\r\n\r\n    /**\r\n     * Are we only interested in transports that support binary?\r\n     */\r\n    onlyBinaryUpgrades?: boolean;\r\n\r\n    /**\r\n     * Transport options for Node.js client (headers etc)\r\n     */\r\n    transportOptions?: Object;\r\n\r\n    /**\r\n     * (SSL) Certificate, Private key and CA certificates to use for SSL.\r\n     * Can be used in Node.js client environment to manually specify\r\n     * certificate information.\r\n     */\r\n    pfx?: string;\r\n\r\n    /**\r\n     * (SSL) Private key to use for SSL. Can be used in Node.js client\r\n     * environment to manually specify certificate information.\r\n     */\r\n    key?: string;\r\n\r\n    /**\r\n     * (SSL) A string or passphrase for the private key or pfx. Can be\r\n     * used in Node.js client environment to manually specify certificate\r\n     * information.\r\n     */\r\n    passphrase?: string\r\n\r\n    /**\r\n     * (SSL) Public x509 certificate to use. Can be used in Node.js client\r\n     * environment to manually specify certificate information.\r\n     */\r\n    cert?: string;\r\n\r\n    /**\r\n     * (SSL) An authority certificate or array of authority certificates to\r\n     * check the remote host against.. Can be used in Node.js client\r\n     * environment to manually specify certificate information.\r\n     */\r\n    ca?: string | string[];\r\n\r\n    /**\r\n     * (SSL) A string describing the ciphers to use or exclude. Consult the\r\n     * [cipher format list]\r\n     * (http://www.openssl.org/docs/apps/ciphers.html#CIPHER_LIST_FORMAT) for\r\n     * details on the format.. Can be used in Node.js client environment to\r\n     * manually specify certificate information.\r\n     */\r\n    ciphers?: string;\r\n\r\n    /**\r\n     * (SSL) If true, the server certificate is verified against the list of\r\n     * supplied CAs. An 'error' event is emitted if verification fails.\r\n     * Verification happens at the connection level, before the HTTP request\r\n     * is sent. Can be used in Node.js client environment to manually specify\r\n     * certificate information.\r\n     */\r\n    rejectUnauthorized?: boolean;\r\n\r\n}\r\n\r\nexport interface InitSocketOptions extends ConnectOpts {\r\n    requestUrl: string\r\n    contextPath: string\r\n    webSocketNameSpace: string\r\n    webSocketContextName: string\r\n    useJavaxWebSocket: boolean\r\n    webSocketPort: string[]\r\n    query?: Obj\r\n    options?: ConnectOpts\r\n}\r\n\r\ndeclare var io: SocketIOClientStatic\r\n\r\n/**\r\n * 初始化socket连接\r\n * @param {*} options 连接socket的参数\r\n * @param {*} cb 返回连接结果\r\n */\r\nexport function initSocket(options: InitSocketOptions, cb: Function) {\r\n    let callback = BI.isFunction(cb) ? cb : BI.emptyFn;\r\n    let useJavaxWebSocket = options.useJavaxWebSocket || false;\r\n    if (useJavaxWebSocket) {\r\n        return initJavaxWebSocket(options, callback);\r\n    }\r\n    return initFallbackWebSocket(null, options, callback);\r\n}\r\n\r\n/**\r\n * 新的websocket连接方案,无需额外的端口\r\n * @param options\r\n * @param callback\r\n * @returns {*}\r\n */\r\nfunction initJavaxWebSocket(options: InitSocketOptions, callback: Function) {\r\n    let socket: Socket;\r\n    const {requestUrl, contextPath, webSocketNameSpace, query, options: extraOptions} = options;\r\n    const contextName = `${contextPath === \"/\" ? \"\" : contextPath}/websocket`;\r\n    try {\r\n        socket = io(`${requestUrl}${location.port ? `:${location.port}` : \"\"}${webSocketNameSpace}`, BI.extend({\r\n            query: query,\r\n            path: contextName,\r\n            transports: [\"websocket\", \"polling\"],\r\n            timeout: 15000,\r\n        }, extraOptions));\r\n\r\n        let fallback = true;\r\n\r\n        // 监听到失败或者超时时改用旧方案,仅初次建立连接时候失败会走降级方案,连接成功后再遇到断开连接将在当前方案基础上执行重连逻辑\r\n        socket.on(\"connect_error\", function () {\r\n            socket.off(\"connect_error\");\r\n            socket.off(\"connect\");\r\n            fallback && initFallbackWebSocket(socket, options, callback);\r\n        });\r\n\r\n        socket.on(\"connect\", function () {\r\n            fallback = false;\r\n            callback(\"success\");\r\n        });\r\n\r\n        return socket;\r\n    } catch (e) {\r\n        throw new Error(e);\r\n    }\r\n}\r\n\r\n/**\r\n * 旧的方案websocket连接方案,需要额外的端口\r\n * @param socket\r\n * @param options\r\n * @param callback\r\n * @returns {*}\r\n */\r\nfunction initFallbackWebSocket(socket: Socket | null, options: InitSocketOptions, callback: Function) {\r\n\r\n    const {\r\n        webSocketPort: ports,\r\n        requestUrl,\r\n        webSocketNameSpace,\r\n        query,\r\n        webSocketContextName,\r\n        options: extraOptions\r\n    } = options;\r\n\r\n    function reconnect(manager: Manager) {\r\n        if (BI.isEmptyArray(ports)) {\r\n            callback(\"fail\");\r\n            return;\r\n        }\r\n        manager.uri = `${requestUrl}:${ports.shift()}${webSocketNameSpace}`;\r\n        manager.connect(() => {\r\n        });\r\n    }\r\n\r\n    try {\r\n        if (BI.isNull(socket)) {\r\n            socket = io(`${requestUrl}:${ports.shift()}${webSocketNameSpace}`, BI.extend({\r\n                query: query,\r\n                path: webSocketContextName,\r\n                transports: [\"polling\", \"websocket\"],\r\n                timeout: 5000,\r\n            }, extraOptions));\r\n        } else {\r\n            socket.io.opts.path = webSocketContextName;\r\n            socket.io.opts.query = query;\r\n            socket.io.opts.transports = [\"polling\", \"websocket\"];\r\n            socket.io.uri = `${requestUrl}:${ports.shift()}${webSocketNameSpace}`;\r\n            socket.io.connect(() => {\r\n            });\r\n        }\r\n\r\n        // 监听到失败或者超时时使用下一个端口\r\n        socket.on(\"connect_error\", function () {\r\n            reconnect(socket!.io);\r\n        });\r\n\r\n        socket.on(\"connect\", function () {\r\n            callback(\"success\");\r\n        });\r\n        return socket;\r\n    } catch (e) {\r\n        throw new Error(e);\r\n    }\r\n}\r\n\r\n","require(\"!!E:\\\\Jenkins\\\\workspace\\\\auto-pack\\\\fineui-materials\\\\feature-x\\\\fineui-materials\\\\node_modules\\\\script-loader\\\\addScript.js\")(require(\"!!E:\\\\Jenkins\\\\workspace\\\\auto-pack\\\\fineui-materials\\\\feature-x\\\\fineui-materials\\\\node_modules\\\\raw-loader\\\\index.js!E:\\\\Jenkins\\\\workspace\\\\auto-pack\\\\fineui-materials\\\\feature-x\\\\fineui-materials\\\\src\\\\js\\\\components\\\\foundation\\\\editor\\\\formula\\\\codemirror\\\\codemirror.js\"))","module.exports = \"// version 5.42.2\\r\\n// CodeMirror, copyright (c) by Marijn Haverbeke and others\\r\\n// Distributed under an MIT license: https://codemirror.net/LICENSE\\r\\n\\r\\n// This is CodeMirror (https://codemirror.net), a code editor\\r\\n// implemented in JavaScript on top of the browser's DOM.\\r\\n//\\r\\n// You can find some technical background for some of the code below\\r\\n// at http://marijnhaverbeke.nl/blog/#cm-internals .\\r\\n\\r\\n(function (global, factory) {\\r\\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\\r\\n        typeof define === 'function' && define.amd ? define(factory) :\\r\\n            (BI.CodeMirror = BI.CodeMirror || factory());\\r\\n}(this, (function () { 'use strict';\\r\\n\\r\\n    // Kludges for bugs and behavior differences that can't be feature\\r\\n    // detected are enabled based on userAgent etc sniffing.\\r\\n    var userAgent = navigator.userAgent;\\r\\n    var platform = navigator.platform;\\r\\n\\r\\n    var gecko = /gecko\\\\/\\\\d/i.test(userAgent);\\r\\n    var ie_upto10 = /MSIE \\\\d/.test(userAgent);\\r\\n    var ie_11up = /Trident\\\\/(?:[7-9]|\\\\d{2,})\\\\..*rv:(\\\\d+)/.exec(userAgent);\\r\\n    var edge = /Edge\\\\/(\\\\d+)/.exec(userAgent);\\r\\n    var ie = ie_upto10 || ie_11up || edge;\\r\\n    var ie_version = ie && (ie_upto10 ? document.documentMode || 6 : +(edge || ie_11up)[1]);\\r\\n    var webkit = !edge && /WebKit\\\\//.test(userAgent);\\r\\n    var qtwebkit = webkit && /Qt\\\\/\\\\d+\\\\.\\\\d+/.test(userAgent);\\r\\n    var chrome = !edge && /Chrome\\\\//.test(userAgent);\\r\\n    var presto = /Opera\\\\//.test(userAgent);\\r\\n    var safari = /Apple Computer/.test(navigator.vendor);\\r\\n    var mac_geMountainLion = /Mac OS X 1\\\\d\\\\D([8-9]|\\\\d\\\\d)\\\\D/.test(userAgent);\\r\\n    var phantom = /PhantomJS/.test(userAgent);\\r\\n\\r\\n    var ios = !edge && /AppleWebKit/.test(userAgent) && /Mobile\\\\/\\\\w+/.test(userAgent);\\r\\n    var android = /Android/.test(userAgent);\\r\\n    // This is woefully incomplete. Suggestions for alternative methods welcome.\\r\\n    var mobile = ios || android || /webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(userAgent);\\r\\n    var mac = ios || /Mac/.test(platform);\\r\\n    var chromeOS = /\\\\bCrOS\\\\b/.test(userAgent);\\r\\n    var windows = /win/i.test(platform);\\r\\n\\r\\n    var presto_version = presto && userAgent.match(/Version\\\\/(\\\\d*\\\\.\\\\d*)/);\\r\\n    if (presto_version) { presto_version = Number(presto_version[1]); }\\r\\n    if (presto_version && presto_version >= 15) { presto = false; webkit = true; }\\r\\n    // Some browsers use the wrong event properties to signal cmd/ctrl on OS X\\r\\n    var flipCtrlCmd = mac && (qtwebkit || presto && (presto_version == null || presto_version < 12.11));\\r\\n    var captureRightClick = gecko || (ie && ie_version >= 9);\\r\\n\\r\\n    function classTest(cls) { return new RegExp(\\\"(^|\\\\\\\\s)\\\" + cls + \\\"(?:$|\\\\\\\\s)\\\\\\\\s*\\\") }\\r\\n\\r\\n    var rmClass = function(node, cls) {\\r\\n        var current = node.className;\\r\\n        var match = classTest(cls).exec(current);\\r\\n        if (match) {\\r\\n            var after = current.slice(match.index + match[0].length);\\r\\n            node.className = current.slice(0, match.index) + (after ? match[1] + after : \\\"\\\");\\r\\n        }\\r\\n    };\\r\\n\\r\\n    function removeChildren(e) {\\r\\n        for (var count = e.childNodes.length; count > 0; --count)\\r\\n        { e.removeChild(e.firstChild); }\\r\\n        return e\\r\\n    }\\r\\n\\r\\n    function removeChildrenAndAdd(parent, e) {\\r\\n        return removeChildren(parent).appendChild(e)\\r\\n    }\\r\\n\\r\\n    function elt(tag, content, className, style) {\\r\\n        var e = document.createElement(tag);\\r\\n        if (className) { e.className = className; }\\r\\n        if (style) { e.style.cssText = style; }\\r\\n        if (typeof content == \\\"string\\\") { e.appendChild(document.createTextNode(content)); }\\r\\n        else if (content) { for (var i = 0; i < content.length; ++i) { e.appendChild(content[i]); } }\\r\\n        return e\\r\\n    }\\r\\n    // wrapper for elt, which removes the elt from the accessibility tree\\r\\n    function eltP(tag, content, className, style) {\\r\\n        var e = elt(tag, content, className, style);\\r\\n        e.setAttribute(\\\"role\\\", \\\"presentation\\\");\\r\\n        return e\\r\\n    }\\r\\n\\r\\n    var range;\\r\\n    if (document.createRange) { range = function(node, start, end, endNode) {\\r\\n        var r = document.createRange();\\r\\n        r.setEnd(endNode || node, end);\\r\\n        r.setStart(node, start);\\r\\n        return r\\r\\n    }; }\\r\\n    else { range = function(node, start, end) {\\r\\n        var r = document.body.createTextRange();\\r\\n        try { r.moveToElementText(node.parentNode); }\\r\\n        catch(e) { return r }\\r\\n        r.collapse(true);\\r\\n        r.moveEnd(\\\"character\\\", end);\\r\\n        r.moveStart(\\\"character\\\", start);\\r\\n        return r\\r\\n    }; }\\r\\n\\r\\n    function contains(parent, child) {\\r\\n        if (child.nodeType == 3) // Android browser always returns false when child is a textnode\\r\\n        { child = child.parentNode; }\\r\\n        if (parent.contains)\\r\\n        { return parent.contains(child) }\\r\\n        do {\\r\\n            if (child.nodeType == 11) { child = child.host; }\\r\\n            if (child == parent) { return true }\\r\\n        } while (child = child.parentNode)\\r\\n    }\\r\\n\\r\\n    function activeElt() {\\r\\n        // IE and Edge may throw an \\\"Unspecified Error\\\" when accessing document.activeElement.\\r\\n        // IE < 10 will throw when accessed while the page is loading or in an iframe.\\r\\n        // IE > 9 and Edge will throw when accessed in an iframe if document.body is unavailable.\\r\\n        var activeElement;\\r\\n        try {\\r\\n            activeElement = document.activeElement;\\r\\n        } catch(e) {\\r\\n            activeElement = document.body || null;\\r\\n        }\\r\\n        while (activeElement && activeElement.shadowRoot && activeElement.shadowRoot.activeElement)\\r\\n        { activeElement = activeElement.shadowRoot.activeElement; }\\r\\n        return activeElement\\r\\n    }\\r\\n\\r\\n    function addClass(node, cls) {\\r\\n        var current = node.className;\\r\\n        if (!classTest(cls).test(current)) { node.className += (current ? \\\" \\\" : \\\"\\\") + cls; }\\r\\n    }\\r\\n    function joinClasses(a, b) {\\r\\n        var as = a.split(\\\" \\\");\\r\\n        for (var i = 0; i < as.length; i++)\\r\\n        { if (as[i] && !classTest(as[i]).test(b)) { b += \\\" \\\" + as[i]; } }\\r\\n        return b\\r\\n    }\\r\\n\\r\\n    var selectInput = function(node) { node.select(); };\\r\\n    if (ios) // Mobile Safari apparently has a bug where select() is broken.\\r\\n    { selectInput = function(node) { node.selectionStart = 0; node.selectionEnd = node.value.length; }; }\\r\\n    else if (ie) // Suppress mysterious IE10 errors\\r\\n    { selectInput = function(node) { try { node.select(); } catch(_e) {} }; }\\r\\n\\r\\n    function bind(f) {\\r\\n        var args = Array.prototype.slice.call(arguments, 1);\\r\\n        return function(){return f.apply(null, args)}\\r\\n    }\\r\\n\\r\\n    function copyObj(obj, target, overwrite) {\\r\\n        if (!target) { target = {}; }\\r\\n        for (var prop in obj)\\r\\n        { if (obj.hasOwnProperty(prop) && (overwrite !== false || !target.hasOwnProperty(prop)))\\r\\n        { target[prop] = obj[prop]; } }\\r\\n        return target\\r\\n    }\\r\\n\\r\\n    // Counts the column offset in a string, taking tabs into account.\\r\\n    // Used mostly to find indentation.\\r\\n    function countColumn(string, end, tabSize, startIndex, startValue) {\\r\\n        if (end == null) {\\r\\n            end = string.search(/[^\\\\s\\\\u00a0]/);\\r\\n            if (end == -1) { end = string.length; }\\r\\n        }\\r\\n        for (var i = startIndex || 0, n = startValue || 0;;) {\\r\\n            var nextTab = string.indexOf(\\\"\\\\t\\\", i);\\r\\n            if (nextTab < 0 || nextTab >= end)\\r\\n            { return n + (end - i) }\\r\\n            n += nextTab - i;\\r\\n            n += tabSize - (n % tabSize);\\r\\n            i = nextTab + 1;\\r\\n        }\\r\\n    }\\r\\n\\r\\n    var Delayed = function() {this.id = null;};\\r\\n    Delayed.prototype.set = function (ms, f) {\\r\\n        clearTimeout(this.id);\\r\\n        this.id = setTimeout(f, ms);\\r\\n    };\\r\\n\\r\\n    function indexOf(array, elt) {\\r\\n        for (var i = 0; i < array.length; ++i)\\r\\n        { if (array[i] == elt) { return i } }\\r\\n        return -1\\r\\n    }\\r\\n\\r\\n    // Number of pixels added to scroller and sizer to hide scrollbar\\r\\n    var scrollerGap = 30;\\r\\n\\r\\n    // Returned or thrown by various protocols to signal 'I'm not\\r\\n    // handling this'.\\r\\n    var Pass = {toString: function(){return \\\"CodeMirror.Pass\\\"}};\\r\\n\\r\\n    // Reused option objects for setSelection & friends\\r\\n    var sel_dontScroll = {scroll: false}, sel_mouse = {origin: \\\"*mouse\\\"}, sel_move = {origin: \\\"+move\\\"};\\r\\n\\r\\n    // The inverse of countColumn -- find the offset that corresponds to\\r\\n    // a particular column.\\r\\n    function findColumn(string, goal, tabSize) {\\r\\n        for (var pos = 0, col = 0;;) {\\r\\n            var nextTab = string.indexOf(\\\"\\\\t\\\", pos);\\r\\n            if (nextTab == -1) { nextTab = string.length; }\\r\\n            var skipped = nextTab - pos;\\r\\n            if (nextTab == string.length || col + skipped >= goal)\\r\\n            { return pos + Math.min(skipped, goal - col) }\\r\\n            col += nextTab - pos;\\r\\n            col += tabSize - (col % tabSize);\\r\\n            pos = nextTab + 1;\\r\\n            if (col >= goal) { return pos }\\r\\n        }\\r\\n    }\\r\\n\\r\\n    var spaceStrs = [\\\"\\\"];\\r\\n    function spaceStr(n) {\\r\\n        while (spaceStrs.length <= n)\\r\\n        { spaceStrs.push(lst(spaceStrs) + \\\" \\\"); }\\r\\n        return spaceStrs[n]\\r\\n    }\\r\\n\\r\\n    function lst(arr) { return arr[arr.length-1] }\\r\\n\\r\\n    function map(array, f) {\\r\\n        var out = [];\\r\\n        for (var i = 0; i < array.length; i++) { out[i] = f(array[i], i); }\\r\\n        return out\\r\\n    }\\r\\n\\r\\n    function insertSorted(array, value, score) {\\r\\n        var pos = 0, priority = score(value);\\r\\n        while (pos < array.length && score(array[pos]) <= priority) { pos++; }\\r\\n        array.splice(pos, 0, value);\\r\\n    }\\r\\n\\r\\n    function nothing() {}\\r\\n\\r\\n    function createObj(base, props) {\\r\\n        var inst;\\r\\n        if (Object.create) {\\r\\n            inst = Object.create(base);\\r\\n        } else {\\r\\n            nothing.prototype = base;\\r\\n            inst = new nothing();\\r\\n        }\\r\\n        if (props) { copyObj(props, inst); }\\r\\n        return inst\\r\\n    }\\r\\n\\r\\n    var nonASCIISingleCaseWordChar = /[\\\\u00df\\\\u0587\\\\u0590-\\\\u05f4\\\\u0600-\\\\u06ff\\\\u3040-\\\\u309f\\\\u30a0-\\\\u30ff\\\\u3400-\\\\u4db5\\\\u4e00-\\\\u9fcc\\\\uac00-\\\\ud7af]/;\\r\\n    function isWordCharBasic(ch) {\\r\\n        return /\\\\w/.test(ch) || ch > \\\"\\\\x80\\\" &&\\r\\n            (ch.toUpperCase() != ch.toLowerCase() || nonASCIISingleCaseWordChar.test(ch))\\r\\n    }\\r\\n    function isWordChar(ch, helper) {\\r\\n        if (!helper) { return isWordCharBasic(ch) }\\r\\n        if (helper.source.indexOf(\\\"\\\\\\\\w\\\") > -1 && isWordCharBasic(ch)) { return true }\\r\\n        return helper.test(ch)\\r\\n    }\\r\\n\\r\\n    function isEmpty(obj) {\\r\\n        for (var n in obj) { if (obj.hasOwnProperty(n) && obj[n]) { return false } }\\r\\n        return true\\r\\n    }\\r\\n\\r\\n    // Extending unicode characters. A series of a non-extending char +\\r\\n    // any number of extending chars is treated as a single unit as far\\r\\n    // as editing and measuring is concerned. This is not fully correct,\\r\\n    // since some scripts/fonts/browsers also treat other configurations\\r\\n    // of code points as a group.\\r\\n    var extendingChars = /[\\\\u0300-\\\\u036f\\\\u0483-\\\\u0489\\\\u0591-\\\\u05bd\\\\u05bf\\\\u05c1\\\\u05c2\\\\u05c4\\\\u05c5\\\\u05c7\\\\u0610-\\\\u061a\\\\u064b-\\\\u065e\\\\u0670\\\\u06d6-\\\\u06dc\\\\u06de-\\\\u06e4\\\\u06e7\\\\u06e8\\\\u06ea-\\\\u06ed\\\\u0711\\\\u0730-\\\\u074a\\\\u07a6-\\\\u07b0\\\\u07eb-\\\\u07f3\\\\u0816-\\\\u0819\\\\u081b-\\\\u0823\\\\u0825-\\\\u0827\\\\u0829-\\\\u082d\\\\u0900-\\\\u0902\\\\u093c\\\\u0941-\\\\u0948\\\\u094d\\\\u0951-\\\\u0955\\\\u0962\\\\u0963\\\\u0981\\\\u09bc\\\\u09be\\\\u09c1-\\\\u09c4\\\\u09cd\\\\u09d7\\\\u09e2\\\\u09e3\\\\u0a01\\\\u0a02\\\\u0a3c\\\\u0a41\\\\u0a42\\\\u0a47\\\\u0a48\\\\u0a4b-\\\\u0a4d\\\\u0a51\\\\u0a70\\\\u0a71\\\\u0a75\\\\u0a81\\\\u0a82\\\\u0abc\\\\u0ac1-\\\\u0ac5\\\\u0ac7\\\\u0ac8\\\\u0acd\\\\u0ae2\\\\u0ae3\\\\u0b01\\\\u0b3c\\\\u0b3e\\\\u0b3f\\\\u0b41-\\\\u0b44\\\\u0b4d\\\\u0b56\\\\u0b57\\\\u0b62\\\\u0b63\\\\u0b82\\\\u0bbe\\\\u0bc0\\\\u0bcd\\\\u0bd7\\\\u0c3e-\\\\u0c40\\\\u0c46-\\\\u0c48\\\\u0c4a-\\\\u0c4d\\\\u0c55\\\\u0c56\\\\u0c62\\\\u0c63\\\\u0cbc\\\\u0cbf\\\\u0cc2\\\\u0cc6\\\\u0ccc\\\\u0ccd\\\\u0cd5\\\\u0cd6\\\\u0ce2\\\\u0ce3\\\\u0d3e\\\\u0d41-\\\\u0d44\\\\u0d4d\\\\u0d57\\\\u0d62\\\\u0d63\\\\u0dca\\\\u0dcf\\\\u0dd2-\\\\u0dd4\\\\u0dd6\\\\u0ddf\\\\u0e31\\\\u0e34-\\\\u0e3a\\\\u0e47-\\\\u0e4e\\\\u0eb1\\\\u0eb4-\\\\u0eb9\\\\u0ebb\\\\u0ebc\\\\u0ec8-\\\\u0ecd\\\\u0f18\\\\u0f19\\\\u0f35\\\\u0f37\\\\u0f39\\\\u0f71-\\\\u0f7e\\\\u0f80-\\\\u0f84\\\\u0f86\\\\u0f87\\\\u0f90-\\\\u0f97\\\\u0f99-\\\\u0fbc\\\\u0fc6\\\\u102d-\\\\u1030\\\\u1032-\\\\u1037\\\\u1039\\\\u103a\\\\u103d\\\\u103e\\\\u1058\\\\u1059\\\\u105e-\\\\u1060\\\\u1071-\\\\u1074\\\\u1082\\\\u1085\\\\u1086\\\\u108d\\\\u109d\\\\u135f\\\\u1712-\\\\u1714\\\\u1732-\\\\u1734\\\\u1752\\\\u1753\\\\u1772\\\\u1773\\\\u17b7-\\\\u17bd\\\\u17c6\\\\u17c9-\\\\u17d3\\\\u17dd\\\\u180b-\\\\u180d\\\\u18a9\\\\u1920-\\\\u1922\\\\u1927\\\\u1928\\\\u1932\\\\u1939-\\\\u193b\\\\u1a17\\\\u1a18\\\\u1a56\\\\u1a58-\\\\u1a5e\\\\u1a60\\\\u1a62\\\\u1a65-\\\\u1a6c\\\\u1a73-\\\\u1a7c\\\\u1a7f\\\\u1b00-\\\\u1b03\\\\u1b34\\\\u1b36-\\\\u1b3a\\\\u1b3c\\\\u1b42\\\\u1b6b-\\\\u1b73\\\\u1b80\\\\u1b81\\\\u1ba2-\\\\u1ba5\\\\u1ba8\\\\u1ba9\\\\u1c2c-\\\\u1c33\\\\u1c36\\\\u1c37\\\\u1cd0-\\\\u1cd2\\\\u1cd4-\\\\u1ce0\\\\u1ce2-\\\\u1ce8\\\\u1ced\\\\u1dc0-\\\\u1de6\\\\u1dfd-\\\\u1dff\\\\u200c\\\\u200d\\\\u20d0-\\\\u20f0\\\\u2cef-\\\\u2cf1\\\\u2de0-\\\\u2dff\\\\u302a-\\\\u302f\\\\u3099\\\\u309a\\\\ua66f-\\\\ua672\\\\ua67c\\\\ua67d\\\\ua6f0\\\\ua6f1\\\\ua802\\\\ua806\\\\ua80b\\\\ua825\\\\ua826\\\\ua8c4\\\\ua8e0-\\\\ua8f1\\\\ua926-\\\\ua92d\\\\ua947-\\\\ua951\\\\ua980-\\\\ua982\\\\ua9b3\\\\ua9b6-\\\\ua9b9\\\\ua9bc\\\\uaa29-\\\\uaa2e\\\\uaa31\\\\uaa32\\\\uaa35\\\\uaa36\\\\uaa43\\\\uaa4c\\\\uaab0\\\\uaab2-\\\\uaab4\\\\uaab7\\\\uaab8\\\\uaabe\\\\uaabf\\\\uaac1\\\\uabe5\\\\uabe8\\\\uabed\\\\udc00-\\\\udfff\\\\ufb1e\\\\ufe00-\\\\ufe0f\\\\ufe20-\\\\ufe26\\\\uff9e\\\\uff9f]/;\\r\\n    function isExtendingChar(ch) { return ch.charCodeAt(0) >= 768 && extendingChars.test(ch) }\\r\\n\\r\\n    // Returns a number from the range [`0`; `str.length`] unless `pos` is outside that range.\\r\\n    function skipExtendingChars(str, pos, dir) {\\r\\n        while ((dir < 0 ? pos > 0 : pos < str.length) && isExtendingChar(str.charAt(pos))) { pos += dir; }\\r\\n        return pos\\r\\n    }\\r\\n\\r\\n    // Returns the value from the range [`from`; `to`] that satisfies\\r\\n    // `pred` and is closest to `from`. Assumes that at least `to`\\r\\n    // satisfies `pred`. Supports `from` being greater than `to`.\\r\\n    function findFirst(pred, from, to) {\\r\\n        // At any point we are certain `to` satisfies `pred`, don't know\\r\\n        // whether `from` does.\\r\\n        var dir = from > to ? -1 : 1;\\r\\n        for (;;) {\\r\\n            if (from == to) { return from }\\r\\n            var midF = (from + to) / 2, mid = dir < 0 ? Math.ceil(midF) : Math.floor(midF);\\r\\n            if (mid == from) { return pred(mid) ? from : to }\\r\\n            if (pred(mid)) { to = mid; }\\r\\n            else { from = mid + dir; }\\r\\n        }\\r\\n    }\\r\\n\\r\\n    // The display handles the DOM integration, both for input reading\\r\\n    // and content drawing. It holds references to DOM nodes and\\r\\n    // display-related state.\\r\\n\\r\\n    function Display(place, doc, input) {\\r\\n        var d = this;\\r\\n        this.input = input;\\r\\n\\r\\n        // Covers bottom-right square when both scrollbars are present.\\r\\n        d.scrollbarFiller = elt(\\\"div\\\", null, \\\"CodeMirror-scrollbar-filler\\\");\\r\\n        d.scrollbarFiller.setAttribute(\\\"cm-not-content\\\", \\\"true\\\");\\r\\n        // Covers bottom of gutter when coverGutterNextToScrollbar is on\\r\\n        // and h scrollbar is present.\\r\\n        d.gutterFiller = elt(\\\"div\\\", null, \\\"CodeMirror-gutter-filler\\\");\\r\\n        d.gutterFiller.setAttribute(\\\"cm-not-content\\\", \\\"true\\\");\\r\\n        // Will contain the actual code, positioned to cover the viewport.\\r\\n        d.lineDiv = eltP(\\\"div\\\", null, \\\"CodeMirror-code\\\");\\r\\n        // Elements are added to these to represent selection and cursors.\\r\\n        d.selectionDiv = elt(\\\"div\\\", null, null, \\\"position: relative; z-index: 1\\\");\\r\\n        d.cursorDiv = elt(\\\"div\\\", null, \\\"CodeMirror-cursors\\\");\\r\\n        // A visibility: hidden element used to find the size of things.\\r\\n        d.measure = elt(\\\"div\\\", null, \\\"CodeMirror-measure\\\");\\r\\n        // When lines outside of the viewport are measured, they are drawn in this.\\r\\n        d.lineMeasure = elt(\\\"div\\\", null, \\\"CodeMirror-measure\\\");\\r\\n        // Wraps everything that needs to exist inside the vertically-padded coordinate system\\r\\n        d.lineSpace = eltP(\\\"div\\\", [d.measure, d.lineMeasure, d.selectionDiv, d.cursorDiv, d.lineDiv],\\r\\n            null, \\\"position: relative; outline: none\\\");\\r\\n        var lines = eltP(\\\"div\\\", [d.lineSpace], \\\"CodeMirror-lines\\\");\\r\\n        // Moved around its parent to cover visible view.\\r\\n        d.mover = elt(\\\"div\\\", [lines], null, \\\"position: relative\\\");\\r\\n        // Set to the height of the document, allowing scrolling.\\r\\n        d.sizer = elt(\\\"div\\\", [d.mover], \\\"CodeMirror-sizer\\\");\\r\\n        d.sizerWidth = null;\\r\\n        // Behavior of elts with overflow: auto and padding is\\r\\n        // inconsistent across browsers. This is used to ensure the\\r\\n        // scrollable area is big enough.\\r\\n        d.heightForcer = elt(\\\"div\\\", null, null, \\\"position: absolute; height: \\\" + scrollerGap + \\\"px; width: 1px;\\\");\\r\\n        // Will contain the gutters, if any.\\r\\n        d.gutters = elt(\\\"div\\\", null, \\\"CodeMirror-gutters\\\");\\r\\n        d.lineGutter = null;\\r\\n        // Actual scrollable element.\\r\\n        d.scroller = elt(\\\"div\\\", [d.sizer, d.heightForcer, d.gutters], \\\"CodeMirror-scroll\\\");\\r\\n        d.scroller.setAttribute(\\\"tabIndex\\\", \\\"-1\\\");\\r\\n        // The element in which the editor lives.\\r\\n        d.wrapper = elt(\\\"div\\\", [d.scrollbarFiller, d.gutterFiller, d.scroller], \\\"CodeMirror\\\");\\r\\n\\r\\n        // Work around IE7 z-index bug (not perfect, hence IE7 not really being supported)\\r\\n        if (ie && ie_version < 8) { d.gutters.style.zIndex = -1; d.scroller.style.paddingRight = 0; }\\r\\n        if (!webkit && !(gecko && mobile)) { d.scroller.draggable = true; }\\r\\n\\r\\n        if (place) {\\r\\n            if (place.appendChild) { place.appendChild(d.wrapper); }\\r\\n            else { place(d.wrapper); }\\r\\n        }\\r\\n\\r\\n        // Current rendered range (may be bigger than the view window).\\r\\n        d.viewFrom = d.viewTo = doc.first;\\r\\n        d.reportedViewFrom = d.reportedViewTo = doc.first;\\r\\n        // Information about the rendered lines.\\r\\n        d.view = [];\\r\\n        d.renderedView = null;\\r\\n        // Holds info about a single rendered line when it was rendered\\r\\n        // for measurement, while not in view.\\r\\n        d.externalMeasured = null;\\r\\n        // Empty space (in pixels) above the view\\r\\n        d.viewOffset = 0;\\r\\n        d.lastWrapHeight = d.lastWrapWidth = 0;\\r\\n        d.updateLineNumbers = null;\\r\\n\\r\\n        d.nativeBarWidth = d.barHeight = d.barWidth = 0;\\r\\n        d.scrollbarsClipped = false;\\r\\n\\r\\n        // Used to only resize the line number gutter when necessary (when\\r\\n        // the amount of lines crosses a boundary that makes its width change)\\r\\n        d.lineNumWidth = d.lineNumInnerWidth = d.lineNumChars = null;\\r\\n        // Set to true when a non-horizontal-scrolling line widget is\\r\\n        // added. As an optimization, line widget aligning is skipped when\\r\\n        // this is false.\\r\\n        d.alignWidgets = false;\\r\\n\\r\\n        d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null;\\r\\n\\r\\n        // Tracks the maximum line length so that the horizontal scrollbar\\r\\n        // can be kept static when scrolling.\\r\\n        d.maxLine = null;\\r\\n        d.maxLineLength = 0;\\r\\n        d.maxLineChanged = false;\\r\\n\\r\\n        // Used for measuring wheel scrolling granularity\\r\\n        d.wheelDX = d.wheelDY = d.wheelStartX = d.wheelStartY = null;\\r\\n\\r\\n        // True when shift is held down.\\r\\n        d.shift = false;\\r\\n\\r\\n        // Used to track whether anything happened since the context menu\\r\\n        // was opened.\\r\\n        d.selForContextMenu = null;\\r\\n\\r\\n        d.activeTouch = null;\\r\\n\\r\\n        input.init(d);\\r\\n    }\\r\\n\\r\\n    // Find the line object corresponding to the given line number.\\r\\n    function getLine(doc, n) {\\r\\n        n -= doc.first;\\r\\n        if (n < 0 || n >= doc.size) { throw new Error(\\\"There is no line \\\" + (n + doc.first) + \\\" in the document.\\\") }\\r\\n        var chunk = doc;\\r\\n        while (!chunk.lines) {\\r\\n            for (var i = 0;; ++i) {\\r\\n                var child = chunk.children[i], sz = child.chunkSize();\\r\\n                if (n < sz) { chunk = child; break }\\r\\n                n -= sz;\\r\\n            }\\r\\n        }\\r\\n        return chunk.lines[n]\\r\\n    }\\r\\n\\r\\n    // Get the part of a document between two positions, as an array of\\r\\n    // strings.\\r\\n    function getBetween(doc, start, end) {\\r\\n        var out = [], n = start.line;\\r\\n        doc.iter(start.line, end.line + 1, function (line) {\\r\\n            var text = line.text;\\r\\n            if (n == end.line) { text = text.slice(0, end.ch); }\\r\\n            if (n == start.line) { text = text.slice(start.ch); }\\r\\n            out.push(text);\\r\\n            ++n;\\r\\n        });\\r\\n        return out\\r\\n    }\\r\\n\\r\\n    function getLines(doc, from, to, lineFilter) {\\r\\n        var out = [];\\r\\n        doc.iter(from, to, function (line) {\\r\\n            var text = line.text;\\r\\n            if (lineFilter) {\\r\\n                text = lineFilter(line);\\r\\n            }\\r\\n            out.push(text);\\r\\n        });\\r\\n        return out;\\r\\n    }\\r\\n\\r\\n    // Update the height of a line, propagating the height change\\r\\n    // upwards to parent nodes.\\r\\n    function updateLineHeight(line, height) {\\r\\n        var diff = height - line.height;\\r\\n        if (diff) { for (var n = line; n; n = n.parent) { n.height += diff; } }\\r\\n    }\\r\\n\\r\\n    // Given a line object, find its line number by walking up through\\r\\n    // its parent links.\\r\\n    function lineNo(line) {\\r\\n        if (line.parent == null) { return null }\\r\\n        var cur = line.parent, no = indexOf(cur.lines, line);\\r\\n        for (var chunk = cur.parent; chunk; cur = chunk, chunk = chunk.parent) {\\r\\n            for (var i = 0;; ++i) {\\r\\n                if (chunk.children[i] == cur) { break }\\r\\n                no += chunk.children[i].chunkSize();\\r\\n            }\\r\\n        }\\r\\n        return no + cur.first\\r\\n    }\\r\\n\\r\\n    // Find the line at the given vertical position, using the height\\r\\n    // information in the document tree.\\r\\n    function lineAtHeight(chunk, h) {\\r\\n        var n = chunk.first;\\r\\n        outer: do {\\r\\n            for (var i$1 = 0; i$1 < chunk.children.length; ++i$1) {\\r\\n                var child = chunk.children[i$1], ch = child.height;\\r\\n                if (h < ch) { chunk = child; continue outer }\\r\\n                h -= ch;\\r\\n                n += child.chunkSize();\\r\\n            }\\r\\n            return n\\r\\n        } while (!chunk.lines)\\r\\n        var i = 0;\\r\\n        for (; i < chunk.lines.length; ++i) {\\r\\n            var line = chunk.lines[i], lh = line.height;\\r\\n            if (h < lh) { break }\\r\\n            h -= lh;\\r\\n        }\\r\\n        return n + i\\r\\n    }\\r\\n\\r\\n    function isLine(doc, l) {return l >= doc.first && l < doc.first + doc.size}\\r\\n\\r\\n    function lineNumberFor(options, i) {\\r\\n        return String(options.lineNumberFormatter(i + options.firstLineNumber))\\r\\n    }\\r\\n\\r\\n    // A Pos instance represents a position within the text.\\r\\n    function Pos(line, ch, sticky) {\\r\\n        if ( sticky === void 0 ) sticky = null;\\r\\n\\r\\n        if (!(this instanceof Pos)) { return new Pos(line, ch, sticky) }\\r\\n        this.line = line;\\r\\n        this.ch = ch;\\r\\n        this.sticky = sticky;\\r\\n    }\\r\\n\\r\\n    // Compare two positions, return 0 if they are the same, a negative\\r\\n    // number when a is less, and a positive number otherwise.\\r\\n    function cmp(a, b) { return a.line - b.line || a.ch - b.ch }\\r\\n\\r\\n    function equalCursorPos(a, b) { return a.sticky == b.sticky && cmp(a, b) == 0 }\\r\\n\\r\\n    function copyPos(x) {return Pos(x.line, x.ch)}\\r\\n    function maxPos(a, b) { return cmp(a, b) < 0 ? b : a }\\r\\n    function minPos(a, b) { return cmp(a, b) < 0 ? a : b }\\r\\n\\r\\n    // Most of the external API clips given positions to make sure they\\r\\n    // actually exist within the document.\\r\\n    function clipLine(doc, n) {return Math.max(doc.first, Math.min(n, doc.first + doc.size - 1))}\\r\\n    function clipPos(doc, pos) {\\r\\n        if (pos.line < doc.first) { return Pos(doc.first, 0) }\\r\\n        var last = doc.first + doc.size - 1;\\r\\n        if (pos.line > last) { return Pos(last, getLine(doc, last).text.length) }\\r\\n        return clipToLen(pos, getLine(doc, pos.line).text.length)\\r\\n    }\\r\\n    function clipToLen(pos, linelen) {\\r\\n        var ch = pos.ch;\\r\\n        if (ch == null || ch > linelen) { return Pos(pos.line, linelen) }\\r\\n        else if (ch < 0) { return Pos(pos.line, 0) }\\r\\n        else { return pos }\\r\\n    }\\r\\n    function clipPosArray(doc, array) {\\r\\n        var out = [];\\r\\n        for (var i = 0; i < array.length; i++) { out[i] = clipPos(doc, array[i]); }\\r\\n        return out\\r\\n    }\\r\\n\\r\\n    // Optimize some code when these features are not used.\\r\\n    var sawReadOnlySpans = false, sawCollapsedSpans = false;\\r\\n\\r\\n    function seeReadOnlySpans() {\\r\\n        sawReadOnlySpans = true;\\r\\n    }\\r\\n\\r\\n    function seeCollapsedSpans() {\\r\\n        sawCollapsedSpans = true;\\r\\n    }\\r\\n\\r\\n    // TEXTMARKER SPANS\\r\\n\\r\\n    function MarkedSpan(marker, from, to) {\\r\\n        this.marker = marker;\\r\\n        this.from = from; this.to = to;\\r\\n    }\\r\\n\\r\\n    // Search an array of spans for a span matching the given marker.\\r\\n    function getMarkedSpanFor(spans, marker) {\\r\\n        if (spans) { for (var i = 0; i < spans.length; ++i) {\\r\\n            var span = spans[i];\\r\\n            if (span.marker == marker) { return span }\\r\\n        } }\\r\\n    }\\r\\n    // Remove a span from an array, returning undefined if no spans are\\r\\n    // left (we don't store arrays for lines without spans).\\r\\n    function removeMarkedSpan(spans, span) {\\r\\n        var r;\\r\\n        for (var i = 0; i < spans.length; ++i)\\r\\n        { if (spans[i] != span) { (r || (r = [])).push(spans[i]); } }\\r\\n        return r\\r\\n    }\\r\\n    // Add a span to a line.\\r\\n    function addMarkedSpan(line, span) {\\r\\n        line.markedSpans = line.markedSpans ? line.markedSpans.concat([span]) : [span];\\r\\n        span.marker.attachLine(line);\\r\\n    }\\r\\n\\r\\n    // Used for the algorithm that adjusts markers for a change in the\\r\\n    // document. These functions cut an array of spans at a given\\r\\n    // character position, returning an array of remaining chunks (or\\r\\n    // undefined if nothing remains).\\r\\n    function markedSpansBefore(old, startCh, isInsert) {\\r\\n        var nw;\\r\\n        if (old) { for (var i = 0; i < old.length; ++i) {\\r\\n            var span = old[i], marker = span.marker;\\r\\n            var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= startCh : span.from < startCh);\\r\\n            if (startsBefore || span.from == startCh && marker.type == \\\"bookmark\\\" && (!isInsert || !span.marker.insertLeft)) {\\r\\n                var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= startCh : span.to > startCh)\\r\\n                ;(nw || (nw = [])).push(new MarkedSpan(marker, span.from, endsAfter ? null : span.to));\\r\\n            }\\r\\n        } }\\r\\n        return nw\\r\\n    }\\r\\n    function markedSpansAfter(old, endCh, isInsert) {\\r\\n        var nw;\\r\\n        if (old) { for (var i = 0; i < old.length; ++i) {\\r\\n            var span = old[i], marker = span.marker;\\r\\n            var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= endCh : span.to > endCh);\\r\\n            if (endsAfter || span.from == endCh && marker.type == \\\"bookmark\\\" && (!isInsert || span.marker.insertLeft)) {\\r\\n                var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= endCh : span.from < endCh)\\r\\n                ;(nw || (nw = [])).push(new MarkedSpan(marker, startsBefore ? null : span.from - endCh,\\r\\n                    span.to == null ? null : span.to - endCh));\\r\\n            }\\r\\n        } }\\r\\n        return nw\\r\\n    }\\r\\n\\r\\n    // Given a change object, compute the new set of marker spans that\\r\\n    // cover the line in which the change took place. Removes spans\\r\\n    // entirely within the change, reconnects spans belonging to the\\r\\n    // same marker that appear on both sides of the change, and cuts off\\r\\n    // spans partially within the change. Returns an array of span\\r\\n    // arrays with one element for each line in (after) the change.\\r\\n    function stretchSpansOverChange(doc, change) {\\r\\n        if (change.full) { return null }\\r\\n        var oldFirst = isLine(doc, change.from.line) && getLine(doc, change.from.line).markedSpans;\\r\\n        var oldLast = isLine(doc, change.to.line) && getLine(doc, change.to.line).markedSpans;\\r\\n        if (!oldFirst && !oldLast) { return null }\\r\\n\\r\\n        var startCh = change.from.ch, endCh = change.to.ch, isInsert = cmp(change.from, change.to) == 0;\\r\\n        // Get the spans that 'stick out' on both sides\\r\\n        var first = markedSpansBefore(oldFirst, startCh, isInsert);\\r\\n        var last = markedSpansAfter(oldLast, endCh, isInsert);\\r\\n\\r\\n        // Next, merge those two ends\\r\\n        var sameLine = change.text.length == 1, offset = lst(change.text).length + (sameLine ? startCh : 0);\\r\\n        if (first) {\\r\\n            // Fix up .to properties of first\\r\\n            for (var i = 0; i < first.length; ++i) {\\r\\n                var span = first[i];\\r\\n                if (span.to == null) {\\r\\n                    var found = getMarkedSpanFor(last, span.marker);\\r\\n                    if (!found) { span.to = startCh; }\\r\\n                    else if (sameLine) { span.to = found.to == null ? null : found.to + offset; }\\r\\n                }\\r\\n            }\\r\\n        }\\r\\n        if (last) {\\r\\n            // Fix up .from in last (or move them into first in case of sameLine)\\r\\n            for (var i$1 = 0; i$1 < last.length; ++i$1) {\\r\\n                var span$1 = last[i$1];\\r\\n                if (span$1.to != null) { span$1.to += offset; }\\r\\n                if (span$1.from == null) {\\r\\n                    var found$1 = getMarkedSpanFor(first, span$1.marker);\\r\\n                    if (!found$1) {\\r\\n                        span$1.from = offset;\\r\\n                        if (sameLine) { (first || (first = [])).push(span$1); }\\r\\n                    }\\r\\n                } else {\\r\\n                    span$1.from += offset;\\r\\n                    if (sameLine) { (first || (first = [])).push(span$1); }\\r\\n                }\\r\\n            }\\r\\n        }\\r\\n        // Make sure we didn't create any zero-length spans\\r\\n        if (first) { first = clearEmptySpans(first); }\\r\\n        if (last && last != first) { last = clearEmptySpans(last); }\\r\\n\\r\\n        var newMarkers = [first];\\r\\n        if (!sameLine) {\\r\\n            // Fill gap with whole-line-spans\\r\\n            var gap = change.text.length - 2, gapMarkers;\\r\\n            if (gap > 0 && first)\\r\\n            { for (var i$2 = 0; i$2 < first.length; ++i$2)\\r\\n            { if (first[i$2].to == null)\\r\\n            { (gapMarkers || (gapMarkers = [])).push(new MarkedSpan(first[i$2].marker, null, null)); } } }\\r\\n            for (var i$3 = 0; i$3 < gap; ++i$3)\\r\\n            { newMarkers.push(gapMarkers); }\\r\\n            newMarkers.push(last);\\r\\n        }\\r\\n        return newMarkers\\r\\n    }\\r\\n\\r\\n    // Remove spans that are empty and don't have a clearWhenEmpty\\r\\n    // option of false.\\r\\n    function clearEmptySpans(spans) {\\r\\n        for (var i = 0; i < spans.length; ++i) {\\r\\n            var span = spans[i];\\r\\n            if (span.from != null && span.from == span.to && span.marker.clearWhenEmpty !== false)\\r\\n            { spans.splice(i--, 1); }\\r\\n        }\\r\\n        if (!spans.length) { return null }\\r\\n        return spans\\r\\n    }\\r\\n\\r\\n    // Used to 'clip' out readOnly ranges when making a change.\\r\\n    function removeReadOnlyRanges(doc, from, to) {\\r\\n        var markers = null;\\r\\n        doc.iter(from.line, to.line + 1, function (line) {\\r\\n            if (line.markedSpans) { for (var i = 0; i < line.markedSpans.length; ++i) {\\r\\n                var mark = line.markedSpans[i].marker;\\r\\n                if (mark.readOnly && (!markers || indexOf(markers, mark) == -1))\\r\\n                { (markers || (markers = [])).push(mark); }\\r\\n            } }\\r\\n        });\\r\\n        if (!markers) { return null }\\r\\n        var parts = [{from: from, to: to}];\\r\\n        for (var i = 0; i < markers.length; ++i) {\\r\\n            var mk = markers[i], m = mk.find(0);\\r\\n            for (var j = 0; j < parts.length; ++j) {\\r\\n                var p = parts[j];\\r\\n                if (cmp(p.to, m.from) < 0 || cmp(p.from, m.to) > 0) { continue }\\r\\n                var newParts = [j, 1], dfrom = cmp(p.from, m.from), dto = cmp(p.to, m.to);\\r\\n                if (dfrom < 0 || !mk.inclusiveLeft && !dfrom)\\r\\n                { newParts.push({from: p.from, to: m.from}); }\\r\\n                if (dto > 0 || !mk.inclusiveRight && !dto)\\r\\n                { newParts.push({from: m.to, to: p.to}); }\\r\\n                parts.splice.apply(parts, newParts);\\r\\n                j += newParts.length - 3;\\r\\n            }\\r\\n        }\\r\\n        return parts\\r\\n    }\\r\\n\\r\\n    // Connect or disconnect spans from a line.\\r\\n    function detachMarkedSpans(line) {\\r\\n        var spans = line.markedSpans;\\r\\n        if (!spans) { return }\\r\\n        for (var i = 0; i < spans.length; ++i)\\r\\n        { spans[i].marker.detachLine(line); }\\r\\n        line.markedSpans = null;\\r\\n    }\\r\\n    function attachMarkedSpans(line, spans) {\\r\\n        if (!spans) { return }\\r\\n        for (var i = 0; i < spans.length; ++i)\\r\\n        { spans[i].marker.attachLine(line); }\\r\\n        line.markedSpans = spans;\\r\\n    }\\r\\n\\r\\n    // Helpers used when computing which overlapping collapsed span\\r\\n    // counts as the larger one.\\r\\n    function extraLeft(marker) { return marker.inclusiveLeft ? -1 : 0 }\\r\\n    function extraRight(marker) { return marker.inclusiveRight ? 1 : 0 }\\r\\n\\r\\n    // Returns a number indicating which of two overlapping collapsed\\r\\n    // spans is larger (and thus includes the other). Falls back to\\r\\n    // comparing ids when the spans cover exactly the same range.\\r\\n    function compareCollapsedMarkers(a, b) {\\r\\n        var lenDiff = a.lines.length - b.lines.length;\\r\\n        if (lenDiff != 0) { return lenDiff }\\r\\n        var aPos = a.find(), bPos = b.find();\\r\\n        var fromCmp = cmp(aPos.from, bPos.from) || extraLeft(a) - extraLeft(b);\\r\\n        if (fromCmp) { return -fromCmp }\\r\\n        var toCmp = cmp(aPos.to, bPos.to) || extraRight(a) - extraRight(b);\\r\\n        if (toCmp) { return toCmp }\\r\\n        return b.id - a.id\\r\\n    }\\r\\n\\r\\n    // Find out whether a line ends or starts in a collapsed span. If\\r\\n    // so, return the marker for that span.\\r\\n    function collapsedSpanAtSide(line, start) {\\r\\n        var sps = sawCollapsedSpans && line.markedSpans, found;\\r\\n        if (sps) { for (var sp = (void 0), i = 0; i < sps.length; ++i) {\\r\\n            sp = sps[i];\\r\\n            if (sp.marker.collapsed && (start ? sp.from : sp.to) == null &&\\r\\n                (!found || compareCollapsedMarkers(found, sp.marker) < 0))\\r\\n            { found = sp.marker; }\\r\\n        } }\\r\\n        return found\\r\\n    }\\r\\n    function collapsedSpanAtStart(line) { return collapsedSpanAtSide(line, true) }\\r\\n    function collapsedSpanAtEnd(line) { return collapsedSpanAtSide(line, false) }\\r\\n\\r\\n    function collapsedSpanAround(line, ch) {\\r\\n        var sps = sawCollapsedSpans && line.markedSpans, found;\\r\\n        if (sps) { for (var i = 0; i < sps.length; ++i) {\\r\\n            var sp = sps[i];\\r\\n            if (sp.marker.collapsed && (sp.from == null || sp.from < ch) && (sp.to == null || sp.to > ch) &&\\r\\n                (!found || compareCollapsedMarkers(found, sp.marker) < 0)) { found = sp.marker; }\\r\\n        } }\\r\\n        return found\\r\\n    }\\r\\n\\r\\n    // Test whether there exists a collapsed span that partially\\r\\n    // overlaps (covers the start or end, but not both) of a new span.\\r\\n    // Such overlap is not allowed.\\r\\n    function conflictingCollapsedRange(doc, lineNo$$1, from, to, marker) {\\r\\n        var line = getLine(doc, lineNo$$1);\\r\\n        var sps = sawCollapsedSpans && line.markedSpans;\\r\\n        if (sps) { for (var i = 0; i < sps.length; ++i) {\\r\\n            var sp = sps[i];\\r\\n            if (!sp.marker.collapsed) { continue }\\r\\n            var found = sp.marker.find(0);\\r\\n            var fromCmp = cmp(found.from, from) || extraLeft(sp.marker) - extraLeft(marker);\\r\\n            var toCmp = cmp(found.to, to) || extraRight(sp.marker) - extraRight(marker);\\r\\n            if (fromCmp >= 0 && toCmp <= 0 || fromCmp <= 0 && toCmp >= 0) { continue }\\r\\n            if (fromCmp <= 0 && (sp.marker.inclusiveRight && marker.inclusiveLeft ? cmp(found.to, from) >= 0 : cmp(found.to, from) > 0) ||\\r\\n                fromCmp >= 0 && (sp.marker.inclusiveRight && marker.inclusiveLeft ? cmp(found.from, to) <= 0 : cmp(found.from, to) < 0))\\r\\n            { return true }\\r\\n        } }\\r\\n    }\\r\\n\\r\\n    // A visual line is a line as drawn on the screen. Folding, for\\r\\n    // example, can cause multiple logical lines to appear on the same\\r\\n    // visual line. This finds the start of the visual line that the\\r\\n    // given line is part of (usually that is the line itself).\\r\\n    function visualLine(line) {\\r\\n        var merged;\\r\\n        while (merged = collapsedSpanAtStart(line))\\r\\n        { line = merged.find(-1, true).line; }\\r\\n        return line\\r\\n    }\\r\\n\\r\\n    function visualLineEnd(line) {\\r\\n        var merged;\\r\\n        while (merged = collapsedSpanAtEnd(line))\\r\\n        { line = merged.find(1, true).line; }\\r\\n        return line\\r\\n    }\\r\\n\\r\\n    // Returns an array of logical lines that continue the visual line\\r\\n    // started by the argument, or undefined if there are no such lines.\\r\\n    function visualLineContinued(line) {\\r\\n        var merged, lines;\\r\\n        while (merged = collapsedSpanAtEnd(line)) {\\r\\n            line = merged.find(1, true).line\\r\\n            ;(lines || (lines = [])).push(line);\\r\\n        }\\r\\n        return lines\\r\\n    }\\r\\n\\r\\n    // Get the line number of the start of the visual line that the\\r\\n    // given line number is part of.\\r\\n    function visualLineNo(doc, lineN) {\\r\\n        var line = getLine(doc, lineN), vis = visualLine(line);\\r\\n        if (line == vis) { return lineN }\\r\\n        return lineNo(vis)\\r\\n    }\\r\\n\\r\\n    // Get the line number of the start of the next visual line after\\r\\n    // the given line.\\r\\n    function visualLineEndNo(doc, lineN) {\\r\\n        if (lineN > doc.lastLine()) { return lineN }\\r\\n        var line = getLine(doc, lineN), merged;\\r\\n        if (!lineIsHidden(doc, line)) { return lineN }\\r\\n        while (merged = collapsedSpanAtEnd(line))\\r\\n        { line = merged.find(1, true).line; }\\r\\n        return lineNo(line) + 1\\r\\n    }\\r\\n\\r\\n    // Compute whether a line is hidden. Lines count as hidden when they\\r\\n    // are part of a visual line that starts with another line, or when\\r\\n    // they are entirely covered by collapsed, non-widget span.\\r\\n    function lineIsHidden(doc, line) {\\r\\n        var sps = sawCollapsedSpans && line.markedSpans;\\r\\n        if (sps) { for (var sp = (void 0), i = 0; i < sps.length; ++i) {\\r\\n            sp = sps[i];\\r\\n            if (!sp.marker.collapsed) { continue }\\r\\n            if (sp.from == null) { return true }\\r\\n            if (sp.marker.widgetNode) { continue }\\r\\n            if (sp.from == 0 && sp.marker.inclusiveLeft && lineIsHiddenInner(doc, line, sp))\\r\\n            { return true }\\r\\n        } }\\r\\n    }\\r\\n    function lineIsHiddenInner(doc, line, span) {\\r\\n        if (span.to == null) {\\r\\n            var end = span.marker.find(1, true);\\r\\n            return lineIsHiddenInner(doc, end.line, getMarkedSpanFor(end.line.markedSpans, span.marker))\\r\\n        }\\r\\n        if (span.marker.inclusiveRight && span.to == line.text.length)\\r\\n        { return true }\\r\\n        for (var sp = (void 0), i = 0; i < line.markedSpans.length; ++i) {\\r\\n            sp = line.markedSpans[i];\\r\\n            if (sp.marker.collapsed && !sp.marker.widgetNode && sp.from == span.to &&\\r\\n                (sp.to == null || sp.to != span.from) &&\\r\\n                (sp.marker.inclusiveLeft || span.marker.inclusiveRight) &&\\r\\n                lineIsHiddenInner(doc, line, sp)) { return true }\\r\\n        }\\r\\n    }\\r\\n\\r\\n    // Find the height above the given line.\\r\\n    function heightAtLine(lineObj) {\\r\\n        lineObj = visualLine(lineObj);\\r\\n\\r\\n        var h = 0, chunk = lineObj.parent;\\r\\n        for (var i = 0; i < chunk.lines.length; ++i) {\\r\\n            var line = chunk.lines[i];\\r\\n            if (line == lineObj) { break }\\r\\n            else { h += line.height; }\\r\\n        }\\r\\n        for (var p = chunk.parent; p; chunk = p, p = chunk.parent) {\\r\\n            for (var i$1 = 0; i$1 < p.children.length; ++i$1) {\\r\\n                var cur = p.children[i$1];\\r\\n                if (cur == chunk) { break }\\r\\n                else { h += cur.height; }\\r\\n            }\\r\\n        }\\r\\n        return h\\r\\n    }\\r\\n\\r\\n    // Compute the character length of a line, taking into account\\r\\n    // collapsed ranges (see markText) that might hide parts, and join\\r\\n    // other lines onto it.\\r\\n    function lineLength(line) {\\r\\n        if (line.height == 0) { return 0 }\\r\\n        var len = line.text.length, merged, cur = line;\\r\\n        while (merged = collapsedSpanAtStart(cur)) {\\r\\n            var found = merged.find(0, true);\\r\\n            cur = found.from.line;\\r\\n            len += found.from.ch - found.to.ch;\\r\\n        }\\r\\n        cur = line;\\r\\n        while (merged = collapsedSpanAtEnd(cur)) {\\r\\n            var found$1 = merged.find(0, true);\\r\\n            len -= cur.text.length - found$1.from.ch;\\r\\n            cur = found$1.to.line;\\r\\n            len += cur.text.length - found$1.to.ch;\\r\\n        }\\r\\n        return len\\r\\n    }\\r\\n\\r\\n    // Find the longest line in the document.\\r\\n    function findMaxLine(cm) {\\r\\n        var d = cm.display, doc = cm.doc;\\r\\n        d.maxLine = getLine(doc, doc.first);\\r\\n        d.maxLineLength = lineLength(d.maxLine);\\r\\n        d.maxLineChanged = true;\\r\\n        doc.iter(function (line) {\\r\\n            var len = lineLength(line);\\r\\n            if (len > d.maxLineLength) {\\r\\n                d.maxLineLength = len;\\r\\n                d.maxLine = line;\\r\\n            }\\r\\n        });\\r\\n    }\\r\\n\\r\\n    // BIDI HELPERS\\r\\n\\r\\n    function iterateBidiSections(order, from, to, f) {\\r\\n        if (!order) { return f(from, to, \\\"ltr\\\", 0) }\\r\\n        var found = false;\\r\\n        for (var i = 0; i < order.length; ++i) {\\r\\n            var part = order[i];\\r\\n            if (part.from < to && part.to > from || from == to && part.to == from) {\\r\\n                f(Math.max(part.from, from), Math.min(part.to, to), part.level == 1 ? \\\"rtl\\\" : \\\"ltr\\\", i);\\r\\n                found = true;\\r\\n            }\\r\\n        }\\r\\n        if (!found) { f(from, to, \\\"ltr\\\"); }\\r\\n    }\\r\\n\\r\\n    var bidiOther = null;\\r\\n    function getBidiPartAt(order, ch, sticky) {\\r\\n        var found;\\r\\n        bidiOther = null;\\r\\n        for (var i = 0; i < order.length; ++i) {\\r\\n            var cur = order[i];\\r\\n            if (cur.from < ch && cur.to > ch) { return i }\\r\\n            if (cur.to == ch) {\\r\\n                if (cur.from != cur.to && sticky == \\\"before\\\") { found = i; }\\r\\n                else { bidiOther = i; }\\r\\n            }\\r\\n            if (cur.from == ch) {\\r\\n                if (cur.from != cur.to && sticky != \\\"before\\\") { found = i; }\\r\\n                else { bidiOther = i; }\\r\\n            }\\r\\n        }\\r\\n        return found != null ? found : bidiOther\\r\\n    }\\r\\n\\r\\n    // Bidirectional ordering algorithm\\r\\n    // See http://unicode.org/reports/tr9/tr9-13.html for the algorithm\\r\\n    // that this (partially) implements.\\r\\n\\r\\n    // One-char codes used for character types:\\r\\n    // L (L):   Left-to-Right\\r\\n    // R (R):   Right-to-Left\\r\\n    // r (AL):  Right-to-Left Arabic\\r\\n    // 1 (EN):  European Number\\r\\n    // + (ES):  European Number Separator\\r\\n    // % (ET):  European Number Terminator\\r\\n    // n (AN):  Arabic Number\\r\\n    // , (CS):  Common Number Separator\\r\\n    // m (NSM): Non-Spacing Mark\\r\\n    // b (BN):  Boundary Neutral\\r\\n    // s (B):   Paragraph Separator\\r\\n    // t (S):   Segment Separator\\r\\n    // w (WS):  Whitespace\\r\\n    // N (ON):  Other Neutrals\\r\\n\\r\\n    // Returns null if characters are ordered as they appear\\r\\n    // (left-to-right), or an array of sections ({from, to, level}\\r\\n    // objects) in the order in which they occur visually.\\r\\n    var bidiOrdering = (function() {\\r\\n        // Character types for codepoints 0 to 0xff\\r\\n        var lowTypes = \\\"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN\\\";\\r\\n        // Character types for codepoints 0x600 to 0x6f9\\r\\n        var arabicTypes = \\\"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111\\\";\\r\\n        function charType(code) {\\r\\n            if (code <= 0xf7) { return lowTypes.charAt(code) }\\r\\n            else if (0x590 <= code && code <= 0x5f4) { return \\\"R\\\" }\\r\\n            else if (0x600 <= code && code <= 0x6f9) { return arabicTypes.charAt(code - 0x600) }\\r\\n            else if (0x6ee <= code && code <= 0x8ac) { return \\\"r\\\" }\\r\\n            else if (0x2000 <= code && code <= 0x200b) { return \\\"w\\\" }\\r\\n            else if (code == 0x200c) { return \\\"b\\\" }\\r\\n            else { return \\\"L\\\" }\\r\\n        }\\r\\n\\r\\n        var bidiRE = /[\\\\u0590-\\\\u05f4\\\\u0600-\\\\u06ff\\\\u0700-\\\\u08ac]/;\\r\\n        var isNeutral = /[stwN]/, isStrong = /[LRr]/, countsAsLeft = /[Lb1n]/, countsAsNum = /[1n]/;\\r\\n\\r\\n        function BidiSpan(level, from, to) {\\r\\n            this.level = level;\\r\\n            this.from = from; this.to = to;\\r\\n        }\\r\\n\\r\\n        return function(str, direction) {\\r\\n            var outerType = direction == \\\"ltr\\\" ? \\\"L\\\" : \\\"R\\\";\\r\\n\\r\\n            if (str.length == 0 || direction == \\\"ltr\\\" && !bidiRE.test(str)) { return false }\\r\\n            var len = str.length, types = [];\\r\\n            for (var i = 0; i < len; ++i)\\r\\n            { types.push(charType(str.charCodeAt(i))); }\\r\\n\\r\\n            // W1. Examine each non-spacing mark (NSM) in the level run, and\\r\\n            // change the type of the NSM to the type of the previous\\r\\n            // character. If the NSM is at the start of the level run, it will\\r\\n            // get the type of sor.\\r\\n            for (var i$1 = 0, prev = outerType; i$1 < len; ++i$1) {\\r\\n                var type = types[i$1];\\r\\n                if (type == \\\"m\\\") { types[i$1] = prev; }\\r\\n                else { prev = type; }\\r\\n            }\\r\\n\\r\\n            // W2. Search backwards from each instance of a European number\\r\\n            // until the first strong type (R, L, AL, or sor) is found. If an\\r\\n            // AL is found, change the type of the European number to Arabic\\r\\n            // number.\\r\\n            // W3. Change all ALs to R.\\r\\n            for (var i$2 = 0, cur = outerType; i$2 < len; ++i$2) {\\r\\n                var type$1 = types[i$2];\\r\\n                if (type$1 == \\\"1\\\" && cur == \\\"r\\\") { types[i$2] = \\\"n\\\"; }\\r\\n                else if (isStrong.test(type$1)) { cur = type$1; if (type$1 == \\\"r\\\") { types[i$2] = \\\"R\\\"; } }\\r\\n            }\\r\\n\\r\\n            // W4. A single European separator between two European numbers\\r\\n            // changes to a European number. A single common separator between\\r\\n            // two numbers of the same type changes to that type.\\r\\n            for (var i$3 = 1, prev$1 = types[0]; i$3 < len - 1; ++i$3) {\\r\\n                var type$2 = types[i$3];\\r\\n                if (type$2 == \\\"+\\\" && prev$1 == \\\"1\\\" && types[i$3+1] == \\\"1\\\") { types[i$3] = \\\"1\\\"; }\\r\\n                else if (type$2 == \\\",\\\" && prev$1 == types[i$3+1] &&\\r\\n                    (prev$1 == \\\"1\\\" || prev$1 == \\\"n\\\")) { types[i$3] = prev$1; }\\r\\n                prev$1 = type$2;\\r\\n            }\\r\\n\\r\\n            // W5. A sequence of European terminators adjacent to European\\r\\n            // numbers changes to all European numbers.\\r\\n            // W6. Otherwise, separators and terminators change to Other\\r\\n            // Neutral.\\r\\n            for (var i$4 = 0; i$4 < len; ++i$4) {\\r\\n                var type$3 = types[i$4];\\r\\n                if (type$3 == \\\",\\\") { types[i$4] = \\\"N\\\"; }\\r\\n                else if (type$3 == \\\"%\\\") {\\r\\n                    var end = (void 0);\\r\\n                    for (end = i$4 + 1; end < len && types[end] == \\\"%\\\"; ++end) {}\\r\\n                    var replace = (i$4 && types[i$4-1] == \\\"!\\\") || (end < len && types[end] == \\\"1\\\") ? \\\"1\\\" : \\\"N\\\";\\r\\n                    for (var j = i$4; j < end; ++j) { types[j] = replace; }\\r\\n                    i$4 = end - 1;\\r\\n                }\\r\\n            }\\r\\n\\r\\n            // W7. Search backwards from each instance of a European number\\r\\n            // until the first strong type (R, L, or sor) is found. If an L is\\r\\n            // found, then change the type of the European number to L.\\r\\n            for (var i$5 = 0, cur$1 = outerType; i$5 < len; ++i$5) {\\r\\n                var type$4 = types[i$5];\\r\\n                if (cur$1 == \\\"L\\\" && type$4 == \\\"1\\\") { types[i$5] = \\\"L\\\"; }\\r\\n                else if (isStrong.test(type$4)) { cur$1 = type$4; }\\r\\n            }\\r\\n\\r\\n            // N1. A sequence of neutrals takes the direction of the\\r\\n            // surrounding strong text if the text on both sides has the same\\r\\n            // direction. European and Arabic numbers act as if they were R in\\r\\n            // terms of their influence on neutrals. Start-of-level-run (sor)\\r\\n            // and end-of-level-run (eor) are used at level run boundaries.\\r\\n            // N2. Any remaining neutrals take the embedding direction.\\r\\n            for (var i$6 = 0; i$6 < len; ++i$6) {\\r\\n                if (isNeutral.test(types[i$6])) {\\r\\n                    var end$1 = (void 0);\\r\\n                    for (end$1 = i$6 + 1; end$1 < len && isNeutral.test(types[end$1]); ++end$1) {}\\r\\n                    var before = (i$6 ? types[i$6-1] : outerType) == \\\"L\\\";\\r\\n                    var after = (end$1 < len ? types[end$1] : outerType) == \\\"L\\\";\\r\\n                    var replace$1 = before == after ? (before ? \\\"L\\\" : \\\"R\\\") : outerType;\\r\\n                    for (var j$1 = i$6; j$1 < end$1; ++j$1) { types[j$1] = replace$1; }\\r\\n                    i$6 = end$1 - 1;\\r\\n                }\\r\\n            }\\r\\n\\r\\n            // Here we depart from the documented algorithm, in order to avoid\\r\\n            // building up an actual levels array. Since there are only three\\r\\n            // levels (0, 1, 2) in an implementation that doesn't take\\r\\n            // explicit embedding into account, we can build up the order on\\r\\n            // the fly, without following the level-based algorithm.\\r\\n            var order = [], m;\\r\\n            for (var i$7 = 0; i$7 < len;) {\\r\\n                if (countsAsLeft.test(types[i$7])) {\\r\\n                    var start = i$7;\\r\\n                    for (++i$7; i$7 < len && countsAsLeft.test(types[i$7]); ++i$7) {}\\r\\n                    order.push(new BidiSpan(0, start, i$7));\\r\\n                } else {\\r\\n                    var pos = i$7, at = order.length;\\r\\n                    for (++i$7; i$7 < len && types[i$7] != \\\"L\\\"; ++i$7) {}\\r\\n                    for (var j$2 = pos; j$2 < i$7;) {\\r\\n                        if (countsAsNum.test(types[j$2])) {\\r\\n                            if (pos < j$2) { order.splice(at, 0, new BidiSpan(1, pos, j$2)); }\\r\\n                            var nstart = j$2;\\r\\n                            for (++j$2; j$2 < i$7 && countsAsNum.test(types[j$2]); ++j$2) {}\\r\\n                            order.splice(at, 0, new BidiSpan(2, nstart, j$2));\\r\\n                            pos = j$2;\\r\\n                        } else { ++j$2; }\\r\\n                    }\\r\\n                    if (pos < i$7) { order.splice(at, 0, new BidiSpan(1, pos, i$7)); }\\r\\n                }\\r\\n            }\\r\\n            if (direction == \\\"ltr\\\") {\\r\\n                if (order[0].level == 1 && (m = str.match(/^\\\\s+/))) {\\r\\n                    order[0].from = m[0].length;\\r\\n                    order.unshift(new BidiSpan(0, 0, m[0].length));\\r\\n                }\\r\\n                if (lst(order).level == 1 && (m = str.match(/\\\\s+$/))) {\\r\\n                    lst(order).to -= m[0].length;\\r\\n                    order.push(new BidiSpan(0, len - m[0].length, len));\\r\\n                }\\r\\n            }\\r\\n\\r\\n            return direction == \\\"rtl\\\" ? order.reverse() : order\\r\\n        }\\r\\n    })();\\r\\n\\r\\n    // Get the bidi ordering for the given line (and cache it). Returns\\r\\n    // false for lines that are fully left-to-right, and an array of\\r\\n    // BidiSpan objects otherwise.\\r\\n    function getOrder(line, direction) {\\r\\n        var order = line.order;\\r\\n        if (order == null) { order = line.order = bidiOrdering(line.text, direction); }\\r\\n        return order\\r\\n    }\\r\\n\\r\\n    // EVENT HANDLING\\r\\n\\r\\n    // Lightweight event framework. on/off also work on DOM nodes,\\r\\n    // registering native DOM handlers.\\r\\n\\r\\n    var noHandlers = [];\\r\\n\\r\\n    var on = function(emitter, type, f) {\\r\\n        if (emitter.addEventListener) {\\r\\n            emitter.addEventListener(type, f, false);\\r\\n        } else if (emitter.attachEvent) {\\r\\n            emitter.attachEvent(\\\"on\\\" + type, f);\\r\\n        } else {\\r\\n            var map$$1 = emitter._handlers || (emitter._handlers = {});\\r\\n            map$$1[type] = (map$$1[type] || noHandlers).concat(f);\\r\\n        }\\r\\n    };\\r\\n\\r\\n    function getHandlers(emitter, type) {\\r\\n        return emitter._handlers && emitter._handlers[type] || noHandlers\\r\\n    }\\r\\n\\r\\n    function off(emitter, type, f) {\\r\\n        if (emitter.removeEventListener) {\\r\\n            emitter.removeEventListener(type, f, false);\\r\\n        } else if (emitter.detachEvent) {\\r\\n            emitter.detachEvent(\\\"on\\\" + type, f);\\r\\n        } else {\\r\\n            var map$$1 = emitter._handlers, arr = map$$1 && map$$1[type];\\r\\n            if (arr) {\\r\\n                var index = indexOf(arr, f);\\r\\n                if (index > -1)\\r\\n                { map$$1[type] = arr.slice(0, index).concat(arr.slice(index + 1)); }\\r\\n            }\\r\\n        }\\r\\n    }\\r\\n\\r\\n    function signal(emitter, type /*, values...*/) {\\r\\n        var handlers = getHandlers(emitter, type);\\r\\n        if (!handlers.length) { return }\\r\\n        var args = Array.prototype.slice.call(arguments, 2);\\r\\n        for (var i = 0; i < handlers.length; ++i) { handlers[i].apply(null, args); }\\r\\n    }\\r\\n\\r\\n    // The DOM events that CodeMirror handles can be overridden by\\r\\n    // registering a (non-DOM) handler on the editor for the event name,\\r\\n    // and preventDefault-ing the event in that handler.\\r\\n    function signalDOMEvent(cm, e, override) {\\r\\n        if (typeof e == \\\"string\\\")\\r\\n        { e = {type: e, preventDefault: function() { this.defaultPrevented = true; }}; }\\r\\n        signal(cm, override || e.type, cm, e);\\r\\n        return e_defaultPrevented(e) || e.codemirrorIgnore\\r\\n    }\\r\\n\\r\\n    function signalCursorActivity(cm) {\\r\\n        var arr = cm._handlers && cm._handlers.cursorActivity;\\r\\n        if (!arr) { return }\\r\\n        var set = cm.curOp.cursorActivityHandlers || (cm.curOp.cursorActivityHandlers = []);\\r\\n        for (var i = 0; i < arr.length; ++i) { if (indexOf(set, arr[i]) == -1)\\r\\n        { set.push(arr[i]); } }\\r\\n    }\\r\\n\\r\\n    function hasHandler(emitter, type) {\\r\\n        return getHandlers(emitter, type).length > 0\\r\\n    }\\r\\n\\r\\n    // Add on and off methods to a constructor's prototype, to make\\r\\n    // registering events on such objects more convenient.\\r\\n    function eventMixin(ctor) {\\r\\n        ctor.prototype.on = function(type, f) {on(this, type, f);};\\r\\n        ctor.prototype.off = function(type, f) {off(this, type, f);};\\r\\n    }\\r\\n\\r\\n    // Due to the fact that we still support jurassic IE versions, some\\r\\n    // compatibility wrappers are needed.\\r\\n\\r\\n    function e_preventDefault(e) {\\r\\n        if (e.preventDefault) { e.preventDefault(); }\\r\\n        else { e.returnValue = false; }\\r\\n    }\\r\\n    function e_stopPropagation(e) {\\r\\n        if (e.stopPropagation) { e.stopPropagation(); }\\r\\n        else { e.cancelBubble = true; }\\r\\n    }\\r\\n    function e_defaultPrevented(e) {\\r\\n        return e.defaultPrevented != null ? e.defaultPrevented : e.returnValue == false\\r\\n    }\\r\\n    function e_stop(e) {e_preventDefault(e); e_stopPropagation(e);}\\r\\n\\r\\n    function e_target(e) {return e.target || e.srcElement}\\r\\n    function e_button(e) {\\r\\n        var b = e.which;\\r\\n        if (b == null) {\\r\\n            if (e.button & 1) { b = 1; }\\r\\n            else if (e.button & 2) { b = 3; }\\r\\n            else if (e.button & 4) { b = 2; }\\r\\n        }\\r\\n        if (mac && e.ctrlKey && b == 1) { b = 3; }\\r\\n        return b\\r\\n    }\\r\\n\\r\\n    // Detect drag-and-drop\\r\\n    var dragAndDrop = function() {\\r\\n        // There is *some* kind of drag-and-drop support in IE6-8, but I\\r\\n        // couldn't get it to work yet.\\r\\n        if (ie && ie_version < 9) { return false }\\r\\n        var div = elt('div');\\r\\n        return \\\"draggable\\\" in div || \\\"dragDrop\\\" in div\\r\\n    }();\\r\\n\\r\\n    var zwspSupported;\\r\\n    function zeroWidthElement(measure) {\\r\\n        if (zwspSupported == null) {\\r\\n            var test = elt(\\\"span\\\", \\\"\\\\u200b\\\");\\r\\n            removeChildrenAndAdd(measure, elt(\\\"span\\\", [test, document.createTextNode(\\\"x\\\")]));\\r\\n            if (measure.firstChild.offsetHeight != 0)\\r\\n            { zwspSupported = test.offsetWidth <= 1 && test.offsetHeight > 2 && !(ie && ie_version < 8); }\\r\\n        }\\r\\n        var node = zwspSupported ? elt(\\\"span\\\", \\\"\\\\u200b\\\") :\\r\\n            elt(\\\"span\\\", \\\"\\\\u00a0\\\", null, \\\"display: inline-block; width: 1px; margin-right: -1px\\\");\\r\\n        node.setAttribute(\\\"cm-text\\\", \\\"\\\");\\r\\n        return node\\r\\n    }\\r\\n\\r\\n    // Feature-detect IE's crummy client rect reporting for bidi text\\r\\n    var badBidiRects;\\r\\n    function hasBadBidiRects(measure) {\\r\\n        if (badBidiRects != null) { return badBidiRects }\\r\\n        var txt = removeChildrenAndAdd(measure, document.createTextNode(\\\"A\\\\u062eA\\\"));\\r\\n        var r0 = range(txt, 0, 1).getBoundingClientRect();\\r\\n        var r1 = range(txt, 1, 2).getBoundingClientRect();\\r\\n        removeChildren(measure);\\r\\n        if (!r0 || r0.left == r0.right) { return false } // Safari returns null in some cases (#2780)\\r\\n        return badBidiRects = (r1.right - r0.right < 3)\\r\\n    }\\r\\n\\r\\n    // See if \\\"\\\".split is the broken IE version, if so, provide an\\r\\n    // alternative way to split lines.\\r\\n    var splitLinesAuto = \\\"\\\\n\\\\nb\\\".split(/\\\\n/).length != 3 ? function (string) {\\r\\n        var pos = 0, result = [], l = string.length;\\r\\n        while (pos <= l) {\\r\\n            var nl = string.indexOf(\\\"\\\\n\\\", pos);\\r\\n            if (nl == -1) { nl = string.length; }\\r\\n            var line = string.slice(pos, string.charAt(nl - 1) == \\\"\\\\r\\\" ? nl - 1 : nl);\\r\\n            var rt = line.indexOf(\\\"\\\\r\\\");\\r\\n            if (rt != -1) {\\r\\n                result.push(line.slice(0, rt));\\r\\n                pos += rt + 1;\\r\\n            } else {\\r\\n                result.push(line);\\r\\n                pos = nl + 1;\\r\\n            }\\r\\n        }\\r\\n        return result\\r\\n    } : function (string) { return string.split(/\\\\r\\\\n?|\\\\n/); };\\r\\n\\r\\n    var hasSelection = window.getSelection ? function (te) {\\r\\n        try { return te.selectionStart != te.selectionEnd }\\r\\n        catch(e) { return false }\\r\\n    } : function (te) {\\r\\n        var range$$1;\\r\\n        try {range$$1 = te.ownerDocument.selection.createRange();}\\r\\n        catch(e) {}\\r\\n        if (!range$$1 || range$$1.parentElement() != te) { return false }\\r\\n        return range$$1.compareEndPoints(\\\"StartToEnd\\\", range$$1) != 0\\r\\n    };\\r\\n\\r\\n    var hasCopyEvent = (function () {\\r\\n        var e = elt(\\\"div\\\");\\r\\n        if (\\\"oncopy\\\" in e) { return true }\\r\\n        e.setAttribute(\\\"oncopy\\\", \\\"return;\\\");\\r\\n        return typeof e.oncopy == \\\"function\\\"\\r\\n    })();\\r\\n\\r\\n    var badZoomedRects = null;\\r\\n    function hasBadZoomedRects(measure) {\\r\\n        if (badZoomedRects != null) { return badZoomedRects }\\r\\n        var node = removeChildrenAndAdd(measure, elt(\\\"span\\\", \\\"x\\\"));\\r\\n        var normal = node.getBoundingClientRect();\\r\\n        var fromRange = range(node, 0, 1).getBoundingClientRect();\\r\\n        return badZoomedRects = Math.abs(normal.left - fromRange.left) > 1\\r\\n    }\\r\\n\\r\\n    // Known modes, by name and by MIME\\r\\n    var modes = {}, mimeModes = {};\\r\\n\\r\\n    // Extra arguments are stored as the mode's dependencies, which is\\r\\n    // used by (legacy) mechanisms like loadmode.js to automatically\\r\\n    // load a mode. (Preferred mechanism is the require/define calls.)\\r\\n    function defineMode(name, mode) {\\r\\n        if (arguments.length > 2)\\r\\n        { mode.dependencies = Array.prototype.slice.call(arguments, 2); }\\r\\n        modes[name] = mode;\\r\\n    }\\r\\n\\r\\n    function defineMIME(mime, spec) {\\r\\n        mimeModes[mime] = spec;\\r\\n    }\\r\\n\\r\\n    // Given a MIME type, a {name, ...options} config object, or a name\\r\\n    // string, return a mode config object.\\r\\n    function resolveMode(spec) {\\r\\n        if (typeof spec == \\\"string\\\" && mimeModes.hasOwnProperty(spec)) {\\r\\n            spec = mimeModes[spec];\\r\\n        } else if (spec && typeof spec.name == \\\"string\\\" && mimeModes.hasOwnProperty(spec.name)) {\\r\\n            var found = mimeModes[spec.name];\\r\\n            if (typeof found == \\\"string\\\") { found = {name: found}; }\\r\\n            spec = createObj(found, spec);\\r\\n            spec.name = found.name;\\r\\n        } else if (typeof spec == \\\"string\\\" && /^[\\\\w\\\\-]+\\\\/[\\\\w\\\\-]+\\\\+xml$/.test(spec)) {\\r\\n            return resolveMode(\\\"application/xml\\\")\\r\\n        } else if (typeof spec == \\\"string\\\" && /^[\\\\w\\\\-]+\\\\/[\\\\w\\\\-]+\\\\+json$/.test(spec)) {\\r\\n            return resolveMode(\\\"application/json\\\")\\r\\n        }\\r\\n        if (typeof spec == \\\"string\\\") { return {name: spec} }\\r\\n        else { return spec || {name: \\\"null\\\"} }\\r\\n    }\\r\\n\\r\\n    // Given a mode spec (anything that resolveMode accepts), find and\\r\\n    // initialize an actual mode object.\\r\\n    function getMode(options, spec) {\\r\\n        spec = resolveMode(spec);\\r\\n        var mfactory = modes[spec.name];\\r\\n        if (!mfactory) { return getMode(options, \\\"text/plain\\\") }\\r\\n        var modeObj = mfactory(options, spec);\\r\\n        if (modeExtensions.hasOwnProperty(spec.name)) {\\r\\n            var exts = modeExtensions[spec.name];\\r\\n            for (var prop in exts) {\\r\\n                if (!exts.hasOwnProperty(prop)) { continue }\\r\\n                if (modeObj.hasOwnProperty(prop)) { modeObj[\\\"_\\\" + prop] = modeObj[prop]; }\\r\\n                modeObj[prop] = exts[prop];\\r\\n            }\\r\\n        }\\r\\n        modeObj.name = spec.name;\\r\\n        if (spec.helperType) { modeObj.helperType = spec.helperType; }\\r\\n        if (spec.modeProps) { for (var prop$1 in spec.modeProps)\\r\\n        { modeObj[prop$1] = spec.modeProps[prop$1]; } }\\r\\n\\r\\n        return modeObj\\r\\n    }\\r\\n\\r\\n    // This can be used to attach properties to mode objects from\\r\\n    // outside the actual mode definition.\\r\\n    var modeExtensions = {};\\r\\n    function extendMode(mode, properties) {\\r\\n        var exts = modeExtensions.hasOwnProperty(mode) ? modeExtensions[mode] : (modeExtensions[mode] = {});\\r\\n        copyObj(properties, exts);\\r\\n    }\\r\\n\\r\\n    function copyState(mode, state) {\\r\\n        if (state === true) { return state }\\r\\n        if (mode.copyState) { return mode.copyState(state) }\\r\\n        var nstate = {};\\r\\n        for (var n in state) {\\r\\n            var val = state[n];\\r\\n            if (val instanceof Array) { val = val.concat([]); }\\r\\n            nstate[n] = val;\\r\\n        }\\r\\n        return nstate\\r\\n    }\\r\\n\\r\\n    // Given a mode and a state (for that mode), find the inner mode and\\r\\n    // state at the position that the state refers to.\\r\\n    function innerMode(mode, state) {\\r\\n        var info;\\r\\n        while (mode.innerMode) {\\r\\n            info = mode.innerMode(state);\\r\\n            if (!info || info.mode == mode) { break }\\r\\n            state = info.state;\\r\\n            mode = info.mode;\\r\\n        }\\r\\n        return info || {mode: mode, state: state}\\r\\n    }\\r\\n\\r\\n    function startState(mode, a1, a2) {\\r\\n        return mode.startState ? mode.startState(a1, a2) : true\\r\\n    }\\r\\n\\r\\n    // STRING STREAM\\r\\n\\r\\n    // Fed to the mode parsers, provides helper functions to make\\r\\n    // parsers more succinct.\\r\\n\\r\\n    var StringStream = function(string, tabSize, lineOracle) {\\r\\n        this.pos = this.start = 0;\\r\\n        this.string = string;\\r\\n        this.tabSize = tabSize || 8;\\r\\n        this.lastColumnPos = this.lastColumnValue = 0;\\r\\n        this.lineStart = 0;\\r\\n        this.lineOracle = lineOracle;\\r\\n    };\\r\\n\\r\\n    StringStream.prototype.eol = function () {return this.pos >= this.string.length};\\r\\n    StringStream.prototype.sol = function () {return this.pos == this.lineStart};\\r\\n    StringStream.prototype.peek = function () {return this.string.charAt(this.pos) || undefined};\\r\\n    StringStream.prototype.next = function () {\\r\\n        if (this.pos < this.string.length)\\r\\n        { return this.string.charAt(this.pos++) }\\r\\n    };\\r\\n    StringStream.prototype.eat = function (match) {\\r\\n        var ch = this.string.charAt(this.pos);\\r\\n        var ok;\\r\\n        if (typeof match == \\\"string\\\") { ok = ch == match; }\\r\\n        else { ok = ch && (match.test ? match.test(ch) : match(ch)); }\\r\\n        if (ok) {++this.pos; return ch}\\r\\n    };\\r\\n    StringStream.prototype.eatWhile = function (match) {\\r\\n        var start = this.pos;\\r\\n        while (this.eat(match)){}\\r\\n        return this.pos > start\\r\\n    };\\r\\n    StringStream.prototype.eatSpace = function () {\\r\\n        var start = this.pos;\\r\\n        while (/[\\\\s\\\\u00a0]/.test(this.string.charAt(this.pos))) { ++this.pos; }\\r\\n        return this.pos > start\\r\\n    };\\r\\n    StringStream.prototype.skipToEnd = function () {this.pos = this.string.length;};\\r\\n    StringStream.prototype.skipTo = function (ch) {\\r\\n        var found = this.string.indexOf(ch, this.pos);\\r\\n        if (found > -1) {this.pos = found; return true}\\r\\n    };\\r\\n    StringStream.prototype.backUp = function (n) {this.pos -= n;};\\r\\n    StringStream.prototype.column = function () {\\r\\n        if (this.lastColumnPos < this.start) {\\r\\n            this.lastColumnValue = countColumn(this.string, this.start, this.tabSize, this.lastColumnPos, this.lastColumnValue);\\r\\n            this.lastColumnPos = this.start;\\r\\n        }\\r\\n        return this.lastColumnValue - (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0)\\r\\n    };\\r\\n    StringStream.prototype.indentation = function () {\\r\\n        return countColumn(this.string, null, this.tabSize) -\\r\\n            (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0)\\r\\n    };\\r\\n    StringStream.prototype.match = function (pattern, consume, caseInsensitive) {\\r\\n        if (typeof pattern == \\\"string\\\") {\\r\\n            var cased = function (str) { return caseInsensitive ? str.toLowerCase() : str; };\\r\\n            var substr = this.string.substr(this.pos, pattern.length);\\r\\n            if (cased(substr) == cased(pattern)) {\\r\\n                if (consume !== false) { this.pos += pattern.length; }\\r\\n                return true\\r\\n            }\\r\\n        } else {\\r\\n            var match = this.string.slice(this.pos).match(pattern);\\r\\n            if (match && match.index > 0) { return null }\\r\\n            if (match && consume !== false) { this.pos += match[0].length; }\\r\\n            return match\\r\\n        }\\r\\n    };\\r\\n    StringStream.prototype.current = function (){return this.string.slice(this.start, this.pos)};\\r\\n    StringStream.prototype.hideFirstChars = function (n, inner) {\\r\\n        this.lineStart += n;\\r\\n        try { return inner() }\\r\\n        finally { this.lineStart -= n; }\\r\\n    };\\r\\n    StringStream.prototype.lookAhead = function (n) {\\r\\n        var oracle = this.lineOracle;\\r\\n        return oracle && oracle.lookAhead(n)\\r\\n    };\\r\\n    StringStream.prototype.baseToken = function () {\\r\\n        var oracle = this.lineOracle;\\r\\n        return oracle && oracle.baseToken(this.pos)\\r\\n    };\\r\\n\\r\\n    var SavedContext = function(state, lookAhead) {\\r\\n        this.state = state;\\r\\n        this.lookAhead = lookAhead;\\r\\n    };\\r\\n\\r\\n    var Context = function(doc, state, line, lookAhead) {\\r\\n        this.state = state;\\r\\n        this.doc = doc;\\r\\n        this.line = line;\\r\\n        this.maxLookAhead = lookAhead || 0;\\r\\n        this.baseTokens = null;\\r\\n        this.baseTokenPos = 1;\\r\\n    };\\r\\n\\r\\n    Context.prototype.lookAhead = function (n) {\\r\\n        var line = this.doc.getLine(this.line + n);\\r\\n        if (line != null && n > this.maxLookAhead) { this.maxLookAhead = n; }\\r\\n        return line\\r\\n    };\\r\\n\\r\\n    Context.prototype.baseToken = function (n) {\\r\\n        if (!this.baseTokens) { return null }\\r\\n        while (this.baseTokens[this.baseTokenPos] <= n)\\r\\n        { this.baseTokenPos += 2; }\\r\\n        var type = this.baseTokens[this.baseTokenPos + 1];\\r\\n        return {type: type && type.replace(/( |^)overlay .*/, \\\"\\\"),\\r\\n            size: this.baseTokens[this.baseTokenPos] - n}\\r\\n    };\\r\\n\\r\\n    Context.prototype.nextLine = function () {\\r\\n        this.line++;\\r\\n        if (this.maxLookAhead > 0) { this.maxLookAhead--; }\\r\\n    };\\r\\n\\r\\n    Context.fromSaved = function (doc, saved, line) {\\r\\n        if (saved instanceof SavedContext)\\r\\n        { return new Context(doc, copyState(doc.mode, saved.state), line, saved.lookAhead) }\\r\\n        else\\r\\n        { return new Context(doc, copyState(doc.mode, saved), line) }\\r\\n    };\\r\\n\\r\\n    Context.prototype.save = function (copy) {\\r\\n        var state = copy !== false ? copyState(this.doc.mode, this.state) : this.state;\\r\\n        return this.maxLookAhead > 0 ? new SavedContext(state, this.maxLookAhead) : state\\r\\n    };\\r\\n\\r\\n\\r\\n    // Compute a style array (an array starting with a mode generation\\r\\n    // -- for invalidation -- followed by pairs of end positions and\\r\\n    // style strings), which is used to highlight the tokens on the\\r\\n    // line.\\r\\n    function highlightLine(cm, line, context, forceToEnd) {\\r\\n        // A styles array always starts with a number identifying the\\r\\n        // mode/overlays that it is based on (for easy invalidation).\\r\\n        var st = [cm.state.modeGen], lineClasses = {};\\r\\n        // Compute the base array of styles\\r\\n        runMode(cm, line.text, cm.doc.mode, context, function (end, style) { return st.push(end, style); },\\r\\n            lineClasses, forceToEnd);\\r\\n        var state = context.state;\\r\\n\\r\\n        // Run overlays, adjust style array.\\r\\n        var loop = function ( o ) {\\r\\n            context.baseTokens = st;\\r\\n            var overlay = cm.state.overlays[o], i = 1, at = 0;\\r\\n            context.state = true;\\r\\n            runMode(cm, line.text, overlay.mode, context, function (end, style) {\\r\\n                var start = i;\\r\\n                // Ensure there's a token end at the current position, and that i points at it\\r\\n                while (at < end) {\\r\\n                    var i_end = st[i];\\r\\n                    if (i_end > end)\\r\\n                    { st.splice(i, 1, end, st[i+1], i_end); }\\r\\n                    i += 2;\\r\\n                    at = Math.min(end, i_end);\\r\\n                }\\r\\n                if (!style) { return }\\r\\n                if (overlay.opaque) {\\r\\n                    st.splice(start, i - start, end, \\\"overlay \\\" + style);\\r\\n                    i = start + 2;\\r\\n                } else {\\r\\n                    for (; start < i; start += 2) {\\r\\n                        var cur = st[start+1];\\r\\n                        st[start+1] = (cur ? cur + \\\" \\\" : \\\"\\\") + \\\"overlay \\\" + style;\\r\\n                    }\\r\\n                }\\r\\n            }, lineClasses);\\r\\n            context.state = state;\\r\\n            context.baseTokens = null;\\r\\n            context.baseTokenPos = 1;\\r\\n        };\\r\\n\\r\\n        for (var o = 0; o < cm.state.overlays.length; ++o) loop( o );\\r\\n\\r\\n        return {styles: st, classes: lineClasses.bgClass || lineClasses.textClass ? lineClasses : null}\\r\\n    }\\r\\n\\r\\n    function getLineStyles(cm, line, updateFrontier) {\\r\\n        if (!line.styles || line.styles[0] != cm.state.modeGen) {\\r\\n            var context = getContextBefore(cm, lineNo(line));\\r\\n            var resetState = line.text.length > cm.options.maxHighlightLength && copyState(cm.doc.mode, context.state);\\r\\n            var result = highlightLine(cm, line, context);\\r\\n            if (resetState) { context.state = resetState; }\\r\\n            line.stateAfter = context.save(!resetState);\\r\\n            line.styles = result.styles;\\r\\n            if (result.classes) { line.styleClasses = result.classes; }\\r\\n            else if (line.styleClasses) { line.styleClasses = null; }\\r\\n            if (updateFrontier === cm.doc.highlightFrontier)\\r\\n            { cm.doc.modeFrontier = Math.max(cm.doc.modeFrontier, ++cm.doc.highlightFrontier); }\\r\\n        }\\r\\n        return line.styles\\r\\n    }\\r\\n\\r\\n    function getContextBefore(cm, n, precise) {\\r\\n        var doc = cm.doc, display = cm.display;\\r\\n        if (!doc.mode.startState) { return new Context(doc, true, n) }\\r\\n        var start = findStartLine(cm, n, precise);\\r\\n        var saved = start > doc.first && getLine(doc, start - 1).stateAfter;\\r\\n        var context = saved ? Context.fromSaved(doc, saved, start) : new Context(doc, startState(doc.mode), start);\\r\\n\\r\\n        doc.iter(start, n, function (line) {\\r\\n            processLine(cm, line.text, context);\\r\\n            var pos = context.line;\\r\\n            line.stateAfter = pos == n - 1 || pos % 5 == 0 || pos >= display.viewFrom && pos < display.viewTo ? context.save() : null;\\r\\n            context.nextLine();\\r\\n        });\\r\\n        if (precise) { doc.modeFrontier = context.line; }\\r\\n        return context\\r\\n    }\\r\\n\\r\\n    // Lightweight form of highlight -- proceed over this line and\\r\\n    // update state, but don't save a style array. Used for lines that\\r\\n    // aren't currently visible.\\r\\n    function processLine(cm, text, context, startAt) {\\r\\n        var mode = cm.doc.mode;\\r\\n        var stream = new StringStream(text, cm.options.tabSize, context);\\r\\n        stream.start = stream.pos = startAt || 0;\\r\\n        if (text == \\\"\\\") { callBlankLine(mode, context.state); }\\r\\n        while (!stream.eol()) {\\r\\n            readToken(mode, stream, context.state);\\r\\n            stream.start = stream.pos;\\r\\n        }\\r\\n    }\\r\\n\\r\\n    function callBlankLine(mode, state) {\\r\\n        if (mode.blankLine) { return mode.blankLine(state) }\\r\\n        if (!mode.innerMode) { return }\\r\\n        var inner = innerMode(mode, state);\\r\\n        if (inner.mode.blankLine) { return inner.mode.blankLine(inner.state) }\\r\\n    }\\r\\n\\r\\n    function readToken(mode, stream, state, inner) {\\r\\n        for (var i = 0; i < 10; i++) {\\r\\n            if (inner) { inner[0] = innerMode(mode, state).mode; }\\r\\n            var style = mode.token(stream, state);\\r\\n            if (stream.pos > stream.start) { return style }\\r\\n        }\\r\\n        throw new Error(\\\"Mode \\\" + mode.name + \\\" failed to advance stream.\\\")\\r\\n    }\\r\\n\\r\\n    var Token = function(stream, type, state) {\\r\\n        this.start = stream.start; this.end = stream.pos;\\r\\n        this.string = stream.current();\\r\\n        this.type = type || null;\\r\\n        this.state = state;\\r\\n    };\\r\\n\\r\\n    // Utility for getTokenAt and getLineTokens\\r\\n    function takeToken(cm, pos, precise, asArray) {\\r\\n        var doc = cm.doc, mode = doc.mode, style;\\r\\n        pos = clipPos(doc, pos);\\r\\n        var line = getLine(doc, pos.line), context = getContextBefore(cm, pos.line, precise);\\r\\n        var stream = new StringStream(line.text, cm.options.tabSize, context), tokens;\\r\\n        if (asArray) { tokens = []; }\\r\\n        while ((asArray || stream.pos < pos.ch) && !stream.eol()) {\\r\\n            stream.start = stream.pos;\\r\\n            style = readToken(mode, stream, context.state);\\r\\n            if (asArray) { tokens.push(new Token(stream, style, copyState(doc.mode, context.state))); }\\r\\n        }\\r\\n        return asArray ? tokens : new Token(stream, style, context.state)\\r\\n    }\\r\\n\\r\\n    function extractLineClasses(type, output) {\\r\\n        if (type) { for (;;) {\\r\\n            var lineClass = type.match(/(?:^|\\\\s+)line-(background-)?(\\\\S+)/);\\r\\n            if (!lineClass) { break }\\r\\n            type = type.slice(0, lineClass.index) + type.slice(lineClass.index + lineClass[0].length);\\r\\n            var prop = lineClass[1] ? \\\"bgClass\\\" : \\\"textClass\\\";\\r\\n            if (output[prop] == null)\\r\\n            { output[prop] = lineClass[2]; }\\r\\n            else if (!(new RegExp(\\\"(?:^|\\\\s)\\\" + lineClass[2] + \\\"(?:$|\\\\s)\\\")).test(output[prop]))\\r\\n            { output[prop] += \\\" \\\" + lineClass[2]; }\\r\\n        } }\\r\\n        return type\\r\\n    }\\r\\n\\r\\n    // Run the given mode's parser over a line, calling f for each token.\\r\\n    function runMode(cm, text, mode, context, f, lineClasses, forceToEnd) {\\r\\n        var flattenSpans = mode.flattenSpans;\\r\\n        if (flattenSpans == null) { flattenSpans = cm.options.flattenSpans; }\\r\\n        var curStart = 0, curStyle = null;\\r\\n        var stream = new StringStream(text, cm.options.tabSize, context), style;\\r\\n        var inner = cm.options.addModeClass && [null];\\r\\n        if (text == \\\"\\\") { extractLineClasses(callBlankLine(mode, context.state), lineClasses); }\\r\\n        while (!stream.eol()) {\\r\\n            if (stream.pos > cm.options.maxHighlightLength) {\\r\\n                flattenSpans = false;\\r\\n                if (forceToEnd) { processLine(cm, text, context, stream.pos); }\\r\\n                stream.pos = text.length;\\r\\n                style = null;\\r\\n            } else {\\r\\n                style = extractLineClasses(readToken(mode, stream, context.state, inner), lineClasses);\\r\\n            }\\r\\n            if (inner) {\\r\\n                var mName = inner[0].name;\\r\\n                if (mName) { style = \\\"m-\\\" + (style ? mName + \\\" \\\" + style : mName); }\\r\\n            }\\r\\n            if (!flattenSpans || curStyle != style) {\\r\\n                while (curStart < stream.start) {\\r\\n                    curStart = Math.min(stream.start, curStart + 5000);\\r\\n                    f(curStart, curStyle);\\r\\n                }\\r\\n                curStyle = style;\\r\\n            }\\r\\n            stream.start = stream.pos;\\r\\n        }\\r\\n        while (curStart < stream.pos) {\\r\\n            // Webkit seems to refuse to render text nodes longer than 57444\\r\\n            // characters, and returns inaccurate measurements in nodes\\r\\n            // starting around 5000 chars.\\r\\n            var pos = Math.min(stream.pos, curStart + 5000);\\r\\n            f(pos, curStyle);\\r\\n            curStart = pos;\\r\\n        }\\r\\n    }\\r\\n\\r\\n    // Finds the line to start with when starting a parse. Tries to\\r\\n    // find a line with a stateAfter, so that it can start with a\\r\\n    // valid state. If that fails, it returns the line with the\\r\\n    // smallest indentation, which tends to need the least context to\\r\\n    // parse correctly.\\r\\n    function findStartLine(cm, n, precise) {\\r\\n        var minindent, minline, doc = cm.doc;\\r\\n        var lim = precise ? -1 : n - (cm.doc.mode.innerMode ? 1000 : 100);\\r\\n        for (var search = n; search > lim; --search) {\\r\\n            if (search <= doc.first) { return doc.first }\\r\\n            var line = getLine(doc, search - 1), after = line.stateAfter;\\r\\n            if (after && (!precise || search + (after instanceof SavedContext ? after.lookAhead : 0) <= doc.modeFrontier))\\r\\n            { return search }\\r\\n            var indented = countColumn(line.text, null, cm.options.tabSize);\\r\\n            if (minline == null || minindent > indented) {\\r\\n                minline = search - 1;\\r\\n                minindent = indented;\\r\\n            }\\r\\n        }\\r\\n        return minline\\r\\n    }\\r\\n\\r\\n    function retreatFrontier(doc, n) {\\r\\n        doc.modeFrontier = Math.min(doc.modeFrontier, n);\\r\\n        if (doc.highlightFrontier < n - 10) { return }\\r\\n        var start = doc.first;\\r\\n        for (var line = n - 1; line > start; line--) {\\r\\n            var saved = getLine(doc, line).stateAfter;\\r\\n            // change is on 3\\r\\n            // state on line 1 looked ahead 2 -- so saw 3\\r\\n            // test 1 + 2 < 3 should cover this\\r\\n            if (saved && (!(saved instanceof SavedContext) || line + saved.lookAhead < n)) {\\r\\n                start = line + 1;\\r\\n                break\\r\\n            }\\r\\n        }\\r\\n        doc.highlightFrontier = Math.min(doc.highlightFrontier, start);\\r\\n    }\\r\\n\\r\\n    // LINE DATA STRUCTURE\\r\\n\\r\\n    // Line objects. These hold state related to a line, including\\r\\n    // highlighting info (the styles array).\\r\\n    var Line = function(text, markedSpans, estimateHeight) {\\r\\n        this.text = text;\\r\\n        attachMarkedSpans(this, markedSpans);\\r\\n        this.height = estimateHeight ? estimateHeight(this) : 1;\\r\\n    };\\r\\n\\r\\n    Line.prototype.lineNo = function () { return lineNo(this) };\\r\\n    eventMixin(Line);\\r\\n\\r\\n    // Change the content (text, markers) of a line. Automatically\\r\\n    // invalidates cached information and tries to re-estimate the\\r\\n    // line's height.\\r\\n    function updateLine(line, text, markedSpans, estimateHeight) {\\r\\n        line.text = text;\\r\\n        if (line.stateAfter) { line.stateAfter = null; }\\r\\n        if (line.styles) { line.styles = null; }\\r\\n        if (line.order != null) { line.order = null; }\\r\\n        detachMarkedSpans(line);\\r\\n        attachMarkedSpans(line, markedSpans);\\r\\n        var estHeight = estimateHeight ? estimateHeight(line) : 1;\\r\\n        if (estHeight != line.height) { updateLineHeight(line, estHeight); }\\r\\n    }\\r\\n\\r\\n    // Detach a line from the document tree and its markers.\\r\\n    function cleanUpLine(line) {\\r\\n        line.parent = null;\\r\\n        detachMarkedSpans(line);\\r\\n    }\\r\\n\\r\\n    // Convert a style as returned by a mode (either null, or a string\\r\\n    // containing one or more styles) to a CSS style. This is cached,\\r\\n    // and also looks for line-wide styles.\\r\\n    var styleToClassCache = {}, styleToClassCacheWithMode = {};\\r\\n    function interpretTokenStyle(style, options) {\\r\\n        if (!style || /^\\\\s*$/.test(style)) { return null }\\r\\n        var cache = options.addModeClass ? styleToClassCacheWithMode : styleToClassCache;\\r\\n        return cache[style] ||\\r\\n            (cache[style] = style.replace(/\\\\S+/g, \\\"cm-$&\\\"))\\r\\n    }\\r\\n\\r\\n    // Render the DOM representation of the text of a line. Also builds\\r\\n    // up a 'line map', which points at the DOM nodes that represent\\r\\n    // specific stretches of text, and is used by the measuring code.\\r\\n    // The returned object contains the DOM node, this map, and\\r\\n    // information about line-wide styles that were set by the mode.\\r\\n    function buildLineContent(cm, lineView) {\\r\\n        // The padding-right forces the element to have a 'border', which\\r\\n        // is needed on Webkit to be able to get line-level bounding\\r\\n        // rectangles for it (in measureChar).\\r\\n        var content = eltP(\\\"span\\\", null, null, webkit ? \\\"padding-right: .1px\\\" : null);\\r\\n        var builder = {pre: eltP(\\\"pre\\\", [content], \\\"CodeMirror-line\\\"), content: content,\\r\\n            col: 0, pos: 0, cm: cm,\\r\\n            trailingSpace: false,\\r\\n            splitSpaces: cm.getOption(\\\"lineWrapping\\\")};\\r\\n        lineView.measure = {};\\r\\n\\r\\n        // Iterate over the logical lines that make up this visual line.\\r\\n        for (var i = 0; i <= (lineView.rest ? lineView.rest.length : 0); i++) {\\r\\n            var line = i ? lineView.rest[i - 1] : lineView.line, order = (void 0);\\r\\n            builder.pos = 0;\\r\\n            builder.addToken = buildToken;\\r\\n            // Optionally wire in some hacks into the token-rendering\\r\\n            // algorithm, to deal with browser quirks.\\r\\n            if (hasBadBidiRects(cm.display.measure) && (order = getOrder(line, cm.doc.direction)))\\r\\n            { builder.addToken = buildTokenBadBidi(builder.addToken, order); }\\r\\n            builder.map = [];\\r\\n            var allowFrontierUpdate = lineView != cm.display.externalMeasured && lineNo(line);\\r\\n            insertLineContent(line, builder, getLineStyles(cm, line, allowFrontierUpdate));\\r\\n            if (line.styleClasses) {\\r\\n                if (line.styleClasses.bgClass)\\r\\n                { builder.bgClass = joinClasses(line.styleClasses.bgClass, builder.bgClass || \\\"\\\"); }\\r\\n                if (line.styleClasses.textClass)\\r\\n                { builder.textClass = joinClasses(line.styleClasses.textClass, builder.textClass || \\\"\\\"); }\\r\\n            }\\r\\n\\r\\n            // Ensure at least a single node is present, for measuring.\\r\\n            if (builder.map.length == 0)\\r\\n            { builder.map.push(0, 0, builder.content.appendChild(zeroWidthElement(cm.display.measure))); }\\r\\n\\r\\n            // Store the map and a cache object for the current logical line\\r\\n            if (i == 0) {\\r\\n                lineView.measure.map = builder.map;\\r\\n                lineView.measure.cache = {};\\r\\n            } else {\\r\\n                (lineView.measure.maps || (lineView.measure.maps = [])).push(builder.map)\\r\\n                ;(lineView.measure.caches || (lineView.measure.caches = [])).push({});\\r\\n            }\\r\\n        }\\r\\n\\r\\n        // See issue #2901\\r\\n        if (webkit) {\\r\\n            var last = builder.content.lastChild;\\r\\n            if (/\\\\bcm-tab\\\\b/.test(last.className) || (last.querySelector && last.querySelector(\\\".cm-tab\\\")))\\r\\n            { builder.content.className = \\\"cm-tab-wrap-hack\\\"; }\\r\\n        }\\r\\n\\r\\n        signal(cm, \\\"renderLine\\\", cm, lineView.line, builder.pre);\\r\\n        if (builder.pre.className)\\r\\n        { builder.textClass = joinClasses(builder.pre.className, builder.textClass || \\\"\\\"); }\\r\\n\\r\\n        return builder\\r\\n    }\\r\\n\\r\\n    function defaultSpecialCharPlaceholder(ch) {\\r\\n        var token = elt(\\\"span\\\", \\\"\\\\u2022\\\", \\\"cm-invalidchar\\\");\\r\\n        token.title = \\\"\\\\\\\\u\\\" + ch.charCodeAt(0).toString(16);\\r\\n        token.setAttribute(\\\"aria-label\\\", token.title);\\r\\n        return token\\r\\n    }\\r\\n\\r\\n    // Build up the DOM representation for a single token, and add it to\\r\\n    // the line map. Takes care to render special characters separately.\\r\\n    function buildToken(builder, text, style, startStyle, endStyle, css, attributes) {\\r\\n        if (!text) { return }\\r\\n        var displayText = builder.splitSpaces ? splitSpaces(text, builder.trailingSpace) : text;\\r\\n        var special = builder.cm.state.specialChars, mustWrap = false;\\r\\n        var content;\\r\\n        if (!special.test(text)) {\\r\\n            builder.col += text.length;\\r\\n            content = document.createTextNode(displayText);\\r\\n            builder.map.push(builder.pos, builder.pos + text.length, content);\\r\\n            if (ie && ie_version < 9) { mustWrap = true; }\\r\\n            builder.pos += text.length;\\r\\n        } else {\\r\\n            content = document.createDocumentFragment();\\r\\n            var pos = 0;\\r\\n            while (true) {\\r\\n                special.lastIndex = pos;\\r\\n                var m = special.exec(text);\\r\\n                var skipped = m ? m.index - pos : text.length - pos;\\r\\n                if (skipped) {\\r\\n                    var txt = document.createTextNode(displayText.slice(pos, pos + skipped));\\r\\n                    if (ie && ie_version < 9) { content.appendChild(elt(\\\"span\\\", [txt])); }\\r\\n                    else { content.appendChild(txt); }\\r\\n                    builder.map.push(builder.pos, builder.pos + skipped, txt);\\r\\n                    builder.col += skipped;\\r\\n                    builder.pos += skipped;\\r\\n                }\\r\\n                if (!m) { break }\\r\\n                pos += skipped + 1;\\r\\n                var txt$1 = (void 0);\\r\\n                if (m[0] == \\\"\\\\t\\\") {\\r\\n                    var tabSize = builder.cm.options.tabSize, tabWidth = tabSize - builder.col % tabSize;\\r\\n                    txt$1 = content.appendChild(elt(\\\"span\\\", spaceStr(tabWidth), \\\"cm-tab\\\"));\\r\\n                    txt$1.setAttribute(\\\"role\\\", \\\"presentation\\\");\\r\\n                    txt$1.setAttribute(\\\"cm-text\\\", \\\"\\\\t\\\");\\r\\n                    builder.col += tabWidth;\\r\\n                } else if (m[0] == \\\"\\\\r\\\" || m[0] == \\\"\\\\n\\\") {\\r\\n                    txt$1 = content.appendChild(elt(\\\"span\\\", m[0] == \\\"\\\\r\\\" ? \\\"\\\\u240d\\\" : \\\"\\\\u2424\\\", \\\"cm-invalidchar\\\"));\\r\\n                    txt$1.setAttribute(\\\"cm-text\\\", m[0]);\\r\\n                    builder.col += 1;\\r\\n                } else {\\r\\n                    txt$1 = builder.cm.options.specialCharPlaceholder(m[0]);\\r\\n                    txt$1.setAttribute(\\\"cm-text\\\", m[0]);\\r\\n                    if (ie && ie_version < 9) { content.appendChild(elt(\\\"span\\\", [txt$1])); }\\r\\n                    else { content.appendChild(txt$1); }\\r\\n                    builder.col += 1;\\r\\n                }\\r\\n                builder.map.push(builder.pos, builder.pos + 1, txt$1);\\r\\n                builder.pos++;\\r\\n            }\\r\\n        }\\r\\n        builder.trailingSpace = displayText.charCodeAt(text.length - 1) == 32;\\r\\n        if (style || startStyle || endStyle || mustWrap || css) {\\r\\n            var fullStyle = style || \\\"\\\";\\r\\n            if (startStyle) { fullStyle += startStyle; }\\r\\n            if (endStyle) { fullStyle += endStyle; }\\r\\n            var token = elt(\\\"span\\\", [content], fullStyle, css);\\r\\n            if (attributes) {\\r\\n                for (var attr in attributes) { if (attributes.hasOwnProperty(attr) && attr != \\\"style\\\" && attr != \\\"class\\\")\\r\\n                { token.setAttribute(attr, attributes[attr]); } }\\r\\n            }\\r\\n            return builder.content.appendChild(token)\\r\\n        }\\r\\n        builder.content.appendChild(content);\\r\\n    }\\r\\n\\r\\n    // Change some spaces to NBSP to prevent the browser from collapsing\\r\\n    // trailing spaces at the end of a line when rendering text (issue #1362).\\r\\n    function splitSpaces(text, trailingBefore) {\\r\\n        if (text.length > 1 && !/  /.test(text)) { return text }\\r\\n        var spaceBefore = trailingBefore, result = \\\"\\\";\\r\\n        for (var i = 0; i < text.length; i++) {\\r\\n            var ch = text.charAt(i);\\r\\n            if (ch == \\\" \\\" && spaceBefore && (i == text.length - 1 || text.charCodeAt(i + 1) == 32))\\r\\n            { ch = \\\"\\\\u00a0\\\"; }\\r\\n            result += ch;\\r\\n            spaceBefore = ch == \\\" \\\";\\r\\n        }\\r\\n        return result\\r\\n    }\\r\\n\\r\\n    // Work around nonsense dimensions being reported for stretches of\\r\\n    // right-to-left text.\\r\\n    function buildTokenBadBidi(inner, order) {\\r\\n        return function (builder, text, style, startStyle, endStyle, css, attributes) {\\r\\n            style = style ? style + \\\" cm-force-border\\\" : \\\"cm-force-border\\\";\\r\\n            var start = builder.pos, end = start + text.length;\\r\\n            for (;;) {\\r\\n                // Find the part that overlaps with the start of this text\\r\\n                var part = (void 0);\\r\\n                for (var i = 0; i < order.length; i++) {\\r\\n                    part = order[i];\\r\\n                    if (part.to > start && part.from <= start) { break }\\r\\n                }\\r\\n                if (part.to >= end) { return inner(builder, text, style, startStyle, endStyle, css, attributes) }\\r\\n                inner(builder, text.slice(0, part.to - start), style, startStyle, null, css, attributes);\\r\\n                startStyle = null;\\r\\n                text = text.slice(part.to - start);\\r\\n                start = part.to;\\r\\n            }\\r\\n        }\\r\\n    }\\r\\n\\r\\n    function buildCollapsedSpan(builder, size, marker, ignoreWidget) {\\r\\n        var widget = !ignoreWidget && marker.widgetNode;\\r\\n        if (widget) { builder.map.push(builder.pos, builder.pos + size, widget); }\\r\\n        if (!ignoreWidget && builder.cm.display.input.needsContentAttribute) {\\r\\n            if (!widget)\\r\\n            { widget = builder.content.appendChild(document.createElement(\\\"span\\\")); }\\r\\n            widget.setAttribute(\\\"cm-marker\\\", marker.id);\\r\\n        }\\r\\n        if (widget) {\\r\\n            builder.cm.display.input.setUneditable(widget);\\r\\n            builder.content.appendChild(widget);\\r\\n        }\\r\\n        builder.pos += size;\\r\\n        builder.trailingSpace = false;\\r\\n    }\\r\\n\\r\\n    // Outputs a number of spans to make up a line, taking highlighting\\r\\n    // and marked text into account.\\r\\n    function insertLineContent(line, builder, styles) {\\r\\n        var spans = line.markedSpans, allText = line.text, at = 0;\\r\\n        if (!spans) {\\r\\n            for (var i$1 = 1; i$1 < styles.length; i$1+=2)\\r\\n            { builder.addToken(builder, allText.slice(at, at = styles[i$1]), interpretTokenStyle(styles[i$1+1], builder.cm.options)); }\\r\\n            return\\r\\n        }\\r\\n\\r\\n        var len = allText.length, pos = 0, i = 1, text = \\\"\\\", style, css;\\r\\n        var nextChange = 0, spanStyle, spanEndStyle, spanStartStyle, collapsed, attributes;\\r\\n        for (;;) {\\r\\n            if (nextChange == pos) { // Update current marker set\\r\\n                spanStyle = spanEndStyle = spanStartStyle = css = \\\"\\\";\\r\\n                attributes = null;\\r\\n                collapsed = null; nextChange = Infinity;\\r\\n                var foundBookmarks = [], endStyles = (void 0);\\r\\n                for (var j = 0; j < spans.length; ++j) {\\r\\n                    var sp = spans[j], m = sp.marker;\\r\\n                    if (m.type == \\\"bookmark\\\" && sp.from == pos && m.widgetNode) {\\r\\n                        foundBookmarks.push(m);\\r\\n                    } else if (sp.from <= pos && (sp.to == null || sp.to > pos || m.collapsed && sp.to == pos && sp.from == pos)) {\\r\\n                        if (sp.to != null && sp.to != pos && nextChange > sp.to) {\\r\\n                            nextChange = sp.to;\\r\\n                            spanEndStyle = \\\"\\\";\\r\\n                        }\\r\\n                        if (m.className) { spanStyle += \\\" \\\" + m.className; }\\r\\n                        if (m.css) { css = (css ? css + \\\";\\\" : \\\"\\\") + m.css; }\\r\\n                        if (m.startStyle && sp.from == pos) { spanStartStyle += \\\" \\\" + m.startStyle; }\\r\\n                        if (m.endStyle && sp.to == nextChange) { (endStyles || (endStyles = [])).push(m.endStyle, sp.to); }\\r\\n                        // support for the old title property\\r\\n                        // https://github.com/codemirror/CodeMirror/pull/5673\\r\\n                        if (m.title) { (attributes || (attributes = {})).title = m.title; }\\r\\n                        if (m.attributes) {\\r\\n                            for (var attr in m.attributes)\\r\\n                            { (attributes || (attributes = {}))[attr] = m.attributes[attr]; }\\r\\n                        }\\r\\n                        if (m.collapsed && (!collapsed || compareCollapsedMarkers(collapsed.marker, m) < 0))\\r\\n                        { collapsed = sp; }\\r\\n                    } else if (sp.from > pos && nextChange > sp.from) {\\r\\n                        nextChange = sp.from;\\r\\n                    }\\r\\n                }\\r\\n                if (endStyles) { for (var j$1 = 0; j$1 < endStyles.length; j$1 += 2)\\r\\n                { if (endStyles[j$1 + 1] == nextChange) { spanEndStyle += \\\" \\\" + endStyles[j$1]; } } }\\r\\n\\r\\n                if (!collapsed || collapsed.from == pos) { for (var j$2 = 0; j$2 < foundBookmarks.length; ++j$2)\\r\\n                { buildCollapsedSpan(builder, 0, foundBookmarks[j$2]); } }\\r\\n                if (collapsed && (collapsed.from || 0) == pos) {\\r\\n                    buildCollapsedSpan(builder, (collapsed.to == null ? len + 1 : collapsed.to) - pos,\\r\\n                        collapsed.marker, collapsed.from == null);\\r\\n                    if (collapsed.to == null) { return }\\r\\n                    if (collapsed.to == pos) { collapsed = false; }\\r\\n                }\\r\\n            }\\r\\n            if (pos >= len) { break }\\r\\n\\r\\n            var upto = Math.min(len, nextChange);\\r\\n            while (true) {\\r\\n                if (text) {\\r\\n                    var end = pos + text.length;\\r\\n                    if (!collapsed) {\\r\\n                        var tokenText = end > upto ? text.slice(0, upto - pos) : text;\\r\\n                        builder.addToken(builder, tokenText, style ? style + spanStyle : spanStyle,\\r\\n                            spanStartStyle, pos + tokenText.length == nextChange ? spanEndStyle : \\\"\\\", css, attributes);\\r\\n                    }\\r\\n                    if (end >= upto) {text = text.slice(upto - pos); pos = upto; break}\\r\\n                    pos = end;\\r\\n                    spanStartStyle = \\\"\\\";\\r\\n                }\\r\\n                text = allText.slice(at, at = styles[i++]);\\r\\n                style = interpretTokenStyle(styles[i++], builder.cm.options);\\r\\n            }\\r\\n        }\\r\\n    }\\r\\n\\r\\n\\r\\n    // These objects are used to represent the visible (currently drawn)\\r\\n    // part of the document. A LineView may correspond to multiple\\r\\n    // logical lines, if those are connected by collapsed ranges.\\r\\n    function LineView(doc, line, lineN) {\\r\\n        // The starting line\\r\\n        this.line = line;\\r\\n        // Continuing lines, if any\\r\\n        this.rest = visualLineContinued(line);\\r\\n        // Number of logical lines in this visual line\\r\\n        this.size = this.rest ? lineNo(lst(this.rest)) - lineN + 1 : 1;\\r\\n        this.node = this.text = null;\\r\\n        this.hidden = lineIsHidden(doc, line);\\r\\n    }\\r\\n\\r\\n    // Create a range of LineView objects for the given lines.\\r\\n    function buildViewArray(cm, from, to) {\\r\\n        var array = [], nextPos;\\r\\n        for (var pos = from; pos < to; pos = nextPos) {\\r\\n            var view = new LineView(cm.doc, getLine(cm.doc, pos), pos);\\r\\n            nextPos = pos + view.size;\\r\\n            array.push(view);\\r\\n        }\\r\\n        return array\\r\\n    }\\r\\n\\r\\n    var operationGroup = null;\\r\\n\\r\\n    function pushOperation(op) {\\r\\n        if (operationGroup) {\\r\\n            operationGroup.ops.push(op);\\r\\n        } else {\\r\\n            op.ownsGroup = operationGroup = {\\r\\n                ops: [op],\\r\\n                delayedCallbacks: []\\r\\n            };\\r\\n        }\\r\\n    }\\r\\n\\r\\n    function fireCallbacksForOps(group) {\\r\\n        // Calls delayed callbacks and cursorActivity handlers until no\\r\\n        // new ones appear\\r\\n        var callbacks = group.delayedCallbacks, i = 0;\\r\\n        do {\\r\\n            for (; i < callbacks.length; i++)\\r\\n            { callbacks[i].call(null); }\\r\\n            for (var j = 0; j < group.ops.length; j++) {\\r\\n                var op = group.ops[j];\\r\\n                if (op.cursorActivityHandlers)\\r\\n                { while (op.cursorActivityCalled < op.cursorActivityHandlers.length)\\r\\n                { op.cursorActivityHandlers[op.cursorActivityCalled++].call(null, op.cm); } }\\r\\n            }\\r\\n        } while (i < callbacks.length)\\r\\n    }\\r\\n\\r\\n    function finishOperation(op, endCb) {\\r\\n        var group = op.ownsGroup;\\r\\n        if (!group) { return }\\r\\n\\r\\n        try { fireCallbacksForOps(group); }\\r\\n        finally {\\r\\n            operationGroup = null;\\r\\n            endCb(group);\\r\\n        }\\r\\n    }\\r\\n\\r\\n    var orphanDelayedCallbacks = null;\\r\\n\\r\\n    // Often, we want to signal events at a point where we are in the\\r\\n    // middle of some work, but don't want the handler to start calling\\r\\n    // other methods on the editor, which might be in an inconsistent\\r\\n    // state or simply not expect any other events to happen.\\r\\n    // signalLater looks whether there are any handlers, and schedules\\r\\n    // them to be executed when the last operation ends, or, if no\\r\\n    // operation is active, when a timeout fires.\\r\\n    function signalLater(emitter, type /*, values...*/) {\\r\\n        var arr = getHandlers(emitter, type);\\r\\n        if (!arr.length) { return }\\r\\n        var args = Array.prototype.slice.call(arguments, 2), list;\\r\\n        if (operationGroup) {\\r\\n            list = operationGroup.delayedCallbacks;\\r\\n        } else if (orphanDelayedCallbacks) {\\r\\n            list = orphanDelayedCallbacks;\\r\\n        } else {\\r\\n            list = orphanDelayedCallbacks = [];\\r\\n            setTimeout(fireOrphanDelayed, 0);\\r\\n        }\\r\\n        var loop = function ( i ) {\\r\\n            list.push(function () { return arr[i].apply(null, args); });\\r\\n        };\\r\\n\\r\\n        for (var i = 0; i < arr.length; ++i)\\r\\n            loop( i );\\r\\n    }\\r\\n\\r\\n    function fireOrphanDelayed() {\\r\\n        var delayed = orphanDelayedCallbacks;\\r\\n        orphanDelayedCallbacks = null;\\r\\n        for (var i = 0; i < delayed.length; ++i) { delayed[i](); }\\r\\n    }\\r\\n\\r\\n    // When an aspect of a line changes, a string is added to\\r\\n    // lineView.changes. This updates the relevant part of the line's\\r\\n    // DOM structure.\\r\\n    function updateLineForChanges(cm, lineView, lineN, dims) {\\r\\n        for (var j = 0; j < lineView.changes.length; j++) {\\r\\n            var type = lineView.changes[j];\\r\\n            if (type == \\\"text\\\") { updateLineText(cm, lineView); }\\r\\n            else if (type == \\\"gutter\\\") { updateLineGutter(cm, lineView, lineN, dims); }\\r\\n            else if (type == \\\"class\\\") { updateLineClasses(cm, lineView); }\\r\\n            else if (type == \\\"widget\\\") { updateLineWidgets(cm, lineView, dims); }\\r\\n        }\\r\\n        lineView.changes = null;\\r\\n    }\\r\\n\\r\\n    // Lines with gutter elements, widgets or a background class need to\\r\\n    // be wrapped, and have the extra elements added to the wrapper div\\r\\n    function ensureLineWrapped(lineView) {\\r\\n        if (lineView.node == lineView.text) {\\r\\n            lineView.node = elt(\\\"div\\\", null, null, \\\"position: relative\\\");\\r\\n            if (lineView.text.parentNode)\\r\\n            { lineView.text.parentNode.replaceChild(lineView.node, lineView.text); }\\r\\n            lineView.node.appendChild(lineView.text);\\r\\n            if (ie && ie_version < 8) { lineView.node.style.zIndex = 2; }\\r\\n        }\\r\\n        return lineView.node\\r\\n    }\\r\\n\\r\\n    function updateLineBackground(cm, lineView) {\\r\\n        var cls = lineView.bgClass ? lineView.bgClass + \\\" \\\" + (lineView.line.bgClass || \\\"\\\") : lineView.line.bgClass;\\r\\n        if (cls) { cls += \\\" CodeMirror-linebackground\\\"; }\\r\\n        if (lineView.background) {\\r\\n            if (cls) { lineView.background.className = cls; }\\r\\n            else { lineView.background.parentNode.removeChild(lineView.background); lineView.background = null; }\\r\\n        } else if (cls) {\\r\\n            var wrap = ensureLineWrapped(lineView);\\r\\n            lineView.background = wrap.insertBefore(elt(\\\"div\\\", null, cls), wrap.firstChild);\\r\\n            cm.display.input.setUneditable(lineView.background);\\r\\n        }\\r\\n    }\\r\\n\\r\\n    // Wrapper around buildLineContent which will reuse the structure\\r\\n    // in display.externalMeasured when possible.\\r\\n    function getLineContent(cm, lineView) {\\r\\n        var ext = cm.display.externalMeasured;\\r\\n        if (ext && ext.line == lineView.line) {\\r\\n            cm.display.externalMeasured = null;\\r\\n            lineView.measure = ext.measure;\\r\\n            return ext.built\\r\\n        }\\r\\n        return buildLineContent(cm, lineView)\\r\\n    }\\r\\n\\r\\n    // Redraw the line's text. Interacts with the background and text\\r\\n    // classes because the mode may output tokens that influence these\\r\\n    // classes.\\r\\n    function updateLineText(cm, lineView) {\\r\\n        var cls = lineView.text.className;\\r\\n        var built = getLineContent(cm, lineView);\\r\\n        if (lineView.text == lineView.node) { lineView.node = built.pre; }\\r\\n        lineView.text.parentNode.replaceChild(built.pre, lineView.text);\\r\\n        lineView.text = built.pre;\\r\\n        if (built.bgClass != lineView.bgClass || built.textClass != lineView.textClass) {\\r\\n            lineView.bgClass = built.bgClass;\\r\\n            lineView.textClass = built.textClass;\\r\\n            updateLineClasses(cm, lineView);\\r\\n        } else if (cls) {\\r\\n            lineView.text.className = cls;\\r\\n        }\\r\\n    }\\r\\n\\r\\n    function updateLineClasses(cm, lineView) {\\r\\n        updateLineBackground(cm, lineView);\\r\\n        if (lineView.line.wrapClass)\\r\\n        { ensureLineWrapped(lineView).className = lineView.line.wrapClass; }\\r\\n        else if (lineView.node != lineView.text)\\r\\n        { lineView.node.className = \\\"\\\"; }\\r\\n        var textClass = lineView.textClass ? lineView.textClass + \\\" \\\" + (lineView.line.textClass || \\\"\\\") : lineView.line.textClass;\\r\\n        lineView.text.className = textClass || \\\"\\\";\\r\\n    }\\r\\n\\r\\n    function updateLineGutter(cm, lineView, lineN, dims) {\\r\\n        if (lineView.gutter) {\\r\\n            lineView.node.removeChild(lineView.gutter);\\r\\n            lineView.gutter = null;\\r\\n        }\\r\\n        if (lineView.gutterBackground) {\\r\\n            lineView.node.removeChild(lineView.gutterBackground);\\r\\n            lineView.gutterBackground = null;\\r\\n        }\\r\\n        if (lineView.line.gutterClass) {\\r\\n            var wrap = ensureLineWrapped(lineView);\\r\\n            lineView.gutterBackground = elt(\\\"div\\\", null, \\\"CodeMirror-gutter-background \\\" + lineView.line.gutterClass,\\r\\n                (\\\"left: \\\" + (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) + \\\"px; width: \\\" + (dims.gutterTotalWidth) + \\\"px\\\"));\\r\\n            cm.display.input.setUneditable(lineView.gutterBackground);\\r\\n            wrap.insertBefore(lineView.gutterBackground, lineView.text);\\r\\n        }\\r\\n        var markers = lineView.line.gutterMarkers;\\r\\n        if (cm.options.lineNumbers || markers) {\\r\\n            var wrap$1 = ensureLineWrapped(lineView);\\r\\n            var gutterWrap = lineView.gutter = elt(\\\"div\\\", null, \\\"CodeMirror-gutter-wrapper\\\", (\\\"left: \\\" + (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) + \\\"px\\\"));\\r\\n            cm.display.input.setUneditable(gutterWrap);\\r\\n            wrap$1.insertBefore(gutterWrap, lineView.text);\\r\\n            if (lineView.line.gutterClass)\\r\\n            { gutterWrap.className += \\\" \\\" + lineView.line.gutterClass; }\\r\\n            if (cm.options.lineNumbers && (!markers || !markers[\\\"CodeMirror-linenumbers\\\"]))\\r\\n            { lineView.lineNumber = gutterWrap.appendChild(\\r\\n                elt(\\\"div\\\", lineNumberFor(cm.options, lineN),\\r\\n                    \\\"CodeMirror-linenumber CodeMirror-gutter-elt\\\",\\r\\n                    (\\\"left: \\\" + (dims.gutterLeft[\\\"CodeMirror-linenumbers\\\"]) + \\\"px; width: \\\" + (cm.display.lineNumInnerWidth) + \\\"px\\\"))); }\\r\\n            if (markers) { for (var k = 0; k < cm.options.gutters.length; ++k) {\\r\\n                var id = cm.options.gutters[k], found = markers.hasOwnProperty(id) && markers[id];\\r\\n                if (found)\\r\\n                { gutterWrap.appendChild(elt(\\\"div\\\", [found], \\\"CodeMirror-gutter-elt\\\",\\r\\n                    (\\\"left: \\\" + (dims.gutterLeft[id]) + \\\"px; width: \\\" + (dims.gutterWidth[id]) + \\\"px\\\"))); }\\r\\n            } }\\r\\n        }\\r\\n    }\\r\\n\\r\\n    function updateLineWidgets(cm, lineView, dims) {\\r\\n        if (lineView.alignable) { lineView.alignable = null; }\\r\\n        for (var node = lineView.node.firstChild, next = (void 0); node; node = next) {\\r\\n            next = node.nextSibling;\\r\\n            if (node.className == \\\"CodeMirror-linewidget\\\")\\r\\n            { lineView.node.removeChild(node); }\\r\\n        }\\r\\n        insertLineWidgets(cm, lineView, dims);\\r\\n    }\\r\\n\\r\\n    // Build a line's DOM representation from scratch\\r\\n    function buildLineElement(cm, lineView, lineN, dims) {\\r\\n        var built = getLineContent(cm, lineView);\\r\\n        lineView.text = lineView.node = built.pre;\\r\\n        if (built.bgClass) { lineView.bgClass = built.bgClass; }\\r\\n        if (built.textClass) { lineView.textClass = built.textClass; }\\r\\n\\r\\n        updateLineClasses(cm, lineView);\\r\\n        updateLineGutter(cm, lineView, lineN, dims);\\r\\n        insertLineWidgets(cm, lineView, dims);\\r\\n        return lineView.node\\r\\n    }\\r\\n\\r\\n    // A lineView may contain multiple logical lines (when merged by\\r\\n    // collapsed spans). The widgets for all of them need to be drawn.\\r\\n    function insertLineWidgets(cm, lineView, dims) {\\r\\n        insertLineWidgetsFor(cm, lineView.line, lineView, dims, true);\\r\\n        if (lineView.rest) { for (var i = 0; i < lineView.rest.length; i++)\\r\\n        { insertLineWidgetsFor(cm, lineView.rest[i], lineView, dims, false); } }\\r\\n    }\\r\\n\\r\\n    function insertLineWidgetsFor(cm, line, lineView, dims, allowAbove) {\\r\\n        if (!line.widgets) { return }\\r\\n        var wrap = ensureLineWrapped(lineView);\\r\\n        for (var i = 0, ws = line.widgets; i < ws.length; ++i) {\\r\\n            var widget = ws[i], node = elt(\\\"div\\\", [widget.node], \\\"CodeMirror-linewidget\\\");\\r\\n            if (!widget.handleMouseEvents) { node.setAttribute(\\\"cm-ignore-events\\\", \\\"true\\\"); }\\r\\n            positionLineWidget(widget, node, lineView, dims);\\r\\n            cm.display.input.setUneditable(node);\\r\\n            if (allowAbove && widget.above)\\r\\n            { wrap.insertBefore(node, lineView.gutter || lineView.text); }\\r\\n            else\\r\\n            { wrap.appendChild(node); }\\r\\n            signalLater(widget, \\\"redraw\\\");\\r\\n        }\\r\\n    }\\r\\n\\r\\n    function positionLineWidget(widget, node, lineView, dims) {\\r\\n        if (widget.noHScroll) {\\r\\n            (lineView.alignable || (lineView.alignable = [])).push(node);\\r\\n            var width = dims.wrapperWidth;\\r\\n            node.style.left = dims.fixedPos + \\\"px\\\";\\r\\n            if (!widget.coverGutter) {\\r\\n                width -= dims.gutterTotalWidth;\\r\\n                node.style.paddingLeft = dims.gutterTotalWidth + \\\"px\\\";\\r\\n            }\\r\\n            node.style.width = width + \\\"px\\\";\\r\\n        }\\r\\n        if (widget.coverGutter) {\\r\\n            node.style.zIndex = 5;\\r\\n            node.style.position = \\\"relative\\\";\\r\\n            if (!widget.noHScroll) { node.style.marginLeft = -dims.gutterTotalWidth + \\\"px\\\"; }\\r\\n        }\\r\\n    }\\r\\n\\r\\n    function widgetHeight(widget) {\\r\\n        if (widget.height != null) { return widget.height }\\r\\n        var cm = widget.doc.cm;\\r\\n        if (!cm) { return 0 }\\r\\n        if (!contains(document.body, widget.node)) {\\r\\n            var parentStyle = \\\"position: relative;\\\";\\r\\n            if (widget.coverGutter)\\r\\n            { parentStyle += \\\"margin-left: -\\\" + cm.display.gutters.offsetWidth + \\\"px;\\\"; }\\r\\n            if (widget.noHScroll)\\r\\n            { parentStyle += \\\"width: \\\" + cm.display.wrapper.clientWidth + \\\"px;\\\"; }\\r\\n            removeChildrenAndAdd(cm.display.measure, elt(\\\"div\\\", [widget.node], null, parentStyle));\\r\\n        }\\r\\n        return widget.height = widget.node.parentNode.offsetHeight\\r\\n    }\\r\\n\\r\\n    // Return true when the given mouse event happened in a widget\\r\\n    function eventInWidget(display, e) {\\r\\n        for (var n = e_target(e); n != display.wrapper; n = n.parentNode) {\\r\\n            if (!n || (n.nodeType == 1 && n.getAttribute(\\\"cm-ignore-events\\\") == \\\"true\\\") ||\\r\\n                (n.parentNode == display.sizer && n != display.mover))\\r\\n            { return true }\\r\\n        }\\r\\n    }\\r\\n\\r\\n    // POSITION MEASUREMENT\\r\\n\\r\\n    function paddingTop(display) {return display.lineSpace.offsetTop}\\r\\n    function paddingVert(display) {return display.mover.offsetHeight - display.lineSpace.offsetHeight}\\r\\n    function paddingH(display) {\\r\\n        if (display.cachedPaddingH) { return display.cachedPaddingH }\\r\\n        var e = removeChildrenAndAdd(display.measure, elt(\\\"pre\\\", \\\"x\\\"));\\r\\n        var style = window.getComputedStyle ? window.getComputedStyle(e) : e.currentStyle;\\r\\n        var data = {left: parseInt(style.paddingLeft), right: parseInt(style.paddingRight)};\\r\\n        if (!isNaN(data.left) && !isNaN(data.right)) { display.cachedPaddingH = data; }\\r\\n        return data\\r\\n    }\\r\\n\\r\\n    function scrollGap(cm) { return scrollerGap - cm.display.nativeBarWidth }\\r\\n    function displayWidth(cm) {\\r\\n        return cm.display.scroller.clientWidth - scrollGap(cm) - cm.display.barWidth\\r\\n    }\\r\\n    function displayHeight(cm) {\\r\\n        return cm.display.scroller.clientHeight - scrollGap(cm) - cm.display.barHeight\\r\\n    }\\r\\n\\r\\n    // Ensure the lineView.wrapping.heights array is populated. This is\\r\\n    // an array of bottom offsets for the lines that make up a drawn\\r\\n    // line. When lineWrapping is on, there might be more than one\\r\\n    // height.\\r\\n    function ensureLineHeights(cm, lineView, rect) {\\r\\n        var wrapping = cm.options.lineWrapping;\\r\\n        var curWidth = wrapping && displayWidth(cm);\\r\\n        if (!lineView.measure.heights || wrapping && lineView.measure.width != curWidth) {\\r\\n            var heights = lineView.measure.heights = [];\\r\\n            if (wrapping) {\\r\\n                lineView.measure.width = curWidth;\\r\\n                var rects = lineView.text.firstChild.getClientRects();\\r\\n                for (var i = 0; i < rects.length - 1; i++) {\\r\\n                    var cur = rects[i], next = rects[i + 1];\\r\\n                    if (Math.abs(cur.bottom - next.bottom) > 2)\\r\\n                    { heights.push((cur.bottom + next.top) / 2 - rect.top); }\\r\\n                }\\r\\n            }\\r\\n            heights.push(rect.bottom - rect.top);\\r\\n        }\\r\\n    }\\r\\n\\r\\n    // Find a line map (mapping character offsets to text nodes) and a\\r\\n    // measurement cache for the given line number. (A line view might\\r\\n    // contain multiple lines when collapsed ranges are present.)\\r\\n    function mapFromLineView(lineView, line, lineN) {\\r\\n        if (lineView.line == line)\\r\\n        { return {map: lineView.measure.map, cache: lineView.measure.cache} }\\r\\n        for (var i = 0; i < lineView.rest.length; i++)\\r\\n        { if (lineView.rest[i] == line)\\r\\n        { return {map: lineView.measure.maps[i], cache: lineView.measure.caches[i]} } }\\r\\n        for (var i$1 = 0; i$1 < lineView.rest.length; i$1++)\\r\\n        { if (lineNo(lineView.rest[i$1]) > lineN)\\r\\n        { return {map: lineView.measure.maps[i$1], cache: lineView.measure.caches[i$1], before: true} } }\\r\\n    }\\r\\n\\r\\n    // Render a line into the hidden node display.externalMeasured. Used\\r\\n    // when measurement is needed for a line that's not in the viewport.\\r\\n    function updateExternalMeasurement(cm, line) {\\r\\n        line = visualLine(line);\\r\\n        var lineN = lineNo(line);\\r\\n        var view = cm.display.externalMeasured = new LineView(cm.doc, line, lineN);\\r\\n        view.lineN = lineN;\\r\\n        var built = view.built = buildLineContent(cm, view);\\r\\n        view.text = built.pre;\\r\\n        removeChildrenAndAdd(cm.display.lineMeasure, built.pre);\\r\\n        return view\\r\\n    }\\r\\n\\r\\n    // Get a {top, bottom, left, right} box (in line-local coordinates)\\r\\n    // for a given character.\\r\\n    function measureChar(cm, line, ch, bias) {\\r\\n        return measureCharPrepared(cm, prepareMeasureForLine(cm, line), ch, bias)\\r\\n    }\\r\\n\\r\\n    // Find a line view that corresponds to the given line number.\\r\\n    function findViewForLine(cm, lineN) {\\r\\n        if (lineN >= cm.display.viewFrom && lineN < cm.display.viewTo)\\r\\n        { return cm.display.view[findViewIndex(cm, lineN)] }\\r\\n        var ext = cm.display.externalMeasured;\\r\\n        if (ext && lineN >= ext.lineN && lineN < ext.lineN + ext.size)\\r\\n        { return ext }\\r\\n    }\\r\\n\\r\\n    // Measurement can be split in two steps, the set-up work that\\r\\n    // applies to the whole line, and the measurement of the actual\\r\\n    // character. Functions like coordsChar, that need to do a lot of\\r\\n    // measurements in a row, can thus ensure that the set-up work is\\r\\n    // only done once.\\r\\n    function prepareMeasureForLine(cm, line) {\\r\\n        var lineN = lineNo(line);\\r\\n        var view = findViewForLine(cm, lineN);\\r\\n        if (view && !view.text) {\\r\\n            view = null;\\r\\n        } else if (view && view.changes) {\\r\\n            updateLineForChanges(cm, view, lineN, getDimensions(cm));\\r\\n            cm.curOp.forceUpdate = true;\\r\\n        }\\r\\n        if (!view)\\r\\n        { view = updateExternalMeasurement(cm, line); }\\r\\n\\r\\n        var info = mapFromLineView(view, line, lineN);\\r\\n        return {\\r\\n            line: line, view: view, rect: null,\\r\\n            map: info.map, cache: info.cache, before: info.before,\\r\\n            hasHeights: false\\r\\n        }\\r\\n    }\\r\\n\\r\\n    // Given a prepared measurement object, measures the position of an\\r\\n    // actual character (or fetches it from the cache).\\r\\n    function measureCharPrepared(cm, prepared, ch, bias, varHeight) {\\r\\n        if (prepared.before) { ch = -1; }\\r\\n        var key = ch + (bias || \\\"\\\"), found;\\r\\n        if (prepared.cache.hasOwnProperty(key)) {\\r\\n            found = prepared.cache[key];\\r\\n        } else {\\r\\n            if (!prepared.rect)\\r\\n            { prepared.rect = prepared.view.text.getBoundingClientRect(); }\\r\\n            if (!prepared.hasHeights) {\\r\\n                ensureLineHeights(cm, prepared.view, prepared.rect);\\r\\n                prepared.hasHeights = true;\\r\\n            }\\r\\n            found = measureCharInner(cm, prepared, ch, bias);\\r\\n            if (!found.bogus) { prepared.cache[key] = found; }\\r\\n        }\\r\\n        return {left: found.left, right: found.right,\\r\\n            top: varHeight ? found.rtop : found.top,\\r\\n            bottom: varHeight ? found.rbottom : found.bottom}\\r\\n    }\\r\\n\\r\\n    var nullRect = {left: 0, right: 0, top: 0, bottom: 0};\\r\\n\\r\\n    function nodeAndOffsetInLineMap(map$$1, ch, bias) {\\r\\n        var node, start, end, collapse, mStart, mEnd;\\r\\n        // First, search the line map for the text node corresponding to,\\r\\n        // or closest to, the target character.\\r\\n        for (var i = 0; i < map$$1.length; i += 3) {\\r\\n            mStart = map$$1[i];\\r\\n            mEnd = map$$1[i + 1];\\r\\n            if (ch < mStart) {\\r\\n                start = 0; end = 1;\\r\\n                collapse = \\\"left\\\";\\r\\n            } else if (ch < mEnd) {\\r\\n                start = ch - mStart;\\r\\n                end = start + 1;\\r\\n            } else if (i == map$$1.length - 3 || ch == mEnd && map$$1[i + 3] > ch) {\\r\\n                end = mEnd - mStart;\\r\\n                start = end - 1;\\r\\n                if (ch >= mEnd) { collapse = \\\"right\\\"; }\\r\\n            }\\r\\n            if (start != null) {\\r\\n                node = map$$1[i + 2];\\r\\n                if (mStart == mEnd && bias == (node.insertLeft ? \\\"left\\\" : \\\"right\\\"))\\r\\n                { collapse = bias; }\\r\\n                if (bias == \\\"left\\\" && start == 0)\\r\\n                { while (i && map$$1[i - 2] == map$$1[i - 3] && map$$1[i - 1].insertLeft) {\\r\\n                    node = map$$1[(i -= 3) + 2];\\r\\n                    collapse = \\\"left\\\";\\r\\n                } }\\r\\n                if (bias == \\\"right\\\" && start == mEnd - mStart)\\r\\n                { while (i < map$$1.length - 3 && map$$1[i + 3] == map$$1[i + 4] && !map$$1[i + 5].insertLeft) {\\r\\n                    node = map$$1[(i += 3) + 2];\\r\\n                    collapse = \\\"right\\\";\\r\\n                } }\\r\\n                break\\r\\n            }\\r\\n        }\\r\\n        return {node: node, start: start, end: end, collapse: collapse, coverStart: mStart, coverEnd: mEnd}\\r\\n    }\\r\\n\\r\\n    function getUsefulRect(rects, bias) {\\r\\n        var rect = nullRect;\\r\\n        if (bias == \\\"left\\\") { for (var i = 0; i < rects.length; i++) {\\r\\n            if ((rect = rects[i]).left != rect.right) { break }\\r\\n        } } else { for (var i$1 = rects.length - 1; i$1 >= 0; i$1--) {\\r\\n            if ((rect = rects[i$1]).left != rect.right) { break }\\r\\n        } }\\r\\n        return rect\\r\\n    }\\r\\n\\r\\n    function measureCharInner(cm, prepared, ch, bias) {\\r\\n        var place = nodeAndOffsetInLineMap(prepared.map, ch, bias);\\r\\n        var node = place.node, start = place.start, end = place.end, collapse = place.collapse;\\r\\n\\r\\n        var rect;\\r\\n        if (node.nodeType == 3) { // If it is a text node, use a range to retrieve the coordinates.\\r\\n            for (var i$1 = 0; i$1 < 4; i$1++) { // Retry a maximum of 4 times when nonsense rectangles are returned\\r\\n                while (start && isExtendingChar(prepared.line.text.charAt(place.coverStart + start))) { --start; }\\r\\n                while (place.coverStart + end < place.coverEnd && isExtendingChar(prepared.line.text.charAt(place.coverStart + end))) { ++end; }\\r\\n                if (ie && ie_version < 9 && start == 0 && end == place.coverEnd - place.coverStart)\\r\\n                { rect = node.parentNode.getBoundingClientRect(); }\\r\\n                else\\r\\n                { rect = getUsefulRect(range(node, start, end).getClientRects(), bias); }\\r\\n                if (rect.left || rect.right || start == 0) { break }\\r\\n                end = start;\\r\\n                start = start - 1;\\r\\n                collapse = \\\"right\\\";\\r\\n            }\\r\\n            if (ie && ie_version < 11) { rect = maybeUpdateRectForZooming(cm.display.measure, rect); }\\r\\n        } else { // If it is a widget, simply get the box for the whole widget.\\r\\n            if (start > 0) { collapse = bias = \\\"right\\\"; }\\r\\n            var rects;\\r\\n            if (cm.options.lineWrapping && (rects = node.getClientRects()).length > 1)\\r\\n            { rect = rects[bias == \\\"right\\\" ? rects.length - 1 : 0]; }\\r\\n            else\\r\\n            { rect = node.getBoundingClientRect(); }\\r\\n        }\\r\\n        if (ie && ie_version < 9 && !start && (!rect || !rect.left && !rect.right)) {\\r\\n            var rSpan = node.parentNode.getClientRects()[0];\\r\\n            if (rSpan)\\r\\n            { rect = {left: rSpan.left, right: rSpan.left + charWidth(cm.display), top: rSpan.top, bottom: rSpan.bottom}; }\\r\\n            else\\r\\n            { rect = nullRect; }\\r\\n        }\\r\\n\\r\\n        var rtop = rect.top - prepared.rect.top, rbot = rect.bottom - prepared.rect.top;\\r\\n        var mid = (rtop + rbot) / 2;\\r\\n        var heights = prepared.view.measure.heights;\\r\\n        var i = 0;\\r\\n        for (; i < heights.length - 1; i++)\\r\\n        { if (mid < heights[i]) { break } }\\r\\n        var top = i ? heights[i - 1] : 0, bot = heights[i];\\r\\n        var result = {left: (collapse == \\\"right\\\" ? rect.right : rect.left) - prepared.rect.left,\\r\\n            right: (collapse == \\\"left\\\" ? rect.left : rect.right) - prepared.rect.left,\\r\\n            top: top, bottom: bot};\\r\\n        if (!rect.left && !rect.right) { result.bogus = true; }\\r\\n        if (!cm.options.singleCursorHeightPerLine) { result.rtop = rtop; result.rbottom = rbot; }\\r\\n\\r\\n        return result\\r\\n    }\\r\\n\\r\\n    // Work around problem with bounding client rects on ranges being\\r\\n    // returned incorrectly when zoomed on IE10 and below.\\r\\n    function maybeUpdateRectForZooming(measure, rect) {\\r\\n        if (!window.screen || screen.logicalXDPI == null ||\\r\\n            screen.logicalXDPI == screen.deviceXDPI || !hasBadZoomedRects(measure))\\r\\n        { return rect }\\r\\n        var scaleX = screen.logicalXDPI / screen.deviceXDPI;\\r\\n        var scaleY = screen.logicalYDPI / screen.deviceYDPI;\\r\\n        return {left: rect.left * scaleX, right: rect.right * scaleX,\\r\\n            top: rect.top * scaleY, bottom: rect.bottom * scaleY}\\r\\n    }\\r\\n\\r\\n    function clearLineMeasurementCacheFor(lineView) {\\r\\n        if (lineView.measure) {\\r\\n            lineView.measure.cache = {};\\r\\n            lineView.measure.heights = null;\\r\\n            if (lineView.rest) { for (var i = 0; i < lineView.rest.length; i++)\\r\\n            { lineView.measure.caches[i] = {}; } }\\r\\n        }\\r\\n    }\\r\\n\\r\\n    function clearLineMeasurementCache(cm) {\\r\\n        cm.display.externalMeasure = null;\\r\\n        removeChildren(cm.display.lineMeasure);\\r\\n        for (var i = 0; i < cm.display.view.length; i++)\\r\\n        { clearLineMeasurementCacheFor(cm.display.view[i]); }\\r\\n    }\\r\\n\\r\\n    function clearCaches(cm) {\\r\\n        clearLineMeasurementCache(cm);\\r\\n        cm.display.cachedCharWidth = cm.display.cachedTextHeight = cm.display.cachedPaddingH = null;\\r\\n        if (!cm.options.lineWrapping) { cm.display.maxLineChanged = true; }\\r\\n        cm.display.lineNumChars = null;\\r\\n    }\\r\\n\\r\\n    function pageScrollX() {\\r\\n        // Work around https://bugs.chromium.org/p/chromium/issues/detail?id=489206\\r\\n        // which causes page_Offset and bounding client rects to use\\r\\n        // different reference viewports and invalidate our calculations.\\r\\n        if (chrome && android) { return -(document.body.getBoundingClientRect().left - parseInt(getComputedStyle(document.body).marginLeft)) }\\r\\n        return window.pageXOffset || (document.documentElement || document.body).scrollLeft\\r\\n    }\\r\\n    function pageScrollY() {\\r\\n        if (chrome && android) { return -(document.body.getBoundingClientRect().top - parseInt(getComputedStyle(document.body).marginTop)) }\\r\\n        return window.pageYOffset || (document.documentElement || document.body).scrollTop\\r\\n    }\\r\\n\\r\\n    function widgetTopHeight(lineObj) {\\r\\n        var height = 0;\\r\\n        if (lineObj.widgets) { for (var i = 0; i < lineObj.widgets.length; ++i) { if (lineObj.widgets[i].above)\\r\\n        { height += widgetHeight(lineObj.widgets[i]); } } }\\r\\n        return height\\r\\n    }\\r\\n\\r\\n    // Converts a {top, bottom, left, right} box from line-local\\r\\n    // coordinates into another coordinate system. Context may be one of\\r\\n    // \\\"line\\\", \\\"div\\\" (display.lineDiv), \\\"local\\\"./null (editor), \\\"window\\\",\\r\\n    // or \\\"page\\\".\\r\\n    function intoCoordSystem(cm, lineObj, rect, context, includeWidgets) {\\r\\n        if (!includeWidgets) {\\r\\n            var height = widgetTopHeight(lineObj);\\r\\n            rect.top += height; rect.bottom += height;\\r\\n        }\\r\\n        if (context == \\\"line\\\") { return rect }\\r\\n        if (!context) { context = \\\"local\\\"; }\\r\\n        var yOff = heightAtLine(lineObj);\\r\\n        if (context == \\\"local\\\") { yOff += paddingTop(cm.display); }\\r\\n        else { yOff -= cm.display.viewOffset; }\\r\\n        if (context == \\\"page\\\" || context == \\\"window\\\") {\\r\\n            var lOff = cm.display.lineSpace.getBoundingClientRect();\\r\\n            yOff += lOff.top + (context == \\\"window\\\" ? 0 : pageScrollY());\\r\\n            var xOff = lOff.left + (context == \\\"window\\\" ? 0 : pageScrollX());\\r\\n            rect.left += xOff; rect.right += xOff;\\r\\n        }\\r\\n        rect.top += yOff; rect.bottom += yOff;\\r\\n        return rect\\r\\n    }\\r\\n\\r\\n    // Coverts a box from \\\"div\\\" coords to another coordinate system.\\r\\n    // Context may be \\\"window\\\", \\\"page\\\", \\\"div\\\", or \\\"local\\\"./null.\\r\\n    function fromCoordSystem(cm, coords, context) {\\r\\n        if (context == \\\"div\\\") { return coords }\\r\\n        var left = coords.left, top = coords.top;\\r\\n        // First move into \\\"page\\\" coordinate system\\r\\n        if (context == \\\"page\\\") {\\r\\n            left -= pageScrollX();\\r\\n            top -= pageScrollY();\\r\\n        } else if (context == \\\"local\\\" || !context) {\\r\\n            var localBox = cm.display.sizer.getBoundingClientRect();\\r\\n            left += localBox.left;\\r\\n            top += localBox.top;\\r\\n        }\\r\\n\\r\\n        var lineSpaceBox = cm.display.lineSpace.getBoundingClientRect();\\r\\n        return {left: left - lineSpaceBox.left, top: top - lineSpaceBox.top}\\r\\n    }\\r\\n\\r\\n    function charCoords(cm, pos, context, lineObj, bias) {\\r\\n        if (!lineObj) { lineObj = getLine(cm.doc, pos.line); }\\r\\n        return intoCoordSystem(cm, lineObj, measureChar(cm, lineObj, pos.ch, bias), context)\\r\\n    }\\r\\n\\r\\n    // Returns a box for a given cursor position, which may have an\\r\\n    // 'other' property containing the position of the secondary cursor\\r\\n    // on a bidi boundary.\\r\\n    // A cursor Pos(line, char, \\\"before\\\") is on the same visual line as `char - 1`\\r\\n    // and after `char - 1` in writing order of `char - 1`\\r\\n    // A cursor Pos(line, char, \\\"after\\\") is on the same visual line as `char`\\r\\n    // and before `char` in writing order of `char`\\r\\n    // Examples (upper-case letters are RTL, lower-case are LTR):\\r\\n    //     Pos(0, 1, ...)\\r\\n    //     before   after\\r\\n    // ab     a|b     a|b\\r\\n    // aB     a|B     aB|\\r\\n    // Ab     |Ab     A|b\\r\\n    // AB     B|A     B|A\\r\\n    // Every position after the last character on a line is considered to stick\\r\\n    // to the last character on the line.\\r\\n    function cursorCoords(cm, pos, context, lineObj, preparedMeasure, varHeight) {\\r\\n        lineObj = lineObj || getLine(cm.doc, pos.line);\\r\\n        if (!preparedMeasure) { preparedMeasure = prepareMeasureForLine(cm, lineObj); }\\r\\n        function get(ch, right) {\\r\\n            var m = measureCharPrepared(cm, preparedMeasure, ch, right ? \\\"right\\\" : \\\"left\\\", varHeight);\\r\\n            if (right) { m.left = m.right; } else { m.right = m.left; }\\r\\n            return intoCoordSystem(cm, lineObj, m, context)\\r\\n        }\\r\\n        var order = getOrder(lineObj, cm.doc.direction), ch = pos.ch, sticky = pos.sticky;\\r\\n        if (ch >= lineObj.text.length) {\\r\\n            ch = lineObj.text.length;\\r\\n            sticky = \\\"before\\\";\\r\\n        } else if (ch <= 0) {\\r\\n            ch = 0;\\r\\n            sticky = \\\"after\\\";\\r\\n        }\\r\\n        if (!order) { return get(sticky == \\\"before\\\" ? ch - 1 : ch, sticky == \\\"before\\\") }\\r\\n\\r\\n        function getBidi(ch, partPos, invert) {\\r\\n            var part = order[partPos], right = part.level == 1;\\r\\n            return get(invert ? ch - 1 : ch, right != invert)\\r\\n        }\\r\\n        var partPos = getBidiPartAt(order, ch, sticky);\\r\\n        var other = bidiOther;\\r\\n        var val = getBidi(ch, partPos, sticky == \\\"before\\\");\\r\\n        if (other != null) { val.other = getBidi(ch, other, sticky != \\\"before\\\"); }\\r\\n        return val\\r\\n    }\\r\\n\\r\\n    // Used to cheaply estimate the coordinates for a position. Used for\\r\\n    // intermediate scroll updates.\\r\\n    function estimateCoords(cm, pos) {\\r\\n        var left = 0;\\r\\n        pos = clipPos(cm.doc, pos);\\r\\n        if (!cm.options.lineWrapping) { left = charWidth(cm.display) * pos.ch; }\\r\\n        var lineObj = getLine(cm.doc, pos.line);\\r\\n        var top = heightAtLine(lineObj) + paddingTop(cm.display);\\r\\n        return {left: left, right: left, top: top, bottom: top + lineObj.height}\\r\\n    }\\r\\n\\r\\n    // Positions returned by coordsChar contain some extra information.\\r\\n    // xRel is the relative x position of the input coordinates compared\\r\\n    // to the found position (so xRel > 0 means the coordinates are to\\r\\n    // the right of the character position, for example). When outside\\r\\n    // is true, that means the coordinates lie outside the line's\\r\\n    // vertical range.\\r\\n    function PosWithInfo(line, ch, sticky, outside, xRel) {\\r\\n        var pos = Pos(line, ch, sticky);\\r\\n        pos.xRel = xRel;\\r\\n        if (outside) { pos.outside = true; }\\r\\n        return pos\\r\\n    }\\r\\n\\r\\n    // Compute the character position closest to the given coordinates.\\r\\n    // Input must be lineSpace-local (\\\"div\\\" coordinate system).\\r\\n    function coordsChar(cm, x, y) {\\r\\n        var doc = cm.doc;\\r\\n        y += cm.display.viewOffset;\\r\\n        if (y < 0) { return PosWithInfo(doc.first, 0, null, true, -1) }\\r\\n        var lineN = lineAtHeight(doc, y), last = doc.first + doc.size - 1;\\r\\n        if (lineN > last)\\r\\n        { return PosWithInfo(doc.first + doc.size - 1, getLine(doc, last).text.length, null, true, 1) }\\r\\n        if (x < 0) { x = 0; }\\r\\n\\r\\n        var lineObj = getLine(doc, lineN);\\r\\n        for (;;) {\\r\\n            var found = coordsCharInner(cm, lineObj, lineN, x, y);\\r\\n            var collapsed = collapsedSpanAround(lineObj, found.ch + (found.xRel > 0 ? 1 : 0));\\r\\n            if (!collapsed) { return found }\\r\\n            var rangeEnd = collapsed.find(1);\\r\\n            if (rangeEnd.line == lineN) { return rangeEnd }\\r\\n            lineObj = getLine(doc, lineN = rangeEnd.line);\\r\\n        }\\r\\n    }\\r\\n\\r\\n    function wrappedLineExtent(cm, lineObj, preparedMeasure, y) {\\r\\n        y -= widgetTopHeight(lineObj);\\r\\n        var end = lineObj.text.length;\\r\\n        var begin = findFirst(function (ch) { return measureCharPrepared(cm, preparedMeasure, ch - 1).bottom <= y; }, end, 0);\\r\\n        end = findFirst(function (ch) { return measureCharPrepared(cm, preparedMeasure, ch).top > y; }, begin, end);\\r\\n        return {begin: begin, end: end}\\r\\n    }\\r\\n\\r\\n    function wrappedLineExtentChar(cm, lineObj, preparedMeasure, target) {\\r\\n        if (!preparedMeasure) { preparedMeasure = prepareMeasureForLine(cm, lineObj); }\\r\\n        var targetTop = intoCoordSystem(cm, lineObj, measureCharPrepared(cm, preparedMeasure, target), \\\"line\\\").top;\\r\\n        return wrappedLineExtent(cm, lineObj, preparedMeasure, targetTop)\\r\\n    }\\r\\n\\r\\n    // Returns true if the given side of a box is after the given\\r\\n    // coordinates, in top-to-bottom, left-to-right order.\\r\\n    function boxIsAfter(box, x, y, left) {\\r\\n        return box.bottom <= y ? false : box.top > y ? true : (left ? box.left : box.right) > x\\r\\n    }\\r\\n\\r\\n    function coordsCharInner(cm, lineObj, lineNo$$1, x, y) {\\r\\n        // Move y into line-local coordinate space\\r\\n        y -= heightAtLine(lineObj);\\r\\n        var preparedMeasure = prepareMeasureForLine(cm, lineObj);\\r\\n        // When directly calling `measureCharPrepared`, we have to adjust\\r\\n        // for the widgets at this line.\\r\\n        var widgetHeight$$1 = widgetTopHeight(lineObj);\\r\\n        var begin = 0, end = lineObj.text.length, ltr = true;\\r\\n\\r\\n        var order = getOrder(lineObj, cm.doc.direction);\\r\\n        // If the line isn't plain left-to-right text, first figure out\\r\\n        // which bidi section the coordinates fall into.\\r\\n        if (order) {\\r\\n            var part = (cm.options.lineWrapping ? coordsBidiPartWrapped : coordsBidiPart)\\r\\n            (cm, lineObj, lineNo$$1, preparedMeasure, order, x, y);\\r\\n            ltr = part.level != 1;\\r\\n            // The awkward -1 offsets are needed because findFirst (called\\r\\n            // on these below) will treat its first bound as inclusive,\\r\\n            // second as exclusive, but we want to actually address the\\r\\n            // characters in the part's range\\r\\n            begin = ltr ? part.from : part.to - 1;\\r\\n            end = ltr ? part.to : part.from - 1;\\r\\n        }\\r\\n\\r\\n        // A binary search to find the first character whose bounding box\\r\\n        // starts after the coordinates. If we run across any whose box wrap\\r\\n        // the coordinates, store that.\\r\\n        var chAround = null, boxAround = null;\\r\\n        var ch = findFirst(function (ch) {\\r\\n            var box = measureCharPrepared(cm, preparedMeasure, ch);\\r\\n            box.top += widgetHeight$$1; box.bottom += widgetHeight$$1;\\r\\n            if (!boxIsAfter(box, x, y, false)) { return false }\\r\\n            if (box.top <= y && box.left <= x) {\\r\\n                chAround = ch;\\r\\n                boxAround = box;\\r\\n            }\\r\\n            return true\\r\\n        }, begin, end);\\r\\n\\r\\n        var baseX, sticky, outside = false;\\r\\n        // If a box around the coordinates was found, use that\\r\\n        if (boxAround) {\\r\\n            // Distinguish coordinates nearer to the left or right side of the box\\r\\n            var atLeft = x - boxAround.left < boxAround.right - x, atStart = atLeft == ltr;\\r\\n            ch = chAround + (atStart ? 0 : 1);\\r\\n            sticky = atStart ? \\\"after\\\" : \\\"before\\\";\\r\\n            baseX = atLeft ? boxAround.left : boxAround.right;\\r\\n        } else {\\r\\n            // (Adjust for extended bound, if necessary.)\\r\\n            if (!ltr && (ch == end || ch == begin)) { ch++; }\\r\\n            // To determine which side to associate with, get the box to the\\r\\n            // left of the character and compare it's vertical position to the\\r\\n            // coordinates\\r\\n            sticky = ch == 0 ? \\\"after\\\" : ch == lineObj.text.length ? \\\"before\\\" :\\r\\n                (measureCharPrepared(cm, preparedMeasure, ch - (ltr ? 1 : 0)).bottom + widgetHeight$$1 <= y) == ltr ?\\r\\n                    \\\"after\\\" : \\\"before\\\";\\r\\n            // Now get accurate coordinates for this place, in order to get a\\r\\n            // base X position\\r\\n            var coords = cursorCoords(cm, Pos(lineNo$$1, ch, sticky), \\\"line\\\", lineObj, preparedMeasure);\\r\\n            baseX = coords.left;\\r\\n            outside = y < coords.top || y >= coords.bottom;\\r\\n        }\\r\\n\\r\\n        ch = skipExtendingChars(lineObj.text, ch, 1);\\r\\n        return PosWithInfo(lineNo$$1, ch, sticky, outside, x - baseX)\\r\\n    }\\r\\n\\r\\n    function coordsBidiPart(cm, lineObj, lineNo$$1, preparedMeasure, order, x, y) {\\r\\n        // Bidi parts are sorted left-to-right, and in a non-line-wrapping\\r\\n        // situation, we can take this ordering to correspond to the visual\\r\\n        // ordering. This finds the first part whose end is after the given\\r\\n        // coordinates.\\r\\n        var index = findFirst(function (i) {\\r\\n            var part = order[i], ltr = part.level != 1;\\r\\n            return boxIsAfter(cursorCoords(cm, Pos(lineNo$$1, ltr ? part.to : part.from, ltr ? \\\"before\\\" : \\\"after\\\"),\\r\\n                \\\"line\\\", lineObj, preparedMeasure), x, y, true)\\r\\n        }, 0, order.length - 1);\\r\\n        var part = order[index];\\r\\n        // If this isn't the first part, the part's start is also after\\r\\n        // the coordinates, and the coordinates aren't on the same line as\\r\\n        // that start, move one part back.\\r\\n        if (index > 0) {\\r\\n            var ltr = part.level != 1;\\r\\n            var start = cursorCoords(cm, Pos(lineNo$$1, ltr ? part.from : part.to, ltr ? \\\"after\\\" : \\\"before\\\"),\\r\\n                \\\"line\\\", lineObj, preparedMeasure);\\r\\n            if (boxIsAfter(start, x, y, true) && start.top > y)\\r\\n            { part = order[index - 1]; }\\r\\n        }\\r\\n        return part\\r\\n    }\\r\\n\\r\\n    function coordsBidiPartWrapped(cm, lineObj, _lineNo, preparedMeasure, order, x, y) {\\r\\n        // In a wrapped line, rtl text on wrapping boundaries can do things\\r\\n        // that don't correspond to the ordering in our `order` array at\\r\\n        // all, so a binary search doesn't work, and we want to return a\\r\\n        // part that only spans one line so that the binary search in\\r\\n        // coordsCharInner is safe. As such, we first find the extent of the\\r\\n        // wrapped line, and then do a flat search in which we discard any\\r\\n        // spans that aren't on the line.\\r\\n        var ref = wrappedLineExtent(cm, lineObj, preparedMeasure, y);\\r\\n        var begin = ref.begin;\\r\\n        var end = ref.end;\\r\\n        if (/\\\\s/.test(lineObj.text.charAt(end - 1))) { end--; }\\r\\n        var part = null, closestDist = null;\\r\\n        for (var i = 0; i < order.length; i++) {\\r\\n            var p = order[i];\\r\\n            if (p.from >= end || p.to <= begin) { continue }\\r\\n            var ltr = p.level != 1;\\r\\n            var endX = measureCharPrepared(cm, preparedMeasure, ltr ? Math.min(end, p.to) - 1 : Math.max(begin, p.from)).right;\\r\\n            // Weigh against spans ending before this, so that they are only\\r\\n            // picked if nothing ends after\\r\\n            var dist = endX < x ? x - endX + 1e9 : endX - x;\\r\\n            if (!part || closestDist > dist) {\\r\\n                part = p;\\r\\n                closestDist = dist;\\r\\n            }\\r\\n        }\\r\\n        if (!part) { part = order[order.length - 1]; }\\r\\n        // Clip the part to the wrapped line.\\r\\n        if (part.from < begin) { part = {from: begin, to: part.to, level: part.level}; }\\r\\n        if (part.to > end) { part = {from: part.from, to: end, level: part.level}; }\\r\\n        return part\\r\\n    }\\r\\n\\r\\n    var measureText;\\r\\n    // Compute the default text height.\\r\\n    function textHeight(display) {\\r\\n        if (display.cachedTextHeight != null) { return display.cachedTextHeight }\\r\\n        if (measureText == null) {\\r\\n            measureText = elt(\\\"pre\\\");\\r\\n            // Measure a bunch of lines, for browsers that compute\\r\\n            // fractional heights.\\r\\n            for (var i = 0; i < 49; ++i) {\\r\\n                measureText.appendChild(document.createTextNode(\\\"x\\\"));\\r\\n                measureText.appendChild(elt(\\\"br\\\"));\\r\\n            }\\r\\n            measureText.appendChild(document.createTextNode(\\\"x\\\"));\\r\\n        }\\r\\n        removeChildrenAndAdd(display.measure, measureText);\\r\\n        var height = measureText.offsetHeight / 50;\\r\\n        if (height > 3) { display.cachedTextHeight = height; }\\r\\n        removeChildren(display.measure);\\r\\n        return height || 1\\r\\n    }\\r\\n\\r\\n    // Compute the default character width.\\r\\n    function charWidth(display) {\\r\\n        if (display.cachedCharWidth != null) { return display.cachedCharWidth }\\r\\n        var anchor = elt(\\\"span\\\", \\\"xxxxxxxxxx\\\");\\r\\n        var pre = elt(\\\"pre\\\", [anchor]);\\r\\n        removeChildrenAndAdd(display.measure, pre);\\r\\n        var rect = anchor.getBoundingClientRect(), width = (rect.right - rect.left) / 10;\\r\\n        if (width > 2) { display.cachedCharWidth = width; }\\r\\n        return width || 10\\r\\n    }\\r\\n\\r\\n    // Do a bulk-read of the DOM positions and sizes needed to draw the\\r\\n    // view, so that we don't interleave reading and writing to the DOM.\\r\\n    function getDimensions(cm) {\\r\\n        var d = cm.display, left = {}, width = {};\\r\\n        var gutterLeft = d.gutters.clientLeft;\\r\\n        for (var n = d.gutters.firstChild, i = 0; n; n = n.nextSibling, ++i) {\\r\\n            left[cm.options.gutters[i]] = n.offsetLeft + n.clientLeft + gutterLeft;\\r\\n            width[cm.options.gutters[i]] = n.clientWidth;\\r\\n        }\\r\\n        return {fixedPos: compensateForHScroll(d),\\r\\n            gutterTotalWidth: d.gutters.offsetWidth,\\r\\n            gutterLeft: left,\\r\\n            gutterWidth: width,\\r\\n            wrapperWidth: d.wrapper.clientWidth}\\r\\n    }\\r\\n\\r\\n    // Computes display.scroller.scrollLeft + display.gutters.offsetWidth,\\r\\n    // but using getBoundingClientRect to get a sub-pixel-accurate\\r\\n    // result.\\r\\n    function compensateForHScroll(display) {\\r\\n        return display.scroller.getBoundingClientRect().left - display.sizer.getBoundingClientRect().left\\r\\n    }\\r\\n\\r\\n    // Returns a function that estimates the height of a line, to use as\\r\\n    // first approximation until the line becomes visible (and is thus\\r\\n    // properly measurable).\\r\\n    function estimateHeight(cm) {\\r\\n        var th = textHeight(cm.display), wrapping = cm.options.lineWrapping;\\r\\n        var perLine = wrapping && Math.max(5, cm.display.scroller.clientWidth / charWidth(cm.display) - 3);\\r\\n        return function (line) {\\r\\n            if (lineIsHidden(cm.doc, line)) { return 0 }\\r\\n\\r\\n            var widgetsHeight = 0;\\r\\n            if (line.widgets) { for (var i = 0; i < line.widgets.length; i++) {\\r\\n                if (line.widgets[i].height) { widgetsHeight += line.widgets[i].height; }\\r\\n            } }\\r\\n\\r\\n            if (wrapping)\\r\\n            { return widgetsHeight + (Math.ceil(line.text.length / perLine) || 1) * th }\\r\\n            else\\r\\n            { return widgetsHeight + th }\\r\\n        }\\r\\n    }\\r\\n\\r\\n    function estimateLineHeights(cm) {\\r\\n        var doc = cm.doc, est = estimateHeight(cm);\\r\\n        doc.iter(function (line) {\\r\\n            var estHeight = est(line);\\r\\n            if (estHeight != line.height) { updateLineHeight(line, estHeight); }\\r\\n        });\\r\\n    }\\r\\n\\r\\n    // Given a mouse event, find the corresponding position. If liberal\\r\\n    // is false, it checks whether a gutter or scrollbar was clicked,\\r\\n    // and returns null if it was. forRect is used by rectangular\\r\\n    // selections, and tries to estimate a character position even for\\r\\n    // coordinates beyond the right of the text.\\r\\n    function posFromMouse(cm, e, liberal, forRect) {\\r\\n        var display = cm.display;\\r\\n        if (!liberal && e_target(e).getAttribute(\\\"cm-not-content\\\") == \\\"true\\\") { return null }\\r\\n\\r\\n        var x, y, space = display.lineSpace.getBoundingClientRect();\\r\\n        // Fails unpredictably on IE[67] when mouse is dragged around quickly.\\r\\n        try { x = e.clientX - space.left; y = e.clientY - space.top; }\\r\\n        catch (e) { return null }\\r\\n        var coords = coordsChar(cm, x, y), line;\\r\\n        if (forRect && coords.xRel == 1 && (line = getLine(cm.doc, coords.line).text).length == coords.ch) {\\r\\n            var colDiff = countColumn(line, line.length, cm.options.tabSize) - line.length;\\r\\n            coords = Pos(coords.line, Math.max(0, Math.round((x - paddingH(cm.display).left) / charWidth(cm.display)) - colDiff));\\r\\n        }\\r\\n        return coords\\r\\n    }\\r\\n\\r\\n    // Find the view element corresponding to a given line. Return null\\r\\n    // when the line isn't visible.\\r\\n    function findViewIndex(cm, n) {\\r\\n        if (n >= cm.display.viewTo) { return null }\\r\\n        n -= cm.display.viewFrom;\\r\\n        if (n < 0) { return null }\\r\\n        var view = cm.display.view;\\r\\n        for (var i = 0; i < view.length; i++) {\\r\\n            n -= view[i].size;\\r\\n            if (n < 0) { return i }\\r\\n        }\\r\\n    }\\r\\n\\r\\n    function updateSelection(cm) {\\r\\n        cm.display.input.showSelection(cm.display.input.prepareSelection());\\r\\n    }\\r\\n\\r\\n    function prepareSelection(cm, primary) {\\r\\n        if ( primary === void 0 ) primary = true;\\r\\n\\r\\n        var doc = cm.doc, result = {};\\r\\n        var curFragment = result.cursors = document.createDocumentFragment();\\r\\n        var selFragment = result.selection = document.createDocumentFragment();\\r\\n\\r\\n        for (var i = 0; i < doc.sel.ranges.length; i++) {\\r\\n            if (!primary && i == doc.sel.primIndex) { continue }\\r\\n            var range$$1 = doc.sel.ranges[i];\\r\\n            if (range$$1.from().line >= cm.display.viewTo || range$$1.to().line < cm.display.viewFrom) { continue }\\r\\n            var collapsed = range$$1.empty();\\r\\n            if (collapsed || cm.options.showCursorWhenSelecting)\\r\\n            { drawSelectionCursor(cm, range$$1.head, curFragment); }\\r\\n            if (!collapsed)\\r\\n            { drawSelectionRange(cm, range$$1, selFragment); }\\r\\n        }\\r\\n        return result\\r\\n    }\\r\\n\\r\\n    // Draws a cursor for the given range\\r\\n    function drawSelectionCursor(cm, head, output) {\\r\\n        var pos = cursorCoords(cm, head, \\\"div\\\", null, null, !cm.options.singleCursorHeightPerLine);\\r\\n\\r\\n        var cursor = output.appendChild(elt(\\\"div\\\", \\\"\\\\u00a0\\\", \\\"CodeMirror-cursor\\\"));\\r\\n        cursor.style.left = pos.left + \\\"px\\\";\\r\\n        cursor.style.top = pos.top + \\\"px\\\";\\r\\n        cursor.style.height = Math.max(0, pos.bottom - pos.top) * cm.options.cursorHeight + \\\"px\\\";\\r\\n\\r\\n        if (pos.other) {\\r\\n            // Secondary cursor, shown when on a 'jump' in bi-directional text\\r\\n            var otherCursor = output.appendChild(elt(\\\"div\\\", \\\"\\\\u00a0\\\", \\\"CodeMirror-cursor CodeMirror-secondarycursor\\\"));\\r\\n            otherCursor.style.display = \\\"\\\";\\r\\n            otherCursor.style.left = pos.other.left + \\\"px\\\";\\r\\n            otherCursor.style.top = pos.other.top + \\\"px\\\";\\r\\n            otherCursor.style.height = (pos.other.bottom - pos.other.top) * .85 + \\\"px\\\";\\r\\n        }\\r\\n    }\\r\\n\\r\\n    function cmpCoords(a, b) { return a.top - b.top || a.left - b.left }\\r\\n\\r\\n    // Draws the given range as a highlighted selection\\r\\n    function drawSelectionRange(cm, range$$1, output) {\\r\\n        var display = cm.display, doc = cm.doc;\\r\\n        var fragment = document.createDocumentFragment();\\r\\n        var padding = paddingH(cm.display), leftSide = padding.left;\\r\\n        var rightSide = Math.max(display.sizerWidth, displayWidth(cm) - display.sizer.offsetLeft) - padding.right;\\r\\n        var docLTR = doc.direction == \\\"ltr\\\";\\r\\n\\r\\n        function add(left, top, width, bottom) {\\r\\n            if (top < 0) { top = 0; }\\r\\n            top = Math.round(top);\\r\\n            bottom = Math.round(bottom);\\r\\n            fragment.appendChild(elt(\\\"div\\\", null, \\\"CodeMirror-selected\\\", (\\\"position: absolute; left: \\\" + left + \\\"px;\\\\n                             top: \\\" + top + \\\"px; width: \\\" + (width == null ? rightSide - left : width) + \\\"px;\\\\n                             height: \\\" + (bottom - top) + \\\"px\\\")));\\r\\n        }\\r\\n\\r\\n        function drawForLine(line, fromArg, toArg) {\\r\\n            var lineObj = getLine(doc, line);\\r\\n            var lineLen = lineObj.text.length;\\r\\n            var start, end;\\r\\n            function coords(ch, bias) {\\r\\n                return charCoords(cm, Pos(line, ch), \\\"div\\\", lineObj, bias)\\r\\n            }\\r\\n\\r\\n            function wrapX(pos, dir, side) {\\r\\n                var extent = wrappedLineExtentChar(cm, lineObj, null, pos);\\r\\n                var prop = (dir == \\\"ltr\\\") == (side == \\\"after\\\") ? \\\"left\\\" : \\\"right\\\";\\r\\n                var ch = side == \\\"after\\\" ? extent.begin : extent.end - (/\\\\s/.test(lineObj.text.charAt(extent.end - 1)) ? 2 : 1);\\r\\n                return coords(ch, prop)[prop]\\r\\n            }\\r\\n\\r\\n            var order = getOrder(lineObj, doc.direction);\\r\\n            iterateBidiSections(order, fromArg || 0, toArg == null ? lineLen : toArg, function (from, to, dir, i) {\\r\\n                var ltr = dir == \\\"ltr\\\";\\r\\n                var fromPos = coords(from, ltr ? \\\"left\\\" : \\\"right\\\");\\r\\n                var toPos = coords(to - 1, ltr ? \\\"right\\\" : \\\"left\\\");\\r\\n\\r\\n                var openStart = fromArg == null && from == 0, openEnd = toArg == null && to == lineLen;\\r\\n                var first = i == 0, last = !order || i == order.length - 1;\\r\\n                if (toPos.top - fromPos.top <= 3) { // Single line\\r\\n                    var openLeft = (docLTR ? openStart : openEnd) && first;\\r\\n                    var openRight = (docLTR ? openEnd : openStart) && last;\\r\\n                    var left = openLeft ? leftSide : (ltr ? fromPos : toPos).left;\\r\\n                    var right = openRight ? rightSide : (ltr ? toPos : fromPos).right;\\r\\n                    add(left, fromPos.top, right - left, fromPos.bottom);\\r\\n                } else { // Multiple lines\\r\\n                    var topLeft, topRight, botLeft, botRight;\\r\\n                    if (ltr) {\\r\\n                        topLeft = docLTR && openStart && first ? leftSide : fromPos.left;\\r\\n                        topRight = docLTR ? rightSide : wrapX(from, dir, \\\"before\\\");\\r\\n                        botLeft = docLTR ? leftSide : wrapX(to, dir, \\\"after\\\");\\r\\n                        botRight = docLTR && openEnd && last ? rightSide : toPos.right;\\r\\n                    } else {\\r\\n                        topLeft = !docLTR ? leftSide : wrapX(from, dir, \\\"before\\\");\\r\\n                        topRight = !docLTR && openStart && first ? rightSide : fromPos.right;\\r\\n                        botLeft = !docLTR && openEnd && last ? leftSide : toPos.left;\\r\\n                        botRight = !docLTR ? rightSide : wrapX(to, dir, \\\"after\\\");\\r\\n                    }\\r\\n                    add(topLeft, fromPos.top, topRight - topLeft, fromPos.bottom);\\r\\n                    if (fromPos.bottom < toPos.top) { add(leftSide, fromPos.bottom, null, toPos.top); }\\r\\n                    add(botLeft, toPos.top, botRight - botLeft, toPos.bottom);\\r\\n                }\\r\\n\\r\\n                if (!start || cmpCoords(fromPos, start) < 0) { start = fromPos; }\\r\\n                if (cmpCoords(toPos, start) < 0) { start = toPos; }\\r\\n                if (!end || cmpCoords(fromPos, end) < 0) { end = fromPos; }\\r\\n                if (cmpCoords(toPos, end) < 0) { end = toPos; }\\r\\n            });\\r\\n            return {start: start, end: end}\\r\\n        }\\r\\n\\r\\n        var sFrom = range$$1.from(), sTo = range$$1.to();\\r\\n        if (sFrom.line == sTo.line) {\\r\\n            drawForLine(sFrom.line, sFrom.ch, sTo.ch);\\r\\n        } else {\\r\\n            var fromLine = getLine(doc, sFrom.line), toLine = getLine(doc, sTo.line);\\r\\n            var singleVLine = visualLine(fromLine) == visualLine(toLine);\\r\\n            var leftEnd = drawForLine(sFrom.line, sFrom.ch, singleVLine ? fromLine.text.length + 1 : null).end;\\r\\n            var rightStart = drawForLine(sTo.line, singleVLine ? 0 : null, sTo.ch).start;\\r\\n            if (singleVLine) {\\r\\n                if (leftEnd.top < rightStart.top - 2) {\\r\\n                    add(leftEnd.right, leftEnd.top, null, leftEnd.bottom);\\r\\n                    add(leftSide, rightStart.top, rightStart.left, rightStart.bottom);\\r\\n                } else {\\r\\n                    add(leftEnd.right, leftEnd.top, rightStart.left - leftEnd.right, leftEnd.bottom);\\r\\n                }\\r\\n            }\\r\\n            if (leftEnd.bottom < rightStart.top)\\r\\n            { add(leftSide, leftEnd.bottom, null, rightStart.top); }\\r\\n        }\\r\\n\\r\\n        output.appendChild(fragment);\\r\\n    }\\r\\n\\r\\n    // Cursor-blinking\\r\\n    function restartBlink(cm) {\\r\\n        if (!cm.state.focused) { return }\\r\\n        var display = cm.display;\\r\\n        clearInterval(display.blinker);\\r\\n        var on = true;\\r\\n        display.cursorDiv.style.visibility = \\\"\\\";\\r\\n        if (cm.options.cursorBlinkRate > 0)\\r\\n        { display.blinker = setInterval(function () { return display.cursorDiv.style.visibility = (on = !on) ? \\\"\\\" : \\\"hidden\\\"; },\\r\\n            cm.options.cursorBlinkRate); }\\r\\n        else if (cm.options.cursorBlinkRate < 0)\\r\\n        { display.cursorDiv.style.visibility = \\\"hidden\\\"; }\\r\\n    }\\r\\n\\r\\n    function ensureFocus(cm) {\\r\\n        if (!cm.state.focused) { cm.display.input.focus(); onFocus(cm); }\\r\\n    }\\r\\n\\r\\n    function delayBlurEvent(cm) {\\r\\n        cm.state.delayingBlurEvent = true;\\r\\n        setTimeout(function () { if (cm.state.delayingBlurEvent) {\\r\\n            cm.state.delayingBlurEvent = false;\\r\\n            onBlur(cm);\\r\\n        } }, 100);\\r\\n    }\\r\\n\\r\\n    function onFocus(cm, e) {\\r\\n        if (cm.state.delayingBlurEvent) { cm.state.delayingBlurEvent = false; }\\r\\n\\r\\n        if (cm.options.readOnly == \\\"nocursor\\\") { return }\\r\\n        if (!cm.state.focused) {\\r\\n            signal(cm, \\\"focus\\\", cm, e);\\r\\n            cm.state.focused = true;\\r\\n            addClass(cm.display.wrapper, \\\"CodeMirror-focused\\\");\\r\\n            // This test prevents this from firing when a context\\r\\n            // menu is closed (since the input reset would kill the\\r\\n            // select-all detection hack)\\r\\n            if (!cm.curOp && cm.display.selForContextMenu != cm.doc.sel) {\\r\\n                cm.display.input.reset();\\r\\n                if (webkit) { setTimeout(function () { return cm.display.input.reset(true); }, 20); } // Issue #1730\\r\\n            }\\r\\n            cm.display.input.receivedFocus();\\r\\n        }\\r\\n        restartBlink(cm);\\r\\n    }\\r\\n    function onBlur(cm, e) {\\r\\n        if (cm.state.delayingBlurEvent) { return }\\r\\n\\r\\n        if (cm.state.focused) {\\r\\n            signal(cm, \\\"blur\\\", cm, e);\\r\\n            cm.state.focused = false;\\r\\n            rmClass(cm.display.wrapper, \\\"CodeMirror-focused\\\");\\r\\n        }\\r\\n        clearInterval(cm.display.blinker);\\r\\n        setTimeout(function () { if (!cm.state.focused) { cm.display.shift = false; } }, 150);\\r\\n    }\\r\\n\\r\\n    // Read the actual heights of the rendered lines, and update their\\r\\n    // stored heights to match.\\r\\n    function updateHeightsInViewport(cm) {\\r\\n        var display = cm.display;\\r\\n        var prevBottom = display.lineDiv.offsetTop;\\r\\n        for (var i = 0; i < display.view.length; i++) {\\r\\n            var cur = display.view[i], wrapping = cm.options.lineWrapping;\\r\\n            var height = (void 0), width = 0;\\r\\n            if (cur.hidden) { continue }\\r\\n            if (ie && ie_version < 8) {\\r\\n                var bot = cur.node.offsetTop + cur.node.offsetHeight;\\r\\n                height = bot - prevBottom;\\r\\n                prevBottom = bot;\\r\\n            } else {\\r\\n                var box = cur.node.getBoundingClientRect();\\r\\n                height = box.bottom - box.top;\\r\\n                // Check that lines don't extend past the right of the current\\r\\n                // editor width\\r\\n                if (!wrapping && cur.text.firstChild)\\r\\n                { width = cur.text.firstChild.getBoundingClientRect().right - box.left - 1; }\\r\\n            }\\r\\n            var diff = cur.line.height - height;\\r\\n            if (height < 2) { height = textHeight(display); }\\r\\n            if (diff > .005 || diff < -.005) {\\r\\n                updateLineHeight(cur.line, height);\\r\\n                updateWidgetHeight(cur.line);\\r\\n                if (cur.rest) { for (var j = 0; j < cur.rest.length; j++)\\r\\n                { updateWidgetHeight(cur.rest[j]); } }\\r\\n            }\\r\\n            if (width > cm.display.sizerWidth) {\\r\\n                var chWidth = Math.ceil(width / charWidth(cm.display));\\r\\n                if (chWidth > cm.display.maxLineLength) {\\r\\n                    cm.display.maxLineLength = chWidth;\\r\\n                    cm.display.maxLine = cur.line;\\r\\n                    cm.display.maxLineChanged = true;\\r\\n                }\\r\\n            }\\r\\n        }\\r\\n    }\\r\\n\\r\\n    // Read and store the height of line widgets associated with the\\r\\n    // given line.\\r\\n    function updateWidgetHeight(line) {\\r\\n        if (line.widgets) { for (var i = 0; i < line.widgets.length; ++i) {\\r\\n            var w = line.widgets[i], parent = w.node.parentNode;\\r\\n            if (parent) { w.height = parent.offsetHeight; }\\r\\n        } }\\r\\n    }\\r\\n\\r\\n    // Compute the lines that are visible in a given viewport (defaults\\r\\n    // the the current scroll position). viewport may contain top,\\r\\n    // height, and ensure (see op.scrollToPos) properties.\\r\\n    function visibleLines(display, doc, viewport) {\\r\\n        var top = viewport && viewport.top != null ? Math.max(0, viewport.top) : display.scroller.scrollTop;\\r\\n        top = Math.floor(top - paddingTop(display));\\r\\n        var bottom = viewport && viewport.bottom != null ? viewport.bottom : top + display.wrapper.clientHeight;\\r\\n\\r\\n        var from = lineAtHeight(doc, top), to = lineAtHeight(doc, bottom);\\r\\n        // Ensure is a {from: {line, ch}, to: {line, ch}} object, and\\r\\n        // forces those lines into the viewport (if possible).\\r\\n        if (viewport && viewport.ensure) {\\r\\n            var ensureFrom = viewport.ensure.from.line, ensureTo = viewport.ensure.to.line;\\r\\n            if (ensureFrom < from) {\\r\\n                from = ensureFrom;\\r\\n                to = lineAtHeight(doc, heightAtLine(getLine(doc, ensureFrom)) + display.wrapper.clientHeight);\\r\\n            } else if (Math.min(ensureTo, doc.lastLine()) >= to) {\\r\\n                from = lineAtHeight(doc, heightAtLine(getLine(doc, ensureTo)) - display.wrapper.clientHeight);\\r\\n                to = ensureTo;\\r\\n            }\\r\\n        }\\r\\n        return {from: from, to: Math.max(to, from + 1)}\\r\\n    }\\r\\n\\r\\n    // Re-align line numbers and gutter marks to compensate for\\r\\n    // horizontal scrolling.\\r\\n    function alignHorizontally(cm) {\\r\\n        var display = cm.display, view = display.view;\\r\\n        if (!display.alignWidgets && (!display.gutters.firstChild || !cm.options.fixedGutter)) { return }\\r\\n        var comp = compensateForHScroll(display) - display.scroller.scrollLeft + cm.doc.scrollLeft;\\r\\n        var gutterW = display.gutters.offsetWidth, left = comp + \\\"px\\\";\\r\\n        for (var i = 0; i < view.length; i++) { if (!view[i].hidden) {\\r\\n            if (cm.options.fixedGutter) {\\r\\n                if (view[i].gutter)\\r\\n                { view[i].gutter.style.left = left; }\\r\\n                if (view[i].gutterBackground)\\r\\n                { view[i].gutterBackground.style.left = left; }\\r\\n            }\\r\\n            var align = view[i].alignable;\\r\\n            if (align) { for (var j = 0; j < align.length; j++)\\r\\n            { align[j].style.left = left; } }\\r\\n        } }\\r\\n        if (cm.options.fixedGutter)\\r\\n        { display.gutters.style.left = (comp + gutterW) + \\\"px\\\"; }\\r\\n    }\\r\\n\\r\\n    // Used to ensure that the line number gutter is still the right\\r\\n    // size for the current document size. Returns true when an update\\r\\n    // is needed.\\r\\n    function maybeUpdateLineNumberWidth(cm) {\\r\\n        if (!cm.options.lineNumbers) { return false }\\r\\n        var doc = cm.doc, last = lineNumberFor(cm.options, doc.first + doc.size - 1), display = cm.display;\\r\\n        if (last.length != display.lineNumChars) {\\r\\n            var test = display.measure.appendChild(elt(\\\"div\\\", [elt(\\\"div\\\", last)],\\r\\n                \\\"CodeMirror-linenumber CodeMirror-gutter-elt\\\"));\\r\\n            var innerW = test.firstChild.offsetWidth, padding = test.offsetWidth - innerW;\\r\\n            display.lineGutter.style.width = \\\"\\\";\\r\\n            display.lineNumInnerWidth = Math.max(innerW, display.lineGutter.offsetWidth - padding) + 1;\\r\\n            display.lineNumWidth = display.lineNumInnerWidth + padding;\\r\\n            display.lineNumChars = display.lineNumInnerWidth ? last.length : -1;\\r\\n            display.lineGutter.style.width = display.lineNumWidth + \\\"px\\\";\\r\\n            updateGutterSpace(cm);\\r\\n            return true\\r\\n        }\\r\\n        return false\\r\\n    }\\r\\n\\r\\n    // SCROLLING THINGS INTO VIEW\\r\\n\\r\\n    // If an editor sits on the top or bottom of the window, partially\\r\\n    // scrolled out of view, this ensures that the cursor is visible.\\r\\n    function maybeScrollWindow(cm, rect) {\\r\\n        if (signalDOMEvent(cm, \\\"scrollCursorIntoView\\\")) { return }\\r\\n\\r\\n        var display = cm.display, box = display.sizer.getBoundingClientRect(), doScroll = null;\\r\\n        if (rect.top + box.top < 0) { doScroll = true; }\\r\\n        else if (rect.bottom + box.top > (window.innerHeight || document.documentElement.clientHeight)) { doScroll = false; }\\r\\n        if (doScroll != null && !phantom) {\\r\\n            var scrollNode = elt(\\\"div\\\", \\\"\\\\u200b\\\", null, (\\\"position: absolute;\\\\n                         top: \\\" + (rect.top - display.viewOffset - paddingTop(cm.display)) + \\\"px;\\\\n                         height: \\\" + (rect.bottom - rect.top + scrollGap(cm) + display.barHeight) + \\\"px;\\\\n                         left: \\\" + (rect.left) + \\\"px; width: \\\" + (Math.max(2, rect.right - rect.left)) + \\\"px;\\\"));\\r\\n            cm.display.lineSpace.appendChild(scrollNode);\\r\\n            scrollNode.scrollIntoView(doScroll);\\r\\n            cm.display.lineSpace.removeChild(scrollNode);\\r\\n        }\\r\\n    }\\r\\n\\r\\n    // Scroll a given position into view (immediately), verifying that\\r\\n    // it actually became visible (as line heights are accurately\\r\\n    // measured, the position of something may 'drift' during drawing).\\r\\n    function scrollPosIntoView(cm, pos, end, margin) {\\r\\n        if (margin == null) { margin = 0; }\\r\\n        var rect;\\r\\n        if (!cm.options.lineWrapping && pos == end) {\\r\\n            // Set pos and end to the cursor positions around the character pos sticks to\\r\\n            // If pos.sticky == \\\"before\\\", that is around pos.ch - 1, otherwise around pos.ch\\r\\n            // If pos == Pos(_, 0, \\\"before\\\"), pos and end are unchanged\\r\\n            pos = pos.ch ? Pos(pos.line, pos.sticky == \\\"before\\\" ? pos.ch - 1 : pos.ch, \\\"after\\\") : pos;\\r\\n            end = pos.sticky == \\\"before\\\" ? Pos(pos.line, pos.ch + 1, \\\"before\\\") : pos;\\r\\n        }\\r\\n        for (var limit = 0; limit < 5; limit++) {\\r\\n            var changed = false;\\r\\n            var coords = cursorCoords(cm, pos);\\r\\n            var endCoords = !end || end == pos ? coords : cursorCoords(cm, end);\\r\\n            rect = {left: Math.min(coords.left, endCoords.left),\\r\\n                top: Math.min(coords.top, endCoords.top) - margin,\\r\\n                right: Math.max(coords.left, endCoords.left),\\r\\n                bottom: Math.max(coords.bottom, endCoords.bottom) + margin};\\r\\n            var scrollPos = calculateScrollPos(cm, rect);\\r\\n            var startTop = cm.doc.scrollTop, startLeft = cm.doc.scrollLeft;\\r\\n            if (scrollPos.scrollTop != null) {\\r\\n                updateScrollTop(cm, scrollPos.scrollTop);\\r\\n                if (Math.abs(cm.doc.scrollTop - startTop) > 1) { changed = true; }\\r\\n            }\\r\\n            if (scrollPos.scrollLeft != null) {\\r\\n                setScrollLeft(cm, scrollPos.scrollLeft);\\r\\n                if (Math.abs(cm.doc.scrollLeft - startLeft) > 1) { changed = true; }\\r\\n            }\\r\\n            if (!changed) { break }\\r\\n        }\\r\\n        return rect\\r\\n    }\\r\\n\\r\\n    // Scroll a given set of coordinates into view (immediately).\\r\\n    function scrollIntoView(cm, rect) {\\r\\n        var scrollPos = calculateScrollPos(cm, rect);\\r\\n        if (scrollPos.scrollTop != null) { updateScrollTop(cm, scrollPos.scrollTop); }\\r\\n        if (scrollPos.scrollLeft != null) { setScrollLeft(cm, scrollPos.scrollLeft); }\\r\\n    }\\r\\n\\r\\n    // Calculate a new scroll position needed to scroll the given\\r\\n    // rectangle into view. Returns an object with scrollTop and\\r\\n    // scrollLeft properties. When these are undefined, the\\r\\n    // vertical/horizontal position does not need to be adjusted.\\r\\n    function calculateScrollPos(cm, rect) {\\r\\n        var display = cm.display, snapMargin = textHeight(cm.display);\\r\\n        if (rect.top < 0) { rect.top = 0; }\\r\\n        var screentop = cm.curOp && cm.curOp.scrollTop != null ? cm.curOp.scrollTop : display.scroller.scrollTop;\\r\\n        var screen = displayHeight(cm), result = {};\\r\\n        if (rect.bottom - rect.top > screen) { rect.bottom = rect.top + screen; }\\r\\n        var docBottom = cm.doc.height + paddingVert(display);\\r\\n        var atTop = rect.top < snapMargin, atBottom = rect.bottom > docBottom - snapMargin;\\r\\n        if (rect.top < screentop) {\\r\\n            result.scrollTop = atTop ? 0 : rect.top;\\r\\n        } else if (rect.bottom > screentop + screen) {\\r\\n            var newTop = Math.min(rect.top, (atBottom ? docBottom : rect.bottom) - screen);\\r\\n            if (newTop != screentop) { result.scrollTop = newTop; }\\r\\n        }\\r\\n\\r\\n        var screenleft = cm.curOp && cm.curOp.scrollLeft != null ? cm.curOp.scrollLeft : display.scroller.scrollLeft;\\r\\n        var screenw = displayWidth(cm) - (cm.options.fixedGutter ? display.gutters.offsetWidth : 0);\\r\\n        var tooWide = rect.right - rect.left > screenw;\\r\\n        if (tooWide) { rect.right = rect.left + screenw; }\\r\\n        if (rect.left < 10)\\r\\n        { result.scrollLeft = 0; }\\r\\n        else if (rect.left < screenleft)\\r\\n        { result.scrollLeft = Math.max(0, rect.left - (tooWide ? 0 : 10)); }\\r\\n        else if (rect.right > screenw + screenleft - 3)\\r\\n        { result.scrollLeft = rect.right + (tooWide ? 0 : 10) - screenw; }\\r\\n        return result\\r\\n    }\\r\\n\\r\\n    // Store a relative adjustment to the scroll position in the current\\r\\n    // operation (to be applied when the operation finishes).\\r\\n    function addToScrollTop(cm, top) {\\r\\n        if (top == null) { return }\\r\\n        resolveScrollToPos(cm);\\r\\n        cm.curOp.scrollTop = (cm.curOp.scrollTop == null ? cm.doc.scrollTop : cm.curOp.scrollTop) + top;\\r\\n    }\\r\\n\\r\\n    // Make sure that at the end of the operation the current cursor is\\r\\n    // shown.\\r\\n    function ensureCursorVisible(cm) {\\r\\n        resolveScrollToPos(cm);\\r\\n        var cur = cm.getCursor();\\r\\n        cm.curOp.scrollToPos = {from: cur, to: cur, margin: cm.options.cursorScrollMargin};\\r\\n    }\\r\\n\\r\\n    function scrollToCoords(cm, x, y) {\\r\\n        if (x != null || y != null) { resolveScrollToPos(cm); }\\r\\n        if (x != null) { cm.curOp.scrollLeft = x; }\\r\\n        if (y != null) { cm.curOp.scrollTop = y; }\\r\\n    }\\r\\n\\r\\n    function scrollToRange(cm, range$$1) {\\r\\n        resolveScrollToPos(cm);\\r\\n        cm.curOp.scrollToPos = range$$1;\\r\\n    }\\r\\n\\r\\n    // When an operation has its scrollToPos property set, and another\\r\\n    // scroll action is applied before the end of the operation, this\\r\\n    // 'simulates' scrolling that position into view in a cheap way, so\\r\\n    // that the effect of intermediate scroll commands is not ignored.\\r\\n    function resolveScrollToPos(cm) {\\r\\n        var range$$1 = cm.curOp.scrollToPos;\\r\\n        if (range$$1) {\\r\\n            cm.curOp.scrollToPos = null;\\r\\n            var from = estimateCoords(cm, range$$1.from), to = estimateCoords(cm, range$$1.to);\\r\\n            scrollToCoordsRange(cm, from, to, range$$1.margin);\\r\\n        }\\r\\n    }\\r\\n\\r\\n    function scrollToCoordsRange(cm, from, to, margin) {\\r\\n        var sPos = calculateScrollPos(cm, {\\r\\n            left: Math.min(from.left, to.left),\\r\\n            top: Math.min(from.top, to.top) - margin,\\r\\n            right: Math.max(from.right, to.right),\\r\\n            bottom: Math.max(from.bottom, to.bottom) + margin\\r\\n        });\\r\\n        scrollToCoords(cm, sPos.scrollLeft, sPos.scrollTop);\\r\\n    }\\r\\n\\r\\n    // Sync the scrollable area and scrollbars, ensure the viewport\\r\\n    // covers the visible area.\\r\\n    function updateScrollTop(cm, val) {\\r\\n        if (Math.abs(cm.doc.scrollTop - val) < 2) { return }\\r\\n        if (!gecko) { updateDisplaySimple(cm, {top: val}); }\\r\\n        setScrollTop(cm, val, true);\\r\\n        if (gecko) { updateDisplaySimple(cm); }\\r\\n        startWorker(cm, 100);\\r\\n    }\\r\\n\\r\\n    function setScrollTop(cm, val, forceScroll) {\\r\\n        val = Math.min(cm.display.scroller.scrollHeight - cm.display.scroller.clientHeight, val);\\r\\n        if (cm.display.scroller.scrollTop == val && !forceScroll) { return }\\r\\n        cm.doc.scrollTop = val;\\r\\n        cm.display.scrollbars.setScrollTop(val);\\r\\n        if (cm.display.scroller.scrollTop != val) { cm.display.scroller.scrollTop = val; }\\r\\n    }\\r\\n\\r\\n    // Sync scroller and scrollbar, ensure the gutter elements are\\r\\n    // aligned.\\r\\n    function setScrollLeft(cm, val, isScroller, forceScroll) {\\r\\n        val = Math.min(val, cm.display.scroller.scrollWidth - cm.display.scroller.clientWidth);\\r\\n        if ((isScroller ? val == cm.doc.scrollLeft : Math.abs(cm.doc.scrollLeft - val) < 2) && !forceScroll) { return }\\r\\n        cm.doc.scrollLeft = val;\\r\\n        alignHorizontally(cm);\\r\\n        if (cm.display.scroller.scrollLeft != val) { cm.display.scroller.scrollLeft = val; }\\r\\n        cm.display.scrollbars.setScrollLeft(val);\\r\\n    }\\r\\n\\r\\n    // SCROLLBARS\\r\\n\\r\\n    // Prepare DOM reads needed to update the scrollbars. Done in one\\r\\n    // shot to minimize update/measure roundtrips.\\r\\n    function measureForScrollbars(cm) {\\r\\n        var d = cm.display, gutterW = d.gutters.offsetWidth;\\r\\n        var docH = Math.round(cm.doc.height + paddingVert(cm.display));\\r\\n        return {\\r\\n            clientHeight: d.scroller.clientHeight,\\r\\n            viewHeight: d.wrapper.clientHeight,\\r\\n            scrollWidth: d.scroller.scrollWidth, clientWidth: d.scroller.clientWidth,\\r\\n            viewWidth: d.wrapper.clientWidth,\\r\\n            barLeft: cm.options.fixedGutter ? gutterW : 0,\\r\\n            docHeight: docH,\\r\\n            scrollHeight: docH + scrollGap(cm) + d.barHeight,\\r\\n            nativeBarWidth: d.nativeBarWidth,\\r\\n            gutterWidth: gutterW\\r\\n        }\\r\\n    }\\r\\n\\r\\n    var NativeScrollbars = function(place, scroll, cm) {\\r\\n        this.cm = cm;\\r\\n        var vert = this.vert = elt(\\\"div\\\", [elt(\\\"div\\\", null, null, \\\"min-width: 1px\\\")], \\\"CodeMirror-vscrollbar\\\");\\r\\n        var horiz = this.horiz = elt(\\\"div\\\", [elt(\\\"div\\\", null, null, \\\"height: 100%; min-height: 1px\\\")], \\\"CodeMirror-hscrollbar\\\");\\r\\n        vert.tabIndex = horiz.tabIndex = -1;\\r\\n        place(vert); place(horiz);\\r\\n\\r\\n        on(vert, \\\"scroll\\\", function () {\\r\\n            if (vert.clientHeight) { scroll(vert.scrollTop, \\\"vertical\\\"); }\\r\\n        });\\r\\n        on(horiz, \\\"scroll\\\", function () {\\r\\n            if (horiz.clientWidth) { scroll(horiz.scrollLeft, \\\"horizontal\\\"); }\\r\\n        });\\r\\n\\r\\n        this.checkedZeroWidth = false;\\r\\n        // Need to set a minimum width to see the scrollbar on IE7 (but must not set it on IE8).\\r\\n        if (ie && ie_version < 8) { this.horiz.style.minHeight = this.vert.style.minWidth = \\\"18px\\\"; }\\r\\n    };\\r\\n\\r\\n    NativeScrollbars.prototype.update = function (measure) {\\r\\n        var needsH = measure.scrollWidth > measure.clientWidth + 1;\\r\\n        var needsV = measure.scrollHeight > measure.clientHeight + 1;\\r\\n        var sWidth = measure.nativeBarWidth;\\r\\n\\r\\n        if (needsV) {\\r\\n            this.vert.style.display = \\\"block\\\";\\r\\n            this.vert.style.bottom = needsH ? sWidth + \\\"px\\\" : \\\"0\\\";\\r\\n            var totalHeight = measure.viewHeight - (needsH ? sWidth : 0);\\r\\n            // A bug in IE8 can cause this value to be negative, so guard it.\\r\\n            this.vert.firstChild.style.height =\\r\\n                Math.max(0, measure.scrollHeight - measure.clientHeight + totalHeight) + \\\"px\\\";\\r\\n        } else {\\r\\n            this.vert.style.display = \\\"\\\";\\r\\n            this.vert.firstChild.style.height = \\\"0\\\";\\r\\n        }\\r\\n\\r\\n        if (needsH) {\\r\\n            this.horiz.style.display = \\\"block\\\";\\r\\n            this.horiz.style.right = needsV ? sWidth + \\\"px\\\" : \\\"0\\\";\\r\\n            this.horiz.style.left = measure.barLeft + \\\"px\\\";\\r\\n            var totalWidth = measure.viewWidth - measure.barLeft - (needsV ? sWidth : 0);\\r\\n            this.horiz.firstChild.style.width =\\r\\n                Math.max(0, measure.scrollWidth - measure.clientWidth + totalWidth) + \\\"px\\\";\\r\\n        } else {\\r\\n            this.horiz.style.display = \\\"\\\";\\r\\n            this.horiz.firstChild.style.width = \\\"0\\\";\\r\\n        }\\r\\n\\r\\n        if (!this.checkedZeroWidth && measure.clientHeight > 0) {\\r\\n            if (sWidth == 0) { this.zeroWidthHack(); }\\r\\n            this.checkedZeroWidth = true;\\r\\n        }\\r\\n\\r\\n        return {right: needsV ? sWidth : 0, bottom: needsH ? sWidth : 0}\\r\\n    };\\r\\n\\r\\n    NativeScrollbars.prototype.setScrollLeft = function (pos) {\\r\\n        if (this.horiz.scrollLeft != pos) { this.horiz.scrollLeft = pos; }\\r\\n        if (this.disableHoriz) { this.enableZeroWidthBar(this.horiz, this.disableHoriz, \\\"horiz\\\"); }\\r\\n    };\\r\\n\\r\\n    NativeScrollbars.prototype.setScrollTop = function (pos) {\\r\\n        if (this.vert.scrollTop != pos) { this.vert.scrollTop = pos; }\\r\\n        if (this.disableVert) { this.enableZeroWidthBar(this.vert, this.disableVert, \\\"vert\\\"); }\\r\\n    };\\r\\n\\r\\n    NativeScrollbars.prototype.zeroWidthHack = function () {\\r\\n        var w = mac && !mac_geMountainLion ? \\\"12px\\\" : \\\"18px\\\";\\r\\n        this.horiz.style.height = this.vert.style.width = w;\\r\\n        this.horiz.style.pointerEvents = this.vert.style.pointerEvents = \\\"none\\\";\\r\\n        this.disableHoriz = new Delayed;\\r\\n        this.disableVert = new Delayed;\\r\\n    };\\r\\n\\r\\n    NativeScrollbars.prototype.enableZeroWidthBar = function (bar, delay, type) {\\r\\n        bar.style.pointerEvents = \\\"auto\\\";\\r\\n        function maybeDisable() {\\r\\n            // To find out whether the scrollbar is still visible, we\\r\\n            // check whether the element under the pixel in the bottom\\r\\n            // right corner of the scrollbar box is the scrollbar box\\r\\n            // itself (when the bar is still visible) or its filler child\\r\\n            // (when the bar is hidden). If it is still visible, we keep\\r\\n            // it enabled, if it's hidden, we disable pointer events.\\r\\n            var box = bar.getBoundingClientRect();\\r\\n            var elt$$1 = type == \\\"vert\\\" ? document.elementFromPoint(box.right - 1, (box.top + box.bottom) / 2)\\r\\n                : document.elementFromPoint((box.right + box.left) / 2, box.bottom - 1);\\r\\n            if (elt$$1 != bar) { bar.style.pointerEvents = \\\"none\\\"; }\\r\\n            else { delay.set(1000, maybeDisable); }\\r\\n        }\\r\\n        delay.set(1000, maybeDisable);\\r\\n    };\\r\\n\\r\\n    NativeScrollbars.prototype.clear = function () {\\r\\n        var parent = this.horiz.parentNode;\\r\\n        parent.removeChild(this.horiz);\\r\\n        parent.removeChild(this.vert);\\r\\n    };\\r\\n\\r\\n    var NullScrollbars = function () {};\\r\\n\\r\\n    NullScrollbars.prototype.update = function () { return {bottom: 0, right: 0} };\\r\\n    NullScrollbars.prototype.setScrollLeft = function () {};\\r\\n    NullScrollbars.prototype.setScrollTop = function () {};\\r\\n    NullScrollbars.prototype.clear = function () {};\\r\\n\\r\\n    function updateScrollbars(cm, measure) {\\r\\n        if (!measure) { measure = measureForScrollbars(cm); }\\r\\n        var startWidth = cm.display.barWidth, startHeight = cm.display.barHeight;\\r\\n        updateScrollbarsInner(cm, measure);\\r\\n        for (var i = 0; i < 4 && startWidth != cm.display.barWidth || startHeight != cm.display.barHeight; i++) {\\r\\n            if (startWidth != cm.display.barWidth && cm.options.lineWrapping)\\r\\n            { updateHeightsInViewport(cm); }\\r\\n            updateScrollbarsInner(cm, measureForScrollbars(cm));\\r\\n            startWidth = cm.display.barWidth; startHeight = cm.display.barHeight;\\r\\n        }\\r\\n    }\\r\\n\\r\\n    // Re-synchronize the fake scrollbars with the actual size of the\\r\\n    // content.\\r\\n    function updateScrollbarsInner(cm, measure) {\\r\\n        var d = cm.display;\\r\\n        var sizes = d.scrollbars.update(measure);\\r\\n\\r\\n        d.sizer.style.paddingRight = (d.barWidth = sizes.right) + \\\"px\\\";\\r\\n        d.sizer.style.paddingBottom = (d.barHeight = sizes.bottom) + \\\"px\\\";\\r\\n        d.heightForcer.style.borderBottom = sizes.bottom + \\\"px solid transparent\\\";\\r\\n\\r\\n        if (sizes.right && sizes.bottom) {\\r\\n            d.scrollbarFiller.style.display = \\\"block\\\";\\r\\n            d.scrollbarFiller.style.height = sizes.bottom + \\\"px\\\";\\r\\n            d.scrollbarFiller.style.width = sizes.right + \\\"px\\\";\\r\\n        } else { d.scrollbarFiller.style.display = \\\"\\\"; }\\r\\n        if (sizes.bottom && cm.options.coverGutterNextToScrollbar && cm.options.fixedGutter) {\\r\\n            d.gutterFiller.style.display = \\\"block\\\";\\r\\n            d.gutterFiller.style.height = sizes.bottom + \\\"px\\\";\\r\\n            d.gutterFiller.style.width = measure.gutterWidth + \\\"px\\\";\\r\\n        } else { d.gutterFiller.style.display = \\\"\\\"; }\\r\\n    }\\r\\n\\r\\n    var scrollbarModel = {\\\"native\\\": NativeScrollbars, \\\"null\\\": NullScrollbars};\\r\\n\\r\\n    function initScrollbars(cm) {\\r\\n        if (cm.display.scrollbars) {\\r\\n            cm.display.scrollbars.clear();\\r\\n            if (cm.display.scrollbars.addClass)\\r\\n            { rmClass(cm.display.wrapper, cm.display.scrollbars.addClass); }\\r\\n        }\\r\\n\\r\\n        cm.display.scrollbars = new scrollbarModel[cm.options.scrollbarStyle](function (node) {\\r\\n            cm.display.wrapper.insertBefore(node, cm.display.scrollbarFiller);\\r\\n            // Prevent clicks in the scrollbars from killing focus\\r\\n            on(node, \\\"mousedown\\\", function () {\\r\\n                if (cm.state.focused) { setTimeout(function () { return cm.display.input.focus(); }, 0); }\\r\\n            });\\r\\n            node.setAttribute(\\\"cm-not-content\\\", \\\"true\\\");\\r\\n        }, function (pos, axis) {\\r\\n            if (axis == \\\"horizontal\\\") { setScrollLeft(cm, pos); }\\r\\n            else { updateScrollTop(cm, pos); }\\r\\n        }, cm);\\r\\n        if (cm.display.scrollbars.addClass)\\r\\n        { addClass(cm.display.wrapper, cm.display.scrollbars.addClass); }\\r\\n    }\\r\\n\\r\\n    // Operations are used to wrap a series of changes to the editor\\r\\n    // state in such a way that each change won't have to update the\\r\\n    // cursor and display (which would be awkward, slow, and\\r\\n    // error-prone). Instead, display updates are batched and then all\\r\\n    // combined and executed at once.\\r\\n\\r\\n    var nextOpId = 0;\\r\\n    // Start a new operation.\\r\\n    function startOperation(cm) {\\r\\n        cm.curOp = {\\r\\n            cm: cm,\\r\\n            viewChanged: false,      // Flag that indicates that lines might need to be redrawn\\r\\n            startHeight: cm.doc.height, // Used to detect need to update scrollbar\\r\\n            forceUpdate: false,      // Used to force a redraw\\r\\n            updateInput: 0,       // Whether to reset the input textarea\\r\\n            typing: false,           // Whether this reset should be careful to leave existing text (for compositing)\\r\\n            changeObjs: null,        // Accumulated changes, for firing change events\\r\\n            cursorActivityHandlers: null, // Set of handlers to fire cursorActivity on\\r\\n            cursorActivityCalled: 0, // Tracks which cursorActivity handlers have been called already\\r\\n            selectionChanged: false, // Whether the selection needs to be redrawn\\r\\n            updateMaxLine: false,    // Set when the widest line needs to be determined anew\\r\\n            scrollLeft: null, scrollTop: null, // Intermediate scroll position, not pushed to DOM yet\\r\\n            scrollToPos: null,       // Used to scroll to a specific position\\r\\n            focus: false,\\r\\n            id: ++nextOpId           // Unique ID\\r\\n        };\\r\\n        pushOperation(cm.curOp);\\r\\n    }\\r\\n\\r\\n    // Finish an operation, updating the display and signalling delayed events\\r\\n    function endOperation(cm) {\\r\\n        var op = cm.curOp;\\r\\n        if (op) { finishOperation(op, function (group) {\\r\\n            for (var i = 0; i < group.ops.length; i++)\\r\\n            { group.ops[i].cm.curOp = null; }\\r\\n            endOperations(group);\\r\\n        }); }\\r\\n    }\\r\\n\\r\\n    // The DOM updates done when an operation finishes are batched so\\r\\n    // that the minimum number of relayouts are required.\\r\\n    function endOperations(group) {\\r\\n        var ops = group.ops;\\r\\n        for (var i = 0; i < ops.length; i++) // Read DOM\\r\\n        { endOperation_R1(ops[i]); }\\r\\n        for (var i$1 = 0; i$1 < ops.length; i$1++) // Write DOM (maybe)\\r\\n        { endOperation_W1(ops[i$1]); }\\r\\n        for (var i$2 = 0; i$2 < ops.length; i$2++) // Read DOM\\r\\n        { endOperation_R2(ops[i$2]); }\\r\\n        for (var i$3 = 0; i$3 < ops.length; i$3++) // Write DOM (maybe)\\r\\n        { endOperation_W2(ops[i$3]); }\\r\\n        for (var i$4 = 0; i$4 < ops.length; i$4++) // Read DOM\\r\\n        { endOperation_finish(ops[i$4]); }\\r\\n    }\\r\\n\\r\\n    function endOperation_R1(op) {\\r\\n        var cm = op.cm, display = cm.display;\\r\\n        maybeClipScrollbars(cm);\\r\\n        if (op.updateMaxLine) { findMaxLine(cm); }\\r\\n\\r\\n        op.mustUpdate = op.viewChanged || op.forceUpdate || op.scrollTop != null ||\\r\\n            op.scrollToPos && (op.scrollToPos.from.line < display.viewFrom ||\\r\\n                op.scrollToPos.to.line >= display.viewTo) ||\\r\\n            display.maxLineChanged && cm.options.lineWrapping;\\r\\n        op.update = op.mustUpdate &&\\r\\n            new DisplayUpdate(cm, op.mustUpdate && {top: op.scrollTop, ensure: op.scrollToPos}, op.forceUpdate);\\r\\n    }\\r\\n\\r\\n    function endOperation_W1(op) {\\r\\n        op.updatedDisplay = op.mustUpdate && updateDisplayIfNeeded(op.cm, op.update);\\r\\n    }\\r\\n\\r\\n    function endOperation_R2(op) {\\r\\n        var cm = op.cm, display = cm.display;\\r\\n        if (op.updatedDisplay) { updateHeightsInViewport(cm); }\\r\\n\\r\\n        op.barMeasure = measureForScrollbars(cm);\\r\\n\\r\\n        // If the max line changed since it was last measured, measure it,\\r\\n        // and ensure the document's width matches it.\\r\\n        // updateDisplay_W2 will use these properties to do the actual resizing\\r\\n        if (display.maxLineChanged && !cm.options.lineWrapping) {\\r\\n            op.adjustWidthTo = measureChar(cm, display.maxLine, display.maxLine.text.length).left + 3;\\r\\n            cm.display.sizerWidth = op.adjustWidthTo;\\r\\n            op.barMeasure.scrollWidth =\\r\\n                Math.max(display.scroller.clientWidth, display.sizer.offsetLeft + op.adjustWidthTo + scrollGap(cm) + cm.display.barWidth);\\r\\n            op.maxScrollLeft = Math.max(0, display.sizer.offsetLeft + op.adjustWidthTo - displayWidth(cm));\\r\\n        }\\r\\n\\r\\n        if (op.updatedDisplay || op.selectionChanged)\\r\\n        { op.preparedSelection = display.input.prepareSelection(); }\\r\\n    }\\r\\n\\r\\n    function endOperation_W2(op) {\\r\\n        var cm = op.cm;\\r\\n\\r\\n        if (op.adjustWidthTo != null) {\\r\\n            cm.display.sizer.style.minWidth = op.adjustWidthTo + \\\"px\\\";\\r\\n            if (op.maxScrollLeft < cm.doc.scrollLeft)\\r\\n            { setScrollLeft(cm, Math.min(cm.display.scroller.scrollLeft, op.maxScrollLeft), true); }\\r\\n            cm.display.maxLineChanged = false;\\r\\n        }\\r\\n\\r\\n        var takeFocus = op.focus && op.focus == activeElt();\\r\\n        if (op.preparedSelection)\\r\\n        { cm.display.input.showSelection(op.preparedSelection, takeFocus); }\\r\\n        if (op.updatedDisplay || op.startHeight != cm.doc.height)\\r\\n        { updateScrollbars(cm, op.barMeasure); }\\r\\n        if (op.updatedDisplay)\\r\\n        { setDocumentHeight(cm, op.barMeasure); }\\r\\n\\r\\n        if (op.selectionChanged) { restartBlink(cm); }\\r\\n\\r\\n        if (cm.state.focused && op.updateInput)\\r\\n        { cm.display.input.reset(op.typing); }\\r\\n        if (takeFocus) { ensureFocus(op.cm); }\\r\\n    }\\r\\n\\r\\n    function endOperation_finish(op) {\\r\\n        var cm = op.cm, display = cm.display, doc = cm.doc;\\r\\n\\r\\n        if (op.updatedDisplay) { postUpdateDisplay(cm, op.update); }\\r\\n\\r\\n        // Abort mouse wheel delta measurement, when scrolling explicitly\\r\\n        if (display.wheelStartX != null && (op.scrollTop != null || op.scrollLeft != null || op.scrollToPos))\\r\\n        { display.wheelStartX = display.wheelStartY = null; }\\r\\n\\r\\n        // Propagate the scroll position to the actual DOM scroller\\r\\n        if (op.scrollTop != null) { setScrollTop(cm, op.scrollTop, op.forceScroll); }\\r\\n\\r\\n        if (op.scrollLeft != null) { setScrollLeft(cm, op.scrollLeft, true, true); }\\r\\n        // If we need to scroll a specific position into view, do so.\\r\\n        if (op.scrollToPos) {\\r\\n            var rect = scrollPosIntoView(cm, clipPos(doc, op.scrollToPos.from),\\r\\n                clipPos(doc, op.scrollToPos.to), op.scrollToPos.margin);\\r\\n            maybeScrollWindow(cm, rect);\\r\\n        }\\r\\n\\r\\n        // Fire events for markers that are hidden/unidden by editing or\\r\\n        // undoing\\r\\n        var hidden = op.maybeHiddenMarkers, unhidden = op.maybeUnhiddenMarkers;\\r\\n        if (hidden) { for (var i = 0; i < hidden.length; ++i)\\r\\n        { if (!hidden[i].lines.length) { signal(hidden[i], \\\"hide\\\"); } } }\\r\\n        if (unhidden) { for (var i$1 = 0; i$1 < unhidden.length; ++i$1)\\r\\n        { if (unhidden[i$1].lines.length) { signal(unhidden[i$1], \\\"unhide\\\"); } } }\\r\\n\\r\\n        if (display.wrapper.offsetHeight)\\r\\n        { doc.scrollTop = cm.display.scroller.scrollTop; }\\r\\n\\r\\n        // Fire change events, and delayed event handlers\\r\\n        if (op.changeObjs)\\r\\n        { signal(cm, \\\"changes\\\", cm, op.changeObjs); }\\r\\n        if (op.update)\\r\\n        { op.update.finish(); }\\r\\n    }\\r\\n\\r\\n    // Run the given function in an operation\\r\\n    function runInOp(cm, f) {\\r\\n        if (cm.curOp) { return f() }\\r\\n        startOperation(cm);\\r\\n        try { return f() }\\r\\n        finally { endOperation(cm); }\\r\\n    }\\r\\n    // Wraps a function in an operation. Returns the wrapped function.\\r\\n    function operation(cm, f) {\\r\\n        return function() {\\r\\n            if (cm.curOp) { return f.apply(cm, arguments) }\\r\\n            startOperation(cm);\\r\\n            try { return f.apply(cm, arguments) }\\r\\n            finally { endOperation(cm); }\\r\\n        }\\r\\n    }\\r\\n    // Used to add methods to editor and doc instances, wrapping them in\\r\\n    // operations.\\r\\n    function methodOp(f) {\\r\\n        return function() {\\r\\n            if (this.curOp) { return f.apply(this, arguments) }\\r\\n            startOperation(this);\\r\\n            try { return f.apply(this, arguments) }\\r\\n            finally { endOperation(this); }\\r\\n        }\\r\\n    }\\r\\n    function docMethodOp(f) {\\r\\n        return function() {\\r\\n            var cm = this.cm;\\r\\n            if (!cm || cm.curOp) { return f.apply(this, arguments) }\\r\\n            startOperation(cm);\\r\\n            try { return f.apply(this, arguments) }\\r\\n            finally { endOperation(cm); }\\r\\n        }\\r\\n    }\\r\\n\\r\\n    // Updates the display.view data structure for a given change to the\\r\\n    // document. From and to are in pre-change coordinates. Lendiff is\\r\\n    // the amount of lines added or subtracted by the change. This is\\r\\n    // used for changes that span multiple lines, or change the way\\r\\n    // lines are divided into visual lines. regLineChange (below)\\r\\n    // registers single-line changes.\\r\\n    function regChange(cm, from, to, lendiff) {\\r\\n        if (from == null) { from = cm.doc.first; }\\r\\n        if (to == null) { to = cm.doc.first + cm.doc.size; }\\r\\n        if (!lendiff) { lendiff = 0; }\\r\\n\\r\\n        var display = cm.display;\\r\\n        if (lendiff && to < display.viewTo &&\\r\\n            (display.updateLineNumbers == null || display.updateLineNumbers > from))\\r\\n        { display.updateLineNumbers = from; }\\r\\n\\r\\n        cm.curOp.viewChanged = true;\\r\\n\\r\\n        if (from >= display.viewTo) { // Change after\\r\\n            if (sawCollapsedSpans && visualLineNo(cm.doc, from) < display.viewTo)\\r\\n            { resetView(cm); }\\r\\n        } else if (to <= display.viewFrom) { // Change before\\r\\n            if (sawCollapsedSpans && visualLineEndNo(cm.doc, to + lendiff) > display.viewFrom) {\\r\\n                resetView(cm);\\r\\n            } else {\\r\\n                display.viewFrom += lendiff;\\r\\n                display.viewTo += lendiff;\\r\\n            }\\r\\n        } else if (from <= display.viewFrom && to >= display.viewTo) { // Full overlap\\r\\n            resetView(cm);\\r\\n        } else if (from <= display.viewFrom) { // Top overlap\\r\\n            var cut = viewCuttingPoint(cm, to, to + lendiff, 1);\\r\\n            if (cut) {\\r\\n                display.view = display.view.slice(cut.index);\\r\\n                display.viewFrom = cut.lineN;\\r\\n                display.viewTo += lendiff;\\r\\n            } else {\\r\\n                resetView(cm);\\r\\n            }\\r\\n        } else if (to >= display.viewTo) { // Bottom overlap\\r\\n            var cut$1 = viewCuttingPoint(cm, from, from, -1);\\r\\n            if (cut$1) {\\r\\n                display.view = display.view.slice(0, cut$1.index);\\r\\n                display.viewTo = cut$1.lineN;\\r\\n            } else {\\r\\n                resetView(cm);\\r\\n            }\\r\\n        } else { // Gap in the middle\\r\\n            var cutTop = viewCuttingPoint(cm, from, from, -1);\\r\\n            var cutBot = viewCuttingPoint(cm, to, to + lendiff, 1);\\r\\n            if (cutTop && cutBot) {\\r\\n                display.view = display.view.slice(0, cutTop.index)\\r\\n                    .concat(buildViewArray(cm, cutTop.lineN, cutBot.lineN))\\r\\n                    .concat(display.view.slice(cutBot.index));\\r\\n                display.viewTo += lendiff;\\r\\n            } else {\\r\\n                resetView(cm);\\r\\n            }\\r\\n        }\\r\\n\\r\\n        var ext = display.externalMeasured;\\r\\n        if (ext) {\\r\\n            if (to < ext.lineN)\\r\\n            { ext.lineN += lendiff; }\\r\\n            else if (from < ext.lineN + ext.size)\\r\\n            { display.externalMeasured = null; }\\r\\n        }\\r\\n    }\\r\\n\\r\\n    // Register a change to a single line. Type must be one of \\\"text\\\",\\r\\n    // \\\"gutter\\\", \\\"class\\\", \\\"widget\\\"\\r\\n    function regLineChange(cm, line, type) {\\r\\n        cm.curOp.viewChanged = true;\\r\\n        var display = cm.display, ext = cm.display.externalMeasured;\\r\\n        if (ext && line >= ext.lineN && line < ext.lineN + ext.size)\\r\\n        { display.externalMeasured = null; }\\r\\n\\r\\n        if (line < display.viewFrom || line >= display.viewTo) { return }\\r\\n        var lineView = display.view[findViewIndex(cm, line)];\\r\\n        if (lineView.node == null) { return }\\r\\n        var arr = lineView.changes || (lineView.changes = []);\\r\\n        if (indexOf(arr, type) == -1) { arr.push(type); }\\r\\n    }\\r\\n\\r\\n    // Clear the view.\\r\\n    function resetView(cm) {\\r\\n        cm.display.viewFrom = cm.display.viewTo = cm.doc.first;\\r\\n        cm.display.view = [];\\r\\n        cm.display.viewOffset = 0;\\r\\n    }\\r\\n\\r\\n    function viewCuttingPoint(cm, oldN, newN, dir) {\\r\\n        var index = findViewIndex(cm, oldN), diff, view = cm.display.view;\\r\\n        if (!sawCollapsedSpans || newN == cm.doc.first + cm.doc.size)\\r\\n        { return {index: index, lineN: newN} }\\r\\n        var n = cm.display.viewFrom;\\r\\n        for (var i = 0; i < index; i++)\\r\\n        { n += view[i].size; }\\r\\n        if (n != oldN) {\\r\\n            if (dir > 0) {\\r\\n                if (index == view.length - 1) { return null }\\r\\n                diff = (n + view[index].size) - oldN;\\r\\n                index++;\\r\\n            } else {\\r\\n                diff = n - oldN;\\r\\n            }\\r\\n            oldN += diff; newN += diff;\\r\\n        }\\r\\n        while (visualLineNo(cm.doc, newN) != newN) {\\r\\n            if (index == (dir < 0 ? 0 : view.length - 1)) { return null }\\r\\n            newN += dir * view[index - (dir < 0 ? 1 : 0)].size;\\r\\n            index += dir;\\r\\n        }\\r\\n        return {index: index, lineN: newN}\\r\\n    }\\r\\n\\r\\n    // Force the view to cover a given range, adding empty view element\\r\\n    // or clipping off existing ones as needed.\\r\\n    function adjustView(cm, from, to) {\\r\\n        var display = cm.display, view = display.view;\\r\\n        if (view.length == 0 || from >= display.viewTo || to <= display.viewFrom) {\\r\\n            display.view = buildViewArray(cm, from, to);\\r\\n            display.viewFrom = from;\\r\\n        } else {\\r\\n            if (display.viewFrom > from)\\r\\n            { display.view = buildViewArray(cm, from, display.viewFrom).concat(display.view); }\\r\\n            else if (display.viewFrom < from)\\r\\n            { display.view = display.view.slice(findViewIndex(cm, from)); }\\r\\n            display.viewFrom = from;\\r\\n            if (display.viewTo < to)\\r\\n            { display.view = display.view.concat(buildViewArray(cm, display.viewTo, to)); }\\r\\n            else if (display.viewTo > to)\\r\\n            { display.view = display.view.slice(0, findViewIndex(cm, to)); }\\r\\n        }\\r\\n        display.viewTo = to;\\r\\n    }\\r\\n\\r\\n    // Count the number of lines in the view whose DOM representation is\\r\\n    // out of date (or nonexistent).\\r\\n    function countDirtyView(cm) {\\r\\n        var view = cm.display.view, dirty = 0;\\r\\n        for (var i = 0; i < view.length; i++) {\\r\\n            var lineView = view[i];\\r\\n            if (!lineView.hidden && (!lineView.node || lineView.changes)) { ++dirty; }\\r\\n        }\\r\\n        return dirty\\r\\n    }\\r\\n\\r\\n    // HIGHLIGHT WORKER\\r\\n\\r\\n    function startWorker(cm, time) {\\r\\n        if (cm.doc.highlightFrontier < cm.display.viewTo)\\r\\n        { cm.state.highlight.set(time, bind(highlightWorker, cm)); }\\r\\n    }\\r\\n\\r\\n    function highlightWorker(cm) {\\r\\n        var doc = cm.doc;\\r\\n        if (doc.highlightFrontier >= cm.display.viewTo) { return }\\r\\n        var end = +new Date + cm.options.workTime;\\r\\n        var context = getContextBefore(cm, doc.highlightFrontier);\\r\\n        var changedLines = [];\\r\\n\\r\\n        doc.iter(context.line, Math.min(doc.first + doc.size, cm.display.viewTo + 500), function (line) {\\r\\n            if (context.line >= cm.display.viewFrom) { // Visible\\r\\n                var oldStyles = line.styles;\\r\\n                var resetState = line.text.length > cm.options.maxHighlightLength ? copyState(doc.mode, context.state) : null;\\r\\n                var highlighted = highlightLine(cm, line, context, true);\\r\\n                if (resetState) { context.state = resetState; }\\r\\n                line.styles = highlighted.styles;\\r\\n                var oldCls = line.styleClasses, newCls = highlighted.classes;\\r\\n                if (newCls) { line.styleClasses = newCls; }\\r\\n                else if (oldCls) { line.styleClasses = null; }\\r\\n                var ischange = !oldStyles || oldStyles.length != line.styles.length ||\\r\\n                    oldCls != newCls && (!oldCls || !newCls || oldCls.bgClass != newCls.bgClass || oldCls.textClass != newCls.textClass);\\r\\n                for (var i = 0; !ischange && i < oldStyles.length; ++i) { ischange = oldStyles[i] != line.styles[i]; }\\r\\n                if (ischange) { changedLines.push(context.line); }\\r\\n                line.stateAfter = context.save();\\r\\n                context.nextLine();\\r\\n            } else {\\r\\n                if (line.text.length <= cm.options.maxHighlightLength)\\r\\n                { processLine(cm, line.text, context); }\\r\\n                line.stateAfter = context.line % 5 == 0 ? context.save() : null;\\r\\n                context.nextLine();\\r\\n            }\\r\\n            if (+new Date > end) {\\r\\n                startWorker(cm, cm.options.workDelay);\\r\\n                return true\\r\\n            }\\r\\n        });\\r\\n        doc.highlightFrontier = context.line;\\r\\n        doc.modeFrontier = Math.max(doc.modeFrontier, context.line);\\r\\n        if (changedLines.length) { runInOp(cm, function () {\\r\\n            for (var i = 0; i < changedLines.length; i++)\\r\\n            { regLineChange(cm, changedLines[i], \\\"text\\\"); }\\r\\n        }); }\\r\\n    }\\r\\n\\r\\n    // DISPLAY DRAWING\\r\\n\\r\\n    var DisplayUpdate = function(cm, viewport, force) {\\r\\n        var display = cm.display;\\r\\n\\r\\n        this.viewport = viewport;\\r\\n        // Store some values that we'll need later (but don't want to force a relayout for)\\r\\n        this.visible = visibleLines(display, cm.doc, viewport);\\r\\n        this.editorIsHidden = !display.wrapper.offsetWidth;\\r\\n        this.wrapperHeight = display.wrapper.clientHeight;\\r\\n        this.wrapperWidth = display.wrapper.clientWidth;\\r\\n        this.oldDisplayWidth = displayWidth(cm);\\r\\n        this.force = force;\\r\\n        this.dims = getDimensions(cm);\\r\\n        this.events = [];\\r\\n    };\\r\\n\\r\\n    DisplayUpdate.prototype.signal = function (emitter, type) {\\r\\n        if (hasHandler(emitter, type))\\r\\n        { this.events.push(arguments); }\\r\\n    };\\r\\n    DisplayUpdate.prototype.finish = function () {\\r\\n        for (var i = 0; i < this.events.length; i++)\\r\\n        { signal.apply(null, this.events[i]); }\\r\\n    };\\r\\n\\r\\n    function maybeClipScrollbars(cm) {\\r\\n        var display = cm.display;\\r\\n        if (!display.scrollbarsClipped && display.scroller.offsetWidth) {\\r\\n            display.nativeBarWidth = display.scroller.offsetWidth - display.scroller.clientWidth;\\r\\n            display.heightForcer.style.height = scrollGap(cm) + \\\"px\\\";\\r\\n            display.sizer.style.marginBottom = -display.nativeBarWidth + \\\"px\\\";\\r\\n            display.sizer.style.borderRightWidth = scrollGap(cm) + \\\"px\\\";\\r\\n            display.scrollbarsClipped = true;\\r\\n        }\\r\\n    }\\r\\n\\r\\n    function selectionSnapshot(cm) {\\r\\n        if (cm.hasFocus()) { return null }\\r\\n        var active = activeElt();\\r\\n        if (!active || !contains(cm.display.lineDiv, active)) { return null }\\r\\n        var result = {activeElt: active};\\r\\n        if (window.getSelection) {\\r\\n            var sel = window.getSelection();\\r\\n            if (sel.anchorNode && sel.extend && contains(cm.display.lineDiv, sel.anchorNode)) {\\r\\n                result.anchorNode = sel.anchorNode;\\r\\n                result.anchorOffset = sel.anchorOffset;\\r\\n                result.focusNode = sel.focusNode;\\r\\n                result.focusOffset = sel.focusOffset;\\r\\n            }\\r\\n        }\\r\\n        return result\\r\\n    }\\r\\n\\r\\n    function restoreSelection(snapshot) {\\r\\n        if (!snapshot || !snapshot.activeElt || snapshot.activeElt == activeElt()) { return }\\r\\n        snapshot.activeElt.focus();\\r\\n        if (snapshot.anchorNode && contains(document.body, snapshot.anchorNode) && contains(document.body, snapshot.focusNode)) {\\r\\n            var sel = window.getSelection(), range$$1 = document.createRange();\\r\\n            range$$1.setEnd(snapshot.anchorNode, snapshot.anchorOffset);\\r\\n            range$$1.collapse(false);\\r\\n            sel.removeAllRanges();\\r\\n            sel.addRange(range$$1);\\r\\n            sel.extend(snapshot.focusNode, snapshot.focusOffset);\\r\\n        }\\r\\n    }\\r\\n\\r\\n    // Does the actual updating of the line display. Bails out\\r\\n    // (returning false) when there is nothing to be done and forced is\\r\\n    // false.\\r\\n    function updateDisplayIfNeeded(cm, update) {\\r\\n        var display = cm.display, doc = cm.doc;\\r\\n\\r\\n        if (update.editorIsHidden) {\\r\\n            resetView(cm);\\r\\n            return false\\r\\n        }\\r\\n\\r\\n        // Bail out if the visible area is already rendered and nothing changed.\\r\\n        if (!update.force &&\\r\\n            update.visible.from >= display.viewFrom && update.visible.to <= display.viewTo &&\\r\\n            (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo) &&\\r\\n            display.renderedView == display.view && countDirtyView(cm) == 0)\\r\\n        { return false }\\r\\n\\r\\n        if (maybeUpdateLineNumberWidth(cm)) {\\r\\n            resetView(cm);\\r\\n            update.dims = getDimensions(cm);\\r\\n        }\\r\\n\\r\\n        // Compute a suitable new viewport (from & to)\\r\\n        var end = doc.first + doc.size;\\r\\n        var from = Math.max(update.visible.from - cm.options.viewportMargin, doc.first);\\r\\n        var to = Math.min(end, update.visible.to + cm.options.viewportMargin);\\r\\n        if (display.viewFrom < from && from - display.viewFrom < 20) { from = Math.max(doc.first, display.viewFrom); }\\r\\n        if (display.viewTo > to && display.viewTo - to < 20) { to = Math.min(end, display.viewTo); }\\r\\n        if (sawCollapsedSpans) {\\r\\n            from = visualLineNo(cm.doc, from);\\r\\n            to = visualLineEndNo(cm.doc, to);\\r\\n        }\\r\\n\\r\\n        var different = from != display.viewFrom || to != display.viewTo ||\\r\\n            display.lastWrapHeight != update.wrapperHeight || display.lastWrapWidth != update.wrapperWidth;\\r\\n        adjustView(cm, from, to);\\r\\n\\r\\n        display.viewOffset = heightAtLine(getLine(cm.doc, display.viewFrom));\\r\\n        // Position the mover div to align with the current scroll position\\r\\n        cm.display.mover.style.top = display.viewOffset + \\\"px\\\";\\r\\n\\r\\n        var toUpdate = countDirtyView(cm);\\r\\n        if (!different && toUpdate == 0 && !update.force && display.renderedView == display.view &&\\r\\n            (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo))\\r\\n        { return false }\\r\\n\\r\\n        // For big changes, we hide the enclosing element during the\\r\\n        // update, since that speeds up the operations on most browsers.\\r\\n        var selSnapshot = selectionSnapshot(cm);\\r\\n        if (toUpdate > 4) { display.lineDiv.style.display = \\\"none\\\"; }\\r\\n        patchDisplay(cm, display.updateLineNumbers, update.dims);\\r\\n        if (toUpdate > 4) { display.lineDiv.style.display = \\\"\\\"; }\\r\\n        display.renderedView = display.view;\\r\\n        // There might have been a widget with a focused element that got\\r\\n        // hidden or updated, if so re-focus it.\\r\\n        restoreSelection(selSnapshot);\\r\\n\\r\\n        // Prevent selection and cursors from interfering with the scroll\\r\\n        // width and height.\\r\\n        removeChildren(display.cursorDiv);\\r\\n        removeChildren(display.selectionDiv);\\r\\n        display.gutters.style.height = display.sizer.style.minHeight = 0;\\r\\n\\r\\n        if (different) {\\r\\n            display.lastWrapHeight = update.wrapperHeight;\\r\\n            display.lastWrapWidth = update.wrapperWidth;\\r\\n            startWorker(cm, 400);\\r\\n        }\\r\\n\\r\\n        display.updateLineNumbers = null;\\r\\n\\r\\n        return true\\r\\n    }\\r\\n\\r\\n    function postUpdateDisplay(cm, update) {\\r\\n        var viewport = update.viewport;\\r\\n\\r\\n        for (var first = true;; first = false) {\\r\\n            if (!first || !cm.options.lineWrapping || update.oldDisplayWidth == displayWidth(cm)) {\\r\\n                // Clip forced viewport to actual scrollable area.\\r\\n                if (viewport && viewport.top != null)\\r\\n                { viewport = {top: Math.min(cm.doc.height + paddingVert(cm.display) - displayHeight(cm), viewport.top)}; }\\r\\n                // Updated line heights might result in the drawn area not\\r\\n                // actually covering the viewport. Keep looping until it does.\\r\\n                update.visible = visibleLines(cm.display, cm.doc, viewport);\\r\\n                if (update.visible.from >= cm.display.viewFrom && update.visible.to <= cm.display.viewTo)\\r\\n                { break }\\r\\n            }\\r\\n            if (!updateDisplayIfNeeded(cm, update)) { break }\\r\\n            updateHeightsInViewport(cm);\\r\\n            var barMeasure = measureForScrollbars(cm);\\r\\n            updateSelection(cm);\\r\\n            updateScrollbars(cm, barMeasure);\\r\\n            setDocumentHeight(cm, barMeasure);\\r\\n            update.force = false;\\r\\n        }\\r\\n\\r\\n        update.signal(cm, \\\"update\\\", cm);\\r\\n        if (cm.display.viewFrom != cm.display.reportedViewFrom || cm.display.viewTo != cm.display.reportedViewTo) {\\r\\n            update.signal(cm, \\\"viewportChange\\\", cm, cm.display.viewFrom, cm.display.viewTo);\\r\\n            cm.display.reportedViewFrom = cm.display.viewFrom; cm.display.reportedViewTo = cm.display.viewTo;\\r\\n        }\\r\\n    }\\r\\n\\r\\n    function updateDisplaySimple(cm, viewport) {\\r\\n        var update = new DisplayUpdate(cm, viewport);\\r\\n        if (updateDisplayIfNeeded(cm, update)) {\\r\\n            updateHeightsInViewport(cm);\\r\\n            postUpdateDisplay(cm, update);\\r\\n            var barMeasure = measureForScrollbars(cm);\\r\\n            updateSelection(cm);\\r\\n            updateScrollbars(cm, barMeasure);\\r\\n            setDocumentHeight(cm, barMeasure);\\r\\n            update.finish();\\r\\n        }\\r\\n    }\\r\\n\\r\\n    // Sync the actual display DOM structure with display.view, removing\\r\\n    // nodes for lines that are no longer in view, and creating the ones\\r\\n    // that are not there yet, and updating the ones that are out of\\r\\n    // date.\\r\\n    function patchDisplay(cm, updateNumbersFrom, dims) {\\r\\n        var display = cm.display, lineNumbers = cm.options.lineNumbers;\\r\\n        var container = display.lineDiv, cur = container.firstChild;\\r\\n\\r\\n        function rm(node) {\\r\\n            var next = node.nextSibling;\\r\\n            // Works around a throw-scroll bug in OS X Webkit\\r\\n            if (webkit && mac && cm.display.currentWheelTarget == node)\\r\\n            { node.style.display = \\\"none\\\"; }\\r\\n            else\\r\\n            { node.parentNode.removeChild(node); }\\r\\n            return next\\r\\n        }\\r\\n\\r\\n        var view = display.view, lineN = display.viewFrom;\\r\\n        // Loop over the elements in the view, syncing cur (the DOM nodes\\r\\n        // in display.lineDiv) with the view as we go.\\r\\n        for (var i = 0; i < view.length; i++) {\\r\\n            var lineView = view[i];\\r\\n            if (lineView.hidden) ; else if (!lineView.node || lineView.node.parentNode != container) { // Not drawn yet\\r\\n                var node = buildLineElement(cm, lineView, lineN, dims);\\r\\n                container.insertBefore(node, cur);\\r\\n            } else { // Already drawn\\r\\n                while (cur != lineView.node) { cur = rm(cur); }\\r\\n                var updateNumber = lineNumbers && updateNumbersFrom != null &&\\r\\n                    updateNumbersFrom <= lineN && lineView.lineNumber;\\r\\n                if (lineView.changes) {\\r\\n                    if (indexOf(lineView.changes, \\\"gutter\\\") > -1) { updateNumber = false; }\\r\\n                    updateLineForChanges(cm, lineView, lineN, dims);\\r\\n                }\\r\\n                if (updateNumber) {\\r\\n                    removeChildren(lineView.lineNumber);\\r\\n                    lineView.lineNumber.appendChild(document.createTextNode(lineNumberFor(cm.options, lineN)));\\r\\n                }\\r\\n                cur = lineView.node.nextSibling;\\r\\n            }\\r\\n            lineN += lineView.size;\\r\\n        }\\r\\n        while (cur) { cur = rm(cur); }\\r\\n    }\\r\\n\\r\\n    function updateGutterSpace(cm) {\\r\\n        var width = cm.display.gutters.offsetWidth;\\r\\n        cm.display.sizer.style.marginLeft = width + \\\"px\\\";\\r\\n    }\\r\\n\\r\\n    function setDocumentHeight(cm, measure) {\\r\\n        cm.display.sizer.style.minHeight = measure.docHeight + \\\"px\\\";\\r\\n        cm.display.heightForcer.style.top = measure.docHeight + \\\"px\\\";\\r\\n        cm.display.gutters.style.height = (measure.docHeight + cm.display.barHeight + scrollGap(cm)) + \\\"px\\\";\\r\\n    }\\r\\n\\r\\n    // Rebuild the gutter elements, ensure the margin to the left of the\\r\\n    // code matches their width.\\r\\n    function updateGutters(cm) {\\r\\n        var gutters = cm.display.gutters, specs = cm.options.gutters;\\r\\n        removeChildren(gutters);\\r\\n        var i = 0;\\r\\n        for (; i < specs.length; ++i) {\\r\\n            var gutterClass = specs[i];\\r\\n            var gElt = gutters.appendChild(elt(\\\"div\\\", null, \\\"CodeMirror-gutter \\\" + gutterClass));\\r\\n            if (gutterClass == \\\"CodeMirror-linenumbers\\\") {\\r\\n                cm.display.lineGutter = gElt;\\r\\n                gElt.style.width = (cm.display.lineNumWidth || 1) + \\\"px\\\";\\r\\n            }\\r\\n        }\\r\\n        gutters.style.display = i ? \\\"\\\" : \\\"none\\\";\\r\\n        updateGutterSpace(cm);\\r\\n    }\\r\\n\\r\\n    // Make sure the gutters options contains the element\\r\\n    // \\\"CodeMirror-linenumbers\\\" when the lineNumbers option is true.\\r\\n    function setGuttersForLineNumbers(options) {\\r\\n        var found = indexOf(options.gutters, \\\"CodeMirror-linenumbers\\\");\\r\\n        if (found == -1 && options.lineNumbers) {\\r\\n            options.gutters = options.gutters.concat([\\\"CodeMirror-linenumbers\\\"]);\\r\\n        } else if (found > -1 && !options.lineNumbers) {\\r\\n            options.gutters = options.gutters.slice(0);\\r\\n            options.gutters.splice(found, 1);\\r\\n        }\\r\\n    }\\r\\n\\r\\n    // Since the delta values reported on mouse wheel events are\\r\\n    // unstandardized between browsers and even browser versions, and\\r\\n    // generally horribly unpredictable, this code starts by measuring\\r\\n    // the scroll effect that the first few mouse wheel events have,\\r\\n    // and, from that, detects the way it can convert deltas to pixel\\r\\n    // offsets afterwards.\\r\\n    //\\r\\n    // The reason we want to know the amount a wheel event will scroll\\r\\n    // is that it gives us a chance to update the display before the\\r\\n    // actual scrolling happens, reducing flickering.\\r\\n\\r\\n    var wheelSamples = 0, wheelPixelsPerUnit = null;\\r\\n    // Fill in a browser-detected starting value on browsers where we\\r\\n    // know one. These don't have to be accurate -- the result of them\\r\\n    // being wrong would just be a slight flicker on the first wheel\\r\\n    // scroll (if it is large enough).\\r\\n    if (ie) { wheelPixelsPerUnit = -.53; }\\r\\n    else if (gecko) { wheelPixelsPerUnit = 15; }\\r\\n    else if (chrome) { wheelPixelsPerUnit = -.7; }\\r\\n    else if (safari) { wheelPixelsPerUnit = -1/3; }\\r\\n\\r\\n    function wheelEventDelta(e) {\\r\\n        var dx = e.wheelDeltaX, dy = e.wheelDeltaY;\\r\\n        if (dx == null && e.detail && e.axis == e.HORIZONTAL_AXIS) { dx = e.detail; }\\r\\n        if (dy == null && e.detail && e.axis == e.VERTICAL_AXIS) { dy = e.detail; }\\r\\n        else if (dy == null) { dy = e.wheelDelta; }\\r\\n        return {x: dx, y: dy}\\r\\n    }\\r\\n    function wheelEventPixels(e) {\\r\\n        var delta = wheelEventDelta(e);\\r\\n        delta.x *= wheelPixelsPerUnit;\\r\\n        delta.y *= wheelPixelsPerUnit;\\r\\n        return delta\\r\\n    }\\r\\n\\r\\n    function onScrollWheel(cm, e) {\\r\\n        var delta = wheelEventDelta(e), dx = delta.x, dy = delta.y;\\r\\n\\r\\n        var display = cm.display, scroll = display.scroller;\\r\\n        // Quit if there's nothing to scroll here\\r\\n        var canScrollX = scroll.scrollWidth > scroll.clientWidth;\\r\\n        var canScrollY = scroll.scrollHeight > scroll.clientHeight;\\r\\n        if (!(dx && canScrollX || dy && canScrollY)) { return }\\r\\n\\r\\n        // Webkit browsers on OS X abort momentum scrolls when the target\\r\\n        // of the scroll event is removed from the scrollable element.\\r\\n        // This hack (see related code in patchDisplay) makes sure the\\r\\n        // element is kept around.\\r\\n        if (dy && mac && webkit) {\\r\\n            outer: for (var cur = e.target, view = display.view; cur != scroll; cur = cur.parentNode) {\\r\\n                for (var i = 0; i < view.length; i++) {\\r\\n                    if (view[i].node == cur) {\\r\\n                        cm.display.currentWheelTarget = cur;\\r\\n                        break outer\\r\\n                    }\\r\\n                }\\r\\n            }\\r\\n        }\\r\\n\\r\\n        // On some browsers, horizontal scrolling will cause redraws to\\r\\n        // happen before the gutter has been realigned, causing it to\\r\\n        // wriggle around in a most unseemly way. When we have an\\r\\n        // estimated pixels/delta value, we just handle horizontal\\r\\n        // scrolling entirely here. It'll be slightly off from native, but\\r\\n        // better than glitching out.\\r\\n        if (dx && !gecko && !presto && wheelPixelsPerUnit != null) {\\r\\n            if (dy && canScrollY)\\r\\n            { updateScrollTop(cm, Math.max(0, scroll.scrollTop + dy * wheelPixelsPerUnit)); }\\r\\n            setScrollLeft(cm, Math.max(0, scroll.scrollLeft + dx * wheelPixelsPerUnit));\\r\\n            // Only prevent default scrolling if vertical scrolling is\\r\\n            // actually possible. Otherwise, it causes vertical scroll\\r\\n            // jitter on OSX trackpads when deltaX is small and deltaY\\r\\n            // is large (issue #3579)\\r\\n            if (!dy || (dy && canScrollY))\\r\\n            { e_preventDefault(e); }\\r\\n            display.wheelStartX = null; // Abort measurement, if in progress\\r\\n            return\\r\\n        }\\r\\n\\r\\n        // 'Project' the visible viewport to cover the area that is being\\r\\n        // scrolled into view (if we know enough to estimate it).\\r\\n        if (dy && wheelPixelsPerUnit != null) {\\r\\n            var pixels = dy * wheelPixelsPerUnit;\\r\\n            var top = cm.doc.scrollTop, bot = top + display.wrapper.clientHeight;\\r\\n            if (pixels < 0) { top = Math.max(0, top + pixels - 50); }\\r\\n            else { bot = Math.min(cm.doc.height, bot + pixels + 50); }\\r\\n            updateDisplaySimple(cm, {top: top, bottom: bot});\\r\\n        }\\r\\n\\r\\n        if (wheelSamples < 20) {\\r\\n            if (display.wheelStartX == null) {\\r\\n                display.wheelStartX = scroll.scrollLeft; display.wheelStartY = scroll.scrollTop;\\r\\n                display.wheelDX = dx; display.wheelDY = dy;\\r\\n                setTimeout(function () {\\r\\n                    if (display.wheelStartX == null) { return }\\r\\n                    var movedX = scroll.scrollLeft - display.wheelStartX;\\r\\n                    var movedY = scroll.scrollTop - display.wheelStartY;\\r\\n                    var sample = (movedY && display.wheelDY && movedY / display.wheelDY) ||\\r\\n                        (movedX && display.wheelDX && movedX / display.wheelDX);\\r\\n                    display.wheelStartX = display.wheelStartY = null;\\r\\n                    if (!sample) { return }\\r\\n                    wheelPixelsPerUnit = (wheelPixelsPerUnit * wheelSamples + sample) / (wheelSamples + 1);\\r\\n                    ++wheelSamples;\\r\\n                }, 200);\\r\\n            } else {\\r\\n                display.wheelDX += dx; display.wheelDY += dy;\\r\\n            }\\r\\n        }\\r\\n    }\\r\\n\\r\\n    // Selection objects are immutable. A new one is created every time\\r\\n    // the selection changes. A selection is one or more non-overlapping\\r\\n    // (and non-touching) ranges, sorted, and an integer that indicates\\r\\n    // which one is the primary selection (the one that's scrolled into\\r\\n    // view, that getCursor returns, etc).\\r\\n    var Selection = function(ranges, primIndex) {\\r\\n        this.ranges = ranges;\\r\\n        this.primIndex = primIndex;\\r\\n    };\\r\\n\\r\\n    Selection.prototype.primary = function () { return this.ranges[this.primIndex] };\\r\\n\\r\\n    Selection.prototype.equals = function (other) {\\r\\n        if (other == this) { return true }\\r\\n        if (other.primIndex != this.primIndex || other.ranges.length != this.ranges.length) { return false }\\r\\n        for (var i = 0; i < this.ranges.length; i++) {\\r\\n            var here = this.ranges[i], there = other.ranges[i];\\r\\n            if (!equalCursorPos(here.anchor, there.anchor) || !equalCursorPos(here.head, there.head)) { return false }\\r\\n        }\\r\\n        return true\\r\\n    };\\r\\n\\r\\n    Selection.prototype.deepCopy = function () {\\r\\n        var out = [];\\r\\n        for (var i = 0; i < this.ranges.length; i++)\\r\\n        { out[i] = new Range(copyPos(this.ranges[i].anchor), copyPos(this.ranges[i].head)); }\\r\\n        return new Selection(out, this.primIndex)\\r\\n    };\\r\\n\\r\\n    Selection.prototype.somethingSelected = function () {\\r\\n        for (var i = 0; i < this.ranges.length; i++)\\r\\n        { if (!this.ranges[i].empty()) { return true } }\\r\\n        return false\\r\\n    };\\r\\n\\r\\n    Selection.prototype.contains = function (pos, end) {\\r\\n        if (!end) { end = pos; }\\r\\n        for (var i = 0; i < this.ranges.length; i++) {\\r\\n            var range = this.ranges[i];\\r\\n            if (cmp(end, range.from()) >= 0 && cmp(pos, range.to()) <= 0)\\r\\n            { return i }\\r\\n        }\\r\\n        return -1\\r\\n    };\\r\\n\\r\\n    var Range = function(anchor, head) {\\r\\n        this.anchor = anchor; this.head = head;\\r\\n    };\\r\\n\\r\\n    Range.prototype.from = function () { return minPos(this.anchor, this.head) };\\r\\n    Range.prototype.to = function () { return maxPos(this.anchor, this.head) };\\r\\n    Range.prototype.empty = function () { return this.head.line == this.anchor.line && this.head.ch == this.anchor.ch };\\r\\n\\r\\n    // Take an unsorted, potentially overlapping set of ranges, and\\r\\n    // build a selection out of it. 'Consumes' ranges array (modifying\\r\\n    // it).\\r\\n    function normalizeSelection(cm, ranges, primIndex) {\\r\\n        var mayTouch = cm && cm.options.selectionsMayTouch;\\r\\n        var prim = ranges[primIndex];\\r\\n        ranges.sort(function (a, b) { return cmp(a.from(), b.from()); });\\r\\n        primIndex = indexOf(ranges, prim);\\r\\n        for (var i = 1; i < ranges.length; i++) {\\r\\n            var cur = ranges[i], prev = ranges[i - 1];\\r\\n            var diff = cmp(prev.to(), cur.from());\\r\\n            if (mayTouch && !cur.empty() ? diff > 0 : diff >= 0) {\\r\\n                var from = minPos(prev.from(), cur.from()), to = maxPos(prev.to(), cur.to());\\r\\n                var inv = prev.empty() ? cur.from() == cur.head : prev.from() == prev.head;\\r\\n                if (i <= primIndex) { --primIndex; }\\r\\n                ranges.splice(--i, 2, new Range(inv ? to : from, inv ? from : to));\\r\\n            }\\r\\n        }\\r\\n        return new Selection(ranges, primIndex)\\r\\n    }\\r\\n\\r\\n    function simpleSelection(anchor, head) {\\r\\n        return new Selection([new Range(anchor, head || anchor)], 0)\\r\\n    }\\r\\n\\r\\n    // Compute the position of the end of a change (its 'to' property\\r\\n    // refers to the pre-change end).\\r\\n    function changeEnd(change) {\\r\\n        if (!change.text) { return change.to }\\r\\n        return Pos(change.from.line + change.text.length - 1,\\r\\n            lst(change.text).length + (change.text.length == 1 ? change.from.ch : 0))\\r\\n    }\\r\\n\\r\\n    // Adjust a position to refer to the post-change position of the\\r\\n    // same text, or the end of the change if the change covers it.\\r\\n    function adjustForChange(pos, change) {\\r\\n        if (cmp(pos, change.from) < 0) { return pos }\\r\\n        if (cmp(pos, change.to) <= 0) { return changeEnd(change) }\\r\\n\\r\\n        var line = pos.line + change.text.length - (change.to.line - change.from.line) - 1, ch = pos.ch;\\r\\n        if (pos.line == change.to.line) { ch += changeEnd(change).ch - change.to.ch; }\\r\\n        return Pos(line, ch)\\r\\n    }\\r\\n\\r\\n    function computeSelAfterChange(doc, change) {\\r\\n        var out = [];\\r\\n        for (var i = 0; i < doc.sel.ranges.length; i++) {\\r\\n            var range = doc.sel.ranges[i];\\r\\n            out.push(new Range(adjustForChange(range.anchor, change),\\r\\n                adjustForChange(range.head, change)));\\r\\n        }\\r\\n        return normalizeSelection(doc.cm, out, doc.sel.primIndex)\\r\\n    }\\r\\n\\r\\n    function offsetPos(pos, old, nw) {\\r\\n        if (pos.line == old.line)\\r\\n        { return Pos(nw.line, pos.ch - old.ch + nw.ch) }\\r\\n        else\\r\\n        { return Pos(nw.line + (pos.line - old.line), pos.ch) }\\r\\n    }\\r\\n\\r\\n    // Used by replaceSelections to allow moving the selection to the\\r\\n    // start or around the replaced test. Hint may be \\\"start\\\" or \\\"around\\\".\\r\\n    function computeReplacedSel(doc, changes, hint) {\\r\\n        var out = [];\\r\\n        var oldPrev = Pos(doc.first, 0), newPrev = oldPrev;\\r\\n        for (var i = 0; i < changes.length; i++) {\\r\\n            var change = changes[i];\\r\\n            var from = offsetPos(change.from, oldPrev, newPrev);\\r\\n            var to = offsetPos(changeEnd(change), oldPrev, newPrev);\\r\\n            oldPrev = change.to;\\r\\n            newPrev = to;\\r\\n            if (hint == \\\"around\\\") {\\r\\n                var range = doc.sel.ranges[i], inv = cmp(range.head, range.anchor) < 0;\\r\\n                out[i] = new Range(inv ? to : from, inv ? from : to);\\r\\n            } else {\\r\\n                out[i] = new Range(from, from);\\r\\n            }\\r\\n        }\\r\\n        return new Selection(out, doc.sel.primIndex)\\r\\n    }\\r\\n\\r\\n    // Used to get the editor into a consistent state again when options change.\\r\\n\\r\\n    function loadMode(cm) {\\r\\n        cm.doc.mode = getMode(cm.options, cm.doc.modeOption);\\r\\n        resetModeState(cm);\\r\\n    }\\r\\n\\r\\n    function resetModeState(cm) {\\r\\n        cm.doc.iter(function (line) {\\r\\n            if (line.stateAfter) { line.stateAfter = null; }\\r\\n            if (line.styles) { line.styles = null; }\\r\\n        });\\r\\n        cm.doc.modeFrontier = cm.doc.highlightFrontier = cm.doc.first;\\r\\n        startWorker(cm, 100);\\r\\n        cm.state.modeGen++;\\r\\n        if (cm.curOp) { regChange(cm); }\\r\\n    }\\r\\n\\r\\n    // DOCUMENT DATA STRUCTURE\\r\\n\\r\\n    // By default, updates that start and end at the beginning of a line\\r\\n    // are treated specially, in order to make the association of line\\r\\n    // widgets and marker elements with the text behave more intuitive.\\r\\n    function isWholeLineUpdate(doc, change) {\\r\\n        return change.from.ch == 0 && change.to.ch == 0 && lst(change.text) == \\\"\\\" &&\\r\\n            (!doc.cm || doc.cm.options.wholeLineUpdateBefore)\\r\\n    }\\r\\n\\r\\n    // Perform a change on the document data structure.\\r\\n    function updateDoc(doc, change, markedSpans, estimateHeight$$1) {\\r\\n        function spansFor(n) {return markedSpans ? markedSpans[n] : null}\\r\\n        function update(line, text, spans) {\\r\\n            updateLine(line, text, spans, estimateHeight$$1);\\r\\n            signalLater(line, \\\"change\\\", line, change);\\r\\n        }\\r\\n        function linesFor(start, end) {\\r\\n            var result = [];\\r\\n            for (var i = start; i < end; ++i)\\r\\n            { result.push(new Line(text[i], spansFor(i), estimateHeight$$1)); }\\r\\n            return result\\r\\n        }\\r\\n\\r\\n        var from = change.from, to = change.to, text = change.text;\\r\\n        var firstLine = getLine(doc, from.line), lastLine = getLine(doc, to.line);\\r\\n        var lastText = lst(text), lastSpans = spansFor(text.length - 1), nlines = to.line - from.line;\\r\\n\\r\\n        // Adjust the line structure\\r\\n        if (change.full) {\\r\\n            doc.insert(0, linesFor(0, text.length));\\r\\n            doc.remove(text.length, doc.size - text.length);\\r\\n        } else if (isWholeLineUpdate(doc, change)) {\\r\\n            // This is a whole-line replace. Treated specially to make\\r\\n            // sure line objects move the way they are supposed to.\\r\\n            var added = linesFor(0, text.length - 1);\\r\\n            update(lastLine, lastLine.text, lastSpans);\\r\\n            if (nlines) { doc.remove(from.line, nlines); }\\r\\n            if (added.length) { doc.insert(from.line, added); }\\r\\n        } else if (firstLine == lastLine) {\\r\\n            if (text.length == 1) {\\r\\n                update(firstLine, firstLine.text.slice(0, from.ch) + lastText + firstLine.text.slice(to.ch), lastSpans);\\r\\n            } else {\\r\\n                var added$1 = linesFor(1, text.length - 1);\\r\\n                added$1.push(new Line(lastText + firstLine.text.slice(to.ch), lastSpans, estimateHeight$$1));\\r\\n                update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));\\r\\n                doc.insert(from.line + 1, added$1);\\r\\n            }\\r\\n        } else if (text.length == 1) {\\r\\n            update(firstLine, firstLine.text.slice(0, from.ch) + text[0] + lastLine.text.slice(to.ch), spansFor(0));\\r\\n            doc.remove(from.line + 1, nlines);\\r\\n        } else {\\r\\n            update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));\\r\\n            update(lastLine, lastText + lastLine.text.slice(to.ch), lastSpans);\\r\\n            var added$2 = linesFor(1, text.length - 1);\\r\\n            if (nlines > 1) { doc.remove(from.line + 1, nlines - 1); }\\r\\n            doc.insert(from.line + 1, added$2);\\r\\n        }\\r\\n\\r\\n        signalLater(doc, \\\"change\\\", doc, change);\\r\\n    }\\r\\n\\r\\n    // Call f for all linked documents.\\r\\n    function linkedDocs(doc, f, sharedHistOnly) {\\r\\n        function propagate(doc, skip, sharedHist) {\\r\\n            if (doc.linked) { for (var i = 0; i < doc.linked.length; ++i) {\\r\\n                var rel = doc.linked[i];\\r\\n                if (rel.doc == skip) { continue }\\r\\n                var shared = sharedHist && rel.sharedHist;\\r\\n                if (sharedHistOnly && !shared) { continue }\\r\\n                f(rel.doc, shared);\\r\\n                propagate(rel.doc, doc, shared);\\r\\n            } }\\r\\n        }\\r\\n        propagate(doc, null, true);\\r\\n    }\\r\\n\\r\\n    // Attach a document to an editor.\\r\\n    function attachDoc(cm, doc) {\\r\\n        if (doc.cm) { throw new Error(\\\"This document is already in use.\\\") }\\r\\n        cm.doc = doc;\\r\\n        doc.cm = cm;\\r\\n        estimateLineHeights(cm);\\r\\n        loadMode(cm);\\r\\n        setDirectionClass(cm);\\r\\n        if (!cm.options.lineWrapping) { findMaxLine(cm); }\\r\\n        cm.options.mode = doc.modeOption;\\r\\n        regChange(cm);\\r\\n    }\\r\\n\\r\\n    function setDirectionClass(cm) {\\r\\n        (cm.doc.direction == \\\"rtl\\\" ? addClass : rmClass)(cm.display.lineDiv, \\\"CodeMirror-rtl\\\");\\r\\n    }\\r\\n\\r\\n    function directionChanged(cm) {\\r\\n        runInOp(cm, function () {\\r\\n            setDirectionClass(cm);\\r\\n            regChange(cm);\\r\\n        });\\r\\n    }\\r\\n\\r\\n    function History(startGen) {\\r\\n        // Arrays of change events and selections. Doing something adds an\\r\\n        // event to done and clears undo. Undoing moves events from done\\r\\n        // to undone, redoing moves them in the other direction.\\r\\n        this.done = []; this.undone = [];\\r\\n        this.undoDepth = Infinity;\\r\\n        // Used to track when changes can be merged into a single undo\\r\\n        // event\\r\\n        this.lastModTime = this.lastSelTime = 0;\\r\\n        this.lastOp = this.lastSelOp = null;\\r\\n        this.lastOrigin = this.lastSelOrigin = null;\\r\\n        // Used by the isClean() method\\r\\n        this.generation = this.maxGeneration = startGen || 1;\\r\\n    }\\r\\n\\r\\n    // Create a history change event from an updateDoc-style change\\r\\n    // object.\\r\\n    function historyChangeFromChange(doc, change) {\\r\\n        var histChange = {from: copyPos(change.from), to: changeEnd(change), text: getBetween(doc, change.from, change.to)};\\r\\n        attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1);\\r\\n        linkedDocs(doc, function (doc) { return attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1); }, true);\\r\\n        return histChange\\r\\n    }\\r\\n\\r\\n    // Pop all selection events off the end of a history array. Stop at\\r\\n    // a change event.\\r\\n    function clearSelectionEvents(array) {\\r\\n        while (array.length) {\\r\\n            var last = lst(array);\\r\\n            if (last.ranges) { array.pop(); }\\r\\n            else { break }\\r\\n        }\\r\\n    }\\r\\n\\r\\n    // Find the top change event in the history. Pop off selection\\r\\n    // events that are in the way.\\r\\n    function lastChangeEvent(hist, force) {\\r\\n        if (force) {\\r\\n            clearSelectionEvents(hist.done);\\r\\n            return lst(hist.done)\\r\\n        } else if (hist.done.length && !lst(hist.done).ranges) {\\r\\n            return lst(hist.done)\\r\\n        } else if (hist.done.length > 1 && !hist.done[hist.done.length - 2].ranges) {\\r\\n            hist.done.pop();\\r\\n            return lst(hist.done)\\r\\n        }\\r\\n    }\\r\\n\\r\\n    // Register a change in the history. Merges changes that are within\\r\\n    // a single operation, or are close together with an origin that\\r\\n    // allows merging (starting with \\\"+\\\") into a single event.\\r\\n    function addChangeToHistory(doc, change, selAfter, opId) {\\r\\n        var hist = doc.history;\\r\\n        hist.undone.length = 0;\\r\\n        var time = +new Date, cur;\\r\\n        var last;\\r\\n\\r\\n        if ((hist.lastOp == opId ||\\r\\n            hist.lastOrigin == change.origin && change.origin &&\\r\\n            ((change.origin.charAt(0) == \\\"+\\\" && hist.lastModTime > time - (doc.cm ? doc.cm.options.historyEventDelay : 500)) ||\\r\\n                change.origin.charAt(0) == \\\"*\\\")) &&\\r\\n            (cur = lastChangeEvent(hist, hist.lastOp == opId))) {\\r\\n            // Merge this change into the last event\\r\\n            last = lst(cur.changes);\\r\\n            if (cmp(change.from, change.to) == 0 && cmp(change.from, last.to) == 0) {\\r\\n                // Optimized case for simple insertion -- don't want to add\\r\\n                // new changesets for every character typed\\r\\n                last.to = changeEnd(change);\\r\\n            } else {\\r\\n                // Add new sub-event\\r\\n                cur.changes.push(historyChangeFromChange(doc, change));\\r\\n            }\\r\\n        } else {\\r\\n            // Can not be merged, start a new event.\\r\\n            var before = lst(hist.done);\\r\\n            if (!before || !before.ranges)\\r\\n            { pushSelectionToHistory(doc.sel, hist.done); }\\r\\n            cur = {changes: [historyChangeFromChange(doc, change)],\\r\\n                generation: hist.generation};\\r\\n            hist.done.push(cur);\\r\\n            while (hist.done.length > hist.undoDepth) {\\r\\n                hist.done.shift();\\r\\n                if (!hist.done[0].ranges) { hist.done.shift(); }\\r\\n            }\\r\\n        }\\r\\n        hist.done.push(selAfter);\\r\\n        hist.generation = ++hist.maxGeneration;\\r\\n        hist.lastModTime = hist.lastSelTime = time;\\r\\n        hist.lastOp = hist.lastSelOp = opId;\\r\\n        hist.lastOrigin = hist.lastSelOrigin = change.origin;\\r\\n\\r\\n        if (!last) { signal(doc, \\\"historyAdded\\\"); }\\r\\n    }\\r\\n\\r\\n    function selectionEventCanBeMerged(doc, origin, prev, sel) {\\r\\n        var ch = origin.charAt(0);\\r\\n        return ch == \\\"*\\\" ||\\r\\n            ch == \\\"+\\\" &&\\r\\n            prev.ranges.length == sel.ranges.length &&\\r\\n            prev.somethingSelected() == sel.somethingSelected() &&\\r\\n            new Date - doc.history.lastSelTime <= (doc.cm ? doc.cm.options.historyEventDelay : 500)\\r\\n    }\\r\\n\\r\\n    // Called whenever the selection changes, sets the new selection as\\r\\n    // the pending selection in the history, and pushes the old pending\\r\\n    // selection into the 'done' array when it was significantly\\r\\n    // different (in number of selected ranges, emptiness, or time).\\r\\n    function addSelectionToHistory(doc, sel, opId, options) {\\r\\n        var hist = doc.history, origin = options && options.origin;\\r\\n\\r\\n        // A new event is started when the previous origin does not match\\r\\n        // the current, or the origins don't allow matching. Origins\\r\\n        // starting with * are always merged, those starting with + are\\r\\n        // merged when similar and close together in time.\\r\\n        if (opId == hist.lastSelOp ||\\r\\n            (origin && hist.lastSelOrigin == origin &&\\r\\n                (hist.lastModTime == hist.lastSelTime && hist.lastOrigin == origin ||\\r\\n                    selectionEventCanBeMerged(doc, origin, lst(hist.done), sel))))\\r\\n        { hist.done[hist.done.length - 1] = sel; }\\r\\n        else\\r\\n        { pushSelectionToHistory(sel, hist.done); }\\r\\n\\r\\n        hist.lastSelTime = +new Date;\\r\\n        hist.lastSelOrigin = origin;\\r\\n        hist.lastSelOp = opId;\\r\\n        if (options && options.clearRedo !== false)\\r\\n        { clearSelectionEvents(hist.undone); }\\r\\n    }\\r\\n\\r\\n    function pushSelectionToHistory(sel, dest) {\\r\\n        var top = lst(dest);\\r\\n        if (!(top && top.ranges && top.equals(sel)))\\r\\n        { dest.push(sel); }\\r\\n    }\\r\\n\\r\\n    // Used to store marked span information in the history.\\r\\n    function attachLocalSpans(doc, change, from, to) {\\r\\n        var existing = change[\\\"spans_\\\" + doc.id], n = 0;\\r\\n        doc.iter(Math.max(doc.first, from), Math.min(doc.first + doc.size, to), function (line) {\\r\\n            if (line.markedSpans)\\r\\n            { (existing || (existing = change[\\\"spans_\\\" + doc.id] = {}))[n] = line.markedSpans; }\\r\\n            ++n;\\r\\n        });\\r\\n    }\\r\\n\\r\\n    // When un/re-doing restores text containing marked spans, those\\r\\n    // that have been explicitly cleared should not be restored.\\r\\n    function removeClearedSpans(spans) {\\r\\n        if (!spans) { return null }\\r\\n        var out;\\r\\n        for (var i = 0; i < spans.length; ++i) {\\r\\n            if (spans[i].marker.explicitlyCleared) { if (!out) { out = spans.slice(0, i); } }\\r\\n            else if (out) { out.push(spans[i]); }\\r\\n        }\\r\\n        return !out ? spans : out.length ? out : null\\r\\n    }\\r\\n\\r\\n    // Retrieve and filter the old marked spans stored in a change event.\\r\\n    function getOldSpans(doc, change) {\\r\\n        var found = change[\\\"spans_\\\" + doc.id];\\r\\n        if (!found) { return null }\\r\\n        var nw = [];\\r\\n        for (var i = 0; i < change.text.length; ++i)\\r\\n        { nw.push(removeClearedSpans(found[i])); }\\r\\n        return nw\\r\\n    }\\r\\n\\r\\n    // Used for un/re-doing changes from the history. Combines the\\r\\n    // result of computing the existing spans with the set of spans that\\r\\n    // existed in the history (so that deleting around a span and then\\r\\n    // undoing brings back the span).\\r\\n    function mergeOldSpans(doc, change) {\\r\\n        var old = getOldSpans(doc, change);\\r\\n        var stretched = stretchSpansOverChange(doc, change);\\r\\n        if (!old) { return stretched }\\r\\n        if (!stretched) { return old }\\r\\n\\r\\n        for (var i = 0; i < old.length; ++i) {\\r\\n            var oldCur = old[i], stretchCur = stretched[i];\\r\\n            if (oldCur && stretchCur) {\\r\\n                spans: for (var j = 0; j < stretchCur.length; ++j) {\\r\\n                    var span = stretchCur[j];\\r\\n                    for (var k = 0; k < oldCur.length; ++k)\\r\\n                    { if (oldCur[k].marker == span.marker) { continue spans } }\\r\\n                    oldCur.push(span);\\r\\n                }\\r\\n            } else if (stretchCur) {\\r\\n                old[i] = stretchCur;\\r\\n            }\\r\\n        }\\r\\n        return old\\r\\n    }\\r\\n\\r\\n    // Used both to provide a JSON-safe object in .getHistory, and, when\\r\\n    // detaching a document, to split the history in two\\r\\n    function copyHistoryArray(events, newGroup, instantiateSel) {\\r\\n        var copy = [];\\r\\n        for (var i = 0; i < events.length; ++i) {\\r\\n            var event = events[i];\\r\\n            if (event.ranges) {\\r\\n                copy.push(instantiateSel ? Selection.prototype.deepCopy.call(event) : event);\\r\\n                continue\\r\\n            }\\r\\n            var changes = event.changes, newChanges = [];\\r\\n            copy.push({changes: newChanges});\\r\\n            for (var j = 0; j < changes.length; ++j) {\\r\\n                var change = changes[j], m = (void 0);\\r\\n                newChanges.push({from: change.from, to: change.to, text: change.text});\\r\\n                if (newGroup) { for (var prop in change) { if (m = prop.match(/^spans_(\\\\d+)$/)) {\\r\\n                    if (indexOf(newGroup, Number(m[1])) > -1) {\\r\\n                        lst(newChanges)[prop] = change[prop];\\r\\n                        delete change[prop];\\r\\n                    }\\r\\n                } } }\\r\\n            }\\r\\n        }\\r\\n        return copy\\r\\n    }\\r\\n\\r\\n    // The 'scroll' parameter given to many of these indicated whether\\r\\n    // the new cursor position should be scrolled into view after\\r\\n    // modifying the selection.\\r\\n\\r\\n    // If shift is held or the extend flag is set, extends a range to\\r\\n    // include a given position (and optionally a second position).\\r\\n    // Otherwise, simply returns the range between the given positions.\\r\\n    // Used for cursor motion and such.\\r\\n    function extendRange(range, head, other, extend) {\\r\\n        if (extend) {\\r\\n            var anchor = range.anchor;\\r\\n            if (other) {\\r\\n                var posBefore = cmp(head, anchor) < 0;\\r\\n                if (posBefore != (cmp(other, anchor) < 0)) {\\r\\n                    anchor = head;\\r\\n                    head = other;\\r\\n                } else if (posBefore != (cmp(head, other) < 0)) {\\r\\n                    head = other;\\r\\n                }\\r\\n            }\\r\\n            return new Range(anchor, head)\\r\\n        } else {\\r\\n            return new Range(other || head, head)\\r\\n        }\\r\\n    }\\r\\n\\r\\n    // Extend the primary selection range, discard the rest.\\r\\n    function extendSelection(doc, head, other, options, extend) {\\r\\n        if (extend == null) { extend = doc.cm && (doc.cm.display.shift || doc.extend); }\\r\\n        setSelection(doc, new Selection([extendRange(doc.sel.primary(), head, other, extend)], 0), options);\\r\\n    }\\r\\n\\r\\n    // Extend all selections (pos is an array of selections with length\\r\\n    // equal the number of selections)\\r\\n    function extendSelections(doc, heads, options) {\\r\\n        var out = [];\\r\\n        var extend = doc.cm && (doc.cm.display.shift || doc.extend);\\r\\n        for (var i = 0; i < doc.sel.ranges.length; i++)\\r\\n        { out[i] = extendRange(doc.sel.ranges[i], heads[i], null, extend); }\\r\\n        var newSel = normalizeSelection(doc.cm, out, doc.sel.primIndex);\\r\\n        setSelection(doc, newSel, options);\\r\\n    }\\r\\n\\r\\n    // Updates a single range in the selection.\\r\\n    function replaceOneSelection(doc, i, range, options) {\\r\\n        var ranges = doc.sel.ranges.slice(0);\\r\\n        ranges[i] = range;\\r\\n        setSelection(doc, normalizeSelection(doc.cm, ranges, doc.sel.primIndex), options);\\r\\n    }\\r\\n\\r\\n    // Reset the selection to a single range.\\r\\n    function setSimpleSelection(doc, anchor, head, options) {\\r\\n        setSelection(doc, simpleSelection(anchor, head), options);\\r\\n    }\\r\\n\\r\\n    // Give beforeSelectionChange handlers a change to influence a\\r\\n    // selection update.\\r\\n    function filterSelectionChange(doc, sel, options) {\\r\\n        var obj = {\\r\\n            ranges: sel.ranges,\\r\\n            update: function(ranges) {\\r\\n                this.ranges = [];\\r\\n                for (var i = 0; i < ranges.length; i++)\\r\\n                { this.ranges[i] = new Range(clipPos(doc, ranges[i].anchor),\\r\\n                    clipPos(doc, ranges[i].head)); }\\r\\n            },\\r\\n            origin: options && options.origin\\r\\n        };\\r\\n        signal(doc, \\\"beforeSelectionChange\\\", doc, obj);\\r\\n        if (doc.cm) { signal(doc.cm, \\\"beforeSelectionChange\\\", doc.cm, obj); }\\r\\n        if (obj.ranges != sel.ranges) { return normalizeSelection(doc.cm, obj.ranges, obj.ranges.length - 1) }\\r\\n        else { return sel }\\r\\n    }\\r\\n\\r\\n    function setSelectionReplaceHistory(doc, sel, options) {\\r\\n        var done = doc.history.done, last = lst(done);\\r\\n        if (last && last.ranges) {\\r\\n            done[done.length - 1] = sel;\\r\\n            setSelectionNoUndo(doc, sel, options);\\r\\n        } else {\\r\\n            setSelection(doc, sel, options);\\r\\n        }\\r\\n    }\\r\\n\\r\\n    // Set a new selection.\\r\\n    function setSelection(doc, sel, options) {\\r\\n        setSelectionNoUndo(doc, sel, options);\\r\\n        addSelectionToHistory(doc, doc.sel, doc.cm ? doc.cm.curOp.id : NaN, options);\\r\\n    }\\r\\n\\r\\n    function setSelectionNoUndo(doc, sel, options) {\\r\\n        if (hasHandler(doc, \\\"beforeSelectionChange\\\") || doc.cm && hasHandler(doc.cm, \\\"beforeSelectionChange\\\"))\\r\\n        { sel = filterSelectionChange(doc, sel, options); }\\r\\n\\r\\n        var bias = options && options.bias ||\\r\\n            (cmp(sel.primary().head, doc.sel.primary().head) < 0 ? -1 : 1);\\r\\n        setSelectionInner(doc, skipAtomicInSelection(doc, sel, bias, true));\\r\\n\\r\\n        if (!(options && options.scroll === false) && doc.cm)\\r\\n        { ensureCursorVisible(doc.cm); }\\r\\n    }\\r\\n\\r\\n    function setSelectionInner(doc, sel) {\\r\\n        if (sel.equals(doc.sel)) { return }\\r\\n\\r\\n        doc.sel = sel;\\r\\n\\r\\n        if (doc.cm) {\\r\\n            doc.cm.curOp.updateInput = 1;\\r\\n            doc.cm.curOp.selectionChanged = true;\\r\\n            signalCursorActivity(doc.cm);\\r\\n        }\\r\\n        signalLater(doc, \\\"cursorActivity\\\", doc);\\r\\n    }\\r\\n\\r\\n    // Verify that the selection does not partially select any atomic\\r\\n    // marked ranges.\\r\\n    function reCheckSelection(doc) {\\r\\n        setSelectionInner(doc, skipAtomicInSelection(doc, doc.sel, null, false));\\r\\n    }\\r\\n\\r\\n    // Return a selection that does not partially select any atomic\\r\\n    // ranges.\\r\\n    function skipAtomicInSelection(doc, sel, bias, mayClear) {\\r\\n        var out;\\r\\n        for (var i = 0; i < sel.ranges.length; i++) {\\r\\n            var range = sel.ranges[i];\\r\\n            var old = sel.ranges.length == doc.sel.ranges.length && doc.sel.ranges[i];\\r\\n            var newAnchor = skipAtomic(doc, range.anchor, old && old.anchor, bias, mayClear);\\r\\n            var newHead = skipAtomic(doc, range.head, old && old.head, bias, mayClear);\\r\\n            if (out || newAnchor != range.anchor || newHead != range.head) {\\r\\n                if (!out) { out = sel.ranges.slice(0, i); }\\r\\n                out[i] = new Range(newAnchor, newHead);\\r\\n            }\\r\\n        }\\r\\n        return out ? normalizeSelection(doc.cm, out, sel.primIndex) : sel\\r\\n    }\\r\\n\\r\\n    function skipAtomicInner(doc, pos, oldPos, dir, mayClear) {\\r\\n        var line = getLine(doc, pos.line);\\r\\n        if (line.markedSpans) { for (var i = 0; i < line.markedSpans.length; ++i) {\\r\\n            var sp = line.markedSpans[i], m = sp.marker;\\r\\n            if ((sp.from == null || (m.inclusiveLeft ? sp.from <= pos.ch : sp.from < pos.ch)) &&\\r\\n                (sp.to == null || (m.inclusiveRight ? sp.to >= pos.ch : sp.to > pos.ch))) {\\r\\n                if (mayClear) {\\r\\n                    signal(m, \\\"beforeCursorEnter\\\");\\r\\n                    if (m.explicitlyCleared) {\\r\\n                        if (!line.markedSpans) { break }\\r\\n                        else {--i; continue}\\r\\n                    }\\r\\n                }\\r\\n                if (!m.atomic) { continue }\\r\\n\\r\\n                if (oldPos) {\\r\\n                    var near = m.find(dir < 0 ? 1 : -1), diff = (void 0);\\r\\n                    if (dir < 0 ? m.inclusiveRight : m.inclusiveLeft)\\r\\n                    { near = movePos(doc, near, -dir, near && near.line == pos.line ? line : null); }\\r\\n                    if (near && near.line == pos.line && (diff = cmp(near, oldPos)) && (dir < 0 ? diff < 0 : diff > 0))\\r\\n                    { return skipAtomicInner(doc, near, pos, dir, mayClear) }\\r\\n                }\\r\\n\\r\\n                var far = m.find(dir < 0 ? -1 : 1);\\r\\n                if (dir < 0 ? m.inclusiveLeft : m.inclusiveRight)\\r\\n                { far = movePos(doc, far, dir, far.line == pos.line ? line : null); }\\r\\n                return far ? skipAtomicInner(doc, far, pos, dir, mayClear) : null\\r\\n            }\\r\\n        } }\\r\\n        return pos\\r\\n    }\\r\\n\\r\\n    // Ensure a given position is not inside an atomic range.\\r\\n    function skipAtomic(doc, pos, oldPos, bias, mayClear) {\\r\\n        var dir = bias || 1;\\r\\n        var found = skipAtomicInner(doc, pos, oldPos, dir, mayClear) ||\\r\\n            (!mayClear && skipAtomicInner(doc, pos, oldPos, dir, true)) ||\\r\\n            skipAtomicInner(doc, pos, oldPos, -dir, mayClear) ||\\r\\n            (!mayClear && skipAtomicInner(doc, pos, oldPos, -dir, true));\\r\\n        if (!found) {\\r\\n            doc.cantEdit = true;\\r\\n            return Pos(doc.first, 0)\\r\\n        }\\r\\n        return found\\r\\n    }\\r\\n\\r\\n    function movePos(doc, pos, dir, line) {\\r\\n        if (dir < 0 && pos.ch == 0) {\\r\\n            if (pos.line > doc.first) { return clipPos(doc, Pos(pos.line - 1)) }\\r\\n            else { return null }\\r\\n        } else if (dir > 0 && pos.ch == (line || getLine(doc, pos.line)).text.length) {\\r\\n            if (pos.line < doc.first + doc.size - 1) { return Pos(pos.line + 1, 0) }\\r\\n            else { return null }\\r\\n        } else {\\r\\n            return new Pos(pos.line, pos.ch + dir)\\r\\n        }\\r\\n    }\\r\\n\\r\\n    function selectAll(cm) {\\r\\n        cm.setSelection(Pos(cm.firstLine(), 0), Pos(cm.lastLine()), sel_dontScroll);\\r\\n    }\\r\\n\\r\\n    // UPDATING\\r\\n\\r\\n    // Allow \\\"beforeChange\\\" event handlers to influence a change\\r\\n    function filterChange(doc, change, update) {\\r\\n        var obj = {\\r\\n            canceled: false,\\r\\n            from: change.from,\\r\\n            to: change.to,\\r\\n            text: change.text,\\r\\n            origin: change.origin,\\r\\n            cancel: function () { return obj.canceled = true; }\\r\\n        };\\r\\n        if (update) { obj.update = function (from, to, text, origin) {\\r\\n            if (from) { obj.from = clipPos(doc, from); }\\r\\n            if (to) { obj.to = clipPos(doc, to); }\\r\\n            if (text) { obj.text = text; }\\r\\n            if (origin !== undefined) { obj.origin = origin; }\\r\\n        }; }\\r\\n        signal(doc, \\\"beforeChange\\\", doc, obj);\\r\\n        if (doc.cm) { signal(doc.cm, \\\"beforeChange\\\", doc.cm, obj); }\\r\\n\\r\\n        if (obj.canceled) {\\r\\n            if (doc.cm) { doc.cm.curOp.updateInput = 2; }\\r\\n            return null\\r\\n        }\\r\\n        return {from: obj.from, to: obj.to, text: obj.text, origin: obj.origin}\\r\\n    }\\r\\n\\r\\n    // Apply a change to a document, and add it to the document's\\r\\n    // history, and propagating it to all linked documents.\\r\\n    function makeChange(doc, change, ignoreReadOnly) {\\r\\n        if (doc.cm) {\\r\\n            if (!doc.cm.curOp) { return operation(doc.cm, makeChange)(doc, change, ignoreReadOnly) }\\r\\n            if (doc.cm.state.suppressEdits) { return }\\r\\n        }\\r\\n\\r\\n        if (hasHandler(doc, \\\"beforeChange\\\") || doc.cm && hasHandler(doc.cm, \\\"beforeChange\\\")) {\\r\\n            change = filterChange(doc, change, true);\\r\\n            if (!change) { return }\\r\\n        }\\r\\n\\r\\n        // Possibly split or suppress the update based on the presence\\r\\n        // of read-only spans in its range.\\r\\n        var split = sawReadOnlySpans && !ignoreReadOnly && removeReadOnlyRanges(doc, change.from, change.to);\\r\\n        if (split) {\\r\\n            for (var i = split.length - 1; i >= 0; --i)\\r\\n            { makeChangeInner(doc, {from: split[i].from, to: split[i].to, text: i ? [\\\"\\\"] : change.text, origin: change.origin}); }\\r\\n        } else {\\r\\n            makeChangeInner(doc, change);\\r\\n        }\\r\\n    }\\r\\n\\r\\n    function makeChangeInner(doc, change) {\\r\\n        if (change.text.length == 1 && change.text[0] == \\\"\\\" && cmp(change.from, change.to) == 0) { return }\\r\\n        var selAfter = computeSelAfterChange(doc, change);\\r\\n        addChangeToHistory(doc, change, selAfter, doc.cm ? doc.cm.curOp.id : NaN);\\r\\n\\r\\n        makeChangeSingleDoc(doc, change, selAfter, stretchSpansOverChange(doc, change));\\r\\n        var rebased = [];\\r\\n\\r\\n        linkedDocs(doc, function (doc, sharedHist) {\\r\\n            if (!sharedHist && indexOf(rebased, doc.history) == -1) {\\r\\n                rebaseHist(doc.history, change);\\r\\n                rebased.push(doc.history);\\r\\n            }\\r\\n            makeChangeSingleDoc(doc, change, null, stretchSpansOverChange(doc, change));\\r\\n        });\\r\\n    }\\r\\n\\r\\n    // Revert a change stored in a document's history.\\r\\n    function makeChangeFromHistory(doc, type, allowSelectionOnly) {\\r\\n        var suppress = doc.cm && doc.cm.state.suppressEdits;\\r\\n        if (suppress && !allowSelectionOnly) { return }\\r\\n\\r\\n        var hist = doc.history, event, selAfter = doc.sel;\\r\\n        var source = type == \\\"undo\\\" ? hist.done : hist.undone, dest = type == \\\"undo\\\" ? hist.undone : hist.done;\\r\\n\\r\\n        // Verify that there is a useable event (so that ctrl-z won't\\r\\n        // needlessly clear selection events)\\r\\n        var i = 0;\\r\\n        for (; i < source.length; i++) {\\r\\n            event = source[i];\\r\\n            if (allowSelectionOnly ? event.ranges && !event.equals(doc.sel) : !event.ranges)\\r\\n            { break }\\r\\n        }\\r\\n        if (i == source.length) { return }\\r\\n        hist.lastOrigin = hist.lastSelOrigin = null;\\r\\n\\r\\n        for (;;) {\\r\\n            event = source.pop();\\r\\n            if (event.ranges) {\\r\\n                pushSelectionToHistory(event, dest);\\r\\n                if (allowSelectionOnly && !event.equals(doc.sel)) {\\r\\n                    setSelection(doc, event, {clearRedo: false});\\r\\n                    return\\r\\n                }\\r\\n                selAfter = event;\\r\\n            } else if (suppress) {\\r\\n                source.push(event);\\r\\n                return\\r\\n            } else { break }\\r\\n        }\\r\\n\\r\\n        // Build up a reverse change object to add to the opposite history\\r\\n        // stack (redo when undoing, and vice versa).\\r\\n        var antiChanges = [];\\r\\n        pushSelectionToHistory(selAfter, dest);\\r\\n        dest.push({changes: antiChanges, generation: hist.generation});\\r\\n        hist.generation = event.generation || ++hist.maxGeneration;\\r\\n\\r\\n        var filter = hasHandler(doc, \\\"beforeChange\\\") || doc.cm && hasHandler(doc.cm, \\\"beforeChange\\\");\\r\\n\\r\\n        var loop = function ( i ) {\\r\\n            var change = event.changes[i];\\r\\n            change.origin = type;\\r\\n            if (filter && !filterChange(doc, change, false)) {\\r\\n                source.length = 0;\\r\\n                return {}\\r\\n            }\\r\\n\\r\\n            antiChanges.push(historyChangeFromChange(doc, change));\\r\\n\\r\\n            var after = i ? computeSelAfterChange(doc, change) : lst(source);\\r\\n            makeChangeSingleDoc(doc, change, after, mergeOldSpans(doc, change));\\r\\n            if (!i && doc.cm) { doc.cm.scrollIntoView({from: change.from, to: changeEnd(change)}); }\\r\\n            var rebased = [];\\r\\n\\r\\n            // Propagate to the linked documents\\r\\n            linkedDocs(doc, function (doc, sharedHist) {\\r\\n                if (!sharedHist && indexOf(rebased, doc.history) == -1) {\\r\\n                    rebaseHist(doc.history, change);\\r\\n                    rebased.push(doc.history);\\r\\n                }\\r\\n                makeChangeSingleDoc(doc, change, null, mergeOldSpans(doc, change));\\r\\n            });\\r\\n        };\\r\\n\\r\\n        for (var i$1 = event.changes.length - 1; i$1 >= 0; --i$1) {\\r\\n            var returned = loop( i$1 );\\r\\n\\r\\n            if ( returned ) return returned.v;\\r\\n        }\\r\\n    }\\r\\n\\r\\n    // Sub-views need their line numbers shifted when text is added\\r\\n    // above or below them in the parent document.\\r\\n    function shiftDoc(doc, distance) {\\r\\n        if (distance == 0) { return }\\r\\n        doc.first += distance;\\r\\n        doc.sel = new Selection(map(doc.sel.ranges, function (range) { return new Range(\\r\\n            Pos(range.anchor.line + distance, range.anchor.ch),\\r\\n            Pos(range.head.line + distance, range.head.ch)\\r\\n        ); }), doc.sel.primIndex);\\r\\n        if (doc.cm) {\\r\\n            regChange(doc.cm, doc.first, doc.first - distance, distance);\\r\\n            for (var d = doc.cm.display, l = d.viewFrom; l < d.viewTo; l++)\\r\\n            { regLineChange(doc.cm, l, \\\"gutter\\\"); }\\r\\n        }\\r\\n    }\\r\\n\\r\\n    // More lower-level change function, handling only a single document\\r\\n    // (not linked ones).\\r\\n    function makeChangeSingleDoc(doc, change, selAfter, spans) {\\r\\n        if (doc.cm && !doc.cm.curOp)\\r\\n        { return operation(doc.cm, makeChangeSingleDoc)(doc, change, selAfter, spans) }\\r\\n\\r\\n        if (change.to.line < doc.first) {\\r\\n            shiftDoc(doc, change.text.length - 1 - (change.to.line - change.from.line));\\r\\n            return\\r\\n        }\\r\\n        if (change.from.line > doc.lastLine()) { return }\\r\\n\\r\\n        // Clip the change to the size of this doc\\r\\n        if (change.from.line < doc.first) {\\r\\n            var shift = change.text.length - 1 - (doc.first - change.from.line);\\r\\n            shiftDoc(doc, shift);\\r\\n            change = {from: Pos(doc.first, 0), to: Pos(change.to.line + shift, change.to.ch),\\r\\n                text: [lst(change.text)], origin: change.origin};\\r\\n        }\\r\\n        var last = doc.lastLine();\\r\\n        if (change.to.line > last) {\\r\\n            change = {from: change.from, to: Pos(last, getLine(doc, last).text.length),\\r\\n                text: [change.text[0]], origin: change.origin};\\r\\n        }\\r\\n\\r\\n        change.removed = getBetween(doc, change.from, change.to);\\r\\n\\r\\n        if (!selAfter) { selAfter = computeSelAfterChange(doc, change); }\\r\\n        if (doc.cm) { makeChangeSingleDocInEditor(doc.cm, change, spans); }\\r\\n        else { updateDoc(doc, change, spans); }\\r\\n        setSelectionNoUndo(doc, selAfter, sel_dontScroll);\\r\\n    }\\r\\n\\r\\n    // Handle the interaction of a change to a document with the editor\\r\\n    // that this document is part of.\\r\\n    function makeChangeSingleDocInEditor(cm, change, spans) {\\r\\n        var doc = cm.doc, display = cm.display, from = change.from, to = change.to;\\r\\n\\r\\n        var recomputeMaxLength = false, checkWidthStart = from.line;\\r\\n        if (!cm.options.lineWrapping) {\\r\\n            checkWidthStart = lineNo(visualLine(getLine(doc, from.line)));\\r\\n            doc.iter(checkWidthStart, to.line + 1, function (line) {\\r\\n                if (line == display.maxLine) {\\r\\n                    recomputeMaxLength = true;\\r\\n                    return true\\r\\n                }\\r\\n            });\\r\\n        }\\r\\n\\r\\n        if (doc.sel.contains(change.from, change.to) > -1)\\r\\n        { signalCursorActivity(cm); }\\r\\n\\r\\n        updateDoc(doc, change, spans, estimateHeight(cm));\\r\\n\\r\\n        if (!cm.options.lineWrapping) {\\r\\n            doc.iter(checkWidthStart, from.line + change.text.length, function (line) {\\r\\n                var len = lineLength(line);\\r\\n                if (len > display.maxLineLength) {\\r\\n                    display.maxLine = line;\\r\\n                    display.maxLineLength = len;\\r\\n                    display.maxLineChanged = true;\\r\\n                    recomputeMaxLength = false;\\r\\n                }\\r\\n            });\\r\\n            if (recomputeMaxLength) { cm.curOp.updateMaxLine = true; }\\r\\n        }\\r\\n\\r\\n        retreatFrontier(doc, from.line);\\r\\n        startWorker(cm, 400);\\r\\n\\r\\n        var lendiff = change.text.length - (to.line - from.line) - 1;\\r\\n        // Remember that these lines changed, for updating the display\\r\\n        if (change.full)\\r\\n        { regChange(cm); }\\r\\n        else if (from.line == to.line && change.text.length == 1 && !isWholeLineUpdate(cm.doc, change))\\r\\n        { regLineChange(cm, from.line, \\\"text\\\"); }\\r\\n        else\\r\\n        { regChange(cm, from.line, to.line + 1, lendiff); }\\r\\n\\r\\n        var changesHandler = hasHandler(cm, \\\"changes\\\"), changeHandler = hasHandler(cm, \\\"change\\\");\\r\\n        if (changeHandler || changesHandler) {\\r\\n            var obj = {\\r\\n                from: from, to: to,\\r\\n                text: change.text,\\r\\n                removed: change.removed,\\r\\n                origin: change.origin\\r\\n            };\\r\\n            if (changeHandler) { signalLater(cm, \\\"change\\\", cm, obj); }\\r\\n            if (changesHandler) { (cm.curOp.changeObjs || (cm.curOp.changeObjs = [])).push(obj); }\\r\\n        }\\r\\n        cm.display.selForContextMenu = null;\\r\\n    }\\r\\n\\r\\n    function replaceRange(doc, code, from, to, origin) {\\r\\n        var assign;\\r\\n\\r\\n        if (!to) { to = from; }\\r\\n        if (cmp(to, from) < 0) { (assign = [to, from], from = assign[0], to = assign[1]); }\\r\\n        if (typeof code == \\\"string\\\") { code = doc.splitLines(code); }\\r\\n        makeChange(doc, {from: from, to: to, text: code, origin: origin});\\r\\n    }\\r\\n\\r\\n    // Rebasing/resetting history to deal with externally-sourced changes\\r\\n\\r\\n    function rebaseHistSelSingle(pos, from, to, diff) {\\r\\n        if (to < pos.line) {\\r\\n            pos.line += diff;\\r\\n        } else if (from < pos.line) {\\r\\n            pos.line = from;\\r\\n            pos.ch = 0;\\r\\n        }\\r\\n    }\\r\\n\\r\\n    // Tries to rebase an array of history events given a change in the\\r\\n    // document. If the change touches the same lines as the event, the\\r\\n    // event, and everything 'behind' it, is discarded. If the change is\\r\\n    // before the event, the event's positions are updated. Uses a\\r\\n    // copy-on-write scheme for the positions, to avoid having to\\r\\n    // reallocate them all on every rebase, but also avoid problems with\\r\\n    // shared position objects being unsafely updated.\\r\\n    function rebaseHistArray(array, from, to, diff) {\\r\\n        for (var i = 0; i < array.length; ++i) {\\r\\n            var sub = array[i], ok = true;\\r\\n            if (sub.ranges) {\\r\\n                if (!sub.copied) { sub = array[i] = sub.deepCopy(); sub.copied = true; }\\r\\n                for (var j = 0; j < sub.ranges.length; j++) {\\r\\n                    rebaseHistSelSingle(sub.ranges[j].anchor, from, to, diff);\\r\\n                    rebaseHistSelSingle(sub.ranges[j].head, from, to, diff);\\r\\n                }\\r\\n                continue\\r\\n            }\\r\\n            for (var j$1 = 0; j$1 < sub.changes.length; ++j$1) {\\r\\n                var cur = sub.changes[j$1];\\r\\n                if (to < cur.from.line) {\\r\\n                    cur.from = Pos(cur.from.line + diff, cur.from.ch);\\r\\n                    cur.to = Pos(cur.to.line + diff, cur.to.ch);\\r\\n                } else if (from <= cur.to.line) {\\r\\n                    ok = false;\\r\\n                    break\\r\\n                }\\r\\n            }\\r\\n            if (!ok) {\\r\\n                array.splice(0, i + 1);\\r\\n                i = 0;\\r\\n            }\\r\\n        }\\r\\n    }\\r\\n\\r\\n    function rebaseHist(hist, change) {\\r\\n        var from = change.from.line, to = change.to.line, diff = change.text.length - (to - from) - 1;\\r\\n        rebaseHistArray(hist.done, from, to, diff);\\r\\n        rebaseHistArray(hist.undone, from, to, diff);\\r\\n    }\\r\\n\\r\\n    // Utility for applying a change to a line by handle or number,\\r\\n    // returning the number and optionally registering the line as\\r\\n    // changed.\\r\\n    function changeLine(doc, handle, changeType, op) {\\r\\n        var no = handle, line = handle;\\r\\n        if (typeof handle == \\\"number\\\") { line = getLine(doc, clipLine(doc, handle)); }\\r\\n        else { no = lineNo(handle); }\\r\\n        if (no == null) { return null }\\r\\n        if (op(line, no) && doc.cm) { regLineChange(doc.cm, no, changeType); }\\r\\n        return line\\r\\n    }\\r\\n\\r\\n    // The document is represented as a BTree consisting of leaves, with\\r\\n    // chunk of lines in them, and branches, with up to ten leaves or\\r\\n    // other branch nodes below them. The top node is always a branch\\r\\n    // node, and is the document object itself (meaning it has\\r\\n    // additional methods and properties).\\r\\n    //\\r\\n    // All nodes have parent links. The tree is used both to go from\\r\\n    // line numbers to line objects, and to go from objects to numbers.\\r\\n    // It also indexes by height, and is used to convert between height\\r\\n    // and line object, and to find the total height of the document.\\r\\n    //\\r\\n    // See also http://marijnhaverbeke.nl/blog/codemirror-line-tree.html\\r\\n\\r\\n    function LeafChunk(lines) {\\r\\n        this.lines = lines;\\r\\n        this.parent = null;\\r\\n        var height = 0;\\r\\n        for (var i = 0; i < lines.length; ++i) {\\r\\n            lines[i].parent = this;\\r\\n            height += lines[i].height;\\r\\n        }\\r\\n        this.height = height;\\r\\n    }\\r\\n\\r\\n    LeafChunk.prototype = {\\r\\n        chunkSize: function() { return this.lines.length },\\r\\n\\r\\n        // Remove the n lines at offset 'at'.\\r\\n        removeInner: function(at, n) {\\r\\n            for (var i = at, e = at + n; i < e; ++i) {\\r\\n                var line = this.lines[i];\\r\\n                this.height -= line.height;\\r\\n                cleanUpLine(line);\\r\\n                signalLater(line, \\\"delete\\\");\\r\\n            }\\r\\n            this.lines.splice(at, n);\\r\\n        },\\r\\n\\r\\n        // Helper used to collapse a small branch into a single leaf.\\r\\n        collapse: function(lines) {\\r\\n            lines.push.apply(lines, this.lines);\\r\\n        },\\r\\n\\r\\n        // Insert the given array of lines at offset 'at', count them as\\r\\n        // having the given height.\\r\\n        insertInner: function(at, lines, height) {\\r\\n            this.height += height;\\r\\n            this.lines = this.lines.slice(0, at).concat(lines).concat(this.lines.slice(at));\\r\\n            for (var i = 0; i < lines.length; ++i) { lines[i].parent = this; }\\r\\n        },\\r\\n\\r\\n        // Used to iterate over a part of the tree.\\r\\n        iterN: function(at, n, op) {\\r\\n            for (var e = at + n; at < e; ++at)\\r\\n            { if (op(this.lines[at])) { return true } }\\r\\n        }\\r\\n    };\\r\\n\\r\\n    function BranchChunk(children) {\\r\\n        this.children = children;\\r\\n        var size = 0, height = 0;\\r\\n        for (var i = 0; i < children.length; ++i) {\\r\\n            var ch = children[i];\\r\\n            size += ch.chunkSize(); height += ch.height;\\r\\n            ch.parent = this;\\r\\n        }\\r\\n        this.size = size;\\r\\n        this.height = height;\\r\\n        this.parent = null;\\r\\n    }\\r\\n\\r\\n    BranchChunk.prototype = {\\r\\n        chunkSize: function() { return this.size },\\r\\n\\r\\n        removeInner: function(at, n) {\\r\\n            this.size -= n;\\r\\n            for (var i = 0; i < this.children.length; ++i) {\\r\\n                var child = this.children[i], sz = child.chunkSize();\\r\\n                if (at < sz) {\\r\\n                    var rm = Math.min(n, sz - at), oldHeight = child.height;\\r\\n                    child.removeInner(at, rm);\\r\\n                    this.height -= oldHeight - child.height;\\r\\n                    if (sz == rm) { this.children.splice(i--, 1); child.parent = null; }\\r\\n                    if ((n -= rm) == 0) { break }\\r\\n                    at = 0;\\r\\n                } else { at -= sz; }\\r\\n            }\\r\\n            // If the result is smaller than 25 lines, ensure that it is a\\r\\n            // single leaf node.\\r\\n            if (this.size - n < 25 &&\\r\\n                (this.children.length > 1 || !(this.children[0] instanceof LeafChunk))) {\\r\\n                var lines = [];\\r\\n                this.collapse(lines);\\r\\n                this.children = [new LeafChunk(lines)];\\r\\n                this.children[0].parent = this;\\r\\n            }\\r\\n        },\\r\\n\\r\\n        collapse: function(lines) {\\r\\n            for (var i = 0; i < this.children.length; ++i) { this.children[i].collapse(lines); }\\r\\n        },\\r\\n\\r\\n        insertInner: function(at, lines, height) {\\r\\n            this.size += lines.length;\\r\\n            this.height += height;\\r\\n            for (var i = 0; i < this.children.length; ++i) {\\r\\n                var child = this.children[i], sz = child.chunkSize();\\r\\n                if (at <= sz) {\\r\\n                    child.insertInner(at, lines, height);\\r\\n                    if (child.lines && child.lines.length > 50) {\\r\\n                        // To avoid memory thrashing when child.lines is huge (e.g. first view of a large file), it's never spliced.\\r\\n                        // Instead, small slices are taken. They're taken in order because sequential memory accesses are fastest.\\r\\n                        var remaining = child.lines.length % 25 + 25;\\r\\n                        for (var pos = remaining; pos < child.lines.length;) {\\r\\n                            var leaf = new LeafChunk(child.lines.slice(pos, pos += 25));\\r\\n                            child.height -= leaf.height;\\r\\n                            this.children.splice(++i, 0, leaf);\\r\\n                            leaf.parent = this;\\r\\n                        }\\r\\n                        child.lines = child.lines.slice(0, remaining);\\r\\n                        this.maybeSpill();\\r\\n                    }\\r\\n                    break\\r\\n                }\\r\\n                at -= sz;\\r\\n            }\\r\\n        },\\r\\n\\r\\n        // When a node has grown, check whether it should be split.\\r\\n        maybeSpill: function() {\\r\\n            if (this.children.length <= 10) { return }\\r\\n            var me = this;\\r\\n            do {\\r\\n                var spilled = me.children.splice(me.children.length - 5, 5);\\r\\n                var sibling = new BranchChunk(spilled);\\r\\n                if (!me.parent) { // Become the parent node\\r\\n                    var copy = new BranchChunk(me.children);\\r\\n                    copy.parent = me;\\r\\n                    me.children = [copy, sibling];\\r\\n                    me = copy;\\r\\n                } else {\\r\\n                    me.size -= sibling.size;\\r\\n                    me.height -= sibling.height;\\r\\n                    var myIndex = indexOf(me.parent.children, me);\\r\\n                    me.parent.children.splice(myIndex + 1, 0, sibling);\\r\\n                }\\r\\n                sibling.parent = me.parent;\\r\\n            } while (me.children.length > 10)\\r\\n            me.parent.maybeSpill();\\r\\n        },\\r\\n\\r\\n        iterN: function(at, n, op) {\\r\\n            for (var i = 0; i < this.children.length; ++i) {\\r\\n                var child = this.children[i], sz = child.chunkSize();\\r\\n                if (at < sz) {\\r\\n                    var used = Math.min(n, sz - at);\\r\\n                    if (child.iterN(at, used, op)) { return true }\\r\\n                    if ((n -= used) == 0) { break }\\r\\n                    at = 0;\\r\\n                } else { at -= sz; }\\r\\n            }\\r\\n        }\\r\\n    };\\r\\n\\r\\n    // Line widgets are block elements displayed above or below a line.\\r\\n\\r\\n    var LineWidget = function(doc, node, options) {\\r\\n        if (options) { for (var opt in options) { if (options.hasOwnProperty(opt))\\r\\n        { this[opt] = options[opt]; } } }\\r\\n        this.doc = doc;\\r\\n        this.node = node;\\r\\n    };\\r\\n\\r\\n    LineWidget.prototype.clear = function () {\\r\\n        var cm = this.doc.cm, ws = this.line.widgets, line = this.line, no = lineNo(line);\\r\\n        if (no == null || !ws) { return }\\r\\n        for (var i = 0; i < ws.length; ++i) { if (ws[i] == this) { ws.splice(i--, 1); } }\\r\\n        if (!ws.length) { line.widgets = null; }\\r\\n        var height = widgetHeight(this);\\r\\n        updateLineHeight(line, Math.max(0, line.height - height));\\r\\n        if (cm) {\\r\\n            runInOp(cm, function () {\\r\\n                adjustScrollWhenAboveVisible(cm, line, -height);\\r\\n                regLineChange(cm, no, \\\"widget\\\");\\r\\n            });\\r\\n            signalLater(cm, \\\"lineWidgetCleared\\\", cm, this, no);\\r\\n        }\\r\\n    };\\r\\n\\r\\n    LineWidget.prototype.changed = function () {\\r\\n        var this$1 = this;\\r\\n\\r\\n        var oldH = this.height, cm = this.doc.cm, line = this.line;\\r\\n        this.height = null;\\r\\n        var diff = widgetHeight(this) - oldH;\\r\\n        if (!diff) { return }\\r\\n        if (!lineIsHidden(this.doc, line)) { updateLineHeight(line, line.height + diff); }\\r\\n        if (cm) {\\r\\n            runInOp(cm, function () {\\r\\n                cm.curOp.forceUpdate = true;\\r\\n                adjustScrollWhenAboveVisible(cm, line, diff);\\r\\n                signalLater(cm, \\\"lineWidgetChanged\\\", cm, this$1, lineNo(line));\\r\\n            });\\r\\n        }\\r\\n    };\\r\\n    eventMixin(LineWidget);\\r\\n\\r\\n    function adjustScrollWhenAboveVisible(cm, line, diff) {\\r\\n        if (heightAtLine(line) < ((cm.curOp && cm.curOp.scrollTop) || cm.doc.scrollTop))\\r\\n        { addToScrollTop(cm, diff); }\\r\\n    }\\r\\n\\r\\n    function addLineWidget(doc, handle, node, options) {\\r\\n        var widget = new LineWidget(doc, node, options);\\r\\n        var cm = doc.cm;\\r\\n        if (cm && widget.noHScroll) { cm.display.alignWidgets = true; }\\r\\n        changeLine(doc, handle, \\\"widget\\\", function (line) {\\r\\n            var widgets = line.widgets || (line.widgets = []);\\r\\n            if (widget.insertAt == null) { widgets.push(widget); }\\r\\n            else { widgets.splice(Math.min(widgets.length - 1, Math.max(0, widget.insertAt)), 0, widget); }\\r\\n            widget.line = line;\\r\\n            if (cm && !lineIsHidden(doc, line)) {\\r\\n                var aboveVisible = heightAtLine(line) < doc.scrollTop;\\r\\n                updateLineHeight(line, line.height + widgetHeight(widget));\\r\\n                if (aboveVisible) { addToScrollTop(cm, widget.height); }\\r\\n                cm.curOp.forceUpdate = true;\\r\\n            }\\r\\n            return true\\r\\n        });\\r\\n        if (cm) { signalLater(cm, \\\"lineWidgetAdded\\\", cm, widget, typeof handle == \\\"number\\\" ? handle : lineNo(handle)); }\\r\\n        return widget\\r\\n    }\\r\\n\\r\\n    // TEXTMARKERS\\r\\n\\r\\n    // Created with markText and setBookmark methods. A TextMarker is a\\r\\n    // handle that can be used to clear or find a marked position in the\\r\\n    // document. Line objects hold arrays (markedSpans) containing\\r\\n    // {from, to, marker} object pointing to such marker objects, and\\r\\n    // indicating that such a marker is present on that line. Multiple\\r\\n    // lines may point to the same marker when it spans across lines.\\r\\n    // The spans will have null for their from/to properties when the\\r\\n    // marker continues beyond the start/end of the line. Markers have\\r\\n    // links back to the lines they currently touch.\\r\\n\\r\\n    // Collapsed markers have unique ids, in order to be able to order\\r\\n    // them, which is needed for uniquely determining an outer marker\\r\\n    // when they overlap (they may nest, but not partially overlap).\\r\\n    var nextMarkerId = 0;\\r\\n\\r\\n    var TextMarker = function(doc, type) {\\r\\n        this.lines = [];\\r\\n        this.type = type;\\r\\n        this.doc = doc;\\r\\n        this.id = ++nextMarkerId;\\r\\n    };\\r\\n\\r\\n    // Clear the marker.\\r\\n    TextMarker.prototype.clear = function () {\\r\\n        if (this.explicitlyCleared) { return }\\r\\n        var cm = this.doc.cm, withOp = cm && !cm.curOp;\\r\\n        if (withOp) { startOperation(cm); }\\r\\n        if (hasHandler(this, \\\"clear\\\")) {\\r\\n            var found = this.find();\\r\\n            if (found) { signalLater(this, \\\"clear\\\", found.from, found.to); }\\r\\n        }\\r\\n        var min = null, max = null;\\r\\n        for (var i = 0; i < this.lines.length; ++i) {\\r\\n            var line = this.lines[i];\\r\\n            var span = getMarkedSpanFor(line.markedSpans, this);\\r\\n            if (cm && !this.collapsed) { regLineChange(cm, lineNo(line), \\\"text\\\"); }\\r\\n            else if (cm) {\\r\\n                if (span.to != null) { max = lineNo(line); }\\r\\n                if (span.from != null) { min = lineNo(line); }\\r\\n            }\\r\\n            line.markedSpans = removeMarkedSpan(line.markedSpans, span);\\r\\n            if (span.from == null && this.collapsed && !lineIsHidden(this.doc, line) && cm)\\r\\n            { updateLineHeight(line, textHeight(cm.display)); }\\r\\n        }\\r\\n        if (cm && this.collapsed && !cm.options.lineWrapping) { for (var i$1 = 0; i$1 < this.lines.length; ++i$1) {\\r\\n            var visual = visualLine(this.lines[i$1]), len = lineLength(visual);\\r\\n            if (len > cm.display.maxLineLength) {\\r\\n                cm.display.maxLine = visual;\\r\\n                cm.display.maxLineLength = len;\\r\\n                cm.display.maxLineChanged = true;\\r\\n            }\\r\\n        } }\\r\\n\\r\\n        if (min != null && cm && this.collapsed) { regChange(cm, min, max + 1); }\\r\\n        this.lines.length = 0;\\r\\n        this.explicitlyCleared = true;\\r\\n        if (this.atomic && this.doc.cantEdit) {\\r\\n            this.doc.cantEdit = false;\\r\\n            if (cm) { reCheckSelection(cm.doc); }\\r\\n        }\\r\\n        if (cm) { signalLater(cm, \\\"markerCleared\\\", cm, this, min, max); }\\r\\n        if (withOp) { endOperation(cm); }\\r\\n        if (this.parent) { this.parent.clear(); }\\r\\n    };\\r\\n\\r\\n    // Find the position of the marker in the document. Returns a {from,\\r\\n    // to} object by default. Side can be passed to get a specific side\\r\\n    // -- 0 (both), -1 (left), or 1 (right). When lineObj is true, the\\r\\n    // Pos objects returned contain a line object, rather than a line\\r\\n    // number (used to prevent looking up the same line twice).\\r\\n    TextMarker.prototype.find = function (side, lineObj) {\\r\\n        if (side == null && this.type == \\\"bookmark\\\") { side = 1; }\\r\\n        var from, to;\\r\\n        for (var i = 0; i < this.lines.length; ++i) {\\r\\n            var line = this.lines[i];\\r\\n            var span = getMarkedSpanFor(line.markedSpans, this);\\r\\n            if (span.from != null) {\\r\\n                from = Pos(lineObj ? line : lineNo(line), span.from);\\r\\n                if (side == -1) { return from }\\r\\n            }\\r\\n            if (span.to != null) {\\r\\n                to = Pos(lineObj ? line : lineNo(line), span.to);\\r\\n                if (side == 1) { return to }\\r\\n            }\\r\\n        }\\r\\n        return from && {from: from, to: to}\\r\\n    };\\r\\n\\r\\n    // Signals that the marker's widget changed, and surrounding layout\\r\\n    // should be recomputed.\\r\\n    TextMarker.prototype.changed = function () {\\r\\n        var this$1 = this;\\r\\n\\r\\n        var pos = this.find(-1, true), widget = this, cm = this.doc.cm;\\r\\n        if (!pos || !cm) { return }\\r\\n        runInOp(cm, function () {\\r\\n            var line = pos.line, lineN = lineNo(pos.line);\\r\\n            var view = findViewForLine(cm, lineN);\\r\\n            if (view) {\\r\\n                clearLineMeasurementCacheFor(view);\\r\\n                cm.curOp.selectionChanged = cm.curOp.forceUpdate = true;\\r\\n            }\\r\\n            cm.curOp.updateMaxLine = true;\\r\\n            if (!lineIsHidden(widget.doc, line) && widget.height != null) {\\r\\n                var oldHeight = widget.height;\\r\\n                widget.height = null;\\r\\n                var dHeight = widgetHeight(widget) - oldHeight;\\r\\n                if (dHeight)\\r\\n                { updateLineHeight(line, line.height + dHeight); }\\r\\n            }\\r\\n            signalLater(cm, \\\"markerChanged\\\", cm, this$1);\\r\\n        });\\r\\n    };\\r\\n\\r\\n    TextMarker.prototype.attachLine = function (line) {\\r\\n        if (!this.lines.length && this.doc.cm) {\\r\\n            var op = this.doc.cm.curOp;\\r\\n            if (!op.maybeHiddenMarkers || indexOf(op.maybeHiddenMarkers, this) == -1)\\r\\n            { (op.maybeUnhiddenMarkers || (op.maybeUnhiddenMarkers = [])).push(this); }\\r\\n        }\\r\\n        this.lines.push(line);\\r\\n    };\\r\\n\\r\\n    TextMarker.prototype.detachLine = function (line) {\\r\\n        this.lines.splice(indexOf(this.lines, line), 1);\\r\\n        if (!this.lines.length && this.doc.cm) {\\r\\n            var op = this.doc.cm.curOp\\r\\n            ;(op.maybeHiddenMarkers || (op.maybeHiddenMarkers = [])).push(this);\\r\\n        }\\r\\n    };\\r\\n    eventMixin(TextMarker);\\r\\n\\r\\n    // Create a marker, wire it up to the right lines, and\\r\\n    function markText(doc, from, to, options, type) {\\r\\n        // Shared markers (across linked documents) are handled separately\\r\\n        // (markTextShared will call out to this again, once per\\r\\n        // document).\\r\\n        if (options && options.shared) { return markTextShared(doc, from, to, options, type) }\\r\\n        // Ensure we are in an operation.\\r\\n        if (doc.cm && !doc.cm.curOp) { return operation(doc.cm, markText)(doc, from, to, options, type) }\\r\\n\\r\\n        var marker = new TextMarker(doc, type), diff = cmp(from, to);\\r\\n        if (options) { copyObj(options, marker, false); }\\r\\n        // Don't connect empty markers unless clearWhenEmpty is false\\r\\n        if (diff > 0 || diff == 0 && marker.clearWhenEmpty !== false)\\r\\n        { return marker }\\r\\n        if (marker.replacedWith) {\\r\\n            // Showing up as a widget implies collapsed (widget replaces text)\\r\\n            marker.collapsed = true;\\r\\n            marker.widgetNode = eltP(\\\"span\\\", [marker.replacedWith], \\\"CodeMirror-widget\\\");\\r\\n            if (!options.handleMouseEvents) { marker.widgetNode.setAttribute(\\\"cm-ignore-events\\\", \\\"true\\\"); }\\r\\n            if (options.insertLeft) { marker.widgetNode.insertLeft = true; }\\r\\n        }\\r\\n        if (marker.collapsed) {\\r\\n            if (conflictingCollapsedRange(doc, from.line, from, to, marker) ||\\r\\n                from.line != to.line && conflictingCollapsedRange(doc, to.line, from, to, marker))\\r\\n            { throw new Error(\\\"Inserting collapsed marker partially overlapping an existing one\\\") }\\r\\n            seeCollapsedSpans();\\r\\n        }\\r\\n\\r\\n        if (marker.addToHistory)\\r\\n        { addChangeToHistory(doc, {from: from, to: to, origin: \\\"markText\\\"}, doc.sel, NaN); }\\r\\n\\r\\n        var curLine = from.line, cm = doc.cm, updateMaxLine;\\r\\n        doc.iter(curLine, to.line + 1, function (line) {\\r\\n            if (cm && marker.collapsed && !cm.options.lineWrapping && visualLine(line) == cm.display.maxLine)\\r\\n            { updateMaxLine = true; }\\r\\n            if (marker.collapsed && curLine != from.line) { updateLineHeight(line, 0); }\\r\\n            addMarkedSpan(line, new MarkedSpan(marker,\\r\\n                curLine == from.line ? from.ch : null,\\r\\n                curLine == to.line ? to.ch : null));\\r\\n            ++curLine;\\r\\n        });\\r\\n        // lineIsHidden depends on the presence of the spans, so needs a second pass\\r\\n        if (marker.collapsed) { doc.iter(from.line, to.line + 1, function (line) {\\r\\n            if (lineIsHidden(doc, line)) { updateLineHeight(line, 0); }\\r\\n        }); }\\r\\n\\r\\n        if (marker.clearOnEnter) { on(marker, \\\"beforeCursorEnter\\\", function () { return marker.clear(); }); }\\r\\n\\r\\n        if (marker.readOnly) {\\r\\n            seeReadOnlySpans();\\r\\n            if (doc.history.done.length || doc.history.undone.length)\\r\\n            { doc.clearHistory(); }\\r\\n        }\\r\\n        if (marker.collapsed) {\\r\\n            marker.id = ++nextMarkerId;\\r\\n            marker.atomic = true;\\r\\n        }\\r\\n        if (cm) {\\r\\n            // Sync editor state\\r\\n            if (updateMaxLine) { cm.curOp.updateMaxLine = true; }\\r\\n            if (marker.collapsed)\\r\\n            { regChange(cm, from.line, to.line + 1); }\\r\\n            else if (marker.className || marker.startStyle || marker.endStyle || marker.css ||\\r\\n                marker.attributes || marker.title)\\r\\n            { for (var i = from.line; i <= to.line; i++) { regLineChange(cm, i, \\\"text\\\"); } }\\r\\n            if (marker.atomic) { reCheckSelection(cm.doc); }\\r\\n            signalLater(cm, \\\"markerAdded\\\", cm, marker);\\r\\n        }\\r\\n        return marker\\r\\n    }\\r\\n\\r\\n    // SHARED TEXTMARKERS\\r\\n\\r\\n    // A shared marker spans multiple linked documents. It is\\r\\n    // implemented as a meta-marker-object controlling multiple normal\\r\\n    // markers.\\r\\n    var SharedTextMarker = function(markers, primary) {\\r\\n        this.markers = markers;\\r\\n        this.primary = primary;\\r\\n        for (var i = 0; i < markers.length; ++i)\\r\\n        { markers[i].parent = this; }\\r\\n    };\\r\\n\\r\\n    SharedTextMarker.prototype.clear = function () {\\r\\n        if (this.explicitlyCleared) { return }\\r\\n        this.explicitlyCleared = true;\\r\\n        for (var i = 0; i < this.markers.length; ++i)\\r\\n        { this.markers[i].clear(); }\\r\\n        signalLater(this, \\\"clear\\\");\\r\\n    };\\r\\n\\r\\n    SharedTextMarker.prototype.find = function (side, lineObj) {\\r\\n        return this.primary.find(side, lineObj)\\r\\n    };\\r\\n    eventMixin(SharedTextMarker);\\r\\n\\r\\n    function markTextShared(doc, from, to, options, type) {\\r\\n        options = copyObj(options);\\r\\n        options.shared = false;\\r\\n        var markers = [markText(doc, from, to, options, type)], primary = markers[0];\\r\\n        var widget = options.widgetNode;\\r\\n        linkedDocs(doc, function (doc) {\\r\\n            if (widget) { options.widgetNode = widget.cloneNode(true); }\\r\\n            markers.push(markText(doc, clipPos(doc, from), clipPos(doc, to), options, type));\\r\\n            for (var i = 0; i < doc.linked.length; ++i)\\r\\n            { if (doc.linked[i].isParent) { return } }\\r\\n            primary = lst(markers);\\r\\n        });\\r\\n        return new SharedTextMarker(markers, primary)\\r\\n    }\\r\\n\\r\\n    function findSharedMarkers(doc) {\\r\\n        return doc.findMarks(Pos(doc.first, 0), doc.clipPos(Pos(doc.lastLine())), function (m) { return m.parent; })\\r\\n    }\\r\\n\\r\\n    function copySharedMarkers(doc, markers) {\\r\\n        for (var i = 0; i < markers.length; i++) {\\r\\n            var marker = markers[i], pos = marker.find();\\r\\n            var mFrom = doc.clipPos(pos.from), mTo = doc.clipPos(pos.to);\\r\\n            if (cmp(mFrom, mTo)) {\\r\\n                var subMark = markText(doc, mFrom, mTo, marker.primary, marker.primary.type);\\r\\n                marker.markers.push(subMark);\\r\\n                subMark.parent = marker;\\r\\n            }\\r\\n        }\\r\\n    }\\r\\n\\r\\n    function detachSharedMarkers(markers) {\\r\\n        var loop = function ( i ) {\\r\\n            var marker = markers[i], linked = [marker.primary.doc];\\r\\n            linkedDocs(marker.primary.doc, function (d) { return linked.push(d); });\\r\\n            for (var j = 0; j < marker.markers.length; j++) {\\r\\n                var subMarker = marker.markers[j];\\r\\n                if (indexOf(linked, subMarker.doc) == -1) {\\r\\n                    subMarker.parent = null;\\r\\n                    marker.markers.splice(j--, 1);\\r\\n                }\\r\\n            }\\r\\n        };\\r\\n\\r\\n        for (var i = 0; i < markers.length; i++) loop( i );\\r\\n    }\\r\\n\\r\\n    var nextDocId = 0;\\r\\n    var Doc = function(text, mode, firstLine, lineSep, direction) {\\r\\n        if (!(this instanceof Doc)) { return new Doc(text, mode, firstLine, lineSep, direction) }\\r\\n        if (firstLine == null) { firstLine = 0; }\\r\\n\\r\\n        BranchChunk.call(this, [new LeafChunk([new Line(\\\"\\\", null)])]);\\r\\n        this.first = firstLine;\\r\\n        this.scrollTop = this.scrollLeft = 0;\\r\\n        this.cantEdit = false;\\r\\n        this.cleanGeneration = 1;\\r\\n        this.modeFrontier = this.highlightFrontier = firstLine;\\r\\n        var start = Pos(firstLine, 0);\\r\\n        this.sel = simpleSelection(start);\\r\\n        this.history = new History(null);\\r\\n        this.id = ++nextDocId;\\r\\n        this.modeOption = mode;\\r\\n        this.lineSep = lineSep;\\r\\n        this.direction = (direction == \\\"rtl\\\") ? \\\"rtl\\\" : \\\"ltr\\\";\\r\\n        this.extend = false;\\r\\n\\r\\n        if (typeof text == \\\"string\\\") { text = this.splitLines(text); }\\r\\n        updateDoc(this, {from: start, to: start, text: text});\\r\\n        setSelection(this, simpleSelection(start), sel_dontScroll);\\r\\n    };\\r\\n\\r\\n    Doc.prototype = createObj(BranchChunk.prototype, {\\r\\n        constructor: Doc,\\r\\n        // Iterate over the document. Supports two forms -- with only one\\r\\n        // argument, it calls that for each line in the document. With\\r\\n        // three, it iterates over the range given by the first two (with\\r\\n        // the second being non-inclusive).\\r\\n        iter: function(from, to, op) {\\r\\n            if (op) { this.iterN(from - this.first, to - from, op); }\\r\\n            else { this.iterN(this.first, this.first + this.size, from); }\\r\\n        },\\r\\n\\r\\n        // Non-public interface for adding and removing lines.\\r\\n        insert: function(at, lines) {\\r\\n            var height = 0;\\r\\n            for (var i = 0; i < lines.length; ++i) { height += lines[i].height; }\\r\\n            this.insertInner(at - this.first, lines, height);\\r\\n        },\\r\\n        remove: function(at, n) { this.removeInner(at - this.first, n); },\\r\\n\\r\\n        // From here, the methods are part of the public interface. Most\\r\\n        // are also available from CodeMirror (editor) instances.\\r\\n\\r\\n        getValue: function(lineSep, lineFilter) {\\r\\n            var lines = getLines(this, this.first, this.first + this.size, lineFilter);\\r\\n            if (lineSep === false) { return lines }\\r\\n            return lines.join(lineSep || this.lineSeparator())\\r\\n        },\\r\\n        setValue: docMethodOp(function(code) {\\r\\n            var top = Pos(this.first, 0), last = this.first + this.size - 1;\\r\\n            makeChange(this, {from: top, to: Pos(last, getLine(this, last).text.length),\\r\\n                text: this.splitLines(code), origin: \\\"setValue\\\", full: true}, true);\\r\\n            if (this.cm) { scrollToCoords(this.cm, 0, 0); }\\r\\n            setSelection(this, simpleSelection(top), sel_dontScroll);\\r\\n        }),\\r\\n        replaceRange: function(code, from, to, origin) {\\r\\n            from = clipPos(this, from);\\r\\n            to = to ? clipPos(this, to) : from;\\r\\n            replaceRange(this, code, from, to, origin);\\r\\n        },\\r\\n        getRange: function(from, to, lineSep) {\\r\\n            var lines = getBetween(this, clipPos(this, from), clipPos(this, to));\\r\\n            if (lineSep === false) { return lines }\\r\\n            return lines.join(lineSep || this.lineSeparator())\\r\\n        },\\r\\n\\r\\n        getLine: function(line) {var l = this.getLineHandle(line); return l && l.text},\\r\\n\\r\\n        getLineHandle: function(line) {if (isLine(this, line)) { return getLine(this, line) }},\\r\\n        getLineNumber: function(line) {return lineNo(line)},\\r\\n\\r\\n        getLineHandleVisualStart: function(line) {\\r\\n            if (typeof line == \\\"number\\\") { line = getLine(this, line); }\\r\\n            return visualLine(line)\\r\\n        },\\r\\n\\r\\n        lineCount: function() {return this.size},\\r\\n        firstLine: function() {return this.first},\\r\\n        lastLine: function() {return this.first + this.size - 1},\\r\\n\\r\\n        clipPos: function(pos) {return clipPos(this, pos)},\\r\\n\\r\\n        getCursor: function(start) {\\r\\n            var range$$1 = this.sel.primary(), pos;\\r\\n            if (start == null || start == \\\"head\\\") { pos = range$$1.head; }\\r\\n            else if (start == \\\"anchor\\\") { pos = range$$1.anchor; }\\r\\n            else if (start == \\\"end\\\" || start == \\\"to\\\" || start === false) { pos = range$$1.to(); }\\r\\n            else { pos = range$$1.from(); }\\r\\n            return pos\\r\\n        },\\r\\n        listSelections: function() { return this.sel.ranges },\\r\\n        somethingSelected: function() {return this.sel.somethingSelected()},\\r\\n\\r\\n        setCursor: docMethodOp(function(line, ch, options) {\\r\\n            setSimpleSelection(this, clipPos(this, typeof line == \\\"number\\\" ? Pos(line, ch || 0) : line), null, options);\\r\\n        }),\\r\\n        setSelection: docMethodOp(function(anchor, head, options) {\\r\\n            setSimpleSelection(this, clipPos(this, anchor), clipPos(this, head || anchor), options);\\r\\n        }),\\r\\n        extendSelection: docMethodOp(function(head, other, options) {\\r\\n            extendSelection(this, clipPos(this, head), other && clipPos(this, other), options);\\r\\n        }),\\r\\n        extendSelections: docMethodOp(function(heads, options) {\\r\\n            extendSelections(this, clipPosArray(this, heads), options);\\r\\n        }),\\r\\n        extendSelectionsBy: docMethodOp(function(f, options) {\\r\\n            var heads = map(this.sel.ranges, f);\\r\\n            extendSelections(this, clipPosArray(this, heads), options);\\r\\n        }),\\r\\n        setSelections: docMethodOp(function(ranges, primary, options) {\\r\\n            if (!ranges.length) { return }\\r\\n            var out = [];\\r\\n            for (var i = 0; i < ranges.length; i++)\\r\\n            { out[i] = new Range(clipPos(this, ranges[i].anchor),\\r\\n                clipPos(this, ranges[i].head)); }\\r\\n            if (primary == null) { primary = Math.min(ranges.length - 1, this.sel.primIndex); }\\r\\n            setSelection(this, normalizeSelection(this.cm, out, primary), options);\\r\\n        }),\\r\\n        addSelection: docMethodOp(function(anchor, head, options) {\\r\\n            var ranges = this.sel.ranges.slice(0);\\r\\n            ranges.push(new Range(clipPos(this, anchor), clipPos(this, head || anchor)));\\r\\n            setSelection(this, normalizeSelection(this.cm, ranges, ranges.length - 1), options);\\r\\n        }),\\r\\n\\r\\n        getSelection: function(lineSep) {\\r\\n            var ranges = this.sel.ranges, lines;\\r\\n            for (var i = 0; i < ranges.length; i++) {\\r\\n                var sel = getBetween(this, ranges[i].from(), ranges[i].to());\\r\\n                lines = lines ? lines.concat(sel) : sel;\\r\\n            }\\r\\n            if (lineSep === false) { return lines }\\r\\n            else { return lines.join(lineSep || this.lineSeparator()) }\\r\\n        },\\r\\n        getSelections: function(lineSep) {\\r\\n            var parts = [], ranges = this.sel.ranges;\\r\\n            for (var i = 0; i < ranges.length; i++) {\\r\\n                var sel = getBetween(this, ranges[i].from(), ranges[i].to());\\r\\n                if (lineSep !== false) { sel = sel.join(lineSep || this.lineSeparator()); }\\r\\n                parts[i] = sel;\\r\\n            }\\r\\n            return parts\\r\\n        },\\r\\n        replaceSelection: function(code, collapse, origin) {\\r\\n            var dup = [];\\r\\n            for (var i = 0; i < this.sel.ranges.length; i++)\\r\\n            { dup[i] = code; }\\r\\n            this.replaceSelections(dup, collapse, origin || \\\"+input\\\");\\r\\n        },\\r\\n        replaceSelections: docMethodOp(function(code, collapse, origin) {\\r\\n            var changes = [], sel = this.sel;\\r\\n            for (var i = 0; i < sel.ranges.length; i++) {\\r\\n                var range$$1 = sel.ranges[i];\\r\\n                changes[i] = {from: range$$1.from(), to: range$$1.to(), text: this.splitLines(code[i]), origin: origin};\\r\\n            }\\r\\n            var newSel = collapse && collapse != \\\"end\\\" && computeReplacedSel(this, changes, collapse);\\r\\n            for (var i$1 = changes.length - 1; i$1 >= 0; i$1--)\\r\\n            { makeChange(this, changes[i$1]); }\\r\\n            if (newSel) { setSelectionReplaceHistory(this, newSel); }\\r\\n            else if (this.cm) { ensureCursorVisible(this.cm); }\\r\\n        }),\\r\\n        undo: docMethodOp(function() {makeChangeFromHistory(this, \\\"undo\\\");}),\\r\\n        redo: docMethodOp(function() {makeChangeFromHistory(this, \\\"redo\\\");}),\\r\\n        undoSelection: docMethodOp(function() {makeChangeFromHistory(this, \\\"undo\\\", true);}),\\r\\n        redoSelection: docMethodOp(function() {makeChangeFromHistory(this, \\\"redo\\\", true);}),\\r\\n\\r\\n        setExtending: function(val) {this.extend = val;},\\r\\n        getExtending: function() {return this.extend},\\r\\n\\r\\n        historySize: function() {\\r\\n            var hist = this.history, done = 0, undone = 0;\\r\\n            for (var i = 0; i < hist.done.length; i++) { if (!hist.done[i].ranges) { ++done; } }\\r\\n            for (var i$1 = 0; i$1 < hist.undone.length; i$1++) { if (!hist.undone[i$1].ranges) { ++undone; } }\\r\\n            return {undo: done, redo: undone}\\r\\n        },\\r\\n        clearHistory: function() {this.history = new History(this.history.maxGeneration);},\\r\\n\\r\\n        markClean: function() {\\r\\n            this.cleanGeneration = this.changeGeneration(true);\\r\\n        },\\r\\n        changeGeneration: function(forceSplit) {\\r\\n            if (forceSplit)\\r\\n            { this.history.lastOp = this.history.lastSelOp = this.history.lastOrigin = null; }\\r\\n            return this.history.generation\\r\\n        },\\r\\n        isClean: function (gen) {\\r\\n            return this.history.generation == (gen || this.cleanGeneration)\\r\\n        },\\r\\n\\r\\n        getHistory: function() {\\r\\n            return {done: copyHistoryArray(this.history.done),\\r\\n                undone: copyHistoryArray(this.history.undone)}\\r\\n        },\\r\\n        setHistory: function(histData) {\\r\\n            var hist = this.history = new History(this.history.maxGeneration);\\r\\n            hist.done = copyHistoryArray(histData.done.slice(0), null, true);\\r\\n            hist.undone = copyHistoryArray(histData.undone.slice(0), null, true);\\r\\n        },\\r\\n\\r\\n        setGutterMarker: docMethodOp(function(line, gutterID, value) {\\r\\n            return changeLine(this, line, \\\"gutter\\\", function (line) {\\r\\n                var markers = line.gutterMarkers || (line.gutterMarkers = {});\\r\\n                markers[gutterID] = value;\\r\\n                if (!value && isEmpty(markers)) { line.gutterMarkers = null; }\\r\\n                return true\\r\\n            })\\r\\n        }),\\r\\n\\r\\n        clearGutter: docMethodOp(function(gutterID) {\\r\\n            var this$1 = this;\\r\\n\\r\\n            this.iter(function (line) {\\r\\n                if (line.gutterMarkers && line.gutterMarkers[gutterID]) {\\r\\n                    changeLine(this$1, line, \\\"gutter\\\", function () {\\r\\n                        line.gutterMarkers[gutterID] = null;\\r\\n                        if (isEmpty(line.gutterMarkers)) { line.gutterMarkers = null; }\\r\\n                        return true\\r\\n                    });\\r\\n                }\\r\\n            });\\r\\n        }),\\r\\n\\r\\n        lineInfo: function(line) {\\r\\n            var n;\\r\\n            if (typeof line == \\\"number\\\") {\\r\\n                if (!isLine(this, line)) { return null }\\r\\n                n = line;\\r\\n                line = getLine(this, line);\\r\\n                if (!line) { return null }\\r\\n            } else {\\r\\n                n = lineNo(line);\\r\\n                if (n == null) { return null }\\r\\n            }\\r\\n            return {line: n, handle: line, text: line.text, gutterMarkers: line.gutterMarkers,\\r\\n                textClass: line.textClass, bgClass: line.bgClass, wrapClass: line.wrapClass,\\r\\n                widgets: line.widgets}\\r\\n        },\\r\\n\\r\\n        addLineClass: docMethodOp(function(handle, where, cls) {\\r\\n            return changeLine(this, handle, where == \\\"gutter\\\" ? \\\"gutter\\\" : \\\"class\\\", function (line) {\\r\\n                var prop = where == \\\"text\\\" ? \\\"textClass\\\"\\r\\n                    : where == \\\"background\\\" ? \\\"bgClass\\\"\\r\\n                        : where == \\\"gutter\\\" ? \\\"gutterClass\\\" : \\\"wrapClass\\\";\\r\\n                if (!line[prop]) { line[prop] = cls; }\\r\\n                else if (classTest(cls).test(line[prop])) { return false }\\r\\n                else { line[prop] += \\\" \\\" + cls; }\\r\\n                return true\\r\\n            })\\r\\n        }),\\r\\n        removeLineClass: docMethodOp(function(handle, where, cls) {\\r\\n            return changeLine(this, handle, where == \\\"gutter\\\" ? \\\"gutter\\\" : \\\"class\\\", function (line) {\\r\\n                var prop = where == \\\"text\\\" ? \\\"textClass\\\"\\r\\n                    : where == \\\"background\\\" ? \\\"bgClass\\\"\\r\\n                        : where == \\\"gutter\\\" ? \\\"gutterClass\\\" : \\\"wrapClass\\\";\\r\\n                var cur = line[prop];\\r\\n                if (!cur) { return false }\\r\\n                else if (cls == null) { line[prop] = null; }\\r\\n                else {\\r\\n                    var found = cur.match(classTest(cls));\\r\\n                    if (!found) { return false }\\r\\n                    var end = found.index + found[0].length;\\r\\n                    line[prop] = cur.slice(0, found.index) + (!found.index || end == cur.length ? \\\"\\\" : \\\" \\\") + cur.slice(end) || null;\\r\\n                }\\r\\n                return true\\r\\n            })\\r\\n        }),\\r\\n\\r\\n        addLineWidget: docMethodOp(function(handle, node, options) {\\r\\n            return addLineWidget(this, handle, node, options)\\r\\n        }),\\r\\n        removeLineWidget: function(widget) { widget.clear(); },\\r\\n\\r\\n        markText: function(from, to, options) {\\r\\n            return markText(this, clipPos(this, from), clipPos(this, to), options, options && options.type || \\\"range\\\")\\r\\n        },\\r\\n        setBookmark: function(pos, options) {\\r\\n            var realOpts = {replacedWith: options && (options.nodeType == null ? options.widget : options),\\r\\n                insertLeft: options && options.insertLeft,\\r\\n                clearWhenEmpty: false, shared: options && options.shared,\\r\\n                handleMouseEvents: options && options.handleMouseEvents};\\r\\n            pos = clipPos(this, pos);\\r\\n            return markText(this, pos, pos, realOpts, \\\"bookmark\\\")\\r\\n        },\\r\\n        findMarksAt: function(pos) {\\r\\n            pos = clipPos(this, pos);\\r\\n            var markers = [], spans = getLine(this, pos.line).markedSpans;\\r\\n            if (spans) { for (var i = 0; i < spans.length; ++i) {\\r\\n                var span = spans[i];\\r\\n                if ((span.from == null || span.from <= pos.ch) &&\\r\\n                    (span.to == null || span.to >= pos.ch))\\r\\n                { markers.push(span.marker.parent || span.marker); }\\r\\n            } }\\r\\n            return markers\\r\\n        },\\r\\n        findMarks: function(from, to, filter) {\\r\\n            from = clipPos(this, from); to = clipPos(this, to);\\r\\n            var found = [], lineNo$$1 = from.line;\\r\\n            this.iter(from.line, to.line + 1, function (line) {\\r\\n                var spans = line.markedSpans;\\r\\n                if (spans) { for (var i = 0; i < spans.length; i++) {\\r\\n                    var span = spans[i];\\r\\n                    if (!(span.to != null && lineNo$$1 == from.line && from.ch >= span.to ||\\r\\n                        span.from == null && lineNo$$1 != from.line ||\\r\\n                        span.from != null && lineNo$$1 == to.line && span.from >= to.ch) &&\\r\\n                        (!filter || filter(span.marker)))\\r\\n                    { found.push(span.marker.parent || span.marker); }\\r\\n                } }\\r\\n                ++lineNo$$1;\\r\\n            });\\r\\n            return found\\r\\n        },\\r\\n        getAllMarks: function() {\\r\\n            var markers = [];\\r\\n            this.iter(function (line) {\\r\\n                var sps = line.markedSpans;\\r\\n                if (sps) { for (var i = 0; i < sps.length; ++i)\\r\\n                { if (sps[i].from != null) { markers.push(sps[i].marker); } } }\\r\\n            });\\r\\n            return markers\\r\\n        },\\r\\n\\r\\n        posFromIndex: function(off) {\\r\\n            var ch, lineNo$$1 = this.first, sepSize = this.lineSeparator().length;\\r\\n            this.iter(function (line) {\\r\\n                var sz = line.text.length + sepSize;\\r\\n                if (sz > off) { ch = off; return true }\\r\\n                off -= sz;\\r\\n                ++lineNo$$1;\\r\\n            });\\r\\n            return clipPos(this, Pos(lineNo$$1, ch))\\r\\n        },\\r\\n        indexFromPos: function (coords) {\\r\\n            coords = clipPos(this, coords);\\r\\n            var index = coords.ch;\\r\\n            if (coords.line < this.first || coords.ch < 0) { return 0 }\\r\\n            var sepSize = this.lineSeparator().length;\\r\\n            this.iter(this.first, coords.line, function (line) { // iter aborts when callback returns a truthy value\\r\\n                index += line.text.length + sepSize;\\r\\n            });\\r\\n            return index\\r\\n        },\\r\\n\\r\\n        copy: function(copyHistory) {\\r\\n            var doc = new Doc(getLines(this, this.first, this.first + this.size),\\r\\n                this.modeOption, this.first, this.lineSep, this.direction);\\r\\n            doc.scrollTop = this.scrollTop; doc.scrollLeft = this.scrollLeft;\\r\\n            doc.sel = this.sel;\\r\\n            doc.extend = false;\\r\\n            if (copyHistory) {\\r\\n                doc.history.undoDepth = this.history.undoDepth;\\r\\n                doc.setHistory(this.getHistory());\\r\\n            }\\r\\n            return doc\\r\\n        },\\r\\n\\r\\n        linkedDoc: function(options) {\\r\\n            if (!options) { options = {}; }\\r\\n            var from = this.first, to = this.first + this.size;\\r\\n            if (options.from != null && options.from > from) { from = options.from; }\\r\\n            if (options.to != null && options.to < to) { to = options.to; }\\r\\n            var copy = new Doc(getLines(this, from, to), options.mode || this.modeOption, from, this.lineSep, this.direction);\\r\\n            if (options.sharedHist) { copy.history = this.history\\r\\n            ; }(this.linked || (this.linked = [])).push({doc: copy, sharedHist: options.sharedHist});\\r\\n            copy.linked = [{doc: this, isParent: true, sharedHist: options.sharedHist}];\\r\\n            copySharedMarkers(copy, findSharedMarkers(this));\\r\\n            return copy\\r\\n        },\\r\\n        unlinkDoc: function(other) {\\r\\n            if (other instanceof CodeMirror) { other = other.doc; }\\r\\n            if (this.linked) { for (var i = 0; i < this.linked.length; ++i) {\\r\\n                var link = this.linked[i];\\r\\n                if (link.doc != other) { continue }\\r\\n                this.linked.splice(i, 1);\\r\\n                other.unlinkDoc(this);\\r\\n                detachSharedMarkers(findSharedMarkers(this));\\r\\n                break\\r\\n            } }\\r\\n            // If the histories were shared, split them again\\r\\n            if (other.history == this.history) {\\r\\n                var splitIds = [other.id];\\r\\n                linkedDocs(other, function (doc) { return splitIds.push(doc.id); }, true);\\r\\n                other.history = new History(null);\\r\\n                other.history.done = copyHistoryArray(this.history.done, splitIds);\\r\\n                other.history.undone = copyHistoryArray(this.history.undone, splitIds);\\r\\n            }\\r\\n        },\\r\\n        iterLinkedDocs: function(f) {linkedDocs(this, f);},\\r\\n\\r\\n        getMode: function() {return this.mode},\\r\\n        getEditor: function() {return this.cm},\\r\\n\\r\\n        splitLines: function(str) {\\r\\n            if (this.lineSep) { return str.split(this.lineSep) }\\r\\n            return splitLinesAuto(str)\\r\\n        },\\r\\n        lineSeparator: function() { return this.lineSep || \\\"\\\\n\\\" },\\r\\n\\r\\n        setDirection: docMethodOp(function (dir) {\\r\\n            if (dir != \\\"rtl\\\") { dir = \\\"ltr\\\"; }\\r\\n            if (dir == this.direction) { return }\\r\\n            this.direction = dir;\\r\\n            this.iter(function (line) { return line.order = null; });\\r\\n            if (this.cm) { directionChanged(this.cm); }\\r\\n        })\\r\\n    });\\r\\n\\r\\n    // Public alias.\\r\\n    Doc.prototype.eachLine = Doc.prototype.iter;\\r\\n\\r\\n    // Kludge to work around strange IE behavior where it'll sometimes\\r\\n    // re-fire a series of drag-related events right after the drop (#1551)\\r\\n    var lastDrop = 0;\\r\\n\\r\\n    function onDrop(e) {\\r\\n        var cm = this;\\r\\n        clearDragCursor(cm);\\r\\n        if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e))\\r\\n        { return }\\r\\n        e_preventDefault(e);\\r\\n        if (ie) { lastDrop = +new Date; }\\r\\n        var pos = posFromMouse(cm, e, true), files = e.dataTransfer.files;\\r\\n        if (!pos || cm.isReadOnly()) { return }\\r\\n        // Might be a file drop, in which case we simply extract the text\\r\\n        // and insert it.\\r\\n        if (files && files.length && window.FileReader && window.File) {\\r\\n            var n = files.length, text = Array(n), read = 0;\\r\\n            var loadFile = function (file, i) {\\r\\n                if (cm.options.allowDropFileTypes &&\\r\\n                    indexOf(cm.options.allowDropFileTypes, file.type) == -1)\\r\\n                { return }\\r\\n\\r\\n                var reader = new FileReader;\\r\\n                reader.onload = operation(cm, function () {\\r\\n                    var content = reader.result;\\r\\n                    if (/[\\\\x00-\\\\x08\\\\x0e-\\\\x1f]{2}/.test(content)) { content = \\\"\\\"; }\\r\\n                    text[i] = content;\\r\\n                    if (++read == n) {\\r\\n                        pos = clipPos(cm.doc, pos);\\r\\n                        var change = {from: pos, to: pos,\\r\\n                            text: cm.doc.splitLines(text.join(cm.doc.lineSeparator())),\\r\\n                            origin: \\\"paste\\\"};\\r\\n                        makeChange(cm.doc, change);\\r\\n                        setSelectionReplaceHistory(cm.doc, simpleSelection(pos, changeEnd(change)));\\r\\n                    }\\r\\n                });\\r\\n                reader.readAsText(file);\\r\\n            };\\r\\n            for (var i = 0; i < n; ++i) { loadFile(files[i], i); }\\r\\n        } else { // Normal drop\\r\\n            // Don't do a replace if the drop happened inside of the selected text.\\r\\n            if (cm.state.draggingText && cm.doc.sel.contains(pos) > -1) {\\r\\n                cm.state.draggingText(e);\\r\\n                // Ensure the editor is re-focused\\r\\n                setTimeout(function () { return cm.display.input.focus(); }, 20);\\r\\n                return\\r\\n            }\\r\\n            try {\\r\\n                var text$1 = e.dataTransfer.getData(\\\"Text\\\");\\r\\n                if (text$1) {\\r\\n                    var selected;\\r\\n                    if (cm.state.draggingText && !cm.state.draggingText.copy)\\r\\n                    { selected = cm.listSelections(); }\\r\\n                    setSelectionNoUndo(cm.doc, simpleSelection(pos, pos));\\r\\n                    if (selected) { for (var i$1 = 0; i$1 < selected.length; ++i$1)\\r\\n                    { replaceRange(cm.doc, \\\"\\\", selected[i$1].anchor, selected[i$1].head, \\\"drag\\\"); } }\\r\\n                    cm.replaceSelection(text$1, \\\"around\\\", \\\"paste\\\");\\r\\n                    cm.display.input.focus();\\r\\n                }\\r\\n            }\\r\\n            catch(e){}\\r\\n        }\\r\\n    }\\r\\n\\r\\n    function onDragStart(cm, e) {\\r\\n        if (ie && (!cm.state.draggingText || +new Date - lastDrop < 100)) { e_stop(e); return }\\r\\n        if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e)) { return }\\r\\n\\r\\n        e.dataTransfer.setData(\\\"Text\\\", cm.getSelection());\\r\\n        e.dataTransfer.effectAllowed = \\\"copyMove\\\";\\r\\n\\r\\n        // Use dummy image instead of default browsers image.\\r\\n        // Recent Safari (~6.0.2) have a tendency to segfault when this happens, so we don't do it there.\\r\\n        if (e.dataTransfer.setDragImage && !safari) {\\r\\n            var img = elt(\\\"img\\\", null, null, \\\"position: fixed; left: 0; top: 0;\\\");\\r\\n            img.src = \\\"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\\\";\\r\\n            if (presto) {\\r\\n                img.width = img.height = 1;\\r\\n                cm.display.wrapper.appendChild(img);\\r\\n                // Force a relayout, or Opera won't use our image for some obscure reason\\r\\n                img._top = img.offsetTop;\\r\\n            }\\r\\n            e.dataTransfer.setDragImage(img, 0, 0);\\r\\n            if (presto) { img.parentNode.removeChild(img); }\\r\\n        }\\r\\n    }\\r\\n\\r\\n    function onDragOver(cm, e) {\\r\\n        var pos = posFromMouse(cm, e);\\r\\n        if (!pos) { return }\\r\\n        var frag = document.createDocumentFragment();\\r\\n        drawSelectionCursor(cm, pos, frag);\\r\\n        if (!cm.display.dragCursor) {\\r\\n            cm.display.dragCursor = elt(\\\"div\\\", null, \\\"CodeMirror-cursors CodeMirror-dragcursors\\\");\\r\\n            cm.display.lineSpace.insertBefore(cm.display.dragCursor, cm.display.cursorDiv);\\r\\n        }\\r\\n        removeChildrenAndAdd(cm.display.dragCursor, frag);\\r\\n    }\\r\\n\\r\\n    function clearDragCursor(cm) {\\r\\n        if (cm.display.dragCursor) {\\r\\n            cm.display.lineSpace.removeChild(cm.display.dragCursor);\\r\\n            cm.display.dragCursor = null;\\r\\n        }\\r\\n    }\\r\\n\\r\\n    // These must be handled carefully, because naively registering a\\r\\n    // handler for each editor will cause the editors to never be\\r\\n    // garbage collected.\\r\\n\\r\\n    function forEachCodeMirror(f) {\\r\\n        if (!document.getElementsByClassName) { return }\\r\\n        var byClass = document.getElementsByClassName(\\\"CodeMirror\\\"), editors = [];\\r\\n        for (var i = 0; i < byClass.length; i++) {\\r\\n            var cm = byClass[i].CodeMirror;\\r\\n            if (cm) { editors.push(cm); }\\r\\n        }\\r\\n        if (editors.length) { editors[0].operation(function () {\\r\\n            for (var i = 0; i < editors.length; i++) { f(editors[i]); }\\r\\n        }); }\\r\\n    }\\r\\n\\r\\n    var globalsRegistered = false;\\r\\n    function ensureGlobalHandlers() {\\r\\n        if (globalsRegistered) { return }\\r\\n        registerGlobalHandlers();\\r\\n        globalsRegistered = true;\\r\\n    }\\r\\n    function registerGlobalHandlers() {\\r\\n        // When the window resizes, we need to refresh active editors.\\r\\n        var resizeTimer;\\r\\n        on(window, \\\"resize\\\", function () {\\r\\n            if (resizeTimer == null) { resizeTimer = setTimeout(function () {\\r\\n                resizeTimer = null;\\r\\n                forEachCodeMirror(onResize);\\r\\n            }, 100); }\\r\\n        });\\r\\n        // When the window loses focus, we want to show the editor as blurred\\r\\n        on(window, \\\"blur\\\", function () { return forEachCodeMirror(onBlur); });\\r\\n    }\\r\\n    // Called when the window resizes\\r\\n    function onResize(cm) {\\r\\n        var d = cm.display;\\r\\n        // Might be a text scaling operation, clear size caches.\\r\\n        d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null;\\r\\n        d.scrollbarsClipped = false;\\r\\n        cm.setSize();\\r\\n    }\\r\\n\\r\\n    var keyNames = {\\r\\n        3: \\\"Pause\\\", 8: \\\"Backspace\\\", 9: \\\"Tab\\\", 13: \\\"Enter\\\", 16: \\\"Shift\\\", 17: \\\"Ctrl\\\", 18: \\\"Alt\\\",\\r\\n        19: \\\"Pause\\\", 20: \\\"CapsLock\\\", 27: \\\"Esc\\\", 32: \\\"Space\\\", 33: \\\"PageUp\\\", 34: \\\"PageDown\\\", 35: \\\"End\\\",\\r\\n        36: \\\"Home\\\", 37: \\\"Left\\\", 38: \\\"Up\\\", 39: \\\"Right\\\", 40: \\\"Down\\\", 44: \\\"PrintScrn\\\", 45: \\\"Insert\\\",\\r\\n        46: \\\"Delete\\\", 59: \\\";\\\", 61: \\\"=\\\", 91: \\\"Mod\\\", 92: \\\"Mod\\\", 93: \\\"Mod\\\",\\r\\n        106: \\\"*\\\", 107: \\\"=\\\", 109: \\\"-\\\", 110: \\\".\\\", 111: \\\"/\\\", 127: \\\"Delete\\\", 145: \\\"ScrollLock\\\",\\r\\n        173: \\\"-\\\", 186: \\\";\\\", 187: \\\"=\\\", 188: \\\",\\\", 189: \\\"-\\\", 190: \\\".\\\", 191: \\\"/\\\", 192: \\\"`\\\", 219: \\\"[\\\", 220: \\\"\\\\\\\\\\\",\\r\\n        221: \\\"]\\\", 222: \\\"'\\\", 63232: \\\"Up\\\", 63233: \\\"Down\\\", 63234: \\\"Left\\\", 63235: \\\"Right\\\", 63272: \\\"Delete\\\",\\r\\n        63273: \\\"Home\\\", 63275: \\\"End\\\", 63276: \\\"PageUp\\\", 63277: \\\"PageDown\\\", 63302: \\\"Insert\\\"\\r\\n    };\\r\\n\\r\\n    // Number keys\\r\\n    for (var i = 0; i < 10; i++) { keyNames[i + 48] = keyNames[i + 96] = String(i); }\\r\\n    // Alphabetic keys\\r\\n    for (var i$1 = 65; i$1 <= 90; i$1++) { keyNames[i$1] = String.fromCharCode(i$1); }\\r\\n    // Function keys\\r\\n    for (var i$2 = 1; i$2 <= 12; i$2++) { keyNames[i$2 + 111] = keyNames[i$2 + 63235] = \\\"F\\\" + i$2; }\\r\\n\\r\\n    var keyMap = {};\\r\\n\\r\\n    keyMap.basic = {\\r\\n        \\\"Left\\\": \\\"goCharLeft\\\", \\\"Right\\\": \\\"goCharRight\\\", \\\"Up\\\": \\\"goLineUp\\\", \\\"Down\\\": \\\"goLineDown\\\",\\r\\n        \\\"End\\\": \\\"goLineEnd\\\", \\\"Home\\\": \\\"goLineStartSmart\\\", \\\"PageUp\\\": \\\"goPageUp\\\", \\\"PageDown\\\": \\\"goPageDown\\\",\\r\\n        \\\"Delete\\\": \\\"delCharAfter\\\", \\\"Backspace\\\": \\\"delCharBefore\\\", \\\"Shift-Backspace\\\": \\\"delCharBefore\\\",\\r\\n        \\\"Tab\\\": \\\"defaultTab\\\", \\\"Shift-Tab\\\": \\\"indentAuto\\\",\\r\\n        \\\"Enter\\\": \\\"newlineAndIndent\\\", \\\"Insert\\\": \\\"toggleOverwrite\\\",\\r\\n        \\\"Esc\\\": \\\"singleSelection\\\"\\r\\n    };\\r\\n    // Note that the save and find-related commands aren't defined by\\r\\n    // default. User code or addons can define them. Unknown commands\\r\\n    // are simply ignored.\\r\\n    keyMap.pcDefault = {\\r\\n        \\\"Ctrl-A\\\": \\\"selectAll\\\", \\\"Ctrl-D\\\": \\\"deleteLine\\\", \\\"Ctrl-Z\\\": \\\"undo\\\", \\\"Shift-Ctrl-Z\\\": \\\"redo\\\", \\\"Ctrl-Y\\\": \\\"redo\\\",\\r\\n        \\\"Ctrl-Home\\\": \\\"goDocStart\\\", \\\"Ctrl-End\\\": \\\"goDocEnd\\\", \\\"Ctrl-Up\\\": \\\"goLineUp\\\", \\\"Ctrl-Down\\\": \\\"goLineDown\\\",\\r\\n        \\\"Ctrl-Left\\\": \\\"goGroupLeft\\\", \\\"Ctrl-Right\\\": \\\"goGroupRight\\\", \\\"Alt-Left\\\": \\\"goLineStart\\\", \\\"Alt-Right\\\": \\\"goLineEnd\\\",\\r\\n        \\\"Ctrl-Backspace\\\": \\\"delGroupBefore\\\", \\\"Ctrl-Delete\\\": \\\"delGroupAfter\\\", \\\"Ctrl-S\\\": \\\"save\\\", \\\"Ctrl-F\\\": \\\"find\\\",\\r\\n        \\\"Ctrl-G\\\": \\\"findNext\\\", \\\"Shift-Ctrl-G\\\": \\\"findPrev\\\", \\\"Shift-Ctrl-F\\\": \\\"replace\\\", \\\"Shift-Ctrl-R\\\": \\\"replaceAll\\\",\\r\\n        \\\"Ctrl-[\\\": \\\"indentLess\\\", \\\"Ctrl-]\\\": \\\"indentMore\\\",\\r\\n        \\\"Ctrl-U\\\": \\\"undoSelection\\\", \\\"Shift-Ctrl-U\\\": \\\"redoSelection\\\", \\\"Alt-U\\\": \\\"redoSelection\\\",\\r\\n        \\\"fallthrough\\\": \\\"basic\\\"\\r\\n    };\\r\\n    // Very basic readline/emacs-style bindings, which are standard on Mac.\\r\\n    keyMap.emacsy = {\\r\\n        \\\"Ctrl-F\\\": \\\"goCharRight\\\", \\\"Ctrl-B\\\": \\\"goCharLeft\\\", \\\"Ctrl-P\\\": \\\"goLineUp\\\", \\\"Ctrl-N\\\": \\\"goLineDown\\\",\\r\\n        \\\"Alt-F\\\": \\\"goWordRight\\\", \\\"Alt-B\\\": \\\"goWordLeft\\\", \\\"Ctrl-A\\\": \\\"goLineStart\\\", \\\"Ctrl-E\\\": \\\"goLineEnd\\\",\\r\\n        \\\"Ctrl-V\\\": \\\"goPageDown\\\", \\\"Shift-Ctrl-V\\\": \\\"goPageUp\\\", \\\"Ctrl-D\\\": \\\"delCharAfter\\\", \\\"Ctrl-H\\\": \\\"delCharBefore\\\",\\r\\n        \\\"Alt-D\\\": \\\"delWordAfter\\\", \\\"Alt-Backspace\\\": \\\"delWordBefore\\\", \\\"Ctrl-K\\\": \\\"killLine\\\", \\\"Ctrl-T\\\": \\\"transposeChars\\\",\\r\\n        \\\"Ctrl-O\\\": \\\"openLine\\\"\\r\\n    };\\r\\n    keyMap.macDefault = {\\r\\n        \\\"Cmd-A\\\": \\\"selectAll\\\", \\\"Cmd-D\\\": \\\"deleteLine\\\", \\\"Cmd-Z\\\": \\\"undo\\\", \\\"Shift-Cmd-Z\\\": \\\"redo\\\", \\\"Cmd-Y\\\": \\\"redo\\\",\\r\\n        \\\"Cmd-Home\\\": \\\"goDocStart\\\", \\\"Cmd-Up\\\": \\\"goDocStart\\\", \\\"Cmd-End\\\": \\\"goDocEnd\\\", \\\"Cmd-Down\\\": \\\"goDocEnd\\\", \\\"Alt-Left\\\": \\\"goGroupLeft\\\",\\r\\n        \\\"Alt-Right\\\": \\\"goGroupRight\\\", \\\"Cmd-Left\\\": \\\"goLineLeft\\\", \\\"Cmd-Right\\\": \\\"goLineRight\\\", \\\"Alt-Backspace\\\": \\\"delGroupBefore\\\",\\r\\n        \\\"Ctrl-Alt-Backspace\\\": \\\"delGroupAfter\\\", \\\"Alt-Delete\\\": \\\"delGroupAfter\\\", \\\"Cmd-S\\\": \\\"save\\\", \\\"Cmd-F\\\": \\\"find\\\",\\r\\n        \\\"Cmd-G\\\": \\\"findNext\\\", \\\"Shift-Cmd-G\\\": \\\"findPrev\\\", \\\"Cmd-Alt-F\\\": \\\"replace\\\", \\\"Shift-Cmd-Alt-F\\\": \\\"replaceAll\\\",\\r\\n        \\\"Cmd-[\\\": \\\"indentLess\\\", \\\"Cmd-]\\\": \\\"indentMore\\\", \\\"Cmd-Backspace\\\": \\\"delWrappedLineLeft\\\", \\\"Cmd-Delete\\\": \\\"delWrappedLineRight\\\",\\r\\n        \\\"Cmd-U\\\": \\\"undoSelection\\\", \\\"Shift-Cmd-U\\\": \\\"redoSelection\\\", \\\"Ctrl-Up\\\": \\\"goDocStart\\\", \\\"Ctrl-Down\\\": \\\"goDocEnd\\\",\\r\\n        \\\"fallthrough\\\": [\\\"basic\\\", \\\"emacsy\\\"]\\r\\n    };\\r\\n    keyMap[\\\"default\\\"] = mac ? keyMap.macDefault : keyMap.pcDefault;\\r\\n\\r\\n    // KEYMAP DISPATCH\\r\\n\\r\\n    function normalizeKeyName(name) {\\r\\n        var parts = name.split(/-(?!$)/);\\r\\n        name = parts[parts.length - 1];\\r\\n        var alt, ctrl, shift, cmd;\\r\\n        for (var i = 0; i < parts.length - 1; i++) {\\r\\n            var mod = parts[i];\\r\\n            if (/^(cmd|meta|m)$/i.test(mod)) { cmd = true; }\\r\\n            else if (/^a(lt)?$/i.test(mod)) { alt = true; }\\r\\n            else if (/^(c|ctrl|control)$/i.test(mod)) { ctrl = true; }\\r\\n            else if (/^s(hift)?$/i.test(mod)) { shift = true; }\\r\\n            else { throw new Error(\\\"Unrecognized modifier name: \\\" + mod) }\\r\\n        }\\r\\n        if (alt) { name = \\\"Alt-\\\" + name; }\\r\\n        if (ctrl) { name = \\\"Ctrl-\\\" + name; }\\r\\n        if (cmd) { name = \\\"Cmd-\\\" + name; }\\r\\n        if (shift) { name = \\\"Shift-\\\" + name; }\\r\\n        return name\\r\\n    }\\r\\n\\r\\n    // This is a kludge to keep keymaps mostly working as raw objects\\r\\n    // (backwards compatibility) while at the same time support features\\r\\n    // like normalization and multi-stroke key bindings. It compiles a\\r\\n    // new normalized keymap, and then updates the old object to reflect\\r\\n    // this.\\r\\n    function normalizeKeyMap(keymap) {\\r\\n        var copy = {};\\r\\n        for (var keyname in keymap) { if (keymap.hasOwnProperty(keyname)) {\\r\\n            var value = keymap[keyname];\\r\\n            if (/^(name|fallthrough|(de|at)tach)$/.test(keyname)) { continue }\\r\\n            if (value == \\\"...\\\") { delete keymap[keyname]; continue }\\r\\n\\r\\n            var keys = map(keyname.split(\\\" \\\"), normalizeKeyName);\\r\\n            for (var i = 0; i < keys.length; i++) {\\r\\n                var val = (void 0), name = (void 0);\\r\\n                if (i == keys.length - 1) {\\r\\n                    name = keys.join(\\\" \\\");\\r\\n                    val = value;\\r\\n                } else {\\r\\n                    name = keys.slice(0, i + 1).join(\\\" \\\");\\r\\n                    val = \\\"...\\\";\\r\\n                }\\r\\n                var prev = copy[name];\\r\\n                if (!prev) { copy[name] = val; }\\r\\n                else if (prev != val) { throw new Error(\\\"Inconsistent bindings for \\\" + name) }\\r\\n            }\\r\\n            delete keymap[keyname];\\r\\n        } }\\r\\n        for (var prop in copy) { keymap[prop] = copy[prop]; }\\r\\n        return keymap\\r\\n    }\\r\\n\\r\\n    function lookupKey(key, map$$1, handle, context) {\\r\\n        map$$1 = getKeyMap(map$$1);\\r\\n        var found = map$$1.call ? map$$1.call(key, context) : map$$1[key];\\r\\n        if (found === false) { return \\\"nothing\\\" }\\r\\n        if (found === \\\"...\\\") { return \\\"multi\\\" }\\r\\n        if (found != null && handle(found)) { return \\\"handled\\\" }\\r\\n\\r\\n        if (map$$1.fallthrough) {\\r\\n            if (Object.prototype.toString.call(map$$1.fallthrough) != \\\"[object Array]\\\")\\r\\n            { return lookupKey(key, map$$1.fallthrough, handle, context) }\\r\\n            for (var i = 0; i < map$$1.fallthrough.length; i++) {\\r\\n                var result = lookupKey(key, map$$1.fallthrough[i], handle, context);\\r\\n                if (result) { return result }\\r\\n            }\\r\\n        }\\r\\n    }\\r\\n\\r\\n    // Modifier key presses don't count as 'real' key presses for the\\r\\n    // purpose of keymap fallthrough.\\r\\n    function isModifierKey(value) {\\r\\n        var name = typeof value == \\\"string\\\" ? value : keyNames[value.keyCode];\\r\\n        return name == \\\"Ctrl\\\" || name == \\\"Alt\\\" || name == \\\"Shift\\\" || name == \\\"Mod\\\"\\r\\n    }\\r\\n\\r\\n    function addModifierNames(name, event, noShift) {\\r\\n        var base = name;\\r\\n        if (event.altKey && base != \\\"Alt\\\") { name = \\\"Alt-\\\" + name; }\\r\\n        if ((flipCtrlCmd ? event.metaKey : event.ctrlKey) && base != \\\"Ctrl\\\") { name = \\\"Ctrl-\\\" + name; }\\r\\n        if ((flipCtrlCmd ? event.ctrlKey : event.metaKey) && base != \\\"Cmd\\\") { name = \\\"Cmd-\\\" + name; }\\r\\n        if (!noShift && event.shiftKey && base != \\\"Shift\\\") { name = \\\"Shift-\\\" + name; }\\r\\n        return name\\r\\n    }\\r\\n\\r\\n    // Look up the name of a key as indicated by an event object.\\r\\n    function keyName(event, noShift) {\\r\\n        if (presto && event.keyCode == 34 && event[\\\"char\\\"]) { return false }\\r\\n        var name = keyNames[event.keyCode];\\r\\n        if (name == null || event.altGraphKey) { return false }\\r\\n        // Ctrl-ScrollLock has keyCode 3, same as Ctrl-Pause,\\r\\n        // so we'll use event.code when available (Chrome 48+, FF 38+, Safari 10.1+)\\r\\n        if (event.keyCode == 3 && event.code) { name = event.code; }\\r\\n        return addModifierNames(name, event, noShift)\\r\\n    }\\r\\n\\r\\n    function getKeyMap(val) {\\r\\n        return typeof val == \\\"string\\\" ? keyMap[val] : val\\r\\n    }\\r\\n\\r\\n    // Helper for deleting text near the selection(s), used to implement\\r\\n    // backspace, delete, and similar functionality.\\r\\n    function deleteNearSelection(cm, compute) {\\r\\n        var ranges = cm.doc.sel.ranges, kill = [];\\r\\n        // Build up a set of ranges to kill first, merging overlapping\\r\\n        // ranges.\\r\\n        for (var i = 0; i < ranges.length; i++) {\\r\\n            var toKill = compute(ranges[i]);\\r\\n            while (kill.length && cmp(toKill.from, lst(kill).to) <= 0) {\\r\\n                var replaced = kill.pop();\\r\\n                if (cmp(replaced.from, toKill.from) < 0) {\\r\\n                    toKill.from = replaced.from;\\r\\n                    break\\r\\n                }\\r\\n            }\\r\\n            kill.push(toKill);\\r\\n        }\\r\\n        // Next, remove those actual ranges.\\r\\n        runInOp(cm, function () {\\r\\n            for (var i = kill.length - 1; i >= 0; i--)\\r\\n            { replaceRange(cm.doc, \\\"\\\", kill[i].from, kill[i].to, \\\"+delete\\\"); }\\r\\n            ensureCursorVisible(cm);\\r\\n        });\\r\\n    }\\r\\n\\r\\n    function moveCharLogically(line, ch, dir) {\\r\\n        var target = skipExtendingChars(line.text, ch + dir, dir);\\r\\n        return target < 0 || target > line.text.length ? null : target\\r\\n    }\\r\\n\\r\\n    function moveLogically(line, start, dir) {\\r\\n        var ch = moveCharLogically(line, start.ch, dir);\\r\\n        return ch == null ? null : new Pos(start.line, ch, dir < 0 ? \\\"after\\\" : \\\"before\\\")\\r\\n    }\\r\\n\\r\\n    function endOfLine(visually, cm, lineObj, lineNo, dir) {\\r\\n        if (visually) {\\r\\n            var order = getOrder(lineObj, cm.doc.direction);\\r\\n            if (order) {\\r\\n                var part = dir < 0 ? lst(order) : order[0];\\r\\n                var moveInStorageOrder = (dir < 0) == (part.level == 1);\\r\\n                var sticky = moveInStorageOrder ? \\\"after\\\" : \\\"before\\\";\\r\\n                var ch;\\r\\n                // With a wrapped rtl chunk (possibly spanning multiple bidi parts),\\r\\n                // it could be that the last bidi part is not on the last visual line,\\r\\n                // since visual lines contain content order-consecutive chunks.\\r\\n                // Thus, in rtl, we are looking for the first (content-order) character\\r\\n                // in the rtl chunk that is on the last line (that is, the same line\\r\\n                // as the last (content-order) character).\\r\\n                if (part.level > 0 || cm.doc.direction == \\\"rtl\\\") {\\r\\n                    var prep = prepareMeasureForLine(cm, lineObj);\\r\\n                    ch = dir < 0 ? lineObj.text.length - 1 : 0;\\r\\n                    var targetTop = measureCharPrepared(cm, prep, ch).top;\\r\\n                    ch = findFirst(function (ch) { return measureCharPrepared(cm, prep, ch).top == targetTop; }, (dir < 0) == (part.level == 1) ? part.from : part.to - 1, ch);\\r\\n                    if (sticky == \\\"before\\\") { ch = moveCharLogically(lineObj, ch, 1); }\\r\\n                } else { ch = dir < 0 ? part.to : part.from; }\\r\\n                return new Pos(lineNo, ch, sticky)\\r\\n            }\\r\\n        }\\r\\n        return new Pos(lineNo, dir < 0 ? lineObj.text.length : 0, dir < 0 ? \\\"before\\\" : \\\"after\\\")\\r\\n    }\\r\\n\\r\\n    function moveVisually(cm, line, start, dir) {\\r\\n        var bidi = getOrder(line, cm.doc.direction);\\r\\n        if (!bidi) { return moveLogically(line, start, dir) }\\r\\n        if (start.ch >= line.text.length) {\\r\\n            start.ch = line.text.length;\\r\\n            start.sticky = \\\"before\\\";\\r\\n        } else if (start.ch <= 0) {\\r\\n            start.ch = 0;\\r\\n            start.sticky = \\\"after\\\";\\r\\n        }\\r\\n        var partPos = getBidiPartAt(bidi, start.ch, start.sticky), part = bidi[partPos];\\r\\n        if (cm.doc.direction == \\\"ltr\\\" && part.level % 2 == 0 && (dir > 0 ? part.to > start.ch : part.from < start.ch)) {\\r\\n            // Case 1: We move within an ltr part in an ltr editor. Even with wrapped lines,\\r\\n            // nothing interesting happens.\\r\\n            return moveLogically(line, start, dir)\\r\\n        }\\r\\n\\r\\n        var mv = function (pos, dir) { return moveCharLogically(line, pos instanceof Pos ? pos.ch : pos, dir); };\\r\\n        var prep;\\r\\n        var getWrappedLineExtent = function (ch) {\\r\\n            if (!cm.options.lineWrapping) { return {begin: 0, end: line.text.length} }\\r\\n            prep = prep || prepareMeasureForLine(cm, line);\\r\\n            return wrappedLineExtentChar(cm, line, prep, ch)\\r\\n        };\\r\\n        var wrappedLineExtent = getWrappedLineExtent(start.sticky == \\\"before\\\" ? mv(start, -1) : start.ch);\\r\\n\\r\\n        if (cm.doc.direction == \\\"rtl\\\" || part.level == 1) {\\r\\n            var moveInStorageOrder = (part.level == 1) == (dir < 0);\\r\\n            var ch = mv(start, moveInStorageOrder ? 1 : -1);\\r\\n            if (ch != null && (!moveInStorageOrder ? ch >= part.from && ch >= wrappedLineExtent.begin : ch <= part.to && ch <= wrappedLineExtent.end)) {\\r\\n                // Case 2: We move within an rtl part or in an rtl editor on the same visual line\\r\\n                var sticky = moveInStorageOrder ? \\\"before\\\" : \\\"after\\\";\\r\\n                return new Pos(start.line, ch, sticky)\\r\\n            }\\r\\n        }\\r\\n\\r\\n        // Case 3: Could not move within this bidi part in this visual line, so leave\\r\\n        // the current bidi part\\r\\n\\r\\n        var searchInVisualLine = function (partPos, dir, wrappedLineExtent) {\\r\\n            var getRes = function (ch, moveInStorageOrder) { return moveInStorageOrder\\r\\n                ? new Pos(start.line, mv(ch, 1), \\\"before\\\")\\r\\n                : new Pos(start.line, ch, \\\"after\\\"); };\\r\\n\\r\\n            for (; partPos >= 0 && partPos < bidi.length; partPos += dir) {\\r\\n                var part = bidi[partPos];\\r\\n                var moveInStorageOrder = (dir > 0) == (part.level != 1);\\r\\n                var ch = moveInStorageOrder ? wrappedLineExtent.begin : mv(wrappedLineExtent.end, -1);\\r\\n                if (part.from <= ch && ch < part.to) { return getRes(ch, moveInStorageOrder) }\\r\\n                ch = moveInStorageOrder ? part.from : mv(part.to, -1);\\r\\n                if (wrappedLineExtent.begin <= ch && ch < wrappedLineExtent.end) { return getRes(ch, moveInStorageOrder) }\\r\\n            }\\r\\n        };\\r\\n\\r\\n        // Case 3a: Look for other bidi parts on the same visual line\\r\\n        var res = searchInVisualLine(partPos + dir, dir, wrappedLineExtent);\\r\\n        if (res) { return res }\\r\\n\\r\\n        // Case 3b: Look for other bidi parts on the next visual line\\r\\n        var nextCh = dir > 0 ? wrappedLineExtent.end : mv(wrappedLineExtent.begin, -1);\\r\\n        if (nextCh != null && !(dir > 0 && nextCh == line.text.length)) {\\r\\n            res = searchInVisualLine(dir > 0 ? 0 : bidi.length - 1, dir, getWrappedLineExtent(nextCh));\\r\\n            if (res) { return res }\\r\\n        }\\r\\n\\r\\n        // Case 4: Nowhere to move\\r\\n        return null\\r\\n    }\\r\\n\\r\\n    // Commands are parameter-less actions that can be performed on an\\r\\n    // editor, mostly used for keybindings.\\r\\n    var commands = {\\r\\n        selectAll: selectAll,\\r\\n        singleSelection: function (cm) { return cm.setSelection(cm.getCursor(\\\"anchor\\\"), cm.getCursor(\\\"head\\\"), sel_dontScroll); },\\r\\n        killLine: function (cm) { return deleteNearSelection(cm, function (range) {\\r\\n            if (range.empty()) {\\r\\n                var len = getLine(cm.doc, range.head.line).text.length;\\r\\n                if (range.head.ch == len && range.head.line < cm.lastLine())\\r\\n                { return {from: range.head, to: Pos(range.head.line + 1, 0)} }\\r\\n                else\\r\\n                { return {from: range.head, to: Pos(range.head.line, len)} }\\r\\n            } else {\\r\\n                return {from: range.from(), to: range.to()}\\r\\n            }\\r\\n        }); },\\r\\n        deleteLine: function (cm) { return deleteNearSelection(cm, function (range) { return ({\\r\\n            from: Pos(range.from().line, 0),\\r\\n            to: clipPos(cm.doc, Pos(range.to().line + 1, 0))\\r\\n        }); }); },\\r\\n        delLineLeft: function (cm) { return deleteNearSelection(cm, function (range) { return ({\\r\\n            from: Pos(range.from().line, 0), to: range.from()\\r\\n        }); }); },\\r\\n        delWrappedLineLeft: function (cm) { return deleteNearSelection(cm, function (range) {\\r\\n            var top = cm.charCoords(range.head, \\\"div\\\").top + 5;\\r\\n            var leftPos = cm.coordsChar({left: 0, top: top}, \\\"div\\\");\\r\\n            return {from: leftPos, to: range.from()}\\r\\n        }); },\\r\\n        delWrappedLineRight: function (cm) { return deleteNearSelection(cm, function (range) {\\r\\n            var top = cm.charCoords(range.head, \\\"div\\\").top + 5;\\r\\n            var rightPos = cm.coordsChar({left: cm.display.lineDiv.offsetWidth + 100, top: top}, \\\"div\\\");\\r\\n            return {from: range.from(), to: rightPos }\\r\\n        }); },\\r\\n        undo: function (cm) { return cm.undo(); },\\r\\n        redo: function (cm) { return cm.redo(); },\\r\\n        undoSelection: function (cm) { return cm.undoSelection(); },\\r\\n        redoSelection: function (cm) { return cm.redoSelection(); },\\r\\n        goDocStart: function (cm) { return cm.extendSelection(Pos(cm.firstLine(), 0)); },\\r\\n        goDocEnd: function (cm) { return cm.extendSelection(Pos(cm.lastLine())); },\\r\\n        goLineStart: function (cm) { return cm.extendSelectionsBy(function (range) { return lineStart(cm, range.head.line); },\\r\\n            {origin: \\\"+move\\\", bias: 1}\\r\\n        ); },\\r\\n        goLineStartSmart: function (cm) { return cm.extendSelectionsBy(function (range) { return lineStartSmart(cm, range.head); },\\r\\n            {origin: \\\"+move\\\", bias: 1}\\r\\n        ); },\\r\\n        goLineEnd: function (cm) { return cm.extendSelectionsBy(function (range) { return lineEnd(cm, range.head.line); },\\r\\n            {origin: \\\"+move\\\", bias: -1}\\r\\n        ); },\\r\\n        goLineRight: function (cm) { return cm.extendSelectionsBy(function (range) {\\r\\n            var top = cm.cursorCoords(range.head, \\\"div\\\").top + 5;\\r\\n            return cm.coordsChar({left: cm.display.lineDiv.offsetWidth + 100, top: top}, \\\"div\\\")\\r\\n        }, sel_move); },\\r\\n        goLineLeft: function (cm) { return cm.extendSelectionsBy(function (range) {\\r\\n            var top = cm.cursorCoords(range.head, \\\"div\\\").top + 5;\\r\\n            return cm.coordsChar({left: 0, top: top}, \\\"div\\\")\\r\\n        }, sel_move); },\\r\\n        goLineLeftSmart: function (cm) { return cm.extendSelectionsBy(function (range) {\\r\\n            var top = cm.cursorCoords(range.head, \\\"div\\\").top + 5;\\r\\n            var pos = cm.coordsChar({left: 0, top: top}, \\\"div\\\");\\r\\n            if (pos.ch < cm.getLine(pos.line).search(/\\\\S/)) { return lineStartSmart(cm, range.head) }\\r\\n            return pos\\r\\n        }, sel_move); },\\r\\n        goLineUp: function (cm) { return cm.moveV(-1, \\\"line\\\"); },\\r\\n        goLineDown: function (cm) { return cm.moveV(1, \\\"line\\\"); },\\r\\n        goPageUp: function (cm) { return cm.moveV(-1, \\\"page\\\"); },\\r\\n        goPageDown: function (cm) { return cm.moveV(1, \\\"page\\\"); },\\r\\n        goCharLeft: function (cm) { return cm.moveH(-1, \\\"char\\\"); },\\r\\n        goCharRight: function (cm) { return cm.moveH(1, \\\"char\\\"); },\\r\\n        goColumnLeft: function (cm) { return cm.moveH(-1, \\\"column\\\"); },\\r\\n        goColumnRight: function (cm) { return cm.moveH(1, \\\"column\\\"); },\\r\\n        goWordLeft: function (cm) { return cm.moveH(-1, \\\"word\\\"); },\\r\\n        goGroupRight: function (cm) { return cm.moveH(1, \\\"group\\\"); },\\r\\n        goGroupLeft: function (cm) { return cm.moveH(-1, \\\"group\\\"); },\\r\\n        goWordRight: function (cm) { return cm.moveH(1, \\\"word\\\"); },\\r\\n        delCharBefore: function (cm) { return cm.deleteH(-1, \\\"char\\\"); },\\r\\n        delCharAfter: function (cm) { return cm.deleteH(1, \\\"char\\\"); },\\r\\n        delWordBefore: function (cm) { return cm.deleteH(-1, \\\"word\\\"); },\\r\\n        delWordAfter: function (cm) { return cm.deleteH(1, \\\"word\\\"); },\\r\\n        delGroupBefore: function (cm) { return cm.deleteH(-1, \\\"group\\\"); },\\r\\n        delGroupAfter: function (cm) { return cm.deleteH(1, \\\"group\\\"); },\\r\\n        indentAuto: function (cm) { return cm.indentSelection(\\\"smart\\\"); },\\r\\n        indentMore: function (cm) { return cm.indentSelection(\\\"add\\\"); },\\r\\n        indentLess: function (cm) { return cm.indentSelection(\\\"subtract\\\"); },\\r\\n        insertTab: function (cm) { return cm.replaceSelection(\\\"\\\\t\\\"); },\\r\\n        insertSoftTab: function (cm) {\\r\\n            var spaces = [], ranges = cm.listSelections(), tabSize = cm.options.tabSize;\\r\\n            for (var i = 0; i < ranges.length; i++) {\\r\\n                var pos = ranges[i].from();\\r\\n                var col = countColumn(cm.getLine(pos.line), pos.ch, tabSize);\\r\\n                spaces.push(spaceStr(tabSize - col % tabSize));\\r\\n            }\\r\\n            cm.replaceSelections(spaces);\\r\\n        },\\r\\n        defaultTab: function (cm) {\\r\\n            if (cm.somethingSelected()) { cm.indentSelection(\\\"add\\\"); }\\r\\n            else { cm.execCommand(\\\"insertTab\\\"); }\\r\\n        },\\r\\n        // Swap the two chars left and right of each selection's head.\\r\\n        // Move cursor behind the two swapped characters afterwards.\\r\\n        //\\r\\n        // Doesn't consider line feeds a character.\\r\\n        // Doesn't scan more than one line above to find a character.\\r\\n        // Doesn't do anything on an empty line.\\r\\n        // Doesn't do anything with non-empty selections.\\r\\n        transposeChars: function (cm) { return runInOp(cm, function () {\\r\\n            var ranges = cm.listSelections(), newSel = [];\\r\\n            for (var i = 0; i < ranges.length; i++) {\\r\\n                if (!ranges[i].empty()) { continue }\\r\\n                var cur = ranges[i].head, line = getLine(cm.doc, cur.line).text;\\r\\n                if (line) {\\r\\n                    if (cur.ch == line.length) { cur = new Pos(cur.line, cur.ch - 1); }\\r\\n                    if (cur.ch > 0) {\\r\\n                        cur = new Pos(cur.line, cur.ch + 1);\\r\\n                        cm.replaceRange(line.charAt(cur.ch - 1) + line.charAt(cur.ch - 2),\\r\\n                            Pos(cur.line, cur.ch - 2), cur, \\\"+transpose\\\");\\r\\n                    } else if (cur.line > cm.doc.first) {\\r\\n                        var prev = getLine(cm.doc, cur.line - 1).text;\\r\\n                        if (prev) {\\r\\n                            cur = new Pos(cur.line, 1);\\r\\n                            cm.replaceRange(line.charAt(0) + cm.doc.lineSeparator() +\\r\\n                                prev.charAt(prev.length - 1),\\r\\n                                Pos(cur.line - 1, prev.length - 1), cur, \\\"+transpose\\\");\\r\\n                        }\\r\\n                    }\\r\\n                }\\r\\n                newSel.push(new Range(cur, cur));\\r\\n            }\\r\\n            cm.setSelections(newSel);\\r\\n        }); },\\r\\n        newlineAndIndent: function (cm) { return runInOp(cm, function () {\\r\\n            var sels = cm.listSelections();\\r\\n            for (var i = sels.length - 1; i >= 0; i--)\\r\\n            { cm.replaceRange(cm.doc.lineSeparator(), sels[i].anchor, sels[i].head, \\\"+input\\\"); }\\r\\n            sels = cm.listSelections();\\r\\n            for (var i$1 = 0; i$1 < sels.length; i$1++)\\r\\n            { cm.indentLine(sels[i$1].from().line, null, true); }\\r\\n            ensureCursorVisible(cm);\\r\\n        }); },\\r\\n        openLine: function (cm) { return cm.replaceSelection(\\\"\\\\n\\\", \\\"start\\\"); },\\r\\n        toggleOverwrite: function (cm) { return cm.toggleOverwrite(); }\\r\\n    };\\r\\n\\r\\n\\r\\n    function lineStart(cm, lineN) {\\r\\n        var line = getLine(cm.doc, lineN);\\r\\n        var visual = visualLine(line);\\r\\n        if (visual != line) { lineN = lineNo(visual); }\\r\\n        return endOfLine(true, cm, visual, lineN, 1)\\r\\n    }\\r\\n    function lineEnd(cm, lineN) {\\r\\n        var line = getLine(cm.doc, lineN);\\r\\n        var visual = visualLineEnd(line);\\r\\n        if (visual != line) { lineN = lineNo(visual); }\\r\\n        return endOfLine(true, cm, line, lineN, -1)\\r\\n    }\\r\\n    function lineStartSmart(cm, pos) {\\r\\n        var start = lineStart(cm, pos.line);\\r\\n        var line = getLine(cm.doc, start.line);\\r\\n        var order = getOrder(line, cm.doc.direction);\\r\\n        if (!order || order[0].level == 0) {\\r\\n            var firstNonWS = Math.max(0, line.text.search(/\\\\S/));\\r\\n            var inWS = pos.line == start.line && pos.ch <= firstNonWS && pos.ch;\\r\\n            return Pos(start.line, inWS ? 0 : firstNonWS, start.sticky)\\r\\n        }\\r\\n        return start\\r\\n    }\\r\\n\\r\\n    // Run a handler that was bound to a key.\\r\\n    function doHandleBinding(cm, bound, dropShift) {\\r\\n        if (typeof bound == \\\"string\\\") {\\r\\n            bound = commands[bound];\\r\\n            if (!bound) { return false }\\r\\n        }\\r\\n        // Ensure previous input has been read, so that the handler sees a\\r\\n        // consistent view of the document\\r\\n        cm.display.input.ensurePolled();\\r\\n        var prevShift = cm.display.shift, done = false;\\r\\n        try {\\r\\n            if (cm.isReadOnly()) { cm.state.suppressEdits = true; }\\r\\n            if (dropShift) { cm.display.shift = false; }\\r\\n            done = bound(cm) != Pass;\\r\\n        } finally {\\r\\n            cm.display.shift = prevShift;\\r\\n            cm.state.suppressEdits = false;\\r\\n        }\\r\\n        return done\\r\\n    }\\r\\n\\r\\n    function lookupKeyForEditor(cm, name, handle) {\\r\\n        for (var i = 0; i < cm.state.keyMaps.length; i++) {\\r\\n            var result = lookupKey(name, cm.state.keyMaps[i], handle, cm);\\r\\n            if (result) { return result }\\r\\n        }\\r\\n        return (cm.options.extraKeys && lookupKey(name, cm.options.extraKeys, handle, cm))\\r\\n            || lookupKey(name, cm.options.keyMap, handle, cm)\\r\\n    }\\r\\n\\r\\n    // Note that, despite the name, this function is also used to check\\r\\n    // for bound mouse clicks.\\r\\n\\r\\n    var stopSeq = new Delayed;\\r\\n\\r\\n    function dispatchKey(cm, name, e, handle) {\\r\\n        var seq = cm.state.keySeq;\\r\\n        if (seq) {\\r\\n            if (isModifierKey(name)) { return \\\"handled\\\" }\\r\\n            if (/\\\\'$/.test(name))\\r\\n            { cm.state.keySeq = null; }\\r\\n            else\\r\\n            { stopSeq.set(50, function () {\\r\\n                if (cm.state.keySeq == seq) {\\r\\n                    cm.state.keySeq = null;\\r\\n                    cm.display.input.reset();\\r\\n                }\\r\\n            }); }\\r\\n            if (dispatchKeyInner(cm, seq + \\\" \\\" + name, e, handle)) { return true }\\r\\n        }\\r\\n        return dispatchKeyInner(cm, name, e, handle)\\r\\n    }\\r\\n\\r\\n    function dispatchKeyInner(cm, name, e, handle) {\\r\\n        var result = lookupKeyForEditor(cm, name, handle);\\r\\n\\r\\n        if (result == \\\"multi\\\")\\r\\n        { cm.state.keySeq = name; }\\r\\n        if (result == \\\"handled\\\")\\r\\n        { signalLater(cm, \\\"keyHandled\\\", cm, name, e); }\\r\\n\\r\\n        if (result == \\\"handled\\\" || result == \\\"multi\\\") {\\r\\n            e_preventDefault(e);\\r\\n            restartBlink(cm);\\r\\n        }\\r\\n\\r\\n        return !!result\\r\\n    }\\r\\n\\r\\n    // Handle a key from the keydown event.\\r\\n    function handleKeyBinding(cm, e) {\\r\\n        var name = keyName(e, true);\\r\\n        if (!name) { return false }\\r\\n\\r\\n        if (e.shiftKey && !cm.state.keySeq) {\\r\\n            // First try to resolve full name (including 'Shift-'). Failing\\r\\n            // that, see if there is a cursor-motion command (starting with\\r\\n            // 'go') bound to the keyname without 'Shift-'.\\r\\n            return dispatchKey(cm, \\\"Shift-\\\" + name, e, function (b) { return doHandleBinding(cm, b, true); })\\r\\n                || dispatchKey(cm, name, e, function (b) {\\r\\n                    if (typeof b == \\\"string\\\" ? /^go[A-Z]/.test(b) : b.motion)\\r\\n                    { return doHandleBinding(cm, b) }\\r\\n                })\\r\\n        } else {\\r\\n            return dispatchKey(cm, name, e, function (b) { return doHandleBinding(cm, b); })\\r\\n        }\\r\\n    }\\r\\n\\r\\n    // Handle a key from the keypress event\\r\\n    function handleCharBinding(cm, e, ch) {\\r\\n        return dispatchKey(cm, \\\"'\\\" + ch + \\\"'\\\", e, function (b) { return doHandleBinding(cm, b, true); })\\r\\n    }\\r\\n\\r\\n    var lastStoppedKey = null;\\r\\n    function onKeyDown(e) {\\r\\n        var cm = this;\\r\\n        cm.curOp.focus = activeElt();\\r\\n        if (signalDOMEvent(cm, e)) { return }\\r\\n        // IE does strange things with escape.\\r\\n        if (ie && ie_version < 11 && e.keyCode == 27) { e.returnValue = false; }\\r\\n        var code = e.keyCode;\\r\\n        cm.display.shift = code == 16 || e.shiftKey;\\r\\n        var handled = handleKeyBinding(cm, e);\\r\\n        if (presto) {\\r\\n            lastStoppedKey = handled ? code : null;\\r\\n            // Opera has no cut event... we try to at least catch the key combo\\r\\n            if (!handled && code == 88 && !hasCopyEvent && (mac ? e.metaKey : e.ctrlKey))\\r\\n            { cm.replaceSelection(\\\"\\\", null, \\\"cut\\\"); }\\r\\n        }\\r\\n\\r\\n        // Turn mouse into crosshair when Alt is held on Mac.\\r\\n        if (code == 18 && !/\\\\bCodeMirror-crosshair\\\\b/.test(cm.display.lineDiv.className))\\r\\n        { showCrossHair(cm); }\\r\\n    }\\r\\n\\r\\n    function showCrossHair(cm) {\\r\\n        var lineDiv = cm.display.lineDiv;\\r\\n        addClass(lineDiv, \\\"CodeMirror-crosshair\\\");\\r\\n\\r\\n        function up(e) {\\r\\n            if (e.keyCode == 18 || !e.altKey) {\\r\\n                rmClass(lineDiv, \\\"CodeMirror-crosshair\\\");\\r\\n                off(document, \\\"keyup\\\", up);\\r\\n                off(document, \\\"mouseover\\\", up);\\r\\n            }\\r\\n        }\\r\\n        on(document, \\\"keyup\\\", up);\\r\\n        on(document, \\\"mouseover\\\", up);\\r\\n    }\\r\\n\\r\\n    function onKeyUp(e) {\\r\\n        if (e.keyCode == 16) { this.doc.sel.shift = false; }\\r\\n        signalDOMEvent(this, e);\\r\\n    }\\r\\n\\r\\n    function onKeyPress(e) {\\r\\n        var cm = this;\\r\\n        if (eventInWidget(cm.display, e) || signalDOMEvent(cm, e) || e.ctrlKey && !e.altKey || mac && e.metaKey) { return }\\r\\n        var keyCode = e.keyCode, charCode = e.charCode;\\r\\n        if (presto && keyCode == lastStoppedKey) {lastStoppedKey = null; e_preventDefault(e); return}\\r\\n        if ((presto && (!e.which || e.which < 10)) && handleKeyBinding(cm, e)) { return }\\r\\n        var ch = String.fromCharCode(charCode == null ? keyCode : charCode);\\r\\n        // Some browsers fire keypress events for backspace\\r\\n        if (ch == \\\"\\\\x08\\\") { return }\\r\\n        if (handleCharBinding(cm, e, ch)) { return }\\r\\n        cm.display.input.onKeyPress(e);\\r\\n    }\\r\\n\\r\\n    var DOUBLECLICK_DELAY = 400;\\r\\n\\r\\n    var PastClick = function(time, pos, button) {\\r\\n        this.time = time;\\r\\n        this.pos = pos;\\r\\n        this.button = button;\\r\\n    };\\r\\n\\r\\n    PastClick.prototype.compare = function (time, pos, button) {\\r\\n        return this.time + DOUBLECLICK_DELAY > time &&\\r\\n            cmp(pos, this.pos) == 0 && button == this.button\\r\\n    };\\r\\n\\r\\n    var lastClick, lastDoubleClick;\\r\\n    function clickRepeat(pos, button) {\\r\\n        var now = +new Date;\\r\\n        if (lastDoubleClick && lastDoubleClick.compare(now, pos, button)) {\\r\\n            lastClick = lastDoubleClick = null;\\r\\n            return \\\"triple\\\"\\r\\n        } else if (lastClick && lastClick.compare(now, pos, button)) {\\r\\n            lastDoubleClick = new PastClick(now, pos, button);\\r\\n            lastClick = null;\\r\\n            return \\\"double\\\"\\r\\n        } else {\\r\\n            lastClick = new PastClick(now, pos, button);\\r\\n            lastDoubleClick = null;\\r\\n            return \\\"single\\\"\\r\\n        }\\r\\n    }\\r\\n\\r\\n    // A mouse down can be a single click, double click, triple click,\\r\\n    // start of selection drag, start of text drag, new cursor\\r\\n    // (ctrl-click), rectangle drag (alt-drag), or xwin\\r\\n    // middle-click-paste. Or it might be a click on something we should\\r\\n    // not interfere with, such as a scrollbar or widget.\\r\\n    function onMouseDown(e) {\\r\\n        var cm = this, display = cm.display;\\r\\n        if (signalDOMEvent(cm, e) || display.activeTouch && display.input.supportsTouch()) { return }\\r\\n        display.input.ensurePolled();\\r\\n        display.shift = e.shiftKey;\\r\\n\\r\\n        if (eventInWidget(display, e)) {\\r\\n            if (!webkit) {\\r\\n                // Briefly turn off draggability, to allow widgets to do\\r\\n                // normal dragging things.\\r\\n                display.scroller.draggable = false;\\r\\n                setTimeout(function () { return display.scroller.draggable = true; }, 100);\\r\\n            }\\r\\n            return\\r\\n        }\\r\\n        if (clickInGutter(cm, e)) { return }\\r\\n        var pos = posFromMouse(cm, e), button = e_button(e), repeat = pos ? clickRepeat(pos, button) : \\\"single\\\";\\r\\n        window.focus();\\r\\n\\r\\n        // #3261: make sure, that we're not starting a second selection\\r\\n        if (button == 1 && cm.state.selectingText)\\r\\n        { cm.state.selectingText(e); }\\r\\n\\r\\n        if (pos && handleMappedButton(cm, button, pos, repeat, e)) { return }\\r\\n\\r\\n        if (button == 1) {\\r\\n            if (pos) { leftButtonDown(cm, pos, repeat, e); }\\r\\n            else if (e_target(e) == display.scroller) { e_preventDefault(e); }\\r\\n        } else if (button == 2) {\\r\\n            if (pos) { extendSelection(cm.doc, pos); }\\r\\n            setTimeout(function () { return display.input.focus(); }, 20);\\r\\n        } else if (button == 3) {\\r\\n            if (captureRightClick) { cm.display.input.onContextMenu(e); }\\r\\n            else { delayBlurEvent(cm); }\\r\\n        }\\r\\n    }\\r\\n\\r\\n    function handleMappedButton(cm, button, pos, repeat, event) {\\r\\n        var name = \\\"Click\\\";\\r\\n        if (repeat == \\\"double\\\") { name = \\\"Double\\\" + name; }\\r\\n        else if (repeat == \\\"triple\\\") { name = \\\"Triple\\\" + name; }\\r\\n        name = (button == 1 ? \\\"Left\\\" : button == 2 ? \\\"Middle\\\" : \\\"Right\\\") + name;\\r\\n\\r\\n        return dispatchKey(cm,  addModifierNames(name, event), event, function (bound) {\\r\\n            if (typeof bound == \\\"string\\\") { bound = commands[bound]; }\\r\\n            if (!bound) { return false }\\r\\n            var done = false;\\r\\n            try {\\r\\n                if (cm.isReadOnly()) { cm.state.suppressEdits = true; }\\r\\n                done = bound(cm, pos) != Pass;\\r\\n            } finally {\\r\\n                cm.state.suppressEdits = false;\\r\\n            }\\r\\n            return done\\r\\n        })\\r\\n    }\\r\\n\\r\\n    function configureMouse(cm, repeat, event) {\\r\\n        var option = cm.getOption(\\\"configureMouse\\\");\\r\\n        var value = option ? option(cm, repeat, event) : {};\\r\\n        if (value.unit == null) {\\r\\n            var rect = chromeOS ? event.shiftKey && event.metaKey : event.altKey;\\r\\n            value.unit = rect ? \\\"rectangle\\\" : repeat == \\\"single\\\" ? \\\"char\\\" : repeat == \\\"double\\\" ? \\\"word\\\" : \\\"line\\\";\\r\\n        }\\r\\n        if (value.extend == null || cm.doc.extend) { value.extend = cm.doc.extend || event.shiftKey; }\\r\\n        if (value.addNew == null) { value.addNew = mac ? event.metaKey : event.ctrlKey; }\\r\\n        if (value.moveOnDrag == null) { value.moveOnDrag = !(mac ? event.altKey : event.ctrlKey); }\\r\\n        return value\\r\\n    }\\r\\n\\r\\n    function leftButtonDown(cm, pos, repeat, event) {\\r\\n        if (ie) { setTimeout(bind(ensureFocus, cm), 0); }\\r\\n        else { cm.curOp.focus = activeElt(); }\\r\\n\\r\\n        var behavior = configureMouse(cm, repeat, event);\\r\\n\\r\\n        var sel = cm.doc.sel, contained;\\r\\n        if (cm.options.dragDrop && dragAndDrop && !cm.isReadOnly() &&\\r\\n            repeat == \\\"single\\\" && (contained = sel.contains(pos)) > -1 &&\\r\\n            (cmp((contained = sel.ranges[contained]).from(), pos) < 0 || pos.xRel > 0) &&\\r\\n            (cmp(contained.to(), pos) > 0 || pos.xRel < 0))\\r\\n        { leftButtonStartDrag(cm, event, pos, behavior); }\\r\\n        else\\r\\n        { leftButtonSelect(cm, event, pos, behavior); }\\r\\n    }\\r\\n\\r\\n    // Start a text drag. When it ends, see if any dragging actually\\r\\n    // happen, and treat as a click if it didn't.\\r\\n    function leftButtonStartDrag(cm, event, pos, behavior) {\\r\\n        var display = cm.display, moved = false;\\r\\n        var dragEnd = operation(cm, function (e) {\\r\\n            if (webkit) { display.scroller.draggable = false; }\\r\\n            cm.state.draggingText = false;\\r\\n            off(display.wrapper.ownerDocument, \\\"mouseup\\\", dragEnd);\\r\\n            off(display.wrapper.ownerDocument, \\\"mousemove\\\", mouseMove);\\r\\n            off(display.scroller, \\\"dragstart\\\", dragStart);\\r\\n            off(display.scroller, \\\"drop\\\", dragEnd);\\r\\n            if (!moved) {\\r\\n                e_preventDefault(e);\\r\\n                if (!behavior.addNew)\\r\\n                { extendSelection(cm.doc, pos, null, null, behavior.extend); }\\r\\n                // Work around unexplainable focus problem in IE9 (#2127) and Chrome (#3081)\\r\\n                if (webkit || ie && ie_version == 9)\\r\\n                { setTimeout(function () {display.wrapper.ownerDocument.body.focus(); display.input.focus();}, 20); }\\r\\n                else\\r\\n                { display.input.focus(); }\\r\\n            }\\r\\n        });\\r\\n        var mouseMove = function(e2) {\\r\\n            moved = moved || Math.abs(event.clientX - e2.clientX) + Math.abs(event.clientY - e2.clientY) >= 10;\\r\\n        };\\r\\n        var dragStart = function () { return moved = true; };\\r\\n        // Let the drag handler handle this.\\r\\n        if (webkit) { display.scroller.draggable = true; }\\r\\n        cm.state.draggingText = dragEnd;\\r\\n        dragEnd.copy = !behavior.moveOnDrag;\\r\\n        // IE's approach to draggable\\r\\n        if (display.scroller.dragDrop) { display.scroller.dragDrop(); }\\r\\n        on(display.wrapper.ownerDocument, \\\"mouseup\\\", dragEnd);\\r\\n        on(display.wrapper.ownerDocument, \\\"mousemove\\\", mouseMove);\\r\\n        on(display.scroller, \\\"dragstart\\\", dragStart);\\r\\n        on(display.scroller, \\\"drop\\\", dragEnd);\\r\\n\\r\\n        delayBlurEvent(cm);\\r\\n        setTimeout(function () { return display.input.focus(); }, 20);\\r\\n    }\\r\\n\\r\\n    function rangeForUnit(cm, pos, unit) {\\r\\n        if (unit == \\\"char\\\") { return new Range(pos, pos) }\\r\\n        if (unit == \\\"word\\\") { return cm.findWordAt(pos) }\\r\\n        if (unit == \\\"line\\\") { return new Range(Pos(pos.line, 0), clipPos(cm.doc, Pos(pos.line + 1, 0))) }\\r\\n        var result = unit(cm, pos);\\r\\n        return new Range(result.from, result.to)\\r\\n    }\\r\\n\\r\\n    // Normal selection, as opposed to text dragging.\\r\\n    function leftButtonSelect(cm, event, start, behavior) {\\r\\n        var display = cm.display, doc = cm.doc;\\r\\n        e_preventDefault(event);\\r\\n\\r\\n        var ourRange, ourIndex, startSel = doc.sel, ranges = startSel.ranges;\\r\\n        if (behavior.addNew && !behavior.extend) {\\r\\n            ourIndex = doc.sel.contains(start);\\r\\n            if (ourIndex > -1)\\r\\n            { ourRange = ranges[ourIndex]; }\\r\\n            else\\r\\n            { ourRange = new Range(start, start); }\\r\\n        } else {\\r\\n            ourRange = doc.sel.primary();\\r\\n            ourIndex = doc.sel.primIndex;\\r\\n        }\\r\\n\\r\\n        if (behavior.unit == \\\"rectangle\\\") {\\r\\n            if (!behavior.addNew) { ourRange = new Range(start, start); }\\r\\n            start = posFromMouse(cm, event, true, true);\\r\\n            ourIndex = -1;\\r\\n        } else {\\r\\n            var range$$1 = rangeForUnit(cm, start, behavior.unit);\\r\\n            if (behavior.extend)\\r\\n            { ourRange = extendRange(ourRange, range$$1.anchor, range$$1.head, behavior.extend); }\\r\\n            else\\r\\n            { ourRange = range$$1; }\\r\\n        }\\r\\n\\r\\n        if (!behavior.addNew) {\\r\\n            ourIndex = 0;\\r\\n            setSelection(doc, new Selection([ourRange], 0), sel_mouse);\\r\\n            startSel = doc.sel;\\r\\n        } else if (ourIndex == -1) {\\r\\n            ourIndex = ranges.length;\\r\\n            setSelection(doc, normalizeSelection(cm, ranges.concat([ourRange]), ourIndex),\\r\\n                {scroll: false, origin: \\\"*mouse\\\"});\\r\\n        } else if (ranges.length > 1 && ranges[ourIndex].empty() && behavior.unit == \\\"char\\\" && !behavior.extend) {\\r\\n            setSelection(doc, normalizeSelection(cm, ranges.slice(0, ourIndex).concat(ranges.slice(ourIndex + 1)), 0),\\r\\n                {scroll: false, origin: \\\"*mouse\\\"});\\r\\n            startSel = doc.sel;\\r\\n        } else {\\r\\n            replaceOneSelection(doc, ourIndex, ourRange, sel_mouse);\\r\\n        }\\r\\n\\r\\n        var lastPos = start;\\r\\n        function extendTo(pos) {\\r\\n            if (cmp(lastPos, pos) == 0) { return }\\r\\n            lastPos = pos;\\r\\n\\r\\n            if (behavior.unit == \\\"rectangle\\\") {\\r\\n                var ranges = [], tabSize = cm.options.tabSize;\\r\\n                var startCol = countColumn(getLine(doc, start.line).text, start.ch, tabSize);\\r\\n                var posCol = countColumn(getLine(doc, pos.line).text, pos.ch, tabSize);\\r\\n                var left = Math.min(startCol, posCol), right = Math.max(startCol, posCol);\\r\\n                for (var line = Math.min(start.line, pos.line), end = Math.min(cm.lastLine(), Math.max(start.line, pos.line));\\r\\n                     line <= end; line++) {\\r\\n                    var text = getLine(doc, line).text, leftPos = findColumn(text, left, tabSize);\\r\\n                    if (left == right)\\r\\n                    { ranges.push(new Range(Pos(line, leftPos), Pos(line, leftPos))); }\\r\\n                    else if (text.length > leftPos)\\r\\n                    { ranges.push(new Range(Pos(line, leftPos), Pos(line, findColumn(text, right, tabSize)))); }\\r\\n                }\\r\\n                if (!ranges.length) { ranges.push(new Range(start, start)); }\\r\\n                setSelection(doc, normalizeSelection(cm, startSel.ranges.slice(0, ourIndex).concat(ranges), ourIndex),\\r\\n                    {origin: \\\"*mouse\\\", scroll: false});\\r\\n                cm.scrollIntoView(pos);\\r\\n            } else {\\r\\n                var oldRange = ourRange;\\r\\n                var range$$1 = rangeForUnit(cm, pos, behavior.unit);\\r\\n                var anchor = oldRange.anchor, head;\\r\\n                if (cmp(range$$1.anchor, anchor) > 0) {\\r\\n                    head = range$$1.head;\\r\\n                    anchor = minPos(oldRange.from(), range$$1.anchor);\\r\\n                } else {\\r\\n                    head = range$$1.anchor;\\r\\n                    anchor = maxPos(oldRange.to(), range$$1.head);\\r\\n                }\\r\\n                var ranges$1 = startSel.ranges.slice(0);\\r\\n                ranges$1[ourIndex] = bidiSimplify(cm, new Range(clipPos(doc, anchor), head));\\r\\n                setSelection(doc, normalizeSelection(cm, ranges$1, ourIndex), sel_mouse);\\r\\n            }\\r\\n        }\\r\\n\\r\\n        var editorSize = display.wrapper.getBoundingClientRect();\\r\\n        // Used to ensure timeout re-tries don't fire when another extend\\r\\n        // happened in the meantime (clearTimeout isn't reliable -- at\\r\\n        // least on Chrome, the timeouts still happen even when cleared,\\r\\n        // if the clear happens after their scheduled firing time).\\r\\n        var counter = 0;\\r\\n\\r\\n        function extend(e) {\\r\\n            var curCount = ++counter;\\r\\n            var cur = posFromMouse(cm, e, true, behavior.unit == \\\"rectangle\\\");\\r\\n            if (!cur) { return }\\r\\n            if (cmp(cur, lastPos) != 0) {\\r\\n                cm.curOp.focus = activeElt();\\r\\n                extendTo(cur);\\r\\n                var visible = visibleLines(display, doc);\\r\\n                if (cur.line >= visible.to || cur.line < visible.from)\\r\\n                { setTimeout(operation(cm, function () {if (counter == curCount) { extend(e); }}), 150); }\\r\\n            } else {\\r\\n                var outside = e.clientY < editorSize.top ? -20 : e.clientY > editorSize.bottom ? 20 : 0;\\r\\n                if (outside) { setTimeout(operation(cm, function () {\\r\\n                    if (counter != curCount) { return }\\r\\n                    display.scroller.scrollTop += outside;\\r\\n                    extend(e);\\r\\n                }), 50); }\\r\\n            }\\r\\n        }\\r\\n\\r\\n        function done(e) {\\r\\n            cm.state.selectingText = false;\\r\\n            counter = Infinity;\\r\\n            e_preventDefault(e);\\r\\n            display.input.focus();\\r\\n            off(display.wrapper.ownerDocument, \\\"mousemove\\\", move);\\r\\n            off(display.wrapper.ownerDocument, \\\"mouseup\\\", up);\\r\\n            doc.history.lastSelOrigin = null;\\r\\n        }\\r\\n\\r\\n        var move = operation(cm, function (e) {\\r\\n            if (e.buttons === 0 || !e_button(e)) { done(e); }\\r\\n            else { extend(e); }\\r\\n        });\\r\\n        var up = operation(cm, done);\\r\\n        cm.state.selectingText = up;\\r\\n        on(display.wrapper.ownerDocument, \\\"mousemove\\\", move);\\r\\n        on(display.wrapper.ownerDocument, \\\"mouseup\\\", up);\\r\\n    }\\r\\n\\r\\n    // Used when mouse-selecting to adjust the anchor to the proper side\\r\\n    // of a bidi jump depending on the visual position of the head.\\r\\n    function bidiSimplify(cm, range$$1) {\\r\\n        var anchor = range$$1.anchor;\\r\\n        var head = range$$1.head;\\r\\n        var anchorLine = getLine(cm.doc, anchor.line);\\r\\n        if (cmp(anchor, head) == 0 && anchor.sticky == head.sticky) { return range$$1 }\\r\\n        var order = getOrder(anchorLine);\\r\\n        if (!order) { return range$$1 }\\r\\n        var index = getBidiPartAt(order, anchor.ch, anchor.sticky), part = order[index];\\r\\n        if (part.from != anchor.ch && part.to != anchor.ch) { return range$$1 }\\r\\n        var boundary = index + ((part.from == anchor.ch) == (part.level != 1) ? 0 : 1);\\r\\n        if (boundary == 0 || boundary == order.length) { return range$$1 }\\r\\n\\r\\n        // Compute the relative visual position of the head compared to the\\r\\n        // anchor (<0 is to the left, >0 to the right)\\r\\n        var leftSide;\\r\\n        if (head.line != anchor.line) {\\r\\n            leftSide = (head.line - anchor.line) * (cm.doc.direction == \\\"ltr\\\" ? 1 : -1) > 0;\\r\\n        } else {\\r\\n            var headIndex = getBidiPartAt(order, head.ch, head.sticky);\\r\\n            var dir = headIndex - index || (head.ch - anchor.ch) * (part.level == 1 ? -1 : 1);\\r\\n            if (headIndex == boundary - 1 || headIndex == boundary)\\r\\n            { leftSide = dir < 0; }\\r\\n            else\\r\\n            { leftSide = dir > 0; }\\r\\n        }\\r\\n\\r\\n        var usePart = order[boundary + (leftSide ? -1 : 0)];\\r\\n        var from = leftSide == (usePart.level == 1);\\r\\n        var ch = from ? usePart.from : usePart.to, sticky = from ? \\\"after\\\" : \\\"before\\\";\\r\\n        return anchor.ch == ch && anchor.sticky == sticky ? range$$1 : new Range(new Pos(anchor.line, ch, sticky), head)\\r\\n    }\\r\\n\\r\\n\\r\\n    // Determines whether an event happened in the gutter, and fires the\\r\\n    // handlers for the corresponding event.\\r\\n    function gutterEvent(cm, e, type, prevent) {\\r\\n        var mX, mY;\\r\\n        if (e.touches) {\\r\\n            mX = e.touches[0].clientX;\\r\\n            mY = e.touches[0].clientY;\\r\\n        } else {\\r\\n            try { mX = e.clientX; mY = e.clientY; }\\r\\n            catch(e) { return false }\\r\\n        }\\r\\n        if (mX >= Math.floor(cm.display.gutters.getBoundingClientRect().right)) { return false }\\r\\n        if (prevent) { e_preventDefault(e); }\\r\\n\\r\\n        var display = cm.display;\\r\\n        var lineBox = display.lineDiv.getBoundingClientRect();\\r\\n\\r\\n        if (mY > lineBox.bottom || !hasHandler(cm, type)) { return e_defaultPrevented(e) }\\r\\n        mY -= lineBox.top - display.viewOffset;\\r\\n\\r\\n        for (var i = 0; i < cm.options.gutters.length; ++i) {\\r\\n            var g = display.gutters.childNodes[i];\\r\\n            if (g && g.getBoundingClientRect().right >= mX) {\\r\\n                var line = lineAtHeight(cm.doc, mY);\\r\\n                var gutter = cm.options.gutters[i];\\r\\n                signal(cm, type, cm, line, gutter, e);\\r\\n                return e_defaultPrevented(e)\\r\\n            }\\r\\n        }\\r\\n    }\\r\\n\\r\\n    function clickInGutter(cm, e) {\\r\\n        return gutterEvent(cm, e, \\\"gutterClick\\\", true)\\r\\n    }\\r\\n\\r\\n    // CONTEXT MENU HANDLING\\r\\n\\r\\n    // To make the context menu work, we need to briefly unhide the\\r\\n    // textarea (making it as unobtrusive as possible) to let the\\r\\n    // right-click take effect on it.\\r\\n    function onContextMenu(cm, e) {\\r\\n        if (eventInWidget(cm.display, e) || contextMenuInGutter(cm, e)) { return }\\r\\n        if (signalDOMEvent(cm, e, \\\"contextmenu\\\")) { return }\\r\\n        if (!captureRightClick) { cm.display.input.onContextMenu(e); }\\r\\n    }\\r\\n\\r\\n    function contextMenuInGutter(cm, e) {\\r\\n        if (!hasHandler(cm, \\\"gutterContextMenu\\\")) { return false }\\r\\n        return gutterEvent(cm, e, \\\"gutterContextMenu\\\", false)\\r\\n    }\\r\\n\\r\\n    function themeChanged(cm) {\\r\\n        cm.display.wrapper.className = cm.display.wrapper.className.replace(/\\\\s*cm-s-\\\\S+/g, \\\"\\\") +\\r\\n            cm.options.theme.replace(/(^|\\\\s)\\\\s*/g, \\\" cm-s-\\\");\\r\\n        clearCaches(cm);\\r\\n    }\\r\\n\\r\\n    var Init = {toString: function(){return \\\"CodeMirror.Init\\\"}};\\r\\n\\r\\n    var defaults = {};\\r\\n    var optionHandlers = {};\\r\\n\\r\\n    function defineOptions(CodeMirror) {\\r\\n        var optionHandlers = CodeMirror.optionHandlers;\\r\\n\\r\\n        function option(name, deflt, handle, notOnInit) {\\r\\n            CodeMirror.defaults[name] = deflt;\\r\\n            if (handle) { optionHandlers[name] =\\r\\n                notOnInit ? function (cm, val, old) {if (old != Init) { handle(cm, val, old); }} : handle; }\\r\\n        }\\r\\n\\r\\n        CodeMirror.defineOption = option;\\r\\n\\r\\n        // Passed to option handlers when there is no old value.\\r\\n        CodeMirror.Init = Init;\\r\\n\\r\\n        // These two are, on init, called from the constructor because they\\r\\n        // have to be initialized before the editor can start at all.\\r\\n        option(\\\"value\\\", \\\"\\\", function (cm, val) { return cm.setValue(val); }, true);\\r\\n        option(\\\"mode\\\", null, function (cm, val) {\\r\\n            cm.doc.modeOption = val;\\r\\n            loadMode(cm);\\r\\n        }, true);\\r\\n\\r\\n        option(\\\"indentUnit\\\", 2, loadMode, true);\\r\\n        option(\\\"indentWithTabs\\\", false);\\r\\n        option(\\\"smartIndent\\\", true);\\r\\n        option(\\\"tabSize\\\", 4, function (cm) {\\r\\n            resetModeState(cm);\\r\\n            clearCaches(cm);\\r\\n            regChange(cm);\\r\\n        }, true);\\r\\n\\r\\n        option(\\\"lineSeparator\\\", null, function (cm, val) {\\r\\n            cm.doc.lineSep = val;\\r\\n            if (!val) { return }\\r\\n            var newBreaks = [], lineNo = cm.doc.first;\\r\\n            cm.doc.iter(function (line) {\\r\\n                for (var pos = 0;;) {\\r\\n                    var found = line.text.indexOf(val, pos);\\r\\n                    if (found == -1) { break }\\r\\n                    pos = found + val.length;\\r\\n                    newBreaks.push(Pos(lineNo, found));\\r\\n                }\\r\\n                lineNo++;\\r\\n            });\\r\\n            for (var i = newBreaks.length - 1; i >= 0; i--)\\r\\n            { replaceRange(cm.doc, val, newBreaks[i], Pos(newBreaks[i].line, newBreaks[i].ch + val.length)); }\\r\\n        });\\r\\n        option(\\\"specialChars\\\", /[\\\\u0000-\\\\u001f\\\\u007f-\\\\u009f\\\\u00ad\\\\u061c\\\\u200b-\\\\u200f\\\\u2028\\\\u2029\\\\ufeff]/g, function (cm, val, old) {\\r\\n            cm.state.specialChars = new RegExp(val.source + (val.test(\\\"\\\\t\\\") ? \\\"\\\" : \\\"|\\\\t\\\"), \\\"g\\\");\\r\\n            if (old != Init) { cm.refresh(); }\\r\\n        });\\r\\n        option(\\\"specialCharPlaceholder\\\", defaultSpecialCharPlaceholder, function (cm) { return cm.refresh(); }, true);\\r\\n        option(\\\"electricChars\\\", true);\\r\\n        option(\\\"inputStyle\\\", mobile ? \\\"contenteditable\\\" : \\\"textarea\\\", function () {\\r\\n            throw new Error(\\\"inputStyle can not (yet) be changed in a running editor\\\") // FIXME\\r\\n        }, true);\\r\\n        option(\\\"spellcheck\\\", false, function (cm, val) { return cm.getInputField().spellcheck = val; }, true);\\r\\n        option(\\\"rtlMoveVisually\\\", !windows);\\r\\n        option(\\\"wholeLineUpdateBefore\\\", true);\\r\\n\\r\\n        option(\\\"theme\\\", \\\"default\\\", function (cm) {\\r\\n            themeChanged(cm);\\r\\n            guttersChanged(cm);\\r\\n        }, true);\\r\\n        option(\\\"keyMap\\\", \\\"default\\\", function (cm, val, old) {\\r\\n            var next = getKeyMap(val);\\r\\n            var prev = old != Init && getKeyMap(old);\\r\\n            if (prev && prev.detach) { prev.detach(cm, next); }\\r\\n            if (next.attach) { next.attach(cm, prev || null); }\\r\\n        });\\r\\n        option(\\\"extraKeys\\\", null);\\r\\n        option(\\\"configureMouse\\\", null);\\r\\n\\r\\n        option(\\\"lineWrapping\\\", false, wrappingChanged, true);\\r\\n        option(\\\"gutters\\\", [], function (cm) {\\r\\n            setGuttersForLineNumbers(cm.options);\\r\\n            guttersChanged(cm);\\r\\n        }, true);\\r\\n        option(\\\"fixedGutter\\\", true, function (cm, val) {\\r\\n            cm.display.gutters.style.left = val ? compensateForHScroll(cm.display) + \\\"px\\\" : \\\"0\\\";\\r\\n            cm.refresh();\\r\\n        }, true);\\r\\n        option(\\\"coverGutterNextToScrollbar\\\", false, function (cm) { return updateScrollbars(cm); }, true);\\r\\n        option(\\\"scrollbarStyle\\\", \\\"native\\\", function (cm) {\\r\\n            initScrollbars(cm);\\r\\n            updateScrollbars(cm);\\r\\n            cm.display.scrollbars.setScrollTop(cm.doc.scrollTop);\\r\\n            cm.display.scrollbars.setScrollLeft(cm.doc.scrollLeft);\\r\\n        }, true);\\r\\n        option(\\\"lineNumbers\\\", false, function (cm) {\\r\\n            setGuttersForLineNumbers(cm.options);\\r\\n            guttersChanged(cm);\\r\\n        }, true);\\r\\n        option(\\\"firstLineNumber\\\", 1, guttersChanged, true);\\r\\n        option(\\\"lineNumberFormatter\\\", function (integer) { return integer; }, guttersChanged, true);\\r\\n        option(\\\"showCursorWhenSelecting\\\", false, updateSelection, true);\\r\\n\\r\\n        option(\\\"resetSelectionOnContextMenu\\\", true);\\r\\n        option(\\\"lineWiseCopyCut\\\", true);\\r\\n        option(\\\"pasteLinesPerSelection\\\", true);\\r\\n        option(\\\"selectionsMayTouch\\\", false);\\r\\n\\r\\n        option(\\\"readOnly\\\", false, function (cm, val) {\\r\\n            if (val == \\\"nocursor\\\") {\\r\\n                onBlur(cm);\\r\\n                cm.display.input.blur();\\r\\n            }\\r\\n            cm.display.input.readOnlyChanged(val);\\r\\n        });\\r\\n        option(\\\"disableInput\\\", false, function (cm, val) {if (!val) { cm.display.input.reset(); }}, true);\\r\\n        option(\\\"dragDrop\\\", true, dragDropChanged);\\r\\n        option(\\\"allowDropFileTypes\\\", null);\\r\\n\\r\\n        option(\\\"cursorBlinkRate\\\", 530);\\r\\n        option(\\\"cursorScrollMargin\\\", 0);\\r\\n        option(\\\"cursorHeight\\\", 1, updateSelection, true);\\r\\n        option(\\\"singleCursorHeightPerLine\\\", true, updateSelection, true);\\r\\n        option(\\\"workTime\\\", 100);\\r\\n        option(\\\"workDelay\\\", 100);\\r\\n        option(\\\"flattenSpans\\\", true, resetModeState, true);\\r\\n        option(\\\"addModeClass\\\", false, resetModeState, true);\\r\\n        option(\\\"pollInterval\\\", 100);\\r\\n        option(\\\"undoDepth\\\", 200, function (cm, val) { return cm.doc.history.undoDepth = val; });\\r\\n        option(\\\"historyEventDelay\\\", 1250);\\r\\n        option(\\\"viewportMargin\\\", 10, function (cm) { return cm.refresh(); }, true);\\r\\n        option(\\\"maxHighlightLength\\\", 10000, resetModeState, true);\\r\\n        option(\\\"moveInputWithCursor\\\", true, function (cm, val) {\\r\\n            if (!val) { cm.display.input.resetPosition(); }\\r\\n        });\\r\\n\\r\\n        option(\\\"tabindex\\\", null, function (cm, val) { return cm.display.input.getField().tabIndex = val || \\\"\\\"; });\\r\\n        option(\\\"autofocus\\\", null);\\r\\n        option(\\\"direction\\\", \\\"ltr\\\", function (cm, val) { return cm.doc.setDirection(val); }, true);\\r\\n        option(\\\"phrases\\\", null);\\r\\n    }\\r\\n\\r\\n    function guttersChanged(cm) {\\r\\n        updateGutters(cm);\\r\\n        regChange(cm);\\r\\n        alignHorizontally(cm);\\r\\n    }\\r\\n\\r\\n    function dragDropChanged(cm, value, old) {\\r\\n        var wasOn = old && old != Init;\\r\\n        if (!value != !wasOn) {\\r\\n            var funcs = cm.display.dragFunctions;\\r\\n            var toggle = value ? on : off;\\r\\n            toggle(cm.display.scroller, \\\"dragstart\\\", funcs.start);\\r\\n            toggle(cm.display.scroller, \\\"dragenter\\\", funcs.enter);\\r\\n            toggle(cm.display.scroller, \\\"dragover\\\", funcs.over);\\r\\n            toggle(cm.display.scroller, \\\"dragleave\\\", funcs.leave);\\r\\n            toggle(cm.display.scroller, \\\"drop\\\", funcs.drop);\\r\\n        }\\r\\n    }\\r\\n\\r\\n    function wrappingChanged(cm) {\\r\\n        if (cm.options.lineWrapping) {\\r\\n            addClass(cm.display.wrapper, \\\"CodeMirror-wrap\\\");\\r\\n            cm.display.sizer.style.minWidth = \\\"\\\";\\r\\n            cm.display.sizerWidth = null;\\r\\n        } else {\\r\\n            rmClass(cm.display.wrapper, \\\"CodeMirror-wrap\\\");\\r\\n            findMaxLine(cm);\\r\\n        }\\r\\n        estimateLineHeights(cm);\\r\\n        regChange(cm);\\r\\n        clearCaches(cm);\\r\\n        setTimeout(function () { return updateScrollbars(cm); }, 100);\\r\\n    }\\r\\n\\r\\n    // A CodeMirror instance represents an editor. This is the object\\r\\n    // that user code is usually dealing with.\\r\\n\\r\\n    function CodeMirror(place, options) {\\r\\n        var this$1 = this;\\r\\n\\r\\n        if (!(this instanceof CodeMirror)) { return new CodeMirror(place, options) }\\r\\n\\r\\n        this.options = options = options ? copyObj(options) : {};\\r\\n        // Determine effective options based on given values and defaults.\\r\\n        copyObj(defaults, options, false);\\r\\n        setGuttersForLineNumbers(options);\\r\\n\\r\\n        var doc = options.value;\\r\\n        if (typeof doc == \\\"string\\\") { doc = new Doc(doc, options.mode, null, options.lineSeparator, options.direction); }\\r\\n        else if (options.mode) { doc.modeOption = options.mode; }\\r\\n        this.doc = doc;\\r\\n\\r\\n        var input = new CodeMirror.inputStyles[options.inputStyle](this);\\r\\n        var display = this.display = new Display(place, doc, input);\\r\\n        display.wrapper.CodeMirror = this;\\r\\n        updateGutters(this);\\r\\n        themeChanged(this);\\r\\n        if (options.lineWrapping)\\r\\n        { this.display.wrapper.className += \\\" CodeMirror-wrap\\\"; }\\r\\n        initScrollbars(this);\\r\\n\\r\\n        this.state = {\\r\\n            keyMaps: [],  // stores maps added by addKeyMap\\r\\n            overlays: [], // highlighting overlays, as added by addOverlay\\r\\n            modeGen: 0,   // bumped when mode/overlay changes, used to invalidate highlighting info\\r\\n            overwrite: false,\\r\\n            delayingBlurEvent: false,\\r\\n            focused: false,\\r\\n            suppressEdits: false, // used to disable editing during key handlers when in readOnly mode\\r\\n            pasteIncoming: false, cutIncoming: false, // help recognize paste/cut edits in input.poll\\r\\n            selectingText: false,\\r\\n            draggingText: false,\\r\\n            highlight: new Delayed(), // stores highlight worker timeout\\r\\n            keySeq: null,  // Unfinished key sequence\\r\\n            specialChars: null\\r\\n        };\\r\\n\\r\\n        if (options.autofocus && !mobile) { display.input.focus(); }\\r\\n\\r\\n        // Override magic textarea content restore that IE sometimes does\\r\\n        // on our hidden textarea on reload\\r\\n        if (ie && ie_version < 11) { setTimeout(function () { return this$1.display.input.reset(true); }, 20); }\\r\\n\\r\\n        registerEventHandlers(this);\\r\\n        ensureGlobalHandlers();\\r\\n\\r\\n        startOperation(this);\\r\\n        this.curOp.forceUpdate = true;\\r\\n        attachDoc(this, doc);\\r\\n\\r\\n        if ((options.autofocus && !mobile) || this.hasFocus())\\r\\n        { setTimeout(bind(onFocus, this), 20); }\\r\\n        else\\r\\n        { onBlur(this); }\\r\\n\\r\\n        for (var opt in optionHandlers) { if (optionHandlers.hasOwnProperty(opt))\\r\\n        { optionHandlers[opt](this, options[opt], Init); } }\\r\\n        maybeUpdateLineNumberWidth(this);\\r\\n        if (options.finishInit) { options.finishInit(this); }\\r\\n        for (var i = 0; i < initHooks.length; ++i) { initHooks[i](this); }\\r\\n        endOperation(this);\\r\\n        // Suppress optimizelegibility in Webkit, since it breaks text\\r\\n        // measuring on line wrapping boundaries.\\r\\n        if (webkit && options.lineWrapping &&\\r\\n            getComputedStyle(display.lineDiv).textRendering == \\\"optimizelegibility\\\")\\r\\n        { display.lineDiv.style.textRendering = \\\"auto\\\"; }\\r\\n    }\\r\\n\\r\\n    // The default configuration options.\\r\\n    CodeMirror.defaults = defaults;\\r\\n    // Functions to run when options are changed.\\r\\n    CodeMirror.optionHandlers = optionHandlers;\\r\\n\\r\\n    // Attach the necessary event handlers when initializing the editor\\r\\n    function registerEventHandlers(cm) {\\r\\n        var d = cm.display;\\r\\n        on(d.scroller, \\\"mousedown\\\", operation(cm, onMouseDown));\\r\\n        // Older IE's will not fire a second mousedown for a double click\\r\\n        if (ie && ie_version < 11)\\r\\n        { on(d.scroller, \\\"dblclick\\\", operation(cm, function (e) {\\r\\n            if (signalDOMEvent(cm, e)) { return }\\r\\n            var pos = posFromMouse(cm, e);\\r\\n            if (!pos || clickInGutter(cm, e) || eventInWidget(cm.display, e)) { return }\\r\\n            e_preventDefault(e);\\r\\n            var word = cm.findWordAt(pos);\\r\\n            extendSelection(cm.doc, word.anchor, word.head);\\r\\n        })); }\\r\\n        else\\r\\n        { on(d.scroller, \\\"dblclick\\\", function (e) { return signalDOMEvent(cm, e) || e_preventDefault(e); }); }\\r\\n        // Some browsers fire contextmenu *after* opening the menu, at\\r\\n        // which point we can't mess with it anymore. Context menu is\\r\\n        // handled in onMouseDown for these browsers.\\r\\n        on(d.scroller, \\\"contextmenu\\\", function (e) { return onContextMenu(cm, e); });\\r\\n\\r\\n        // Used to suppress mouse event handling when a touch happens\\r\\n        var touchFinished, prevTouch = {end: 0};\\r\\n        function finishTouch() {\\r\\n            if (d.activeTouch) {\\r\\n                touchFinished = setTimeout(function () { return d.activeTouch = null; }, 1000);\\r\\n                prevTouch = d.activeTouch;\\r\\n                prevTouch.end = +new Date;\\r\\n            }\\r\\n        }\\r\\n        function isMouseLikeTouchEvent(e) {\\r\\n            if (e.touches.length != 1) { return false }\\r\\n            var touch = e.touches[0];\\r\\n            return touch.radiusX <= 1 && touch.radiusY <= 1\\r\\n        }\\r\\n        function farAway(touch, other) {\\r\\n            if (other.left == null) { return true }\\r\\n            var dx = other.left - touch.left, dy = other.top - touch.top;\\r\\n            return dx * dx + dy * dy > 20 * 20\\r\\n        }\\r\\n        on(d.scroller, \\\"touchstart\\\", function (e) {\\r\\n            if (!signalDOMEvent(cm, e) && !isMouseLikeTouchEvent(e) && !clickInGutter(cm, e)) {\\r\\n                d.input.ensurePolled();\\r\\n                clearTimeout(touchFinished);\\r\\n                var now = +new Date;\\r\\n                d.activeTouch = {start: now, moved: false,\\r\\n                    prev: now - prevTouch.end <= 300 ? prevTouch : null};\\r\\n                if (e.touches.length == 1) {\\r\\n                    d.activeTouch.left = e.touches[0].pageX;\\r\\n                    d.activeTouch.top = e.touches[0].pageY;\\r\\n                }\\r\\n            }\\r\\n        });\\r\\n        on(d.scroller, \\\"touchmove\\\", function () {\\r\\n            if (d.activeTouch) { d.activeTouch.moved = true; }\\r\\n        });\\r\\n        on(d.scroller, \\\"touchend\\\", function (e) {\\r\\n            var touch = d.activeTouch;\\r\\n            if (touch && !eventInWidget(d, e) && touch.left != null &&\\r\\n                !touch.moved && new Date - touch.start < 300) {\\r\\n                var pos = cm.coordsChar(d.activeTouch, \\\"page\\\"), range;\\r\\n                if (!touch.prev || farAway(touch, touch.prev)) // Single tap\\r\\n                { range = new Range(pos, pos); }\\r\\n                else if (!touch.prev.prev || farAway(touch, touch.prev.prev)) // Double tap\\r\\n                { range = cm.findWordAt(pos); }\\r\\n                else // Triple tap\\r\\n                { range = new Range(Pos(pos.line, 0), clipPos(cm.doc, Pos(pos.line + 1, 0))); }\\r\\n                cm.setSelection(range.anchor, range.head);\\r\\n                cm.focus();\\r\\n                e_preventDefault(e);\\r\\n            }\\r\\n            finishTouch();\\r\\n        });\\r\\n        on(d.scroller, \\\"touchcancel\\\", finishTouch);\\r\\n\\r\\n        // Sync scrolling between fake scrollbars and real scrollable\\r\\n        // area, ensure viewport is updated when scrolling.\\r\\n        on(d.scroller, \\\"scroll\\\", function () {\\r\\n            if (d.scroller.clientHeight) {\\r\\n                updateScrollTop(cm, d.scroller.scrollTop);\\r\\n                setScrollLeft(cm, d.scroller.scrollLeft, true);\\r\\n                signal(cm, \\\"scroll\\\", cm);\\r\\n            }\\r\\n        });\\r\\n\\r\\n        // Listen to wheel events in order to try and update the viewport on time.\\r\\n        on(d.scroller, \\\"mousewheel\\\", function (e) { return onScrollWheel(cm, e); });\\r\\n        on(d.scroller, \\\"DOMMouseScroll\\\", function (e) { return onScrollWheel(cm, e); });\\r\\n\\r\\n        // Prevent wrapper from ever scrolling\\r\\n        on(d.wrapper, \\\"scroll\\\", function () { return d.wrapper.scrollTop = d.wrapper.scrollLeft = 0; });\\r\\n\\r\\n        d.dragFunctions = {\\r\\n            enter: function (e) {if (!signalDOMEvent(cm, e)) { e_stop(e); }},\\r\\n            over: function (e) {if (!signalDOMEvent(cm, e)) { onDragOver(cm, e); e_stop(e); }},\\r\\n            start: function (e) { return onDragStart(cm, e); },\\r\\n            drop: operation(cm, onDrop),\\r\\n            leave: function (e) {if (!signalDOMEvent(cm, e)) { clearDragCursor(cm); }}\\r\\n        };\\r\\n\\r\\n        var inp = d.input.getField();\\r\\n        on(inp, \\\"keyup\\\", function (e) { return onKeyUp.call(cm, e); });\\r\\n        on(inp, \\\"keydown\\\", operation(cm, onKeyDown));\\r\\n        on(inp, \\\"keypress\\\", operation(cm, onKeyPress));\\r\\n        on(inp, \\\"focus\\\", function (e) { return onFocus(cm, e); });\\r\\n        on(inp, \\\"blur\\\", function (e) { return onBlur(cm, e); });\\r\\n    }\\r\\n\\r\\n    var initHooks = [];\\r\\n    CodeMirror.defineInitHook = function (f) { return initHooks.push(f); };\\r\\n\\r\\n    // Indent the given line. The how parameter can be \\\"smart\\\",\\r\\n    // \\\"add\\\"/null, \\\"subtract\\\", or \\\"prev\\\". When aggressive is false\\r\\n    // (typically set to true for forced single-line indents), empty\\r\\n    // lines are not indented, and places where the mode returns Pass\\r\\n    // are left alone.\\r\\n    function indentLine(cm, n, how, aggressive) {\\r\\n        var doc = cm.doc, state;\\r\\n        if (how == null) { how = \\\"add\\\"; }\\r\\n        if (how == \\\"smart\\\") {\\r\\n            // Fall back to \\\"prev\\\" when the mode doesn't have an indentation\\r\\n            // method.\\r\\n            if (!doc.mode.indent) { how = \\\"prev\\\"; }\\r\\n            else { state = getContextBefore(cm, n).state; }\\r\\n        }\\r\\n\\r\\n        var tabSize = cm.options.tabSize;\\r\\n        var line = getLine(doc, n), curSpace = countColumn(line.text, null, tabSize);\\r\\n        if (line.stateAfter) { line.stateAfter = null; }\\r\\n        var curSpaceString = line.text.match(/^\\\\s*/)[0], indentation;\\r\\n        if (!aggressive && !/\\\\S/.test(line.text)) {\\r\\n            indentation = 0;\\r\\n            how = \\\"not\\\";\\r\\n        } else if (how == \\\"smart\\\") {\\r\\n            indentation = doc.mode.indent(state, line.text.slice(curSpaceString.length), line.text);\\r\\n            if (indentation == Pass || indentation > 150) {\\r\\n                if (!aggressive) { return }\\r\\n                how = \\\"prev\\\";\\r\\n            }\\r\\n        }\\r\\n        if (how == \\\"prev\\\") {\\r\\n            if (n > doc.first) { indentation = countColumn(getLine(doc, n-1).text, null, tabSize); }\\r\\n            else { indentation = 0; }\\r\\n        } else if (how == \\\"add\\\") {\\r\\n            indentation = curSpace + cm.options.indentUnit;\\r\\n        } else if (how == \\\"subtract\\\") {\\r\\n            indentation = curSpace - cm.options.indentUnit;\\r\\n        } else if (typeof how == \\\"number\\\") {\\r\\n            indentation = curSpace + how;\\r\\n        }\\r\\n        indentation = Math.max(0, indentation);\\r\\n\\r\\n        var indentString = \\\"\\\", pos = 0;\\r\\n        if (cm.options.indentWithTabs)\\r\\n        { for (var i = Math.floor(indentation / tabSize); i; --i) {pos += tabSize; indentString += \\\"\\\\t\\\";} }\\r\\n        if (pos < indentation) { indentString += spaceStr(indentation - pos); }\\r\\n\\r\\n        if (indentString != curSpaceString) {\\r\\n            replaceRange(doc, indentString, Pos(n, 0), Pos(n, curSpaceString.length), \\\"+input\\\");\\r\\n            line.stateAfter = null;\\r\\n            return true\\r\\n        } else {\\r\\n            // Ensure that, if the cursor was in the whitespace at the start\\r\\n            // of the line, it is moved to the end of that space.\\r\\n            for (var i$1 = 0; i$1 < doc.sel.ranges.length; i$1++) {\\r\\n                var range = doc.sel.ranges[i$1];\\r\\n                if (range.head.line == n && range.head.ch < curSpaceString.length) {\\r\\n                    var pos$1 = Pos(n, curSpaceString.length);\\r\\n                    replaceOneSelection(doc, i$1, new Range(pos$1, pos$1));\\r\\n                    break\\r\\n                }\\r\\n            }\\r\\n        }\\r\\n    }\\r\\n\\r\\n    // This will be set to a {lineWise: bool, text: [string]} object, so\\r\\n    // that, when pasting, we know what kind of selections the copied\\r\\n    // text was made out of.\\r\\n    var lastCopied = null;\\r\\n\\r\\n    function setLastCopied(newLastCopied) {\\r\\n        lastCopied = newLastCopied;\\r\\n    }\\r\\n\\r\\n    function applyTextInput(cm, inserted, deleted, sel, origin) {\\r\\n        var doc = cm.doc;\\r\\n        cm.display.shift = false;\\r\\n        if (!sel) { sel = doc.sel; }\\r\\n\\r\\n        var paste = cm.state.pasteIncoming || origin == \\\"paste\\\";\\r\\n        var textLines = splitLinesAuto(inserted), multiPaste = null;\\r\\n        // When pasting N lines into N selections, insert one line per selection\\r\\n        if (paste && sel.ranges.length > 1) {\\r\\n            if (lastCopied && lastCopied.text.join(\\\"\\\\n\\\") == inserted) {\\r\\n                if (sel.ranges.length % lastCopied.text.length == 0) {\\r\\n                    multiPaste = [];\\r\\n                    for (var i = 0; i < lastCopied.text.length; i++)\\r\\n                    { multiPaste.push(doc.splitLines(lastCopied.text[i])); }\\r\\n                }\\r\\n            } else if (textLines.length == sel.ranges.length && cm.options.pasteLinesPerSelection) {\\r\\n                multiPaste = map(textLines, function (l) { return [l]; });\\r\\n            }\\r\\n        }\\r\\n\\r\\n        var updateInput = cm.curOp.updateInput;\\r\\n        // Normal behavior is to insert the new text into every selection\\r\\n        for (var i$1 = sel.ranges.length - 1; i$1 >= 0; i$1--) {\\r\\n            var range$$1 = sel.ranges[i$1];\\r\\n            var from = range$$1.from(), to = range$$1.to();\\r\\n            if (range$$1.empty()) {\\r\\n                if (deleted && deleted > 0) // Handle deletion\\r\\n                { from = Pos(from.line, from.ch - deleted); }\\r\\n                else if (cm.state.overwrite && !paste) // Handle overwrite\\r\\n                { to = Pos(to.line, Math.min(getLine(doc, to.line).text.length, to.ch + lst(textLines).length)); }\\r\\n                else if (paste && lastCopied && lastCopied.lineWise && lastCopied.text.join(\\\"\\\\n\\\") == inserted)\\r\\n                { from = to = Pos(from.line, 0); }\\r\\n            }\\r\\n            var changeEvent = {from: from, to: to, text: multiPaste ? multiPaste[i$1 % multiPaste.length] : textLines,\\r\\n                origin: origin || (paste ? \\\"paste\\\" : cm.state.cutIncoming ? \\\"cut\\\" : \\\"+input\\\")};\\r\\n            makeChange(cm.doc, changeEvent);\\r\\n            signalLater(cm, \\\"inputRead\\\", cm, changeEvent);\\r\\n        }\\r\\n        if (inserted && !paste)\\r\\n        { triggerElectric(cm, inserted); }\\r\\n\\r\\n        ensureCursorVisible(cm);\\r\\n        if (cm.curOp.updateInput < 2) { cm.curOp.updateInput = updateInput; }\\r\\n        cm.curOp.typing = true;\\r\\n        cm.state.pasteIncoming = cm.state.cutIncoming = false;\\r\\n    }\\r\\n\\r\\n    function handlePaste(e, cm) {\\r\\n        var pasted = e.clipboardData && e.clipboardData.getData(\\\"Text\\\");\\r\\n        if (pasted) {\\r\\n            e.preventDefault();\\r\\n            if (!cm.isReadOnly() && !cm.options.disableInput)\\r\\n            { runInOp(cm, function () { return applyTextInput(cm, pasted, 0, null, \\\"paste\\\"); }); }\\r\\n            return true\\r\\n        }\\r\\n    }\\r\\n\\r\\n    function triggerElectric(cm, inserted) {\\r\\n        // When an 'electric' character is inserted, immediately trigger a reindent\\r\\n        if (!cm.options.electricChars || !cm.options.smartIndent) { return }\\r\\n        var sel = cm.doc.sel;\\r\\n\\r\\n        for (var i = sel.ranges.length - 1; i >= 0; i--) {\\r\\n            var range$$1 = sel.ranges[i];\\r\\n            if (range$$1.head.ch > 100 || (i && sel.ranges[i - 1].head.line == range$$1.head.line)) { continue }\\r\\n            var mode = cm.getModeAt(range$$1.head);\\r\\n            var indented = false;\\r\\n            if (mode.electricChars) {\\r\\n                for (var j = 0; j < mode.electricChars.length; j++)\\r\\n                { if (inserted.indexOf(mode.electricChars.charAt(j)) > -1) {\\r\\n                    indented = indentLine(cm, range$$1.head.line, \\\"smart\\\");\\r\\n                    break\\r\\n                } }\\r\\n            } else if (mode.electricInput) {\\r\\n                if (mode.electricInput.test(getLine(cm.doc, range$$1.head.line).text.slice(0, range$$1.head.ch)))\\r\\n                { indented = indentLine(cm, range$$1.head.line, \\\"smart\\\"); }\\r\\n            }\\r\\n            if (indented) { signalLater(cm, \\\"electricInput\\\", cm, range$$1.head.line); }\\r\\n        }\\r\\n    }\\r\\n\\r\\n    function copyableRanges(cm) {\\r\\n        var text = [], ranges = [];\\r\\n        for (var i = 0; i < cm.doc.sel.ranges.length; i++) {\\r\\n            var line = cm.doc.sel.ranges[i].head.line;\\r\\n            var lineRange = {anchor: Pos(line, 0), head: Pos(line + 1, 0)};\\r\\n            ranges.push(lineRange);\\r\\n            text.push(cm.getRange(lineRange.anchor, lineRange.head));\\r\\n        }\\r\\n        return {text: text, ranges: ranges}\\r\\n    }\\r\\n\\r\\n    function disableBrowserMagic(field, spellcheck) {\\r\\n        field.setAttribute(\\\"autocorrect\\\", \\\"off\\\");\\r\\n        field.setAttribute(\\\"autocapitalize\\\", \\\"off\\\");\\r\\n        field.setAttribute(\\\"spellcheck\\\", !!spellcheck);\\r\\n    }\\r\\n\\r\\n    function hiddenTextarea() {\\r\\n        var te = elt(\\\"textarea\\\", null, null, \\\"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none\\\");\\r\\n        var div = elt(\\\"div\\\", [te], null, \\\"overflow: hidden; position: relative; width: 3px; height: 0px;\\\");\\r\\n        // The textarea is kept positioned near the cursor to prevent the\\r\\n        // fact that it'll be scrolled into view on input from scrolling\\r\\n        // our fake cursor out of view. On webkit, when wrap=off, paste is\\r\\n        // very slow. So make the area wide instead.\\r\\n        if (webkit) { te.style.width = \\\"1000px\\\"; }\\r\\n        else { te.setAttribute(\\\"wrap\\\", \\\"off\\\"); }\\r\\n        // If border: 0; -- iOS fails to open keyboard (issue #1287)\\r\\n        if (ios) { te.style.border = \\\"1px solid black\\\"; }\\r\\n        disableBrowserMagic(te);\\r\\n        return div\\r\\n    }\\r\\n\\r\\n    // The publicly visible API. Note that methodOp(f) means\\r\\n    // 'wrap f in an operation, performed on its `this` parameter'.\\r\\n\\r\\n    // This is not the complete set of editor methods. Most of the\\r\\n    // methods defined on the Doc type are also injected into\\r\\n    // CodeMirror.prototype, for backwards compatibility and\\r\\n    // convenience.\\r\\n\\r\\n    function addEditorMethods(CodeMirror) {\\r\\n        var optionHandlers = CodeMirror.optionHandlers;\\r\\n\\r\\n        var helpers = CodeMirror.helpers = {};\\r\\n\\r\\n        CodeMirror.prototype = {\\r\\n            constructor: CodeMirror,\\r\\n            focus: function(){window.focus(); this.display.input.focus();},\\r\\n\\r\\n            setOption: function(option, value) {\\r\\n                var options = this.options, old = options[option];\\r\\n                if (options[option] == value && option != \\\"mode\\\") { return }\\r\\n                options[option] = value;\\r\\n                if (optionHandlers.hasOwnProperty(option))\\r\\n                { operation(this, optionHandlers[option])(this, value, old); }\\r\\n                signal(this, \\\"optionChange\\\", this, option);\\r\\n            },\\r\\n\\r\\n            getOption: function(option) {return this.options[option]},\\r\\n            getDoc: function() {return this.doc},\\r\\n\\r\\n            addKeyMap: function(map$$1, bottom) {\\r\\n                this.state.keyMaps[bottom ? \\\"push\\\" : \\\"unshift\\\"](getKeyMap(map$$1));\\r\\n            },\\r\\n            removeKeyMap: function(map$$1) {\\r\\n                var maps = this.state.keyMaps;\\r\\n                for (var i = 0; i < maps.length; ++i)\\r\\n                { if (maps[i] == map$$1 || maps[i].name == map$$1) {\\r\\n                    maps.splice(i, 1);\\r\\n                    return true\\r\\n                } }\\r\\n            },\\r\\n\\r\\n            addOverlay: methodOp(function(spec, options) {\\r\\n                var mode = spec.token ? spec : CodeMirror.getMode(this.options, spec);\\r\\n                if (mode.startState) { throw new Error(\\\"Overlays may not be stateful.\\\") }\\r\\n                insertSorted(this.state.overlays,\\r\\n                    {mode: mode, modeSpec: spec, opaque: options && options.opaque,\\r\\n                        priority: (options && options.priority) || 0},\\r\\n                    function (overlay) { return overlay.priority; });\\r\\n                this.state.modeGen++;\\r\\n                regChange(this);\\r\\n            }),\\r\\n            removeOverlay: methodOp(function(spec) {\\r\\n                var overlays = this.state.overlays;\\r\\n                for (var i = 0; i < overlays.length; ++i) {\\r\\n                    var cur = overlays[i].modeSpec;\\r\\n                    if (cur == spec || typeof spec == \\\"string\\\" && cur.name == spec) {\\r\\n                        overlays.splice(i, 1);\\r\\n                        this.state.modeGen++;\\r\\n                        regChange(this);\\r\\n                        return\\r\\n                    }\\r\\n                }\\r\\n            }),\\r\\n\\r\\n            indentLine: methodOp(function(n, dir, aggressive) {\\r\\n                if (typeof dir != \\\"string\\\" && typeof dir != \\\"number\\\") {\\r\\n                    if (dir == null) { dir = this.options.smartIndent ? \\\"smart\\\" : \\\"prev\\\"; }\\r\\n                    else { dir = dir ? \\\"add\\\" : \\\"subtract\\\"; }\\r\\n                }\\r\\n                if (isLine(this.doc, n)) { indentLine(this, n, dir, aggressive); }\\r\\n            }),\\r\\n            indentSelection: methodOp(function(how) {\\r\\n                var ranges = this.doc.sel.ranges, end = -1;\\r\\n                for (var i = 0; i < ranges.length; i++) {\\r\\n                    var range$$1 = ranges[i];\\r\\n                    if (!range$$1.empty()) {\\r\\n                        var from = range$$1.from(), to = range$$1.to();\\r\\n                        var start = Math.max(end, from.line);\\r\\n                        end = Math.min(this.lastLine(), to.line - (to.ch ? 0 : 1)) + 1;\\r\\n                        for (var j = start; j < end; ++j)\\r\\n                        { indentLine(this, j, how); }\\r\\n                        var newRanges = this.doc.sel.ranges;\\r\\n                        if (from.ch == 0 && ranges.length == newRanges.length && newRanges[i].from().ch > 0)\\r\\n                        { replaceOneSelection(this.doc, i, new Range(from, newRanges[i].to()), sel_dontScroll); }\\r\\n                    } else if (range$$1.head.line > end) {\\r\\n                        indentLine(this, range$$1.head.line, how, true);\\r\\n                        end = range$$1.head.line;\\r\\n                        if (i == this.doc.sel.primIndex) { ensureCursorVisible(this); }\\r\\n                    }\\r\\n                }\\r\\n            }),\\r\\n\\r\\n            // Fetch the parser token for a given character. Useful for hacks\\r\\n            // that want to inspect the mode state (say, for completion).\\r\\n            getTokenAt: function(pos, precise) {\\r\\n                return takeToken(this, pos, precise)\\r\\n            },\\r\\n\\r\\n            getLineTokens: function(line, precise) {\\r\\n                return takeToken(this, Pos(line), precise, true)\\r\\n            },\\r\\n\\r\\n            getTokenTypeAt: function(pos) {\\r\\n                pos = clipPos(this.doc, pos);\\r\\n                var styles = getLineStyles(this, getLine(this.doc, pos.line));\\r\\n                var before = 0, after = (styles.length - 1) / 2, ch = pos.ch;\\r\\n                var type;\\r\\n                if (ch == 0) { type = styles[2]; }\\r\\n                else { for (;;) {\\r\\n                    var mid = (before + after) >> 1;\\r\\n                    if ((mid ? styles[mid * 2 - 1] : 0) >= ch) { after = mid; }\\r\\n                    else if (styles[mid * 2 + 1] < ch) { before = mid + 1; }\\r\\n                    else { type = styles[mid * 2 + 2]; break }\\r\\n                } }\\r\\n                var cut = type ? type.indexOf(\\\"overlay \\\") : -1;\\r\\n                return cut < 0 ? type : cut == 0 ? null : type.slice(0, cut - 1)\\r\\n            },\\r\\n\\r\\n            getModeAt: function(pos) {\\r\\n                var mode = this.doc.mode;\\r\\n                if (!mode.innerMode) { return mode }\\r\\n                return CodeMirror.innerMode(mode, this.getTokenAt(pos).state).mode\\r\\n            },\\r\\n\\r\\n            getHelper: function(pos, type) {\\r\\n                return this.getHelpers(pos, type)[0]\\r\\n            },\\r\\n\\r\\n            getHelpers: function(pos, type) {\\r\\n                var found = [];\\r\\n                if (!helpers.hasOwnProperty(type)) { return found }\\r\\n                var help = helpers[type], mode = this.getModeAt(pos);\\r\\n                if (typeof mode[type] == \\\"string\\\") {\\r\\n                    if (help[mode[type]]) { found.push(help[mode[type]]); }\\r\\n                } else if (mode[type]) {\\r\\n                    for (var i = 0; i < mode[type].length; i++) {\\r\\n                        var val = help[mode[type][i]];\\r\\n                        if (val) { found.push(val); }\\r\\n                    }\\r\\n                } else if (mode.helperType && help[mode.helperType]) {\\r\\n                    found.push(help[mode.helperType]);\\r\\n                } else if (help[mode.name]) {\\r\\n                    found.push(help[mode.name]);\\r\\n                }\\r\\n                for (var i$1 = 0; i$1 < help._global.length; i$1++) {\\r\\n                    var cur = help._global[i$1];\\r\\n                    if (cur.pred(mode, this) && indexOf(found, cur.val) == -1)\\r\\n                    { found.push(cur.val); }\\r\\n                }\\r\\n                return found\\r\\n            },\\r\\n\\r\\n            getStateAfter: function(line, precise) {\\r\\n                var doc = this.doc;\\r\\n                line = clipLine(doc, line == null ? doc.first + doc.size - 1: line);\\r\\n                return getContextBefore(this, line + 1, precise).state\\r\\n            },\\r\\n\\r\\n            cursorCoords: function(start, mode) {\\r\\n                var pos, range$$1 = this.doc.sel.primary();\\r\\n                if (start == null) { pos = range$$1.head; }\\r\\n                else if (typeof start == \\\"object\\\") { pos = clipPos(this.doc, start); }\\r\\n                else { pos = start ? range$$1.from() : range$$1.to(); }\\r\\n                return cursorCoords(this, pos, mode || \\\"page\\\")\\r\\n            },\\r\\n\\r\\n            charCoords: function(pos, mode) {\\r\\n                return charCoords(this, clipPos(this.doc, pos), mode || \\\"page\\\")\\r\\n            },\\r\\n\\r\\n            coordsChar: function(coords, mode) {\\r\\n                coords = fromCoordSystem(this, coords, mode || \\\"page\\\");\\r\\n                return coordsChar(this, coords.left, coords.top)\\r\\n            },\\r\\n\\r\\n            lineAtHeight: function(height, mode) {\\r\\n                height = fromCoordSystem(this, {top: height, left: 0}, mode || \\\"page\\\").top;\\r\\n                return lineAtHeight(this.doc, height + this.display.viewOffset)\\r\\n            },\\r\\n            heightAtLine: function(line, mode, includeWidgets) {\\r\\n                var end = false, lineObj;\\r\\n                if (typeof line == \\\"number\\\") {\\r\\n                    var last = this.doc.first + this.doc.size - 1;\\r\\n                    if (line < this.doc.first) { line = this.doc.first; }\\r\\n                    else if (line > last) { line = last; end = true; }\\r\\n                    lineObj = getLine(this.doc, line);\\r\\n                } else {\\r\\n                    lineObj = line;\\r\\n                }\\r\\n                return intoCoordSystem(this, lineObj, {top: 0, left: 0}, mode || \\\"page\\\", includeWidgets || end).top +\\r\\n                    (end ? this.doc.height - heightAtLine(lineObj) : 0)\\r\\n            },\\r\\n\\r\\n            defaultTextHeight: function() { return textHeight(this.display) },\\r\\n            defaultCharWidth: function() { return charWidth(this.display) },\\r\\n\\r\\n            getViewport: function() { return {from: this.display.viewFrom, to: this.display.viewTo}},\\r\\n\\r\\n            addWidget: function(pos, node, scroll, vert, horiz) {\\r\\n                var display = this.display;\\r\\n                pos = cursorCoords(this, clipPos(this.doc, pos));\\r\\n                var top = pos.bottom, left = pos.left;\\r\\n                node.style.position = \\\"absolute\\\";\\r\\n                node.setAttribute(\\\"cm-ignore-events\\\", \\\"true\\\");\\r\\n                this.display.input.setUneditable(node);\\r\\n                display.sizer.appendChild(node);\\r\\n                if (vert == \\\"over\\\") {\\r\\n                    top = pos.top;\\r\\n                } else if (vert == \\\"above\\\" || vert == \\\"near\\\") {\\r\\n                    var vspace = Math.max(display.wrapper.clientHeight, this.doc.height),\\r\\n                        hspace = Math.max(display.sizer.clientWidth, display.lineSpace.clientWidth);\\r\\n                    // Default to positioning above (if specified and possible); otherwise default to positioning below\\r\\n                    if ((vert == 'above' || pos.bottom + node.offsetHeight > vspace) && pos.top > node.offsetHeight)\\r\\n                    { top = pos.top - node.offsetHeight; }\\r\\n                    else if (pos.bottom + node.offsetHeight <= vspace)\\r\\n                    { top = pos.bottom; }\\r\\n                    if (left + node.offsetWidth > hspace)\\r\\n                    { left = hspace - node.offsetWidth; }\\r\\n                }\\r\\n                node.style.top = top + \\\"px\\\";\\r\\n                node.style.left = node.style.right = \\\"\\\";\\r\\n                if (horiz == \\\"right\\\") {\\r\\n                    left = display.sizer.clientWidth - node.offsetWidth;\\r\\n                    node.style.right = \\\"0px\\\";\\r\\n                } else {\\r\\n                    if (horiz == \\\"left\\\") { left = 0; }\\r\\n                    else if (horiz == \\\"middle\\\") { left = (display.sizer.clientWidth - node.offsetWidth) / 2; }\\r\\n                    node.style.left = left + \\\"px\\\";\\r\\n                }\\r\\n                if (scroll)\\r\\n                { scrollIntoView(this, {left: left, top: top, right: left + node.offsetWidth, bottom: top + node.offsetHeight}); }\\r\\n            },\\r\\n\\r\\n            triggerOnKeyDown: methodOp(onKeyDown),\\r\\n            triggerOnKeyPress: methodOp(onKeyPress),\\r\\n            triggerOnKeyUp: onKeyUp,\\r\\n            triggerOnMouseDown: methodOp(onMouseDown),\\r\\n\\r\\n            execCommand: function(cmd) {\\r\\n                if (commands.hasOwnProperty(cmd))\\r\\n                { return commands[cmd].call(null, this) }\\r\\n            },\\r\\n\\r\\n            triggerElectric: methodOp(function(text) { triggerElectric(this, text); }),\\r\\n\\r\\n            findPosH: function(from, amount, unit, visually) {\\r\\n                var dir = 1;\\r\\n                if (amount < 0) { dir = -1; amount = -amount; }\\r\\n                var cur = clipPos(this.doc, from);\\r\\n                for (var i = 0; i < amount; ++i) {\\r\\n                    cur = findPosH(this.doc, cur, dir, unit, visually);\\r\\n                    if (cur.hitSide) { break }\\r\\n                }\\r\\n                return cur\\r\\n            },\\r\\n\\r\\n            moveH: methodOp(function(dir, unit) {\\r\\n                var this$1 = this;\\r\\n\\r\\n                this.extendSelectionsBy(function (range$$1) {\\r\\n                    if (this$1.display.shift || this$1.doc.extend || range$$1.empty())\\r\\n                    { return findPosH(this$1.doc, range$$1.head, dir, unit, this$1.options.rtlMoveVisually) }\\r\\n                    else\\r\\n                    { return dir < 0 ? range$$1.from() : range$$1.to() }\\r\\n                }, sel_move);\\r\\n            }),\\r\\n\\r\\n            deleteH: methodOp(function(dir, unit) {\\r\\n                var sel = this.doc.sel, doc = this.doc;\\r\\n                if (sel.somethingSelected())\\r\\n                { doc.replaceSelection(\\\"\\\", null, \\\"+delete\\\"); }\\r\\n                else\\r\\n                { deleteNearSelection(this, function (range$$1) {\\r\\n                    var other = findPosH(doc, range$$1.head, dir, unit, false);\\r\\n                    return dir < 0 ? {from: other, to: range$$1.head} : {from: range$$1.head, to: other}\\r\\n                }); }\\r\\n            }),\\r\\n\\r\\n            findPosV: function(from, amount, unit, goalColumn) {\\r\\n                var dir = 1, x = goalColumn;\\r\\n                if (amount < 0) { dir = -1; amount = -amount; }\\r\\n                var cur = clipPos(this.doc, from);\\r\\n                for (var i = 0; i < amount; ++i) {\\r\\n                    var coords = cursorCoords(this, cur, \\\"div\\\");\\r\\n                    if (x == null) { x = coords.left; }\\r\\n                    else { coords.left = x; }\\r\\n                    cur = findPosV(this, coords, dir, unit);\\r\\n                    if (cur.hitSide) { break }\\r\\n                }\\r\\n                return cur\\r\\n            },\\r\\n\\r\\n            moveV: methodOp(function(dir, unit) {\\r\\n                var this$1 = this;\\r\\n\\r\\n                var doc = this.doc, goals = [];\\r\\n                var collapse = !this.display.shift && !doc.extend && doc.sel.somethingSelected();\\r\\n                doc.extendSelectionsBy(function (range$$1) {\\r\\n                    if (collapse)\\r\\n                    { return dir < 0 ? range$$1.from() : range$$1.to() }\\r\\n                    var headPos = cursorCoords(this$1, range$$1.head, \\\"div\\\");\\r\\n                    if (range$$1.goalColumn != null) { headPos.left = range$$1.goalColumn; }\\r\\n                    goals.push(headPos.left);\\r\\n                    var pos = findPosV(this$1, headPos, dir, unit);\\r\\n                    if (unit == \\\"page\\\" && range$$1 == doc.sel.primary())\\r\\n                    { addToScrollTop(this$1, charCoords(this$1, pos, \\\"div\\\").top - headPos.top); }\\r\\n                    return pos\\r\\n                }, sel_move);\\r\\n                if (goals.length) { for (var i = 0; i < doc.sel.ranges.length; i++)\\r\\n                { doc.sel.ranges[i].goalColumn = goals[i]; } }\\r\\n            }),\\r\\n\\r\\n            // Find the word at the given position (as returned by coordsChar).\\r\\n            findWordAt: function(pos) {\\r\\n                var doc = this.doc, line = getLine(doc, pos.line).text;\\r\\n                var start = pos.ch, end = pos.ch;\\r\\n                if (line) {\\r\\n                    var helper = this.getHelper(pos, \\\"wordChars\\\");\\r\\n                    if ((pos.sticky == \\\"before\\\" || end == line.length) && start) { --start; } else { ++end; }\\r\\n                    var startChar = line.charAt(start);\\r\\n                    var check = isWordChar(startChar, helper)\\r\\n                        ? function (ch) { return isWordChar(ch, helper); }\\r\\n                        : /\\\\s/.test(startChar) ? function (ch) { return /\\\\s/.test(ch); }\\r\\n                            : function (ch) { return (!/\\\\s/.test(ch) && !isWordChar(ch)); };\\r\\n                    while (start > 0 && check(line.charAt(start - 1))) { --start; }\\r\\n                    while (end < line.length && check(line.charAt(end))) { ++end; }\\r\\n                }\\r\\n                return new Range(Pos(pos.line, start), Pos(pos.line, end))\\r\\n            },\\r\\n\\r\\n            toggleOverwrite: function(value) {\\r\\n                if (value != null && value == this.state.overwrite) { return }\\r\\n                if (this.state.overwrite = !this.state.overwrite)\\r\\n                { addClass(this.display.cursorDiv, \\\"CodeMirror-overwrite\\\"); }\\r\\n                else\\r\\n                { rmClass(this.display.cursorDiv, \\\"CodeMirror-overwrite\\\"); }\\r\\n\\r\\n                signal(this, \\\"overwriteToggle\\\", this, this.state.overwrite);\\r\\n            },\\r\\n            hasFocus: function() { return this.display.input.getField() == activeElt() },\\r\\n            isReadOnly: function() { return !!(this.options.readOnly || this.doc.cantEdit) },\\r\\n\\r\\n            scrollTo: methodOp(function (x, y) { scrollToCoords(this, x, y); }),\\r\\n            getScrollInfo: function() {\\r\\n                var scroller = this.display.scroller;\\r\\n                return {left: scroller.scrollLeft, top: scroller.scrollTop,\\r\\n                    height: scroller.scrollHeight - scrollGap(this) - this.display.barHeight,\\r\\n                    width: scroller.scrollWidth - scrollGap(this) - this.display.barWidth,\\r\\n                    clientHeight: displayHeight(this), clientWidth: displayWidth(this)}\\r\\n            },\\r\\n\\r\\n            scrollIntoView: methodOp(function(range$$1, margin) {\\r\\n                if (range$$1 == null) {\\r\\n                    range$$1 = {from: this.doc.sel.primary().head, to: null};\\r\\n                    if (margin == null) { margin = this.options.cursorScrollMargin; }\\r\\n                } else if (typeof range$$1 == \\\"number\\\") {\\r\\n                    range$$1 = {from: Pos(range$$1, 0), to: null};\\r\\n                } else if (range$$1.from == null) {\\r\\n                    range$$1 = {from: range$$1, to: null};\\r\\n                }\\r\\n                if (!range$$1.to) { range$$1.to = range$$1.from; }\\r\\n                range$$1.margin = margin || 0;\\r\\n\\r\\n                if (range$$1.from.line != null) {\\r\\n                    scrollToRange(this, range$$1);\\r\\n                } else {\\r\\n                    scrollToCoordsRange(this, range$$1.from, range$$1.to, range$$1.margin);\\r\\n                }\\r\\n            }),\\r\\n\\r\\n            setSize: methodOp(function(width, height) {\\r\\n                var this$1 = this;\\r\\n\\r\\n                var interpret = function (val) { return typeof val == \\\"number\\\" || /^\\\\d+$/.test(String(val)) ? val + \\\"px\\\" : val; };\\r\\n                if (width != null) { this.display.wrapper.style.width = interpret(width); }\\r\\n                if (height != null) { this.display.wrapper.style.height = interpret(height); }\\r\\n                if (this.options.lineWrapping) { clearLineMeasurementCache(this); }\\r\\n                var lineNo$$1 = this.display.viewFrom;\\r\\n                this.doc.iter(lineNo$$1, this.display.viewTo, function (line) {\\r\\n                    if (line.widgets) { for (var i = 0; i < line.widgets.length; i++)\\r\\n                    { if (line.widgets[i].noHScroll) { regLineChange(this$1, lineNo$$1, \\\"widget\\\"); break } } }\\r\\n                    ++lineNo$$1;\\r\\n                });\\r\\n                this.curOp.forceUpdate = true;\\r\\n                signal(this, \\\"refresh\\\", this);\\r\\n            }),\\r\\n\\r\\n            operation: function(f){return runInOp(this, f)},\\r\\n            startOperation: function(){return startOperation(this)},\\r\\n            endOperation: function(){return endOperation(this)},\\r\\n\\r\\n            refresh: methodOp(function() {\\r\\n                var oldHeight = this.display.cachedTextHeight;\\r\\n                regChange(this);\\r\\n                this.curOp.forceUpdate = true;\\r\\n                clearCaches(this);\\r\\n                scrollToCoords(this, this.doc.scrollLeft, this.doc.scrollTop);\\r\\n                updateGutterSpace(this);\\r\\n                if (oldHeight == null || Math.abs(oldHeight - textHeight(this.display)) > .5)\\r\\n                { estimateLineHeights(this); }\\r\\n                signal(this, \\\"refresh\\\", this);\\r\\n            }),\\r\\n\\r\\n            swapDoc: methodOp(function(doc) {\\r\\n                var old = this.doc;\\r\\n                old.cm = null;\\r\\n                attachDoc(this, doc);\\r\\n                clearCaches(this);\\r\\n                this.display.input.reset();\\r\\n                scrollToCoords(this, doc.scrollLeft, doc.scrollTop);\\r\\n                this.curOp.forceScroll = true;\\r\\n                signalLater(this, \\\"swapDoc\\\", this, old);\\r\\n                return old\\r\\n            }),\\r\\n\\r\\n            phrase: function(phraseText) {\\r\\n                var phrases = this.options.phrases;\\r\\n                return phrases && Object.prototype.hasOwnProperty.call(phrases, phraseText) ? phrases[phraseText] : phraseText\\r\\n            },\\r\\n\\r\\n            getInputField: function(){return this.display.input.getField()},\\r\\n            getWrapperElement: function(){return this.display.wrapper},\\r\\n            getScrollerElement: function(){return this.display.scroller},\\r\\n            getGutterElement: function(){return this.display.gutters}\\r\\n        };\\r\\n        eventMixin(CodeMirror);\\r\\n\\r\\n        CodeMirror.registerHelper = function(type, name, value) {\\r\\n            if (!helpers.hasOwnProperty(type)) { helpers[type] = CodeMirror[type] = {_global: []}; }\\r\\n            helpers[type][name] = value;\\r\\n        };\\r\\n        CodeMirror.registerGlobalHelper = function(type, name, predicate, value) {\\r\\n            CodeMirror.registerHelper(type, name, value);\\r\\n            helpers[type]._global.push({pred: predicate, val: value});\\r\\n        };\\r\\n    }\\r\\n\\r\\n    // Used for horizontal relative motion. Dir is -1 or 1 (left or\\r\\n    // right), unit can be \\\"char\\\", \\\"column\\\" (like char, but doesn't\\r\\n    // cross line boundaries), \\\"word\\\" (across next word), or \\\"group\\\" (to\\r\\n    // the start of next group of word or non-word-non-whitespace\\r\\n    // chars). The visually param controls whether, in right-to-left\\r\\n    // text, direction 1 means to move towards the next index in the\\r\\n    // string, or towards the character to the right of the current\\r\\n    // position. The resulting position will have a hitSide=true\\r\\n    // property if it reached the end of the document.\\r\\n    function findPosH(doc, pos, dir, unit, visually) {\\r\\n        var oldPos = pos;\\r\\n        var origDir = dir;\\r\\n        var lineObj = getLine(doc, pos.line);\\r\\n        function findNextLine() {\\r\\n            var l = pos.line + dir;\\r\\n            if (l < doc.first || l >= doc.first + doc.size) { return false }\\r\\n            pos = new Pos(l, pos.ch, pos.sticky);\\r\\n            return lineObj = getLine(doc, l)\\r\\n        }\\r\\n        function moveOnce(boundToLine) {\\r\\n            var next;\\r\\n            if (visually) {\\r\\n                next = moveVisually(doc.cm, lineObj, pos, dir);\\r\\n            } else {\\r\\n                next = moveLogically(lineObj, pos, dir);\\r\\n            }\\r\\n            if (next == null) {\\r\\n                if (!boundToLine && findNextLine())\\r\\n                { pos = endOfLine(visually, doc.cm, lineObj, pos.line, dir); }\\r\\n                else\\r\\n                { return false }\\r\\n            } else {\\r\\n                pos = next;\\r\\n            }\\r\\n            return true\\r\\n        }\\r\\n\\r\\n        if (unit == \\\"char\\\") {\\r\\n            moveOnce();\\r\\n        } else if (unit == \\\"column\\\") {\\r\\n            moveOnce(true);\\r\\n        } else if (unit == \\\"word\\\" || unit == \\\"group\\\") {\\r\\n            var sawType = null, group = unit == \\\"group\\\";\\r\\n            var helper = doc.cm && doc.cm.getHelper(pos, \\\"wordChars\\\");\\r\\n            for (var first = true;; first = false) {\\r\\n                if (dir < 0 && !moveOnce(!first)) { break }\\r\\n                var cur = lineObj.text.charAt(pos.ch) || \\\"\\\\n\\\";\\r\\n                var type = isWordChar(cur, helper) ? \\\"w\\\"\\r\\n                    : group && cur == \\\"\\\\n\\\" ? \\\"n\\\"\\r\\n                        : !group || /\\\\s/.test(cur) ? null\\r\\n                            : \\\"p\\\";\\r\\n                if (group && !first && !type) { type = \\\"s\\\"; }\\r\\n                if (sawType && sawType != type) {\\r\\n                    if (dir < 0) {dir = 1; moveOnce(); pos.sticky = \\\"after\\\";}\\r\\n                    break\\r\\n                }\\r\\n\\r\\n                if (type) { sawType = type; }\\r\\n                if (dir > 0 && !moveOnce(!first)) { break }\\r\\n            }\\r\\n        }\\r\\n        var result = skipAtomic(doc, pos, oldPos, origDir, true);\\r\\n        if (equalCursorPos(oldPos, result)) { result.hitSide = true; }\\r\\n        return result\\r\\n    }\\r\\n\\r\\n    // For relative vertical movement. Dir may be -1 or 1. Unit can be\\r\\n    // \\\"page\\\" or \\\"line\\\". The resulting position will have a hitSide=true\\r\\n    // property if it reached the end of the document.\\r\\n    function findPosV(cm, pos, dir, unit) {\\r\\n        var doc = cm.doc, x = pos.left, y;\\r\\n        if (unit == \\\"page\\\") {\\r\\n            var pageSize = Math.min(cm.display.wrapper.clientHeight, window.innerHeight || document.documentElement.clientHeight);\\r\\n            var moveAmount = Math.max(pageSize - .5 * textHeight(cm.display), 3);\\r\\n            y = (dir > 0 ? pos.bottom : pos.top) + dir * moveAmount;\\r\\n\\r\\n        } else if (unit == \\\"line\\\") {\\r\\n            y = dir > 0 ? pos.bottom + 3 : pos.top - 3;\\r\\n        }\\r\\n        var target;\\r\\n        for (;;) {\\r\\n            target = coordsChar(cm, x, y);\\r\\n            if (!target.outside) { break }\\r\\n            if (dir < 0 ? y <= 0 : y >= doc.height) { target.hitSide = true; break }\\r\\n            y += dir * 5;\\r\\n        }\\r\\n        return target\\r\\n    }\\r\\n\\r\\n    // CONTENTEDITABLE INPUT STYLE\\r\\n\\r\\n    var ContentEditableInput = function(cm) {\\r\\n        this.cm = cm;\\r\\n        this.lastAnchorNode = this.lastAnchorOffset = this.lastFocusNode = this.lastFocusOffset = null;\\r\\n        this.polling = new Delayed();\\r\\n        this.composing = null;\\r\\n        this.gracePeriod = false;\\r\\n        this.readDOMTimeout = null;\\r\\n    };\\r\\n\\r\\n    ContentEditableInput.prototype.init = function (display) {\\r\\n        var this$1 = this;\\r\\n\\r\\n        var input = this, cm = input.cm;\\r\\n        var div = input.div = display.lineDiv;\\r\\n        disableBrowserMagic(div, cm.options.spellcheck);\\r\\n\\r\\n        on(div, \\\"paste\\\", function (e) {\\r\\n            if (signalDOMEvent(cm, e) || handlePaste(e, cm)) { return }\\r\\n            // IE doesn't fire input events, so we schedule a read for the pasted content in this way\\r\\n            if (ie_version <= 11) { setTimeout(operation(cm, function () { return this$1.updateFromDOM(); }), 20); }\\r\\n        });\\r\\n\\r\\n        on(div, \\\"compositionstart\\\", function (e) {\\r\\n            this$1.composing = {data: e.data, done: false};\\r\\n        });\\r\\n        on(div, \\\"compositionupdate\\\", function (e) {\\r\\n            if (!this$1.composing) { this$1.composing = {data: e.data, done: false}; }\\r\\n        });\\r\\n        on(div, \\\"compositionend\\\", function (e) {\\r\\n            if (this$1.composing) {\\r\\n                if (e.data != this$1.composing.data) { this$1.readFromDOMSoon(); }\\r\\n                this$1.composing.done = true;\\r\\n            }\\r\\n        });\\r\\n\\r\\n        on(div, \\\"touchstart\\\", function () { return input.forceCompositionEnd(); });\\r\\n\\r\\n        on(div, \\\"input\\\", function () {\\r\\n            if (!this$1.composing) { this$1.readFromDOMSoon(); }\\r\\n        });\\r\\n\\r\\n        function onCopyCut(e) {\\r\\n            if (signalDOMEvent(cm, e)) { return }\\r\\n            if (cm.somethingSelected()) {\\r\\n                setLastCopied({lineWise: false, text: cm.getSelections()});\\r\\n                if (e.type == \\\"cut\\\") { cm.replaceSelection(\\\"\\\", null, \\\"cut\\\"); }\\r\\n            } else if (!cm.options.lineWiseCopyCut) {\\r\\n                return\\r\\n            } else {\\r\\n                var ranges = copyableRanges(cm);\\r\\n                setLastCopied({lineWise: true, text: ranges.text});\\r\\n                if (e.type == \\\"cut\\\") {\\r\\n                    cm.operation(function () {\\r\\n                        cm.setSelections(ranges.ranges, 0, sel_dontScroll);\\r\\n                        cm.replaceSelection(\\\"\\\", null, \\\"cut\\\");\\r\\n                    });\\r\\n                }\\r\\n            }\\r\\n            if (e.clipboardData) {\\r\\n                e.clipboardData.clearData();\\r\\n                var content = lastCopied.text.join(\\\"\\\\n\\\");\\r\\n                // iOS exposes the clipboard API, but seems to discard content inserted into it\\r\\n                e.clipboardData.setData(\\\"Text\\\", content);\\r\\n                if (e.clipboardData.getData(\\\"Text\\\") == content) {\\r\\n                    e.preventDefault();\\r\\n                    return\\r\\n                }\\r\\n            }\\r\\n            // Old-fashioned briefly-focus-a-textarea hack\\r\\n            var kludge = hiddenTextarea(), te = kludge.firstChild;\\r\\n            cm.display.lineSpace.insertBefore(kludge, cm.display.lineSpace.firstChild);\\r\\n            te.value = lastCopied.text.join(\\\"\\\\n\\\");\\r\\n            var hadFocus = document.activeElement;\\r\\n            selectInput(te);\\r\\n            setTimeout(function () {\\r\\n                cm.display.lineSpace.removeChild(kludge);\\r\\n                hadFocus.focus();\\r\\n                if (hadFocus == div) { input.showPrimarySelection(); }\\r\\n            }, 50);\\r\\n        }\\r\\n        on(div, \\\"copy\\\", onCopyCut);\\r\\n        on(div, \\\"cut\\\", onCopyCut);\\r\\n    };\\r\\n\\r\\n    ContentEditableInput.prototype.prepareSelection = function () {\\r\\n        var result = prepareSelection(this.cm, false);\\r\\n        result.focus = this.cm.state.focused;\\r\\n        return result\\r\\n    };\\r\\n\\r\\n    ContentEditableInput.prototype.showSelection = function (info, takeFocus) {\\r\\n        if (!info || !this.cm.display.view.length) { return }\\r\\n        if (info.focus || takeFocus) { this.showPrimarySelection(); }\\r\\n        this.showMultipleSelections(info);\\r\\n    };\\r\\n\\r\\n    ContentEditableInput.prototype.getSelection = function () {\\r\\n        return this.cm.display.wrapper.ownerDocument.getSelection()\\r\\n    };\\r\\n\\r\\n    ContentEditableInput.prototype.showPrimarySelection = function () {\\r\\n        var sel = this.getSelection(), cm = this.cm, prim = cm.doc.sel.primary();\\r\\n        var from = prim.from(), to = prim.to();\\r\\n\\r\\n        if (cm.display.viewTo == cm.display.viewFrom || from.line >= cm.display.viewTo || to.line < cm.display.viewFrom) {\\r\\n            sel.removeAllRanges();\\r\\n            return\\r\\n        }\\r\\n\\r\\n        var curAnchor = domToPos(cm, sel.anchorNode, sel.anchorOffset);\\r\\n        var curFocus = domToPos(cm, sel.focusNode, sel.focusOffset);\\r\\n        if (curAnchor && !curAnchor.bad && curFocus && !curFocus.bad &&\\r\\n            cmp(minPos(curAnchor, curFocus), from) == 0 &&\\r\\n            cmp(maxPos(curAnchor, curFocus), to) == 0)\\r\\n        { return }\\r\\n\\r\\n        var view = cm.display.view;\\r\\n        var start = (from.line >= cm.display.viewFrom && posToDOM(cm, from)) ||\\r\\n            {node: view[0].measure.map[2], offset: 0};\\r\\n        var end = to.line < cm.display.viewTo && posToDOM(cm, to);\\r\\n        if (!end) {\\r\\n            var measure = view[view.length - 1].measure;\\r\\n            var map$$1 = measure.maps ? measure.maps[measure.maps.length - 1] : measure.map;\\r\\n            end = {node: map$$1[map$$1.length - 1], offset: map$$1[map$$1.length - 2] - map$$1[map$$1.length - 3]};\\r\\n        }\\r\\n\\r\\n        if (!start || !end) {\\r\\n            sel.removeAllRanges();\\r\\n            return\\r\\n        }\\r\\n\\r\\n        var old = sel.rangeCount && sel.getRangeAt(0), rng;\\r\\n        try { rng = range(start.node, start.offset, end.offset, end.node); }\\r\\n        catch(e) {} // Our model of the DOM might be outdated, in which case the range we try to set can be impossible\\r\\n        if (rng) {\\r\\n            if (!gecko && cm.state.focused) {\\r\\n                sel.collapse(start.node, start.offset);\\r\\n                if (!rng.collapsed) {\\r\\n                    sel.removeAllRanges();\\r\\n                    sel.addRange(rng);\\r\\n                }\\r\\n            } else {\\r\\n                sel.removeAllRanges();\\r\\n                sel.addRange(rng);\\r\\n            }\\r\\n            if (old && sel.anchorNode == null) { sel.addRange(old); }\\r\\n            else if (gecko) { this.startGracePeriod(); }\\r\\n        }\\r\\n        this.rememberSelection();\\r\\n    };\\r\\n\\r\\n    ContentEditableInput.prototype.startGracePeriod = function () {\\r\\n        var this$1 = this;\\r\\n\\r\\n        clearTimeout(this.gracePeriod);\\r\\n        this.gracePeriod = setTimeout(function () {\\r\\n            this$1.gracePeriod = false;\\r\\n            if (this$1.selectionChanged())\\r\\n            { this$1.cm.operation(function () { return this$1.cm.curOp.selectionChanged = true; }); }\\r\\n        }, 20);\\r\\n    };\\r\\n\\r\\n    ContentEditableInput.prototype.showMultipleSelections = function (info) {\\r\\n        removeChildrenAndAdd(this.cm.display.cursorDiv, info.cursors);\\r\\n        removeChildrenAndAdd(this.cm.display.selectionDiv, info.selection);\\r\\n    };\\r\\n\\r\\n    ContentEditableInput.prototype.rememberSelection = function () {\\r\\n        var sel = this.getSelection();\\r\\n        this.lastAnchorNode = sel.anchorNode; this.lastAnchorOffset = sel.anchorOffset;\\r\\n        this.lastFocusNode = sel.focusNode; this.lastFocusOffset = sel.focusOffset;\\r\\n    };\\r\\n\\r\\n    ContentEditableInput.prototype.selectionInEditor = function () {\\r\\n        var sel = this.getSelection();\\r\\n        if (!sel.rangeCount) { return false }\\r\\n        var node = sel.getRangeAt(0).commonAncestorContainer;\\r\\n        return contains(this.div, node)\\r\\n    };\\r\\n\\r\\n    ContentEditableInput.prototype.focus = function () {\\r\\n        if (this.cm.options.readOnly != \\\"nocursor\\\") {\\r\\n            if (!this.selectionInEditor())\\r\\n            { this.showSelection(this.prepareSelection(), true); }\\r\\n            this.div.focus();\\r\\n        }\\r\\n    };\\r\\n    ContentEditableInput.prototype.blur = function () { this.div.blur(); };\\r\\n    ContentEditableInput.prototype.getField = function () { return this.div };\\r\\n\\r\\n    ContentEditableInput.prototype.supportsTouch = function () { return true };\\r\\n\\r\\n    ContentEditableInput.prototype.receivedFocus = function () {\\r\\n        var input = this;\\r\\n        if (this.selectionInEditor())\\r\\n        { this.pollSelection(); }\\r\\n        else\\r\\n        { runInOp(this.cm, function () { return input.cm.curOp.selectionChanged = true; }); }\\r\\n\\r\\n        function poll() {\\r\\n            if (input.cm.state.focused) {\\r\\n                input.pollSelection();\\r\\n                input.polling.set(input.cm.options.pollInterval, poll);\\r\\n            }\\r\\n        }\\r\\n        this.polling.set(this.cm.options.pollInterval, poll);\\r\\n    };\\r\\n\\r\\n    ContentEditableInput.prototype.selectionChanged = function () {\\r\\n        var sel = this.getSelection();\\r\\n        return sel.anchorNode != this.lastAnchorNode || sel.anchorOffset != this.lastAnchorOffset ||\\r\\n            sel.focusNode != this.lastFocusNode || sel.focusOffset != this.lastFocusOffset\\r\\n    };\\r\\n\\r\\n    ContentEditableInput.prototype.pollSelection = function () {\\r\\n        if (this.readDOMTimeout != null || this.gracePeriod || !this.selectionChanged()) { return }\\r\\n        var sel = this.getSelection(), cm = this.cm;\\r\\n        // On Android Chrome (version 56, at least), backspacing into an\\r\\n        // uneditable block element will put the cursor in that element,\\r\\n        // and then, because it's not editable, hide the virtual keyboard.\\r\\n        // Because Android doesn't allow us to actually detect backspace\\r\\n        // presses in a sane way, this code checks for when that happens\\r\\n        // and simulates a backspace press in this case.\\r\\n        if (android && chrome && this.cm.options.gutters.length && isInGutter(sel.anchorNode)) {\\r\\n            this.cm.triggerOnKeyDown({type: \\\"keydown\\\", keyCode: 8, preventDefault: Math.abs});\\r\\n            this.blur();\\r\\n            this.focus();\\r\\n            return\\r\\n        }\\r\\n        if (this.composing) { return }\\r\\n        this.rememberSelection();\\r\\n        var anchor = domToPos(cm, sel.anchorNode, sel.anchorOffset);\\r\\n        var head = domToPos(cm, sel.focusNode, sel.focusOffset);\\r\\n        if (anchor && head) { runInOp(cm, function () {\\r\\n            setSelection(cm.doc, simpleSelection(anchor, head), sel_dontScroll);\\r\\n            if (anchor.bad || head.bad) { cm.curOp.selectionChanged = true; }\\r\\n        }); }\\r\\n    };\\r\\n\\r\\n    ContentEditableInput.prototype.pollContent = function () {\\r\\n        if (this.readDOMTimeout != null) {\\r\\n            clearTimeout(this.readDOMTimeout);\\r\\n            this.readDOMTimeout = null;\\r\\n        }\\r\\n\\r\\n        var cm = this.cm, display = cm.display, sel = cm.doc.sel.primary();\\r\\n        var from = sel.from(), to = sel.to();\\r\\n        if (from.ch == 0 && from.line > cm.firstLine())\\r\\n        { from = Pos(from.line - 1, getLine(cm.doc, from.line - 1).length); }\\r\\n        if (to.ch == getLine(cm.doc, to.line).text.length && to.line < cm.lastLine())\\r\\n        { to = Pos(to.line + 1, 0); }\\r\\n        if (from.line < display.viewFrom || to.line > display.viewTo - 1) { return false }\\r\\n\\r\\n        var fromIndex, fromLine, fromNode;\\r\\n        if (from.line == display.viewFrom || (fromIndex = findViewIndex(cm, from.line)) == 0) {\\r\\n            fromLine = lineNo(display.view[0].line);\\r\\n            fromNode = display.view[0].node;\\r\\n        } else {\\r\\n            fromLine = lineNo(display.view[fromIndex].line);\\r\\n            fromNode = display.view[fromIndex - 1].node.nextSibling;\\r\\n        }\\r\\n        var toIndex = findViewIndex(cm, to.line);\\r\\n        var toLine, toNode;\\r\\n        if (toIndex == display.view.length - 1) {\\r\\n            toLine = display.viewTo - 1;\\r\\n            toNode = display.lineDiv.lastChild;\\r\\n        } else {\\r\\n            toLine = lineNo(display.view[toIndex + 1].line) - 1;\\r\\n            toNode = display.view[toIndex + 1].node.previousSibling;\\r\\n        }\\r\\n\\r\\n        if (!fromNode) { return false }\\r\\n        var newText = cm.doc.splitLines(domTextBetween(cm, fromNode, toNode, fromLine, toLine));\\r\\n        var oldText = getBetween(cm.doc, Pos(fromLine, 0), Pos(toLine, getLine(cm.doc, toLine).text.length));\\r\\n        while (newText.length > 1 && oldText.length > 1) {\\r\\n            if (lst(newText) == lst(oldText)) { newText.pop(); oldText.pop(); toLine--; }\\r\\n            else if (newText[0] == oldText[0]) { newText.shift(); oldText.shift(); fromLine++; }\\r\\n            else { break }\\r\\n        }\\r\\n\\r\\n        var cutFront = 0, cutEnd = 0;\\r\\n        var newTop = newText[0], oldTop = oldText[0], maxCutFront = Math.min(newTop.length, oldTop.length);\\r\\n        while (cutFront < maxCutFront && newTop.charCodeAt(cutFront) == oldTop.charCodeAt(cutFront))\\r\\n        { ++cutFront; }\\r\\n        var newBot = lst(newText), oldBot = lst(oldText);\\r\\n        var maxCutEnd = Math.min(newBot.length - (newText.length == 1 ? cutFront : 0),\\r\\n            oldBot.length - (oldText.length == 1 ? cutFront : 0));\\r\\n        while (cutEnd < maxCutEnd &&\\r\\n        newBot.charCodeAt(newBot.length - cutEnd - 1) == oldBot.charCodeAt(oldBot.length - cutEnd - 1))\\r\\n        { ++cutEnd; }\\r\\n        // Try to move start of change to start of selection if ambiguous\\r\\n        if (newText.length == 1 && oldText.length == 1 && fromLine == from.line) {\\r\\n            while (cutFront && cutFront > from.ch &&\\r\\n            newBot.charCodeAt(newBot.length - cutEnd - 1) == oldBot.charCodeAt(oldBot.length - cutEnd - 1)) {\\r\\n                cutFront--;\\r\\n                cutEnd++;\\r\\n            }\\r\\n        }\\r\\n\\r\\n        newText[newText.length - 1] = newBot.slice(0, newBot.length - cutEnd).replace(/^\\\\u200b+/, \\\"\\\");\\r\\n        newText[0] = newText[0].slice(cutFront).replace(/\\\\u200b+$/, \\\"\\\");\\r\\n\\r\\n        var chFrom = Pos(fromLine, cutFront);\\r\\n        var chTo = Pos(toLine, oldText.length ? lst(oldText).length - cutEnd : 0);\\r\\n        if (newText.length > 1 || newText[0] || cmp(chFrom, chTo)) {\\r\\n            replaceRange(cm.doc, newText, chFrom, chTo, \\\"+input\\\");\\r\\n            return true\\r\\n        }\\r\\n    };\\r\\n\\r\\n    ContentEditableInput.prototype.ensurePolled = function () {\\r\\n        this.forceCompositionEnd();\\r\\n    };\\r\\n    ContentEditableInput.prototype.reset = function () {\\r\\n        this.forceCompositionEnd();\\r\\n    };\\r\\n    ContentEditableInput.prototype.forceCompositionEnd = function () {\\r\\n        if (!this.composing) { return }\\r\\n        clearTimeout(this.readDOMTimeout);\\r\\n        this.composing = null;\\r\\n        this.updateFromDOM();\\r\\n        this.div.blur();\\r\\n        this.div.focus();\\r\\n    };\\r\\n    ContentEditableInput.prototype.readFromDOMSoon = function () {\\r\\n        var this$1 = this;\\r\\n\\r\\n        if (this.readDOMTimeout != null) { return }\\r\\n        this.readDOMTimeout = setTimeout(function () {\\r\\n            this$1.readDOMTimeout = null;\\r\\n            if (this$1.composing) {\\r\\n                if (this$1.composing.done) { this$1.composing = null; }\\r\\n                else { return }\\r\\n            }\\r\\n            this$1.updateFromDOM();\\r\\n        }, 80);\\r\\n    };\\r\\n\\r\\n    ContentEditableInput.prototype.updateFromDOM = function () {\\r\\n        var this$1 = this;\\r\\n\\r\\n        if (this.cm.isReadOnly() || !this.pollContent())\\r\\n        { runInOp(this.cm, function () { return regChange(this$1.cm); }); }\\r\\n    };\\r\\n\\r\\n    ContentEditableInput.prototype.setUneditable = function (node) {\\r\\n        node.contentEditable = \\\"false\\\";\\r\\n    };\\r\\n\\r\\n    ContentEditableInput.prototype.onKeyPress = function (e) {\\r\\n        if (e.charCode == 0 || this.composing) { return }\\r\\n        e.preventDefault();\\r\\n        if (!this.cm.isReadOnly())\\r\\n        { operation(this.cm, applyTextInput)(this.cm, String.fromCharCode(e.charCode == null ? e.keyCode : e.charCode), 0); }\\r\\n    };\\r\\n\\r\\n    ContentEditableInput.prototype.readOnlyChanged = function (val) {\\r\\n        this.div.contentEditable = String(val != \\\"nocursor\\\");\\r\\n    };\\r\\n\\r\\n    ContentEditableInput.prototype.onContextMenu = function () {};\\r\\n    ContentEditableInput.prototype.resetPosition = function () {};\\r\\n\\r\\n    ContentEditableInput.prototype.needsContentAttribute = true;\\r\\n\\r\\n    function posToDOM(cm, pos) {\\r\\n        var view = findViewForLine(cm, pos.line);\\r\\n        if (!view || view.hidden) { return null }\\r\\n        var line = getLine(cm.doc, pos.line);\\r\\n        var info = mapFromLineView(view, line, pos.line);\\r\\n\\r\\n        var order = getOrder(line, cm.doc.direction), side = \\\"left\\\";\\r\\n        if (order) {\\r\\n            var partPos = getBidiPartAt(order, pos.ch);\\r\\n            side = partPos % 2 ? \\\"right\\\" : \\\"left\\\";\\r\\n        }\\r\\n        var result = nodeAndOffsetInLineMap(info.map, pos.ch, side);\\r\\n        result.offset = result.collapse == \\\"right\\\" ? result.end : result.start;\\r\\n        return result\\r\\n    }\\r\\n\\r\\n    function isInGutter(node) {\\r\\n        for (var scan = node; scan; scan = scan.parentNode)\\r\\n        { if (/CodeMirror-gutter-wrapper/.test(scan.className)) { return true } }\\r\\n        return false\\r\\n    }\\r\\n\\r\\n    function badPos(pos, bad) { if (bad) { pos.bad = true; } return pos }\\r\\n\\r\\n    function domTextBetween(cm, from, to, fromLine, toLine) {\\r\\n        var text = \\\"\\\", closing = false, lineSep = cm.doc.lineSeparator(), extraLinebreak = false;\\r\\n        function recognizeMarker(id) { return function (marker) { return marker.id == id; } }\\r\\n        function close() {\\r\\n            if (closing) {\\r\\n                text += lineSep;\\r\\n                if (extraLinebreak) { text += lineSep; }\\r\\n                closing = extraLinebreak = false;\\r\\n            }\\r\\n        }\\r\\n        function addText(str) {\\r\\n            if (str) {\\r\\n                close();\\r\\n                text += str;\\r\\n            }\\r\\n        }\\r\\n        function walk(node) {\\r\\n            if (node.nodeType == 1) {\\r\\n                var cmText = node.getAttribute(\\\"cm-text\\\");\\r\\n                if (cmText) {\\r\\n                    addText(cmText);\\r\\n                    return\\r\\n                }\\r\\n                var markerID = node.getAttribute(\\\"cm-marker\\\"), range$$1;\\r\\n                if (markerID) {\\r\\n                    var found = cm.findMarks(Pos(fromLine, 0), Pos(toLine + 1, 0), recognizeMarker(+markerID));\\r\\n                    if (found.length && (range$$1 = found[0].find(0)))\\r\\n                    { addText(getBetween(cm.doc, range$$1.from, range$$1.to).join(lineSep)); }\\r\\n                    return\\r\\n                }\\r\\n                if (node.getAttribute(\\\"contenteditable\\\") == \\\"false\\\") { return }\\r\\n                var isBlock = /^(pre|div|p|li|table|br)$/i.test(node.nodeName);\\r\\n                if (!/^br$/i.test(node.nodeName) && node.textContent.length == 0) { return }\\r\\n\\r\\n                if (isBlock) { close(); }\\r\\n                for (var i = 0; i < node.childNodes.length; i++)\\r\\n                { walk(node.childNodes[i]); }\\r\\n\\r\\n                if (/^(pre|p)$/i.test(node.nodeName)) { extraLinebreak = true; }\\r\\n                if (isBlock) { closing = true; }\\r\\n            } else if (node.nodeType == 3) {\\r\\n                addText(node.nodeValue.replace(/\\\\u200b/g, \\\"\\\").replace(/\\\\u00a0/g, \\\" \\\"));\\r\\n            }\\r\\n        }\\r\\n        for (;;) {\\r\\n            walk(from);\\r\\n            if (from == to) { break }\\r\\n            from = from.nextSibling;\\r\\n            extraLinebreak = false;\\r\\n        }\\r\\n        return text\\r\\n    }\\r\\n\\r\\n    function domToPos(cm, node, offset) {\\r\\n        var lineNode;\\r\\n        if (node == cm.display.lineDiv) {\\r\\n            lineNode = cm.display.lineDiv.childNodes[offset];\\r\\n            if (!lineNode) { return badPos(cm.clipPos(Pos(cm.display.viewTo - 1)), true) }\\r\\n            node = null; offset = 0;\\r\\n        } else {\\r\\n            for (lineNode = node;; lineNode = lineNode.parentNode) {\\r\\n                if (!lineNode || lineNode == cm.display.lineDiv) { return null }\\r\\n                if (lineNode.parentNode && lineNode.parentNode == cm.display.lineDiv) { break }\\r\\n            }\\r\\n        }\\r\\n        for (var i = 0; i < cm.display.view.length; i++) {\\r\\n            var lineView = cm.display.view[i];\\r\\n            if (lineView.node == lineNode)\\r\\n            { return locateNodeInLineView(lineView, node, offset) }\\r\\n        }\\r\\n    }\\r\\n\\r\\n    function locateNodeInLineView(lineView, node, offset) {\\r\\n        var wrapper = lineView.text.firstChild, bad = false;\\r\\n        if (!node || !contains(wrapper, node)) { return badPos(Pos(lineNo(lineView.line), 0), true) }\\r\\n        if (node == wrapper) {\\r\\n            bad = true;\\r\\n            node = wrapper.childNodes[offset];\\r\\n            offset = 0;\\r\\n            if (!node) {\\r\\n                var line = lineView.rest ? lst(lineView.rest) : lineView.line;\\r\\n                return badPos(Pos(lineNo(line), line.text.length), bad)\\r\\n            }\\r\\n        }\\r\\n\\r\\n        var textNode = node.nodeType == 3 ? node : null, topNode = node;\\r\\n        if (!textNode && node.childNodes.length == 1 && node.firstChild.nodeType == 3) {\\r\\n            textNode = node.firstChild;\\r\\n            if (offset) { offset = textNode.nodeValue.length; }\\r\\n        }\\r\\n        while (topNode.parentNode != wrapper) { topNode = topNode.parentNode; }\\r\\n        var measure = lineView.measure, maps = measure.maps;\\r\\n\\r\\n        function find(textNode, topNode, offset) {\\r\\n            for (var i = -1; i < (maps ? maps.length : 0); i++) {\\r\\n                var map$$1 = i < 0 ? measure.map : maps[i];\\r\\n                for (var j = 0; j < map$$1.length; j += 3) {\\r\\n                    var curNode = map$$1[j + 2];\\r\\n                    if (curNode == textNode || curNode == topNode) {\\r\\n                        var line = lineNo(i < 0 ? lineView.line : lineView.rest[i]);\\r\\n                        var ch = map$$1[j] + offset;\\r\\n                        if (offset < 0 || curNode != textNode) { ch = map$$1[j + (offset ? 1 : 0)]; }\\r\\n                        return Pos(line, ch)\\r\\n                    }\\r\\n                }\\r\\n            }\\r\\n        }\\r\\n        var found = find(textNode, topNode, offset);\\r\\n        if (found) { return badPos(found, bad) }\\r\\n\\r\\n        // FIXME this is all really shaky. might handle the few cases it needs to handle, but likely to cause problems\\r\\n        for (var after = topNode.nextSibling, dist = textNode ? textNode.nodeValue.length - offset : 0; after; after = after.nextSibling) {\\r\\n            found = find(after, after.firstChild, 0);\\r\\n            if (found)\\r\\n            { return badPos(Pos(found.line, found.ch - dist), bad) }\\r\\n            else\\r\\n            { dist += after.textContent.length; }\\r\\n        }\\r\\n        for (var before = topNode.previousSibling, dist$1 = offset; before; before = before.previousSibling) {\\r\\n            found = find(before, before.firstChild, -1);\\r\\n            if (found)\\r\\n            { return badPos(Pos(found.line, found.ch + dist$1), bad) }\\r\\n            else\\r\\n            { dist$1 += before.textContent.length; }\\r\\n        }\\r\\n    }\\r\\n\\r\\n    // TEXTAREA INPUT STYLE\\r\\n\\r\\n    var TextareaInput = function(cm) {\\r\\n        this.cm = cm;\\r\\n        // See input.poll and input.reset\\r\\n        this.prevInput = \\\"\\\";\\r\\n\\r\\n        // Flag that indicates whether we expect input to appear real soon\\r\\n        // now (after some event like 'keypress' or 'input') and are\\r\\n        // polling intensively.\\r\\n        this.pollingFast = false;\\r\\n        // Self-resetting timeout for the poller\\r\\n        this.polling = new Delayed();\\r\\n        // Used to work around IE issue with selection being forgotten when focus moves away from textarea\\r\\n        this.hasSelection = false;\\r\\n        this.composing = null;\\r\\n    };\\r\\n\\r\\n    TextareaInput.prototype.init = function (display) {\\r\\n        var this$1 = this;\\r\\n\\r\\n        var input = this, cm = this.cm;\\r\\n        this.createField(display);\\r\\n        var te = this.textarea;\\r\\n\\r\\n        display.wrapper.insertBefore(this.wrapper, display.wrapper.firstChild);\\r\\n\\r\\n        // Needed to hide big blue blinking cursor on Mobile Safari (doesn't seem to work in iOS 8 anymore)\\r\\n        if (ios) { te.style.width = \\\"0px\\\"; }\\r\\n\\r\\n        on(te, \\\"input\\\", function () {\\r\\n            if (ie && ie_version >= 9 && this$1.hasSelection) { this$1.hasSelection = null; }\\r\\n            input.poll();\\r\\n        });\\r\\n\\r\\n        on(te, \\\"paste\\\", function (e) {\\r\\n            if (signalDOMEvent(cm, e) || handlePaste(e, cm)) { return }\\r\\n\\r\\n            cm.state.pasteIncoming = true;\\r\\n            input.fastPoll();\\r\\n        });\\r\\n\\r\\n        function prepareCopyCut(e) {\\r\\n            if (signalDOMEvent(cm, e)) { return }\\r\\n            if (cm.somethingSelected()) {\\r\\n                setLastCopied({lineWise: false, text: cm.getSelections()});\\r\\n            } else if (!cm.options.lineWiseCopyCut) {\\r\\n                return\\r\\n            } else {\\r\\n                var ranges = copyableRanges(cm);\\r\\n                setLastCopied({lineWise: true, text: ranges.text});\\r\\n                if (e.type == \\\"cut\\\") {\\r\\n                    cm.setSelections(ranges.ranges, null, sel_dontScroll);\\r\\n                } else {\\r\\n                    input.prevInput = \\\"\\\";\\r\\n                    te.value = ranges.text.join(\\\"\\\\n\\\");\\r\\n                    selectInput(te);\\r\\n                }\\r\\n            }\\r\\n            if (e.type == \\\"cut\\\") { cm.state.cutIncoming = true; }\\r\\n        }\\r\\n        on(te, \\\"cut\\\", prepareCopyCut);\\r\\n        on(te, \\\"copy\\\", prepareCopyCut);\\r\\n\\r\\n        on(display.scroller, \\\"paste\\\", function (e) {\\r\\n            if (eventInWidget(display, e) || signalDOMEvent(cm, e)) { return }\\r\\n            cm.state.pasteIncoming = true;\\r\\n            input.focus();\\r\\n        });\\r\\n\\r\\n        // Prevent normal selection in the editor (we handle our own)\\r\\n        on(display.lineSpace, \\\"selectstart\\\", function (e) {\\r\\n            if (!eventInWidget(display, e)) { e_preventDefault(e); }\\r\\n        });\\r\\n\\r\\n        on(te, \\\"compositionstart\\\", function () {\\r\\n            var start = cm.getCursor(\\\"from\\\");\\r\\n            if (input.composing) { input.composing.range.clear(); }\\r\\n            input.composing = {\\r\\n                start: start,\\r\\n                range: cm.markText(start, cm.getCursor(\\\"to\\\"), {className: \\\"CodeMirror-composing\\\"})\\r\\n            };\\r\\n        });\\r\\n        on(te, \\\"compositionend\\\", function () {\\r\\n            if (input.composing) {\\r\\n                input.poll();\\r\\n                input.composing.range.clear();\\r\\n                input.composing = null;\\r\\n            }\\r\\n        });\\r\\n    };\\r\\n\\r\\n    TextareaInput.prototype.createField = function (_display) {\\r\\n        // Wraps and hides input textarea\\r\\n        this.wrapper = hiddenTextarea();\\r\\n        // The semihidden textarea that is focused when the editor is\\r\\n        // focused, and receives input.\\r\\n        this.textarea = this.wrapper.firstChild;\\r\\n    };\\r\\n\\r\\n    TextareaInput.prototype.prepareSelection = function () {\\r\\n        // Redraw the selection and/or cursor\\r\\n        var cm = this.cm, display = cm.display, doc = cm.doc;\\r\\n        var result = prepareSelection(cm);\\r\\n\\r\\n        // Move the hidden textarea near the cursor to prevent scrolling artifacts\\r\\n        if (cm.options.moveInputWithCursor) {\\r\\n            var headPos = cursorCoords(cm, doc.sel.primary().head, \\\"div\\\");\\r\\n            var wrapOff = display.wrapper.getBoundingClientRect(), lineOff = display.lineDiv.getBoundingClientRect();\\r\\n            result.teTop = Math.max(0, Math.min(display.wrapper.clientHeight - 10,\\r\\n                headPos.top + lineOff.top - wrapOff.top));\\r\\n            result.teLeft = Math.max(0, Math.min(display.wrapper.clientWidth - 10,\\r\\n                headPos.left + lineOff.left - wrapOff.left));\\r\\n        }\\r\\n\\r\\n        return result\\r\\n    };\\r\\n\\r\\n    TextareaInput.prototype.showSelection = function (drawn) {\\r\\n        var cm = this.cm, display = cm.display;\\r\\n        removeChildrenAndAdd(display.cursorDiv, drawn.cursors);\\r\\n        removeChildrenAndAdd(display.selectionDiv, drawn.selection);\\r\\n        if (drawn.teTop != null) {\\r\\n            this.wrapper.style.top = drawn.teTop + \\\"px\\\";\\r\\n            this.wrapper.style.left = drawn.teLeft + \\\"px\\\";\\r\\n        }\\r\\n    };\\r\\n\\r\\n    // Reset the input to correspond to the selection (or to be empty,\\r\\n    // when not typing and nothing is selected)\\r\\n    TextareaInput.prototype.reset = function (typing) {\\r\\n        if (this.contextMenuPending || this.composing) { return }\\r\\n        var cm = this.cm;\\r\\n        if (cm.somethingSelected()) {\\r\\n            this.prevInput = \\\"\\\";\\r\\n            var content = cm.getSelection();\\r\\n            this.textarea.value = content;\\r\\n            if (cm.state.focused) { selectInput(this.textarea); }\\r\\n            if (ie && ie_version >= 9) { this.hasSelection = content; }\\r\\n        } else if (!typing) {\\r\\n            this.prevInput = this.textarea.value = \\\"\\\";\\r\\n            if (ie && ie_version >= 9) { this.hasSelection = null; }\\r\\n        }\\r\\n    };\\r\\n\\r\\n    TextareaInput.prototype.getField = function () { return this.textarea };\\r\\n\\r\\n    TextareaInput.prototype.supportsTouch = function () { return false };\\r\\n\\r\\n    TextareaInput.prototype.focus = function () {\\r\\n        if (this.cm.options.readOnly != \\\"nocursor\\\" && (!mobile || activeElt() != this.textarea)) {\\r\\n            try { this.textarea.focus(); }\\r\\n            catch (e) {} // IE8 will throw if the textarea is display: none or not in DOM\\r\\n        }\\r\\n    };\\r\\n\\r\\n    TextareaInput.prototype.blur = function () { this.textarea.blur(); };\\r\\n\\r\\n    TextareaInput.prototype.resetPosition = function () {\\r\\n        this.wrapper.style.top = this.wrapper.style.left = 0;\\r\\n    };\\r\\n\\r\\n    TextareaInput.prototype.receivedFocus = function () { this.slowPoll(); };\\r\\n\\r\\n    // Poll for input changes, using the normal rate of polling. This\\r\\n    // runs as long as the editor is focused.\\r\\n    TextareaInput.prototype.slowPoll = function () {\\r\\n        var this$1 = this;\\r\\n\\r\\n        if (this.pollingFast) { return }\\r\\n        this.polling.set(this.cm.options.pollInterval, function () {\\r\\n            this$1.poll();\\r\\n            if (this$1.cm.state.focused) { this$1.slowPoll(); }\\r\\n        });\\r\\n    };\\r\\n\\r\\n    // When an event has just come in that is likely to add or change\\r\\n    // something in the input textarea, we poll faster, to ensure that\\r\\n    // the change appears on the screen quickly.\\r\\n    TextareaInput.prototype.fastPoll = function () {\\r\\n        var missed = false, input = this;\\r\\n        input.pollingFast = true;\\r\\n        function p() {\\r\\n            var changed = input.poll();\\r\\n            if (!changed && !missed) {missed = true; input.polling.set(60, p);}\\r\\n            else {input.pollingFast = false; input.slowPoll();}\\r\\n        }\\r\\n        input.polling.set(20, p);\\r\\n    };\\r\\n\\r\\n    // Read input from the textarea, and update the document to match.\\r\\n    // When something is selected, it is present in the textarea, and\\r\\n    // selected (unless it is huge, in which case a placeholder is\\r\\n    // used). When nothing is selected, the cursor sits after previously\\r\\n    // seen text (can be empty), which is stored in prevInput (we must\\r\\n    // not reset the textarea when typing, because that breaks IME).\\r\\n    TextareaInput.prototype.poll = function () {\\r\\n        var this$1 = this;\\r\\n\\r\\n        var cm = this.cm, input = this.textarea, prevInput = this.prevInput;\\r\\n        // Since this is called a *lot*, try to bail out as cheaply as\\r\\n        // possible when it is clear that nothing happened. hasSelection\\r\\n        // will be the case when there is a lot of text in the textarea,\\r\\n        // in which case reading its value would be expensive.\\r\\n        if (this.contextMenuPending || !cm.state.focused ||\\r\\n            (hasSelection(input) && !prevInput && !this.composing) ||\\r\\n            cm.isReadOnly() || cm.options.disableInput || cm.state.keySeq)\\r\\n        { return false }\\r\\n\\r\\n        var text = input.value;\\r\\n        // If nothing changed, bail.\\r\\n        if (text == prevInput && !cm.somethingSelected()) { return false }\\r\\n        // Work around nonsensical selection resetting in IE9/10, and\\r\\n        // inexplicable appearance of private area unicode characters on\\r\\n        // some key combos in Mac (#2689).\\r\\n        if (ie && ie_version >= 9 && this.hasSelection === text ||\\r\\n            mac && /[\\\\uf700-\\\\uf7ff]/.test(text)) {\\r\\n            cm.display.input.reset();\\r\\n            return false\\r\\n        }\\r\\n\\r\\n        if (cm.doc.sel == cm.display.selForContextMenu) {\\r\\n            var first = text.charCodeAt(0);\\r\\n            if (first == 0x200b && !prevInput) { prevInput = \\\"\\\\u200b\\\"; }\\r\\n            if (first == 0x21da) { this.reset(); return this.cm.execCommand(\\\"undo\\\") }\\r\\n        }\\r\\n        // Find the part of the input that is actually new\\r\\n        var same = 0, l = Math.min(prevInput.length, text.length);\\r\\n        while (same < l && prevInput.charCodeAt(same) == text.charCodeAt(same)) { ++same; }\\r\\n\\r\\n        runInOp(cm, function () {\\r\\n            applyTextInput(cm, text.slice(same), prevInput.length - same,\\r\\n                null, this$1.composing ? \\\"*compose\\\" : null);\\r\\n\\r\\n            // Don't leave long text in the textarea, since it makes further polling slow\\r\\n            if (text.length > 1000 || text.indexOf(\\\"\\\\n\\\") > -1) { input.value = this$1.prevInput = \\\"\\\"; }\\r\\n            else { this$1.prevInput = text; }\\r\\n\\r\\n            if (this$1.composing) {\\r\\n                this$1.composing.range.clear();\\r\\n                this$1.composing.range = cm.markText(this$1.composing.start, cm.getCursor(\\\"to\\\"),\\r\\n                    {className: \\\"CodeMirror-composing\\\"});\\r\\n            }\\r\\n        });\\r\\n        return true\\r\\n    };\\r\\n\\r\\n    TextareaInput.prototype.ensurePolled = function () {\\r\\n        if (this.pollingFast && this.poll()) { this.pollingFast = false; }\\r\\n    };\\r\\n\\r\\n    TextareaInput.prototype.onKeyPress = function () {\\r\\n        if (ie && ie_version >= 9) { this.hasSelection = null; }\\r\\n        this.fastPoll();\\r\\n    };\\r\\n\\r\\n    TextareaInput.prototype.onContextMenu = function (e) {\\r\\n        var input = this, cm = input.cm, display = cm.display, te = input.textarea;\\r\\n        if (input.contextMenuPending) { input.contextMenuPending(); }\\r\\n        var pos = posFromMouse(cm, e), scrollPos = display.scroller.scrollTop;\\r\\n        if (!pos || presto) { return } // Opera is difficult.\\r\\n\\r\\n        // Reset the current text selection only if the click is done outside of the selection\\r\\n        // and 'resetSelectionOnContextMenu' option is true.\\r\\n        var reset = cm.options.resetSelectionOnContextMenu;\\r\\n        if (reset && cm.doc.sel.contains(pos) == -1)\\r\\n        { operation(cm, setSelection)(cm.doc, simpleSelection(pos), sel_dontScroll); }\\r\\n\\r\\n        var oldCSS = te.style.cssText, oldWrapperCSS = input.wrapper.style.cssText;\\r\\n        var wrapperBox = input.wrapper.offsetParent.getBoundingClientRect();\\r\\n        input.wrapper.style.cssText = \\\"position: static\\\";\\r\\n        te.style.cssText = \\\"position: absolute; width: 30px; height: 30px;\\\\n      top: \\\" + (e.clientY - wrapperBox.top - 5) + \\\"px; left: \\\" + (e.clientX - wrapperBox.left - 5) + \\\"px;\\\\n      z-index: 1000; background: \\\" + (ie ? \\\"rgba(255, 255, 255, .05)\\\" : \\\"transparent\\\") + \\\";\\\\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);\\\";\\r\\n        var oldScrollY;\\r\\n        if (webkit) { oldScrollY = window.scrollY; } // Work around Chrome issue (#2712)\\r\\n        display.input.focus();\\r\\n        if (webkit) { window.scrollTo(null, oldScrollY); }\\r\\n        display.input.reset();\\r\\n        // Adds \\\"Select all\\\" to context menu in FF\\r\\n        if (!cm.somethingSelected()) { te.value = input.prevInput = \\\" \\\"; }\\r\\n        input.contextMenuPending = rehide;\\r\\n        display.selForContextMenu = cm.doc.sel;\\r\\n        clearTimeout(display.detectingSelectAll);\\r\\n\\r\\n        // Select-all will be greyed out if there's nothing to select, so\\r\\n        // this adds a zero-width space so that we can later check whether\\r\\n        // it got selected.\\r\\n        function prepareSelectAllHack() {\\r\\n            if (te.selectionStart != null) {\\r\\n                var selected = cm.somethingSelected();\\r\\n                var extval = \\\"\\\\u200b\\\" + (selected ? te.value : \\\"\\\");\\r\\n                te.value = \\\"\\\\u21da\\\"; // Used to catch context-menu undo\\r\\n                te.value = extval;\\r\\n                input.prevInput = selected ? \\\"\\\" : \\\"\\\\u200b\\\";\\r\\n                te.selectionStart = 1; te.selectionEnd = extval.length;\\r\\n                // Re-set this, in case some other handler touched the\\r\\n                // selection in the meantime.\\r\\n                display.selForContextMenu = cm.doc.sel;\\r\\n            }\\r\\n        }\\r\\n        function rehide() {\\r\\n            if (input.contextMenuPending != rehide) { return }\\r\\n            input.contextMenuPending = false;\\r\\n            input.wrapper.style.cssText = oldWrapperCSS;\\r\\n            te.style.cssText = oldCSS;\\r\\n            if (ie && ie_version < 9) { display.scrollbars.setScrollTop(display.scroller.scrollTop = scrollPos); }\\r\\n\\r\\n            // Try to detect the user choosing select-all\\r\\n            if (te.selectionStart != null) {\\r\\n                if (!ie || (ie && ie_version < 9)) { prepareSelectAllHack(); }\\r\\n                var i = 0, poll = function () {\\r\\n                    if (display.selForContextMenu == cm.doc.sel && te.selectionStart == 0 &&\\r\\n                        te.selectionEnd > 0 && input.prevInput == \\\"\\\\u200b\\\") {\\r\\n                        operation(cm, selectAll)(cm);\\r\\n                    } else if (i++ < 10) {\\r\\n                        display.detectingSelectAll = setTimeout(poll, 500);\\r\\n                    } else {\\r\\n                        display.selForContextMenu = null;\\r\\n                        display.input.reset();\\r\\n                    }\\r\\n                };\\r\\n                display.detectingSelectAll = setTimeout(poll, 200);\\r\\n            }\\r\\n        }\\r\\n\\r\\n        if (ie && ie_version >= 9) { prepareSelectAllHack(); }\\r\\n        if (captureRightClick) {\\r\\n            e_stop(e);\\r\\n            var mouseup = function () {\\r\\n                off(window, \\\"mouseup\\\", mouseup);\\r\\n                setTimeout(rehide, 20);\\r\\n            };\\r\\n            on(window, \\\"mouseup\\\", mouseup);\\r\\n        } else {\\r\\n            setTimeout(rehide, 50);\\r\\n        }\\r\\n    };\\r\\n\\r\\n    TextareaInput.prototype.readOnlyChanged = function (val) {\\r\\n        if (!val) { this.reset(); }\\r\\n        this.textarea.disabled = val == \\\"nocursor\\\";\\r\\n    };\\r\\n\\r\\n    TextareaInput.prototype.setUneditable = function () {};\\r\\n\\r\\n    TextareaInput.prototype.needsContentAttribute = false;\\r\\n\\r\\n    function fromTextArea(textarea, options) {\\r\\n        options = options ? copyObj(options) : {};\\r\\n        options.value = textarea.value;\\r\\n        if (!options.tabindex && textarea.tabIndex)\\r\\n        { options.tabindex = textarea.tabIndex; }\\r\\n        if (!options.placeholder && textarea.placeholder)\\r\\n        { options.placeholder = textarea.placeholder; }\\r\\n        // Set autofocus to true if this textarea is focused, or if it has\\r\\n        // autofocus and no other element is focused.\\r\\n        if (options.autofocus == null) {\\r\\n            var hasFocus = activeElt();\\r\\n            options.autofocus = hasFocus == textarea ||\\r\\n                textarea.getAttribute(\\\"autofocus\\\") != null && hasFocus == document.body;\\r\\n        }\\r\\n\\r\\n        function save() {textarea.value = cm.getValue();}\\r\\n\\r\\n        var realSubmit;\\r\\n        if (textarea.form) {\\r\\n            on(textarea.form, \\\"submit\\\", save);\\r\\n            // Deplorable hack to make the submit method do the right thing.\\r\\n            if (!options.leaveSubmitMethodAlone) {\\r\\n                var form = textarea.form;\\r\\n                realSubmit = form.submit;\\r\\n                try {\\r\\n                    var wrappedSubmit = form.submit = function () {\\r\\n                        save();\\r\\n                        form.submit = realSubmit;\\r\\n                        form.submit();\\r\\n                        form.submit = wrappedSubmit;\\r\\n                    };\\r\\n                } catch(e) {}\\r\\n            }\\r\\n        }\\r\\n\\r\\n        options.finishInit = function (cm) {\\r\\n            cm.save = save;\\r\\n            cm.getTextArea = function () { return textarea; };\\r\\n            cm.toTextArea = function () {\\r\\n                cm.toTextArea = isNaN; // Prevent this from being ran twice\\r\\n                save();\\r\\n                textarea.parentNode.removeChild(cm.getWrapperElement());\\r\\n                textarea.style.display = \\\"\\\";\\r\\n                if (textarea.form) {\\r\\n                    off(textarea.form, \\\"submit\\\", save);\\r\\n                    if (typeof textarea.form.submit == \\\"function\\\")\\r\\n                    { textarea.form.submit = realSubmit; }\\r\\n                }\\r\\n            };\\r\\n        };\\r\\n\\r\\n        textarea.style.display = \\\"none\\\";\\r\\n        var cm = CodeMirror(function (node) { return textarea.parentNode.insertBefore(node, textarea.nextSibling); },\\r\\n            options);\\r\\n        return cm\\r\\n    }\\r\\n\\r\\n    function addLegacyProps(CodeMirror) {\\r\\n        CodeMirror.off = off;\\r\\n        CodeMirror.on = on;\\r\\n        CodeMirror.wheelEventPixels = wheelEventPixels;\\r\\n        CodeMirror.Doc = Doc;\\r\\n        CodeMirror.splitLines = splitLinesAuto;\\r\\n        CodeMirror.countColumn = countColumn;\\r\\n        CodeMirror.findColumn = findColumn;\\r\\n        CodeMirror.isWordChar = isWordCharBasic;\\r\\n        CodeMirror.Pass = Pass;\\r\\n        CodeMirror.signal = signal;\\r\\n        CodeMirror.Line = Line;\\r\\n        CodeMirror.changeEnd = changeEnd;\\r\\n        CodeMirror.scrollbarModel = scrollbarModel;\\r\\n        CodeMirror.Pos = Pos;\\r\\n        CodeMirror.cmpPos = cmp;\\r\\n        CodeMirror.modes = modes;\\r\\n        CodeMirror.mimeModes = mimeModes;\\r\\n        CodeMirror.resolveMode = resolveMode;\\r\\n        CodeMirror.getMode = getMode;\\r\\n        CodeMirror.modeExtensions = modeExtensions;\\r\\n        CodeMirror.extendMode = extendMode;\\r\\n        CodeMirror.copyState = copyState;\\r\\n        CodeMirror.startState = startState;\\r\\n        CodeMirror.innerMode = innerMode;\\r\\n        CodeMirror.commands = commands;\\r\\n        CodeMirror.keyMap = keyMap;\\r\\n        CodeMirror.keyName = keyName;\\r\\n        CodeMirror.isModifierKey = isModifierKey;\\r\\n        CodeMirror.lookupKey = lookupKey;\\r\\n        CodeMirror.normalizeKeyMap = normalizeKeyMap;\\r\\n        CodeMirror.StringStream = StringStream;\\r\\n        CodeMirror.SharedTextMarker = SharedTextMarker;\\r\\n        CodeMirror.TextMarker = TextMarker;\\r\\n        CodeMirror.LineWidget = LineWidget;\\r\\n        CodeMirror.e_preventDefault = e_preventDefault;\\r\\n        CodeMirror.e_stopPropagation = e_stopPropagation;\\r\\n        CodeMirror.e_stop = e_stop;\\r\\n        CodeMirror.addClass = addClass;\\r\\n        CodeMirror.contains = contains;\\r\\n        CodeMirror.rmClass = rmClass;\\r\\n        CodeMirror.keyNames = keyNames;\\r\\n    }\\r\\n\\r\\n    // EDITOR CONSTRUCTOR\\r\\n\\r\\n    defineOptions(CodeMirror);\\r\\n\\r\\n    addEditorMethods(CodeMirror);\\r\\n\\r\\n    // Set up methods on CodeMirror's prototype to redirect to the editor's document.\\r\\n    var dontDelegate = \\\"iter insert remove copy getEditor constructor\\\".split(\\\" \\\");\\r\\n    for (var prop in Doc.prototype) { if (Doc.prototype.hasOwnProperty(prop) && indexOf(dontDelegate, prop) < 0)\\r\\n    { CodeMirror.prototype[prop] = (function(method) {\\r\\n        return function() {return method.apply(this.doc, arguments)}\\r\\n    })(Doc.prototype[prop]); } }\\r\\n\\r\\n    eventMixin(Doc);\\r\\n    CodeMirror.inputStyles = {\\\"textarea\\\": TextareaInput, \\\"contenteditable\\\": ContentEditableInput};\\r\\n\\r\\n    // Extra arguments are stored as the mode's dependencies, which is\\r\\n    // used by (legacy) mechanisms like loadmode.js to automatically\\r\\n    // load a mode. (Preferred mechanism is the require/define calls.)\\r\\n    CodeMirror.defineMode = function(name/*, mode, …*/) {\\r\\n        if (!CodeMirror.defaults.mode && name != \\\"null\\\") { CodeMirror.defaults.mode = name; }\\r\\n        defineMode.apply(this, arguments);\\r\\n    };\\r\\n\\r\\n    CodeMirror.defineMIME = defineMIME;\\r\\n\\r\\n    // Minimal default mode.\\r\\n    CodeMirror.defineMode(\\\"null\\\", function () { return ({token: function (stream) { return stream.skipToEnd(); }}); });\\r\\n    CodeMirror.defineMIME(\\\"text/plain\\\", \\\"null\\\");\\r\\n\\r\\n    // EXTENSIONS\\r\\n\\r\\n    CodeMirror.defineExtension = function (name, func) {\\r\\n        CodeMirror.prototype[name] = func;\\r\\n    };\\r\\n    CodeMirror.defineDocExtension = function (name, func) {\\r\\n        Doc.prototype[name] = func;\\r\\n    };\\r\\n\\r\\n    CodeMirror.fromTextArea = fromTextArea;\\r\\n\\r\\n    addLegacyProps(CodeMirror);\\r\\n\\r\\n    CodeMirror.version = \\\"5.42.2\\\";\\r\\n\\r\\n    return CodeMirror;\\r\\n\\r\\n})));\"","var overArg = require('./_overArg');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\nmodule.exports = nativeKeys;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView');\n\nmodule.exports = DataView;\n","var isFunction = require('./isFunction'),\n    isMasked = require('./_isMasked'),\n    isObject = require('./isObject'),\n    toSource = require('./_toSource');\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\nmodule.exports = baseIsNative;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","var coreJsData = require('./_coreJsData');\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nmodule.exports = isMasked;\n","var root = require('./_root');\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\nmodule.exports = coreJsData;\n","/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nmodule.exports = getValue;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Promise = getNative(root, 'Promise');\n\nmodule.exports = Promise;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar WeakMap = getNative(root, 'WeakMap');\n\nmodule.exports = WeakMap;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\nmodule.exports = baseIsArguments;\n","/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = stubFalse;\n","var baseGetTag = require('./_baseGetTag'),\n    isLength = require('./isLength'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\nmodule.exports = baseIsTypedArray;\n","var baseIsMatch = require('./_baseIsMatch'),\n    getMatchData = require('./_getMatchData'),\n    matchesStrictComparable = require('./_matchesStrictComparable');\n\n/**\n * The base implementation of `_.matches` which doesn't clone `source`.\n *\n * @private\n * @param {Object} source The object of property values to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatches(source) {\n  var matchData = getMatchData(source);\n  if (matchData.length == 1 && matchData[0][2]) {\n    return matchesStrictComparable(matchData[0][0], matchData[0][1]);\n  }\n  return function(object) {\n    return object === source || baseIsMatch(object, source, matchData);\n  };\n}\n\nmodule.exports = baseMatches;\n","var Stack = require('./_Stack'),\n    baseIsEqual = require('./_baseIsEqual');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * The base implementation of `_.isMatch` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to inspect.\n * @param {Object} source The object of property values to match.\n * @param {Array} matchData The property names, values, and compare flags to match.\n * @param {Function} [customizer] The function to customize comparisons.\n * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n */\nfunction baseIsMatch(object, source, matchData, customizer) {\n  var index = matchData.length,\n      length = index,\n      noCustomizer = !customizer;\n\n  if (object == null) {\n    return !length;\n  }\n  object = Object(object);\n  while (index--) {\n    var data = matchData[index];\n    if ((noCustomizer && data[2])\n          ? data[1] !== object[data[0]]\n          : !(data[0] in object)\n        ) {\n      return false;\n    }\n  }\n  while (++index < length) {\n    data = matchData[index];\n    var key = data[0],\n        objValue = object[key],\n        srcValue = data[1];\n\n    if (noCustomizer && data[2]) {\n      if (objValue === undefined && !(key in object)) {\n        return false;\n      }\n    } else {\n      var stack = new Stack;\n      if (customizer) {\n        var result = customizer(objValue, srcValue, key, object, source, stack);\n      }\n      if (!(result === undefined\n            ? baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG, customizer, stack)\n            : result\n          )) {\n        return false;\n      }\n    }\n  }\n  return true;\n}\n\nmodule.exports = baseIsMatch;\n","/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\nmodule.exports = listCacheClear;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\nmodule.exports = listCacheDelete;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\nmodule.exports = listCacheGet;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\nmodule.exports = listCacheHas;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\nmodule.exports = listCacheSet;\n","var ListCache = require('./_ListCache');\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\nmodule.exports = stackClear;\n","/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\nmodule.exports = stackDelete;\n","/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\nmodule.exports = stackGet;\n","/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\nmodule.exports = stackHas;\n","var ListCache = require('./_ListCache'),\n    Map = require('./_Map'),\n    MapCache = require('./_MapCache');\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\nmodule.exports = stackSet;\n","var Hash = require('./_Hash'),\n    ListCache = require('./_ListCache'),\n    Map = require('./_Map');\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\nmodule.exports = mapCacheClear;\n","var hashClear = require('./_hashClear'),\n    hashDelete = require('./_hashDelete'),\n    hashGet = require('./_hashGet'),\n    hashHas = require('./_hashHas'),\n    hashSet = require('./_hashSet');\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\nmodule.exports = Hash;\n","var nativeCreate = require('./_nativeCreate');\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\nmodule.exports = hashClear;\n","/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = hashDelete;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\nmodule.exports = hashGet;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\nmodule.exports = hashHas;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\nmodule.exports = hashSet;\n","var getMapData = require('./_getMapData');\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = mapCacheDelete;\n","/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\nmodule.exports = isKeyable;\n","var getMapData = require('./_getMapData');\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\nmodule.exports = mapCacheGet;\n","var getMapData = require('./_getMapData');\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\nmodule.exports = mapCacheHas;\n","var getMapData = require('./_getMapData');\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\nmodule.exports = mapCacheSet;\n","var Stack = require('./_Stack'),\n    equalArrays = require('./_equalArrays'),\n    equalByTag = require('./_equalByTag'),\n    equalObjects = require('./_equalObjects'),\n    getTag = require('./_getTag'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isTypedArray = require('./isTypedArray');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = objIsArr ? arrayTag : getTag(object),\n      othTag = othIsArr ? arrayTag : getTag(other);\n\n  objTag = objTag == argsTag ? objectTag : objTag;\n  othTag = othTag == argsTag ? objectTag : othTag;\n\n  var objIsObj = objTag == objectTag,\n      othIsObj = othTag == objectTag,\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && isBuffer(object)) {\n    if (!isBuffer(other)) {\n      return false;\n    }\n    objIsArr = true;\n    objIsObj = false;\n  }\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n      : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n  }\n  if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n}\n\nmodule.exports = baseIsEqualDeep;\n","/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\nmodule.exports = setCacheAdd;\n","/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\nmodule.exports = setCacheHas;\n","var Symbol = require('./_Symbol'),\n    Uint8Array = require('./_Uint8Array'),\n    eq = require('./eq'),\n    equalArrays = require('./_equalArrays'),\n    mapToArray = require('./_mapToArray'),\n    setToArray = require('./_setToArray');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]';\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n  switch (tag) {\n    case dataViewTag:\n      if ((object.byteLength != other.byteLength) ||\n          (object.byteOffset != other.byteOffset)) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n    case numberTag:\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\n      // Invalid dates are coerced to `NaN`.\n      return eq(+object, +other);\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings, primitives and objects,\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n      // for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= COMPARE_UNORDERED_FLAG;\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n      stack['delete'](object);\n      return result;\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\nmodule.exports = equalByTag;\n","/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\nmodule.exports = mapToArray;\n","var getAllKeys = require('./_getAllKeys');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      objProps = getAllKeys(object),\n      objLength = objProps.length,\n      othProps = getAllKeys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  // Check that cyclic values are equal.\n  var objStacked = stack.get(object);\n  var othStacked = stack.get(other);\n  if (objStacked && othStacked) {\n    return objStacked == other && othStacked == object;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\nmodule.exports = equalObjects;\n","/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nmodule.exports = baseTimes;\n","var isStrictComparable = require('./_isStrictComparable'),\n    keys = require('./keys');\n\n/**\n * Gets the property names, values, and compare flags of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the match data of `object`.\n */\nfunction getMatchData(object) {\n  var result = keys(object),\n      length = result.length;\n\n  while (length--) {\n    var key = result[length],\n        value = object[key];\n\n    result[length] = [key, value, isStrictComparable(value)];\n  }\n  return result;\n}\n\nmodule.exports = getMatchData;\n","var baseIsEqual = require('./_baseIsEqual'),\n    get = require('./get'),\n    hasIn = require('./hasIn'),\n    isKey = require('./_isKey'),\n    isStrictComparable = require('./_isStrictComparable'),\n    matchesStrictComparable = require('./_matchesStrictComparable'),\n    toKey = require('./_toKey');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * The base implementation of `_.matchesProperty` which doesn't clone `srcValue`.\n *\n * @private\n * @param {string} path The path of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatchesProperty(path, srcValue) {\n  if (isKey(path) && isStrictComparable(srcValue)) {\n    return matchesStrictComparable(toKey(path), srcValue);\n  }\n  return function(object) {\n    var objValue = get(object, path);\n    return (objValue === undefined && objValue === srcValue)\n      ? hasIn(object, path)\n      : baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG);\n  };\n}\n\nmodule.exports = baseMatchesProperty;\n","var memoizeCapped = require('./_memoizeCapped');\n\n/** Used to match property names within property paths. */\nvar rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\nvar stringToPath = memoizeCapped(function(string) {\n  var result = [];\n  if (string.charCodeAt(0) === 46 /* . */) {\n    result.push('');\n  }\n  string.replace(rePropName, function(match, number, quote, subString) {\n    result.push(quote ? subString.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n});\n\nmodule.exports = stringToPath;\n","var memoize = require('./memoize');\n\n/** Used as the maximum memoize cache size. */\nvar MAX_MEMOIZE_SIZE = 500;\n\n/**\n * A specialized version of `_.memoize` which clears the memoized function's\n * cache when it exceeds `MAX_MEMOIZE_SIZE`.\n *\n * @private\n * @param {Function} func The function to have its output memoized.\n * @returns {Function} Returns the new memoized function.\n */\nfunction memoizeCapped(func) {\n  var result = memoize(func, function(key) {\n    if (cache.size === MAX_MEMOIZE_SIZE) {\n      cache.clear();\n    }\n    return key;\n  });\n\n  var cache = result.cache;\n  return result;\n}\n\nmodule.exports = memoizeCapped;\n","var MapCache = require('./_MapCache');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `clear`, `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // => [1, 2]\n *\n * values(other);\n * // => [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // => [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // => ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || (resolver != null && typeof resolver != 'function')) {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments,\n        key = resolver ? resolver.apply(this, args) : args[0],\n        cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result) || cache;\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache);\n  return memoized;\n}\n\n// Expose `MapCache`.\nmemoize.Cache = MapCache;\n\nmodule.exports = memoize;\n","var Symbol = require('./_Symbol'),\n    arrayMap = require('./_arrayMap'),\n    isArray = require('./isArray'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isArray(value)) {\n    // Recursively convert values (susceptible to call stack limits).\n    return arrayMap(value, baseToString) + '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = baseToString;\n","var baseHasIn = require('./_baseHasIn'),\n    hasPath = require('./_hasPath');\n\n/**\n * Checks if `path` is a direct or inherited property of `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n * @example\n *\n * var object = _.create({ 'a': _.create({ 'b': 2 }) });\n *\n * _.hasIn(object, 'a');\n * // => true\n *\n * _.hasIn(object, 'a.b');\n * // => true\n *\n * _.hasIn(object, ['a', 'b']);\n * // => true\n *\n * _.hasIn(object, 'b');\n * // => false\n */\nfunction hasIn(object, path) {\n  return object != null && hasPath(object, path, baseHasIn);\n}\n\nmodule.exports = hasIn;\n","/**\n * The base implementation of `_.hasIn` without support for deep paths.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {Array|string} key The key to check.\n * @returns {boolean} Returns `true` if `key` exists, else `false`.\n */\nfunction baseHasIn(object, key) {\n  return object != null && key in Object(object);\n}\n\nmodule.exports = baseHasIn;\n","var baseProperty = require('./_baseProperty'),\n    basePropertyDeep = require('./_basePropertyDeep'),\n    isKey = require('./_isKey'),\n    toKey = require('./_toKey');\n\n/**\n * Creates a function that returns the value at `path` of a given object.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n * @example\n *\n * var objects = [\n *   { 'a': { 'b': 2 } },\n *   { 'a': { 'b': 1 } }\n * ];\n *\n * _.map(objects, _.property('a.b'));\n * // => [2, 1]\n *\n * _.map(_.sortBy(objects, _.property(['a', 'b'])), 'a.b');\n * // => [1, 2]\n */\nfunction property(path) {\n  return isKey(path) ? baseProperty(toKey(path)) : basePropertyDeep(path);\n}\n\nmodule.exports = property;\n","var baseGet = require('./_baseGet');\n\n/**\n * A specialized version of `baseProperty` which supports deep paths.\n *\n * @private\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction basePropertyDeep(path) {\n  return function(object) {\n    return baseGet(object, path);\n  };\n}\n\nmodule.exports = basePropertyDeep;\n","var baseEach = require('./_baseEach'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * The base implementation of `_.map` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction baseMap(collection, iteratee) {\n  var index = -1,\n      result = isArrayLike(collection) ? Array(collection.length) : [];\n\n  baseEach(collection, function(value, key, collection) {\n    result[++index] = iteratee(value, key, collection);\n  });\n  return result;\n}\n\nmodule.exports = baseMap;\n","var baseFor = require('./_baseFor'),\n    keys = require('./keys');\n\n/**\n * The base implementation of `_.forOwn` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Object} Returns `object`.\n */\nfunction baseForOwn(object, iteratee) {\n  return object && baseFor(object, iteratee, keys);\n}\n\nmodule.exports = baseForOwn;\n","var createBaseFor = require('./_createBaseFor');\n\n/**\n * The base implementation of `baseForOwn` which iterates over `object`\n * properties returned by `keysFunc` and invokes `iteratee` for each property.\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseFor = createBaseFor();\n\nmodule.exports = baseFor;\n","/**\n * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseFor(fromRight) {\n  return function(object, iteratee, keysFunc) {\n    var index = -1,\n        iterable = Object(object),\n        props = keysFunc(object),\n        length = props.length;\n\n    while (length--) {\n      var key = props[fromRight ? length : ++index];\n      if (iteratee(iterable[key], key, iterable) === false) {\n        break;\n      }\n    }\n    return object;\n  };\n}\n\nmodule.exports = createBaseFor;\n","var isArrayLike = require('./isArrayLike');\n\n/**\n * Creates a `baseEach` or `baseEachRight` function.\n *\n * @private\n * @param {Function} eachFunc The function to iterate over a collection.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseEach(eachFunc, fromRight) {\n  return function(collection, iteratee) {\n    if (collection == null) {\n      return collection;\n    }\n    if (!isArrayLike(collection)) {\n      return eachFunc(collection, iteratee);\n    }\n    var length = collection.length,\n        index = fromRight ? length : -1,\n        iterable = Object(collection);\n\n    while ((fromRight ? index-- : ++index < length)) {\n      if (iteratee(iterable[index], index, iterable) === false) {\n        break;\n      }\n    }\n    return collection;\n  };\n}\n\nmodule.exports = createBaseEach;\n","var identity = require('./identity');\n\n/**\n * Casts `value` to `identity` if it's not a function.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {Function} Returns cast function.\n */\nfunction castFunction(value) {\n  return typeof value == 'function' ? value : identity;\n}\n\nmodule.exports = castFunction;\n","var arrayMap = require('./_arrayMap');\n\n/**\n * The base implementation of `_.values` and `_.valuesIn` which creates an\n * array of `object` property values corresponding to the property names\n * of `props`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array} props The property names to get values for.\n * @returns {Object} Returns the array of property values.\n */\nfunction baseValues(object, props) {\n  return arrayMap(props, function(key) {\n    return object[key];\n  });\n}\n\nmodule.exports = baseValues;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.has` without support for deep paths.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {Array|string} key The key to check.\n * @returns {boolean} Returns `true` if `key` exists, else `false`.\n */\nfunction baseHas(object, key) {\n  return object != null && hasOwnProperty.call(object, key);\n}\n\nmodule.exports = baseHas;\n","var Stack = require('./_Stack'),\n    arrayEach = require('./_arrayEach'),\n    assignValue = require('./_assignValue'),\n    baseAssign = require('./_baseAssign'),\n    baseAssignIn = require('./_baseAssignIn'),\n    cloneBuffer = require('./_cloneBuffer'),\n    copyArray = require('./_copyArray'),\n    copySymbols = require('./_copySymbols'),\n    copySymbolsIn = require('./_copySymbolsIn'),\n    getAllKeys = require('./_getAllKeys'),\n    getAllKeysIn = require('./_getAllKeysIn'),\n    getTag = require('./_getTag'),\n    initCloneArray = require('./_initCloneArray'),\n    initCloneByTag = require('./_initCloneByTag'),\n    initCloneObject = require('./_initCloneObject'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isMap = require('./isMap'),\n    isObject = require('./isObject'),\n    isSet = require('./isSet'),\n    keys = require('./keys'),\n    keysIn = require('./keysIn');\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_FLAT_FLAG = 2,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\ncloneableTags[boolTag] = cloneableTags[dateTag] =\ncloneableTags[float32Tag] = cloneableTags[float64Tag] =\ncloneableTags[int8Tag] = cloneableTags[int16Tag] =\ncloneableTags[int32Tag] = cloneableTags[mapTag] =\ncloneableTags[numberTag] = cloneableTags[objectTag] =\ncloneableTags[regexpTag] = cloneableTags[setTag] =\ncloneableTags[stringTag] = cloneableTags[symbolTag] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Deep clone\n *  2 - Flatten inherited properties\n *  4 - Clone symbols\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, bitmask, customizer, key, object, stack) {\n  var result,\n      isDeep = bitmask & CLONE_DEEP_FLAG,\n      isFlat = bitmask & CLONE_FLAT_FLAG,\n      isFull = bitmask & CLONE_SYMBOLS_FLAG;\n\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      result = (isFlat || isFunc) ? {} : initCloneObject(value);\n      if (!isDeep) {\n        return isFlat\n          ? copySymbolsIn(value, baseAssignIn(result, value))\n          : copySymbols(value, baseAssign(result, value));\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  if (isSet(value)) {\n    value.forEach(function(subValue) {\n      result.add(baseClone(subValue, bitmask, customizer, subValue, value, stack));\n    });\n  } else if (isMap(value)) {\n    value.forEach(function(subValue, key) {\n      result.set(key, baseClone(subValue, bitmask, customizer, key, value, stack));\n    });\n  }\n\n  var keysFunc = isFull\n    ? (isFlat ? getAllKeysIn : getAllKeys)\n    : (isFlat ? keysIn : keys);\n\n  var props = isArr ? undefined : keysFunc(value);\n  arrayEach(props || value, function(subValue, key) {\n    if (props) {\n      key = subValue;\n      subValue = value[key];\n    }\n    // Recursively populate clone (susceptible to call stack limits).\n    assignValue(result, key, baseClone(subValue, bitmask, customizer, key, value, stack));\n  });\n  return result;\n}\n\nmodule.exports = baseClone;\n","var copyObject = require('./_copyObject'),\n    keys = require('./keys');\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\nmodule.exports = baseAssign;\n","var copyObject = require('./_copyObject'),\n    keysIn = require('./keysIn');\n\n/**\n * The base implementation of `_.assignIn` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssignIn(object, source) {\n  return object && copyObject(source, keysIn(source), object);\n}\n\nmodule.exports = baseAssignIn;\n","var isObject = require('./isObject'),\n    isPrototype = require('./_isPrototype'),\n    nativeKeysIn = require('./_nativeKeysIn');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  if (!isObject(object)) {\n    return nativeKeysIn(object);\n  }\n  var isProto = isPrototype(object),\n      result = [];\n\n  for (var key in object) {\n    if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseKeysIn;\n","/**\n * This function is like\n * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * except that it includes inherited enumerable properties.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction nativeKeysIn(object) {\n  var result = [];\n  if (object != null) {\n    for (var key in Object(object)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = nativeKeysIn;\n","var root = require('./_root');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined;\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var length = buffer.length,\n      result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);\n\n  buffer.copy(result);\n  return result;\n}\n\nmodule.exports = cloneBuffer;\n","/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\nmodule.exports = copyArray;\n","var copyObject = require('./_copyObject'),\n    getSymbols = require('./_getSymbols');\n\n/**\n * Copies own symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols(source), object);\n}\n\nmodule.exports = copySymbols;\n","var copyObject = require('./_copyObject'),\n    getSymbolsIn = require('./_getSymbolsIn');\n\n/**\n * Copies own and inherited symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbolsIn(source, object) {\n  return copyObject(source, getSymbolsIn(source), object);\n}\n\nmodule.exports = copySymbolsIn;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = new array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\nmodule.exports = initCloneArray;\n","var cloneArrayBuffer = require('./_cloneArrayBuffer'),\n    cloneDataView = require('./_cloneDataView'),\n    cloneRegExp = require('./_cloneRegExp'),\n    cloneSymbol = require('./_cloneSymbol'),\n    cloneTypedArray = require('./_cloneTypedArray');\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Map`, `Number`, `RegExp`, `Set`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case dataViewTag:\n      return cloneDataView(object, isDeep);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return new Ctor;\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return new Ctor;\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\nmodule.exports = initCloneByTag;\n","var cloneArrayBuffer = require('./_cloneArrayBuffer');\n\n/**\n * Creates a clone of `dataView`.\n *\n * @private\n * @param {Object} dataView The data view to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned data view.\n */\nfunction cloneDataView(dataView, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\n\nmodule.exports = cloneDataView;\n","/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\nmodule.exports = cloneRegExp;\n","var Symbol = require('./_Symbol');\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\nmodule.exports = cloneSymbol;\n","var cloneArrayBuffer = require('./_cloneArrayBuffer');\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\nmodule.exports = cloneTypedArray;\n","var baseCreate = require('./_baseCreate'),\n    getPrototype = require('./_getPrototype'),\n    isPrototype = require('./_isPrototype');\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\nmodule.exports = initCloneObject;\n","var isObject = require('./isObject');\n\n/** Built-in value references. */\nvar objectCreate = Object.create;\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} proto The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nvar baseCreate = (function() {\n  function object() {}\n  return function(proto) {\n    if (!isObject(proto)) {\n      return {};\n    }\n    if (objectCreate) {\n      return objectCreate(proto);\n    }\n    object.prototype = proto;\n    var result = new object;\n    object.prototype = undefined;\n    return result;\n  };\n}());\n\nmodule.exports = baseCreate;\n","var baseIsMap = require('./_baseIsMap'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsMap = nodeUtil && nodeUtil.isMap;\n\n/**\n * Checks if `value` is classified as a `Map` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n * @example\n *\n * _.isMap(new Map);\n * // => true\n *\n * _.isMap(new WeakMap);\n * // => false\n */\nvar isMap = nodeIsMap ? baseUnary(nodeIsMap) : baseIsMap;\n\nmodule.exports = isMap;\n","var getTag = require('./_getTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]';\n\n/**\n * The base implementation of `_.isMap` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n */\nfunction baseIsMap(value) {\n  return isObjectLike(value) && getTag(value) == mapTag;\n}\n\nmodule.exports = baseIsMap;\n","var baseIsSet = require('./_baseIsSet'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsSet = nodeUtil && nodeUtil.isSet;\n\n/**\n * Checks if `value` is classified as a `Set` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n * @example\n *\n * _.isSet(new Set);\n * // => true\n *\n * _.isSet(new WeakSet);\n * // => false\n */\nvar isSet = nodeIsSet ? baseUnary(nodeIsSet) : baseIsSet;\n\nmodule.exports = isSet;\n","var getTag = require('./_getTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar setTag = '[object Set]';\n\n/**\n * The base implementation of `_.isSet` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n */\nfunction baseIsSet(value) {\n  return isObjectLike(value) && getTag(value) == setTag;\n}\n\nmodule.exports = baseIsSet;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PRINT_WARNING = exports.PRINT_ERROR = void 0;\nfunction PRINT_ERROR(msg) {\n    /* istanbul ignore else - can't override global.console in node.js */\n    if (console && console.error) {\n        console.error(\"Error: \".concat(msg));\n    }\n}\nexports.PRINT_ERROR = PRINT_ERROR;\nfunction PRINT_WARNING(msg) {\n    /* istanbul ignore else - can't override global.console in node.js*/\n    if (console && console.warn) {\n        // TODO: modify docs accordingly\n        console.warn(\"Warning: \".concat(msg));\n    }\n}\nexports.PRINT_WARNING = PRINT_WARNING;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.timer = void 0;\nfunction timer(func) {\n    var start = new Date().getTime();\n    var val = func();\n    var end = new Date().getTime();\n    var total = end - start;\n    return { time: total, value: val };\n}\nexports.timer = timer;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.toFastProperties = void 0;\n// based on: https://github.com/petkaantonov/bluebird/blob/b97c0d2d487e8c5076e8bd897e0dcd4622d31846/src/util.js#L201-L216\nfunction toFastProperties(toBecomeFast) {\n    function FakeConstructor() { }\n    // If our object is used as a constructor it would receive\n    FakeConstructor.prototype = toBecomeFast;\n    var fakeInstance = new FakeConstructor();\n    function fakeAccess() {\n        return typeof fakeInstance.bar;\n    }\n    // help V8 understand this is a \"real\" prototype by actually using\n    // the fake instance.\n    fakeAccess();\n    fakeAccess();\n    // Always true condition to suppress the Firefox warning of unreachable\n    // code after a return statement.\n    if (1)\n        return toBecomeFast;\n    // Eval prevents optimization of this method (even though this is dead code)\n    /* istanbul ignore next */\n    // tslint:disable-next-line\n    eval(toBecomeFast);\n}\nexports.toFastProperties = toFastProperties;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.buildInProdFollowPrefix = exports.buildBetweenProdsFollowPrefix = exports.computeAllProdsFollows = exports.ResyncFollowsWalker = void 0;\nvar rest_1 = require(\"./rest\");\nvar first_1 = require(\"./first\");\nvar forEach_1 = __importDefault(require(\"lodash/forEach\"));\nvar assign_1 = __importDefault(require(\"lodash/assign\"));\nvar constants_1 = require(\"../constants\");\nvar gast_1 = require(\"@chevrotain/gast\");\n// This ResyncFollowsWalker computes all of the follows required for RESYNC\n// (skipping reference production).\nvar ResyncFollowsWalker = /** @class */ (function (_super) {\n    __extends(ResyncFollowsWalker, _super);\n    function ResyncFollowsWalker(topProd) {\n        var _this = _super.call(this) || this;\n        _this.topProd = topProd;\n        _this.follows = {};\n        return _this;\n    }\n    ResyncFollowsWalker.prototype.startWalking = function () {\n        this.walk(this.topProd);\n        return this.follows;\n    };\n    ResyncFollowsWalker.prototype.walkTerminal = function (terminal, currRest, prevRest) {\n        // do nothing! just like in the public sector after 13:00\n    };\n    ResyncFollowsWalker.prototype.walkProdRef = function (refProd, currRest, prevRest) {\n        var followName = buildBetweenProdsFollowPrefix(refProd.referencedRule, refProd.idx) +\n            this.topProd.name;\n        var fullRest = currRest.concat(prevRest);\n        var restProd = new gast_1.Alternative({ definition: fullRest });\n        var t_in_topProd_follows = (0, first_1.first)(restProd);\n        this.follows[followName] = t_in_topProd_follows;\n    };\n    return ResyncFollowsWalker;\n}(rest_1.RestWalker));\nexports.ResyncFollowsWalker = ResyncFollowsWalker;\nfunction computeAllProdsFollows(topProductions) {\n    var reSyncFollows = {};\n    (0, forEach_1.default)(topProductions, function (topProd) {\n        var currRefsFollow = new ResyncFollowsWalker(topProd).startWalking();\n        (0, assign_1.default)(reSyncFollows, currRefsFollow);\n    });\n    return reSyncFollows;\n}\nexports.computeAllProdsFollows = computeAllProdsFollows;\nfunction buildBetweenProdsFollowPrefix(inner, occurenceInParent) {\n    return inner.name + occurenceInParent + constants_1.IN;\n}\nexports.buildBetweenProdsFollowPrefix = buildBetweenProdsFollowPrefix;\nfunction buildInProdFollowPrefix(terminal) {\n    var terminalName = terminal.terminalType.name;\n    return terminalName + terminal.idx + constants_1.IN;\n}\nexports.buildInProdFollowPrefix = buildInProdFollowPrefix;\n","var toNumber = require('./toNumber');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_INTEGER = 1.7976931348623157e+308;\n\n/**\n * Converts `value` to a finite number.\n *\n * @static\n * @memberOf _\n * @since 4.12.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted number.\n * @example\n *\n * _.toFinite(3.2);\n * // => 3.2\n *\n * _.toFinite(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toFinite(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toFinite('3.2');\n * // => 3.2\n */\nfunction toFinite(value) {\n  if (!value) {\n    return value === 0 ? value : 0;\n  }\n  value = toNumber(value);\n  if (value === INFINITY || value === -INFINITY) {\n    var sign = (value < 0 ? -1 : 1);\n    return sign * MAX_INTEGER;\n  }\n  return value === value ? value : 0;\n}\n\nmodule.exports = toFinite;\n","var baseTrim = require('./_baseTrim'),\n    isObject = require('./isObject'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = baseTrim(value);\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = toNumber;\n","var trimmedEndIndex = require('./_trimmedEndIndex');\n\n/** Used to match leading whitespace. */\nvar reTrimStart = /^\\s+/;\n\n/**\n * The base implementation of `_.trim`.\n *\n * @private\n * @param {string} string The string to trim.\n * @returns {string} Returns the trimmed string.\n */\nfunction baseTrim(string) {\n  return string\n    ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')\n    : string;\n}\n\nmodule.exports = baseTrim;\n","/** Used to match a single whitespace character. */\nvar reWhitespace = /\\s/;\n\n/**\n * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\n * character of `string`.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {number} Returns the index of the last non-whitespace character.\n */\nfunction trimmedEndIndex(string) {\n  var index = string.length;\n\n  while (index-- && reWhitespace.test(string.charAt(index))) {}\n  return index;\n}\n\nmodule.exports = trimmedEndIndex;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar regexpTag = '[object RegExp]';\n\n/**\n * The base implementation of `_.isRegExp` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a regexp, else `false`.\n */\nfunction baseIsRegExp(value) {\n  return isObjectLike(value) && baseGetTag(value) == regexpTag;\n}\n\nmodule.exports = baseIsRegExp;\n","var baseGet = require('./_baseGet'),\n    baseSet = require('./_baseSet'),\n    castPath = require('./_castPath');\n\n/**\n * The base implementation of  `_.pickBy` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The source object.\n * @param {string[]} paths The property paths to pick.\n * @param {Function} predicate The function invoked per property.\n * @returns {Object} Returns the new object.\n */\nfunction basePickBy(object, paths, predicate) {\n  var index = -1,\n      length = paths.length,\n      result = {};\n\n  while (++index < length) {\n    var path = paths[index],\n        value = baseGet(object, path);\n\n    if (predicate(value, path)) {\n      baseSet(result, castPath(path, object), value);\n    }\n  }\n  return result;\n}\n\nmodule.exports = basePickBy;\n","var assignValue = require('./_assignValue'),\n    castPath = require('./_castPath'),\n    isIndex = require('./_isIndex'),\n    isObject = require('./isObject'),\n    toKey = require('./_toKey');\n\n/**\n * The base implementation of `_.set`.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {Array|string} path The path of the property to set.\n * @param {*} value The value to set.\n * @param {Function} [customizer] The function to customize path creation.\n * @returns {Object} Returns `object`.\n */\nfunction baseSet(object, path, value, customizer) {\n  if (!isObject(object)) {\n    return object;\n  }\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length,\n      lastIndex = length - 1,\n      nested = object;\n\n  while (nested != null && ++index < length) {\n    var key = toKey(path[index]),\n        newValue = value;\n\n    if (key === '__proto__' || key === 'constructor' || key === 'prototype') {\n      return object;\n    }\n\n    if (index != lastIndex) {\n      var objValue = nested[key];\n      newValue = customizer ? customizer(objValue, key, nested) : undefined;\n      if (newValue === undefined) {\n        newValue = isObject(objValue)\n          ? objValue\n          : (isIndex(path[index + 1]) ? [] : {});\n      }\n    }\n    assignValue(nested, key, newValue);\n    nested = nested[key];\n  }\n  return object;\n}\n\nmodule.exports = baseSet;\n","var baseRest = require('./_baseRest'),\n    isIterateeCall = require('./_isIterateeCall');\n\n/**\n * Creates a function like `_.assign`.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\nfunction createAssigner(assigner) {\n  return baseRest(function(object, sources) {\n    var index = -1,\n        length = sources.length,\n        customizer = length > 1 ? sources[length - 1] : undefined,\n        guard = length > 2 ? sources[2] : undefined;\n\n    customizer = (assigner.length > 3 && typeof customizer == 'function')\n      ? (length--, customizer)\n      : undefined;\n\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? undefined : customizer;\n      length = 1;\n    }\n    object = Object(object);\n    while (++index < length) {\n      var source = sources[index];\n      if (source) {\n        assigner(object, source, index, customizer);\n      }\n    }\n    return object;\n  });\n}\n\nmodule.exports = createAssigner;\n","var apply = require('./_apply');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * A specialized version of `baseRest` which transforms the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @param {Function} transform The rest array transform.\n * @returns {Function} Returns the new function.\n */\nfunction overRest(func, start, transform) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = transform(array);\n    return apply(func, this, otherArgs);\n  };\n}\n\nmodule.exports = overRest;\n","/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\nmodule.exports = apply;\n","var baseSetToString = require('./_baseSetToString'),\n    shortOut = require('./_shortOut');\n\n/**\n * Sets the `toString` method of `func` to return `string`.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar setToString = shortOut(baseSetToString);\n\nmodule.exports = setToString;\n","var constant = require('./constant'),\n    defineProperty = require('./_defineProperty'),\n    identity = require('./identity');\n\n/**\n * The base implementation of `setToString` without support for hot loop shorting.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar baseSetToString = !defineProperty ? identity : function(func, string) {\n  return defineProperty(func, 'toString', {\n    'configurable': true,\n    'enumerable': false,\n    'value': constant(string),\n    'writable': true\n  });\n};\n\nmodule.exports = baseSetToString;\n","/**\n * Creates a function that returns `value`.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {*} value The value to return from the new function.\n * @returns {Function} Returns the new constant function.\n * @example\n *\n * var objects = _.times(2, _.constant({ 'a': 1 }));\n *\n * console.log(objects);\n * // => [{ 'a': 1 }, { 'a': 1 }]\n *\n * console.log(objects[0] === objects[1]);\n * // => true\n */\nfunction constant(value) {\n  return function() {\n    return value;\n  };\n}\n\nmodule.exports = constant;\n","/** Used to detect hot functions by number of calls within a span of milliseconds. */\nvar HOT_COUNT = 800,\n    HOT_SPAN = 16;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeNow = Date.now;\n\n/**\n * Creates a function that'll short out and invoke `identity` instead\n * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`\n * milliseconds.\n *\n * @private\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new shortable function.\n */\nfunction shortOut(func) {\n  var count = 0,\n      lastCalled = 0;\n\n  return function() {\n    var stamp = nativeNow(),\n        remaining = HOT_SPAN - (stamp - lastCalled);\n\n    lastCalled = stamp;\n    if (remaining > 0) {\n      if (++count >= HOT_COUNT) {\n        return arguments[0];\n      }\n    } else {\n      count = 0;\n    }\n    return func.apply(undefined, arguments);\n  };\n}\n\nmodule.exports = shortOut;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.GAstVisitor = void 0;\nvar model_1 = require(\"./model\");\nvar GAstVisitor = /** @class */ (function () {\n    function GAstVisitor() {\n    }\n    GAstVisitor.prototype.visit = function (node) {\n        var nodeAny = node;\n        switch (nodeAny.constructor) {\n            case model_1.NonTerminal:\n                return this.visitNonTerminal(nodeAny);\n            case model_1.Alternative:\n                return this.visitAlternative(nodeAny);\n            case model_1.Option:\n                return this.visitOption(nodeAny);\n            case model_1.RepetitionMandatory:\n                return this.visitRepetitionMandatory(nodeAny);\n            case model_1.RepetitionMandatoryWithSeparator:\n                return this.visitRepetitionMandatoryWithSeparator(nodeAny);\n            case model_1.RepetitionWithSeparator:\n                return this.visitRepetitionWithSeparator(nodeAny);\n            case model_1.Repetition:\n                return this.visitRepetition(nodeAny);\n            case model_1.Alternation:\n                return this.visitAlternation(nodeAny);\n            case model_1.Terminal:\n                return this.visitTerminal(nodeAny);\n            case model_1.Rule:\n                return this.visitRule(nodeAny);\n            /* istanbul ignore next */\n            default:\n                throw Error(\"non exhaustive match\");\n        }\n    };\n    /* istanbul ignore next - testing the fact a NOOP function exists is non-trivial  */\n    GAstVisitor.prototype.visitNonTerminal = function (node) { };\n    /* istanbul ignore next - testing the fact a NOOP function exists is non-trivial  */\n    GAstVisitor.prototype.visitAlternative = function (node) { };\n    /* istanbul ignore next - testing the fact a NOOP function exists is non-trivial  */\n    GAstVisitor.prototype.visitOption = function (node) { };\n    /* istanbul ignore next - testing the fact a NOOP function exists is non-trivial  */\n    GAstVisitor.prototype.visitRepetition = function (node) { };\n    /* istanbul ignore next - testing the fact a NOOP function exists is non-trivial  */\n    GAstVisitor.prototype.visitRepetitionMandatory = function (node) { };\n    /* istanbul ignore next - testing the fact a NOOP function exists is non-trivial  */\n    GAstVisitor.prototype.visitRepetitionMandatoryWithSeparator = function (node) { };\n    /* istanbul ignore next - testing the fact a NOOP function exists is non-trivial  */\n    GAstVisitor.prototype.visitRepetitionWithSeparator = function (node) { };\n    /* istanbul ignore next - testing the fact a NOOP function exists is non-trivial  */\n    GAstVisitor.prototype.visitAlternation = function (node) { };\n    /* istanbul ignore next - testing the fact a NOOP function exists is non-trivial  */\n    GAstVisitor.prototype.visitTerminal = function (node) { };\n    /* istanbul ignore next - testing the fact a NOOP function exists is non-trivial  */\n    GAstVisitor.prototype.visitRule = function (node) { };\n    return GAstVisitor;\n}());\nexports.GAstVisitor = GAstVisitor;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getProductionDslName = exports.isBranchingProd = exports.isOptionalProd = exports.isSequenceProd = void 0;\nvar some_1 = __importDefault(require(\"lodash/some\"));\nvar every_1 = __importDefault(require(\"lodash/every\"));\nvar includes_1 = __importDefault(require(\"lodash/includes\"));\nvar model_1 = require(\"./model\");\nfunction isSequenceProd(prod) {\n    return (prod instanceof model_1.Alternative ||\n        prod instanceof model_1.Option ||\n        prod instanceof model_1.Repetition ||\n        prod instanceof model_1.RepetitionMandatory ||\n        prod instanceof model_1.RepetitionMandatoryWithSeparator ||\n        prod instanceof model_1.RepetitionWithSeparator ||\n        prod instanceof model_1.Terminal ||\n        prod instanceof model_1.Rule);\n}\nexports.isSequenceProd = isSequenceProd;\nfunction isOptionalProd(prod, alreadyVisited) {\n    if (alreadyVisited === void 0) { alreadyVisited = []; }\n    var isDirectlyOptional = prod instanceof model_1.Option ||\n        prod instanceof model_1.Repetition ||\n        prod instanceof model_1.RepetitionWithSeparator;\n    if (isDirectlyOptional) {\n        return true;\n    }\n    // note that this can cause infinite loop if one optional empty TOP production has a cyclic dependency with another\n    // empty optional top rule\n    // may be indirectly optional ((A?B?C?) | (D?E?F?))\n    if (prod instanceof model_1.Alternation) {\n        // for OR its enough for just one of the alternatives to be optional\n        return (0, some_1.default)(prod.definition, function (subProd) {\n            return isOptionalProd(subProd, alreadyVisited);\n        });\n    }\n    else if (prod instanceof model_1.NonTerminal && (0, includes_1.default)(alreadyVisited, prod)) {\n        // avoiding stack overflow due to infinite recursion\n        return false;\n    }\n    else if (prod instanceof model_1.AbstractProduction) {\n        if (prod instanceof model_1.NonTerminal) {\n            alreadyVisited.push(prod);\n        }\n        return (0, every_1.default)(prod.definition, function (subProd) {\n            return isOptionalProd(subProd, alreadyVisited);\n        });\n    }\n    else {\n        return false;\n    }\n}\nexports.isOptionalProd = isOptionalProd;\nfunction isBranchingProd(prod) {\n    return prod instanceof model_1.Alternation;\n}\nexports.isBranchingProd = isBranchingProd;\nfunction getProductionDslName(prod) {\n    /* istanbul ignore else */\n    if (prod instanceof model_1.NonTerminal) {\n        return \"SUBRULE\";\n    }\n    else if (prod instanceof model_1.Option) {\n        return \"OPTION\";\n    }\n    else if (prod instanceof model_1.Alternation) {\n        return \"OR\";\n    }\n    else if (prod instanceof model_1.RepetitionMandatory) {\n        return \"AT_LEAST_ONE\";\n    }\n    else if (prod instanceof model_1.RepetitionMandatoryWithSeparator) {\n        return \"AT_LEAST_ONE_SEP\";\n    }\n    else if (prod instanceof model_1.RepetitionWithSeparator) {\n        return \"MANY_SEP\";\n    }\n    else if (prod instanceof model_1.Repetition) {\n        return \"MANY\";\n    }\n    else if (prod instanceof model_1.Terminal) {\n        return \"CONSUME\";\n    }\n    else {\n        throw Error(\"non exhaustive match\");\n    }\n}\nexports.getProductionDslName = getProductionDslName;\n","var baseEach = require('./_baseEach');\n\n/**\n * The base implementation of `_.some` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction baseSome(collection, predicate) {\n  var result;\n\n  baseEach(collection, function(value, index, collection) {\n    result = predicate(value, index, collection);\n    return !result;\n  });\n  return !!result;\n}\n\nmodule.exports = baseSome;\n","/**\n * A specialized version of `_.every` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if all elements pass the predicate check,\n *  else `false`.\n */\nfunction arrayEvery(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (!predicate(array[index], index, array)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nmodule.exports = arrayEvery;\n","var baseEach = require('./_baseEach');\n\n/**\n * The base implementation of `_.every` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if all elements pass the predicate check,\n *  else `false`\n */\nfunction baseEvery(collection, predicate) {\n  var result = true;\n  baseEach(collection, function(value, index, collection) {\n    result = !!predicate(value, index, collection);\n    return result;\n  });\n  return result;\n}\n\nmodule.exports = baseEvery;\n","/**\n * The base implementation of `_.isNaN` without support for number objects.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\n */\nfunction baseIsNaN(value) {\n  return value !== value;\n}\n\nmodule.exports = baseIsNaN;\n","/**\n * A specialized version of `_.indexOf` which performs strict equality\n * comparisons of values, i.e. `===`.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction strictIndexOf(array, value, fromIndex) {\n  var index = fromIndex - 1,\n      length = array.length;\n\n  while (++index < length) {\n    if (array[index] === value) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = strictIndexOf;\n","var Symbol = require('./_Symbol'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray');\n\n/** Built-in value references. */\nvar spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined;\n\n/**\n * Checks if `value` is a flattenable `arguments` object or array.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\n */\nfunction isFlattenable(value) {\n  return isArray(value) || isArguments(value) ||\n    !!(spreadableSymbol && value && value[spreadableSymbol]);\n}\n\nmodule.exports = isFlattenable;\n","var SetCache = require('./_SetCache'),\n    arrayIncludes = require('./_arrayIncludes'),\n    arrayIncludesWith = require('./_arrayIncludesWith'),\n    cacheHas = require('./_cacheHas'),\n    createSet = require('./_createSet'),\n    setToArray = require('./_setToArray');\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * The base implementation of `_.uniqBy` without support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new duplicate free array.\n */\nfunction baseUniq(array, iteratee, comparator) {\n  var index = -1,\n      includes = arrayIncludes,\n      length = array.length,\n      isCommon = true,\n      result = [],\n      seen = result;\n\n  if (comparator) {\n    isCommon = false;\n    includes = arrayIncludesWith;\n  }\n  else if (length >= LARGE_ARRAY_SIZE) {\n    var set = iteratee ? null : createSet(array);\n    if (set) {\n      return setToArray(set);\n    }\n    isCommon = false;\n    includes = cacheHas;\n    seen = new SetCache;\n  }\n  else {\n    seen = iteratee ? [] : result;\n  }\n  outer:\n  while (++index < length) {\n    var value = array[index],\n        computed = iteratee ? iteratee(value) : value;\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (isCommon && computed === computed) {\n      var seenIndex = seen.length;\n      while (seenIndex--) {\n        if (seen[seenIndex] === computed) {\n          continue outer;\n        }\n      }\n      if (iteratee) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n    else if (!includes(seen, computed, comparator)) {\n      if (seen !== result) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseUniq;\n","var Set = require('./_Set'),\n    noop = require('./noop'),\n    setToArray = require('./_setToArray');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Creates a set object of `values`.\n *\n * @private\n * @param {Array} values The values to add to the set.\n * @returns {Object} Returns the new set.\n */\nvar createSet = !(Set && (1 / setToArray(new Set([,-0]))[1]) == INFINITY) ? noop : function(values) {\n  return new Set(values);\n};\n\nmodule.exports = createSet;\n","/**\n * Gets the first element of `array`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @alias first\n * @category Array\n * @param {Array} array The array to query.\n * @returns {*} Returns the first element of `array`.\n * @example\n *\n * _.head([1, 2, 3]);\n * // => 1\n *\n * _.head([]);\n * // => undefined\n */\nfunction head(array) {\n  return (array && array.length) ? array[0] : undefined;\n}\n\nmodule.exports = head;\n","/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a function that negates the result of the predicate `func`. The\n * `func` predicate is invoked with the `this` binding and arguments of the\n * created function.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Function\n * @param {Function} predicate The predicate to negate.\n * @returns {Function} Returns the new negated function.\n * @example\n *\n * function isEven(n) {\n *   return n % 2 == 0;\n * }\n *\n * _.filter([1, 2, 3, 4, 5, 6], _.negate(isEven));\n * // => [1, 3, 5]\n */\nfunction negate(predicate) {\n  if (typeof predicate != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  return function() {\n    var args = arguments;\n    switch (args.length) {\n      case 0: return !predicate.call(this);\n      case 1: return !predicate.call(this, args[0]);\n      case 2: return !predicate.call(this, args[0], args[1]);\n      case 3: return !predicate.call(this, args[0], args[1], args[2]);\n    }\n    return !predicate.apply(this, args);\n  };\n}\n\nmodule.exports = negate;\n","var SetCache = require('./_SetCache'),\n    arrayIncludes = require('./_arrayIncludes'),\n    arrayIncludesWith = require('./_arrayIncludesWith'),\n    arrayMap = require('./_arrayMap'),\n    baseUnary = require('./_baseUnary'),\n    cacheHas = require('./_cacheHas');\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * The base implementation of methods like `_.difference` without support\n * for excluding multiple arrays or iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Array} values The values to exclude.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new array of filtered values.\n */\nfunction baseDifference(array, values, iteratee, comparator) {\n  var index = -1,\n      includes = arrayIncludes,\n      isCommon = true,\n      length = array.length,\n      result = [],\n      valuesLength = values.length;\n\n  if (!length) {\n    return result;\n  }\n  if (iteratee) {\n    values = arrayMap(values, baseUnary(iteratee));\n  }\n  if (comparator) {\n    includes = arrayIncludesWith;\n    isCommon = false;\n  }\n  else if (values.length >= LARGE_ARRAY_SIZE) {\n    includes = cacheHas;\n    isCommon = false;\n    values = new SetCache(values);\n  }\n  outer:\n  while (++index < length) {\n    var value = array[index],\n        computed = iteratee == null ? value : iteratee(value);\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (isCommon && computed === computed) {\n      var valuesIndex = valuesLength;\n      while (valuesIndex--) {\n        if (values[valuesIndex] === computed) {\n          continue outer;\n        }\n      }\n      result.push(value);\n    }\n    else if (!includes(values, computed, comparator)) {\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseDifference;\n","var isArrayLike = require('./isArrayLike'),\n    isObjectLike = require('./isObjectLike');\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\nmodule.exports = isArrayLikeObject;\n","var baseIndexOf = require('./_baseIndexOf'),\n    toInteger = require('./toInteger');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * Gets the index at which the first occurrence of `value` is found in `array`\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons. If `fromIndex` is negative, it's used as the\n * offset from the end of `array`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} [fromIndex=0] The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n * @example\n *\n * _.indexOf([1, 2, 1, 2], 2);\n * // => 1\n *\n * // Search from the `fromIndex`.\n * _.indexOf([1, 2, 1, 2], 2, 2);\n * // => 3\n */\nfunction indexOf(array, value, fromIndex) {\n  var length = array == null ? 0 : array.length;\n  if (!length) {\n    return -1;\n  }\n  var index = fromIndex == null ? 0 : toInteger(fromIndex);\n  if (index < 0) {\n    index = nativeMax(length + index, 0);\n  }\n  return baseIndexOf(array, value, index);\n}\n\nmodule.exports = indexOf;\n","var baseIteratee = require('./_baseIteratee'),\n    isArrayLike = require('./isArrayLike'),\n    keys = require('./keys');\n\n/**\n * Creates a `_.find` or `_.findLast` function.\n *\n * @private\n * @param {Function} findIndexFunc The function to find the collection index.\n * @returns {Function} Returns the new find function.\n */\nfunction createFind(findIndexFunc) {\n  return function(collection, predicate, fromIndex) {\n    var iterable = Object(collection);\n    if (!isArrayLike(collection)) {\n      var iteratee = baseIteratee(predicate, 3);\n      collection = keys(collection);\n      predicate = function(key) { return iteratee(iterable[key], key, iterable); };\n    }\n    var index = findIndexFunc(collection, predicate, fromIndex);\n    return index > -1 ? iterable[iteratee ? collection[index] : index] : undefined;\n  };\n}\n\nmodule.exports = createFind;\n","/**\n * A specialized version of `_.reduce` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @param {boolean} [initAccum] Specify using the first element of `array` as\n *  the initial value.\n * @returns {*} Returns the accumulated value.\n */\nfunction arrayReduce(array, iteratee, accumulator, initAccum) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  if (initAccum && length) {\n    accumulator = array[++index];\n  }\n  while (++index < length) {\n    accumulator = iteratee(accumulator, array[index], index, array);\n  }\n  return accumulator;\n}\n\nmodule.exports = arrayReduce;\n","/**\n * The base implementation of `_.reduce` and `_.reduceRight`, without support\n * for iteratee shorthands, which iterates over `collection` using `eachFunc`.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} accumulator The initial value.\n * @param {boolean} initAccum Specify using the first or last element of\n *  `collection` as the initial value.\n * @param {Function} eachFunc The function to iterate over `collection`.\n * @returns {*} Returns the accumulated value.\n */\nfunction baseReduce(collection, iteratee, accumulator, initAccum, eachFunc) {\n  eachFunc(collection, function(value, index, collection) {\n    accumulator = initAccum\n      ? (initAccum = false, value)\n      : iteratee(accumulator, value, index, collection);\n  });\n  return accumulator;\n}\n\nmodule.exports = baseReduce;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.canMatchCharCode = exports.firstCharOptimizedIndices = exports.getOptimizedStartCodesIndices = exports.failedOptimizationPrefixMsg = void 0;\nvar regexp_to_ast_1 = require(\"regexp-to-ast\");\nvar isArray_1 = __importDefault(require(\"lodash/isArray\"));\nvar every_1 = __importDefault(require(\"lodash/every\"));\nvar forEach_1 = __importDefault(require(\"lodash/forEach\"));\nvar find_1 = __importDefault(require(\"lodash/find\"));\nvar values_1 = __importDefault(require(\"lodash/values\"));\nvar includes_1 = __importDefault(require(\"lodash/includes\"));\nvar utils_1 = require(\"@chevrotain/utils\");\nvar reg_exp_parser_1 = require(\"./reg_exp_parser\");\nvar lexer_1 = require(\"./lexer\");\nvar complementErrorMessage = \"Complement Sets are not supported for first char optimization\";\nexports.failedOptimizationPrefixMsg = 'Unable to use \"first char\" lexer optimizations:\\n';\nfunction getOptimizedStartCodesIndices(regExp, ensureOptimizations) {\n    if (ensureOptimizations === void 0) { ensureOptimizations = false; }\n    try {\n        var ast = (0, reg_exp_parser_1.getRegExpAst)(regExp);\n        var firstChars = firstCharOptimizedIndices(ast.value, {}, ast.flags.ignoreCase);\n        return firstChars;\n    }\n    catch (e) {\n        /* istanbul ignore next */\n        // Testing this relies on the regexp-to-ast library having a bug... */\n        // TODO: only the else branch needs to be ignored, try to fix with newer prettier / tsc\n        if (e.message === complementErrorMessage) {\n            if (ensureOptimizations) {\n                (0, utils_1.PRINT_WARNING)(\"\".concat(exports.failedOptimizationPrefixMsg) +\n                    \"\\tUnable to optimize: < \".concat(regExp.toString(), \" >\\n\") +\n                    \"\\tComplement Sets cannot be automatically optimized.\\n\" +\n                    \"\\tThis will disable the lexer's first char optimizations.\\n\" +\n                    \"\\tSee: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.\");\n            }\n        }\n        else {\n            var msgSuffix = \"\";\n            if (ensureOptimizations) {\n                msgSuffix =\n                    \"\\n\\tThis will disable the lexer's first char optimizations.\\n\" +\n                        \"\\tSee: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details.\";\n            }\n            (0, utils_1.PRINT_ERROR)(\"\".concat(exports.failedOptimizationPrefixMsg, \"\\n\") +\n                \"\\tFailed parsing: < \".concat(regExp.toString(), \" >\\n\") +\n                \"\\tUsing the regexp-to-ast library version: \".concat(regexp_to_ast_1.VERSION, \"\\n\") +\n                \"\\tPlease open an issue at: https://github.com/bd82/regexp-to-ast/issues\" +\n                msgSuffix);\n        }\n    }\n    return [];\n}\nexports.getOptimizedStartCodesIndices = getOptimizedStartCodesIndices;\nfunction firstCharOptimizedIndices(ast, result, ignoreCase) {\n    switch (ast.type) {\n        case \"Disjunction\":\n            for (var i = 0; i < ast.value.length; i++) {\n                firstCharOptimizedIndices(ast.value[i], result, ignoreCase);\n            }\n            break;\n        case \"Alternative\":\n            var terms = ast.value;\n            for (var i = 0; i < terms.length; i++) {\n                var term = terms[i];\n                // skip terms that cannot effect the first char results\n                switch (term.type) {\n                    case \"EndAnchor\":\n                    // A group back reference cannot affect potential starting char.\n                    // because if a back reference is the first production than automatically\n                    // the group being referenced has had to come BEFORE so its codes have already been added\n                    case \"GroupBackReference\":\n                    // assertions do not affect potential starting codes\n                    case \"Lookahead\":\n                    case \"NegativeLookahead\":\n                    case \"StartAnchor\":\n                    case \"WordBoundary\":\n                    case \"NonWordBoundary\":\n                        continue;\n                }\n                var atom = term;\n                switch (atom.type) {\n                    case \"Character\":\n                        addOptimizedIdxToResult(atom.value, result, ignoreCase);\n                        break;\n                    case \"Set\":\n                        if (atom.complement === true) {\n                            throw Error(complementErrorMessage);\n                        }\n                        (0, forEach_1.default)(atom.value, function (code) {\n                            if (typeof code === \"number\") {\n                                addOptimizedIdxToResult(code, result, ignoreCase);\n                            }\n                            else {\n                                // range\n                                var range = code;\n                                // cannot optimize when ignoreCase is\n                                if (ignoreCase === true) {\n                                    for (var rangeCode = range.from; rangeCode <= range.to; rangeCode++) {\n                                        addOptimizedIdxToResult(rangeCode, result, ignoreCase);\n                                    }\n                                }\n                                // Optimization (2 orders of magnitude less work for very large ranges)\n                                else {\n                                    // handle unoptimized values\n                                    for (var rangeCode = range.from; rangeCode <= range.to && rangeCode < lexer_1.minOptimizationVal; rangeCode++) {\n                                        addOptimizedIdxToResult(rangeCode, result, ignoreCase);\n                                    }\n                                    // Less common charCode where we optimize for faster init time, by using larger \"buckets\"\n                                    if (range.to >= lexer_1.minOptimizationVal) {\n                                        var minUnOptVal = range.from >= lexer_1.minOptimizationVal\n                                            ? range.from\n                                            : lexer_1.minOptimizationVal;\n                                        var maxUnOptVal = range.to;\n                                        var minOptIdx = (0, lexer_1.charCodeToOptimizedIndex)(minUnOptVal);\n                                        var maxOptIdx = (0, lexer_1.charCodeToOptimizedIndex)(maxUnOptVal);\n                                        for (var currOptIdx = minOptIdx; currOptIdx <= maxOptIdx; currOptIdx++) {\n                                            result[currOptIdx] = currOptIdx;\n                                        }\n                                    }\n                                }\n                            }\n                        });\n                        break;\n                    case \"Group\":\n                        firstCharOptimizedIndices(atom.value, result, ignoreCase);\n                        break;\n                    /* istanbul ignore next */\n                    default:\n                        throw Error(\"Non Exhaustive Match\");\n                }\n                // reached a mandatory production, no more **start** codes can be found on this alternative\n                var isOptionalQuantifier = atom.quantifier !== undefined && atom.quantifier.atLeast === 0;\n                if (\n                // A group may be optional due to empty contents /(?:)/\n                // or if everything inside it is optional /((a)?)/\n                (atom.type === \"Group\" && isWholeOptional(atom) === false) ||\n                    // If this term is not a group it may only be optional if it has an optional quantifier\n                    (atom.type !== \"Group\" && isOptionalQuantifier === false)) {\n                    break;\n                }\n            }\n            break;\n        /* istanbul ignore next */\n        default:\n            throw Error(\"non exhaustive match!\");\n    }\n    // console.log(Object.keys(result).length)\n    return (0, values_1.default)(result);\n}\nexports.firstCharOptimizedIndices = firstCharOptimizedIndices;\nfunction addOptimizedIdxToResult(code, result, ignoreCase) {\n    var optimizedCharIdx = (0, lexer_1.charCodeToOptimizedIndex)(code);\n    result[optimizedCharIdx] = optimizedCharIdx;\n    if (ignoreCase === true) {\n        handleIgnoreCase(code, result);\n    }\n}\nfunction handleIgnoreCase(code, result) {\n    var char = String.fromCharCode(code);\n    var upperChar = char.toUpperCase();\n    /* istanbul ignore else */\n    if (upperChar !== char) {\n        var optimizedCharIdx = (0, lexer_1.charCodeToOptimizedIndex)(upperChar.charCodeAt(0));\n        result[optimizedCharIdx] = optimizedCharIdx;\n    }\n    else {\n        var lowerChar = char.toLowerCase();\n        if (lowerChar !== char) {\n            var optimizedCharIdx = (0, lexer_1.charCodeToOptimizedIndex)(lowerChar.charCodeAt(0));\n            result[optimizedCharIdx] = optimizedCharIdx;\n        }\n    }\n}\nfunction findCode(setNode, targetCharCodes) {\n    return (0, find_1.default)(setNode.value, function (codeOrRange) {\n        if (typeof codeOrRange === \"number\") {\n            return (0, includes_1.default)(targetCharCodes, codeOrRange);\n        }\n        else {\n            // range\n            var range_1 = codeOrRange;\n            return ((0, find_1.default)(targetCharCodes, function (targetCode) { return range_1.from <= targetCode && targetCode <= range_1.to; }) !== undefined);\n        }\n    });\n}\nfunction isWholeOptional(ast) {\n    var quantifier = ast.quantifier;\n    if (quantifier && quantifier.atLeast === 0) {\n        return true;\n    }\n    if (!ast.value) {\n        return false;\n    }\n    return (0, isArray_1.default)(ast.value)\n        ? (0, every_1.default)(ast.value, isWholeOptional)\n        : isWholeOptional(ast.value);\n}\nvar CharCodeFinder = /** @class */ (function (_super) {\n    __extends(CharCodeFinder, _super);\n    function CharCodeFinder(targetCharCodes) {\n        var _this = _super.call(this) || this;\n        _this.targetCharCodes = targetCharCodes;\n        _this.found = false;\n        return _this;\n    }\n    CharCodeFinder.prototype.visitChildren = function (node) {\n        // No need to keep looking...\n        if (this.found === true) {\n            return;\n        }\n        // switch lookaheads as they do not actually consume any characters thus\n        // finding a charCode at lookahead context does not mean that regexp can actually contain it in a match.\n        switch (node.type) {\n            case \"Lookahead\":\n                this.visitLookahead(node);\n                return;\n            case \"NegativeLookahead\":\n                this.visitNegativeLookahead(node);\n                return;\n        }\n        _super.prototype.visitChildren.call(this, node);\n    };\n    CharCodeFinder.prototype.visitCharacter = function (node) {\n        if ((0, includes_1.default)(this.targetCharCodes, node.value)) {\n            this.found = true;\n        }\n    };\n    CharCodeFinder.prototype.visitSet = function (node) {\n        if (node.complement) {\n            if (findCode(node, this.targetCharCodes) === undefined) {\n                this.found = true;\n            }\n        }\n        else {\n            if (findCode(node, this.targetCharCodes) !== undefined) {\n                this.found = true;\n            }\n        }\n    };\n    return CharCodeFinder;\n}(regexp_to_ast_1.BaseRegExpVisitor));\nfunction canMatchCharCode(charCodes, pattern) {\n    if (pattern instanceof RegExp) {\n        var ast = (0, reg_exp_parser_1.getRegExpAst)(pattern);\n        var charCodeFinder = new CharCodeFinder(charCodes);\n        charCodeFinder.visit(ast);\n        return charCodeFinder.found;\n    }\n    else {\n        return ((0, find_1.default)(pattern, function (char) {\n            return (0, includes_1.default)(charCodes, char.charCodeAt(0));\n        }) !== undefined);\n    }\n}\nexports.canMatchCharCode = canMatchCharCode;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateGrammar = exports.resolveGrammar = void 0;\nvar forEach_1 = __importDefault(require(\"lodash/forEach\"));\nvar defaults_1 = __importDefault(require(\"lodash/defaults\"));\nvar resolver_1 = require(\"../resolver\");\nvar checks_1 = require(\"../checks\");\nvar errors_public_1 = require(\"../../errors_public\");\nfunction resolveGrammar(options) {\n    var actualOptions = (0, defaults_1.default)(options, {\n        errMsgProvider: errors_public_1.defaultGrammarResolverErrorProvider\n    });\n    var topRulesTable = {};\n    (0, forEach_1.default)(options.rules, function (rule) {\n        topRulesTable[rule.name] = rule;\n    });\n    return (0, resolver_1.resolveGrammar)(topRulesTable, actualOptions.errMsgProvider);\n}\nexports.resolveGrammar = resolveGrammar;\nfunction validateGrammar(options) {\n    options = (0, defaults_1.default)(options, {\n        errMsgProvider: errors_public_1.defaultGrammarValidatorErrorProvider\n    });\n    return (0, checks_1.validateGrammar)(options.rules, options.maxLookahead, options.tokenTypes, options.errMsgProvider, options.grammarName);\n}\nexports.validateGrammar = validateGrammar;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.GastRefResolverVisitor = exports.resolveGrammar = void 0;\nvar parser_1 = require(\"../parser/parser\");\nvar forEach_1 = __importDefault(require(\"lodash/forEach\"));\nvar values_1 = __importDefault(require(\"lodash/values\"));\nvar gast_1 = require(\"@chevrotain/gast\");\nfunction resolveGrammar(topLevels, errMsgProvider) {\n    var refResolver = new GastRefResolverVisitor(topLevels, errMsgProvider);\n    refResolver.resolveRefs();\n    return refResolver.errors;\n}\nexports.resolveGrammar = resolveGrammar;\nvar GastRefResolverVisitor = /** @class */ (function (_super) {\n    __extends(GastRefResolverVisitor, _super);\n    function GastRefResolverVisitor(nameToTopRule, errMsgProvider) {\n        var _this = _super.call(this) || this;\n        _this.nameToTopRule = nameToTopRule;\n        _this.errMsgProvider = errMsgProvider;\n        _this.errors = [];\n        return _this;\n    }\n    GastRefResolverVisitor.prototype.resolveRefs = function () {\n        var _this = this;\n        (0, forEach_1.default)((0, values_1.default)(this.nameToTopRule), function (prod) {\n            _this.currTopLevel = prod;\n            prod.accept(_this);\n        });\n    };\n    GastRefResolverVisitor.prototype.visitNonTerminal = function (node) {\n        var ref = this.nameToTopRule[node.nonTerminalName];\n        if (!ref) {\n            var msg = this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel, node);\n            this.errors.push({\n                message: msg,\n                type: parser_1.ParserDefinitionErrorType.UNRESOLVED_SUBRULE_REF,\n                ruleName: this.currTopLevel.name,\n                unresolvedRefName: node.nonTerminalName\n            });\n        }\n        else {\n            node.referencedRule = ref;\n        }\n    };\n    return GastRefResolverVisitor;\n}(gast_1.GAstVisitor));\nexports.GastRefResolverVisitor = GastRefResolverVisitor;\n","var arrayAggregator = require('./_arrayAggregator'),\n    baseAggregator = require('./_baseAggregator'),\n    baseIteratee = require('./_baseIteratee'),\n    isArray = require('./isArray');\n\n/**\n * Creates a function like `_.groupBy`.\n *\n * @private\n * @param {Function} setter The function to set accumulator values.\n * @param {Function} [initializer] The accumulator object initializer.\n * @returns {Function} Returns the new aggregator function.\n */\nfunction createAggregator(setter, initializer) {\n  return function(collection, iteratee) {\n    var func = isArray(collection) ? arrayAggregator : baseAggregator,\n        accumulator = initializer ? initializer() : {};\n\n    return func(collection, setter, baseIteratee(iteratee, 2), accumulator);\n  };\n}\n\nmodule.exports = createAggregator;\n","/**\n * A specialized version of `baseAggregator` for arrays.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} setter The function to set `accumulator` values.\n * @param {Function} iteratee The iteratee to transform keys.\n * @param {Object} accumulator The initial aggregated object.\n * @returns {Function} Returns `accumulator`.\n */\nfunction arrayAggregator(array, setter, iteratee, accumulator) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    var value = array[index];\n    setter(accumulator, value, iteratee(value), array);\n  }\n  return accumulator;\n}\n\nmodule.exports = arrayAggregator;\n","var baseEach = require('./_baseEach');\n\n/**\n * Aggregates elements of `collection` on `accumulator` with keys transformed\n * by `iteratee` and values set by `setter`.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} setter The function to set `accumulator` values.\n * @param {Function} iteratee The iteratee to transform keys.\n * @param {Object} accumulator The initial aggregated object.\n * @returns {Function} Returns `accumulator`.\n */\nfunction baseAggregator(collection, setter, iteratee, accumulator) {\n  baseEach(collection, function(value, key, collection) {\n    setter(accumulator, value, iteratee(value), collection);\n  });\n  return accumulator;\n}\n\nmodule.exports = baseAggregator;\n","var baseFlatten = require('./_baseFlatten'),\n    map = require('./map');\n\n/**\n * Creates a flattened array of values by running each element in `collection`\n * thru `iteratee` and flattening the mapped results. The iteratee is invoked\n * with three arguments: (value, index|key, collection).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the new flattened array.\n * @example\n *\n * function duplicate(n) {\n *   return [n, n];\n * }\n *\n * _.flatMap([1, 2], duplicate);\n * // => [1, 1, 2, 2]\n */\nfunction flatMap(collection, iteratee) {\n  return baseFlatten(map(collection, iteratee), 1);\n}\n\nmodule.exports = flatMap;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.collectMethods = exports.LooksAhead = void 0;\nvar lookahead_1 = require(\"../../grammar/lookahead\");\nvar forEach_1 = __importDefault(require(\"lodash/forEach\"));\nvar has_1 = __importDefault(require(\"lodash/has\"));\nvar parser_1 = require(\"../parser\");\nvar keys_1 = require(\"../../grammar/keys\");\nvar gast_1 = require(\"@chevrotain/gast\");\nvar gast_2 = require(\"@chevrotain/gast\");\n/**\n * Trait responsible for the lookahead related utilities and optimizations.\n */\nvar LooksAhead = /** @class */ (function () {\n    function LooksAhead() {\n    }\n    LooksAhead.prototype.initLooksAhead = function (config) {\n        this.dynamicTokensEnabled = (0, has_1.default)(config, \"dynamicTokensEnabled\")\n            ? config.dynamicTokensEnabled // assumes end user provides the correct config value/type\n            : parser_1.DEFAULT_PARSER_CONFIG.dynamicTokensEnabled;\n        this.maxLookahead = (0, has_1.default)(config, \"maxLookahead\")\n            ? config.maxLookahead // assumes end user provides the correct config value/type\n            : parser_1.DEFAULT_PARSER_CONFIG.maxLookahead;\n        this.lookAheadFuncsCache = new Map();\n    };\n    LooksAhead.prototype.preComputeLookaheadFunctions = function (rules) {\n        var _this = this;\n        (0, forEach_1.default)(rules, function (currRule) {\n            _this.TRACE_INIT(\"\".concat(currRule.name, \" Rule Lookahead\"), function () {\n                var _a = collectMethods(currRule), alternation = _a.alternation, repetition = _a.repetition, option = _a.option, repetitionMandatory = _a.repetitionMandatory, repetitionMandatoryWithSeparator = _a.repetitionMandatoryWithSeparator, repetitionWithSeparator = _a.repetitionWithSeparator;\n                (0, forEach_1.default)(alternation, function (currProd) {\n                    var prodIdx = currProd.idx === 0 ? \"\" : currProd.idx;\n                    _this.TRACE_INIT(\"\".concat((0, gast_2.getProductionDslName)(currProd)).concat(prodIdx), function () {\n                        var laFunc = (0, lookahead_1.buildLookaheadFuncForOr)(currProd.idx, currRule, currProd.maxLookahead || _this.maxLookahead, currProd.hasPredicates, _this.dynamicTokensEnabled, _this.lookAheadBuilderForAlternatives);\n                        var key = (0, keys_1.getKeyForAutomaticLookahead)(_this.fullRuleNameToShort[currRule.name], keys_1.OR_IDX, currProd.idx);\n                        _this.setLaFuncCache(key, laFunc);\n                    });\n                });\n                (0, forEach_1.default)(repetition, function (currProd) {\n                    _this.computeLookaheadFunc(currRule, currProd.idx, keys_1.MANY_IDX, lookahead_1.PROD_TYPE.REPETITION, currProd.maxLookahead, (0, gast_2.getProductionDslName)(currProd));\n                });\n                (0, forEach_1.default)(option, function (currProd) {\n                    _this.computeLookaheadFunc(currRule, currProd.idx, keys_1.OPTION_IDX, lookahead_1.PROD_TYPE.OPTION, currProd.maxLookahead, (0, gast_2.getProductionDslName)(currProd));\n                });\n                (0, forEach_1.default)(repetitionMandatory, function (currProd) {\n                    _this.computeLookaheadFunc(currRule, currProd.idx, keys_1.AT_LEAST_ONE_IDX, lookahead_1.PROD_TYPE.REPETITION_MANDATORY, currProd.maxLookahead, (0, gast_2.getProductionDslName)(currProd));\n                });\n                (0, forEach_1.default)(repetitionMandatoryWithSeparator, function (currProd) {\n                    _this.computeLookaheadFunc(currRule, currProd.idx, keys_1.AT_LEAST_ONE_SEP_IDX, lookahead_1.PROD_TYPE.REPETITION_MANDATORY_WITH_SEPARATOR, currProd.maxLookahead, (0, gast_2.getProductionDslName)(currProd));\n                });\n                (0, forEach_1.default)(repetitionWithSeparator, function (currProd) {\n                    _this.computeLookaheadFunc(currRule, currProd.idx, keys_1.MANY_SEP_IDX, lookahead_1.PROD_TYPE.REPETITION_WITH_SEPARATOR, currProd.maxLookahead, (0, gast_2.getProductionDslName)(currProd));\n                });\n            });\n        });\n    };\n    LooksAhead.prototype.computeLookaheadFunc = function (rule, prodOccurrence, prodKey, prodType, prodMaxLookahead, dslMethodName) {\n        var _this = this;\n        this.TRACE_INIT(\"\".concat(dslMethodName).concat(prodOccurrence === 0 ? \"\" : prodOccurrence), function () {\n            var laFunc = (0, lookahead_1.buildLookaheadFuncForOptionalProd)(prodOccurrence, rule, prodMaxLookahead || _this.maxLookahead, _this.dynamicTokensEnabled, prodType, _this.lookAheadBuilderForOptional);\n            var key = (0, keys_1.getKeyForAutomaticLookahead)(_this.fullRuleNameToShort[rule.name], prodKey, prodOccurrence);\n            _this.setLaFuncCache(key, laFunc);\n        });\n    };\n    LooksAhead.prototype.lookAheadBuilderForOptional = function (alt, tokenMatcher, dynamicTokensEnabled) {\n        return (0, lookahead_1.buildSingleAlternativeLookaheadFunction)(alt, tokenMatcher, dynamicTokensEnabled);\n    };\n    LooksAhead.prototype.lookAheadBuilderForAlternatives = function (alts, hasPredicates, tokenMatcher, dynamicTokensEnabled) {\n        return (0, lookahead_1.buildAlternativesLookAheadFunc)(alts, hasPredicates, tokenMatcher, dynamicTokensEnabled);\n    };\n    // this actually returns a number, but it is always used as a string (object prop key)\n    LooksAhead.prototype.getKeyForAutomaticLookahead = function (dslMethodIdx, occurrence) {\n        var currRuleShortName = this.getLastExplicitRuleShortName();\n        return (0, keys_1.getKeyForAutomaticLookahead)(currRuleShortName, dslMethodIdx, occurrence);\n    };\n    LooksAhead.prototype.getLaFuncFromCache = function (key) {\n        return this.lookAheadFuncsCache.get(key);\n    };\n    /* istanbul ignore next */\n    LooksAhead.prototype.setLaFuncCache = function (key, value) {\n        this.lookAheadFuncsCache.set(key, value);\n    };\n    return LooksAhead;\n}());\nexports.LooksAhead = LooksAhead;\nvar DslMethodsCollectorVisitor = /** @class */ (function (_super) {\n    __extends(DslMethodsCollectorVisitor, _super);\n    function DslMethodsCollectorVisitor() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.dslMethods = {\n            option: [],\n            alternation: [],\n            repetition: [],\n            repetitionWithSeparator: [],\n            repetitionMandatory: [],\n            repetitionMandatoryWithSeparator: []\n        };\n        return _this;\n    }\n    DslMethodsCollectorVisitor.prototype.reset = function () {\n        this.dslMethods = {\n            option: [],\n            alternation: [],\n            repetition: [],\n            repetitionWithSeparator: [],\n            repetitionMandatory: [],\n            repetitionMandatoryWithSeparator: []\n        };\n    };\n    DslMethodsCollectorVisitor.prototype.visitOption = function (option) {\n        this.dslMethods.option.push(option);\n    };\n    DslMethodsCollectorVisitor.prototype.visitRepetitionWithSeparator = function (manySep) {\n        this.dslMethods.repetitionWithSeparator.push(manySep);\n    };\n    DslMethodsCollectorVisitor.prototype.visitRepetitionMandatory = function (atLeastOne) {\n        this.dslMethods.repetitionMandatory.push(atLeastOne);\n    };\n    DslMethodsCollectorVisitor.prototype.visitRepetitionMandatoryWithSeparator = function (atLeastOneSep) {\n        this.dslMethods.repetitionMandatoryWithSeparator.push(atLeastOneSep);\n    };\n    DslMethodsCollectorVisitor.prototype.visitRepetition = function (many) {\n        this.dslMethods.repetition.push(many);\n    };\n    DslMethodsCollectorVisitor.prototype.visitAlternation = function (or) {\n        this.dslMethods.alternation.push(or);\n    };\n    return DslMethodsCollectorVisitor;\n}(gast_1.GAstVisitor));\nvar collectorVisitor = new DslMethodsCollectorVisitor();\nfunction collectMethods(rule) {\n    collectorVisitor.reset();\n    rule.accept(collectorVisitor);\n    var dslMethods = collectorVisitor.dslMethods;\n    // avoid uncleaned references\n    collectorVisitor.reset();\n    return dslMethods;\n}\nexports.collectMethods = collectMethods;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TreeBuilder = void 0;\nvar cst_1 = require(\"../../cst/cst\");\nvar noop_1 = __importDefault(require(\"lodash/noop\"));\nvar has_1 = __importDefault(require(\"lodash/has\"));\nvar keys_1 = __importDefault(require(\"lodash/keys\"));\nvar isUndefined_1 = __importDefault(require(\"lodash/isUndefined\"));\nvar cst_visitor_1 = require(\"../../cst/cst_visitor\");\nvar parser_1 = require(\"../parser\");\n/**\n * This trait is responsible for the CST building logic.\n */\nvar TreeBuilder = /** @class */ (function () {\n    function TreeBuilder() {\n    }\n    TreeBuilder.prototype.initTreeBuilder = function (config) {\n        this.CST_STACK = [];\n        // outputCst is no longer exposed/defined in the pubic API\n        this.outputCst = config.outputCst;\n        this.nodeLocationTracking = (0, has_1.default)(config, \"nodeLocationTracking\")\n            ? config.nodeLocationTracking // assumes end user provides the correct config value/type\n            : parser_1.DEFAULT_PARSER_CONFIG.nodeLocationTracking;\n        if (!this.outputCst) {\n            this.cstInvocationStateUpdate = noop_1.default;\n            this.cstFinallyStateUpdate = noop_1.default;\n            this.cstPostTerminal = noop_1.default;\n            this.cstPostNonTerminal = noop_1.default;\n            this.cstPostRule = noop_1.default;\n        }\n        else {\n            if (/full/i.test(this.nodeLocationTracking)) {\n                if (this.recoveryEnabled) {\n                    this.setNodeLocationFromToken = cst_1.setNodeLocationFull;\n                    this.setNodeLocationFromNode = cst_1.setNodeLocationFull;\n                    this.cstPostRule = noop_1.default;\n                    this.setInitialNodeLocation = this.setInitialNodeLocationFullRecovery;\n                }\n                else {\n                    this.setNodeLocationFromToken = noop_1.default;\n                    this.setNodeLocationFromNode = noop_1.default;\n                    this.cstPostRule = this.cstPostRuleFull;\n                    this.setInitialNodeLocation = this.setInitialNodeLocationFullRegular;\n                }\n            }\n            else if (/onlyOffset/i.test(this.nodeLocationTracking)) {\n                if (this.recoveryEnabled) {\n                    this.setNodeLocationFromToken = cst_1.setNodeLocationOnlyOffset;\n                    this.setNodeLocationFromNode = cst_1.setNodeLocationOnlyOffset;\n                    this.cstPostRule = noop_1.default;\n                    this.setInitialNodeLocation =\n                        this.setInitialNodeLocationOnlyOffsetRecovery;\n                }\n                else {\n                    this.setNodeLocationFromToken = noop_1.default;\n                    this.setNodeLocationFromNode = noop_1.default;\n                    this.cstPostRule = this.cstPostRuleOnlyOffset;\n                    this.setInitialNodeLocation =\n                        this.setInitialNodeLocationOnlyOffsetRegular;\n                }\n            }\n            else if (/none/i.test(this.nodeLocationTracking)) {\n                this.setNodeLocationFromToken = noop_1.default;\n                this.setNodeLocationFromNode = noop_1.default;\n                this.cstPostRule = noop_1.default;\n                this.setInitialNodeLocation = noop_1.default;\n            }\n            else {\n                throw Error(\"Invalid <nodeLocationTracking> config option: \\\"\".concat(config.nodeLocationTracking, \"\\\"\"));\n            }\n        }\n    };\n    TreeBuilder.prototype.setInitialNodeLocationOnlyOffsetRecovery = function (cstNode) {\n        cstNode.location = {\n            startOffset: NaN,\n            endOffset: NaN\n        };\n    };\n    TreeBuilder.prototype.setInitialNodeLocationOnlyOffsetRegular = function (cstNode) {\n        cstNode.location = {\n            // without error recovery the starting Location of a new CstNode is guaranteed\n            // To be the next Token's startOffset (for valid inputs).\n            // For invalid inputs there won't be any CSTOutput so this potential\n            // inaccuracy does not matter\n            startOffset: this.LA(1).startOffset,\n            endOffset: NaN\n        };\n    };\n    TreeBuilder.prototype.setInitialNodeLocationFullRecovery = function (cstNode) {\n        cstNode.location = {\n            startOffset: NaN,\n            startLine: NaN,\n            startColumn: NaN,\n            endOffset: NaN,\n            endLine: NaN,\n            endColumn: NaN\n        };\n    };\n    /**\n       *  @see setInitialNodeLocationOnlyOffsetRegular for explanation why this work\n  \n       * @param cstNode\n       */\n    TreeBuilder.prototype.setInitialNodeLocationFullRegular = function (cstNode) {\n        var nextToken = this.LA(1);\n        cstNode.location = {\n            startOffset: nextToken.startOffset,\n            startLine: nextToken.startLine,\n            startColumn: nextToken.startColumn,\n            endOffset: NaN,\n            endLine: NaN,\n            endColumn: NaN\n        };\n    };\n    TreeBuilder.prototype.cstInvocationStateUpdate = function (fullRuleName) {\n        var cstNode = {\n            name: fullRuleName,\n            children: Object.create(null)\n        };\n        this.setInitialNodeLocation(cstNode);\n        this.CST_STACK.push(cstNode);\n    };\n    TreeBuilder.prototype.cstFinallyStateUpdate = function () {\n        this.CST_STACK.pop();\n    };\n    TreeBuilder.prototype.cstPostRuleFull = function (ruleCstNode) {\n        // casts to `required<CstNodeLocation>` are safe because `cstPostRuleFull` should only be invoked when full location is enabled\n        var prevToken = this.LA(0);\n        var loc = ruleCstNode.location;\n        // If this condition is true it means we consumed at least one Token\n        // In this CstNode.\n        if (loc.startOffset <= prevToken.startOffset === true) {\n            loc.endOffset = prevToken.endOffset;\n            loc.endLine = prevToken.endLine;\n            loc.endColumn = prevToken.endColumn;\n        }\n        // \"empty\" CstNode edge case\n        else {\n            loc.startOffset = NaN;\n            loc.startLine = NaN;\n            loc.startColumn = NaN;\n        }\n    };\n    TreeBuilder.prototype.cstPostRuleOnlyOffset = function (ruleCstNode) {\n        var prevToken = this.LA(0);\n        // `location' is not null because `cstPostRuleOnlyOffset` will only be invoked when location tracking is enabled.\n        var loc = ruleCstNode.location;\n        // If this condition is true it means we consumed at least one Token\n        // In this CstNode.\n        if (loc.startOffset <= prevToken.startOffset === true) {\n            loc.endOffset = prevToken.endOffset;\n        }\n        // \"empty\" CstNode edge case\n        else {\n            loc.startOffset = NaN;\n        }\n    };\n    TreeBuilder.prototype.cstPostTerminal = function (key, consumedToken) {\n        var rootCst = this.CST_STACK[this.CST_STACK.length - 1];\n        (0, cst_1.addTerminalToCst)(rootCst, consumedToken, key);\n        // This is only used when **both** error recovery and CST Output are enabled.\n        this.setNodeLocationFromToken(rootCst.location, consumedToken);\n    };\n    TreeBuilder.prototype.cstPostNonTerminal = function (ruleCstResult, ruleName) {\n        var preCstNode = this.CST_STACK[this.CST_STACK.length - 1];\n        (0, cst_1.addNoneTerminalToCst)(preCstNode, ruleName, ruleCstResult);\n        // This is only used when **both** error recovery and CST Output are enabled.\n        this.setNodeLocationFromNode(preCstNode.location, ruleCstResult.location);\n    };\n    TreeBuilder.prototype.getBaseCstVisitorConstructor = function () {\n        if ((0, isUndefined_1.default)(this.baseCstVisitorConstructor)) {\n            var newBaseCstVisitorConstructor = (0, cst_visitor_1.createBaseSemanticVisitorConstructor)(this.className, (0, keys_1.default)(this.gastProductionsCache));\n            this.baseCstVisitorConstructor = newBaseCstVisitorConstructor;\n            return newBaseCstVisitorConstructor;\n        }\n        return this.baseCstVisitorConstructor;\n    };\n    TreeBuilder.prototype.getBaseCstVisitorConstructorWithDefaults = function () {\n        if ((0, isUndefined_1.default)(this.baseCstVisitorWithDefaultsConstructor)) {\n            var newConstructor = (0, cst_visitor_1.createBaseVisitorConstructorWithDefaults)(this.className, (0, keys_1.default)(this.gastProductionsCache), this.getBaseCstVisitorConstructor());\n            this.baseCstVisitorWithDefaultsConstructor = newConstructor;\n            return newConstructor;\n        }\n        return this.baseCstVisitorWithDefaultsConstructor;\n    };\n    TreeBuilder.prototype.getLastExplicitRuleShortName = function () {\n        var ruleStack = this.RULE_STACK;\n        return ruleStack[ruleStack.length - 1];\n    };\n    TreeBuilder.prototype.getPreviousExplicitRuleShortName = function () {\n        var ruleStack = this.RULE_STACK;\n        return ruleStack[ruleStack.length - 2];\n    };\n    TreeBuilder.prototype.getLastExplicitRuleOccurrenceIndex = function () {\n        var occurrenceStack = this.RULE_OCCURRENCE_STACK;\n        return occurrenceStack[occurrenceStack.length - 1];\n    };\n    return TreeBuilder;\n}());\nexports.TreeBuilder = TreeBuilder;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.addNoneTerminalToCst = exports.addTerminalToCst = exports.setNodeLocationFull = exports.setNodeLocationOnlyOffset = void 0;\n/**\n * This nodeLocation tracking is not efficient and should only be used\n * when error recovery is enabled or the Token Vector contains virtual Tokens\n * (e.g, Python Indent/Outdent)\n * As it executes the calculation for every single terminal/nonTerminal\n * and does not rely on the fact the token vector is **sorted**\n */\nfunction setNodeLocationOnlyOffset(currNodeLocation, newLocationInfo) {\n    // First (valid) update for this cst node\n    if (isNaN(currNodeLocation.startOffset) === true) {\n        // assumption1: Token location information is either NaN or a valid number\n        // assumption2: Token location information is fully valid if it exist\n        // (both start/end offsets exist and are numbers).\n        currNodeLocation.startOffset = newLocationInfo.startOffset;\n        currNodeLocation.endOffset = newLocationInfo.endOffset;\n    }\n    // Once the startOffset has been updated with a valid number it should never receive\n    // any farther updates as the Token vector is sorted.\n    // We still have to check this this condition for every new possible location info\n    // because with error recovery enabled we may encounter invalid tokens (NaN location props)\n    else if (currNodeLocation.endOffset < newLocationInfo.endOffset === true) {\n        currNodeLocation.endOffset = newLocationInfo.endOffset;\n    }\n}\nexports.setNodeLocationOnlyOffset = setNodeLocationOnlyOffset;\n/**\n * This nodeLocation tracking is not efficient and should only be used\n * when error recovery is enabled or the Token Vector contains virtual Tokens\n * (e.g, Python Indent/Outdent)\n * As it executes the calculation for every single terminal/nonTerminal\n * and does not rely on the fact the token vector is **sorted**\n */\nfunction setNodeLocationFull(currNodeLocation, newLocationInfo) {\n    // First (valid) update for this cst node\n    if (isNaN(currNodeLocation.startOffset) === true) {\n        // assumption1: Token location information is either NaN or a valid number\n        // assumption2: Token location information is fully valid if it exist\n        // (all start/end props exist and are numbers).\n        currNodeLocation.startOffset = newLocationInfo.startOffset;\n        currNodeLocation.startColumn = newLocationInfo.startColumn;\n        currNodeLocation.startLine = newLocationInfo.startLine;\n        currNodeLocation.endOffset = newLocationInfo.endOffset;\n        currNodeLocation.endColumn = newLocationInfo.endColumn;\n        currNodeLocation.endLine = newLocationInfo.endLine;\n    }\n    // Once the start props has been updated with a valid number it should never receive\n    // any farther updates as the Token vector is sorted.\n    // We still have to check this this condition for every new possible location info\n    // because with error recovery enabled we may encounter invalid tokens (NaN location props)\n    else if (currNodeLocation.endOffset < newLocationInfo.endOffset === true) {\n        currNodeLocation.endOffset = newLocationInfo.endOffset;\n        currNodeLocation.endColumn = newLocationInfo.endColumn;\n        currNodeLocation.endLine = newLocationInfo.endLine;\n    }\n}\nexports.setNodeLocationFull = setNodeLocationFull;\nfunction addTerminalToCst(node, token, tokenTypeName) {\n    if (node.children[tokenTypeName] === undefined) {\n        node.children[tokenTypeName] = [token];\n    }\n    else {\n        node.children[tokenTypeName].push(token);\n    }\n}\nexports.addTerminalToCst = addTerminalToCst;\nfunction addNoneTerminalToCst(node, ruleName, ruleResult) {\n    if (node.children[ruleName] === undefined) {\n        node.children[ruleName] = [ruleResult];\n    }\n    else {\n        node.children[ruleName].push(ruleResult);\n    }\n}\nexports.addNoneTerminalToCst = addNoneTerminalToCst;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateMissingCstMethods = exports.validateVisitor = exports.CstVisitorDefinitionError = exports.createBaseVisitorConstructorWithDefaults = exports.createBaseSemanticVisitorConstructor = exports.defaultVisit = void 0;\nvar isEmpty_1 = __importDefault(require(\"lodash/isEmpty\"));\nvar compact_1 = __importDefault(require(\"lodash/compact\"));\nvar isArray_1 = __importDefault(require(\"lodash/isArray\"));\nvar map_1 = __importDefault(require(\"lodash/map\"));\nvar forEach_1 = __importDefault(require(\"lodash/forEach\"));\nvar filter_1 = __importDefault(require(\"lodash/filter\"));\nvar keys_1 = __importDefault(require(\"lodash/keys\"));\nvar isFunction_1 = __importDefault(require(\"lodash/isFunction\"));\nvar isUndefined_1 = __importDefault(require(\"lodash/isUndefined\"));\nvar lang_extensions_1 = require(\"../../lang/lang_extensions\");\nfunction defaultVisit(ctx, param) {\n    var childrenNames = (0, keys_1.default)(ctx);\n    var childrenNamesLength = childrenNames.length;\n    for (var i = 0; i < childrenNamesLength; i++) {\n        var currChildName = childrenNames[i];\n        var currChildArray = ctx[currChildName];\n        var currChildArrayLength = currChildArray.length;\n        for (var j = 0; j < currChildArrayLength; j++) {\n            var currChild = currChildArray[j];\n            // distinction between Tokens Children and CstNode children\n            if (currChild.tokenTypeIdx === undefined) {\n                this[currChild.name](currChild.children, param);\n            }\n        }\n    }\n    // defaultVisit does not support generic out param\n}\nexports.defaultVisit = defaultVisit;\nfunction createBaseSemanticVisitorConstructor(grammarName, ruleNames) {\n    var derivedConstructor = function () { };\n    // can be overwritten according to:\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/\n    // name?redirectlocale=en-US&redirectslug=JavaScript%2FReference%2FGlobal_Objects%2FFunction%2Fname\n    (0, lang_extensions_1.defineNameProp)(derivedConstructor, grammarName + \"BaseSemantics\");\n    var semanticProto = {\n        visit: function (cstNode, param) {\n            // enables writing more concise visitor methods when CstNode has only a single child\n            if ((0, isArray_1.default)(cstNode)) {\n                // A CST Node's children dictionary can never have empty arrays as values\n                // If a key is defined there will be at least one element in the corresponding value array.\n                cstNode = cstNode[0];\n            }\n            // enables passing optional CstNodes concisely.\n            if ((0, isUndefined_1.default)(cstNode)) {\n                return undefined;\n            }\n            return this[cstNode.name](cstNode.children, param);\n        },\n        validateVisitor: function () {\n            var semanticDefinitionErrors = validateVisitor(this, ruleNames);\n            if (!(0, isEmpty_1.default)(semanticDefinitionErrors)) {\n                var errorMessages = (0, map_1.default)(semanticDefinitionErrors, function (currDefError) { return currDefError.msg; });\n                throw Error(\"Errors Detected in CST Visitor <\".concat(this.constructor.name, \">:\\n\\t\") +\n                    \"\".concat(errorMessages.join(\"\\n\\n\").replace(/\\n/g, \"\\n\\t\")));\n            }\n        }\n    };\n    derivedConstructor.prototype = semanticProto;\n    derivedConstructor.prototype.constructor = derivedConstructor;\n    derivedConstructor._RULE_NAMES = ruleNames;\n    return derivedConstructor;\n}\nexports.createBaseSemanticVisitorConstructor = createBaseSemanticVisitorConstructor;\nfunction createBaseVisitorConstructorWithDefaults(grammarName, ruleNames, baseConstructor) {\n    var derivedConstructor = function () { };\n    // can be overwritten according to:\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/\n    // name?redirectlocale=en-US&redirectslug=JavaScript%2FReference%2FGlobal_Objects%2FFunction%2Fname\n    (0, lang_extensions_1.defineNameProp)(derivedConstructor, grammarName + \"BaseSemanticsWithDefaults\");\n    var withDefaultsProto = Object.create(baseConstructor.prototype);\n    (0, forEach_1.default)(ruleNames, function (ruleName) {\n        withDefaultsProto[ruleName] = defaultVisit;\n    });\n    derivedConstructor.prototype = withDefaultsProto;\n    derivedConstructor.prototype.constructor = derivedConstructor;\n    return derivedConstructor;\n}\nexports.createBaseVisitorConstructorWithDefaults = createBaseVisitorConstructorWithDefaults;\nvar CstVisitorDefinitionError;\n(function (CstVisitorDefinitionError) {\n    CstVisitorDefinitionError[CstVisitorDefinitionError[\"REDUNDANT_METHOD\"] = 0] = \"REDUNDANT_METHOD\";\n    CstVisitorDefinitionError[CstVisitorDefinitionError[\"MISSING_METHOD\"] = 1] = \"MISSING_METHOD\";\n})(CstVisitorDefinitionError = exports.CstVisitorDefinitionError || (exports.CstVisitorDefinitionError = {}));\nfunction validateVisitor(visitorInstance, ruleNames) {\n    var missingErrors = validateMissingCstMethods(visitorInstance, ruleNames);\n    return missingErrors;\n}\nexports.validateVisitor = validateVisitor;\nfunction validateMissingCstMethods(visitorInstance, ruleNames) {\n    var missingRuleNames = (0, filter_1.default)(ruleNames, function (currRuleName) {\n        return (0, isFunction_1.default)(visitorInstance[currRuleName]) === false;\n    });\n    var errors = (0, map_1.default)(missingRuleNames, function (currRuleName) {\n        return {\n            msg: \"Missing visitor method: <\".concat(currRuleName, \"> on \").concat((visitorInstance.constructor.name), \" CST Visitor.\"),\n            type: CstVisitorDefinitionError.MISSING_METHOD,\n            methodName: currRuleName\n        };\n    });\n    return (0, compact_1.default)(errors);\n}\nexports.validateMissingCstMethods = validateMissingCstMethods;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.defineNameProp = void 0;\nvar NAME = \"name\";\nfunction defineNameProp(obj, nameValue) {\n    Object.defineProperty(obj, NAME, {\n        enumerable: false,\n        configurable: true,\n        writable: false,\n        value: nameValue\n    });\n}\nexports.defineNameProp = defineNameProp;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LexerAdapter = void 0;\nvar parser_1 = require(\"../parser\");\n/**\n * Trait responsible abstracting over the interaction with Lexer output (Token vector).\n *\n * This could be generalized to support other kinds of lexers, e.g.\n * - Just in Time Lexing / Lexer-Less parsing.\n * - Streaming Lexer.\n */\nvar LexerAdapter = /** @class */ (function () {\n    function LexerAdapter() {\n    }\n    LexerAdapter.prototype.initLexerAdapter = function () {\n        this.tokVector = [];\n        this.tokVectorLength = 0;\n        this.currIdx = -1;\n    };\n    Object.defineProperty(LexerAdapter.prototype, \"input\", {\n        get: function () {\n            return this.tokVector;\n        },\n        set: function (newInput) {\n            // @ts-ignore - `this parameter` not supported in setters/getters\n            //   - https://www.typescriptlang.org/docs/handbook/functions.html#this-parameters\n            if (this.selfAnalysisDone !== true) {\n                throw Error(\"Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.\");\n            }\n            // @ts-ignore - `this parameter` not supported in setters/getters\n            //   - https://www.typescriptlang.org/docs/handbook/functions.html#this-parameters\n            this.reset();\n            this.tokVector = newInput;\n            this.tokVectorLength = newInput.length;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    // skips a token and returns the next token\n    LexerAdapter.prototype.SKIP_TOKEN = function () {\n        if (this.currIdx <= this.tokVector.length - 2) {\n            this.consumeToken();\n            return this.LA(1);\n        }\n        else {\n            return parser_1.END_OF_FILE;\n        }\n    };\n    // Lexer (accessing Token vector) related methods which can be overridden to implement lazy lexers\n    // or lexers dependent on parser context.\n    LexerAdapter.prototype.LA = function (howMuch) {\n        var soughtIdx = this.currIdx + howMuch;\n        if (soughtIdx < 0 || this.tokVectorLength <= soughtIdx) {\n            return parser_1.END_OF_FILE;\n        }\n        else {\n            return this.tokVector[soughtIdx];\n        }\n    };\n    LexerAdapter.prototype.consumeToken = function () {\n        this.currIdx++;\n    };\n    LexerAdapter.prototype.exportLexerState = function () {\n        return this.currIdx;\n    };\n    LexerAdapter.prototype.importLexerState = function (newState) {\n        this.currIdx = newState;\n    };\n    LexerAdapter.prototype.resetLexerState = function () {\n        this.currIdx = -1;\n    };\n    LexerAdapter.prototype.moveToTerminatedState = function () {\n        this.currIdx = this.tokVector.length - 1;\n    };\n    LexerAdapter.prototype.getLexerPosition = function () {\n        return this.exportLexerState();\n    };\n    return LexerAdapter;\n}());\nexports.LexerAdapter = LexerAdapter;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RecognizerApi = void 0;\nvar values_1 = __importDefault(require(\"lodash/values\"));\nvar includes_1 = __importDefault(require(\"lodash/includes\"));\nvar exceptions_public_1 = require(\"../../exceptions_public\");\nvar parser_1 = require(\"../parser\");\nvar errors_public_1 = require(\"../../errors_public\");\nvar checks_1 = require(\"../../grammar/checks\");\nvar gast_1 = require(\"@chevrotain/gast\");\n/**\n * This trait is responsible for implementing the public API\n * for defining Chevrotain parsers, i.e:\n * - CONSUME\n * - RULE\n * - OPTION\n * - ...\n */\nvar RecognizerApi = /** @class */ (function () {\n    function RecognizerApi() {\n    }\n    RecognizerApi.prototype.ACTION = function (impl) {\n        return impl.call(this);\n    };\n    RecognizerApi.prototype.consume = function (idx, tokType, options) {\n        return this.consumeInternal(tokType, idx, options);\n    };\n    RecognizerApi.prototype.subrule = function (idx, ruleToCall, options) {\n        return this.subruleInternal(ruleToCall, idx, options);\n    };\n    RecognizerApi.prototype.option = function (idx, actionORMethodDef) {\n        return this.optionInternal(actionORMethodDef, idx);\n    };\n    RecognizerApi.prototype.or = function (idx, altsOrOpts) {\n        return this.orInternal(altsOrOpts, idx);\n    };\n    RecognizerApi.prototype.many = function (idx, actionORMethodDef) {\n        return this.manyInternal(idx, actionORMethodDef);\n    };\n    RecognizerApi.prototype.atLeastOne = function (idx, actionORMethodDef) {\n        return this.atLeastOneInternal(idx, actionORMethodDef);\n    };\n    RecognizerApi.prototype.CONSUME = function (tokType, options) {\n        return this.consumeInternal(tokType, 0, options);\n    };\n    RecognizerApi.prototype.CONSUME1 = function (tokType, options) {\n        return this.consumeInternal(tokType, 1, options);\n    };\n    RecognizerApi.prototype.CONSUME2 = function (tokType, options) {\n        return this.consumeInternal(tokType, 2, options);\n    };\n    RecognizerApi.prototype.CONSUME3 = function (tokType, options) {\n        return this.consumeInternal(tokType, 3, options);\n    };\n    RecognizerApi.prototype.CONSUME4 = function (tokType, options) {\n        return this.consumeInternal(tokType, 4, options);\n    };\n    RecognizerApi.prototype.CONSUME5 = function (tokType, options) {\n        return this.consumeInternal(tokType, 5, options);\n    };\n    RecognizerApi.prototype.CONSUME6 = function (tokType, options) {\n        return this.consumeInternal(tokType, 6, options);\n    };\n    RecognizerApi.prototype.CONSUME7 = function (tokType, options) {\n        return this.consumeInternal(tokType, 7, options);\n    };\n    RecognizerApi.prototype.CONSUME8 = function (tokType, options) {\n        return this.consumeInternal(tokType, 8, options);\n    };\n    RecognizerApi.prototype.CONSUME9 = function (tokType, options) {\n        return this.consumeInternal(tokType, 9, options);\n    };\n    RecognizerApi.prototype.SUBRULE = function (ruleToCall, options) {\n        return this.subruleInternal(ruleToCall, 0, options);\n    };\n    RecognizerApi.prototype.SUBRULE1 = function (ruleToCall, options) {\n        return this.subruleInternal(ruleToCall, 1, options);\n    };\n    RecognizerApi.prototype.SUBRULE2 = function (ruleToCall, options) {\n        return this.subruleInternal(ruleToCall, 2, options);\n    };\n    RecognizerApi.prototype.SUBRULE3 = function (ruleToCall, options) {\n        return this.subruleInternal(ruleToCall, 3, options);\n    };\n    RecognizerApi.prototype.SUBRULE4 = function (ruleToCall, options) {\n        return this.subruleInternal(ruleToCall, 4, options);\n    };\n    RecognizerApi.prototype.SUBRULE5 = function (ruleToCall, options) {\n        return this.subruleInternal(ruleToCall, 5, options);\n    };\n    RecognizerApi.prototype.SUBRULE6 = function (ruleToCall, options) {\n        return this.subruleInternal(ruleToCall, 6, options);\n    };\n    RecognizerApi.prototype.SUBRULE7 = function (ruleToCall, options) {\n        return this.subruleInternal(ruleToCall, 7, options);\n    };\n    RecognizerApi.prototype.SUBRULE8 = function (ruleToCall, options) {\n        return this.subruleInternal(ruleToCall, 8, options);\n    };\n    RecognizerApi.prototype.SUBRULE9 = function (ruleToCall, options) {\n        return this.subruleInternal(ruleToCall, 9, options);\n    };\n    RecognizerApi.prototype.OPTION = function (actionORMethodDef) {\n        return this.optionInternal(actionORMethodDef, 0);\n    };\n    RecognizerApi.prototype.OPTION1 = function (actionORMethodDef) {\n        return this.optionInternal(actionORMethodDef, 1);\n    };\n    RecognizerApi.prototype.OPTION2 = function (actionORMethodDef) {\n        return this.optionInternal(actionORMethodDef, 2);\n    };\n    RecognizerApi.prototype.OPTION3 = function (actionORMethodDef) {\n        return this.optionInternal(actionORMethodDef, 3);\n    };\n    RecognizerApi.prototype.OPTION4 = function (actionORMethodDef) {\n        return this.optionInternal(actionORMethodDef, 4);\n    };\n    RecognizerApi.prototype.OPTION5 = function (actionORMethodDef) {\n        return this.optionInternal(actionORMethodDef, 5);\n    };\n    RecognizerApi.prototype.OPTION6 = function (actionORMethodDef) {\n        return this.optionInternal(actionORMethodDef, 6);\n    };\n    RecognizerApi.prototype.OPTION7 = function (actionORMethodDef) {\n        return this.optionInternal(actionORMethodDef, 7);\n    };\n    RecognizerApi.prototype.OPTION8 = function (actionORMethodDef) {\n        return this.optionInternal(actionORMethodDef, 8);\n    };\n    RecognizerApi.prototype.OPTION9 = function (actionORMethodDef) {\n        return this.optionInternal(actionORMethodDef, 9);\n    };\n    RecognizerApi.prototype.OR = function (altsOrOpts) {\n        return this.orInternal(altsOrOpts, 0);\n    };\n    RecognizerApi.prototype.OR1 = function (altsOrOpts) {\n        return this.orInternal(altsOrOpts, 1);\n    };\n    RecognizerApi.prototype.OR2 = function (altsOrOpts) {\n        return this.orInternal(altsOrOpts, 2);\n    };\n    RecognizerApi.prototype.OR3 = function (altsOrOpts) {\n        return this.orInternal(altsOrOpts, 3);\n    };\n    RecognizerApi.prototype.OR4 = function (altsOrOpts) {\n        return this.orInternal(altsOrOpts, 4);\n    };\n    RecognizerApi.prototype.OR5 = function (altsOrOpts) {\n        return this.orInternal(altsOrOpts, 5);\n    };\n    RecognizerApi.prototype.OR6 = function (altsOrOpts) {\n        return this.orInternal(altsOrOpts, 6);\n    };\n    RecognizerApi.prototype.OR7 = function (altsOrOpts) {\n        return this.orInternal(altsOrOpts, 7);\n    };\n    RecognizerApi.prototype.OR8 = function (altsOrOpts) {\n        return this.orInternal(altsOrOpts, 8);\n    };\n    RecognizerApi.prototype.OR9 = function (altsOrOpts) {\n        return this.orInternal(altsOrOpts, 9);\n    };\n    RecognizerApi.prototype.MANY = function (actionORMethodDef) {\n        this.manyInternal(0, actionORMethodDef);\n    };\n    RecognizerApi.prototype.MANY1 = function (actionORMethodDef) {\n        this.manyInternal(1, actionORMethodDef);\n    };\n    RecognizerApi.prototype.MANY2 = function (actionORMethodDef) {\n        this.manyInternal(2, actionORMethodDef);\n    };\n    RecognizerApi.prototype.MANY3 = function (actionORMethodDef) {\n        this.manyInternal(3, actionORMethodDef);\n    };\n    RecognizerApi.prototype.MANY4 = function (actionORMethodDef) {\n        this.manyInternal(4, actionORMethodDef);\n    };\n    RecognizerApi.prototype.MANY5 = function (actionORMethodDef) {\n        this.manyInternal(5, actionORMethodDef);\n    };\n    RecognizerApi.prototype.MANY6 = function (actionORMethodDef) {\n        this.manyInternal(6, actionORMethodDef);\n    };\n    RecognizerApi.prototype.MANY7 = function (actionORMethodDef) {\n        this.manyInternal(7, actionORMethodDef);\n    };\n    RecognizerApi.prototype.MANY8 = function (actionORMethodDef) {\n        this.manyInternal(8, actionORMethodDef);\n    };\n    RecognizerApi.prototype.MANY9 = function (actionORMethodDef) {\n        this.manyInternal(9, actionORMethodDef);\n    };\n    RecognizerApi.prototype.MANY_SEP = function (options) {\n        this.manySepFirstInternal(0, options);\n    };\n    RecognizerApi.prototype.MANY_SEP1 = function (options) {\n        this.manySepFirstInternal(1, options);\n    };\n    RecognizerApi.prototype.MANY_SEP2 = function (options) {\n        this.manySepFirstInternal(2, options);\n    };\n    RecognizerApi.prototype.MANY_SEP3 = function (options) {\n        this.manySepFirstInternal(3, options);\n    };\n    RecognizerApi.prototype.MANY_SEP4 = function (options) {\n        this.manySepFirstInternal(4, options);\n    };\n    RecognizerApi.prototype.MANY_SEP5 = function (options) {\n        this.manySepFirstInternal(5, options);\n    };\n    RecognizerApi.prototype.MANY_SEP6 = function (options) {\n        this.manySepFirstInternal(6, options);\n    };\n    RecognizerApi.prototype.MANY_SEP7 = function (options) {\n        this.manySepFirstInternal(7, options);\n    };\n    RecognizerApi.prototype.MANY_SEP8 = function (options) {\n        this.manySepFirstInternal(8, options);\n    };\n    RecognizerApi.prototype.MANY_SEP9 = function (options) {\n        this.manySepFirstInternal(9, options);\n    };\n    RecognizerApi.prototype.AT_LEAST_ONE = function (actionORMethodDef) {\n        this.atLeastOneInternal(0, actionORMethodDef);\n    };\n    RecognizerApi.prototype.AT_LEAST_ONE1 = function (actionORMethodDef) {\n        return this.atLeastOneInternal(1, actionORMethodDef);\n    };\n    RecognizerApi.prototype.AT_LEAST_ONE2 = function (actionORMethodDef) {\n        this.atLeastOneInternal(2, actionORMethodDef);\n    };\n    RecognizerApi.prototype.AT_LEAST_ONE3 = function (actionORMethodDef) {\n        this.atLeastOneInternal(3, actionORMethodDef);\n    };\n    RecognizerApi.prototype.AT_LEAST_ONE4 = function (actionORMethodDef) {\n        this.atLeastOneInternal(4, actionORMethodDef);\n    };\n    RecognizerApi.prototype.AT_LEAST_ONE5 = function (actionORMethodDef) {\n        this.atLeastOneInternal(5, actionORMethodDef);\n    };\n    RecognizerApi.prototype.AT_LEAST_ONE6 = function (actionORMethodDef) {\n        this.atLeastOneInternal(6, actionORMethodDef);\n    };\n    RecognizerApi.prototype.AT_LEAST_ONE7 = function (actionORMethodDef) {\n        this.atLeastOneInternal(7, actionORMethodDef);\n    };\n    RecognizerApi.prototype.AT_LEAST_ONE8 = function (actionORMethodDef) {\n        this.atLeastOneInternal(8, actionORMethodDef);\n    };\n    RecognizerApi.prototype.AT_LEAST_ONE9 = function (actionORMethodDef) {\n        this.atLeastOneInternal(9, actionORMethodDef);\n    };\n    RecognizerApi.prototype.AT_LEAST_ONE_SEP = function (options) {\n        this.atLeastOneSepFirstInternal(0, options);\n    };\n    RecognizerApi.prototype.AT_LEAST_ONE_SEP1 = function (options) {\n        this.atLeastOneSepFirstInternal(1, options);\n    };\n    RecognizerApi.prototype.AT_LEAST_ONE_SEP2 = function (options) {\n        this.atLeastOneSepFirstInternal(2, options);\n    };\n    RecognizerApi.prototype.AT_LEAST_ONE_SEP3 = function (options) {\n        this.atLeastOneSepFirstInternal(3, options);\n    };\n    RecognizerApi.prototype.AT_LEAST_ONE_SEP4 = function (options) {\n        this.atLeastOneSepFirstInternal(4, options);\n    };\n    RecognizerApi.prototype.AT_LEAST_ONE_SEP5 = function (options) {\n        this.atLeastOneSepFirstInternal(5, options);\n    };\n    RecognizerApi.prototype.AT_LEAST_ONE_SEP6 = function (options) {\n        this.atLeastOneSepFirstInternal(6, options);\n    };\n    RecognizerApi.prototype.AT_LEAST_ONE_SEP7 = function (options) {\n        this.atLeastOneSepFirstInternal(7, options);\n    };\n    RecognizerApi.prototype.AT_LEAST_ONE_SEP8 = function (options) {\n        this.atLeastOneSepFirstInternal(8, options);\n    };\n    RecognizerApi.prototype.AT_LEAST_ONE_SEP9 = function (options) {\n        this.atLeastOneSepFirstInternal(9, options);\n    };\n    RecognizerApi.prototype.RULE = function (name, implementation, config) {\n        if (config === void 0) { config = parser_1.DEFAULT_RULE_CONFIG; }\n        if ((0, includes_1.default)(this.definedRulesNames, name)) {\n            var errMsg = errors_public_1.defaultGrammarValidatorErrorProvider.buildDuplicateRuleNameError({\n                topLevelRule: name,\n                grammarName: this.className\n            });\n            var error = {\n                message: errMsg,\n                type: parser_1.ParserDefinitionErrorType.DUPLICATE_RULE_NAME,\n                ruleName: name\n            };\n            this.definitionErrors.push(error);\n        }\n        this.definedRulesNames.push(name);\n        var ruleImplementation = this.defineRule(name, implementation, config);\n        this[name] = ruleImplementation;\n        return ruleImplementation;\n    };\n    RecognizerApi.prototype.OVERRIDE_RULE = function (name, impl, config) {\n        if (config === void 0) { config = parser_1.DEFAULT_RULE_CONFIG; }\n        var ruleErrors = (0, checks_1.validateRuleIsOverridden)(name, this.definedRulesNames, this.className);\n        this.definitionErrors = this.definitionErrors.concat(ruleErrors);\n        var ruleImplementation = this.defineRule(name, impl, config);\n        this[name] = ruleImplementation;\n        return ruleImplementation;\n    };\n    RecognizerApi.prototype.BACKTRACK = function (grammarRule, args) {\n        return function () {\n            // save org state\n            this.isBackTrackingStack.push(1);\n            var orgState = this.saveRecogState();\n            try {\n                grammarRule.apply(this, args);\n                // if no exception was thrown we have succeed parsing the rule.\n                return true;\n            }\n            catch (e) {\n                if ((0, exceptions_public_1.isRecognitionException)(e)) {\n                    return false;\n                }\n                else {\n                    throw e;\n                }\n            }\n            finally {\n                this.reloadRecogState(orgState);\n                this.isBackTrackingStack.pop();\n            }\n        };\n    };\n    // GAST export APIs\n    RecognizerApi.prototype.getGAstProductions = function () {\n        return this.gastProductionsCache;\n    };\n    RecognizerApi.prototype.getSerializedGastProductions = function () {\n        return (0, gast_1.serializeGrammar)((0, values_1.default)(this.gastProductionsCache));\n    };\n    return RecognizerApi;\n}());\nexports.RecognizerApi = RecognizerApi;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RecognizerEngine = void 0;\nvar isEmpty_1 = __importDefault(require(\"lodash/isEmpty\"));\nvar isArray_1 = __importDefault(require(\"lodash/isArray\"));\nvar flatten_1 = __importDefault(require(\"lodash/flatten\"));\nvar every_1 = __importDefault(require(\"lodash/every\"));\nvar uniq_1 = __importDefault(require(\"lodash/uniq\"));\nvar isObject_1 = __importDefault(require(\"lodash/isObject\"));\nvar has_1 = __importDefault(require(\"lodash/has\"));\nvar values_1 = __importDefault(require(\"lodash/values\"));\nvar reduce_1 = __importDefault(require(\"lodash/reduce\"));\nvar clone_1 = __importDefault(require(\"lodash/clone\"));\nvar keys_1 = require(\"../../grammar/keys\");\nvar exceptions_public_1 = require(\"../../exceptions_public\");\nvar lookahead_1 = require(\"../../grammar/lookahead\");\nvar interpreter_1 = require(\"../../grammar/interpreter\");\nvar parser_1 = require(\"../parser\");\nvar recoverable_1 = require(\"./recoverable\");\nvar tokens_public_1 = require(\"../../../scan/tokens_public\");\nvar tokens_1 = require(\"../../../scan/tokens\");\n/**\n * This trait is responsible for the runtime parsing engine\n * Used by the official API (recognizer_api.ts)\n */\nvar RecognizerEngine = /** @class */ (function () {\n    function RecognizerEngine() {\n    }\n    RecognizerEngine.prototype.initRecognizerEngine = function (tokenVocabulary, config) {\n        this.className = this.constructor.name;\n        // TODO: would using an ES6 Map or plain object be faster (CST building scenario)\n        this.shortRuleNameToFull = {};\n        this.fullRuleNameToShort = {};\n        this.ruleShortNameIdx = 256;\n        this.tokenMatcher = tokens_1.tokenStructuredMatcherNoCategories;\n        this.subruleIdx = 0;\n        this.definedRulesNames = [];\n        this.tokensMap = {};\n        this.isBackTrackingStack = [];\n        this.RULE_STACK = [];\n        this.RULE_OCCURRENCE_STACK = [];\n        this.gastProductionsCache = {};\n        if ((0, has_1.default)(config, \"serializedGrammar\")) {\n            throw Error(\"The Parser's configuration can no longer contain a <serializedGrammar> property.\\n\" +\n                \"\\tSee: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_6-0-0\\n\" +\n                \"\\tFor Further details.\");\n        }\n        if ((0, isArray_1.default)(tokenVocabulary)) {\n            // This only checks for Token vocabularies provided as arrays.\n            // That is good enough because the main objective is to detect users of pre-V4.0 APIs\n            // rather than all edge cases of empty Token vocabularies.\n            if ((0, isEmpty_1.default)(tokenVocabulary)) {\n                throw Error(\"A Token Vocabulary cannot be empty.\\n\" +\n                    \"\\tNote that the first argument for the parser constructor\\n\" +\n                    \"\\tis no longer a Token vector (since v4.0).\");\n            }\n            if (typeof tokenVocabulary[0].startOffset === \"number\") {\n                throw Error(\"The Parser constructor no longer accepts a token vector as the first argument.\\n\" +\n                    \"\\tSee: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_4-0-0\\n\" +\n                    \"\\tFor Further details.\");\n            }\n        }\n        if ((0, isArray_1.default)(tokenVocabulary)) {\n            this.tokensMap = (0, reduce_1.default)(tokenVocabulary, function (acc, tokType) {\n                acc[tokType.name] = tokType;\n                return acc;\n            }, {});\n        }\n        else if ((0, has_1.default)(tokenVocabulary, \"modes\") &&\n            (0, every_1.default)((0, flatten_1.default)((0, values_1.default)(tokenVocabulary.modes)), tokens_1.isTokenType)) {\n            var allTokenTypes_1 = (0, flatten_1.default)((0, values_1.default)(tokenVocabulary.modes));\n            var uniqueTokens = (0, uniq_1.default)(allTokenTypes_1);\n            this.tokensMap = (0, reduce_1.default)(uniqueTokens, function (acc, tokType) {\n                acc[tokType.name] = tokType;\n                return acc;\n            }, {});\n        }\n        else if ((0, isObject_1.default)(tokenVocabulary)) {\n            this.tokensMap = (0, clone_1.default)(tokenVocabulary);\n        }\n        else {\n            throw new Error(\"<tokensDictionary> argument must be An Array of Token constructors,\" +\n                \" A dictionary of Token constructors or an IMultiModeLexerDefinition\");\n        }\n        // always add EOF to the tokenNames -> constructors map. it is useful to assure all the input has been\n        // parsed with a clear error message (\"expecting EOF but found ...\")\n        this.tokensMap[\"EOF\"] = tokens_public_1.EOF;\n        var allTokenTypes = (0, has_1.default)(tokenVocabulary, \"modes\")\n            ? (0, flatten_1.default)((0, values_1.default)(tokenVocabulary.modes))\n            : (0, values_1.default)(tokenVocabulary);\n        var noTokenCategoriesUsed = (0, every_1.default)(allTokenTypes, function (tokenConstructor) {\n            return (0, isEmpty_1.default)(tokenConstructor.categoryMatches);\n        });\n        this.tokenMatcher = noTokenCategoriesUsed\n            ? tokens_1.tokenStructuredMatcherNoCategories\n            : tokens_1.tokenStructuredMatcher;\n        // Because ES2015+ syntax should be supported for creating Token classes\n        // We cannot assume that the Token classes were created using the \"extendToken\" utilities\n        // Therefore we must augment the Token classes both on Lexer initialization and on Parser initialization\n        (0, tokens_1.augmentTokenTypes)((0, values_1.default)(this.tokensMap));\n    };\n    RecognizerEngine.prototype.defineRule = function (ruleName, impl, config) {\n        if (this.selfAnalysisDone) {\n            throw Error(\"Grammar rule <\".concat(ruleName, \"> may not be defined after the 'performSelfAnalysis' method has been called'\\n\") +\n                \"Make sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.\");\n        }\n        var resyncEnabled = (0, has_1.default)(config, \"resyncEnabled\")\n            ? config.resyncEnabled // assumes end user provides the correct config value/type\n            : parser_1.DEFAULT_RULE_CONFIG.resyncEnabled;\n        var recoveryValueFunc = (0, has_1.default)(config, \"recoveryValueFunc\")\n            ? config.recoveryValueFunc // assumes end user provides the correct config value/type\n            : parser_1.DEFAULT_RULE_CONFIG.recoveryValueFunc;\n        // performance optimization: Use small integers as keys for the longer human readable \"full\" rule names.\n        // this greatly improves Map access time (as much as 8% for some performance benchmarks).\n        var shortName = this.ruleShortNameIdx << (keys_1.BITS_FOR_METHOD_TYPE + keys_1.BITS_FOR_OCCURRENCE_IDX);\n        this.ruleShortNameIdx++;\n        this.shortRuleNameToFull[shortName] = ruleName;\n        this.fullRuleNameToShort[ruleName] = shortName;\n        var invokeRuleWithTry;\n        // Micro optimization, only check the condition **once** on rule definition\n        // instead of **every single** rule invocation.\n        if (this.outputCst === true) {\n            invokeRuleWithTry = function invokeRuleWithTry() {\n                var args = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    args[_i] = arguments[_i];\n                }\n                try {\n                    this.ruleInvocationStateUpdate(shortName, ruleName, this.subruleIdx);\n                    impl.apply(this, args);\n                    var cst = this.CST_STACK[this.CST_STACK.length - 1];\n                    this.cstPostRule(cst);\n                    return cst;\n                }\n                catch (e) {\n                    return this.invokeRuleCatch(e, resyncEnabled, recoveryValueFunc);\n                }\n                finally {\n                    this.ruleFinallyStateUpdate();\n                }\n            };\n        }\n        else {\n            invokeRuleWithTry = function invokeRuleWithTryCst() {\n                var args = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    args[_i] = arguments[_i];\n                }\n                try {\n                    this.ruleInvocationStateUpdate(shortName, ruleName, this.subruleIdx);\n                    return impl.apply(this, args);\n                }\n                catch (e) {\n                    return this.invokeRuleCatch(e, resyncEnabled, recoveryValueFunc);\n                }\n                finally {\n                    this.ruleFinallyStateUpdate();\n                }\n            };\n        }\n        var wrappedGrammarRule = Object.assign(invokeRuleWithTry, { ruleName: ruleName, originalGrammarAction: impl });\n        return wrappedGrammarRule;\n    };\n    RecognizerEngine.prototype.invokeRuleCatch = function (e, resyncEnabledConfig, recoveryValueFunc) {\n        var isFirstInvokedRule = this.RULE_STACK.length === 1;\n        // note the reSync is always enabled for the first rule invocation, because we must always be able to\n        // reSync with EOF and just output some INVALID ParseTree\n        // during backtracking reSync recovery is disabled, otherwise we can't be certain the backtracking\n        // path is really the most valid one\n        var reSyncEnabled = resyncEnabledConfig && !this.isBackTracking() && this.recoveryEnabled;\n        if ((0, exceptions_public_1.isRecognitionException)(e)) {\n            var recogError = e;\n            if (reSyncEnabled) {\n                var reSyncTokType = this.findReSyncTokenType();\n                if (this.isInCurrentRuleReSyncSet(reSyncTokType)) {\n                    recogError.resyncedTokens = this.reSyncTo(reSyncTokType);\n                    if (this.outputCst) {\n                        var partialCstResult = this.CST_STACK[this.CST_STACK.length - 1];\n                        partialCstResult.recoveredNode = true;\n                        return partialCstResult;\n                    }\n                    else {\n                        return recoveryValueFunc();\n                    }\n                }\n                else {\n                    if (this.outputCst) {\n                        var partialCstResult = this.CST_STACK[this.CST_STACK.length - 1];\n                        partialCstResult.recoveredNode = true;\n                        recogError.partialCstResult = partialCstResult;\n                    }\n                    // to be handled Further up the call stack\n                    throw recogError;\n                }\n            }\n            else if (isFirstInvokedRule) {\n                // otherwise a Redundant input error will be created as well and we cannot guarantee that this is indeed the case\n                this.moveToTerminatedState();\n                // the parser should never throw one of its own errors outside its flow.\n                // even if error recovery is disabled\n                return recoveryValueFunc();\n            }\n            else {\n                // to be recovered Further up the call stack\n                throw recogError;\n            }\n        }\n        else {\n            // some other Error type which we don't know how to handle (for example a built in JavaScript Error)\n            throw e;\n        }\n    };\n    // Implementation of parsing DSL\n    RecognizerEngine.prototype.optionInternal = function (actionORMethodDef, occurrence) {\n        var key = this.getKeyForAutomaticLookahead(keys_1.OPTION_IDX, occurrence);\n        return this.optionInternalLogic(actionORMethodDef, occurrence, key);\n    };\n    RecognizerEngine.prototype.optionInternalLogic = function (actionORMethodDef, occurrence, key) {\n        var _this = this;\n        var lookAheadFunc = this.getLaFuncFromCache(key);\n        var action;\n        if (typeof actionORMethodDef !== \"function\") {\n            action = actionORMethodDef.DEF;\n            var predicate_1 = actionORMethodDef.GATE;\n            // predicate present\n            if (predicate_1 !== undefined) {\n                var orgLookaheadFunction_1 = lookAheadFunc;\n                lookAheadFunc = function () {\n                    return predicate_1.call(_this) && orgLookaheadFunction_1.call(_this);\n                };\n            }\n        }\n        else {\n            action = actionORMethodDef;\n        }\n        if (lookAheadFunc.call(this) === true) {\n            return action.call(this);\n        }\n        return undefined;\n    };\n    RecognizerEngine.prototype.atLeastOneInternal = function (prodOccurrence, actionORMethodDef) {\n        var laKey = this.getKeyForAutomaticLookahead(keys_1.AT_LEAST_ONE_IDX, prodOccurrence);\n        return this.atLeastOneInternalLogic(prodOccurrence, actionORMethodDef, laKey);\n    };\n    RecognizerEngine.prototype.atLeastOneInternalLogic = function (prodOccurrence, actionORMethodDef, key) {\n        var _this = this;\n        var lookAheadFunc = this.getLaFuncFromCache(key);\n        var action;\n        if (typeof actionORMethodDef !== \"function\") {\n            action = actionORMethodDef.DEF;\n            var predicate_2 = actionORMethodDef.GATE;\n            // predicate present\n            if (predicate_2 !== undefined) {\n                var orgLookaheadFunction_2 = lookAheadFunc;\n                lookAheadFunc = function () {\n                    return predicate_2.call(_this) && orgLookaheadFunction_2.call(_this);\n                };\n            }\n        }\n        else {\n            action = actionORMethodDef;\n        }\n        if (lookAheadFunc.call(this) === true) {\n            var notStuck = this.doSingleRepetition(action);\n            while (lookAheadFunc.call(this) === true &&\n                notStuck === true) {\n                notStuck = this.doSingleRepetition(action);\n            }\n        }\n        else {\n            throw this.raiseEarlyExitException(prodOccurrence, lookahead_1.PROD_TYPE.REPETITION_MANDATORY, actionORMethodDef.ERR_MSG);\n        }\n        // note that while it may seem that this can cause an error because by using a recursive call to\n        // AT_LEAST_ONE we change the grammar to AT_LEAST_TWO, AT_LEAST_THREE ... , the possible recursive call\n        // from the tryInRepetitionRecovery(...) will only happen IFF there really are TWO/THREE/.... items.\n        // Performance optimization: \"attemptInRepetitionRecovery\" will be defined as NOOP unless recovery is enabled\n        this.attemptInRepetitionRecovery(this.atLeastOneInternal, [prodOccurrence, actionORMethodDef], lookAheadFunc, keys_1.AT_LEAST_ONE_IDX, prodOccurrence, interpreter_1.NextTerminalAfterAtLeastOneWalker);\n    };\n    RecognizerEngine.prototype.atLeastOneSepFirstInternal = function (prodOccurrence, options) {\n        var laKey = this.getKeyForAutomaticLookahead(keys_1.AT_LEAST_ONE_SEP_IDX, prodOccurrence);\n        this.atLeastOneSepFirstInternalLogic(prodOccurrence, options, laKey);\n    };\n    RecognizerEngine.prototype.atLeastOneSepFirstInternalLogic = function (prodOccurrence, options, key) {\n        var _this = this;\n        var action = options.DEF;\n        var separator = options.SEP;\n        var firstIterationLookaheadFunc = this.getLaFuncFromCache(key);\n        // 1st iteration\n        if (firstIterationLookaheadFunc.call(this) === true) {\n            ;\n            action.call(this);\n            //  TODO: Optimization can move this function construction into \"attemptInRepetitionRecovery\"\n            //  because it is only needed in error recovery scenarios.\n            var separatorLookAheadFunc = function () {\n                return _this.tokenMatcher(_this.LA(1), separator);\n            };\n            // 2nd..nth iterations\n            while (this.tokenMatcher(this.LA(1), separator) === true) {\n                // note that this CONSUME will never enter recovery because\n                // the separatorLookAheadFunc checks that the separator really does exist.\n                this.CONSUME(separator);\n                action.call(this);\n            }\n            // Performance optimization: \"attemptInRepetitionRecovery\" will be defined as NOOP unless recovery is enabled\n            this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal, [\n                prodOccurrence,\n                separator,\n                separatorLookAheadFunc,\n                action,\n                interpreter_1.NextTerminalAfterAtLeastOneSepWalker\n            ], separatorLookAheadFunc, keys_1.AT_LEAST_ONE_SEP_IDX, prodOccurrence, interpreter_1.NextTerminalAfterAtLeastOneSepWalker);\n        }\n        else {\n            throw this.raiseEarlyExitException(prodOccurrence, lookahead_1.PROD_TYPE.REPETITION_MANDATORY_WITH_SEPARATOR, options.ERR_MSG);\n        }\n    };\n    RecognizerEngine.prototype.manyInternal = function (prodOccurrence, actionORMethodDef) {\n        var laKey = this.getKeyForAutomaticLookahead(keys_1.MANY_IDX, prodOccurrence);\n        return this.manyInternalLogic(prodOccurrence, actionORMethodDef, laKey);\n    };\n    RecognizerEngine.prototype.manyInternalLogic = function (prodOccurrence, actionORMethodDef, key) {\n        var _this = this;\n        var lookaheadFunction = this.getLaFuncFromCache(key);\n        var action;\n        if (typeof actionORMethodDef !== \"function\") {\n            action = actionORMethodDef.DEF;\n            var predicate_3 = actionORMethodDef.GATE;\n            // predicate present\n            if (predicate_3 !== undefined) {\n                var orgLookaheadFunction_3 = lookaheadFunction;\n                lookaheadFunction = function () {\n                    return predicate_3.call(_this) && orgLookaheadFunction_3.call(_this);\n                };\n            }\n        }\n        else {\n            action = actionORMethodDef;\n        }\n        var notStuck = true;\n        while (lookaheadFunction.call(this) === true && notStuck === true) {\n            notStuck = this.doSingleRepetition(action);\n        }\n        // Performance optimization: \"attemptInRepetitionRecovery\" will be defined as NOOP unless recovery is enabled\n        this.attemptInRepetitionRecovery(this.manyInternal, [prodOccurrence, actionORMethodDef], lookaheadFunction, keys_1.MANY_IDX, prodOccurrence, interpreter_1.NextTerminalAfterManyWalker, \n        // The notStuck parameter is only relevant when \"attemptInRepetitionRecovery\"\n        // is invoked from manyInternal, in the MANY_SEP case and AT_LEAST_ONE[_SEP]\n        // An infinite loop cannot occur as:\n        // - Either the lookahead is guaranteed to consume something (Single Token Separator)\n        // - AT_LEAST_ONE by definition is guaranteed to consume something (or error out).\n        notStuck);\n    };\n    RecognizerEngine.prototype.manySepFirstInternal = function (prodOccurrence, options) {\n        var laKey = this.getKeyForAutomaticLookahead(keys_1.MANY_SEP_IDX, prodOccurrence);\n        this.manySepFirstInternalLogic(prodOccurrence, options, laKey);\n    };\n    RecognizerEngine.prototype.manySepFirstInternalLogic = function (prodOccurrence, options, key) {\n        var _this = this;\n        var action = options.DEF;\n        var separator = options.SEP;\n        var firstIterationLaFunc = this.getLaFuncFromCache(key);\n        // 1st iteration\n        if (firstIterationLaFunc.call(this) === true) {\n            action.call(this);\n            var separatorLookAheadFunc = function () {\n                return _this.tokenMatcher(_this.LA(1), separator);\n            };\n            // 2nd..nth iterations\n            while (this.tokenMatcher(this.LA(1), separator) === true) {\n                // note that this CONSUME will never enter recovery because\n                // the separatorLookAheadFunc checks that the separator really does exist.\n                this.CONSUME(separator);\n                // No need for checking infinite loop here due to consuming the separator.\n                action.call(this);\n            }\n            // Performance optimization: \"attemptInRepetitionRecovery\" will be defined as NOOP unless recovery is enabled\n            this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal, [\n                prodOccurrence,\n                separator,\n                separatorLookAheadFunc,\n                action,\n                interpreter_1.NextTerminalAfterManySepWalker\n            ], separatorLookAheadFunc, keys_1.MANY_SEP_IDX, prodOccurrence, interpreter_1.NextTerminalAfterManySepWalker);\n        }\n    };\n    RecognizerEngine.prototype.repetitionSepSecondInternal = function (prodOccurrence, separator, separatorLookAheadFunc, action, nextTerminalAfterWalker) {\n        while (separatorLookAheadFunc()) {\n            // note that this CONSUME will never enter recovery because\n            // the separatorLookAheadFunc checks that the separator really does exist.\n            this.CONSUME(separator);\n            action.call(this);\n        }\n        // we can only arrive to this function after an error\n        // has occurred (hence the name 'second') so the following\n        // IF will always be entered, its possible to remove it...\n        // however it is kept to avoid confusion and be consistent.\n        // Performance optimization: \"attemptInRepetitionRecovery\" will be defined as NOOP unless recovery is enabled\n        /* istanbul ignore else */\n        this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal, [\n            prodOccurrence,\n            separator,\n            separatorLookAheadFunc,\n            action,\n            nextTerminalAfterWalker\n        ], separatorLookAheadFunc, keys_1.AT_LEAST_ONE_SEP_IDX, prodOccurrence, nextTerminalAfterWalker);\n    };\n    RecognizerEngine.prototype.doSingleRepetition = function (action) {\n        var beforeIteration = this.getLexerPosition();\n        action.call(this);\n        var afterIteration = this.getLexerPosition();\n        // This boolean will indicate if this repetition progressed\n        // or if we are \"stuck\" (potential infinite loop in the repetition).\n        return afterIteration > beforeIteration;\n    };\n    RecognizerEngine.prototype.orInternal = function (altsOrOpts, occurrence) {\n        var laKey = this.getKeyForAutomaticLookahead(keys_1.OR_IDX, occurrence);\n        var alts = (0, isArray_1.default)(altsOrOpts) ? altsOrOpts : altsOrOpts.DEF;\n        var laFunc = this.getLaFuncFromCache(laKey);\n        var altIdxToTake = laFunc.call(this, alts);\n        if (altIdxToTake !== undefined) {\n            var chosenAlternative = alts[altIdxToTake];\n            return chosenAlternative.ALT.call(this);\n        }\n        this.raiseNoAltException(occurrence, altsOrOpts.ERR_MSG);\n    };\n    RecognizerEngine.prototype.ruleFinallyStateUpdate = function () {\n        this.RULE_STACK.pop();\n        this.RULE_OCCURRENCE_STACK.pop();\n        // NOOP when cst is disabled\n        this.cstFinallyStateUpdate();\n        if (this.RULE_STACK.length === 0 && this.isAtEndOfInput() === false) {\n            var firstRedundantTok = this.LA(1);\n            var errMsg = this.errorMessageProvider.buildNotAllInputParsedMessage({\n                firstRedundant: firstRedundantTok,\n                ruleName: this.getCurrRuleFullName()\n            });\n            this.SAVE_ERROR(new exceptions_public_1.NotAllInputParsedException(errMsg, firstRedundantTok));\n        }\n    };\n    RecognizerEngine.prototype.subruleInternal = function (ruleToCall, idx, options) {\n        var ruleResult;\n        try {\n            var args = options !== undefined ? options.ARGS : undefined;\n            this.subruleIdx = idx;\n            ruleResult = ruleToCall.apply(this, args);\n            this.cstPostNonTerminal(ruleResult, options !== undefined && options.LABEL !== undefined\n                ? options.LABEL\n                : ruleToCall.ruleName);\n            return ruleResult;\n        }\n        catch (e) {\n            throw this.subruleInternalError(e, options, ruleToCall.ruleName);\n        }\n    };\n    RecognizerEngine.prototype.subruleInternalError = function (e, options, ruleName) {\n        if ((0, exceptions_public_1.isRecognitionException)(e) && e.partialCstResult !== undefined) {\n            this.cstPostNonTerminal(e.partialCstResult, options !== undefined && options.LABEL !== undefined\n                ? options.LABEL\n                : ruleName);\n            delete e.partialCstResult;\n        }\n        throw e;\n    };\n    RecognizerEngine.prototype.consumeInternal = function (tokType, idx, options) {\n        var consumedToken;\n        try {\n            var nextToken = this.LA(1);\n            if (this.tokenMatcher(nextToken, tokType) === true) {\n                this.consumeToken();\n                consumedToken = nextToken;\n            }\n            else {\n                this.consumeInternalError(tokType, nextToken, options);\n            }\n        }\n        catch (eFromConsumption) {\n            consumedToken = this.consumeInternalRecovery(tokType, idx, eFromConsumption);\n        }\n        this.cstPostTerminal(options !== undefined && options.LABEL !== undefined\n            ? options.LABEL\n            : tokType.name, consumedToken);\n        return consumedToken;\n    };\n    RecognizerEngine.prototype.consumeInternalError = function (tokType, nextToken, options) {\n        var msg;\n        var previousToken = this.LA(0);\n        if (options !== undefined && options.ERR_MSG) {\n            msg = options.ERR_MSG;\n        }\n        else {\n            msg = this.errorMessageProvider.buildMismatchTokenMessage({\n                expected: tokType,\n                actual: nextToken,\n                previous: previousToken,\n                ruleName: this.getCurrRuleFullName()\n            });\n        }\n        throw this.SAVE_ERROR(new exceptions_public_1.MismatchedTokenException(msg, nextToken, previousToken));\n    };\n    RecognizerEngine.prototype.consumeInternalRecovery = function (tokType, idx, eFromConsumption) {\n        // no recovery allowed during backtracking, otherwise backtracking may recover invalid syntax and accept it\n        // but the original syntax could have been parsed successfully without any backtracking + recovery\n        if (this.recoveryEnabled &&\n            // TODO: more robust checking of the exception type. Perhaps Typescript extending expressions?\n            eFromConsumption.name === \"MismatchedTokenException\" &&\n            !this.isBackTracking()) {\n            var follows = this.getFollowsForInRuleRecovery(tokType, idx);\n            try {\n                return this.tryInRuleRecovery(tokType, follows);\n            }\n            catch (eFromInRuleRecovery) {\n                if (eFromInRuleRecovery.name === recoverable_1.IN_RULE_RECOVERY_EXCEPTION) {\n                    // failed in RuleRecovery.\n                    // throw the original error in order to trigger reSync error recovery\n                    throw eFromConsumption;\n                }\n                else {\n                    throw eFromInRuleRecovery;\n                }\n            }\n        }\n        else {\n            throw eFromConsumption;\n        }\n    };\n    RecognizerEngine.prototype.saveRecogState = function () {\n        // errors is a getter which will clone the errors array\n        var savedErrors = this.errors;\n        var savedRuleStack = (0, clone_1.default)(this.RULE_STACK);\n        return {\n            errors: savedErrors,\n            lexerState: this.exportLexerState(),\n            RULE_STACK: savedRuleStack,\n            CST_STACK: this.CST_STACK\n        };\n    };\n    RecognizerEngine.prototype.reloadRecogState = function (newState) {\n        this.errors = newState.errors;\n        this.importLexerState(newState.lexerState);\n        this.RULE_STACK = newState.RULE_STACK;\n    };\n    RecognizerEngine.prototype.ruleInvocationStateUpdate = function (shortName, fullName, idxInCallingRule) {\n        this.RULE_OCCURRENCE_STACK.push(idxInCallingRule);\n        this.RULE_STACK.push(shortName);\n        // NOOP when cst is disabled\n        this.cstInvocationStateUpdate(fullName);\n    };\n    RecognizerEngine.prototype.isBackTracking = function () {\n        return this.isBackTrackingStack.length !== 0;\n    };\n    RecognizerEngine.prototype.getCurrRuleFullName = function () {\n        var shortName = this.getLastExplicitRuleShortName();\n        return this.shortRuleNameToFull[shortName];\n    };\n    RecognizerEngine.prototype.shortRuleNameToFullName = function (shortName) {\n        return this.shortRuleNameToFull[shortName];\n    };\n    RecognizerEngine.prototype.isAtEndOfInput = function () {\n        return this.tokenMatcher(this.LA(1), tokens_public_1.EOF);\n    };\n    RecognizerEngine.prototype.reset = function () {\n        this.resetLexerState();\n        this.subruleIdx = 0;\n        this.isBackTrackingStack = [];\n        this.errors = [];\n        this.RULE_STACK = [];\n        // TODO: extract a specific reset for TreeBuilder trait\n        this.CST_STACK = [];\n        this.RULE_OCCURRENCE_STACK = [];\n    };\n    return RecognizerEngine;\n}());\nexports.RecognizerEngine = RecognizerEngine;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ErrorHandler = void 0;\nvar exceptions_public_1 = require(\"../../exceptions_public\");\nvar has_1 = __importDefault(require(\"lodash/has\"));\nvar clone_1 = __importDefault(require(\"lodash/clone\"));\nvar lookahead_1 = require(\"../../grammar/lookahead\");\nvar parser_1 = require(\"../parser\");\n/**\n * Trait responsible for runtime parsing errors.\n */\nvar ErrorHandler = /** @class */ (function () {\n    function ErrorHandler() {\n    }\n    ErrorHandler.prototype.initErrorHandler = function (config) {\n        this._errors = [];\n        this.errorMessageProvider = (0, has_1.default)(config, \"errorMessageProvider\")\n            ? config.errorMessageProvider // assumes end user provides the correct config value/type\n            : parser_1.DEFAULT_PARSER_CONFIG.errorMessageProvider;\n    };\n    ErrorHandler.prototype.SAVE_ERROR = function (error) {\n        if ((0, exceptions_public_1.isRecognitionException)(error)) {\n            error.context = {\n                ruleStack: this.getHumanReadableRuleStack(),\n                ruleOccurrenceStack: (0, clone_1.default)(this.RULE_OCCURRENCE_STACK)\n            };\n            this._errors.push(error);\n            return error;\n        }\n        else {\n            throw Error(\"Trying to save an Error which is not a RecognitionException\");\n        }\n    };\n    Object.defineProperty(ErrorHandler.prototype, \"errors\", {\n        get: function () {\n            return (0, clone_1.default)(this._errors);\n        },\n        set: function (newErrors) {\n            this._errors = newErrors;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    // TODO: consider caching the error message computed information\n    ErrorHandler.prototype.raiseEarlyExitException = function (occurrence, prodType, userDefinedErrMsg) {\n        var ruleName = this.getCurrRuleFullName();\n        var ruleGrammar = this.getGAstProductions()[ruleName];\n        var lookAheadPathsPerAlternative = (0, lookahead_1.getLookaheadPathsForOptionalProd)(occurrence, ruleGrammar, prodType, this.maxLookahead);\n        var insideProdPaths = lookAheadPathsPerAlternative[0];\n        var actualTokens = [];\n        for (var i = 1; i <= this.maxLookahead; i++) {\n            actualTokens.push(this.LA(i));\n        }\n        var msg = this.errorMessageProvider.buildEarlyExitMessage({\n            expectedIterationPaths: insideProdPaths,\n            actual: actualTokens,\n            previous: this.LA(0),\n            customUserDescription: userDefinedErrMsg,\n            ruleName: ruleName\n        });\n        throw this.SAVE_ERROR(new exceptions_public_1.EarlyExitException(msg, this.LA(1), this.LA(0)));\n    };\n    // TODO: consider caching the error message computed information\n    ErrorHandler.prototype.raiseNoAltException = function (occurrence, errMsgTypes) {\n        var ruleName = this.getCurrRuleFullName();\n        var ruleGrammar = this.getGAstProductions()[ruleName];\n        // TODO: getLookaheadPathsForOr can be slow for large enough maxLookahead and certain grammars, consider caching ?\n        var lookAheadPathsPerAlternative = (0, lookahead_1.getLookaheadPathsForOr)(occurrence, ruleGrammar, this.maxLookahead);\n        var actualTokens = [];\n        for (var i = 1; i <= this.maxLookahead; i++) {\n            actualTokens.push(this.LA(i));\n        }\n        var previousToken = this.LA(0);\n        var errMsg = this.errorMessageProvider.buildNoViableAltMessage({\n            expectedPathsPerAlt: lookAheadPathsPerAlternative,\n            actual: actualTokens,\n            previous: previousToken,\n            customUserDescription: errMsgTypes,\n            ruleName: this.getCurrRuleFullName()\n        });\n        throw this.SAVE_ERROR(new exceptions_public_1.NoViableAltException(errMsg, this.LA(1), previousToken));\n    };\n    return ErrorHandler;\n}());\nexports.ErrorHandler = ErrorHandler;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ContentAssist = void 0;\nvar interpreter_1 = require(\"../../grammar/interpreter\");\nvar first_1 = __importDefault(require(\"lodash/first\"));\nvar isUndefined_1 = __importDefault(require(\"lodash/isUndefined\"));\nvar ContentAssist = /** @class */ (function () {\n    function ContentAssist() {\n    }\n    ContentAssist.prototype.initContentAssist = function () { };\n    ContentAssist.prototype.computeContentAssist = function (startRuleName, precedingInput) {\n        var startRuleGast = this.gastProductionsCache[startRuleName];\n        if ((0, isUndefined_1.default)(startRuleGast)) {\n            throw Error(\"Rule ->\".concat(startRuleName, \"<- does not exist in this grammar.\"));\n        }\n        return (0, interpreter_1.nextPossibleTokensAfter)([startRuleGast], precedingInput, this.tokenMatcher, this.maxLookahead);\n    };\n    // TODO: should this be a member method or a utility? it does not have any state or usage of 'this'...\n    // TODO: should this be more explicitly part of the public API?\n    ContentAssist.prototype.getNextPossibleTokenTypes = function (grammarPath) {\n        var topRuleName = (0, first_1.default)(grammarPath.ruleStack);\n        var gastProductions = this.getGAstProductions();\n        var topProduction = gastProductions[topRuleName];\n        var nextPossibleTokenTypes = new interpreter_1.NextAfterTokenWalker(topProduction, grammarPath).startWalking();\n        return nextPossibleTokenTypes;\n    };\n    return ContentAssist;\n}());\nexports.ContentAssist = ContentAssist;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.GastRecorder = void 0;\nvar last_1 = __importDefault(require(\"lodash/last\"));\nvar isArray_1 = __importDefault(require(\"lodash/isArray\"));\nvar some_1 = __importDefault(require(\"lodash/some\"));\nvar forEach_1 = __importDefault(require(\"lodash/forEach\"));\nvar isFunction_1 = __importDefault(require(\"lodash/isFunction\"));\nvar has_1 = __importDefault(require(\"lodash/has\"));\nvar gast_1 = require(\"@chevrotain/gast\");\nvar lexer_public_1 = require(\"../../../scan/lexer_public\");\nvar tokens_1 = require(\"../../../scan/tokens\");\nvar tokens_public_1 = require(\"../../../scan/tokens_public\");\nvar parser_1 = require(\"../parser\");\nvar keys_1 = require(\"../../grammar/keys\");\nvar RECORDING_NULL_OBJECT = {\n    description: \"This Object indicates the Parser is during Recording Phase\"\n};\nObject.freeze(RECORDING_NULL_OBJECT);\nvar HANDLE_SEPARATOR = true;\nvar MAX_METHOD_IDX = Math.pow(2, keys_1.BITS_FOR_OCCURRENCE_IDX) - 1;\nvar RFT = (0, tokens_public_1.createToken)({ name: \"RECORDING_PHASE_TOKEN\", pattern: lexer_public_1.Lexer.NA });\n(0, tokens_1.augmentTokenTypes)([RFT]);\nvar RECORDING_PHASE_TOKEN = (0, tokens_public_1.createTokenInstance)(RFT, \"This IToken indicates the Parser is in Recording Phase\\n\\t\" +\n    \"\" +\n    \"See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details\", \n// Using \"-1\" instead of NaN (as in EOF) because an actual number is less likely to\n// cause errors if the output of LA or CONSUME would be (incorrectly) used during the recording phase.\n-1, -1, -1, -1, -1, -1);\nObject.freeze(RECORDING_PHASE_TOKEN);\nvar RECORDING_PHASE_CSTNODE = {\n    name: \"This CSTNode indicates the Parser is in Recording Phase\\n\\t\" +\n        \"See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details\",\n    children: {}\n};\n/**\n * This trait handles the creation of the GAST structure for Chevrotain Grammars\n */\nvar GastRecorder = /** @class */ (function () {\n    function GastRecorder() {\n    }\n    GastRecorder.prototype.initGastRecorder = function (config) {\n        this.recordingProdStack = [];\n        this.RECORDING_PHASE = false;\n    };\n    GastRecorder.prototype.enableRecording = function () {\n        var _this = this;\n        this.RECORDING_PHASE = true;\n        this.TRACE_INIT(\"Enable Recording\", function () {\n            var _loop_1 = function (i) {\n                var idx = i > 0 ? i : \"\";\n                _this[\"CONSUME\".concat(idx)] = function (arg1, arg2) {\n                    return this.consumeInternalRecord(arg1, i, arg2);\n                };\n                _this[\"SUBRULE\".concat(idx)] = function (arg1, arg2) {\n                    return this.subruleInternalRecord(arg1, i, arg2);\n                };\n                _this[\"OPTION\".concat(idx)] = function (arg1) {\n                    return this.optionInternalRecord(arg1, i);\n                };\n                _this[\"OR\".concat(idx)] = function (arg1) {\n                    return this.orInternalRecord(arg1, i);\n                };\n                _this[\"MANY\".concat(idx)] = function (arg1) {\n                    this.manyInternalRecord(i, arg1);\n                };\n                _this[\"MANY_SEP\".concat(idx)] = function (arg1) {\n                    this.manySepFirstInternalRecord(i, arg1);\n                };\n                _this[\"AT_LEAST_ONE\".concat(idx)] = function (arg1) {\n                    this.atLeastOneInternalRecord(i, arg1);\n                };\n                _this[\"AT_LEAST_ONE_SEP\".concat(idx)] = function (arg1) {\n                    this.atLeastOneSepFirstInternalRecord(i, arg1);\n                };\n            };\n            /**\n             * Warning Dark Voodoo Magic upcoming!\n             * We are \"replacing\" the public parsing DSL methods API\n             * With **new** alternative implementations on the Parser **instance**\n             *\n             * So far this is the only way I've found to avoid performance regressions during parsing time.\n             * - Approx 30% performance regression was measured on Chrome 75 Canary when attempting to replace the \"internal\"\n             *   implementations directly instead.\n             */\n            for (var i = 0; i < 10; i++) {\n                _loop_1(i);\n            }\n            // DSL methods with the idx(suffix) as an argument\n            _this[\"consume\"] = function (idx, arg1, arg2) {\n                return this.consumeInternalRecord(arg1, idx, arg2);\n            };\n            _this[\"subrule\"] = function (idx, arg1, arg2) {\n                return this.subruleInternalRecord(arg1, idx, arg2);\n            };\n            _this[\"option\"] = function (idx, arg1) {\n                return this.optionInternalRecord(arg1, idx);\n            };\n            _this[\"or\"] = function (idx, arg1) {\n                return this.orInternalRecord(arg1, idx);\n            };\n            _this[\"many\"] = function (idx, arg1) {\n                this.manyInternalRecord(idx, arg1);\n            };\n            _this[\"atLeastOne\"] = function (idx, arg1) {\n                this.atLeastOneInternalRecord(idx, arg1);\n            };\n            _this.ACTION = _this.ACTION_RECORD;\n            _this.BACKTRACK = _this.BACKTRACK_RECORD;\n            _this.LA = _this.LA_RECORD;\n        });\n    };\n    GastRecorder.prototype.disableRecording = function () {\n        var _this = this;\n        this.RECORDING_PHASE = false;\n        // By deleting these **instance** properties, any future invocation\n        // will be deferred to the original methods on the **prototype** object\n        // This seems to get rid of any incorrect optimizations that V8 may\n        // do during the recording phase.\n        this.TRACE_INIT(\"Deleting Recording methods\", function () {\n            var that = _this;\n            for (var i = 0; i < 10; i++) {\n                var idx = i > 0 ? i : \"\";\n                delete that[\"CONSUME\".concat(idx)];\n                delete that[\"SUBRULE\".concat(idx)];\n                delete that[\"OPTION\".concat(idx)];\n                delete that[\"OR\".concat(idx)];\n                delete that[\"MANY\".concat(idx)];\n                delete that[\"MANY_SEP\".concat(idx)];\n                delete that[\"AT_LEAST_ONE\".concat(idx)];\n                delete that[\"AT_LEAST_ONE_SEP\".concat(idx)];\n            }\n            delete that[\"consume\"];\n            delete that[\"subrule\"];\n            delete that[\"option\"];\n            delete that[\"or\"];\n            delete that[\"many\"];\n            delete that[\"atLeastOne\"];\n            delete that.ACTION;\n            delete that.BACKTRACK;\n            delete that.LA;\n        });\n    };\n    //   Parser methods are called inside an ACTION?\n    //   Maybe try/catch/finally on ACTIONS while disabling the recorders state changes?\n    // @ts-expect-error -- noop place holder\n    GastRecorder.prototype.ACTION_RECORD = function (impl) {\n        // NO-OP during recording\n    };\n    // Executing backtracking logic will break our recording logic assumptions\n    GastRecorder.prototype.BACKTRACK_RECORD = function (grammarRule, args) {\n        return function () { return true; };\n    };\n    // LA is part of the official API and may be used for custom lookahead logic\n    // by end users who may forget to wrap it in ACTION or inside a GATE\n    GastRecorder.prototype.LA_RECORD = function (howMuch) {\n        // We cannot use the RECORD_PHASE_TOKEN here because someone may depend\n        // On LA return EOF at the end of the input so an infinite loop may occur.\n        return parser_1.END_OF_FILE;\n    };\n    GastRecorder.prototype.topLevelRuleRecord = function (name, def) {\n        try {\n            var newTopLevelRule = new gast_1.Rule({ definition: [], name: name });\n            newTopLevelRule.name = name;\n            this.recordingProdStack.push(newTopLevelRule);\n            def.call(this);\n            this.recordingProdStack.pop();\n            return newTopLevelRule;\n        }\n        catch (originalError) {\n            if (originalError.KNOWN_RECORDER_ERROR !== true) {\n                try {\n                    originalError.message =\n                        originalError.message +\n                            '\\n\\t This error was thrown during the \"grammar recording phase\" For more info see:\\n\\t' +\n                            \"https://chevrotain.io/docs/guide/internals.html#grammar-recording\";\n                }\n                catch (mutabilityError) {\n                    // We may not be able to modify the original error object\n                    throw originalError;\n                }\n            }\n            throw originalError;\n        }\n    };\n    // Implementation of parsing DSL\n    GastRecorder.prototype.optionInternalRecord = function (actionORMethodDef, occurrence) {\n        return recordProd.call(this, gast_1.Option, actionORMethodDef, occurrence);\n    };\n    GastRecorder.prototype.atLeastOneInternalRecord = function (occurrence, actionORMethodDef) {\n        recordProd.call(this, gast_1.RepetitionMandatory, actionORMethodDef, occurrence);\n    };\n    GastRecorder.prototype.atLeastOneSepFirstInternalRecord = function (occurrence, options) {\n        recordProd.call(this, gast_1.RepetitionMandatoryWithSeparator, options, occurrence, HANDLE_SEPARATOR);\n    };\n    GastRecorder.prototype.manyInternalRecord = function (occurrence, actionORMethodDef) {\n        recordProd.call(this, gast_1.Repetition, actionORMethodDef, occurrence);\n    };\n    GastRecorder.prototype.manySepFirstInternalRecord = function (occurrence, options) {\n        recordProd.call(this, gast_1.RepetitionWithSeparator, options, occurrence, HANDLE_SEPARATOR);\n    };\n    GastRecorder.prototype.orInternalRecord = function (altsOrOpts, occurrence) {\n        return recordOrProd.call(this, altsOrOpts, occurrence);\n    };\n    GastRecorder.prototype.subruleInternalRecord = function (ruleToCall, occurrence, options) {\n        assertMethodIdxIsValid(occurrence);\n        if (!ruleToCall || (0, has_1.default)(ruleToCall, \"ruleName\") === false) {\n            var error = new Error(\"<SUBRULE\".concat(getIdxSuffix(occurrence), \"> argument is invalid\") +\n                \" expecting a Parser method reference but got: <\".concat(JSON.stringify(ruleToCall), \">\") +\n                \"\\n inside top level rule: <\".concat(this.recordingProdStack[0].name, \">\"));\n            error.KNOWN_RECORDER_ERROR = true;\n            throw error;\n        }\n        var prevProd = (0, last_1.default)(this.recordingProdStack);\n        var ruleName = ruleToCall.ruleName;\n        var newNoneTerminal = new gast_1.NonTerminal({\n            idx: occurrence,\n            nonTerminalName: ruleName,\n            label: options === null || options === void 0 ? void 0 : options.LABEL,\n            // The resolving of the `referencedRule` property will be done once all the Rule's GASTs have been created\n            referencedRule: undefined\n        });\n        prevProd.definition.push(newNoneTerminal);\n        return this.outputCst ? RECORDING_PHASE_CSTNODE : RECORDING_NULL_OBJECT;\n    };\n    GastRecorder.prototype.consumeInternalRecord = function (tokType, occurrence, options) {\n        assertMethodIdxIsValid(occurrence);\n        if (!(0, tokens_1.hasShortKeyProperty)(tokType)) {\n            var error = new Error(\"<CONSUME\".concat(getIdxSuffix(occurrence), \"> argument is invalid\") +\n                \" expecting a TokenType reference but got: <\".concat(JSON.stringify(tokType), \">\") +\n                \"\\n inside top level rule: <\".concat(this.recordingProdStack[0].name, \">\"));\n            error.KNOWN_RECORDER_ERROR = true;\n            throw error;\n        }\n        var prevProd = (0, last_1.default)(this.recordingProdStack);\n        var newNoneTerminal = new gast_1.Terminal({\n            idx: occurrence,\n            terminalType: tokType,\n            label: options === null || options === void 0 ? void 0 : options.LABEL\n        });\n        prevProd.definition.push(newNoneTerminal);\n        return RECORDING_PHASE_TOKEN;\n    };\n    return GastRecorder;\n}());\nexports.GastRecorder = GastRecorder;\nfunction recordProd(prodConstructor, mainProdArg, occurrence, handleSep) {\n    if (handleSep === void 0) { handleSep = false; }\n    assertMethodIdxIsValid(occurrence);\n    var prevProd = (0, last_1.default)(this.recordingProdStack);\n    var grammarAction = (0, isFunction_1.default)(mainProdArg) ? mainProdArg : mainProdArg.DEF;\n    var newProd = new prodConstructor({ definition: [], idx: occurrence });\n    if (handleSep) {\n        newProd.separator = mainProdArg.SEP;\n    }\n    if ((0, has_1.default)(mainProdArg, \"MAX_LOOKAHEAD\")) {\n        newProd.maxLookahead = mainProdArg.MAX_LOOKAHEAD;\n    }\n    this.recordingProdStack.push(newProd);\n    grammarAction.call(this);\n    prevProd.definition.push(newProd);\n    this.recordingProdStack.pop();\n    return RECORDING_NULL_OBJECT;\n}\nfunction recordOrProd(mainProdArg, occurrence) {\n    var _this = this;\n    assertMethodIdxIsValid(occurrence);\n    var prevProd = (0, last_1.default)(this.recordingProdStack);\n    // Only an array of alternatives\n    var hasOptions = (0, isArray_1.default)(mainProdArg) === false;\n    var alts = hasOptions === false ? mainProdArg : mainProdArg.DEF;\n    var newOrProd = new gast_1.Alternation({\n        definition: [],\n        idx: occurrence,\n        ignoreAmbiguities: hasOptions && mainProdArg.IGNORE_AMBIGUITIES === true\n    });\n    if ((0, has_1.default)(mainProdArg, \"MAX_LOOKAHEAD\")) {\n        newOrProd.maxLookahead = mainProdArg.MAX_LOOKAHEAD;\n    }\n    var hasPredicates = (0, some_1.default)(alts, function (currAlt) { return (0, isFunction_1.default)(currAlt.GATE); });\n    newOrProd.hasPredicates = hasPredicates;\n    prevProd.definition.push(newOrProd);\n    (0, forEach_1.default)(alts, function (currAlt) {\n        var currAltFlat = new gast_1.Alternative({ definition: [] });\n        newOrProd.definition.push(currAltFlat);\n        if ((0, has_1.default)(currAlt, \"IGNORE_AMBIGUITIES\")) {\n            currAltFlat.ignoreAmbiguities = currAlt.IGNORE_AMBIGUITIES; // assumes end user provides the correct config value/type\n        }\n        // **implicit** ignoreAmbiguities due to usage of gate\n        else if ((0, has_1.default)(currAlt, \"GATE\")) {\n            currAltFlat.ignoreAmbiguities = true;\n        }\n        _this.recordingProdStack.push(currAltFlat);\n        currAlt.ALT.call(_this);\n        _this.recordingProdStack.pop();\n    });\n    return RECORDING_NULL_OBJECT;\n}\nfunction getIdxSuffix(idx) {\n    return idx === 0 ? \"\" : \"\".concat(idx);\n}\nfunction assertMethodIdxIsValid(idx) {\n    if (idx < 0 || idx > MAX_METHOD_IDX) {\n        var error = new Error(\n        // The stack trace will contain all the needed details\n        \"Invalid DSL Method idx value: <\".concat(idx, \">\\n\\t\") +\n            \"Idx value must be a none negative value smaller than \".concat(MAX_METHOD_IDX + 1));\n        error.KNOWN_RECORDER_ERROR = true;\n        throw error;\n    }\n}\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PerformanceTracer = void 0;\nvar has_1 = __importDefault(require(\"lodash/has\"));\nvar utils_1 = require(\"@chevrotain/utils\");\nvar parser_1 = require(\"../parser\");\n/**\n * Trait responsible for runtime parsing errors.\n */\nvar PerformanceTracer = /** @class */ (function () {\n    function PerformanceTracer() {\n    }\n    PerformanceTracer.prototype.initPerformanceTracer = function (config) {\n        if ((0, has_1.default)(config, \"traceInitPerf\")) {\n            var userTraceInitPerf = config.traceInitPerf;\n            var traceIsNumber = typeof userTraceInitPerf === \"number\";\n            this.traceInitMaxIdent = traceIsNumber\n                ? userTraceInitPerf\n                : Infinity;\n            this.traceInitPerf = traceIsNumber\n                ? userTraceInitPerf > 0\n                : userTraceInitPerf; // assumes end user provides the correct config value/type\n        }\n        else {\n            this.traceInitMaxIdent = 0;\n            this.traceInitPerf = parser_1.DEFAULT_PARSER_CONFIG.traceInitPerf;\n        }\n        this.traceInitIndent = -1;\n    };\n    PerformanceTracer.prototype.TRACE_INIT = function (phaseDesc, phaseImpl) {\n        // No need to optimize this using NOOP pattern because\n        // It is not called in a hot spot...\n        if (this.traceInitPerf === true) {\n            this.traceInitIndent++;\n            var indent = new Array(this.traceInitIndent + 1).join(\"\\t\");\n            if (this.traceInitIndent < this.traceInitMaxIdent) {\n                console.log(\"\".concat(indent, \"--> <\").concat(phaseDesc, \">\"));\n            }\n            var _a = (0, utils_1.timer)(phaseImpl), time = _a.time, value = _a.value;\n            /* istanbul ignore next - Difficult to reproduce specific performance behavior (>10ms) in tests */\n            var traceMethod = time > 10 ? console.warn : console.log;\n            if (this.traceInitIndent < this.traceInitMaxIdent) {\n                traceMethod(\"\".concat(indent, \"<-- <\").concat(phaseDesc, \"> time: \").concat(time, \"ms\"));\n            }\n            this.traceInitIndent--;\n            return value;\n        }\n        else {\n            return phaseImpl();\n        }\n    };\n    return PerformanceTracer;\n}());\nexports.PerformanceTracer = PerformanceTracer;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.applyMixins = void 0;\nfunction applyMixins(derivedCtor, baseCtors) {\n    baseCtors.forEach(function (baseCtor) {\n        var baseProto = baseCtor.prototype;\n        Object.getOwnPropertyNames(baseProto).forEach(function (propName) {\n            if (propName === \"constructor\") {\n                return;\n            }\n            var basePropDescriptor = Object.getOwnPropertyDescriptor(baseProto, propName);\n            // Handle Accessors\n            if (basePropDescriptor &&\n                (basePropDescriptor.get || basePropDescriptor.set)) {\n                Object.defineProperty(derivedCtor.prototype, propName, basePropDescriptor);\n            }\n            else {\n                derivedCtor.prototype[propName] = baseCtor.prototype[propName];\n            }\n        });\n    });\n}\nexports.applyMixins = applyMixins;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.generateCstDts = void 0;\nvar model_1 = require(\"./model\");\nvar generate_1 = require(\"./generate\");\nvar defaultOptions = {\n    includeVisitorInterface: true,\n    visitorInterfaceName: \"ICstNodeVisitor\"\n};\nfunction generateCstDts(productions, options) {\n    var effectiveOptions = __assign(__assign({}, defaultOptions), options);\n    var model = (0, model_1.buildModel)(productions);\n    return (0, generate_1.genDts)(model, effectiveOptions);\n}\nexports.generateCstDts = generateCstDts;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.buildModel = void 0;\nvar gast_1 = require(\"@chevrotain/gast\");\nvar map_1 = __importDefault(require(\"lodash/map\"));\nvar flatten_1 = __importDefault(require(\"lodash/flatten\"));\nvar values_1 = __importDefault(require(\"lodash/values\"));\nvar some_1 = __importDefault(require(\"lodash/some\"));\nvar groupBy_1 = __importDefault(require(\"lodash/groupBy\"));\nvar assign_1 = __importDefault(require(\"lodash/assign\"));\nfunction buildModel(productions) {\n    var generator = new CstNodeDefinitionGenerator();\n    var allRules = (0, values_1.default)(productions);\n    return (0, map_1.default)(allRules, function (rule) { return generator.visitRule(rule); });\n}\nexports.buildModel = buildModel;\nvar CstNodeDefinitionGenerator = /** @class */ (function (_super) {\n    __extends(CstNodeDefinitionGenerator, _super);\n    function CstNodeDefinitionGenerator() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    CstNodeDefinitionGenerator.prototype.visitRule = function (node) {\n        var rawElements = this.visitEach(node.definition);\n        var grouped = (0, groupBy_1.default)(rawElements, function (el) { return el.propertyName; });\n        var properties = (0, map_1.default)(grouped, function (group, propertyName) {\n            var allNullable = !(0, some_1.default)(group, function (el) { return !el.canBeNull; });\n            // In an alternation with a label a property name can have\n            // multiple types.\n            var propertyType = group[0].type;\n            if (group.length > 1) {\n                propertyType = (0, map_1.default)(group, function (g) { return g.type; });\n            }\n            return {\n                name: propertyName,\n                type: propertyType,\n                optional: allNullable\n            };\n        });\n        return {\n            name: node.name,\n            properties: properties\n        };\n    };\n    CstNodeDefinitionGenerator.prototype.visitAlternative = function (node) {\n        return this.visitEachAndOverrideWith(node.definition, { canBeNull: true });\n    };\n    CstNodeDefinitionGenerator.prototype.visitOption = function (node) {\n        return this.visitEachAndOverrideWith(node.definition, { canBeNull: true });\n    };\n    CstNodeDefinitionGenerator.prototype.visitRepetition = function (node) {\n        return this.visitEachAndOverrideWith(node.definition, { canBeNull: true });\n    };\n    CstNodeDefinitionGenerator.prototype.visitRepetitionMandatory = function (node) {\n        return this.visitEach(node.definition);\n    };\n    CstNodeDefinitionGenerator.prototype.visitRepetitionMandatoryWithSeparator = function (node) {\n        return this.visitEach(node.definition).concat({\n            propertyName: node.separator.name,\n            canBeNull: true,\n            type: getType(node.separator)\n        });\n    };\n    CstNodeDefinitionGenerator.prototype.visitRepetitionWithSeparator = function (node) {\n        return this.visitEachAndOverrideWith(node.definition, {\n            canBeNull: true\n        }).concat({\n            propertyName: node.separator.name,\n            canBeNull: true,\n            type: getType(node.separator)\n        });\n    };\n    CstNodeDefinitionGenerator.prototype.visitAlternation = function (node) {\n        return this.visitEachAndOverrideWith(node.definition, { canBeNull: true });\n    };\n    CstNodeDefinitionGenerator.prototype.visitTerminal = function (node) {\n        return [\n            {\n                propertyName: node.label || node.terminalType.name,\n                canBeNull: false,\n                type: getType(node)\n            }\n        ];\n    };\n    CstNodeDefinitionGenerator.prototype.visitNonTerminal = function (node) {\n        return [\n            {\n                propertyName: node.label || node.nonTerminalName,\n                canBeNull: false,\n                type: getType(node)\n            }\n        ];\n    };\n    CstNodeDefinitionGenerator.prototype.visitEachAndOverrideWith = function (definition, override) {\n        return (0, map_1.default)(this.visitEach(definition), function (definition) { return (0, assign_1.default)({}, definition, override); });\n    };\n    CstNodeDefinitionGenerator.prototype.visitEach = function (definition) {\n        var _this = this;\n        return (0, flatten_1.default)((0, map_1.default)(definition, function (definition) { return _this.visit(definition); }));\n    };\n    return CstNodeDefinitionGenerator;\n}(gast_1.GAstVisitor));\nfunction getType(production) {\n    if (production instanceof gast_1.NonTerminal) {\n        return {\n            kind: \"rule\",\n            name: production.referencedRule.name\n        };\n    }\n    return { kind: \"token\" };\n}\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.genDts = void 0;\nvar flatten_1 = __importDefault(require(\"lodash/flatten\"));\nvar isArray_1 = __importDefault(require(\"lodash/isArray\"));\nvar map_1 = __importDefault(require(\"lodash/map\"));\nvar reduce_1 = __importDefault(require(\"lodash/reduce\"));\nvar uniq_1 = __importDefault(require(\"lodash/uniq\"));\nvar upperFirst_1 = __importDefault(require(\"lodash/upperFirst\"));\nfunction genDts(model, options) {\n    var contentParts = [];\n    contentParts = contentParts.concat(\"import type { CstNode, ICstVisitor, IToken } from \\\"chevrotain\\\";\");\n    contentParts = contentParts.concat((0, flatten_1.default)((0, map_1.default)(model, function (node) { return genCstNodeTypes(node); })));\n    if (options.includeVisitorInterface) {\n        contentParts = contentParts.concat(genVisitor(options.visitorInterfaceName, model));\n    }\n    return contentParts.join(\"\\n\\n\") + \"\\n\";\n}\nexports.genDts = genDts;\nfunction genCstNodeTypes(node) {\n    var nodeCstInterface = genNodeInterface(node);\n    var nodeChildrenInterface = genNodeChildrenType(node);\n    return [nodeCstInterface, nodeChildrenInterface];\n}\nfunction genNodeInterface(node) {\n    var nodeInterfaceName = getNodeInterfaceName(node.name);\n    var childrenTypeName = getNodeChildrenTypeName(node.name);\n    return \"export interface \".concat(nodeInterfaceName, \" extends CstNode {\\n  name: \\\"\").concat(node.name, \"\\\";\\n  children: \").concat(childrenTypeName, \";\\n}\");\n}\nfunction genNodeChildrenType(node) {\n    var typeName = getNodeChildrenTypeName(node.name);\n    return \"export type \".concat(typeName, \" = {\\n  \").concat((0, map_1.default)(node.properties, function (property) { return genChildProperty(property); }).join(\"\\n  \"), \"\\n};\");\n}\nfunction genChildProperty(prop) {\n    var typeName = buildTypeString(prop.type);\n    return \"\".concat(prop.name).concat(prop.optional ? \"?\" : \"\", \": \").concat(typeName, \"[];\");\n}\nfunction genVisitor(name, nodes) {\n    return \"export interface \".concat(name, \"<IN, OUT> extends ICstVisitor<IN, OUT> {\\n  \").concat((0, map_1.default)(nodes, function (node) { return genVisitorFunction(node); }).join(\"\\n  \"), \"\\n}\");\n}\nfunction genVisitorFunction(node) {\n    var childrenTypeName = getNodeChildrenTypeName(node.name);\n    return \"\".concat(node.name, \"(children: \").concat(childrenTypeName, \", param?: IN): OUT;\");\n}\nfunction buildTypeString(type) {\n    if ((0, isArray_1.default)(type)) {\n        var typeNames = (0, uniq_1.default)((0, map_1.default)(type, function (t) { return getTypeString(t); }));\n        var typeString = (0, reduce_1.default)(typeNames, function (sum, t) { return sum + \" | \" + t; });\n        return \"(\" + typeString + \")\";\n    }\n    else {\n        return getTypeString(type);\n    }\n}\nfunction getTypeString(type) {\n    if (type.kind === \"token\") {\n        return \"IToken\";\n    }\n    return getNodeInterfaceName(type.name);\n}\nfunction getNodeInterfaceName(ruleName) {\n    return (0, upperFirst_1.default)(ruleName) + \"CstNode\";\n}\nfunction getNodeChildrenTypeName(ruleName) {\n    return (0, upperFirst_1.default)(ruleName) + \"CstChildren\";\n}\n","var createCaseFirst = require('./_createCaseFirst');\n\n/**\n * Converts the first character of `string` to upper case.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category String\n * @param {string} [string=''] The string to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.upperFirst('fred');\n * // => 'Fred'\n *\n * _.upperFirst('FRED');\n * // => 'FRED'\n */\nvar upperFirst = createCaseFirst('toUpperCase');\n\nmodule.exports = upperFirst;\n","var castSlice = require('./_castSlice'),\n    hasUnicode = require('./_hasUnicode'),\n    stringToArray = require('./_stringToArray'),\n    toString = require('./toString');\n\n/**\n * Creates a function like `_.lowerFirst`.\n *\n * @private\n * @param {string} methodName The name of the `String` case method to use.\n * @returns {Function} Returns the new case function.\n */\nfunction createCaseFirst(methodName) {\n  return function(string) {\n    string = toString(string);\n\n    var strSymbols = hasUnicode(string)\n      ? stringToArray(string)\n      : undefined;\n\n    var chr = strSymbols\n      ? strSymbols[0]\n      : string.charAt(0);\n\n    var trailing = strSymbols\n      ? castSlice(strSymbols, 1).join('')\n      : string.slice(1);\n\n    return chr[methodName]() + trailing;\n  };\n}\n\nmodule.exports = createCaseFirst;\n","var baseSlice = require('./_baseSlice');\n\n/**\n * Casts `array` to a slice if it's needed.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {number} start The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the cast slice.\n */\nfunction castSlice(array, start, end) {\n  var length = array.length;\n  end = end === undefined ? length : end;\n  return (!start && end >= length) ? array : baseSlice(array, start, end);\n}\n\nmodule.exports = castSlice;\n","var asciiToArray = require('./_asciiToArray'),\n    hasUnicode = require('./_hasUnicode'),\n    unicodeToArray = require('./_unicodeToArray');\n\n/**\n * Converts `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction stringToArray(string) {\n  return hasUnicode(string)\n    ? unicodeToArray(string)\n    : asciiToArray(string);\n}\n\nmodule.exports = stringToArray;\n","/**\n * Converts an ASCII `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction asciiToArray(string) {\n  return string.split('');\n}\n\nmodule.exports = asciiToArray;\n","/** Used to compose unicode character classes. */\nvar rsAstralRange = '\\\\ud800-\\\\udfff',\n    rsComboMarksRange = '\\\\u0300-\\\\u036f',\n    reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,\n    rsVarRange = '\\\\ufe0e\\\\ufe0f';\n\n/** Used to compose unicode capture groups. */\nvar rsAstral = '[' + rsAstralRange + ']',\n    rsCombo = '[' + rsComboRange + ']',\n    rsFitz = '\\\\ud83c[\\\\udffb-\\\\udfff]',\n    rsModifier = '(?:' + rsCombo + '|' + rsFitz + ')',\n    rsNonAstral = '[^' + rsAstralRange + ']',\n    rsRegional = '(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}',\n    rsSurrPair = '[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]',\n    rsZWJ = '\\\\u200d';\n\n/** Used to compose unicode regexes. */\nvar reOptMod = rsModifier + '?',\n    rsOptVar = '[' + rsVarRange + ']?',\n    rsOptJoin = '(?:' + rsZWJ + '(?:' + [rsNonAstral, rsRegional, rsSurrPair].join('|') + ')' + rsOptVar + reOptMod + ')*',\n    rsSeq = rsOptVar + reOptMod + rsOptJoin,\n    rsSymbol = '(?:' + [rsNonAstral + rsCombo + '?', rsCombo, rsRegional, rsSurrPair, rsAstral].join('|') + ')';\n\n/** Used to match [string symbols](https://mathiasbynens.be/notes/javascript-unicode). */\nvar reUnicode = RegExp(rsFitz + '(?=' + rsFitz + ')|' + rsSymbol + rsSeq, 'g');\n\n/**\n * Converts a Unicode `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction unicodeToArray(string) {\n  return string.match(reUnicode) || [];\n}\n\nmodule.exports = unicodeToArray;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createSyntaxDiagramsCode = void 0;\nvar version_1 = require(\"../version\");\nfunction createSyntaxDiagramsCode(grammar, _a) {\n    var _b = _a === void 0 ? {} : _a, _c = _b.resourceBase, resourceBase = _c === void 0 ? \"https://unpkg.com/chevrotain@\".concat(version_1.VERSION, \"/diagrams/\") : _c, _d = _b.css, css = _d === void 0 ? \"https://unpkg.com/chevrotain@\".concat(version_1.VERSION, \"/diagrams/diagrams.css\") : _d;\n    var header = \"\\n<!-- This is a generated file -->\\n<!DOCTYPE html>\\n<meta charset=\\\"utf-8\\\">\\n<style>\\n  body {\\n    background-color: hsl(30, 20%, 95%)\\n  }\\n</style>\\n\\n\";\n    var cssHtml = \"\\n<link rel='stylesheet' href='\".concat(css, \"'>\\n\");\n    var scripts = \"\\n<script src='\".concat(resourceBase, \"vendor/railroad-diagrams.js'></script>\\n<script src='\").concat(resourceBase, \"src/diagrams_builder.js'></script>\\n<script src='\").concat(resourceBase, \"src/diagrams_behavior.js'></script>\\n<script src='\").concat(resourceBase, \"src/main.js'></script>\\n\");\n    var diagramsDiv = \"\\n<div id=\\\"diagrams\\\" align=\\\"center\\\"></div>    \\n\";\n    var serializedGrammar = \"\\n<script>\\n    window.serializedGrammar = \".concat(JSON.stringify(grammar, null, \"  \"), \";\\n</script>\\n\");\n    var initLogic = \"\\n<script>\\n    var diagramsDiv = document.getElementById(\\\"diagrams\\\");\\n    main.drawDiagramsFromSerializedGrammar(serializedGrammar, diagramsDiv);\\n</script>\\n\";\n    return (header + cssHtml + scripts + diagramsDiv + serializedGrammar + initLogic);\n}\nexports.createSyntaxDiagramsCode = createSyntaxDiagramsCode;\n","var baseKeys = require('./_baseKeys'),\n    getTag = require('./_getTag'),\n    isArrayLike = require('./isArrayLike'),\n    isString = require('./isString'),\n    stringSize = require('./_stringSize');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    setTag = '[object Set]';\n\n/**\n * Gets the size of `collection` by returning its length for array-like\n * values or the number of own enumerable string keyed properties for objects.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object|string} collection The collection to inspect.\n * @returns {number} Returns the collection size.\n * @example\n *\n * _.size([1, 2, 3]);\n * // => 3\n *\n * _.size({ 'a': 1, 'b': 2 });\n * // => 2\n *\n * _.size('pebbles');\n * // => 7\n */\nfunction size(collection) {\n  if (collection == null) {\n    return 0;\n  }\n  if (isArrayLike(collection)) {\n    return isString(collection) ? stringSize(collection) : collection.length;\n  }\n  var tag = getTag(collection);\n  if (tag == mapTag || tag == setTag) {\n    return collection.size;\n  }\n  return baseKeys(collection).length;\n}\n\nmodule.exports = size;\n","var asciiSize = require('./_asciiSize'),\n    hasUnicode = require('./_hasUnicode'),\n    unicodeSize = require('./_unicodeSize');\n\n/**\n * Gets the number of symbols in `string`.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {number} Returns the string size.\n */\nfunction stringSize(string) {\n  return hasUnicode(string)\n    ? unicodeSize(string)\n    : asciiSize(string);\n}\n\nmodule.exports = stringSize;\n","var baseProperty = require('./_baseProperty');\n\n/**\n * Gets the size of an ASCII `string`.\n *\n * @private\n * @param {string} string The string inspect.\n * @returns {number} Returns the string size.\n */\nvar asciiSize = baseProperty('length');\n\nmodule.exports = asciiSize;\n","/** Used to compose unicode character classes. */\nvar rsAstralRange = '\\\\ud800-\\\\udfff',\n    rsComboMarksRange = '\\\\u0300-\\\\u036f',\n    reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,\n    rsVarRange = '\\\\ufe0e\\\\ufe0f';\n\n/** Used to compose unicode capture groups. */\nvar rsAstral = '[' + rsAstralRange + ']',\n    rsCombo = '[' + rsComboRange + ']',\n    rsFitz = '\\\\ud83c[\\\\udffb-\\\\udfff]',\n    rsModifier = '(?:' + rsCombo + '|' + rsFitz + ')',\n    rsNonAstral = '[^' + rsAstralRange + ']',\n    rsRegional = '(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}',\n    rsSurrPair = '[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]',\n    rsZWJ = '\\\\u200d';\n\n/** Used to compose unicode regexes. */\nvar reOptMod = rsModifier + '?',\n    rsOptVar = '[' + rsVarRange + ']?',\n    rsOptJoin = '(?:' + rsZWJ + '(?:' + [rsNonAstral, rsRegional, rsSurrPair].join('|') + ')' + rsOptVar + reOptMod + ')*',\n    rsSeq = rsOptVar + reOptMod + rsOptJoin,\n    rsSymbol = '(?:' + [rsNonAstral + rsCombo + '?', rsCombo, rsRegional, rsSurrPair, rsAstral].join('|') + ')';\n\n/** Used to match [string symbols](https://mathiasbynens.be/notes/javascript-unicode). */\nvar reUnicode = RegExp(rsFitz + '(?=' + rsFitz + ')|' + rsSymbol + rsSeq, 'g');\n\n/**\n * Gets the size of a Unicode `string`.\n *\n * @private\n * @param {string} string The string inspect.\n * @returns {number} Returns the string size.\n */\nfunction unicodeSize(string) {\n  var result = reUnicode.lastIndex = 0;\n  while (reUnicode.test(string)) {\n    ++result;\n  }\n  return result;\n}\n\nmodule.exports = unicodeSize;\n","module.exports = \"// Copyright (c) 2013 Adobe Systems Incorporated. All rights reserved.\\r\\n//\\r\\n// Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\r\\n// you may not use this file except in compliance with the License.\\r\\n// You may obtain a copy of the License at\\r\\n//\\r\\n// http://www.apache.org/licenses/LICENSE-2.0\\r\\n//\\r\\n// Unless required by applicable law or agreed to in writing, software\\r\\n// distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\r\\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\r\\n// See the License for the specific language governing permissions and\\r\\n// limitations under the License.\\r\\n// ┌────────────────────────────────────────────────────────────┐ \\\\\\\\\\r\\n// │ Eve 0.4.2 - JavaScript Events Library                      │ \\\\\\\\\\r\\n// ├────────────────────────────────────────────────────────────┤ \\\\\\\\\\r\\n// │ Author Dmitry Baranovskiy (http://dmitry.baranovskiy.com/) │ \\\\\\\\\\r\\n// └────────────────────────────────────────────────────────────┘ \\\\\\\\\\r\\n(function (glob, factory) {\\r\\n    if (typeof define === \\\"function\\\" && define.amd) {\\r\\n        define(\\\"eve\\\", function() {\\r\\n            return factory();\\r\\n        });\\r\\n    } else if (typeof exports === \\\"object\\\") {\\r\\n        module.exports = factory();\\r\\n    } else {\\r\\n        glob.eve = factory();\\r\\n    }\\r\\n}(this, function(){\\r\\n    var version = \\\"0.4.2\\\",\\r\\n        has = \\\"hasOwnProperty\\\",\\r\\n        separator = /[\\\\.\\\\/]/,\\r\\n        wildcard = \\\"*\\\",\\r\\n        fun = function () {},\\r\\n        numsort = function (a, b) {\\r\\n            return a - b;\\r\\n        },\\r\\n        current_event,\\r\\n        stop,\\r\\n        events = {n: {}},\\r\\n    /*\\\\\\r\\n     * eve\\r\\n     [ method ]\\r\\n\\r\\n     * Fires event with given `name`, given scope and other parameters.\\r\\n\\r\\n     > Arguments\\r\\n\\r\\n     - name (string) name of the *event*, dot (`.`) or slash (`/`) separated\\r\\n     - scope (object) context for the event handlers\\r\\n     - varargs (...) the rest of arguments will be sent to event handlers\\r\\n\\r\\n     = (object) array of returned values from the listeners\\r\\n     \\\\*/\\r\\n        eve = function (name, scope) {\\r\\n            name = String(name);\\r\\n            var e = events,\\r\\n                oldstop = stop,\\r\\n                args = Array.prototype.slice.call(arguments, 2),\\r\\n                listeners = eve.listeners(name),\\r\\n                z = 0,\\r\\n                f = false,\\r\\n                l,\\r\\n                indexed = [],\\r\\n                queue = {},\\r\\n                out = [],\\r\\n                ce = current_event,\\r\\n                errors = [];\\r\\n            current_event = name;\\r\\n            stop = 0;\\r\\n            for (var i = 0, ii = listeners.length; i < ii; i++) if (\\\"zIndex\\\" in listeners[i]) {\\r\\n                indexed.push(listeners[i].zIndex);\\r\\n                if (listeners[i].zIndex < 0) {\\r\\n                    queue[listeners[i].zIndex] = listeners[i];\\r\\n                }\\r\\n            }\\r\\n            indexed.sort(numsort);\\r\\n            while (indexed[z] < 0) {\\r\\n                l = queue[indexed[z++]];\\r\\n                out.push(l.apply(scope, args));\\r\\n                if (stop) {\\r\\n                    stop = oldstop;\\r\\n                    return out;\\r\\n                }\\r\\n            }\\r\\n            for (i = 0; i < ii; i++) {\\r\\n                l = listeners[i];\\r\\n                if (\\\"zIndex\\\" in l) {\\r\\n                    if (l.zIndex == indexed[z]) {\\r\\n                        out.push(l.apply(scope, args));\\r\\n                        if (stop) {\\r\\n                            break;\\r\\n                        }\\r\\n                        do {\\r\\n                            z++;\\r\\n                            l = queue[indexed[z]];\\r\\n                            l && out.push(l.apply(scope, args));\\r\\n                            if (stop) {\\r\\n                                break;\\r\\n                            }\\r\\n                        } while (l)\\r\\n                    } else {\\r\\n                        queue[l.zIndex] = l;\\r\\n                    }\\r\\n                } else {\\r\\n                    out.push(l.apply(scope, args));\\r\\n                    if (stop) {\\r\\n                        break;\\r\\n                    }\\r\\n                }\\r\\n            }\\r\\n            stop = oldstop;\\r\\n            current_event = ce;\\r\\n            return out.length ? out : null;\\r\\n        };\\r\\n    // Undocumented. Debug only.\\r\\n    eve._events = events;\\r\\n    /*\\\\\\r\\n     * eve.listeners\\r\\n     [ method ]\\r\\n\\r\\n     * Internal method which gives you array of all event handlers that will be triggered by the given `name`.\\r\\n\\r\\n     > Arguments\\r\\n\\r\\n     - name (string) name of the event, dot (`.`) or slash (`/`) separated\\r\\n\\r\\n     = (array) array of event handlers\\r\\n     \\\\*/\\r\\n    eve.listeners = function (name) {\\r\\n        var names = name.split(separator),\\r\\n            e = events,\\r\\n            item,\\r\\n            items,\\r\\n            k,\\r\\n            i,\\r\\n            ii,\\r\\n            j,\\r\\n            jj,\\r\\n            nes,\\r\\n            es = [e],\\r\\n            out = [];\\r\\n        for (i = 0, ii = names.length; i < ii; i++) {\\r\\n            nes = [];\\r\\n            for (j = 0, jj = es.length; j < jj; j++) {\\r\\n                e = es[j].n;\\r\\n                items = [e[names[i]], e[wildcard]];\\r\\n                k = 2;\\r\\n                while (k--) {\\r\\n                    item = items[k];\\r\\n                    if (item) {\\r\\n                        nes.push(item);\\r\\n                        out = out.concat(item.f || []);\\r\\n                    }\\r\\n                }\\r\\n            }\\r\\n            es = nes;\\r\\n        }\\r\\n        return out;\\r\\n    };\\r\\n\\r\\n    /*\\\\\\r\\n     * eve.on\\r\\n     [ method ]\\r\\n     **\\r\\n     * Binds given event handler with a given name. You can use wildcards “`*`” for the names:\\r\\n     | eve.on(\\\"*.under.*\\\", f);\\r\\n     | eve(\\\"mouse.under.floor\\\"); // triggers f\\r\\n     * Use @eve to trigger the listener.\\r\\n     **\\r\\n     > Arguments\\r\\n     **\\r\\n     - name (string) name of the event, dot (`.`) or slash (`/`) separated, with optional wildcards\\r\\n     - f (function) event handler function\\r\\n     **\\r\\n     = (function) returned function accepts a single numeric parameter that represents z-index of the handler. It is an optional feature and only used when you need to ensure that some subset of handlers will be invoked in a given order, despite of the order of assignment.\\r\\n     > Example:\\r\\n     | eve.on(\\\"mouse\\\", eatIt)(2);\\r\\n     | eve.on(\\\"mouse\\\", scream);\\r\\n     | eve.on(\\\"mouse\\\", catchIt)(1);\\r\\n     * This will ensure that `catchIt()` function will be called before `eatIt()`.\\r\\n     *\\r\\n     * If you want to put your handler before non-indexed handlers, specify a negative value.\\r\\n     * Note: I assume most of the time you don’t need to worry about z-index, but it’s nice to have this feature “just in case”.\\r\\n     \\\\*/\\r\\n    eve.on = function (name, f) {\\r\\n        name = String(name);\\r\\n        if (typeof f != \\\"function\\\") {\\r\\n            return function () {};\\r\\n        }\\r\\n        var names = name.split(separator),\\r\\n            e = events;\\r\\n        for (var i = 0, ii = names.length; i < ii; i++) {\\r\\n            e = e.n;\\r\\n            e = e.hasOwnProperty(names[i]) && e[names[i]] || (e[names[i]] = {n: {}});\\r\\n        }\\r\\n        e.f = e.f || [];\\r\\n        for (i = 0, ii = e.f.length; i < ii; i++) if (e.f[i] == f) {\\r\\n            return fun;\\r\\n        }\\r\\n        e.f.push(f);\\r\\n        return function (zIndex) {\\r\\n            if (+zIndex == +zIndex) {\\r\\n                f.zIndex = +zIndex;\\r\\n            }\\r\\n        };\\r\\n    };\\r\\n    /*\\\\\\r\\n     * eve.f\\r\\n     [ method ]\\r\\n     **\\r\\n     * Returns function that will fire given event with optional arguments.\\r\\n     * Arguments that will be passed to the result function will be also\\r\\n     * concated to the list of final arguments.\\r\\n     | el.onclick = eve.f(\\\"click\\\", 1, 2);\\r\\n     | eve.on(\\\"click\\\", function (a, b, c) {\\r\\n     |     console.log(a, b, c); // 1, 2, [event object]\\r\\n     | });\\r\\n     > Arguments\\r\\n     - event (string) event name\\r\\n     - varargs (…) and any other arguments\\r\\n     = (function) possible event handler function\\r\\n     \\\\*/\\r\\n    eve.f = function (event) {\\r\\n        var attrs = [].slice.call(arguments, 1);\\r\\n        return function () {\\r\\n            eve.apply(null, [event, null].concat(attrs).concat([].slice.call(arguments, 0)));\\r\\n        };\\r\\n    };\\r\\n    /*\\\\\\r\\n     * eve.stop\\r\\n     [ method ]\\r\\n     **\\r\\n     * Is used inside an event handler to stop the event, preventing any subsequent listeners from firing.\\r\\n     \\\\*/\\r\\n    eve.stop = function () {\\r\\n        stop = 1;\\r\\n    };\\r\\n    /*\\\\\\r\\n     * eve.nt\\r\\n     [ method ]\\r\\n     **\\r\\n     * Could be used inside event handler to figure out actual name of the event.\\r\\n     **\\r\\n     > Arguments\\r\\n     **\\r\\n     - subname (string) #optional subname of the event\\r\\n     **\\r\\n     = (string) name of the event, if `subname` is not specified\\r\\n     * or\\r\\n     = (boolean) `true`, if current event’s name contains `subname`\\r\\n     \\\\*/\\r\\n    eve.nt = function (subname) {\\r\\n        if (subname) {\\r\\n            return new RegExp(\\\"(?:\\\\\\\\.|\\\\\\\\/|^)\\\" + subname + \\\"(?:\\\\\\\\.|\\\\\\\\/|$)\\\").test(current_event);\\r\\n        }\\r\\n        return current_event;\\r\\n    };\\r\\n    /*\\\\\\r\\n     * eve.nts\\r\\n     [ method ]\\r\\n     **\\r\\n     * Could be used inside event handler to figure out actual name of the event.\\r\\n     **\\r\\n     **\\r\\n     = (array) names of the event\\r\\n     \\\\*/\\r\\n    eve.nts = function () {\\r\\n        return current_event.split(separator);\\r\\n    };\\r\\n    /*\\\\\\r\\n     * eve.off\\r\\n     [ method ]\\r\\n     **\\r\\n     * Removes given function from the list of event listeners assigned to given name.\\r\\n     * If no arguments specified all the events will be cleared.\\r\\n     **\\r\\n     > Arguments\\r\\n     **\\r\\n     - name (string) name of the event, dot (`.`) or slash (`/`) separated, with optional wildcards\\r\\n     - f (function) event handler function\\r\\n     \\\\*/\\r\\n    /*\\\\\\r\\n     * eve.unbind\\r\\n     [ method ]\\r\\n     **\\r\\n     * See @eve.off\\r\\n     \\\\*/\\r\\n    eve.off = eve.unbind = function (name, f) {\\r\\n        if (!name) {\\r\\n            eve._events = events = {n: {}};\\r\\n            return;\\r\\n        }\\r\\n        var names = name.split(separator),\\r\\n            e,\\r\\n            key,\\r\\n            splice,\\r\\n            i, ii, j, jj,\\r\\n            cur = [events];\\r\\n        for (i = 0, ii = names.length; i < ii; i++) {\\r\\n            for (j = 0; j < cur.length; j += splice.length - 2) {\\r\\n                splice = [j, 1];\\r\\n                e = cur[j].n;\\r\\n                if (names[i] != wildcard) {\\r\\n                    if (e[names[i]]) {\\r\\n                        splice.push(e[names[i]]);\\r\\n                    }\\r\\n                } else {\\r\\n                    for (key in e) if (e[has](key)) {\\r\\n                        splice.push(e[key]);\\r\\n                    }\\r\\n                }\\r\\n                cur.splice.apply(cur, splice);\\r\\n            }\\r\\n        }\\r\\n        for (i = 0, ii = cur.length; i < ii; i++) {\\r\\n            e = cur[i];\\r\\n            while (e.n) {\\r\\n                if (f) {\\r\\n                    if (e.f) {\\r\\n                        for (j = 0, jj = e.f.length; j < jj; j++) if (e.f[j] == f) {\\r\\n                            e.f.splice(j, 1);\\r\\n                            break;\\r\\n                        }\\r\\n                        !e.f.length && delete e.f;\\r\\n                    }\\r\\n                    for (key in e.n) if (e.n[has](key) && e.n[key].f) {\\r\\n                        var funcs = e.n[key].f;\\r\\n                        for (j = 0, jj = funcs.length; j < jj; j++) if (funcs[j] == f) {\\r\\n                            funcs.splice(j, 1);\\r\\n                            break;\\r\\n                        }\\r\\n                        !funcs.length && delete e.n[key].f;\\r\\n                    }\\r\\n                } else {\\r\\n                    delete e.f;\\r\\n                    for (key in e.n) if (e.n[has](key) && e.n[key].f) {\\r\\n                        delete e.n[key].f;\\r\\n                    }\\r\\n                }\\r\\n                e = e.n;\\r\\n            }\\r\\n        }\\r\\n    };\\r\\n    /*\\\\\\r\\n     * eve.once\\r\\n     [ method ]\\r\\n     **\\r\\n     * Binds given event handler with a given name to only run once then unbind itself.\\r\\n     | eve.once(\\\"login\\\", f);\\r\\n     | eve(\\\"login\\\"); // triggers f\\r\\n     | eve(\\\"login\\\"); // no listeners\\r\\n     * Use @eve to trigger the listener.\\r\\n     **\\r\\n     > Arguments\\r\\n     **\\r\\n     - name (string) name of the event, dot (`.`) or slash (`/`) separated, with optional wildcards\\r\\n     - f (function) event handler function\\r\\n     **\\r\\n     = (function) same return function as @eve.on\\r\\n     \\\\*/\\r\\n    eve.once = function (name, f) {\\r\\n        var f2 = function () {\\r\\n            eve.unbind(name, f2);\\r\\n            return f.apply(this, arguments);\\r\\n        };\\r\\n        return eve.on(name, f2);\\r\\n    };\\r\\n    /*\\\\\\r\\n     * eve.version\\r\\n     [ property (string) ]\\r\\n     **\\r\\n     * Current version of the library.\\r\\n     \\\\*/\\r\\n    eve.version = version;\\r\\n    eve.toString = function () {\\r\\n        return \\\"You are running Eve \\\" + version;\\r\\n    };\\r\\n\\r\\n    return eve;\\r\\n}));\\r\\n\\r\\n// ┌────────────────────────────────────────────────────────────────────┐ \\\\\\\\\\r\\n// │ Raphaël 2.1.4 - JavaScript Vector Library                      │ \\\\\\\\\\r\\n// ├────────────────────────────────────────────────────────────────────┤ \\\\\\\\\\r\\n// │ Core Module                                                        │ \\\\\\\\\\r\\n// ├────────────────────────────────────────────────────────────────────┤ \\\\\\\\\\r\\n// │ Licensed under the MIT (http://raphaeljs.com/license.html) license.│ \\\\\\\\\\r\\n// └────────────────────────────────────────────────────────────────────┘ \\\\\\\\\\r\\n\\r\\n(function (glob, factory) {\\r\\n    if (typeof define === \\\"function\\\" && define.amd) {\\r\\n        define(\\\"raphael.core\\\", [\\\"eve\\\"], function(eve) {\\r\\n            return factory(eve);\\r\\n        });\\r\\n    } else if (typeof exports === \\\"object\\\") {\\r\\n        module.exports = factory(require(\\\"eve\\\"));\\r\\n    } else {\\r\\n        glob.Raphael = factory(glob.eve);\\r\\n    }\\r\\n}(this, function (eve) {\\r\\n    /*\\\\\\r\\n     * Raphael\\r\\n     [ method ]\\r\\n     **\\r\\n     * Creates a canvas object on which to draw.\\r\\n     * You must do this first, as all future calls to drawing methods\\r\\n     * from this instance will be bound to this canvas.\\r\\n     > Parameters\\r\\n     **\\r\\n     - container (HTMLElement|string) DOM element or its ID which is going to be a parent for drawing surface\\r\\n     - width (number)\\r\\n     - height (number)\\r\\n     - callback (function) #optional callback function which is going to be executed in the context of newly created paper\\r\\n     * or\\r\\n     - x (number)\\r\\n     - y (number)\\r\\n     - width (number)\\r\\n     - height (number)\\r\\n     - callback (function) #optional callback function which is going to be executed in the context of newly created paper\\r\\n     * or\\r\\n     - all (array) (first 3 or 4 elements in the array are equal to [containerID, width, height] or [x, y, width, height]. The rest are element descriptions in format {type: type, <attributes>}). See @Paper.add.\\r\\n     - callback (function) #optional callback function which is going to be executed in the context of newly created paper\\r\\n     * or\\r\\n     - onReadyCallback (function) function that is going to be called on DOM ready event. You can also subscribe to this event via Eve’s “DOMLoad” event. In this case method returns `undefined`.\\r\\n     = (object) @Paper\\r\\n     > Usage\\r\\n     | // Each of the following examples create a canvas\\r\\n     | // that is 320px wide by 200px high.\\r\\n     | // Canvas is created at the viewport’s 10,50 coordinate.\\r\\n     | var paper = Raphael(10, 50, 320, 200);\\r\\n     | // Canvas is created at the top left corner of the #notepad element\\r\\n     | // (or its top right corner in dir=\\\"rtl\\\" elements)\\r\\n     | var paper = Raphael(document.getElementById(\\\"notepad\\\"), 320, 200);\\r\\n     | // Same as above\\r\\n     | var paper = Raphael(\\\"notepad\\\", 320, 200);\\r\\n     | // Image dump\\r\\n     | var set = Raphael([\\\"notepad\\\", 320, 200, {\\r\\n     |     type: \\\"rect\\\",\\r\\n     |     x: 10,\\r\\n     |     y: 10,\\r\\n     |     width: 25,\\r\\n     |     height: 25,\\r\\n     |     stroke: \\\"#f00\\\"\\r\\n     | }, {\\r\\n     |     type: \\\"text\\\",\\r\\n     |     x: 30,\\r\\n     |     y: 40,\\r\\n     |     text: \\\"Dump\\\"\\r\\n     | }]);\\r\\n     \\\\*/\\r\\n    function R(first) {\\r\\n        if (R.is(first, \\\"function\\\")) {\\r\\n            return loaded ? first() : eve.on(\\\"raphael.DOMload\\\", first);\\r\\n        } else if (R.is(first, array)) {\\r\\n            return R._engine.create[apply](R, first.splice(0, 3 + R.is(first[0], nu))).add(first);\\r\\n        } else {\\r\\n            var args = Array.prototype.slice.call(arguments, 0);\\r\\n            if (R.is(args[args.length - 1], \\\"function\\\")) {\\r\\n                var f = args.pop();\\r\\n                return loaded ? f.call(R._engine.create[apply](R, args)) : eve.on(\\\"raphael.DOMload\\\", function () {\\r\\n                    f.call(R._engine.create[apply](R, args));\\r\\n                });\\r\\n            } else {\\r\\n                return R._engine.create[apply](R, arguments);\\r\\n            }\\r\\n        }\\r\\n    }\\r\\n    R.version = \\\"2.1.4\\\";\\r\\n    R.eve = eve;\\r\\n    var loaded,\\r\\n        separator = /[, ]+/,\\r\\n        elements = {circle: 1, rect: 1, path: 1, ellipse: 1, text: 1, image: 1},\\r\\n        formatrg = /\\\\{(\\\\d+)\\\\}/g,\\r\\n        proto = \\\"prototype\\\",\\r\\n        has = \\\"hasOwnProperty\\\",\\r\\n        g = {\\r\\n            doc: document,\\r\\n            win: window\\r\\n        },\\r\\n        oldRaphael = {\\r\\n            was: Object.prototype[has].call(g.win, \\\"Raphael\\\"),\\r\\n            is: g.win.Raphael\\r\\n        },\\r\\n        Paper = function () {\\r\\n            /*\\\\\\r\\n             * Paper.ca\\r\\n             [ property (object) ]\\r\\n             **\\r\\n             * Shortcut for @Paper.customAttributes\\r\\n             \\\\*/\\r\\n            /*\\\\\\r\\n             * Paper.customAttributes\\r\\n             [ property (object) ]\\r\\n             **\\r\\n             * If you have a set of attributes that you would like to represent\\r\\n             * as a function of some number you can do it easily with custom attributes:\\r\\n             > Usage\\r\\n             | paper.customAttributes.hue = function (num) {\\r\\n             |     num = num % 1;\\r\\n             |     return {fill: \\\"hsb(\\\" + num + \\\", 0.75, 1)\\\"};\\r\\n             | };\\r\\n             | // Custom attribute “hue” will change fill\\r\\n             | // to be given hue with fixed saturation and brightness.\\r\\n             | // Now you can use it like this:\\r\\n             | var c = paper.circle(10, 10, 10).attr({hue: .45});\\r\\n             | // or even like this:\\r\\n             | c.animate({hue: 1}, 1e3);\\r\\n             |\\r\\n             | // You could also create custom attribute\\r\\n             | // with multiple parameters:\\r\\n             | paper.customAttributes.hsb = function (h, s, b) {\\r\\n             |     return {fill: \\\"hsb(\\\" + [h, s, b].join(\\\",\\\") + \\\")\\\"};\\r\\n             | };\\r\\n             | c.attr({hsb: \\\"0.5 .8 1\\\"});\\r\\n             | c.animate({hsb: [1, 0, 0.5]}, 1e3);\\r\\n             \\\\*/\\r\\n            this.ca = this.customAttributes = {};\\r\\n        },\\r\\n        paperproto,\\r\\n        appendChild = \\\"appendChild\\\",\\r\\n        apply = \\\"apply\\\",\\r\\n        concat = \\\"concat\\\",\\r\\n        supportsTouch = ('ontouchstart' in g.win) || g.win.DocumentTouch && g.doc instanceof DocumentTouch, //taken from Modernizr touch test\\r\\n        E = \\\"\\\",\\r\\n        S = \\\" \\\",\\r\\n        Str = String,\\r\\n        split = \\\"split\\\",\\r\\n        events = \\\"click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel\\\"[split](S),\\r\\n        touchMap = {\\r\\n            mousedown: \\\"touchstart\\\",\\r\\n            mousemove: \\\"touchmove\\\",\\r\\n            mouseup: \\\"touchend\\\"\\r\\n        },\\r\\n        lowerCase = Str.prototype.toLowerCase,\\r\\n        math = Math,\\r\\n        mmax = math.max,\\r\\n        mmin = math.min,\\r\\n        abs = math.abs,\\r\\n        pow = math.pow,\\r\\n        PI = math.PI,\\r\\n        nu = \\\"number\\\",\\r\\n        string = \\\"string\\\",\\r\\n        array = \\\"array\\\",\\r\\n        toString = \\\"toString\\\",\\r\\n        fillString = \\\"fill\\\",\\r\\n        objectToString = Object.prototype.toString,\\r\\n        paper = {},\\r\\n        push = \\\"push\\\",\\r\\n        ISURL = R._ISURL = /^url\\\\(['\\\"]?(.+?)['\\\"]?\\\\)$/i,\\r\\n        colourRegExp = /^\\\\s*((#[a-f\\\\d]{6})|(#[a-f\\\\d]{3})|rgba?\\\\(\\\\s*([\\\\d\\\\.]+%?\\\\s*,\\\\s*[\\\\d\\\\.]+%?\\\\s*,\\\\s*[\\\\d\\\\.]+%?(?:\\\\s*,\\\\s*[\\\\d\\\\.]+%?)?)\\\\s*\\\\)|hsba?\\\\(\\\\s*([\\\\d\\\\.]+(?:deg|\\\\xb0|%)?\\\\s*,\\\\s*[\\\\d\\\\.]+%?\\\\s*,\\\\s*[\\\\d\\\\.]+(?:%?\\\\s*,\\\\s*[\\\\d\\\\.]+)?)%?\\\\s*\\\\)|hsla?\\\\(\\\\s*([\\\\d\\\\.]+(?:deg|\\\\xb0|%)?\\\\s*,\\\\s*[\\\\d\\\\.]+%?\\\\s*,\\\\s*[\\\\d\\\\.]+(?:%?\\\\s*,\\\\s*[\\\\d\\\\.]+)?)%?\\\\s*\\\\))\\\\s*$/i,\\r\\n        isnan = {\\\"NaN\\\": 1, \\\"Infinity\\\": 1, \\\"-Infinity\\\": 1},\\r\\n        bezierrg = /^(?:cubic-)?bezier\\\\(([^,]+),([^,]+),([^,]+),([^\\\\)]+)\\\\)/,\\r\\n        round = math.round,\\r\\n        setAttribute = \\\"setAttribute\\\",\\r\\n        toFloat = parseFloat,\\r\\n        toInt = parseInt,\\r\\n        upperCase = Str.prototype.toUpperCase,\\r\\n        availableAttrs = R._availableAttrs = {\\r\\n            \\\"arrow-end\\\": \\\"none\\\",\\r\\n            \\\"arrow-start\\\": \\\"none\\\",\\r\\n            blur: 0,\\r\\n            \\\"clip-rect\\\": \\\"0 0 1e9 1e9\\\",\\r\\n            cursor: \\\"default\\\",\\r\\n            cx: 0,\\r\\n            cy: 0,\\r\\n            fill: \\\"#fff\\\",\\r\\n            \\\"fill-opacity\\\": 1,\\r\\n            font: '10px \\\"Arial\\\"',\\r\\n            \\\"font-family\\\": '\\\"Arial\\\"',\\r\\n            \\\"font-size\\\": \\\"10\\\",\\r\\n            \\\"font-style\\\": \\\"normal\\\",\\r\\n            \\\"font-weight\\\": 400,\\r\\n            gradient: 0,\\r\\n            height: 0,\\r\\n            href: \\\"http://raphaeljs.com/\\\",\\r\\n            \\\"letter-spacing\\\": 0,\\r\\n            opacity: 1,\\r\\n            path: \\\"M0,0\\\",\\r\\n            r: 0,\\r\\n            rx: 0,\\r\\n            ry: 0,\\r\\n            src: \\\"\\\",\\r\\n            stroke: \\\"#000\\\",\\r\\n            \\\"stroke-dasharray\\\": \\\"\\\",\\r\\n            \\\"stroke-linecap\\\": \\\"butt\\\",\\r\\n            \\\"stroke-linejoin\\\": \\\"butt\\\",\\r\\n            \\\"stroke-miterlimit\\\": 0,\\r\\n            \\\"stroke-opacity\\\": 1,\\r\\n            \\\"stroke-width\\\": 1,\\r\\n            target: \\\"_blank\\\",\\r\\n            \\\"text-anchor\\\": \\\"middle\\\",\\r\\n            title: \\\"Raphael\\\",\\r\\n            transform: \\\"\\\",\\r\\n            width: 0,\\r\\n            x: 0,\\r\\n            y: 0\\r\\n        },\\r\\n        availableAnimAttrs = R._availableAnimAttrs = {\\r\\n            blur: nu,\\r\\n            \\\"clip-rect\\\": \\\"csv\\\",\\r\\n            cx: nu,\\r\\n            cy: nu,\\r\\n            fill: \\\"colour\\\",\\r\\n            \\\"fill-opacity\\\": nu,\\r\\n            \\\"font-size\\\": nu,\\r\\n            height: nu,\\r\\n            opacity: nu,\\r\\n            path: \\\"path\\\",\\r\\n            r: nu,\\r\\n            rx: nu,\\r\\n            ry: nu,\\r\\n            stroke: \\\"colour\\\",\\r\\n            \\\"stroke-opacity\\\": nu,\\r\\n            \\\"stroke-width\\\": nu,\\r\\n            transform: \\\"transform\\\",\\r\\n            width: nu,\\r\\n            x: nu,\\r\\n            y: nu\\r\\n        },\\r\\n        whitespace = /[\\\\x09\\\\x0a\\\\x0b\\\\x0c\\\\x0d\\\\x20\\\\xa0\\\\u1680\\\\u180e\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200a\\\\u202f\\\\u205f\\\\u3000\\\\u2028\\\\u2029]/g,\\r\\n        commaSpaces = /[\\\\x09\\\\x0a\\\\x0b\\\\x0c\\\\x0d\\\\x20\\\\xa0\\\\u1680\\\\u180e\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200a\\\\u202f\\\\u205f\\\\u3000\\\\u2028\\\\u2029]*,[\\\\x09\\\\x0a\\\\x0b\\\\x0c\\\\x0d\\\\x20\\\\xa0\\\\u1680\\\\u180e\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200a\\\\u202f\\\\u205f\\\\u3000\\\\u2028\\\\u2029]*/,\\r\\n        hsrg = {hs: 1, rg: 1},\\r\\n        p2s = /,?([achlmqrstvxz]),?/gi,\\r\\n        pathCommand = /([achlmrqstvz])[\\\\x09\\\\x0a\\\\x0b\\\\x0c\\\\x0d\\\\x20\\\\xa0\\\\u1680\\\\u180e\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200a\\\\u202f\\\\u205f\\\\u3000\\\\u2028\\\\u2029,]*((-?\\\\d*\\\\.?\\\\d*(?:e[\\\\-+]?\\\\d+)?[\\\\x09\\\\x0a\\\\x0b\\\\x0c\\\\x0d\\\\x20\\\\xa0\\\\u1680\\\\u180e\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200a\\\\u202f\\\\u205f\\\\u3000\\\\u2028\\\\u2029]*,?[\\\\x09\\\\x0a\\\\x0b\\\\x0c\\\\x0d\\\\x20\\\\xa0\\\\u1680\\\\u180e\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200a\\\\u202f\\\\u205f\\\\u3000\\\\u2028\\\\u2029]*)+)/ig,\\r\\n        tCommand = /([rstm])[\\\\x09\\\\x0a\\\\x0b\\\\x0c\\\\x0d\\\\x20\\\\xa0\\\\u1680\\\\u180e\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200a\\\\u202f\\\\u205f\\\\u3000\\\\u2028\\\\u2029,]*((-?\\\\d*\\\\.?\\\\d*(?:e[\\\\-+]?\\\\d+)?[\\\\x09\\\\x0a\\\\x0b\\\\x0c\\\\x0d\\\\x20\\\\xa0\\\\u1680\\\\u180e\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200a\\\\u202f\\\\u205f\\\\u3000\\\\u2028\\\\u2029]*,?[\\\\x09\\\\x0a\\\\x0b\\\\x0c\\\\x0d\\\\x20\\\\xa0\\\\u1680\\\\u180e\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200a\\\\u202f\\\\u205f\\\\u3000\\\\u2028\\\\u2029]*)+)/ig,\\r\\n        pathValues = /(-?\\\\d*\\\\.?\\\\d*(?:e[\\\\-+]?\\\\d+)?)[\\\\x09\\\\x0a\\\\x0b\\\\x0c\\\\x0d\\\\x20\\\\xa0\\\\u1680\\\\u180e\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200a\\\\u202f\\\\u205f\\\\u3000\\\\u2028\\\\u2029]*,?[\\\\x09\\\\x0a\\\\x0b\\\\x0c\\\\x0d\\\\x20\\\\xa0\\\\u1680\\\\u180e\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200a\\\\u202f\\\\u205f\\\\u3000\\\\u2028\\\\u2029]*/ig,\\r\\n        radial_gradient = R._radial_gradient = /^r(?:\\\\(([^,]+?)[\\\\x09\\\\x0a\\\\x0b\\\\x0c\\\\x0d\\\\x20\\\\xa0\\\\u1680\\\\u180e\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200a\\\\u202f\\\\u205f\\\\u3000\\\\u2028\\\\u2029]*,[\\\\x09\\\\x0a\\\\x0b\\\\x0c\\\\x0d\\\\x20\\\\xa0\\\\u1680\\\\u180e\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200a\\\\u202f\\\\u205f\\\\u3000\\\\u2028\\\\u2029]*([^\\\\)]+?)\\\\))?/,\\r\\n        eldata = {},\\r\\n        sortByKey = function (a, b) {\\r\\n            return a.key - b.key;\\r\\n        },\\r\\n        sortByNumber = function (a, b) {\\r\\n            return toFloat(a) - toFloat(b);\\r\\n        },\\r\\n        fun = function () {},\\r\\n        pipe = function (x) {\\r\\n            return x;\\r\\n        },\\r\\n        rectPath = R._rectPath = function (x, y, w, h, r) {\\r\\n            if (r) {\\r\\n                return [[\\\"M\\\", x + r, y], [\\\"l\\\", w - r * 2, 0], [\\\"a\\\", r, r, 0, 0, 1, r, r], [\\\"l\\\", 0, h - r * 2], [\\\"a\\\", r, r, 0, 0, 1, -r, r], [\\\"l\\\", r * 2 - w, 0], [\\\"a\\\", r, r, 0, 0, 1, -r, -r], [\\\"l\\\", 0, r * 2 - h], [\\\"a\\\", r, r, 0, 0, 1, r, -r], [\\\"z\\\"]];\\r\\n            }\\r\\n            return [[\\\"M\\\", x, y], [\\\"l\\\", w, 0], [\\\"l\\\", 0, h], [\\\"l\\\", -w, 0], [\\\"z\\\"]];\\r\\n        },\\r\\n        ellipsePath = function (x, y, rx, ry) {\\r\\n            if (ry == null) {\\r\\n                ry = rx;\\r\\n            }\\r\\n            return [[\\\"M\\\", x, y], [\\\"m\\\", 0, -ry], [\\\"a\\\", rx, ry, 0, 1, 1, 0, 2 * ry], [\\\"a\\\", rx, ry, 0, 1, 1, 0, -2 * ry], [\\\"z\\\"]];\\r\\n        },\\r\\n        getPath = R._getPath = {\\r\\n            path: function (el) {\\r\\n                return el.attr(\\\"path\\\");\\r\\n            },\\r\\n            circle: function (el) {\\r\\n                var a = el.attrs;\\r\\n                return ellipsePath(a.cx, a.cy, a.r);\\r\\n            },\\r\\n            ellipse: function (el) {\\r\\n                var a = el.attrs;\\r\\n                return ellipsePath(a.cx, a.cy, a.rx, a.ry);\\r\\n            },\\r\\n            rect: function (el) {\\r\\n                var a = el.attrs;\\r\\n                return rectPath(a.x, a.y, a.width, a.height, a.r);\\r\\n            },\\r\\n            image: function (el) {\\r\\n                var a = el.attrs;\\r\\n                return rectPath(a.x, a.y, a.width, a.height);\\r\\n            },\\r\\n            text: function (el) {\\r\\n                var bbox = el._getBBox();\\r\\n                return rectPath(bbox.x, bbox.y, bbox.width, bbox.height);\\r\\n            },\\r\\n            set : function(el) {\\r\\n                var bbox = el._getBBox();\\r\\n                return rectPath(bbox.x, bbox.y, bbox.width, bbox.height);\\r\\n            }\\r\\n        },\\r\\n    /*\\\\\\r\\n     * Raphael.mapPath\\r\\n     [ method ]\\r\\n     **\\r\\n     * Transform the path string with given matrix.\\r\\n     > Parameters\\r\\n     - path (string) path string\\r\\n     - matrix (object) see @Matrix\\r\\n     = (string) transformed path string\\r\\n     \\\\*/\\r\\n        mapPath = R.mapPath = function (path, matrix) {\\r\\n            if (!matrix) {\\r\\n                return path;\\r\\n            }\\r\\n            var x, y, i, j, ii, jj, pathi;\\r\\n            path = path2curve(path);\\r\\n            for (i = 0, ii = path.length; i < ii; i++) {\\r\\n                pathi = path[i];\\r\\n                for (j = 1, jj = pathi.length; j < jj; j += 2) {\\r\\n                    x = matrix.x(pathi[j], pathi[j + 1]);\\r\\n                    y = matrix.y(pathi[j], pathi[j + 1]);\\r\\n                    pathi[j] = x;\\r\\n                    pathi[j + 1] = y;\\r\\n                }\\r\\n            }\\r\\n            return path;\\r\\n        };\\r\\n\\r\\n    R._g = g;\\r\\n    /*\\\\\\r\\n     * Raphael.type\\r\\n     [ property (string) ]\\r\\n     **\\r\\n     * Can be “SVG”, “VML” or empty, depending on browser support.\\r\\n     \\\\*/\\r\\n    R.type = (g.win.SVGAngle || g.doc.implementation.hasFeature(\\\"http://www.w3.org/TR/SVG11/feature#BasicStructure\\\", \\\"1.1\\\") ? \\\"SVG\\\" : \\\"VML\\\");\\r\\n    if (R.type == \\\"VML\\\") {\\r\\n        var d = g.doc.createElement(\\\"div\\\"),\\r\\n            b;\\r\\n        d.innerHTML = '<v:shape adj=\\\"1\\\"/>';\\r\\n        b = d.firstChild;\\r\\n        b.style.behavior = \\\"url(#default#VML)\\\";\\r\\n        if (!(b && typeof b.adj == \\\"object\\\")) {\\r\\n            return (R.type = E);\\r\\n        }\\r\\n        d = null;\\r\\n    }\\r\\n    /*\\\\\\r\\n     * Raphael.svg\\r\\n     [ property (boolean) ]\\r\\n     **\\r\\n     * `true` if browser supports SVG.\\r\\n     \\\\*/\\r\\n    /*\\\\\\r\\n     * Raphael.vml\\r\\n     [ property (boolean) ]\\r\\n     **\\r\\n     * `true` if browser supports VML.\\r\\n     \\\\*/\\r\\n    R.svg = !(R.vml = R.type == \\\"VML\\\");\\r\\n    R._Paper = Paper;\\r\\n    /*\\\\\\r\\n     * Raphael.fn\\r\\n     [ property (object) ]\\r\\n     **\\r\\n     * You can add your own method to the canvas. For example if you want to draw a pie chart,\\r\\n     * you can create your own pie chart function and ship it as a Raphaël plugin. To do this\\r\\n     * you need to extend the `Raphael.fn` object. You should modify the `fn` object before a\\r\\n     * Raphaël instance is created, otherwise it will take no effect. Please note that the\\r\\n     * ability for namespaced plugins was removed in Raphael 2.0. It is up to the plugin to\\r\\n     * ensure any namespacing ensures proper context.\\r\\n     > Usage\\r\\n     | Raphael.fn.arrow = function (x1, y1, x2, y2, size) {\\r\\n     |     return this.path( ... );\\r\\n     | };\\r\\n     | // or create namespace\\r\\n     | Raphael.fn.mystuff = {\\r\\n     |     arrow: function () {…},\\r\\n     |     star: function () {…},\\r\\n     |     // etc…\\r\\n     | };\\r\\n     | var paper = Raphael(10, 10, 630, 480);\\r\\n     | // then use it\\r\\n     | paper.arrow(10, 10, 30, 30, 5).attr({fill: \\\"#f00\\\"});\\r\\n     | paper.mystuff.arrow();\\r\\n     | paper.mystuff.star();\\r\\n     \\\\*/\\r\\n    R.fn = paperproto = Paper.prototype = R.prototype;\\r\\n    R._id = 0;\\r\\n    R._oid = 0;\\r\\n    /*\\\\\\r\\n     * Raphael.is\\r\\n     [ method ]\\r\\n     **\\r\\n     * Handful of replacements for `typeof` operator.\\r\\n     > Parameters\\r\\n     - o (…) any object or primitive\\r\\n     - type (string) name of the type, i.e. “string”, “function”, “number”, etc.\\r\\n     = (boolean) is given value is of given type\\r\\n     \\\\*/\\r\\n    R.is = function (o, type) {\\r\\n        type = lowerCase.call(type);\\r\\n        if (type == \\\"finite\\\") {\\r\\n            return !isnan[has](+o);\\r\\n        }\\r\\n        if (type == \\\"array\\\") {\\r\\n            return o instanceof Array;\\r\\n        }\\r\\n        return  (type == \\\"null\\\" && o === null) ||\\r\\n            (type == typeof o && o !== null) ||\\r\\n            (type == \\\"object\\\" && o === Object(o)) ||\\r\\n            (type == \\\"array\\\" && Array.isArray && Array.isArray(o)) ||\\r\\n            objectToString.call(o).slice(8, -1).toLowerCase() == type;\\r\\n    };\\r\\n\\r\\n    function clone(obj) {\\r\\n        if (typeof obj == \\\"function\\\" || Object(obj) !== obj) {\\r\\n            return obj;\\r\\n        }\\r\\n        var res = new obj.constructor;\\r\\n        for (var key in obj) if (obj[has](key)) {\\r\\n            res[key] = clone(obj[key]);\\r\\n        }\\r\\n        return res;\\r\\n    }\\r\\n\\r\\n    /*\\\\\\r\\n     * Raphael.angle\\r\\n     [ method ]\\r\\n     **\\r\\n     * Returns angle between two or three points\\r\\n     > Parameters\\r\\n     - x1 (number) x coord of first point\\r\\n     - y1 (number) y coord of first point\\r\\n     - x2 (number) x coord of second point\\r\\n     - y2 (number) y coord of second point\\r\\n     - x3 (number) #optional x coord of third point\\r\\n     - y3 (number) #optional y coord of third point\\r\\n     = (number) angle in degrees.\\r\\n     \\\\*/\\r\\n    R.angle = function (x1, y1, x2, y2, x3, y3) {\\r\\n        if (x3 == null) {\\r\\n            var x = x1 - x2,\\r\\n                y = y1 - y2;\\r\\n            if (!x && !y) {\\r\\n                return 0;\\r\\n            }\\r\\n            return (180 + math.atan2(-y, -x) * 180 / PI + 360) % 360;\\r\\n        } else {\\r\\n            return R.angle(x1, y1, x3, y3) - R.angle(x2, y2, x3, y3);\\r\\n        }\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Raphael.rad\\r\\n     [ method ]\\r\\n     **\\r\\n     * Transform angle to radians\\r\\n     > Parameters\\r\\n     - deg (number) angle in degrees\\r\\n     = (number) angle in radians.\\r\\n     \\\\*/\\r\\n    R.rad = function (deg) {\\r\\n        return deg % 360 * PI / 180;\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Raphael.deg\\r\\n     [ method ]\\r\\n     **\\r\\n     * Transform angle to degrees\\r\\n     > Parameters\\r\\n     - rad (number) angle in radians\\r\\n     = (number) angle in degrees.\\r\\n     \\\\*/\\r\\n    R.deg = function (rad) {\\r\\n        return Math.round ((rad * 180 / PI% 360)* 1000) / 1000;\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Raphael.snapTo\\r\\n     [ method ]\\r\\n     **\\r\\n     * Snaps given value to given grid.\\r\\n     > Parameters\\r\\n     - values (array|number) given array of values or step of the grid\\r\\n     - value (number) value to adjust\\r\\n     - tolerance (number) #optional tolerance for snapping. Default is `10`.\\r\\n     = (number) adjusted value.\\r\\n     \\\\*/\\r\\n    R.snapTo = function (values, value, tolerance) {\\r\\n        tolerance = R.is(tolerance, \\\"finite\\\") ? tolerance : 10;\\r\\n        if (R.is(values, array)) {\\r\\n            var i = values.length;\\r\\n            while (i--) if (abs(values[i] - value) <= tolerance) {\\r\\n                return values[i];\\r\\n            }\\r\\n        } else {\\r\\n            values = +values;\\r\\n            var rem = value % values;\\r\\n            if (rem < tolerance) {\\r\\n                return value - rem;\\r\\n            }\\r\\n            if (rem > values - tolerance) {\\r\\n                return value - rem + values;\\r\\n            }\\r\\n        }\\r\\n        return value;\\r\\n    };\\r\\n\\r\\n    /*\\\\\\r\\n     * Raphael.createUUID\\r\\n     [ method ]\\r\\n     **\\r\\n     * Returns RFC4122, version 4 ID\\r\\n     \\\\*/\\r\\n    var createUUID = R.createUUID = (function (uuidRegEx, uuidReplacer) {\\r\\n        return function () {\\r\\n            return \\\"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\\\".replace(uuidRegEx, uuidReplacer).toUpperCase();\\r\\n        };\\r\\n    })(/[xy]/g, function (c) {\\r\\n        var r = math.random() * 16 | 0,\\r\\n            v = c == \\\"x\\\" ? r : (r & 3 | 8);\\r\\n        return v.toString(16);\\r\\n    });\\r\\n\\r\\n    /*\\\\\\r\\n     * Raphael.setWindow\\r\\n     [ method ]\\r\\n     **\\r\\n     * Used when you need to draw in `&lt;iframe>`. Switched window to the iframe one.\\r\\n     > Parameters\\r\\n     - newwin (window) new window object\\r\\n     \\\\*/\\r\\n    R.setWindow = function (newwin) {\\r\\n        eve(\\\"raphael.setWindow\\\", R, g.win, newwin);\\r\\n        g.win = newwin;\\r\\n        g.doc = g.win.document;\\r\\n        if (R._engine.initWin) {\\r\\n            R._engine.initWin(g.win);\\r\\n        }\\r\\n    };\\r\\n    var toHex = function (color) {\\r\\n            if (R.vml) {\\r\\n                // http://dean.edwards.name/weblog/2009/10/convert-any-colour-value-to-hex-in-msie/\\r\\n                var trim = /^\\\\s+|\\\\s+$/g;\\r\\n                var bod;\\r\\n                try {\\r\\n                    var docum = new ActiveXObject(\\\"htmlfile\\\");\\r\\n                    docum.write(\\\"<body>\\\");\\r\\n                    docum.close();\\r\\n                    bod = docum.body;\\r\\n                } catch(e) {\\r\\n                    bod = createPopup().document.body;\\r\\n                }\\r\\n                var range = bod.createTextRange();\\r\\n                toHex = cacher(function (color) {\\r\\n                    try {\\r\\n                        bod.style.color = Str(color).replace(trim, E);\\r\\n                        var value = range.queryCommandValue(\\\"ForeColor\\\");\\r\\n                        value = ((value & 255) << 16) | (value & 65280) | ((value & 16711680) >>> 16);\\r\\n                        return \\\"#\\\" + (\\\"000000\\\" + value.toString(16)).slice(-6);\\r\\n                    } catch(e) {\\r\\n                        return \\\"none\\\";\\r\\n                    }\\r\\n                });\\r\\n            } else {\\r\\n                var i = g.doc.createElement(\\\"i\\\");\\r\\n                i.title = \\\"Rapha\\\\xebl Colour Picker\\\";\\r\\n                i.style.display = \\\"none\\\";\\r\\n                g.doc.body.appendChild(i);\\r\\n                toHex = cacher(function (color) {\\r\\n                    i.style.color = color;\\r\\n                    return g.doc.defaultView.getComputedStyle(i, E).getPropertyValue(\\\"color\\\");\\r\\n                });\\r\\n            }\\r\\n            return toHex(color);\\r\\n        },\\r\\n        hsbtoString = function () {\\r\\n            return \\\"hsb(\\\" + [this.h, this.s, this.b] + \\\")\\\";\\r\\n        },\\r\\n        hsltoString = function () {\\r\\n            return \\\"hsl(\\\" + [this.h, this.s, this.l] + \\\")\\\";\\r\\n        },\\r\\n        rgbtoString = function () {\\r\\n            return this.hex;\\r\\n        },\\r\\n        prepareRGB = function (r, g, b) {\\r\\n            if (g == null && R.is(r, \\\"object\\\") && \\\"r\\\" in r && \\\"g\\\" in r && \\\"b\\\" in r) {\\r\\n                b = r.b;\\r\\n                g = r.g;\\r\\n                r = r.r;\\r\\n            }\\r\\n            if (g == null && R.is(r, string)) {\\r\\n                var clr = R.getRGB(r);\\r\\n                r = clr.r;\\r\\n                g = clr.g;\\r\\n                b = clr.b;\\r\\n            }\\r\\n            if (r > 1 || g > 1 || b > 1) {\\r\\n                r /= 255;\\r\\n                g /= 255;\\r\\n                b /= 255;\\r\\n            }\\r\\n\\r\\n            return [r, g, b];\\r\\n        },\\r\\n        packageRGB = function (r, g, b, o) {\\r\\n            r *= 255;\\r\\n            g *= 255;\\r\\n            b *= 255;\\r\\n            var rgb = {\\r\\n                r: r,\\r\\n                g: g,\\r\\n                b: b,\\r\\n                hex: R.rgb(r, g, b),\\r\\n                toString: rgbtoString\\r\\n            };\\r\\n            R.is(o, \\\"finite\\\") && (rgb.opacity = o);\\r\\n            return rgb;\\r\\n        };\\r\\n\\r\\n    /*\\\\\\r\\n     * Raphael.color\\r\\n     [ method ]\\r\\n     **\\r\\n     * Parses the color string and returns object with all values for the given color.\\r\\n     > Parameters\\r\\n     - clr (string) color string in one of the supported formats (see @Raphael.getRGB)\\r\\n     = (object) Combined RGB & HSB object in format:\\r\\n     o {\\r\\n     o     r (number) red,\\r\\n     o     g (number) green,\\r\\n     o     b (number) blue,\\r\\n     o     hex (string) color in HTML/CSS format: #••••••,\\r\\n     o     error (boolean) `true` if string can’t be parsed,\\r\\n     o     h (number) hue,\\r\\n     o     s (number) saturation,\\r\\n     o     v (number) value (brightness),\\r\\n     o     l (number) lightness\\r\\n     o }\\r\\n     \\\\*/\\r\\n    R.color = function (clr) {\\r\\n        var rgb;\\r\\n        if (R.is(clr, \\\"object\\\") && \\\"h\\\" in clr && \\\"s\\\" in clr && \\\"b\\\" in clr) {\\r\\n            rgb = R.hsb2rgb(clr);\\r\\n            clr.r = rgb.r;\\r\\n            clr.g = rgb.g;\\r\\n            clr.b = rgb.b;\\r\\n            clr.hex = rgb.hex;\\r\\n        } else if (R.is(clr, \\\"object\\\") && \\\"h\\\" in clr && \\\"s\\\" in clr && \\\"l\\\" in clr) {\\r\\n            rgb = R.hsl2rgb(clr);\\r\\n            clr.r = rgb.r;\\r\\n            clr.g = rgb.g;\\r\\n            clr.b = rgb.b;\\r\\n            clr.hex = rgb.hex;\\r\\n        } else {\\r\\n            if (R.is(clr, \\\"string\\\")) {\\r\\n                clr = R.getRGB(clr);\\r\\n            }\\r\\n            if (R.is(clr, \\\"object\\\") && \\\"r\\\" in clr && \\\"g\\\" in clr && \\\"b\\\" in clr) {\\r\\n                rgb = R.rgb2hsl(clr);\\r\\n                clr.h = rgb.h;\\r\\n                clr.s = rgb.s;\\r\\n                clr.l = rgb.l;\\r\\n                rgb = R.rgb2hsb(clr);\\r\\n                clr.v = rgb.b;\\r\\n            } else {\\r\\n                clr = {hex: \\\"none\\\"};\\r\\n                clr.r = clr.g = clr.b = clr.h = clr.s = clr.v = clr.l = -1;\\r\\n            }\\r\\n        }\\r\\n        clr.toString = rgbtoString;\\r\\n        return clr;\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Raphael.hsb2rgb\\r\\n     [ method ]\\r\\n     **\\r\\n     * Converts HSB values to RGB object.\\r\\n     > Parameters\\r\\n     - h (number) hue\\r\\n     - s (number) saturation\\r\\n     - v (number) value or brightness\\r\\n     = (object) RGB object in format:\\r\\n     o {\\r\\n     o     r (number) red,\\r\\n     o     g (number) green,\\r\\n     o     b (number) blue,\\r\\n     o     hex (string) color in HTML/CSS format: #••••••\\r\\n     o }\\r\\n     \\\\*/\\r\\n    R.hsb2rgb = function (h, s, v, o) {\\r\\n        if (this.is(h, \\\"object\\\") && \\\"h\\\" in h && \\\"s\\\" in h && \\\"b\\\" in h) {\\r\\n            v = h.b;\\r\\n            s = h.s;\\r\\n            o = h.o;\\r\\n            h = h.h;\\r\\n        }\\r\\n        h *= 360;\\r\\n        var R, G, B, X, C;\\r\\n        h = (h % 360) / 60;\\r\\n        C = v * s;\\r\\n        X = C * (1 - abs(h % 2 - 1));\\r\\n        R = G = B = v - C;\\r\\n\\r\\n        h = ~~h;\\r\\n        R += [C, X, 0, 0, X, C][h];\\r\\n        G += [X, C, C, X, 0, 0][h];\\r\\n        B += [0, 0, X, C, C, X][h];\\r\\n        return packageRGB(R, G, B, o);\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Raphael.hsl2rgb\\r\\n     [ method ]\\r\\n     **\\r\\n     * Converts HSL values to RGB object.\\r\\n     > Parameters\\r\\n     - h (number) hue\\r\\n     - s (number) saturation\\r\\n     - l (number) luminosity\\r\\n     = (object) RGB object in format:\\r\\n     o {\\r\\n     o     r (number) red,\\r\\n     o     g (number) green,\\r\\n     o     b (number) blue,\\r\\n     o     hex (string) color in HTML/CSS format: #••••••\\r\\n     o }\\r\\n     \\\\*/\\r\\n    R.hsl2rgb = function (h, s, l, o) {\\r\\n        if (this.is(h, \\\"object\\\") && \\\"h\\\" in h && \\\"s\\\" in h && \\\"l\\\" in h) {\\r\\n            l = h.l;\\r\\n            s = h.s;\\r\\n            h = h.h;\\r\\n        }\\r\\n        if (h > 1 || s > 1 || l > 1) {\\r\\n            h /= 360;\\r\\n            s /= 100;\\r\\n            l /= 100;\\r\\n        }\\r\\n        h *= 360;\\r\\n        var R, G, B, X, C;\\r\\n        h = (h % 360) / 60;\\r\\n        C = 2 * s * (l < .5 ? l : 1 - l);\\r\\n        X = C * (1 - abs(h % 2 - 1));\\r\\n        R = G = B = l - C / 2;\\r\\n\\r\\n        h = ~~h;\\r\\n        R += [C, X, 0, 0, X, C][h];\\r\\n        G += [X, C, C, X, 0, 0][h];\\r\\n        B += [0, 0, X, C, C, X][h];\\r\\n        return packageRGB(R, G, B, o);\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Raphael.rgb2hsb\\r\\n     [ method ]\\r\\n     **\\r\\n     * Converts RGB values to HSB object.\\r\\n     > Parameters\\r\\n     - r (number) red\\r\\n     - g (number) green\\r\\n     - b (number) blue\\r\\n     = (object) HSB object in format:\\r\\n     o {\\r\\n     o     h (number) hue\\r\\n     o     s (number) saturation\\r\\n     o     b (number) brightness\\r\\n     o }\\r\\n     \\\\*/\\r\\n    R.rgb2hsb = function (r, g, b) {\\r\\n        b = prepareRGB(r, g, b);\\r\\n        r = b[0];\\r\\n        g = b[1];\\r\\n        b = b[2];\\r\\n\\r\\n        var H, S, V, C;\\r\\n        V = mmax(r, g, b);\\r\\n        C = V - mmin(r, g, b);\\r\\n        H = (C == 0 ? null :\\r\\n                V == r ? (g - b) / C :\\r\\n                    V == g ? (b - r) / C + 2 :\\r\\n                    (r - g) / C + 4\\r\\n        );\\r\\n        H = ((H + 360) % 6) * 60 / 360;\\r\\n        S = C == 0 ? 0 : C / V;\\r\\n        return {h: H, s: S, b: V, toString: hsbtoString};\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Raphael.rgb2hsl\\r\\n     [ method ]\\r\\n     **\\r\\n     * Converts RGB values to HSL object.\\r\\n     > Parameters\\r\\n     - r (number) red\\r\\n     - g (number) green\\r\\n     - b (number) blue\\r\\n     = (object) HSL object in format:\\r\\n     o {\\r\\n     o     h (number) hue\\r\\n     o     s (number) saturation\\r\\n     o     l (number) luminosity\\r\\n     o }\\r\\n     \\\\*/\\r\\n    R.rgb2hsl = function (r, g, b) {\\r\\n        b = prepareRGB(r, g, b);\\r\\n        r = b[0];\\r\\n        g = b[1];\\r\\n        b = b[2];\\r\\n\\r\\n        var H, S, L, M, m, C;\\r\\n        M = mmax(r, g, b);\\r\\n        m = mmin(r, g, b);\\r\\n        C = M - m;\\r\\n        H = (C == 0 ? null :\\r\\n            M == r ? (g - b) / C :\\r\\n                M == g ? (b - r) / C + 2 :\\r\\n                (r - g) / C + 4);\\r\\n        H = ((H + 360) % 6) * 60 / 360;\\r\\n        L = (M + m) / 2;\\r\\n        S = (C == 0 ? 0 :\\r\\n            L < .5 ? C / (2 * L) :\\r\\n            C / (2 - 2 * L));\\r\\n        return {h: H, s: S, l: L, toString: hsltoString};\\r\\n    };\\r\\n    R._path2string = function () {\\r\\n        return this.join(\\\",\\\").replace(p2s, \\\"$1\\\");\\r\\n    };\\r\\n    function repush(array, item) {\\r\\n        for (var i = 0, ii = array.length; i < ii; i++) if (array[i] === item) {\\r\\n            return array.push(array.splice(i, 1)[0]);\\r\\n        }\\r\\n    }\\r\\n    function cacher(f, scope, postprocessor) {\\r\\n        function newf() {\\r\\n            var arg = Array.prototype.slice.call(arguments, 0),\\r\\n                args = arg.join(\\\"\\\\u2400\\\"),\\r\\n                cache = newf.cache = newf.cache || {},\\r\\n                count = newf.count = newf.count || [];\\r\\n            if (cache[has](args)) {\\r\\n                repush(count, args);\\r\\n                return postprocessor ? postprocessor(cache[args]) : cache[args];\\r\\n            }\\r\\n            count.length >= 1e3 && delete cache[count.shift()];\\r\\n            count.push(args);\\r\\n            cache[args] = f[apply](scope, arg);\\r\\n            return postprocessor ? postprocessor(cache[args]) : cache[args];\\r\\n        }\\r\\n        return newf;\\r\\n    }\\r\\n\\r\\n    var preload = R._preload = function (src, f) {\\r\\n        var img = g.doc.createElement(\\\"img\\\");\\r\\n        img.style.cssText = \\\"position:absolute;left:-9999em;top:-9999em\\\";\\r\\n        img.onload = function () {\\r\\n            f.call(this);\\r\\n            this.onload = null;\\r\\n            g.doc.body.removeChild(this);\\r\\n        };\\r\\n        img.onerror = function () {\\r\\n            g.doc.body.removeChild(this);\\r\\n        };\\r\\n        g.doc.body.appendChild(img);\\r\\n        img.src = src;\\r\\n    };\\r\\n\\r\\n    function clrToString() {\\r\\n        return this.hex;\\r\\n    }\\r\\n\\r\\n    /*\\\\\\r\\n     * Raphael.getRGB\\r\\n     [ method ]\\r\\n     **\\r\\n     * Parses colour string as RGB object\\r\\n     > Parameters\\r\\n     - colour (string) colour string in one of formats:\\r\\n     # <ul>\\r\\n     #     <li>Colour name (“<code>red</code>”, “<code>green</code>”, “<code>cornflowerblue</code>”, etc)</li>\\r\\n     #     <li>#••• — shortened HTML colour: (“<code>#000</code>”, “<code>#fc0</code>”, etc)</li>\\r\\n     #     <li>#•••••• — full length HTML colour: (“<code>#000000</code>”, “<code>#bd2300</code>”)</li>\\r\\n     #     <li>rgb(•••, •••, •••) — red, green and blue channels’ values: (“<code>rgb(200,&nbsp;100,&nbsp;0)</code>”)</li>\\r\\n     #     <li>rgb(•••%, •••%, •••%) — same as above, but in %: (“<code>rgb(100%,&nbsp;175%,&nbsp;0%)</code>”)</li>\\r\\n     #     <li>hsb(•••, •••, •••) — hue, saturation and brightness values: (“<code>hsb(0.5,&nbsp;0.25,&nbsp;1)</code>”)</li>\\r\\n     #     <li>hsb(•••%, •••%, •••%) — same as above, but in %</li>\\r\\n     #     <li>hsl(•••, •••, •••) — same as hsb</li>\\r\\n     #     <li>hsl(•••%, •••%, •••%) — same as hsb</li>\\r\\n     # </ul>\\r\\n     = (object) RGB object in format:\\r\\n     o {\\r\\n     o     r (number) red,\\r\\n     o     g (number) green,\\r\\n     o     b (number) blue\\r\\n     o     hex (string) color in HTML/CSS format: #••••••,\\r\\n     o     error (boolean) true if string can’t be parsed\\r\\n     o }\\r\\n     \\\\*/\\r\\n    R.getRGB = cacher(function (colour) {\\r\\n        if (!colour || !!((colour = Str(colour)).indexOf(\\\"-\\\") + 1)) {\\r\\n            return {r: -1, g: -1, b: -1, hex: \\\"none\\\", error: 1, toString: clrToString};\\r\\n        }\\r\\n        if (colour == \\\"none\\\") {\\r\\n            return {r: -1, g: -1, b: -1, hex: \\\"none\\\", toString: clrToString};\\r\\n        }\\r\\n        !(hsrg[has](colour.toLowerCase().substring(0, 2)) || colour.charAt() == \\\"#\\\") && (colour = toHex(colour));\\r\\n        var res,\\r\\n            red,\\r\\n            green,\\r\\n            blue,\\r\\n            opacity,\\r\\n            t,\\r\\n            values,\\r\\n            rgb = colour.match(colourRegExp);\\r\\n        if (rgb) {\\r\\n            if (rgb[2]) {\\r\\n                blue = toInt(rgb[2].substring(5), 16);\\r\\n                green = toInt(rgb[2].substring(3, 5), 16);\\r\\n                red = toInt(rgb[2].substring(1, 3), 16);\\r\\n            }\\r\\n            if (rgb[3]) {\\r\\n                blue = toInt((t = rgb[3].charAt(3)) + t, 16);\\r\\n                green = toInt((t = rgb[3].charAt(2)) + t, 16);\\r\\n                red = toInt((t = rgb[3].charAt(1)) + t, 16);\\r\\n            }\\r\\n            if (rgb[4]) {\\r\\n                values = rgb[4][split](commaSpaces);\\r\\n                red = toFloat(values[0]);\\r\\n                values[0].slice(-1) == \\\"%\\\" && (red *= 2.55);\\r\\n                green = toFloat(values[1]);\\r\\n                values[1].slice(-1) == \\\"%\\\" && (green *= 2.55);\\r\\n                blue = toFloat(values[2]);\\r\\n                values[2].slice(-1) == \\\"%\\\" && (blue *= 2.55);\\r\\n                rgb[1].toLowerCase().slice(0, 4) == \\\"rgba\\\" && (opacity = toFloat(values[3]));\\r\\n                values[3] && values[3].slice(-1) == \\\"%\\\" && (opacity /= 100);\\r\\n            }\\r\\n            if (rgb[5]) {\\r\\n                values = rgb[5][split](commaSpaces);\\r\\n                red = toFloat(values[0]);\\r\\n                values[0].slice(-1) == \\\"%\\\" && (red *= 2.55);\\r\\n                green = toFloat(values[1]);\\r\\n                values[1].slice(-1) == \\\"%\\\" && (green *= 2.55);\\r\\n                blue = toFloat(values[2]);\\r\\n                values[2].slice(-1) == \\\"%\\\" && (blue *= 2.55);\\r\\n                (values[0].slice(-3) == \\\"deg\\\" || values[0].slice(-1) == \\\"\\\\xb0\\\") && (red /= 360);\\r\\n                rgb[1].toLowerCase().slice(0, 4) == \\\"hsba\\\" && (opacity = toFloat(values[3]));\\r\\n                values[3] && values[3].slice(-1) == \\\"%\\\" && (opacity /= 100);\\r\\n                return R.hsb2rgb(red, green, blue, opacity);\\r\\n            }\\r\\n            if (rgb[6]) {\\r\\n                values = rgb[6][split](commaSpaces);\\r\\n                red = toFloat(values[0]);\\r\\n                values[0].slice(-1) == \\\"%\\\" && (red *= 2.55);\\r\\n                green = toFloat(values[1]);\\r\\n                values[1].slice(-1) == \\\"%\\\" && (green *= 2.55);\\r\\n                blue = toFloat(values[2]);\\r\\n                values[2].slice(-1) == \\\"%\\\" && (blue *= 2.55);\\r\\n                (values[0].slice(-3) == \\\"deg\\\" || values[0].slice(-1) == \\\"\\\\xb0\\\") && (red /= 360);\\r\\n                rgb[1].toLowerCase().slice(0, 4) == \\\"hsla\\\" && (opacity = toFloat(values[3]));\\r\\n                values[3] && values[3].slice(-1) == \\\"%\\\" && (opacity /= 100);\\r\\n                return R.hsl2rgb(red, green, blue, opacity);\\r\\n            }\\r\\n            rgb = {r: red, g: green, b: blue, toString: clrToString};\\r\\n            rgb.hex = \\\"#\\\" + (16777216 | blue | (green << 8) | (red << 16)).toString(16).slice(1);\\r\\n            R.is(opacity, \\\"finite\\\") && (rgb.opacity = opacity);\\r\\n            return rgb;\\r\\n        }\\r\\n        return {r: -1, g: -1, b: -1, hex: \\\"none\\\", error: 1, toString: clrToString};\\r\\n    }, R);\\r\\n    /*\\\\\\r\\n     * Raphael.hsb\\r\\n     [ method ]\\r\\n     **\\r\\n     * Converts HSB values to hex representation of the colour.\\r\\n     > Parameters\\r\\n     - h (number) hue\\r\\n     - s (number) saturation\\r\\n     - b (number) value or brightness\\r\\n     = (string) hex representation of the colour.\\r\\n     \\\\*/\\r\\n    R.hsb = cacher(function (h, s, b) {\\r\\n        return R.hsb2rgb(h, s, b).hex;\\r\\n    });\\r\\n    /*\\\\\\r\\n     * Raphael.hsl\\r\\n     [ method ]\\r\\n     **\\r\\n     * Converts HSL values to hex representation of the colour.\\r\\n     > Parameters\\r\\n     - h (number) hue\\r\\n     - s (number) saturation\\r\\n     - l (number) luminosity\\r\\n     = (string) hex representation of the colour.\\r\\n     \\\\*/\\r\\n    R.hsl = cacher(function (h, s, l) {\\r\\n        return R.hsl2rgb(h, s, l).hex;\\r\\n    });\\r\\n    /*\\\\\\r\\n     * Raphael.rgb\\r\\n     [ method ]\\r\\n     **\\r\\n     * Converts RGB values to hex representation of the colour.\\r\\n     > Parameters\\r\\n     - r (number) red\\r\\n     - g (number) green\\r\\n     - b (number) blue\\r\\n     = (string) hex representation of the colour.\\r\\n     \\\\*/\\r\\n    R.rgb = cacher(function (r, g, b) {\\r\\n        function round(x) { return (x + 0.5) | 0; }\\r\\n        return \\\"#\\\" + (16777216 | round(b) | (round(g) << 8) | (round(r) << 16)).toString(16).slice(1);\\r\\n    });\\r\\n    /*\\\\\\r\\n     * Raphael.getColor\\r\\n     [ method ]\\r\\n     **\\r\\n     * On each call returns next colour in the spectrum. To reset it back to red call @Raphael.getColor.reset\\r\\n     > Parameters\\r\\n     - value (number) #optional brightness, default is `0.75`\\r\\n     = (string) hex representation of the colour.\\r\\n     \\\\*/\\r\\n    R.getColor = function (value) {\\r\\n        var start = this.getColor.start = this.getColor.start || {h: 0, s: 1, b: value || .75},\\r\\n            rgb = this.hsb2rgb(start.h, start.s, start.b);\\r\\n        start.h += .075;\\r\\n        if (start.h > 1) {\\r\\n            start.h = 0;\\r\\n            start.s -= .2;\\r\\n            start.s <= 0 && (this.getColor.start = {h: 0, s: 1, b: start.b});\\r\\n        }\\r\\n        return rgb.hex;\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Raphael.getColor.reset\\r\\n     [ method ]\\r\\n     **\\r\\n     * Resets spectrum position for @Raphael.getColor back to red.\\r\\n     \\\\*/\\r\\n    R.getColor.reset = function () {\\r\\n        delete this.start;\\r\\n    };\\r\\n\\r\\n    // http://schepers.cc/getting-to-the-point\\r\\n    function catmullRom2bezier(crp, z) {\\r\\n        var d = [];\\r\\n        for (var i = 0, iLen = crp.length; iLen - 2 * !z > i; i += 2) {\\r\\n            var p = [\\r\\n                {x: +crp[i - 2], y: +crp[i - 1]},\\r\\n                {x: +crp[i],     y: +crp[i + 1]},\\r\\n                {x: +crp[i + 2], y: +crp[i + 3]},\\r\\n                {x: +crp[i + 4], y: +crp[i + 5]}\\r\\n            ];\\r\\n            if (z) {\\r\\n                if (!i) {\\r\\n                    p[0] = {x: +crp[iLen - 2], y: +crp[iLen - 1]};\\r\\n                } else if (iLen - 4 == i) {\\r\\n                    p[3] = {x: +crp[0], y: +crp[1]};\\r\\n                } else if (iLen - 2 == i) {\\r\\n                    p[2] = {x: +crp[0], y: +crp[1]};\\r\\n                    p[3] = {x: +crp[2], y: +crp[3]};\\r\\n                }\\r\\n            } else {\\r\\n                if (iLen - 4 == i) {\\r\\n                    p[3] = p[2];\\r\\n                } else if (!i) {\\r\\n                    p[0] = {x: +crp[i], y: +crp[i + 1]};\\r\\n                }\\r\\n            }\\r\\n            d.push([\\\"C\\\",\\r\\n                (-p[0].x + 6 * p[1].x + p[2].x) / 6,\\r\\n                (-p[0].y + 6 * p[1].y + p[2].y) / 6,\\r\\n                (p[1].x + 6 * p[2].x - p[3].x) / 6,\\r\\n                (p[1].y + 6*p[2].y - p[3].y) / 6,\\r\\n                p[2].x,\\r\\n                p[2].y\\r\\n            ]);\\r\\n        }\\r\\n\\r\\n        return d;\\r\\n    }\\r\\n    /*\\\\\\r\\n     * Raphael.parsePathString\\r\\n     [ method ]\\r\\n     **\\r\\n     * Utility method\\r\\n     **\\r\\n     * Parses given path string into an array of arrays of path segments.\\r\\n     > Parameters\\r\\n     - pathString (string|array) path string or array of segments (in the last case it will be returned straight away)\\r\\n     = (array) array of segments.\\r\\n     \\\\*/\\r\\n    R.parsePathString = function (pathString) {\\r\\n        if (!pathString) {\\r\\n            return null;\\r\\n        }\\r\\n        var pth = paths(pathString);\\r\\n        if (pth.arr) {\\r\\n            return pathClone(pth.arr);\\r\\n        }\\r\\n\\r\\n        var paramCounts = {a: 7, c: 6, h: 1, l: 2, m: 2, r: 4, q: 4, s: 4, t: 2, v: 1, z: 0},\\r\\n            data = [];\\r\\n        if (R.is(pathString, array) && R.is(pathString[0], array)) { // rough assumption\\r\\n            data = pathClone(pathString);\\r\\n        }\\r\\n        if (!data.length) {\\r\\n            Str(pathString).replace(pathCommand, function (a, b, c) {\\r\\n                var params = [],\\r\\n                    name = b.toLowerCase();\\r\\n                c.replace(pathValues, function (a, b) {\\r\\n                    b && params.push(+b);\\r\\n                });\\r\\n                if (name == \\\"m\\\" && params.length > 2) {\\r\\n                    data.push([b][concat](params.splice(0, 2)));\\r\\n                    name = \\\"l\\\";\\r\\n                    b = b == \\\"m\\\" ? \\\"l\\\" : \\\"L\\\";\\r\\n                }\\r\\n                if (name == \\\"r\\\") {\\r\\n                    data.push([b][concat](params));\\r\\n                } else while (params.length >= paramCounts[name]) {\\r\\n                    data.push([b][concat](params.splice(0, paramCounts[name])));\\r\\n                    if (!paramCounts[name]) {\\r\\n                        break;\\r\\n                    }\\r\\n                }\\r\\n            });\\r\\n        }\\r\\n        data.toString = R._path2string;\\r\\n        pth.arr = pathClone(data);\\r\\n        return data;\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Raphael.parseTransformString\\r\\n     [ method ]\\r\\n     **\\r\\n     * Utility method\\r\\n     **\\r\\n     * Parses given path string into an array of transformations.\\r\\n     > Parameters\\r\\n     - TString (string|array) transform string or array of transformations (in the last case it will be returned straight away)\\r\\n     = (array) array of transformations.\\r\\n     \\\\*/\\r\\n    R.parseTransformString = cacher(function (TString) {\\r\\n        if (!TString) {\\r\\n            return null;\\r\\n        }\\r\\n        var paramCounts = {r: 3, s: 4, t: 2, m: 6},\\r\\n            data = [];\\r\\n        if (R.is(TString, array) && R.is(TString[0], array)) { // rough assumption\\r\\n            data = pathClone(TString);\\r\\n        }\\r\\n        if (!data.length) {\\r\\n            Str(TString).replace(tCommand, function (a, b, c) {\\r\\n                var params = [],\\r\\n                    name = lowerCase.call(b);\\r\\n                c.replace(pathValues, function (a, b) {\\r\\n                    b && params.push(+b);\\r\\n                });\\r\\n                data.push([b][concat](params));\\r\\n            });\\r\\n        }\\r\\n        data.toString = R._path2string;\\r\\n        return data;\\r\\n    });\\r\\n    // PATHS\\r\\n    var paths = function (ps) {\\r\\n        var p = paths.ps = paths.ps || {};\\r\\n        if (p[ps]) {\\r\\n            p[ps].sleep = 100;\\r\\n        } else {\\r\\n            p[ps] = {\\r\\n                sleep: 100\\r\\n            };\\r\\n        }\\r\\n        setTimeout(function () {\\r\\n            for (var key in p) if (p[has](key) && key != ps) {\\r\\n                p[key].sleep--;\\r\\n                !p[key].sleep && delete p[key];\\r\\n            }\\r\\n        });\\r\\n        return p[ps];\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Raphael.findDotsAtSegment\\r\\n     [ method ]\\r\\n     **\\r\\n     * Utility method\\r\\n     **\\r\\n     * Find dot coordinates on the given cubic bezier curve at the given t.\\r\\n     > Parameters\\r\\n     - p1x (number) x of the first point of the curve\\r\\n     - p1y (number) y of the first point of the curve\\r\\n     - c1x (number) x of the first anchor of the curve\\r\\n     - c1y (number) y of the first anchor of the curve\\r\\n     - c2x (number) x of the second anchor of the curve\\r\\n     - c2y (number) y of the second anchor of the curve\\r\\n     - p2x (number) x of the second point of the curve\\r\\n     - p2y (number) y of the second point of the curve\\r\\n     - t (number) position on the curve (0..1)\\r\\n     = (object) point information in format:\\r\\n     o {\\r\\n     o     x: (number) x coordinate of the point\\r\\n     o     y: (number) y coordinate of the point\\r\\n     o     m: {\\r\\n     o         x: (number) x coordinate of the left anchor\\r\\n     o         y: (number) y coordinate of the left anchor\\r\\n     o     }\\r\\n     o     n: {\\r\\n     o         x: (number) x coordinate of the right anchor\\r\\n     o         y: (number) y coordinate of the right anchor\\r\\n     o     }\\r\\n     o     start: {\\r\\n     o         x: (number) x coordinate of the start of the curve\\r\\n     o         y: (number) y coordinate of the start of the curve\\r\\n     o     }\\r\\n     o     end: {\\r\\n     o         x: (number) x coordinate of the end of the curve\\r\\n     o         y: (number) y coordinate of the end of the curve\\r\\n     o     }\\r\\n     o     alpha: (number) angle of the curve derivative at the point\\r\\n     o }\\r\\n     \\\\*/\\r\\n    R.findDotsAtSegment = function (p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t) {\\r\\n        var t1 = 1 - t,\\r\\n            t13 = pow(t1, 3),\\r\\n            t12 = pow(t1, 2),\\r\\n            t2 = t * t,\\r\\n            t3 = t2 * t,\\r\\n            x = t13 * p1x + t12 * 3 * t * c1x + t1 * 3 * t * t * c2x + t3 * p2x,\\r\\n            y = t13 * p1y + t12 * 3 * t * c1y + t1 * 3 * t * t * c2y + t3 * p2y,\\r\\n            mx = p1x + 2 * t * (c1x - p1x) + t2 * (c2x - 2 * c1x + p1x),\\r\\n            my = p1y + 2 * t * (c1y - p1y) + t2 * (c2y - 2 * c1y + p1y),\\r\\n            nx = c1x + 2 * t * (c2x - c1x) + t2 * (p2x - 2 * c2x + c1x),\\r\\n            ny = c1y + 2 * t * (c2y - c1y) + t2 * (p2y - 2 * c2y + c1y),\\r\\n            ax = t1 * p1x + t * c1x,\\r\\n            ay = t1 * p1y + t * c1y,\\r\\n            cx = t1 * c2x + t * p2x,\\r\\n            cy = t1 * c2y + t * p2y,\\r\\n            alpha = (90 - math.atan2(mx - nx, my - ny) * 180 / PI);\\r\\n        (mx > nx || my < ny) && (alpha += 180);\\r\\n        return {\\r\\n            x: x,\\r\\n            y: y,\\r\\n            m: {x: mx, y: my},\\r\\n            n: {x: nx, y: ny},\\r\\n            start: {x: ax, y: ay},\\r\\n            end: {x: cx, y: cy},\\r\\n            alpha: alpha\\r\\n        };\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Raphael.bezierBBox\\r\\n     [ method ]\\r\\n     **\\r\\n     * Utility method\\r\\n     **\\r\\n     * Return bounding box of a given cubic bezier curve\\r\\n     > Parameters\\r\\n     - p1x (number) x of the first point of the curve\\r\\n     - p1y (number) y of the first point of the curve\\r\\n     - c1x (number) x of the first anchor of the curve\\r\\n     - c1y (number) y of the first anchor of the curve\\r\\n     - c2x (number) x of the second anchor of the curve\\r\\n     - c2y (number) y of the second anchor of the curve\\r\\n     - p2x (number) x of the second point of the curve\\r\\n     - p2y (number) y of the second point of the curve\\r\\n     * or\\r\\n     - bez (array) array of six points for bezier curve\\r\\n     = (object) point information in format:\\r\\n     o {\\r\\n     o     min: {\\r\\n     o         x: (number) x coordinate of the left point\\r\\n     o         y: (number) y coordinate of the top point\\r\\n     o     }\\r\\n     o     max: {\\r\\n     o         x: (number) x coordinate of the right point\\r\\n     o         y: (number) y coordinate of the bottom point\\r\\n     o     }\\r\\n     o }\\r\\n     \\\\*/\\r\\n    R.bezierBBox = function (p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y) {\\r\\n        if (!R.is(p1x, \\\"array\\\")) {\\r\\n            p1x = [p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y];\\r\\n        }\\r\\n        var bbox = curveDim.apply(null, p1x);\\r\\n        return {\\r\\n            x: bbox.min.x,\\r\\n            y: bbox.min.y,\\r\\n            x2: bbox.max.x,\\r\\n            y2: bbox.max.y,\\r\\n            width: bbox.max.x - bbox.min.x,\\r\\n            height: bbox.max.y - bbox.min.y\\r\\n        };\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Raphael.isPointInsideBBox\\r\\n     [ method ]\\r\\n     **\\r\\n     * Utility method\\r\\n     **\\r\\n     * Returns `true` if given point is inside bounding boxes.\\r\\n     > Parameters\\r\\n     - bbox (string) bounding box\\r\\n     - x (string) x coordinate of the point\\r\\n     - y (string) y coordinate of the point\\r\\n     = (boolean) `true` if point inside\\r\\n     \\\\*/\\r\\n    R.isPointInsideBBox = function (bbox, x, y) {\\r\\n        return x >= bbox.x && x <= bbox.x2 && y >= bbox.y && y <= bbox.y2;\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Raphael.isBBoxIntersect\\r\\n     [ method ]\\r\\n     **\\r\\n     * Utility method\\r\\n     **\\r\\n     * Returns `true` if two bounding boxes intersect\\r\\n     > Parameters\\r\\n     - bbox1 (string) first bounding box\\r\\n     - bbox2 (string) second bounding box\\r\\n     = (boolean) `true` if they intersect\\r\\n     \\\\*/\\r\\n    R.isBBoxIntersect = function (bbox1, bbox2) {\\r\\n        var i = R.isPointInsideBBox;\\r\\n        return i(bbox2, bbox1.x, bbox1.y)\\r\\n            || i(bbox2, bbox1.x2, bbox1.y)\\r\\n            || i(bbox2, bbox1.x, bbox1.y2)\\r\\n            || i(bbox2, bbox1.x2, bbox1.y2)\\r\\n            || i(bbox1, bbox2.x, bbox2.y)\\r\\n            || i(bbox1, bbox2.x2, bbox2.y)\\r\\n            || i(bbox1, bbox2.x, bbox2.y2)\\r\\n            || i(bbox1, bbox2.x2, bbox2.y2)\\r\\n            || (bbox1.x < bbox2.x2 && bbox1.x > bbox2.x || bbox2.x < bbox1.x2 && bbox2.x > bbox1.x)\\r\\n            && (bbox1.y < bbox2.y2 && bbox1.y > bbox2.y || bbox2.y < bbox1.y2 && bbox2.y > bbox1.y);\\r\\n    };\\r\\n    function base3(t, p1, p2, p3, p4) {\\r\\n        var t1 = -3 * p1 + 9 * p2 - 9 * p3 + 3 * p4,\\r\\n            t2 = t * t1 + 6 * p1 - 12 * p2 + 6 * p3;\\r\\n        return t * t2 - 3 * p1 + 3 * p2;\\r\\n    }\\r\\n    function bezlen(x1, y1, x2, y2, x3, y3, x4, y4, z) {\\r\\n        if (z == null) {\\r\\n            z = 1;\\r\\n        }\\r\\n        z = z > 1 ? 1 : z < 0 ? 0 : z;\\r\\n        var z2 = z / 2,\\r\\n            n = 12,\\r\\n            Tvalues = [-0.1252,0.1252,-0.3678,0.3678,-0.5873,0.5873,-0.7699,0.7699,-0.9041,0.9041,-0.9816,0.9816],\\r\\n            Cvalues = [0.2491,0.2491,0.2335,0.2335,0.2032,0.2032,0.1601,0.1601,0.1069,0.1069,0.0472,0.0472],\\r\\n            sum = 0;\\r\\n        for (var i = 0; i < n; i++) {\\r\\n            var ct = z2 * Tvalues[i] + z2,\\r\\n                xbase = base3(ct, x1, x2, x3, x4),\\r\\n                ybase = base3(ct, y1, y2, y3, y4),\\r\\n                comb = xbase * xbase + ybase * ybase;\\r\\n            sum += Cvalues[i] * math.sqrt(comb);\\r\\n        }\\r\\n        return z2 * sum;\\r\\n    }\\r\\n    function getTatLen(x1, y1, x2, y2, x3, y3, x4, y4, ll) {\\r\\n        if (ll < 0 || bezlen(x1, y1, x2, y2, x3, y3, x4, y4) < ll) {\\r\\n            return;\\r\\n        }\\r\\n        var t = 1,\\r\\n            step = t / 2,\\r\\n            t2 = t - step,\\r\\n            l,\\r\\n            e = .01;\\r\\n        l = bezlen(x1, y1, x2, y2, x3, y3, x4, y4, t2);\\r\\n        while (abs(l - ll) > e) {\\r\\n            step /= 2;\\r\\n            t2 += (l < ll ? 1 : -1) * step;\\r\\n            l = bezlen(x1, y1, x2, y2, x3, y3, x4, y4, t2);\\r\\n        }\\r\\n        return t2;\\r\\n    }\\r\\n    function intersect(x1, y1, x2, y2, x3, y3, x4, y4) {\\r\\n        if (\\r\\n            mmax(x1, x2) < mmin(x3, x4) ||\\r\\n            mmin(x1, x2) > mmax(x3, x4) ||\\r\\n            mmax(y1, y2) < mmin(y3, y4) ||\\r\\n            mmin(y1, y2) > mmax(y3, y4)\\r\\n        ) {\\r\\n            return;\\r\\n        }\\r\\n        var nx = (x1 * y2 - y1 * x2) * (x3 - x4) - (x1 - x2) * (x3 * y4 - y3 * x4),\\r\\n            ny = (x1 * y2 - y1 * x2) * (y3 - y4) - (y1 - y2) * (x3 * y4 - y3 * x4),\\r\\n            denominator = (x1 - x2) * (y3 - y4) - (y1 - y2) * (x3 - x4);\\r\\n\\r\\n        if (!denominator) {\\r\\n            return;\\r\\n        }\\r\\n        var px = nx / denominator,\\r\\n            py = ny / denominator,\\r\\n            px2 = +px.toFixed(2),\\r\\n            py2 = +py.toFixed(2);\\r\\n        if (\\r\\n            px2 < +mmin(x1, x2).toFixed(2) ||\\r\\n            px2 > +mmax(x1, x2).toFixed(2) ||\\r\\n            px2 < +mmin(x3, x4).toFixed(2) ||\\r\\n            px2 > +mmax(x3, x4).toFixed(2) ||\\r\\n            py2 < +mmin(y1, y2).toFixed(2) ||\\r\\n            py2 > +mmax(y1, y2).toFixed(2) ||\\r\\n            py2 < +mmin(y3, y4).toFixed(2) ||\\r\\n            py2 > +mmax(y3, y4).toFixed(2)\\r\\n        ) {\\r\\n            return;\\r\\n        }\\r\\n        return {x: px, y: py};\\r\\n    }\\r\\n    function inter(bez1, bez2) {\\r\\n        return interHelper(bez1, bez2);\\r\\n    }\\r\\n    function interCount(bez1, bez2) {\\r\\n        return interHelper(bez1, bez2, 1);\\r\\n    }\\r\\n    function interHelper(bez1, bez2, justCount) {\\r\\n        var bbox1 = R.bezierBBox(bez1),\\r\\n            bbox2 = R.bezierBBox(bez2);\\r\\n        if (!R.isBBoxIntersect(bbox1, bbox2)) {\\r\\n            return justCount ? 0 : [];\\r\\n        }\\r\\n        var l1 = bezlen.apply(0, bez1),\\r\\n            l2 = bezlen.apply(0, bez2),\\r\\n            n1 = mmax(~~(l1 / 5), 1),\\r\\n            n2 = mmax(~~(l2 / 5), 1),\\r\\n            dots1 = [],\\r\\n            dots2 = [],\\r\\n            xy = {},\\r\\n            res = justCount ? 0 : [];\\r\\n        for (var i = 0; i < n1 + 1; i++) {\\r\\n            var p = R.findDotsAtSegment.apply(R, bez1.concat(i / n1));\\r\\n            dots1.push({x: p.x, y: p.y, t: i / n1});\\r\\n        }\\r\\n        for (i = 0; i < n2 + 1; i++) {\\r\\n            p = R.findDotsAtSegment.apply(R, bez2.concat(i / n2));\\r\\n            dots2.push({x: p.x, y: p.y, t: i / n2});\\r\\n        }\\r\\n        for (i = 0; i < n1; i++) {\\r\\n            for (var j = 0; j < n2; j++) {\\r\\n                var di = dots1[i],\\r\\n                    di1 = dots1[i + 1],\\r\\n                    dj = dots2[j],\\r\\n                    dj1 = dots2[j + 1],\\r\\n                    ci = abs(di1.x - di.x) < .001 ? \\\"y\\\" : \\\"x\\\",\\r\\n                    cj = abs(dj1.x - dj.x) < .001 ? \\\"y\\\" : \\\"x\\\",\\r\\n                    is = intersect(di.x, di.y, di1.x, di1.y, dj.x, dj.y, dj1.x, dj1.y);\\r\\n                if (is) {\\r\\n                    if (xy[is.x.toFixed(4)] == is.y.toFixed(4)) {\\r\\n                        continue;\\r\\n                    }\\r\\n                    xy[is.x.toFixed(4)] = is.y.toFixed(4);\\r\\n                    var t1 = di.t + abs((is[ci] - di[ci]) / (di1[ci] - di[ci])) * (di1.t - di.t),\\r\\n                        t2 = dj.t + abs((is[cj] - dj[cj]) / (dj1[cj] - dj[cj])) * (dj1.t - dj.t);\\r\\n                    if (t1 >= 0 && t1 <= 1.001 && t2 >= 0 && t2 <= 1.001) {\\r\\n                        if (justCount) {\\r\\n                            res++;\\r\\n                        } else {\\r\\n                            res.push({\\r\\n                                x: is.x,\\r\\n                                y: is.y,\\r\\n                                t1: mmin(t1, 1),\\r\\n                                t2: mmin(t2, 1)\\r\\n                            });\\r\\n                        }\\r\\n                    }\\r\\n                }\\r\\n            }\\r\\n        }\\r\\n        return res;\\r\\n    }\\r\\n    /*\\\\\\r\\n     * Raphael.pathIntersection\\r\\n     [ method ]\\r\\n     **\\r\\n     * Utility method\\r\\n     **\\r\\n     * Finds intersections of two paths\\r\\n     > Parameters\\r\\n     - path1 (string) path string\\r\\n     - path2 (string) path string\\r\\n     = (array) dots of intersection\\r\\n     o [\\r\\n     o     {\\r\\n     o         x: (number) x coordinate of the point\\r\\n     o         y: (number) y coordinate of the point\\r\\n     o         t1: (number) t value for segment of path1\\r\\n     o         t2: (number) t value for segment of path2\\r\\n     o         segment1: (number) order number for segment of path1\\r\\n     o         segment2: (number) order number for segment of path2\\r\\n     o         bez1: (array) eight coordinates representing beziér curve for the segment of path1\\r\\n     o         bez2: (array) eight coordinates representing beziér curve for the segment of path2\\r\\n     o     }\\r\\n     o ]\\r\\n     \\\\*/\\r\\n    R.pathIntersection = function (path1, path2) {\\r\\n        return interPathHelper(path1, path2);\\r\\n    };\\r\\n    R.pathIntersectionNumber = function (path1, path2) {\\r\\n        return interPathHelper(path1, path2, 1);\\r\\n    };\\r\\n    function interPathHelper(path1, path2, justCount) {\\r\\n        path1 = R._path2curve(path1);\\r\\n        path2 = R._path2curve(path2);\\r\\n        var x1, y1, x2, y2, x1m, y1m, x2m, y2m, bez1, bez2,\\r\\n            res = justCount ? 0 : [];\\r\\n        for (var i = 0, ii = path1.length; i < ii; i++) {\\r\\n            var pi = path1[i];\\r\\n            if (pi[0] == \\\"M\\\") {\\r\\n                x1 = x1m = pi[1];\\r\\n                y1 = y1m = pi[2];\\r\\n            } else {\\r\\n                if (pi[0] == \\\"C\\\") {\\r\\n                    bez1 = [x1, y1].concat(pi.slice(1));\\r\\n                    x1 = bez1[6];\\r\\n                    y1 = bez1[7];\\r\\n                } else {\\r\\n                    bez1 = [x1, y1, x1, y1, x1m, y1m, x1m, y1m];\\r\\n                    x1 = x1m;\\r\\n                    y1 = y1m;\\r\\n                }\\r\\n                for (var j = 0, jj = path2.length; j < jj; j++) {\\r\\n                    var pj = path2[j];\\r\\n                    if (pj[0] == \\\"M\\\") {\\r\\n                        x2 = x2m = pj[1];\\r\\n                        y2 = y2m = pj[2];\\r\\n                    } else {\\r\\n                        if (pj[0] == \\\"C\\\") {\\r\\n                            bez2 = [x2, y2].concat(pj.slice(1));\\r\\n                            x2 = bez2[6];\\r\\n                            y2 = bez2[7];\\r\\n                        } else {\\r\\n                            bez2 = [x2, y2, x2, y2, x2m, y2m, x2m, y2m];\\r\\n                            x2 = x2m;\\r\\n                            y2 = y2m;\\r\\n                        }\\r\\n                        var intr = interHelper(bez1, bez2, justCount);\\r\\n                        if (justCount) {\\r\\n                            res += intr;\\r\\n                        } else {\\r\\n                            for (var k = 0, kk = intr.length; k < kk; k++) {\\r\\n                                intr[k].segment1 = i;\\r\\n                                intr[k].segment2 = j;\\r\\n                                intr[k].bez1 = bez1;\\r\\n                                intr[k].bez2 = bez2;\\r\\n                            }\\r\\n                            res = res.concat(intr);\\r\\n                        }\\r\\n                    }\\r\\n                }\\r\\n            }\\r\\n        }\\r\\n        return res;\\r\\n    }\\r\\n    /*\\\\\\r\\n     * Raphael.isPointInsidePath\\r\\n     [ method ]\\r\\n     **\\r\\n     * Utility method\\r\\n     **\\r\\n     * Returns `true` if given point is inside a given closed path.\\r\\n     > Parameters\\r\\n     - path (string) path string\\r\\n     - x (number) x of the point\\r\\n     - y (number) y of the point\\r\\n     = (boolean) true, if point is inside the path\\r\\n     \\\\*/\\r\\n    R.isPointInsidePath = function (path, x, y) {\\r\\n        var bbox = R.pathBBox(path);\\r\\n        return R.isPointInsideBBox(bbox, x, y) &&\\r\\n            interPathHelper(path, [[\\\"M\\\", x, y], [\\\"H\\\", bbox.x2 + 10]], 1) % 2 == 1;\\r\\n    };\\r\\n    R._removedFactory = function (methodname) {\\r\\n        return function () {\\r\\n            eve(\\\"raphael.log\\\", null, \\\"Rapha\\\\xebl: you are calling to method \\\\u201c\\\" + methodname + \\\"\\\\u201d of removed object\\\", methodname);\\r\\n        };\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Raphael.pathBBox\\r\\n     [ method ]\\r\\n     **\\r\\n     * Utility method\\r\\n     **\\r\\n     * Return bounding box of a given path\\r\\n     > Parameters\\r\\n     - path (string) path string\\r\\n     = (object) bounding box\\r\\n     o {\\r\\n     o     x: (number) x coordinate of the left top point of the box\\r\\n     o     y: (number) y coordinate of the left top point of the box\\r\\n     o     x2: (number) x coordinate of the right bottom point of the box\\r\\n     o     y2: (number) y coordinate of the right bottom point of the box\\r\\n     o     width: (number) width of the box\\r\\n     o     height: (number) height of the box\\r\\n     o     cx: (number) x coordinate of the center of the box\\r\\n     o     cy: (number) y coordinate of the center of the box\\r\\n     o }\\r\\n     \\\\*/\\r\\n    var pathDimensions = R.pathBBox = function (path) {\\r\\n            var pth = paths(path);\\r\\n            if (pth.bbox) {\\r\\n                return clone(pth.bbox);\\r\\n            }\\r\\n            if (!path) {\\r\\n                return {x: 0, y: 0, width: 0, height: 0, x2: 0, y2: 0};\\r\\n            }\\r\\n            path = path2curve(path);\\r\\n            var x = 0,\\r\\n                y = 0,\\r\\n                X = [],\\r\\n                Y = [],\\r\\n                p;\\r\\n            for (var i = 0, ii = path.length; i < ii; i++) {\\r\\n                p = path[i];\\r\\n                if (p[0] == \\\"M\\\") {\\r\\n                    x = p[1];\\r\\n                    y = p[2];\\r\\n                    X.push(x);\\r\\n                    Y.push(y);\\r\\n                } else {\\r\\n                    var dim = curveDim(x, y, p[1], p[2], p[3], p[4], p[5], p[6]);\\r\\n                    X = X[concat](dim.min.x, dim.max.x);\\r\\n                    Y = Y[concat](dim.min.y, dim.max.y);\\r\\n                    x = p[5];\\r\\n                    y = p[6];\\r\\n                }\\r\\n            }\\r\\n            var xmin = mmin[apply](0, X),\\r\\n                ymin = mmin[apply](0, Y),\\r\\n                xmax = mmax[apply](0, X),\\r\\n                ymax = mmax[apply](0, Y),\\r\\n                width = xmax - xmin,\\r\\n                height = ymax - ymin,\\r\\n                bb = {\\r\\n                    x: xmin,\\r\\n                    y: ymin,\\r\\n                    x2: xmax,\\r\\n                    y2: ymax,\\r\\n                    width: width,\\r\\n                    height: height,\\r\\n                    cx: xmin + width / 2,\\r\\n                    cy: ymin + height / 2\\r\\n                };\\r\\n            pth.bbox = clone(bb);\\r\\n            return bb;\\r\\n        },\\r\\n        pathClone = function (pathArray) {\\r\\n            var res = clone(pathArray);\\r\\n            res.toString = R._path2string;\\r\\n            return res;\\r\\n        },\\r\\n        pathToRelative = R._pathToRelative = function (pathArray) {\\r\\n            var pth = paths(pathArray);\\r\\n            if (pth.rel) {\\r\\n                return pathClone(pth.rel);\\r\\n            }\\r\\n            if (!R.is(pathArray, array) || !R.is(pathArray && pathArray[0], array)) { // rough assumption\\r\\n                pathArray = R.parsePathString(pathArray);\\r\\n            }\\r\\n            var res = [],\\r\\n                x = 0,\\r\\n                y = 0,\\r\\n                mx = 0,\\r\\n                my = 0,\\r\\n                start = 0;\\r\\n            if (pathArray[0][0] == \\\"M\\\") {\\r\\n                x = pathArray[0][1];\\r\\n                y = pathArray[0][2];\\r\\n                mx = x;\\r\\n                my = y;\\r\\n                start++;\\r\\n                res.push([\\\"M\\\", x, y]);\\r\\n            }\\r\\n            for (var i = start, ii = pathArray.length; i < ii; i++) {\\r\\n                var r = res[i] = [],\\r\\n                    pa = pathArray[i];\\r\\n                if (pa[0] != lowerCase.call(pa[0])) {\\r\\n                    r[0] = lowerCase.call(pa[0]);\\r\\n                    switch (r[0]) {\\r\\n                        case \\\"a\\\":\\r\\n                            r[1] = pa[1];\\r\\n                            r[2] = pa[2];\\r\\n                            r[3] = pa[3];\\r\\n                            r[4] = pa[4];\\r\\n                            r[5] = pa[5];\\r\\n                            r[6] = +(pa[6] - x).toFixed(3);\\r\\n                            r[7] = +(pa[7] - y).toFixed(3);\\r\\n                            break;\\r\\n                        case \\\"v\\\":\\r\\n                            r[1] = +(pa[1] - y).toFixed(3);\\r\\n                            break;\\r\\n                        case \\\"m\\\":\\r\\n                            mx = pa[1];\\r\\n                            my = pa[2];\\r\\n                        default:\\r\\n                            for (var j = 1, jj = pa.length; j < jj; j++) {\\r\\n                                r[j] = +(pa[j] - ((j % 2) ? x : y)).toFixed(3);\\r\\n                            }\\r\\n                    }\\r\\n                } else {\\r\\n                    r = res[i] = [];\\r\\n                    if (pa[0] == \\\"m\\\") {\\r\\n                        mx = pa[1] + x;\\r\\n                        my = pa[2] + y;\\r\\n                    }\\r\\n                    for (var k = 0, kk = pa.length; k < kk; k++) {\\r\\n                        res[i][k] = pa[k];\\r\\n                    }\\r\\n                }\\r\\n                var len = res[i].length;\\r\\n                switch (res[i][0]) {\\r\\n                    case \\\"z\\\":\\r\\n                        x = mx;\\r\\n                        y = my;\\r\\n                        break;\\r\\n                    case \\\"h\\\":\\r\\n                        x += +res[i][len - 1];\\r\\n                        break;\\r\\n                    case \\\"v\\\":\\r\\n                        y += +res[i][len - 1];\\r\\n                        break;\\r\\n                    default:\\r\\n                        x += +res[i][len - 2];\\r\\n                        y += +res[i][len - 1];\\r\\n                }\\r\\n            }\\r\\n            res.toString = R._path2string;\\r\\n            pth.rel = pathClone(res);\\r\\n            return res;\\r\\n        },\\r\\n        pathToAbsolute = R._pathToAbsolute = function (pathArray) {\\r\\n            var pth = paths(pathArray);\\r\\n            if (pth.abs) {\\r\\n                return pathClone(pth.abs);\\r\\n            }\\r\\n            if (!R.is(pathArray, array) || !R.is(pathArray && pathArray[0], array)) { // rough assumption\\r\\n                pathArray = R.parsePathString(pathArray);\\r\\n            }\\r\\n            if (!pathArray || !pathArray.length) {\\r\\n                return [[\\\"M\\\", 0, 0]];\\r\\n            }\\r\\n            var res = [],\\r\\n                x = 0,\\r\\n                y = 0,\\r\\n                mx = 0,\\r\\n                my = 0,\\r\\n                start = 0;\\r\\n            if (pathArray[0][0] == \\\"M\\\") {\\r\\n                x = +pathArray[0][1];\\r\\n                y = +pathArray[0][2];\\r\\n                mx = x;\\r\\n                my = y;\\r\\n                start++;\\r\\n                res[0] = [\\\"M\\\", x, y];\\r\\n            }\\r\\n            var crz = pathArray.length == 3 && pathArray[0][0] == \\\"M\\\" && pathArray[1][0].toUpperCase() == \\\"R\\\" && pathArray[2][0].toUpperCase() == \\\"Z\\\";\\r\\n            for (var r, pa, i = start, ii = pathArray.length; i < ii; i++) {\\r\\n                res.push(r = []);\\r\\n                pa = pathArray[i];\\r\\n                if (pa[0] != upperCase.call(pa[0])) {\\r\\n                    r[0] = upperCase.call(pa[0]);\\r\\n                    switch (r[0]) {\\r\\n                        case \\\"A\\\":\\r\\n                            r[1] = pa[1];\\r\\n                            r[2] = pa[2];\\r\\n                            r[3] = pa[3];\\r\\n                            r[4] = pa[4];\\r\\n                            r[5] = pa[5];\\r\\n                            r[6] = +(pa[6] + x);\\r\\n                            r[7] = +(pa[7] + y);\\r\\n                            break;\\r\\n                        case \\\"V\\\":\\r\\n                            r[1] = +pa[1] + y;\\r\\n                            break;\\r\\n                        case \\\"H\\\":\\r\\n                            r[1] = +pa[1] + x;\\r\\n                            break;\\r\\n                        case \\\"R\\\":\\r\\n                            var dots = [x, y][concat](pa.slice(1));\\r\\n                            for (var j = 2, jj = dots.length; j < jj; j++) {\\r\\n                                dots[j] = +dots[j] + x;\\r\\n                                dots[++j] = +dots[j] + y;\\r\\n                            }\\r\\n                            res.pop();\\r\\n                            res = res[concat](catmullRom2bezier(dots, crz));\\r\\n                            break;\\r\\n                        case \\\"M\\\":\\r\\n                            mx = +pa[1] + x;\\r\\n                            my = +pa[2] + y;\\r\\n                        default:\\r\\n                            for (j = 1, jj = pa.length; j < jj; j++) {\\r\\n                                r[j] = +pa[j] + ((j % 2) ? x : y);\\r\\n                            }\\r\\n                    }\\r\\n                } else if (pa[0] == \\\"R\\\") {\\r\\n                    dots = [x, y][concat](pa.slice(1));\\r\\n                    res.pop();\\r\\n                    res = res[concat](catmullRom2bezier(dots, crz));\\r\\n                    r = [\\\"R\\\"][concat](pa.slice(-2));\\r\\n                } else {\\r\\n                    for (var k = 0, kk = pa.length; k < kk; k++) {\\r\\n                        r[k] = pa[k];\\r\\n                    }\\r\\n                }\\r\\n                switch (r[0]) {\\r\\n                    case \\\"Z\\\":\\r\\n                        x = mx;\\r\\n                        y = my;\\r\\n                        break;\\r\\n                    case \\\"H\\\":\\r\\n                        x = r[1];\\r\\n                        break;\\r\\n                    case \\\"V\\\":\\r\\n                        y = r[1];\\r\\n                        break;\\r\\n                    case \\\"M\\\":\\r\\n                        mx = r[r.length - 2];\\r\\n                        my = r[r.length - 1];\\r\\n                    default:\\r\\n                        x = r[r.length - 2];\\r\\n                        y = r[r.length - 1];\\r\\n                }\\r\\n            }\\r\\n            res.toString = R._path2string;\\r\\n            pth.abs = pathClone(res);\\r\\n            return res;\\r\\n        },\\r\\n        l2c = function (x1, y1, x2, y2) {\\r\\n            return [x1, y1, x2, y2, x2, y2];\\r\\n        },\\r\\n        q2c = function (x1, y1, ax, ay, x2, y2) {\\r\\n            var _13 = 1 / 3,\\r\\n                _23 = 2 / 3;\\r\\n            return [\\r\\n                _13 * x1 + _23 * ax,\\r\\n                _13 * y1 + _23 * ay,\\r\\n                _13 * x2 + _23 * ax,\\r\\n                _13 * y2 + _23 * ay,\\r\\n                x2,\\r\\n                y2\\r\\n            ];\\r\\n        },\\r\\n        a2c = function (x1, y1, rx, ry, angle, large_arc_flag, sweep_flag, x2, y2, recursive) {\\r\\n            // for more information of where this math came from visit:\\r\\n            // http://www.w3.org/TR/SVG11/implnote.html#ArcImplementationNotes\\r\\n            var _120 = PI * 120 / 180,\\r\\n                rad = PI / 180 * (+angle || 0),\\r\\n                res = [],\\r\\n                xy,\\r\\n                rotate = cacher(function (x, y, rad) {\\r\\n                    var X = x * math.cos(rad) - y * math.sin(rad),\\r\\n                        Y = x * math.sin(rad) + y * math.cos(rad);\\r\\n                    return {x: X, y: Y};\\r\\n                });\\r\\n            if (!recursive) {\\r\\n                xy = rotate(x1, y1, -rad);\\r\\n                x1 = xy.x;\\r\\n                y1 = xy.y;\\r\\n                xy = rotate(x2, y2, -rad);\\r\\n                x2 = xy.x;\\r\\n                y2 = xy.y;\\r\\n                var cos = math.cos(PI / 180 * angle),\\r\\n                    sin = math.sin(PI / 180 * angle),\\r\\n                    x = (x1 - x2) / 2,\\r\\n                    y = (y1 - y2) / 2;\\r\\n                var h = (x * x) / (rx * rx) + (y * y) / (ry * ry);\\r\\n                if (h > 1) {\\r\\n                    h = math.sqrt(h);\\r\\n                    rx = h * rx;\\r\\n                    ry = h * ry;\\r\\n                }\\r\\n                var rx2 = rx * rx,\\r\\n                    ry2 = ry * ry,\\r\\n                    k = (large_arc_flag == sweep_flag ? -1 : 1) *\\r\\n                        math.sqrt(abs((rx2 * ry2 - rx2 * y * y - ry2 * x * x) / (rx2 * y * y + ry2 * x * x))),\\r\\n                    cx = k * rx * y / ry + (x1 + x2) / 2,\\r\\n                    cy = k * -ry * x / rx + (y1 + y2) / 2,\\r\\n                    f1 = math.asin(((y1 - cy) / ry).toFixed(9)),\\r\\n                    f2 = math.asin(((y2 - cy) / ry).toFixed(9));\\r\\n\\r\\n                f1 = x1 < cx ? PI - f1 : f1;\\r\\n                f2 = x2 < cx ? PI - f2 : f2;\\r\\n                f1 < 0 && (f1 = PI * 2 + f1);\\r\\n                f2 < 0 && (f2 = PI * 2 + f2);\\r\\n                if (sweep_flag && f1 > f2) {\\r\\n                    f1 = f1 - PI * 2;\\r\\n                }\\r\\n                if (!sweep_flag && f2 > f1) {\\r\\n                    f2 = f2 - PI * 2;\\r\\n                }\\r\\n            } else {\\r\\n                f1 = recursive[0];\\r\\n                f2 = recursive[1];\\r\\n                cx = recursive[2];\\r\\n                cy = recursive[3];\\r\\n            }\\r\\n            var df = f2 - f1;\\r\\n            if (abs(df) > _120) {\\r\\n                var f2old = f2,\\r\\n                    x2old = x2,\\r\\n                    y2old = y2;\\r\\n                f2 = f1 + _120 * (sweep_flag && f2 > f1 ? 1 : -1);\\r\\n                x2 = cx + rx * math.cos(f2);\\r\\n                y2 = cy + ry * math.sin(f2);\\r\\n                res = a2c(x2, y2, rx, ry, angle, 0, sweep_flag, x2old, y2old, [f2, f2old, cx, cy]);\\r\\n            }\\r\\n            df = f2 - f1;\\r\\n            var c1 = math.cos(f1),\\r\\n                s1 = math.sin(f1),\\r\\n                c2 = math.cos(f2),\\r\\n                s2 = math.sin(f2),\\r\\n                t = math.tan(df / 4),\\r\\n                hx = 4 / 3 * rx * t,\\r\\n                hy = 4 / 3 * ry * t,\\r\\n                m1 = [x1, y1],\\r\\n                m2 = [x1 + hx * s1, y1 - hy * c1],\\r\\n                m3 = [x2 + hx * s2, y2 - hy * c2],\\r\\n                m4 = [x2, y2];\\r\\n            m2[0] = 2 * m1[0] - m2[0];\\r\\n            m2[1] = 2 * m1[1] - m2[1];\\r\\n            if (recursive) {\\r\\n                return [m2, m3, m4][concat](res);\\r\\n            } else {\\r\\n                res = [m2, m3, m4][concat](res).join()[split](\\\",\\\");\\r\\n                var newres = [];\\r\\n                for (var i = 0, ii = res.length; i < ii; i++) {\\r\\n                    newres[i] = i % 2 ? rotate(res[i - 1], res[i], rad).y : rotate(res[i], res[i + 1], rad).x;\\r\\n                }\\r\\n                return newres;\\r\\n            }\\r\\n        },\\r\\n        findDotAtSegment = function (p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t) {\\r\\n            var t1 = 1 - t;\\r\\n            return {\\r\\n                x: pow(t1, 3) * p1x + pow(t1, 2) * 3 * t * c1x + t1 * 3 * t * t * c2x + pow(t, 3) * p2x,\\r\\n                y: pow(t1, 3) * p1y + pow(t1, 2) * 3 * t * c1y + t1 * 3 * t * t * c2y + pow(t, 3) * p2y\\r\\n            };\\r\\n        },\\r\\n        curveDim = cacher(function (p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y) {\\r\\n            var a = (c2x - 2 * c1x + p1x) - (p2x - 2 * c2x + c1x),\\r\\n                b = 2 * (c1x - p1x) - 2 * (c2x - c1x),\\r\\n                c = p1x - c1x,\\r\\n                t1 = (-b + math.sqrt(b * b - 4 * a * c)) / 2 / a,\\r\\n                t2 = (-b - math.sqrt(b * b - 4 * a * c)) / 2 / a,\\r\\n                y = [p1y, p2y],\\r\\n                x = [p1x, p2x],\\r\\n                dot;\\r\\n            abs(t1) > \\\"1e12\\\" && (t1 = .5);\\r\\n            abs(t2) > \\\"1e12\\\" && (t2 = .5);\\r\\n            if (t1 > 0 && t1 < 1) {\\r\\n                dot = findDotAtSegment(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t1);\\r\\n                x.push(dot.x);\\r\\n                y.push(dot.y);\\r\\n            }\\r\\n            if (t2 > 0 && t2 < 1) {\\r\\n                dot = findDotAtSegment(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t2);\\r\\n                x.push(dot.x);\\r\\n                y.push(dot.y);\\r\\n            }\\r\\n            a = (c2y - 2 * c1y + p1y) - (p2y - 2 * c2y + c1y);\\r\\n            b = 2 * (c1y - p1y) - 2 * (c2y - c1y);\\r\\n            c = p1y - c1y;\\r\\n            t1 = (-b + math.sqrt(b * b - 4 * a * c)) / 2 / a;\\r\\n            t2 = (-b - math.sqrt(b * b - 4 * a * c)) / 2 / a;\\r\\n            abs(t1) > \\\"1e12\\\" && (t1 = .5);\\r\\n            abs(t2) > \\\"1e12\\\" && (t2 = .5);\\r\\n            if (t1 > 0 && t1 < 1) {\\r\\n                dot = findDotAtSegment(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t1);\\r\\n                x.push(dot.x);\\r\\n                y.push(dot.y);\\r\\n            }\\r\\n            if (t2 > 0 && t2 < 1) {\\r\\n                dot = findDotAtSegment(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t2);\\r\\n                x.push(dot.x);\\r\\n                y.push(dot.y);\\r\\n            }\\r\\n            return {\\r\\n                min: {x: mmin[apply](0, x), y: mmin[apply](0, y)},\\r\\n                max: {x: mmax[apply](0, x), y: mmax[apply](0, y)}\\r\\n            };\\r\\n        }),\\r\\n        path2curve = R._path2curve = cacher(function (path, path2) {\\r\\n            var pth = !path2 && paths(path);\\r\\n            if (!path2 && pth.curve) {\\r\\n                return pathClone(pth.curve);\\r\\n            }\\r\\n            var p = pathToAbsolute(path),\\r\\n                p2 = path2 && pathToAbsolute(path2),\\r\\n                attrs = {x: 0, y: 0, bx: 0, by: 0, X: 0, Y: 0, qx: null, qy: null},\\r\\n                attrs2 = {x: 0, y: 0, bx: 0, by: 0, X: 0, Y: 0, qx: null, qy: null},\\r\\n                processPath = function (path, d, pcom) {\\r\\n                    var nx, ny, tq = {T:1, Q:1};\\r\\n                    if (!path) {\\r\\n                        return [\\\"C\\\", d.x, d.y, d.x, d.y, d.x, d.y];\\r\\n                    }\\r\\n                    !(path[0] in tq) && (d.qx = d.qy = null);\\r\\n                    switch (path[0]) {\\r\\n                        case \\\"M\\\":\\r\\n                            d.X = path[1];\\r\\n                            d.Y = path[2];\\r\\n                            break;\\r\\n                        case \\\"A\\\":\\r\\n                            path = [\\\"C\\\"][concat](a2c[apply](0, [d.x, d.y][concat](path.slice(1))));\\r\\n                            break;\\r\\n                        case \\\"S\\\":\\r\\n                            if (pcom == \\\"C\\\" || pcom == \\\"S\\\") { // In \\\"S\\\" case we have to take into account, if the previous command is C/S.\\r\\n                                nx = d.x * 2 - d.bx;          // And reflect the previous\\r\\n                                ny = d.y * 2 - d.by;          // command's control point relative to the current point.\\r\\n                            }\\r\\n                            else {                            // or some else or nothing\\r\\n                                nx = d.x;\\r\\n                                ny = d.y;\\r\\n                            }\\r\\n                            path = [\\\"C\\\", nx, ny][concat](path.slice(1));\\r\\n                            break;\\r\\n                        case \\\"T\\\":\\r\\n                            if (pcom == \\\"Q\\\" || pcom == \\\"T\\\") { // In \\\"T\\\" case we have to take into account, if the previous command is Q/T.\\r\\n                                d.qx = d.x * 2 - d.qx;        // And make a reflection similar\\r\\n                                d.qy = d.y * 2 - d.qy;        // to case \\\"S\\\".\\r\\n                            }\\r\\n                            else {                            // or something else or nothing\\r\\n                                d.qx = d.x;\\r\\n                                d.qy = d.y;\\r\\n                            }\\r\\n                            path = [\\\"C\\\"][concat](q2c(d.x, d.y, d.qx, d.qy, path[1], path[2]));\\r\\n                            break;\\r\\n                        case \\\"Q\\\":\\r\\n                            d.qx = path[1];\\r\\n                            d.qy = path[2];\\r\\n                            path = [\\\"C\\\"][concat](q2c(d.x, d.y, path[1], path[2], path[3], path[4]));\\r\\n                            break;\\r\\n                        case \\\"L\\\":\\r\\n                            path = [\\\"C\\\"][concat](l2c(d.x, d.y, path[1], path[2]));\\r\\n                            break;\\r\\n                        case \\\"H\\\":\\r\\n                            path = [\\\"C\\\"][concat](l2c(d.x, d.y, path[1], d.y));\\r\\n                            break;\\r\\n                        case \\\"V\\\":\\r\\n                            path = [\\\"C\\\"][concat](l2c(d.x, d.y, d.x, path[1]));\\r\\n                            break;\\r\\n                        case \\\"Z\\\":\\r\\n                            path = [\\\"C\\\"][concat](l2c(d.x, d.y, d.X, d.Y));\\r\\n                            break;\\r\\n                    }\\r\\n                    return path;\\r\\n                },\\r\\n                fixArc = function (pp, i) {\\r\\n                    if (pp[i].length > 7) {\\r\\n                        pp[i].shift();\\r\\n                        var pi = pp[i];\\r\\n                        while (pi.length) {\\r\\n                            pcoms1[i]=\\\"A\\\"; // if created multiple C:s, their original seg is saved\\r\\n                            p2 && (pcoms2[i]=\\\"A\\\"); // the same as above\\r\\n                            pp.splice(i++, 0, [\\\"C\\\"][concat](pi.splice(0, 6)));\\r\\n                        }\\r\\n                        pp.splice(i, 1);\\r\\n                        ii = mmax(p.length, p2 && p2.length || 0);\\r\\n                    }\\r\\n                },\\r\\n                fixM = function (path1, path2, a1, a2, i) {\\r\\n                    if (path1 && path2 && path1[i][0] == \\\"M\\\" && path2[i][0] != \\\"M\\\") {\\r\\n                        path2.splice(i, 0, [\\\"M\\\", a2.x, a2.y]);\\r\\n                        a1.bx = 0;\\r\\n                        a1.by = 0;\\r\\n                        a1.x = path1[i][1];\\r\\n                        a1.y = path1[i][2];\\r\\n                        ii = mmax(p.length, p2 && p2.length || 0);\\r\\n                    }\\r\\n                },\\r\\n                pcoms1 = [], // path commands of original path p\\r\\n                pcoms2 = [], // path commands of original path p2\\r\\n                pfirst = \\\"\\\", // temporary holder for original path command\\r\\n                pcom = \\\"\\\"; // holder for previous path command of original path\\r\\n            for (var i = 0, ii = mmax(p.length, p2 && p2.length || 0); i < ii; i++) {\\r\\n                p[i] && (pfirst = p[i][0]); // save current path command\\r\\n\\r\\n                if (pfirst != \\\"C\\\") // C is not saved yet, because it may be result of conversion\\r\\n                {\\r\\n                    pcoms1[i] = pfirst; // Save current path command\\r\\n                    i && ( pcom = pcoms1[i-1]); // Get previous path command pcom\\r\\n                }\\r\\n                p[i] = processPath(p[i], attrs, pcom); // Previous path command is inputted to processPath\\r\\n\\r\\n                if (pcoms1[i] != \\\"A\\\" && pfirst == \\\"C\\\") pcoms1[i] = \\\"C\\\"; // A is the only command\\r\\n                // which may produce multiple C:s\\r\\n                // so we have to make sure that C is also C in original path\\r\\n\\r\\n                fixArc(p, i); // fixArc adds also the right amount of A:s to pcoms1\\r\\n\\r\\n                if (p2) { // the same procedures is done to p2\\r\\n                    p2[i] && (pfirst = p2[i][0]);\\r\\n                    if (pfirst != \\\"C\\\")\\r\\n                    {\\r\\n                        pcoms2[i] = pfirst;\\r\\n                        i && (pcom = pcoms2[i-1]);\\r\\n                    }\\r\\n                    p2[i] = processPath(p2[i], attrs2, pcom);\\r\\n\\r\\n                    if (pcoms2[i]!=\\\"A\\\" && pfirst==\\\"C\\\") pcoms2[i]=\\\"C\\\";\\r\\n\\r\\n                    fixArc(p2, i);\\r\\n                }\\r\\n                fixM(p, p2, attrs, attrs2, i);\\r\\n                fixM(p2, p, attrs2, attrs, i);\\r\\n                var seg = p[i],\\r\\n                    seg2 = p2 && p2[i],\\r\\n                    seglen = seg.length,\\r\\n                    seg2len = p2 && seg2.length;\\r\\n                attrs.x = seg[seglen - 2];\\r\\n                attrs.y = seg[seglen - 1];\\r\\n                attrs.bx = toFloat(seg[seglen - 4]) || attrs.x;\\r\\n                attrs.by = toFloat(seg[seglen - 3]) || attrs.y;\\r\\n                attrs2.bx = p2 && (toFloat(seg2[seg2len - 4]) || attrs2.x);\\r\\n                attrs2.by = p2 && (toFloat(seg2[seg2len - 3]) || attrs2.y);\\r\\n                attrs2.x = p2 && seg2[seg2len - 2];\\r\\n                attrs2.y = p2 && seg2[seg2len - 1];\\r\\n            }\\r\\n            if (!p2) {\\r\\n                pth.curve = pathClone(p);\\r\\n            }\\r\\n            return p2 ? [p, p2] : p;\\r\\n        }, null, pathClone),\\r\\n        parseDots = R._parseDots = cacher(function (gradient) {\\r\\n            var dots = [];\\r\\n            for (var i = 0, ii = gradient.length; i < ii; i++) {\\r\\n                var dot = {},\\r\\n                    par = gradient[i].match(/^([^:]*):?([\\\\d\\\\.]*)/);\\r\\n                dot.color = R.getRGB(par[1]);\\r\\n                if (dot.color.error) {\\r\\n                    return null;\\r\\n                }\\r\\n                dot.opacity = dot.color.opacity;\\r\\n                dot.color = dot.color.hex;\\r\\n                par[2] && (dot.offset = par[2] + \\\"%\\\");\\r\\n                dots.push(dot);\\r\\n            }\\r\\n            for (i = 1, ii = dots.length - 1; i < ii; i++) {\\r\\n                if (!dots[i].offset) {\\r\\n                    var start = toFloat(dots[i - 1].offset || 0),\\r\\n                        end = 0;\\r\\n                    for (var j = i + 1; j < ii; j++) {\\r\\n                        if (dots[j].offset) {\\r\\n                            end = dots[j].offset;\\r\\n                            break;\\r\\n                        }\\r\\n                    }\\r\\n                    if (!end) {\\r\\n                        end = 100;\\r\\n                        j = ii;\\r\\n                    }\\r\\n                    end = toFloat(end);\\r\\n                    var d = (end - start) / (j - i + 1);\\r\\n                    for (; i < j; i++) {\\r\\n                        start += d;\\r\\n                        dots[i].offset = start + \\\"%\\\";\\r\\n                    }\\r\\n                }\\r\\n            }\\r\\n            return dots;\\r\\n        }),\\r\\n        tear = R._tear = function (el, paper) {\\r\\n            el == paper.top && (paper.top = el.prev);\\r\\n            el == paper.bottom && (paper.bottom = el.next);\\r\\n            el.next && (el.next.prev = el.prev);\\r\\n            el.prev && (el.prev.next = el.next);\\r\\n        },\\r\\n        tofront = R._tofront = function (el, paper) {\\r\\n            if (paper.top === el) {\\r\\n                return;\\r\\n            }\\r\\n            tear(el, paper);\\r\\n            el.next = null;\\r\\n            el.prev = paper.top;\\r\\n            paper.top.next = el;\\r\\n            paper.top = el;\\r\\n        },\\r\\n        toback = R._toback = function (el, paper) {\\r\\n            if (paper.bottom === el) {\\r\\n                return;\\r\\n            }\\r\\n            tear(el, paper);\\r\\n            el.next = paper.bottom;\\r\\n            el.prev = null;\\r\\n            paper.bottom.prev = el;\\r\\n            paper.bottom = el;\\r\\n        },\\r\\n        insertafter = R._insertafter = function (el, el2, paper) {\\r\\n            tear(el, paper);\\r\\n            el2 == paper.top && (paper.top = el);\\r\\n            el2.next && (el2.next.prev = el);\\r\\n            el.next = el2.next;\\r\\n            el.prev = el2;\\r\\n            el2.next = el;\\r\\n        },\\r\\n        insertbefore = R._insertbefore = function (el, el2, paper) {\\r\\n            tear(el, paper);\\r\\n            el2 == paper.bottom && (paper.bottom = el);\\r\\n            el2.prev && (el2.prev.next = el);\\r\\n            el.prev = el2.prev;\\r\\n            el2.prev = el;\\r\\n            el.next = el2;\\r\\n        },\\r\\n    /*\\\\\\r\\n     * Raphael.toMatrix\\r\\n     [ method ]\\r\\n     **\\r\\n     * Utility method\\r\\n     **\\r\\n     * Returns matrix of transformations applied to a given path\\r\\n     > Parameters\\r\\n     - path (string) path string\\r\\n     - transform (string|array) transformation string\\r\\n     = (object) @Matrix\\r\\n     \\\\*/\\r\\n        toMatrix = R.toMatrix = function (path, transform) {\\r\\n            var bb = pathDimensions(path),\\r\\n                el = {\\r\\n                    _: {\\r\\n                        transform: E\\r\\n                    },\\r\\n                    getBBox: function () {\\r\\n                        return bb;\\r\\n                    }\\r\\n                };\\r\\n            extractTransform(el, transform);\\r\\n            return el.matrix;\\r\\n        },\\r\\n    /*\\\\\\r\\n     * Raphael.transformPath\\r\\n     [ method ]\\r\\n     **\\r\\n     * Utility method\\r\\n     **\\r\\n     * Returns path transformed by a given transformation\\r\\n     > Parameters\\r\\n     - path (string) path string\\r\\n     - transform (string|array) transformation string\\r\\n     = (string) path\\r\\n     \\\\*/\\r\\n        transformPath = R.transformPath = function (path, transform) {\\r\\n            return mapPath(path, toMatrix(path, transform));\\r\\n        },\\r\\n        extractTransform = R._extractTransform = function (el, tstr) {\\r\\n            if (tstr == null) {\\r\\n                return el._.transform;\\r\\n            }\\r\\n            tstr = Str(tstr).replace(/\\\\.{3}|\\\\u2026/g, el._.transform || E);\\r\\n            var tdata = R.parseTransformString(tstr),\\r\\n                deg = 0,\\r\\n                dx = 0,\\r\\n                dy = 0,\\r\\n                sx = 1,\\r\\n                sy = 1,\\r\\n                _ = el._,\\r\\n                m = new Matrix;\\r\\n            _.transform = tdata || [];\\r\\n            if (tdata) {\\r\\n                for (var i = 0, ii = tdata.length; i < ii; i++) {\\r\\n                    var t = tdata[i],\\r\\n                        tlen = t.length,\\r\\n                        command = Str(t[0]).toLowerCase(),\\r\\n                        absolute = t[0] != command,\\r\\n                        inver = absolute ? m.invert() : 0,\\r\\n                        x1,\\r\\n                        y1,\\r\\n                        x2,\\r\\n                        y2,\\r\\n                        bb;\\r\\n                    if (command == \\\"t\\\" && tlen == 3) {\\r\\n                        if (absolute) {\\r\\n                            x1 = inver.x(0, 0);\\r\\n                            y1 = inver.y(0, 0);\\r\\n                            x2 = inver.x(t[1], t[2]);\\r\\n                            y2 = inver.y(t[1], t[2]);\\r\\n                            m.translate(x2 - x1, y2 - y1);\\r\\n                        } else {\\r\\n                            m.translate(t[1], t[2]);\\r\\n                        }\\r\\n                    } else if (command == \\\"r\\\") {\\r\\n                        if (tlen == 2) {\\r\\n                            bb = bb || el.getBBox(1);\\r\\n                            m.rotate(t[1], bb.x + bb.width / 2, bb.y + bb.height / 2);\\r\\n                            deg += t[1];\\r\\n                        } else if (tlen == 4) {\\r\\n                            if (absolute) {\\r\\n                                x2 = inver.x(t[2], t[3]);\\r\\n                                y2 = inver.y(t[2], t[3]);\\r\\n                                m.rotate(t[1], x2, y2);\\r\\n                            } else {\\r\\n                                m.rotate(t[1], t[2], t[3]);\\r\\n                            }\\r\\n                            deg += t[1];\\r\\n                        }\\r\\n                    } else if (command == \\\"s\\\") {\\r\\n                        if (tlen == 2 || tlen == 3) {\\r\\n                            bb = bb || el.getBBox(1);\\r\\n                            m.scale(t[1], t[tlen - 1], bb.x + bb.width / 2, bb.y + bb.height / 2);\\r\\n                            sx *= t[1];\\r\\n                            sy *= t[tlen - 1];\\r\\n                        } else if (tlen == 5) {\\r\\n                            if (absolute) {\\r\\n                                x2 = inver.x(t[3], t[4]);\\r\\n                                y2 = inver.y(t[3], t[4]);\\r\\n                                m.scale(t[1], t[2], x2, y2);\\r\\n                            } else {\\r\\n                                m.scale(t[1], t[2], t[3], t[4]);\\r\\n                            }\\r\\n                            sx *= t[1];\\r\\n                            sy *= t[2];\\r\\n                        }\\r\\n                    } else if (command == \\\"m\\\" && tlen == 7) {\\r\\n                        m.add(t[1], t[2], t[3], t[4], t[5], t[6]);\\r\\n                    }\\r\\n                    _.dirtyT = 1;\\r\\n                    el.matrix = m;\\r\\n                }\\r\\n            }\\r\\n\\r\\n            /*\\\\\\r\\n             * Element.matrix\\r\\n             [ property (object) ]\\r\\n             **\\r\\n             * Keeps @Matrix object, which represents element transformation\\r\\n             \\\\*/\\r\\n            el.matrix = m;\\r\\n\\r\\n            _.sx = sx;\\r\\n            _.sy = sy;\\r\\n            _.deg = deg;\\r\\n            _.dx = dx = m.e;\\r\\n            _.dy = dy = m.f;\\r\\n\\r\\n            if (sx == 1 && sy == 1 && !deg && _.bbox) {\\r\\n                _.bbox.x += +dx;\\r\\n                _.bbox.y += +dy;\\r\\n            } else {\\r\\n                _.dirtyT = 1;\\r\\n            }\\r\\n        },\\r\\n        getEmpty = function (item) {\\r\\n            var l = item[0];\\r\\n            switch (l.toLowerCase()) {\\r\\n                case \\\"t\\\": return [l, 0, 0];\\r\\n                case \\\"m\\\": return [l, 1, 0, 0, 1, 0, 0];\\r\\n                case \\\"r\\\": if (item.length == 4) {\\r\\n                    return [l, 0, item[2], item[3]];\\r\\n                } else {\\r\\n                    return [l, 0];\\r\\n                }\\r\\n                case \\\"s\\\": if (item.length == 5) {\\r\\n                    return [l, 1, 1, item[3], item[4]];\\r\\n                } else if (item.length == 3) {\\r\\n                    return [l, 1, 1];\\r\\n                } else {\\r\\n                    return [l, 1];\\r\\n                }\\r\\n            }\\r\\n        },\\r\\n        equaliseTransform = R._equaliseTransform = function (t1, t2) {\\r\\n            t2 = Str(t2).replace(/\\\\.{3}|\\\\u2026/g, t1);\\r\\n            t1 = R.parseTransformString(t1) || [];\\r\\n            t2 = R.parseTransformString(t2) || [];\\r\\n            var maxlength = mmax(t1.length, t2.length),\\r\\n                from = [],\\r\\n                to = [],\\r\\n                i = 0, j, jj,\\r\\n                tt1, tt2;\\r\\n            for (; i < maxlength; i++) {\\r\\n                tt1 = t1[i] || getEmpty(t2[i]);\\r\\n                tt2 = t2[i] || getEmpty(tt1);\\r\\n                if ((tt1[0] != tt2[0]) ||\\r\\n                    (tt1[0].toLowerCase() == \\\"r\\\" && (tt1[2] != tt2[2] || tt1[3] != tt2[3])) ||\\r\\n                    (tt1[0].toLowerCase() == \\\"s\\\" && (tt1[3] != tt2[3] || tt1[4] != tt2[4]))\\r\\n                ) {\\r\\n                    return;\\r\\n                }\\r\\n                from[i] = [];\\r\\n                to[i] = [];\\r\\n                for (j = 0, jj = mmax(tt1.length, tt2.length); j < jj; j++) {\\r\\n                    j in tt1 && (from[i][j] = tt1[j]);\\r\\n                    j in tt2 && (to[i][j] = tt2[j]);\\r\\n                }\\r\\n            }\\r\\n            return {\\r\\n                from: from,\\r\\n                to: to\\r\\n            };\\r\\n        };\\r\\n    R._getContainer = function (x, y, w, h) {\\r\\n        var container;\\r\\n        container = h == null && !R.is(x, \\\"object\\\") ? g.doc.getElementById(x) : x;\\r\\n        if (container == null) {\\r\\n            return;\\r\\n        }\\r\\n        if (container.tagName) {\\r\\n            if (y == null) {\\r\\n                return {\\r\\n                    container: container,\\r\\n                    width: container.style.pixelWidth || container.offsetWidth,\\r\\n                    height: container.style.pixelHeight || container.offsetHeight\\r\\n                };\\r\\n            } else {\\r\\n                return {\\r\\n                    container: container,\\r\\n                    width: y,\\r\\n                    height: w\\r\\n                };\\r\\n            }\\r\\n        }\\r\\n        return {\\r\\n            container: 1,\\r\\n            x: x,\\r\\n            y: y,\\r\\n            width: w,\\r\\n            height: h\\r\\n        };\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Raphael.pathToRelative\\r\\n     [ method ]\\r\\n     **\\r\\n     * Utility method\\r\\n     **\\r\\n     * Converts path to relative form\\r\\n     > Parameters\\r\\n     - pathString (string|array) path string or array of segments\\r\\n     = (array) array of segments.\\r\\n     \\\\*/\\r\\n    R.pathToRelative = pathToRelative;\\r\\n    R._engine = {};\\r\\n    /*\\\\\\r\\n     * Raphael.path2curve\\r\\n     [ method ]\\r\\n     **\\r\\n     * Utility method\\r\\n     **\\r\\n     * Converts path to a new path where all segments are cubic bezier curves.\\r\\n     > Parameters\\r\\n     - pathString (string|array) path string or array of segments\\r\\n     = (array) array of segments.\\r\\n     \\\\*/\\r\\n    R.path2curve = path2curve;\\r\\n    /*\\\\\\r\\n     * Raphael.matrix\\r\\n     [ method ]\\r\\n     **\\r\\n     * Utility method\\r\\n     **\\r\\n     * Returns matrix based on given parameters.\\r\\n     > Parameters\\r\\n     - a (number)\\r\\n     - b (number)\\r\\n     - c (number)\\r\\n     - d (number)\\r\\n     - e (number)\\r\\n     - f (number)\\r\\n     = (object) @Matrix\\r\\n     \\\\*/\\r\\n    R.matrix = function (a, b, c, d, e, f) {\\r\\n        return new Matrix(a, b, c, d, e, f);\\r\\n    };\\r\\n    function Matrix(a, b, c, d, e, f) {\\r\\n        if (a != null) {\\r\\n            this.a = +a;\\r\\n            this.b = +b;\\r\\n            this.c = +c;\\r\\n            this.d = +d;\\r\\n            this.e = +e;\\r\\n            this.f = +f;\\r\\n        } else {\\r\\n            this.a = 1;\\r\\n            this.b = 0;\\r\\n            this.c = 0;\\r\\n            this.d = 1;\\r\\n            this.e = 0;\\r\\n            this.f = 0;\\r\\n        }\\r\\n    }\\r\\n    (function (matrixproto) {\\r\\n        /*\\\\\\r\\n         * Matrix.add\\r\\n         [ method ]\\r\\n         **\\r\\n         * Adds given matrix to existing one.\\r\\n         > Parameters\\r\\n         - a (number)\\r\\n         - b (number)\\r\\n         - c (number)\\r\\n         - d (number)\\r\\n         - e (number)\\r\\n         - f (number)\\r\\n         or\\r\\n         - matrix (object) @Matrix\\r\\n         \\\\*/\\r\\n        matrixproto.add = function (a, b, c, d, e, f) {\\r\\n            var out = [[], [], []],\\r\\n                m = [[this.a, this.c, this.e], [this.b, this.d, this.f], [0, 0, 1]],\\r\\n                matrix = [[a, c, e], [b, d, f], [0, 0, 1]],\\r\\n                x, y, z, res;\\r\\n\\r\\n            if (a && a instanceof Matrix) {\\r\\n                matrix = [[a.a, a.c, a.e], [a.b, a.d, a.f], [0, 0, 1]];\\r\\n            }\\r\\n\\r\\n            for (x = 0; x < 3; x++) {\\r\\n                for (y = 0; y < 3; y++) {\\r\\n                    res = 0;\\r\\n                    for (z = 0; z < 3; z++) {\\r\\n                        res += m[x][z] * matrix[z][y];\\r\\n                    }\\r\\n                    out[x][y] = res;\\r\\n                }\\r\\n            }\\r\\n            this.a = out[0][0];\\r\\n            this.b = out[1][0];\\r\\n            this.c = out[0][1];\\r\\n            this.d = out[1][1];\\r\\n            this.e = out[0][2];\\r\\n            this.f = out[1][2];\\r\\n        };\\r\\n        /*\\\\\\r\\n         * Matrix.invert\\r\\n         [ method ]\\r\\n         **\\r\\n         * Returns inverted version of the matrix\\r\\n         = (object) @Matrix\\r\\n         \\\\*/\\r\\n        matrixproto.invert = function () {\\r\\n            var me = this,\\r\\n                x = me.a * me.d - me.b * me.c;\\r\\n            return new Matrix(me.d / x, -me.b / x, -me.c / x, me.a / x, (me.c * me.f - me.d * me.e) / x, (me.b * me.e - me.a * me.f) / x);\\r\\n        };\\r\\n        /*\\\\\\r\\n         * Matrix.clone\\r\\n         [ method ]\\r\\n         **\\r\\n         * Returns copy of the matrix\\r\\n         = (object) @Matrix\\r\\n         \\\\*/\\r\\n        matrixproto.clone = function () {\\r\\n            return new Matrix(this.a, this.b, this.c, this.d, this.e, this.f);\\r\\n        };\\r\\n        /*\\\\\\r\\n         * Matrix.translate\\r\\n         [ method ]\\r\\n         **\\r\\n         * Translate the matrix\\r\\n         > Parameters\\r\\n         - x (number)\\r\\n         - y (number)\\r\\n         \\\\*/\\r\\n        matrixproto.translate = function (x, y) {\\r\\n            this.add(1, 0, 0, 1, x, y);\\r\\n        };\\r\\n        /*\\\\\\r\\n         * Matrix.scale\\r\\n         [ method ]\\r\\n         **\\r\\n         * Scales the matrix\\r\\n         > Parameters\\r\\n         - x (number)\\r\\n         - y (number) #optional\\r\\n         - cx (number) #optional\\r\\n         - cy (number) #optional\\r\\n         \\\\*/\\r\\n        matrixproto.scale = function (x, y, cx, cy) {\\r\\n            y == null && (y = x);\\r\\n            (cx || cy) && this.add(1, 0, 0, 1, cx, cy);\\r\\n            this.add(x, 0, 0, y, 0, 0);\\r\\n            (cx || cy) && this.add(1, 0, 0, 1, -cx, -cy);\\r\\n        };\\r\\n        /*\\\\\\r\\n         * Matrix.rotate\\r\\n         [ method ]\\r\\n         **\\r\\n         * Rotates the matrix\\r\\n         > Parameters\\r\\n         - a (number)\\r\\n         - x (number)\\r\\n         - y (number)\\r\\n         \\\\*/\\r\\n        matrixproto.rotate = function (a, x, y) {\\r\\n            a = R.rad(a);\\r\\n            x = x || 0;\\r\\n            y = y || 0;\\r\\n            var cos = +math.cos(a).toFixed(9),\\r\\n                sin = +math.sin(a).toFixed(9);\\r\\n            this.add(cos, sin, -sin, cos, x, y);\\r\\n            this.add(1, 0, 0, 1, -x, -y);\\r\\n        };\\r\\n        /*\\\\\\r\\n         * Matrix.x\\r\\n         [ method ]\\r\\n         **\\r\\n         * Return x coordinate for given point after transformation described by the matrix. See also @Matrix.y\\r\\n         > Parameters\\r\\n         - x (number)\\r\\n         - y (number)\\r\\n         = (number) x\\r\\n         \\\\*/\\r\\n        matrixproto.x = function (x, y) {\\r\\n            return x * this.a + y * this.c + this.e;\\r\\n        };\\r\\n        /*\\\\\\r\\n         * Matrix.y\\r\\n         [ method ]\\r\\n         **\\r\\n         * Return y coordinate for given point after transformation described by the matrix. See also @Matrix.x\\r\\n         > Parameters\\r\\n         - x (number)\\r\\n         - y (number)\\r\\n         = (number) y\\r\\n         \\\\*/\\r\\n        matrixproto.y = function (x, y) {\\r\\n            return x * this.b + y * this.d + this.f;\\r\\n        };\\r\\n        matrixproto.get = function (i) {\\r\\n            return +this[Str.fromCharCode(97 + i)].toFixed(4);\\r\\n        };\\r\\n        matrixproto.toString = function () {\\r\\n            return R.svg ?\\r\\n            \\\"matrix(\\\" + [this.get(0), this.get(1), this.get(2), this.get(3), this.get(4), this.get(5)].join() + \\\")\\\" :\\r\\n                [this.get(0), this.get(2), this.get(1), this.get(3), 0, 0].join();\\r\\n        };\\r\\n        matrixproto.toFilter = function () {\\r\\n            return \\\"progid:DXImageTransform.Microsoft.Matrix(M11=\\\" + this.get(0) +\\r\\n                \\\", M12=\\\" + this.get(2) + \\\", M21=\\\" + this.get(1) + \\\", M22=\\\" + this.get(3) +\\r\\n                \\\", Dx=\\\" + this.get(4) + \\\", Dy=\\\" + this.get(5) + \\\", sizingmethod='auto expand')\\\";\\r\\n        };\\r\\n        matrixproto.offset = function () {\\r\\n            return [this.e.toFixed(4), this.f.toFixed(4)];\\r\\n        };\\r\\n        function norm(a) {\\r\\n            return a[0] * a[0] + a[1] * a[1];\\r\\n        }\\r\\n        function normalize(a) {\\r\\n            var mag = math.sqrt(norm(a));\\r\\n            a[0] && (a[0] /= mag);\\r\\n            a[1] && (a[1] /= mag);\\r\\n        }\\r\\n        /*\\\\\\r\\n         * Matrix.split\\r\\n         [ method ]\\r\\n         **\\r\\n         * Splits matrix into primitive transformations\\r\\n         = (object) in format:\\r\\n         o dx (number) translation by x\\r\\n         o dy (number) translation by y\\r\\n         o scalex (number) scale by x\\r\\n         o scaley (number) scale by y\\r\\n         o shear (number) shear\\r\\n         o rotate (number) rotation in deg\\r\\n         o isSimple (boolean) could it be represented via simple transformations\\r\\n         \\\\*/\\r\\n        matrixproto.split = function () {\\r\\n            var out = {};\\r\\n            // translation\\r\\n            out.dx = this.e;\\r\\n            out.dy = this.f;\\r\\n\\r\\n            // scale and shear\\r\\n            var row = [[this.a, this.c], [this.b, this.d]];\\r\\n            out.scalex = math.sqrt(norm(row[0]));\\r\\n            normalize(row[0]);\\r\\n\\r\\n            out.shear = row[0][0] * row[1][0] + row[0][1] * row[1][1];\\r\\n            row[1] = [row[1][0] - row[0][0] * out.shear, row[1][1] - row[0][1] * out.shear];\\r\\n\\r\\n            out.scaley = math.sqrt(norm(row[1]));\\r\\n            normalize(row[1]);\\r\\n            out.shear /= out.scaley;\\r\\n\\r\\n            // rotation\\r\\n            var sin = -row[0][1],\\r\\n                cos = row[1][1];\\r\\n            if (cos < 0) {\\r\\n                out.rotate = R.deg(math.acos(cos));\\r\\n                if (sin < 0) {\\r\\n                    out.rotate = 360 - out.rotate;\\r\\n                }\\r\\n            } else {\\r\\n                out.rotate = R.deg(math.asin(sin));\\r\\n            }\\r\\n\\r\\n            out.isSimple = !+out.shear.toFixed(9) && (out.scalex.toFixed(9) == out.scaley.toFixed(9) || !out.rotate);\\r\\n            out.isSuperSimple = !+out.shear.toFixed(9) && out.scalex.toFixed(9) == out.scaley.toFixed(9) && !out.rotate;\\r\\n            out.noRotation = !+out.shear.toFixed(9) && !out.rotate;\\r\\n            return out;\\r\\n        };\\r\\n        /*\\\\\\r\\n         * Matrix.toTransformString\\r\\n         [ method ]\\r\\n         **\\r\\n         * Return transform string that represents given matrix\\r\\n         = (string) transform string\\r\\n         \\\\*/\\r\\n        matrixproto.toTransformString = function (shorter) {\\r\\n            var s = shorter || this[split]();\\r\\n            if (s.isSimple) {\\r\\n                s.scalex = +s.scalex.toFixed(4);\\r\\n                s.scaley = +s.scaley.toFixed(4);\\r\\n                s.rotate = +s.rotate.toFixed(4);\\r\\n                return  (s.dx || s.dy ? \\\"t\\\" + [s.dx, s.dy] : E) +\\r\\n                    (s.scalex != 1 || s.scaley != 1 ? \\\"s\\\" + [s.scalex, s.scaley, 0, 0] : E) +\\r\\n                    (s.rotate ? \\\"r\\\" + [s.rotate, 0, 0] : E);\\r\\n            } else {\\r\\n                return \\\"m\\\" + [this.get(0), this.get(1), this.get(2), this.get(3), this.get(4), this.get(5)];\\r\\n            }\\r\\n        };\\r\\n    })(Matrix.prototype);\\r\\n\\r\\n    var preventDefault = function () {\\r\\n            this.returnValue = false;\\r\\n        },\\r\\n        preventTouch = function () {\\r\\n            return this.originalEvent.preventDefault();\\r\\n        },\\r\\n        stopPropagation = function () {\\r\\n            this.cancelBubble = true;\\r\\n        },\\r\\n        stopTouch = function () {\\r\\n            return this.originalEvent.stopPropagation();\\r\\n        },\\r\\n        getEventPosition = function (e) {\\r\\n            var scrollY = g.doc.documentElement.scrollTop || g.doc.body.scrollTop,\\r\\n                scrollX = g.doc.documentElement.scrollLeft || g.doc.body.scrollLeft;\\r\\n\\r\\n            return {\\r\\n                x: e.clientX + scrollX,\\r\\n                y: e.clientY + scrollY\\r\\n            };\\r\\n        },\\r\\n        addEvent = (function () {\\r\\n            if (g.doc.addEventListener) {\\r\\n                return function (obj, type, fn, element) {\\r\\n                    var f = function (e) {\\r\\n                        var pos = getEventPosition(e);\\r\\n                        return fn.call(element, e, pos.x, pos.y);\\r\\n                    };\\r\\n                    obj.addEventListener(type, f, false);\\r\\n\\r\\n                    if (supportsTouch && touchMap[type]) {\\r\\n                        var _f = function (e) {\\r\\n                            var pos = getEventPosition(e),\\r\\n                                olde = e;\\r\\n\\r\\n                            for (var i = 0, ii = e.targetTouches && e.targetTouches.length; i < ii; i++) {\\r\\n                                if (e.targetTouches[i].target == obj) {\\r\\n                                    e = e.targetTouches[i];\\r\\n                                    e.originalEvent = olde;\\r\\n                                    e.preventDefault = preventTouch;\\r\\n                                    e.stopPropagation = stopTouch;\\r\\n                                    break;\\r\\n                                }\\r\\n                            }\\r\\n\\r\\n                            return fn.call(element, e, pos.x, pos.y);\\r\\n                        };\\r\\n                        obj.addEventListener(touchMap[type], _f, false);\\r\\n                    }\\r\\n\\r\\n                    return function () {\\r\\n                        obj.removeEventListener(type, f, false);\\r\\n\\r\\n                        if (supportsTouch && touchMap[type])\\r\\n                            obj.removeEventListener(touchMap[type], _f, false);\\r\\n\\r\\n                        return true;\\r\\n                    };\\r\\n                };\\r\\n            } else if (g.doc.attachEvent) {\\r\\n                return function (obj, type, fn, element) {\\r\\n                    var f = function (e) {\\r\\n                        e = e || g.win.event;\\r\\n                        var scrollY = g.doc.documentElement.scrollTop || g.doc.body.scrollTop,\\r\\n                            scrollX = g.doc.documentElement.scrollLeft || g.doc.body.scrollLeft,\\r\\n                            x = e.clientX + scrollX,\\r\\n                            y = e.clientY + scrollY;\\r\\n                        e.preventDefault = e.preventDefault || preventDefault;\\r\\n                        e.stopPropagation = e.stopPropagation || stopPropagation;\\r\\n                        return fn.call(element, e, x, y);\\r\\n                    };\\r\\n                    obj.attachEvent(\\\"on\\\" + type, f);\\r\\n                    var detacher = function () {\\r\\n                        obj.detachEvent(\\\"on\\\" + type, f);\\r\\n                        return true;\\r\\n                    };\\r\\n                    return detacher;\\r\\n                };\\r\\n            }\\r\\n        })(),\\r\\n        drag = [],\\r\\n        dragMove = function (e) {\\r\\n            var x = e.clientX,\\r\\n                y = e.clientY,\\r\\n                scrollY = g.doc.documentElement.scrollTop || g.doc.body.scrollTop,\\r\\n                scrollX = g.doc.documentElement.scrollLeft || g.doc.body.scrollLeft,\\r\\n                dragi,\\r\\n                j = drag.length;\\r\\n            while (j--) {\\r\\n                dragi = drag[j];\\r\\n                if (supportsTouch && e.touches) {\\r\\n                    var i = e.touches.length,\\r\\n                        touch;\\r\\n                    while (i--) {\\r\\n                        touch = e.touches[i];\\r\\n                        if (touch.identifier == dragi.el._drag.id) {\\r\\n                            x = touch.clientX;\\r\\n                            y = touch.clientY;\\r\\n                            (e.originalEvent ? e.originalEvent : e).preventDefault();\\r\\n                            break;\\r\\n                        }\\r\\n                    }\\r\\n                } else {\\r\\n                    e.preventDefault();\\r\\n                }\\r\\n                var node = dragi.el.node,\\r\\n                    o,\\r\\n                    next = node.nextSibling,\\r\\n                    parent = node.parentNode,\\r\\n                    display = node.style.display;\\r\\n                g.win.opera && parent.removeChild(node);\\r\\n                node.style.display = \\\"none\\\";\\r\\n                o = dragi.el.paper.getElementByPoint(x, y);\\r\\n                node.style.display = display;\\r\\n                g.win.opera && (next ? parent.insertBefore(node, next) : parent.appendChild(node));\\r\\n                o && eve(\\\"raphael.drag.over.\\\" + dragi.el.id, dragi.el, o);\\r\\n                x += scrollX;\\r\\n                y += scrollY;\\r\\n                eve(\\\"raphael.drag.move.\\\" + dragi.el.id, dragi.move_scope || dragi.el, x - dragi.el._drag.x, y - dragi.el._drag.y, x, y, e);\\r\\n            }\\r\\n        },\\r\\n        dragUp = function (e) {\\r\\n            R.unmousemove(dragMove).unmouseup(dragUp);\\r\\n            var i = drag.length,\\r\\n                dragi;\\r\\n            while (i--) {\\r\\n                dragi = drag[i];\\r\\n                dragi.el._drag = {};\\r\\n                eve(\\\"raphael.drag.end.\\\" + dragi.el.id, dragi.end_scope || dragi.start_scope || dragi.move_scope || dragi.el, e);\\r\\n            }\\r\\n            drag = [];\\r\\n        },\\r\\n    /*\\\\\\r\\n     * Raphael.el\\r\\n     [ property (object) ]\\r\\n     **\\r\\n     * You can add your own method to elements. This is usefull when you want to hack default functionality or\\r\\n     * want to wrap some common transformation or attributes in one method. In difference to canvas methods,\\r\\n     * you can redefine element method at any time. Expending element methods wouldn’t affect set.\\r\\n     > Usage\\r\\n     | Raphael.el.red = function () {\\r\\n     |     this.attr({fill: \\\"#f00\\\"});\\r\\n     | };\\r\\n     | // then use it\\r\\n     | paper.circle(100, 100, 20).red();\\r\\n     \\\\*/\\r\\n        elproto = R.el = {};\\r\\n    /*\\\\\\r\\n     * Element.click\\r\\n     [ method ]\\r\\n     **\\r\\n     * Adds event handler for click for the element.\\r\\n     > Parameters\\r\\n     - handler (function) handler for the event\\r\\n     = (object) @Element\\r\\n     \\\\*/\\r\\n    /*\\\\\\r\\n     * Element.unclick\\r\\n     [ method ]\\r\\n     **\\r\\n     * Removes event handler for click for the element.\\r\\n     > Parameters\\r\\n     - handler (function) #optional handler for the event\\r\\n     = (object) @Element\\r\\n     \\\\*/\\r\\n\\r\\n    /*\\\\\\r\\n     * Element.dblclick\\r\\n     [ method ]\\r\\n     **\\r\\n     * Adds event handler for double click for the element.\\r\\n     > Parameters\\r\\n     - handler (function) handler for the event\\r\\n     = (object) @Element\\r\\n     \\\\*/\\r\\n    /*\\\\\\r\\n     * Element.undblclick\\r\\n     [ method ]\\r\\n     **\\r\\n     * Removes event handler for double click for the element.\\r\\n     > Parameters\\r\\n     - handler (function) #optional handler for the event\\r\\n     = (object) @Element\\r\\n     \\\\*/\\r\\n\\r\\n    /*\\\\\\r\\n     * Element.mousedown\\r\\n     [ method ]\\r\\n     **\\r\\n     * Adds event handler for mousedown for the element.\\r\\n     > Parameters\\r\\n     - handler (function) handler for the event\\r\\n     = (object) @Element\\r\\n     \\\\*/\\r\\n    /*\\\\\\r\\n     * Element.unmousedown\\r\\n     [ method ]\\r\\n     **\\r\\n     * Removes event handler for mousedown for the element.\\r\\n     > Parameters\\r\\n     - handler (function) #optional handler for the event\\r\\n     = (object) @Element\\r\\n     \\\\*/\\r\\n\\r\\n    /*\\\\\\r\\n     * Element.mousemove\\r\\n     [ method ]\\r\\n     **\\r\\n     * Adds event handler for mousemove for the element.\\r\\n     > Parameters\\r\\n     - handler (function) handler for the event\\r\\n     = (object) @Element\\r\\n     \\\\*/\\r\\n    /*\\\\\\r\\n     * Element.unmousemove\\r\\n     [ method ]\\r\\n     **\\r\\n     * Removes event handler for mousemove for the element.\\r\\n     > Parameters\\r\\n     - handler (function) #optional handler for the event\\r\\n     = (object) @Element\\r\\n     \\\\*/\\r\\n\\r\\n    /*\\\\\\r\\n     * Element.mouseout\\r\\n     [ method ]\\r\\n     **\\r\\n     * Adds event handler for mouseout for the element.\\r\\n     > Parameters\\r\\n     - handler (function) handler for the event\\r\\n     = (object) @Element\\r\\n     \\\\*/\\r\\n    /*\\\\\\r\\n     * Element.unmouseout\\r\\n     [ method ]\\r\\n     **\\r\\n     * Removes event handler for mouseout for the element.\\r\\n     > Parameters\\r\\n     - handler (function) #optional handler for the event\\r\\n     = (object) @Element\\r\\n     \\\\*/\\r\\n\\r\\n    /*\\\\\\r\\n     * Element.mouseover\\r\\n     [ method ]\\r\\n     **\\r\\n     * Adds event handler for mouseover for the element.\\r\\n     > Parameters\\r\\n     - handler (function) handler for the event\\r\\n     = (object) @Element\\r\\n     \\\\*/\\r\\n    /*\\\\\\r\\n     * Element.unmouseover\\r\\n     [ method ]\\r\\n     **\\r\\n     * Removes event handler for mouseover for the element.\\r\\n     > Parameters\\r\\n     - handler (function) #optional handler for the event\\r\\n     = (object) @Element\\r\\n     \\\\*/\\r\\n\\r\\n    /*\\\\\\r\\n     * Element.mouseup\\r\\n     [ method ]\\r\\n     **\\r\\n     * Adds event handler for mouseup for the element.\\r\\n     > Parameters\\r\\n     - handler (function) handler for the event\\r\\n     = (object) @Element\\r\\n     \\\\*/\\r\\n    /*\\\\\\r\\n     * Element.unmouseup\\r\\n     [ method ]\\r\\n     **\\r\\n     * Removes event handler for mouseup for the element.\\r\\n     > Parameters\\r\\n     - handler (function) #optional handler for the event\\r\\n     = (object) @Element\\r\\n     \\\\*/\\r\\n\\r\\n    /*\\\\\\r\\n     * Element.touchstart\\r\\n     [ method ]\\r\\n     **\\r\\n     * Adds event handler for touchstart for the element.\\r\\n     > Parameters\\r\\n     - handler (function) handler for the event\\r\\n     = (object) @Element\\r\\n     \\\\*/\\r\\n    /*\\\\\\r\\n     * Element.untouchstart\\r\\n     [ method ]\\r\\n     **\\r\\n     * Removes event handler for touchstart for the element.\\r\\n     > Parameters\\r\\n     - handler (function) #optional handler for the event\\r\\n     = (object) @Element\\r\\n     \\\\*/\\r\\n\\r\\n    /*\\\\\\r\\n     * Element.touchmove\\r\\n     [ method ]\\r\\n     **\\r\\n     * Adds event handler for touchmove for the element.\\r\\n     > Parameters\\r\\n     - handler (function) handler for the event\\r\\n     = (object) @Element\\r\\n     \\\\*/\\r\\n    /*\\\\\\r\\n     * Element.untouchmove\\r\\n     [ method ]\\r\\n     **\\r\\n     * Removes event handler for touchmove for the element.\\r\\n     > Parameters\\r\\n     - handler (function) #optional handler for the event\\r\\n     = (object) @Element\\r\\n     \\\\*/\\r\\n\\r\\n    /*\\\\\\r\\n     * Element.touchend\\r\\n     [ method ]\\r\\n     **\\r\\n     * Adds event handler for touchend for the element.\\r\\n     > Parameters\\r\\n     - handler (function) handler for the event\\r\\n     = (object) @Element\\r\\n     \\\\*/\\r\\n    /*\\\\\\r\\n     * Element.untouchend\\r\\n     [ method ]\\r\\n     **\\r\\n     * Removes event handler for touchend for the element.\\r\\n     > Parameters\\r\\n     - handler (function) #optional handler for the event\\r\\n     = (object) @Element\\r\\n     \\\\*/\\r\\n\\r\\n    /*\\\\\\r\\n     * Element.touchcancel\\r\\n     [ method ]\\r\\n     **\\r\\n     * Adds event handler for touchcancel for the element.\\r\\n     > Parameters\\r\\n     - handler (function) handler for the event\\r\\n     = (object) @Element\\r\\n     \\\\*/\\r\\n    /*\\\\\\r\\n     * Element.untouchcancel\\r\\n     [ method ]\\r\\n     **\\r\\n     * Removes event handler for touchcancel for the element.\\r\\n     > Parameters\\r\\n     - handler (function) #optional handler for the event\\r\\n     = (object) @Element\\r\\n     \\\\*/\\r\\n    for (var i = events.length; i--;) {\\r\\n        (function (eventName) {\\r\\n            R[eventName] = elproto[eventName] = function (fn, scope) {\\r\\n                if (R.is(fn, \\\"function\\\")) {\\r\\n                    this.events = this.events || [];\\r\\n                    this.events.push({name: eventName, f: fn, unbind: addEvent(this.shape || this.node || g.doc, eventName, fn, scope || this)});\\r\\n                }\\r\\n                return this;\\r\\n            };\\r\\n            R[\\\"un\\\" + eventName] = elproto[\\\"un\\\" + eventName] = function (fn) {\\r\\n                var events = this.events || [],\\r\\n                    l = events.length;\\r\\n                while (l--){\\r\\n                    if (events[l].name == eventName && (R.is(fn, \\\"undefined\\\") || events[l].f == fn)) {\\r\\n                        events[l].unbind();\\r\\n                        events.splice(l, 1);\\r\\n                        !events.length && delete this.events;\\r\\n                    }\\r\\n                }\\r\\n                return this;\\r\\n            };\\r\\n        })(events[i]);\\r\\n    }\\r\\n\\r\\n    /*\\\\\\r\\n     * Element.data\\r\\n     [ method ]\\r\\n     **\\r\\n     * Adds or retrieves given value asociated with given key.\\r\\n     **\\r\\n     * See also @Element.removeData\\r\\n     > Parameters\\r\\n     - key (string) key to store data\\r\\n     - value (any) #optional value to store\\r\\n     = (object) @Element\\r\\n     * or, if value is not specified:\\r\\n     = (any) value\\r\\n     * or, if key and value are not specified:\\r\\n     = (object) Key/value pairs for all the data associated with the element.\\r\\n     > Usage\\r\\n     | for (var i = 0, i < 5, i++) {\\r\\n     |     paper.circle(10 + 15 * i, 10, 10)\\r\\n     |          .attr({fill: \\\"#000\\\"})\\r\\n     |          .data(\\\"i\\\", i)\\r\\n     |          .click(function () {\\r\\n     |             alert(this.data(\\\"i\\\"));\\r\\n     |          });\\r\\n     | }\\r\\n     \\\\*/\\r\\n    elproto.data = function (key, value) {\\r\\n        var data = eldata[this.id] = eldata[this.id] || {};\\r\\n        if (arguments.length == 0) {\\r\\n            return data;\\r\\n        }\\r\\n        if (arguments.length == 1) {\\r\\n            if (R.is(key, \\\"object\\\")) {\\r\\n                for (var i in key) if (key[has](i)) {\\r\\n                    this.data(i, key[i]);\\r\\n                }\\r\\n                return this;\\r\\n            }\\r\\n            eve(\\\"raphael.data.get.\\\" + this.id, this, data[key], key);\\r\\n            return data[key];\\r\\n        }\\r\\n        data[key] = value;\\r\\n        eve(\\\"raphael.data.set.\\\" + this.id, this, value, key);\\r\\n        return this;\\r\\n    };\\r\\n\\r\\n    elproto.datum = function(){\\r\\n        return arguments.length == 0 ? this._bindData : ((this._bindData = arguments[0]), this);\\r\\n    };\\r\\n\\r\\n    /*\\\\\\r\\n     * Element.removeData\\r\\n     [ method ]\\r\\n     **\\r\\n     * Removes value associated with an element by given key.\\r\\n     * If key is not provided, removes all the data of the element.\\r\\n     > Parameters\\r\\n     - key (string) #optional key\\r\\n     = (object) @Element\\r\\n     \\\\*/\\r\\n    elproto.removeData = function (key) {\\r\\n        if (key == null) {\\r\\n            eldata[this.id] = {};\\r\\n        } else {\\r\\n            eldata[this.id] && delete eldata[this.id][key];\\r\\n        }\\r\\n        return this;\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Element.getData\\r\\n     [ method ]\\r\\n     **\\r\\n     * Retrieves the element data\\r\\n     = (object) data\\r\\n     \\\\*/\\r\\n    elproto.getData = function () {\\r\\n        return clone(eldata[this.id] || {});\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Element.hover\\r\\n     [ method ]\\r\\n     **\\r\\n     * Adds event handlers for hover for the element.\\r\\n     > Parameters\\r\\n     - f_in (function) handler for hover in\\r\\n     - f_out (function) handler for hover out\\r\\n     - icontext (object) #optional context for hover in handler\\r\\n     - ocontext (object) #optional context for hover out handler\\r\\n     = (object) @Element\\r\\n     \\\\*/\\r\\n    elproto.hover = function (f_in, f_out, scope_in, scope_out) {\\r\\n        return this.mouseover(f_in, scope_in).mouseout(f_out, scope_out || scope_in);\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Element.unhover\\r\\n     [ method ]\\r\\n     **\\r\\n     * Removes event handlers for hover for the element.\\r\\n     > Parameters\\r\\n     - f_in (function) handler for hover in\\r\\n     - f_out (function) handler for hover out\\r\\n     = (object) @Element\\r\\n     \\\\*/\\r\\n    elproto.unhover = function (f_in, f_out) {\\r\\n        return this.unmouseover(f_in).unmouseout(f_out);\\r\\n    };\\r\\n    var draggable = [];\\r\\n    /*\\\\\\r\\n     * Element.drag\\r\\n     [ method ]\\r\\n     **\\r\\n     * Adds event handlers for drag of the element.\\r\\n     > Parameters\\r\\n     - onmove (function) handler for moving\\r\\n     - onstart (function) handler for drag start\\r\\n     - onend (function) handler for drag end\\r\\n     - mcontext (object) #optional context for moving handler\\r\\n     - scontext (object) #optional context for drag start handler\\r\\n     - econtext (object) #optional context for drag end handler\\r\\n     * Additionaly following `drag` events will be triggered: `drag.start.<id>` on start,\\r\\n     * `drag.end.<id>` on end and `drag.move.<id>` on every move. When element will be dragged over another element\\r\\n     * `drag.over.<id>` will be fired as well.\\r\\n     *\\r\\n     * Start event and start handler will be called in specified context or in context of the element with following parameters:\\r\\n     o x (number) x position of the mouse\\r\\n     o y (number) y position of the mouse\\r\\n     o event (object) DOM event object\\r\\n     * Move event and move handler will be called in specified context or in context of the element with following parameters:\\r\\n     o dx (number) shift by x from the start point\\r\\n     o dy (number) shift by y from the start point\\r\\n     o x (number) x position of the mouse\\r\\n     o y (number) y position of the mouse\\r\\n     o event (object) DOM event object\\r\\n     * End event and end handler will be called in specified context or in context of the element with following parameters:\\r\\n     o event (object) DOM event object\\r\\n     = (object) @Element\\r\\n     \\\\*/\\r\\n    elproto.drag = function (onmove, onstart, onend, move_scope, start_scope, end_scope) {\\r\\n        function start(e) {\\r\\n            (e.originalEvent || e).preventDefault();\\r\\n            var x = e.clientX,\\r\\n                y = e.clientY,\\r\\n                scrollY = g.doc.documentElement.scrollTop || g.doc.body.scrollTop,\\r\\n                scrollX = g.doc.documentElement.scrollLeft || g.doc.body.scrollLeft;\\r\\n            this._drag.id = e.identifier;\\r\\n            if (supportsTouch && e.touches) {\\r\\n                var i = e.touches.length, touch;\\r\\n                while (i--) {\\r\\n                    touch = e.touches[i];\\r\\n                    this._drag.id = touch.identifier;\\r\\n                    if (touch.identifier == this._drag.id) {\\r\\n                        x = touch.clientX;\\r\\n                        y = touch.clientY;\\r\\n                        break;\\r\\n                    }\\r\\n                }\\r\\n            }\\r\\n            this._drag.x = x + scrollX;\\r\\n            this._drag.y = y + scrollY;\\r\\n            !drag.length && R.mousemove(dragMove).mouseup(dragUp);\\r\\n            drag.push({el: this, move_scope: move_scope, start_scope: start_scope, end_scope: end_scope});\\r\\n            onstart && eve.on(\\\"raphael.drag.start.\\\" + this.id, onstart);\\r\\n            onmove && eve.on(\\\"raphael.drag.move.\\\" + this.id, onmove);\\r\\n            onend && eve.on(\\\"raphael.drag.end.\\\" + this.id, onend);\\r\\n            eve(\\\"raphael.drag.start.\\\" + this.id, start_scope || move_scope || this, e.clientX + scrollX, e.clientY + scrollY, e);\\r\\n        }\\r\\n        this._drag = {};\\r\\n        draggable.push({el: this, start: start});\\r\\n        this.mousedown(start);\\r\\n        return this;\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Element.onDragOver\\r\\n     [ method ]\\r\\n     **\\r\\n     * Shortcut for assigning event handler for `drag.over.<id>` event, where id is id of the element (see @Element.id).\\r\\n     > Parameters\\r\\n     - f (function) handler for event, first argument would be the element you are dragging over\\r\\n     \\\\*/\\r\\n    elproto.onDragOver = function (f) {\\r\\n        f ? eve.on(\\\"raphael.drag.over.\\\" + this.id, f) : eve.unbind(\\\"raphael.drag.over.\\\" + this.id);\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Element.undrag\\r\\n     [ method ]\\r\\n     **\\r\\n     * Removes all drag event handlers from given element.\\r\\n     \\\\*/\\r\\n    elproto.undrag = function () {\\r\\n        var i = draggable.length;\\r\\n        while (i--) if (draggable[i].el == this) {\\r\\n            this.unmousedown(draggable[i].start);\\r\\n            draggable.splice(i, 1);\\r\\n            eve.unbind(\\\"raphael.drag.*.\\\" + this.id);\\r\\n        }\\r\\n        !draggable.length && R.unmousemove(dragMove).unmouseup(dragUp);\\r\\n        drag = [];\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Paper.circle\\r\\n     [ method ]\\r\\n     **\\r\\n     * Draws a circle.\\r\\n     **\\r\\n     > Parameters\\r\\n     **\\r\\n     - x (number) x coordinate of the centre\\r\\n     - y (number) y coordinate of the centre\\r\\n     - r (number) radius\\r\\n     = (object) Raphaël element object with type “circle”\\r\\n     **\\r\\n     > Usage\\r\\n     | var c = paper.circle(50, 50, 40);\\r\\n     \\\\*/\\r\\n    paperproto.circle = function (x, y, r) {\\r\\n        var out = R._engine.circle(this, x || 0, y || 0, r || 0);\\r\\n        this.__set__ && this.__set__.push(out);\\r\\n        return out;\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Paper.rect\\r\\n     [ method ]\\r\\n     *\\r\\n     * Draws a rectangle.\\r\\n     **\\r\\n     > Parameters\\r\\n     **\\r\\n     - x (number) x coordinate of the top left corner\\r\\n     - y (number) y coordinate of the top left corner\\r\\n     - width (number) width\\r\\n     - height (number) height\\r\\n     - r (number) #optional radius for rounded corners, default is 0\\r\\n     = (object) Raphaël element object with type “rect”\\r\\n     **\\r\\n     > Usage\\r\\n     | // regular rectangle\\r\\n     | var c = paper.rect(10, 10, 50, 50);\\r\\n     | // rectangle with rounded corners\\r\\n     | var c = paper.rect(40, 40, 50, 50, 10);\\r\\n     \\\\*/\\r\\n    paperproto.rect = function (x, y, w, h, r) {\\r\\n        var out = R._engine.rect(this, x || 0, y || 0, w || 0, h || 0, r || 0);\\r\\n        this.__set__ && this.__set__.push(out);\\r\\n        return out;\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Paper.ellipse\\r\\n     [ method ]\\r\\n     **\\r\\n     * Draws an ellipse.\\r\\n     **\\r\\n     > Parameters\\r\\n     **\\r\\n     - x (number) x coordinate of the centre\\r\\n     - y (number) y coordinate of the centre\\r\\n     - rx (number) horizontal radius\\r\\n     - ry (number) vertical radius\\r\\n     = (object) Raphaël element object with type “ellipse”\\r\\n     **\\r\\n     > Usage\\r\\n     | var c = paper.ellipse(50, 50, 40, 20);\\r\\n     \\\\*/\\r\\n    paperproto.ellipse = function (x, y, rx, ry) {\\r\\n        var out = R._engine.ellipse(this, x || 0, y || 0, rx || 0, ry || 0);\\r\\n        this.__set__ && this.__set__.push(out);\\r\\n        return out;\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Paper.path\\r\\n     [ method ]\\r\\n     **\\r\\n     * Creates a path element by given path data string.\\r\\n     > Parameters\\r\\n     - pathString (string) #optional path string in SVG format.\\r\\n     * Path string consists of one-letter commands, followed by comma seprarated arguments in numercal form. Example:\\r\\n     | \\\"M10,20L30,40\\\"\\r\\n     * Here we can see two commands: “M”, with arguments `(10, 20)` and “L” with arguments `(30, 40)`. Upper case letter mean command is absolute, lower case—relative.\\r\\n     *\\r\\n     # <p>Here is short list of commands available, for more details see <a href=\\\"http://www.w3.org/TR/SVG/paths.html#PathData\\\" title=\\\"Details of a path's data attribute's format are described in the SVG specification.\\\">SVG path string format</a>.</p>\\r\\n     # <table><thead><tr><th>Command</th><th>Name</th><th>Parameters</th></tr></thead><tbody>\\r\\n     # <tr><td>M</td><td>moveto</td><td>(x y)+</td></tr>\\r\\n     # <tr><td>Z</td><td>closepath</td><td>(none)</td></tr>\\r\\n     # <tr><td>L</td><td>lineto</td><td>(x y)+</td></tr>\\r\\n     # <tr><td>H</td><td>horizontal lineto</td><td>x+</td></tr>\\r\\n     # <tr><td>V</td><td>vertical lineto</td><td>y+</td></tr>\\r\\n     # <tr><td>C</td><td>curveto</td><td>(x1 y1 x2 y2 x y)+</td></tr>\\r\\n     # <tr><td>S</td><td>smooth curveto</td><td>(x2 y2 x y)+</td></tr>\\r\\n     # <tr><td>Q</td><td>quadratic Bézier curveto</td><td>(x1 y1 x y)+</td></tr>\\r\\n     # <tr><td>T</td><td>smooth quadratic Bézier curveto</td><td>(x y)+</td></tr>\\r\\n     # <tr><td>A</td><td>elliptical arc</td><td>(rx ry x-axis-rotation large-arc-flag sweep-flag x y)+</td></tr>\\r\\n     # <tr><td>R</td><td><a href=\\\"http://en.wikipedia.org/wiki/Catmull–Rom_spline#Catmull.E2.80.93Rom_spline\\\">Catmull-Rom curveto</a>*</td><td>x1 y1 (x y)+</td></tr></tbody></table>\\r\\n     * * “Catmull-Rom curveto” is a not standard SVG command and added in 2.0 to make life easier.\\r\\n     * Note: there is a special case when path consist of just three commands: “M10,10R…z”. In this case path will smoothly connects to its beginning.\\r\\n     > Usage\\r\\n     | var c = paper.path(\\\"M10 10L90 90\\\");\\r\\n     | // draw a diagonal line:\\r\\n     | // move to 10,10, line to 90,90\\r\\n     * For example of path strings, check out these icons: http://raphaeljs.com/icons/\\r\\n     \\\\*/\\r\\n    paperproto.path = function (pathString) {\\r\\n        pathString && !R.is(pathString, string) && !R.is(pathString[0], array) && (pathString += E);\\r\\n        var out = R._engine.path(R.format[apply](R, arguments), this);\\r\\n        this.__set__ && this.__set__.push(out);\\r\\n        return out;\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Paper.image\\r\\n     [ method ]\\r\\n     **\\r\\n     * Embeds an image into the surface.\\r\\n     **\\r\\n     > Parameters\\r\\n     **\\r\\n     - src (string) URI of the source image\\r\\n     - x (number) x coordinate position\\r\\n     - y (number) y coordinate position\\r\\n     - width (number) width of the image\\r\\n     - height (number) height of the image\\r\\n     = (object) Raphaël element object with type “image”\\r\\n     **\\r\\n     > Usage\\r\\n     | var c = paper.image(\\\"apple.png\\\", 10, 10, 80, 80);\\r\\n     \\\\*/\\r\\n    paperproto.image = function (src, x, y, w, h) {\\r\\n        var out = R._engine.image(this, src || \\\"about:blank\\\", x || 0, y || 0, w || 0, h || 0);\\r\\n        this.__set__ && this.__set__.push(out);\\r\\n        return out;\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Paper.text\\r\\n     [ method ]\\r\\n     **\\r\\n     * Draws a text string. If you need line breaks, put “\\\\n” in the string.\\r\\n     **\\r\\n     > Parameters\\r\\n     **\\r\\n     - x (number) x coordinate position\\r\\n     - y (number) y coordinate position\\r\\n     - text (string) The text string to draw\\r\\n     = (object) Raphaël element object with type “text”\\r\\n     **\\r\\n     > Usage\\r\\n     | var t = paper.text(50, 50, \\\"Raphaël\\\\nkicks\\\\nbutt!\\\");\\r\\n     \\\\*/\\r\\n    paperproto.text = function (x, y, text) {\\r\\n        var out = R._engine.text(this, x || 0, y || 0, Str(text));\\r\\n        this.__set__ && this.__set__.push(out);\\r\\n        return out;\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Paper.set\\r\\n     [ method ]\\r\\n     **\\r\\n     * Creates array-like object to keep and operate several elements at once.\\r\\n     * Warning: it doesn’t create any elements for itself in the page, it just groups existing elements.\\r\\n     * Sets act as pseudo elements — all methods available to an element can be used on a set.\\r\\n     = (object) array-like object that represents set of elements\\r\\n     **\\r\\n     > Usage\\r\\n     | var st = paper.set();\\r\\n     | st.push(\\r\\n     |     paper.circle(10, 10, 5),\\r\\n     |     paper.circle(30, 10, 5)\\r\\n     | );\\r\\n     | st.attr({fill: \\\"red\\\"}); // changes the fill of both circles\\r\\n     \\\\*/\\r\\n    paperproto.set = function (itemsArray) {\\r\\n        !R.is(itemsArray, \\\"array\\\") && (itemsArray = Array.prototype.splice.call(arguments, 0, arguments.length));\\r\\n        var out = new Set(itemsArray);\\r\\n        this.__set__ && this.__set__.push(out);\\r\\n        out[\\\"paper\\\"] = this;\\r\\n        out[\\\"type\\\"] = \\\"set\\\";\\r\\n        return out;\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Paper.setStart\\r\\n     [ method ]\\r\\n     **\\r\\n     * Creates @Paper.set. All elements that will be created after calling this method and before calling\\r\\n     * @Paper.setFinish will be added to the set.\\r\\n     **\\r\\n     > Usage\\r\\n     | paper.setStart();\\r\\n     | paper.circle(10, 10, 5),\\r\\n     | paper.circle(30, 10, 5)\\r\\n     | var st = paper.setFinish();\\r\\n     | st.attr({fill: \\\"red\\\"}); // changes the fill of both circles\\r\\n     \\\\*/\\r\\n    paperproto.setStart = function (set) {\\r\\n        this.__set__ = set || this.set();\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Paper.setFinish\\r\\n     [ method ]\\r\\n     **\\r\\n     * See @Paper.setStart. This method finishes catching and returns resulting set.\\r\\n     **\\r\\n     = (object) set\\r\\n     \\\\*/\\r\\n    paperproto.setFinish = function (set) {\\r\\n        var out = this.__set__;\\r\\n        delete this.__set__;\\r\\n        return out;\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Paper.getSize\\r\\n     [ method ]\\r\\n     **\\r\\n     * Obtains current paper actual size.\\r\\n     **\\r\\n     = (object)\\r\\n     \\\\*/\\r\\n    paperproto.getSize = function () {\\r\\n        var container = this.canvas.parentNode;\\r\\n        return {\\r\\n            width: container.offsetWidth,\\r\\n            height: container.offsetHeight\\r\\n        };\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Paper.setSize\\r\\n     [ method ]\\r\\n     **\\r\\n     * If you need to change dimensions of the canvas call this method\\r\\n     **\\r\\n     > Parameters\\r\\n     **\\r\\n     - width (number) new width of the canvas\\r\\n     - height (number) new height of the canvas\\r\\n     \\\\*/\\r\\n    paperproto.setSize = function (width, height) {\\r\\n        return R._engine.setSize.call(this, width, height);\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Paper.setViewBox\\r\\n     [ method ]\\r\\n     **\\r\\n     * Sets the view box of the paper. Practically it gives you ability to zoom and pan whole paper surface by\\r\\n     * specifying new boundaries.\\r\\n     **\\r\\n     > Parameters\\r\\n     **\\r\\n     - x (number) new x position, default is `0`\\r\\n     - y (number) new y position, default is `0`\\r\\n     - w (number) new width of the canvas\\r\\n     - h (number) new height of the canvas\\r\\n     - fit (boolean) `true` if you want graphics to fit into new boundary box\\r\\n     \\\\*/\\r\\n    paperproto.setViewBox = function (x, y, w, h, fit) {\\r\\n        return R._engine.setViewBox.call(this, x, y, w, h, fit);\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Paper.top\\r\\n     [ property ]\\r\\n     **\\r\\n     * Points to the topmost element on the paper\\r\\n     \\\\*/\\r\\n    /*\\\\\\r\\n     * Paper.bottom\\r\\n     [ property ]\\r\\n     **\\r\\n     * Points to the bottom element on the paper\\r\\n     \\\\*/\\r\\n    paperproto.top = paperproto.bottom = null;\\r\\n    /*\\\\\\r\\n     * Paper.raphael\\r\\n     [ property ]\\r\\n     **\\r\\n     * Points to the @Raphael object/function\\r\\n     \\\\*/\\r\\n    paperproto.raphael = R;\\r\\n    var getOffset = function (elem) {\\r\\n        var box = elem.getBoundingClientRect(),\\r\\n            doc = elem.ownerDocument,\\r\\n            body = doc.body,\\r\\n            docElem = doc.documentElement,\\r\\n            clientTop = docElem.clientTop || body.clientTop || 0, clientLeft = docElem.clientLeft || body.clientLeft || 0,\\r\\n            top  = box.top  + (g.win.pageYOffset || docElem.scrollTop || body.scrollTop ) - clientTop,\\r\\n            left = box.left + (g.win.pageXOffset || docElem.scrollLeft || body.scrollLeft) - clientLeft;\\r\\n        return {\\r\\n            y: top,\\r\\n            x: left\\r\\n        };\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Paper.getElementByPoint\\r\\n     [ method ]\\r\\n     **\\r\\n     * Returns you topmost element under given point.\\r\\n     **\\r\\n     = (object) Raphaël element object\\r\\n     > Parameters\\r\\n     **\\r\\n     - x (number) x coordinate from the top left corner of the window\\r\\n     - y (number) y coordinate from the top left corner of the window\\r\\n     > Usage\\r\\n     | paper.getElementByPoint(mouseX, mouseY).attr({stroke: \\\"#f00\\\"});\\r\\n     \\\\*/\\r\\n    paperproto.getElementByPoint = function (x, y) {\\r\\n        var paper = this,\\r\\n            svg = paper.canvas,\\r\\n            target = g.doc.elementFromPoint(x, y);\\r\\n        if (g.win.opera && target.tagName == \\\"svg\\\") {\\r\\n            var so = getOffset(svg),\\r\\n                sr = svg.createSVGRect();\\r\\n            sr.x = x - so.x;\\r\\n            sr.y = y - so.y;\\r\\n            sr.width = sr.height = 1;\\r\\n            var hits = svg.getIntersectionList(sr, null);\\r\\n            if (hits.length) {\\r\\n                target = hits[hits.length - 1];\\r\\n            }\\r\\n        }\\r\\n        if (!target) {\\r\\n            return null;\\r\\n        }\\r\\n        while (target.parentNode && target != svg.parentNode && !target.raphael) {\\r\\n            target = target.parentNode;\\r\\n        }\\r\\n        target == paper.canvas.parentNode && (target = svg);\\r\\n        target = target && target.raphael ? paper.getById(target.raphaelid) : null;\\r\\n        return target;\\r\\n    };\\r\\n\\r\\n    /*\\\\\\r\\n     * Paper.getElementsByBBox\\r\\n     [ method ]\\r\\n     **\\r\\n     * Returns set of elements that have an intersecting bounding box\\r\\n     **\\r\\n     > Parameters\\r\\n     **\\r\\n     - bbox (object) bbox to check with\\r\\n     = (object) @Set\\r\\n     \\\\*/\\r\\n    paperproto.getElementsByBBox = function (bbox) {\\r\\n        var set = this.set();\\r\\n        this.forEach(function (el) {\\r\\n            if (R.isBBoxIntersect(el.getBBox(), bbox)) {\\r\\n                set.push(el);\\r\\n            }\\r\\n        });\\r\\n        return set;\\r\\n    };\\r\\n\\r\\n    /*\\\\\\r\\n     * Paper.getById\\r\\n     [ method ]\\r\\n     **\\r\\n     * Returns you element by its internal ID.\\r\\n     **\\r\\n     > Parameters\\r\\n     **\\r\\n     - id (number) id\\r\\n     = (object) Raphaël element object\\r\\n     \\\\*/\\r\\n    paperproto.getById = function (id) {\\r\\n        var bot = this.bottom;\\r\\n        while (bot) {\\r\\n            if (bot.id == id) {\\r\\n                return bot;\\r\\n            }\\r\\n            bot = bot.next;\\r\\n        }\\r\\n        return null;\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Paper.forEach\\r\\n     [ method ]\\r\\n     **\\r\\n     * Executes given function for each element on the paper\\r\\n     *\\r\\n     * If callback function returns `false` it will stop loop running.\\r\\n     **\\r\\n     > Parameters\\r\\n     **\\r\\n     - callback (function) function to run\\r\\n     - thisArg (object) context object for the callback\\r\\n     = (object) Paper object\\r\\n     > Usage\\r\\n     | paper.forEach(function (el) {\\r\\n     |     el.attr({ stroke: \\\"blue\\\" });\\r\\n     | });\\r\\n     \\\\*/\\r\\n    paperproto.forEach = function (callback, thisArg) {\\r\\n        var bot = this.bottom;\\r\\n        while (bot) {\\r\\n            if (callback.call(thisArg, bot) === false) {\\r\\n                return this;\\r\\n            }\\r\\n            bot = bot.next;\\r\\n        }\\r\\n        return this;\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Paper.getElementsByPoint\\r\\n     [ method ]\\r\\n     **\\r\\n     * Returns set of elements that have common point inside\\r\\n     **\\r\\n     > Parameters\\r\\n     **\\r\\n     - x (number) x coordinate of the point\\r\\n     - y (number) y coordinate of the point\\r\\n     = (object) @Set\\r\\n     \\\\*/\\r\\n    paperproto.getElementsByPoint = function (x, y) {\\r\\n        var set = this.set();\\r\\n        this.forEach(function (el) {\\r\\n            if (el.isPointInside(x, y)) {\\r\\n                set.push(el);\\r\\n            }\\r\\n        });\\r\\n        return set;\\r\\n    };\\r\\n    function x_y() {\\r\\n        return this.x + S + this.y;\\r\\n    }\\r\\n    function x_y_w_h() {\\r\\n        return this.x + S + this.y + S + this.width + \\\" \\\\xd7 \\\" + this.height;\\r\\n    }\\r\\n    /*\\\\\\r\\n     * Element.isPointInside\\r\\n     [ method ]\\r\\n     **\\r\\n     * Determine if given point is inside this element’s shape\\r\\n     **\\r\\n     > Parameters\\r\\n     **\\r\\n     - x (number) x coordinate of the point\\r\\n     - y (number) y coordinate of the point\\r\\n     = (boolean) `true` if point inside the shape\\r\\n     \\\\*/\\r\\n    elproto.isPointInside = function (x, y) {\\r\\n        var rp = this.realPath = getPath[this.type](this);\\r\\n        if (this.attr('transform') && this.attr('transform').length) {\\r\\n            rp = R.transformPath(rp, this.attr('transform'));\\r\\n        }\\r\\n        return R.isPointInsidePath(rp, x, y);\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Element.getBBox\\r\\n     [ method ]\\r\\n     **\\r\\n     * Return bounding box for a given element\\r\\n     **\\r\\n     > Parameters\\r\\n     **\\r\\n     - isWithoutTransform (boolean) flag, `true` if you want to have bounding box before transformations. Default is `false`.\\r\\n     = (object) Bounding box object:\\r\\n     o {\\r\\n     o     x: (number) top left corner x\\r\\n     o     y: (number) top left corner y\\r\\n     o     x2: (number) bottom right corner x\\r\\n     o     y2: (number) bottom right corner y\\r\\n     o     width: (number) width\\r\\n     o     height: (number) height\\r\\n     o }\\r\\n     \\\\*/\\r\\n    elproto.getBBox = function (isWithoutTransform) {\\r\\n        if (this.removed) {\\r\\n            return {};\\r\\n        }\\r\\n        var _ = this._;\\r\\n        if (isWithoutTransform) {\\r\\n            if (_.dirty || !_.bboxwt) {\\r\\n                this.realPath = getPath[this.type](this);\\r\\n                _.bboxwt = pathDimensions(this.realPath);\\r\\n                _.bboxwt.toString = x_y_w_h;\\r\\n                _.dirty = 0;\\r\\n            }\\r\\n            return _.bboxwt;\\r\\n        }\\r\\n        if (_.dirty || _.dirtyT || !_.bbox) {\\r\\n            if (_.dirty || !this.realPath) {\\r\\n                _.bboxwt = 0;\\r\\n                this.realPath = getPath[this.type](this);\\r\\n            }\\r\\n            _.bbox = pathDimensions(mapPath(this.realPath, this.matrix));\\r\\n            _.bbox.toString = x_y_w_h;\\r\\n            _.dirty = _.dirtyT = 0;\\r\\n        }\\r\\n        return _.bbox;\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Element.clone\\r\\n     [ method ]\\r\\n     **\\r\\n     = (object) clone of a given element\\r\\n     **\\r\\n     \\\\*/\\r\\n    elproto.clone = function () {\\r\\n        if (this.removed) {\\r\\n            return null;\\r\\n        }\\r\\n        var out = this.paper[this.type]().attr(this.attr());\\r\\n        this.__set__ && this.__set__.push(out);\\r\\n        return out;\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Element.glow\\r\\n     [ method ]\\r\\n     **\\r\\n     * Return set of elements that create glow-like effect around given element. See @Paper.set.\\r\\n     *\\r\\n     * Note: Glow is not connected to the element. If you change element attributes it won’t adjust itself.\\r\\n     **\\r\\n     > Parameters\\r\\n     **\\r\\n     - glow (object) #optional parameters object with all properties optional:\\r\\n     o {\\r\\n     o     width (number) size of the glow, default is `10`\\r\\n     o     fill (boolean) will it be filled, default is `false`\\r\\n     o     opacity (number) opacity, default is `0.5`\\r\\n     o     offsetx (number) horizontal offset, default is `0`\\r\\n     o     offsety (number) vertical offset, default is `0`\\r\\n     o     color (string) glow colour, default is `black`\\r\\n     o }\\r\\n     = (object) @Paper.set of elements that represents glow\\r\\n     \\\\*/\\r\\n    elproto.glow = function (glow) {\\r\\n        if (this.type == \\\"text\\\") {\\r\\n            return null;\\r\\n        }\\r\\n        glow = glow || {};\\r\\n        var s = {\\r\\n                width: (glow.width || 10) + (+this.attr(\\\"stroke-width\\\") || 1),\\r\\n                fill: glow.fill || false,\\r\\n                opacity: glow.opacity == null ? .5 : glow.opacity,\\r\\n                offsetx: glow.offsetx || 0,\\r\\n                offsety: glow.offsety || 0,\\r\\n                color: glow.color || \\\"#000\\\"\\r\\n            },\\r\\n            c = s.width / 2,\\r\\n            r = this.paper,\\r\\n            out = r.set(),\\r\\n            path = this.realPath || getPath[this.type](this);\\r\\n        path = this.matrix ? mapPath(path, this.matrix) : path;\\r\\n        for (var i = 1; i < c + 1; i++) {\\r\\n            out.push(r.path(path).attr({\\r\\n                stroke: s.color,\\r\\n                fill: s.fill ? s.color : \\\"none\\\",\\r\\n                \\\"stroke-linejoin\\\": \\\"round\\\",\\r\\n                \\\"stroke-linecap\\\": \\\"round\\\",\\r\\n                \\\"stroke-width\\\": +(s.width / c * i).toFixed(3),\\r\\n                opacity: +(s.opacity / c).toFixed(3)\\r\\n            }));\\r\\n        }\\r\\n        return out.insertBefore(this).translate(s.offsetx, s.offsety);\\r\\n    };\\r\\n    var curveslengths = {},\\r\\n        getPointAtSegmentLength = function (p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, length) {\\r\\n            if (length == null) {\\r\\n                return bezlen(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y);\\r\\n            } else {\\r\\n                return R.findDotsAtSegment(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, getTatLen(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, length));\\r\\n            }\\r\\n        },\\r\\n        getLengthFactory = function (istotal, subpath) {\\r\\n            return function (path, length, onlystart) {\\r\\n                path = path2curve(path);\\r\\n                var x, y, p, l, sp = \\\"\\\", subpaths = {}, point,\\r\\n                    len = 0;\\r\\n                for (var i = 0, ii = path.length; i < ii; i++) {\\r\\n                    p = path[i];\\r\\n                    if (p[0] == \\\"M\\\") {\\r\\n                        x = +p[1];\\r\\n                        y = +p[2];\\r\\n                    } else {\\r\\n                        l = getPointAtSegmentLength(x, y, p[1], p[2], p[3], p[4], p[5], p[6]);\\r\\n                        if (len + l > length) {\\r\\n                            if (subpath && !subpaths.start) {\\r\\n                                point = getPointAtSegmentLength(x, y, p[1], p[2], p[3], p[4], p[5], p[6], length - len);\\r\\n                                sp += [\\\"C\\\" + point.start.x, point.start.y, point.m.x, point.m.y, point.x, point.y];\\r\\n                                if (onlystart) {return sp;}\\r\\n                                subpaths.start = sp;\\r\\n                                sp = [\\\"M\\\" + point.x, point.y + \\\"C\\\" + point.n.x, point.n.y, point.end.x, point.end.y, p[5], p[6]].join();\\r\\n                                len += l;\\r\\n                                x = +p[5];\\r\\n                                y = +p[6];\\r\\n                                continue;\\r\\n                            }\\r\\n                            if (!istotal && !subpath) {\\r\\n                                point = getPointAtSegmentLength(x, y, p[1], p[2], p[3], p[4], p[5], p[6], length - len);\\r\\n                                return {x: point.x, y: point.y, alpha: point.alpha};\\r\\n                            }\\r\\n                        }\\r\\n                        len += l;\\r\\n                        x = +p[5];\\r\\n                        y = +p[6];\\r\\n                    }\\r\\n                    sp += p.shift() + p;\\r\\n                }\\r\\n                subpaths.end = sp;\\r\\n                point = istotal ? len : subpath ? subpaths : R.findDotsAtSegment(x, y, p[0], p[1], p[2], p[3], p[4], p[5], 1);\\r\\n                point.alpha && (point = {x: point.x, y: point.y, alpha: point.alpha});\\r\\n                return point;\\r\\n            };\\r\\n        };\\r\\n    var getTotalLength = getLengthFactory(1),\\r\\n        getPointAtLength = getLengthFactory(),\\r\\n        getSubpathsAtLength = getLengthFactory(0, 1);\\r\\n    /*\\\\\\r\\n     * Raphael.getTotalLength\\r\\n     [ method ]\\r\\n     **\\r\\n     * Returns length of the given path in pixels.\\r\\n     **\\r\\n     > Parameters\\r\\n     **\\r\\n     - path (string) SVG path string.\\r\\n     **\\r\\n     = (number) length.\\r\\n     \\\\*/\\r\\n    R.getTotalLength = getTotalLength;\\r\\n    /*\\\\\\r\\n     * Raphael.getPointAtLength\\r\\n     [ method ]\\r\\n     **\\r\\n     * Return coordinates of the point located at the given length on the given path.\\r\\n     **\\r\\n     > Parameters\\r\\n     **\\r\\n     - path (string) SVG path string\\r\\n     - length (number)\\r\\n     **\\r\\n     = (object) representation of the point:\\r\\n     o {\\r\\n     o     x: (number) x coordinate\\r\\n     o     y: (number) y coordinate\\r\\n     o     alpha: (number) angle of derivative\\r\\n     o }\\r\\n     \\\\*/\\r\\n    R.getPointAtLength = getPointAtLength;\\r\\n    /*\\\\\\r\\n     * Raphael.getSubpath\\r\\n     [ method ]\\r\\n     **\\r\\n     * Return subpath of a given path from given length to given length.\\r\\n     **\\r\\n     > Parameters\\r\\n     **\\r\\n     - path (string) SVG path string\\r\\n     - from (number) position of the start of the segment\\r\\n     - to (number) position of the end of the segment\\r\\n     **\\r\\n     = (string) pathstring for the segment\\r\\n     \\\\*/\\r\\n    R.getSubpath = function (path, from, to) {\\r\\n        if (this.getTotalLength(path) - to < 1e-6) {\\r\\n            return getSubpathsAtLength(path, from).end;\\r\\n        }\\r\\n        var a = getSubpathsAtLength(path, to, 1);\\r\\n        return from ? getSubpathsAtLength(a, from).end : a;\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Element.getTotalLength\\r\\n     [ method ]\\r\\n     **\\r\\n     * Returns length of the path in pixels. Only works for element of “path” type.\\r\\n     = (number) length.\\r\\n     \\\\*/\\r\\n    elproto.getTotalLength = function () {\\r\\n        var path = this.getPath();\\r\\n        if (!path) {\\r\\n            return;\\r\\n        }\\r\\n\\r\\n        if (this.node.getTotalLength) {\\r\\n            return this.node.getTotalLength();\\r\\n        }\\r\\n\\r\\n        return getTotalLength(path);\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Element.getPointAtLength\\r\\n     [ method ]\\r\\n     **\\r\\n     * Return coordinates of the point located at the given length on the given path. Only works for element of “path” type.\\r\\n     **\\r\\n     > Parameters\\r\\n     **\\r\\n     - length (number)\\r\\n     **\\r\\n     = (object) representation of the point:\\r\\n     o {\\r\\n     o     x: (number) x coordinate\\r\\n     o     y: (number) y coordinate\\r\\n     o     alpha: (number) angle of derivative\\r\\n     o }\\r\\n     \\\\*/\\r\\n    elproto.getPointAtLength = function (length) {\\r\\n        var path = this.getPath();\\r\\n        if (!path) {\\r\\n            return;\\r\\n        }\\r\\n\\r\\n        return getPointAtLength(path, length);\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Element.getPath\\r\\n     [ method ]\\r\\n     **\\r\\n     * Returns path of the element. Only works for elements of “path” type and simple elements like circle.\\r\\n     = (object) path\\r\\n     **\\r\\n     \\\\*/\\r\\n    elproto.getPath = function () {\\r\\n        var path,\\r\\n            getPath = R._getPath[this.type];\\r\\n\\r\\n        if (this.type == \\\"text\\\" || this.type == \\\"set\\\") {\\r\\n            return;\\r\\n        }\\r\\n\\r\\n        if (getPath) {\\r\\n            path = getPath(this);\\r\\n        }\\r\\n\\r\\n        return path;\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Element.getSubpath\\r\\n     [ method ]\\r\\n     **\\r\\n     * Return subpath of a given element from given length to given length. Only works for element of “path” type.\\r\\n     **\\r\\n     > Parameters\\r\\n     **\\r\\n     - from (number) position of the start of the segment\\r\\n     - to (number) position of the end of the segment\\r\\n     **\\r\\n     = (string) pathstring for the segment\\r\\n     \\\\*/\\r\\n    elproto.getSubpath = function (from, to) {\\r\\n        var path = this.getPath();\\r\\n        if (!path) {\\r\\n            return;\\r\\n        }\\r\\n\\r\\n        return R.getSubpath(path, from, to);\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Raphael.easing_formulas\\r\\n     [ property ]\\r\\n     **\\r\\n     * Object that contains easing formulas for animation. You could extend it with your own. By default it has following list of easing:\\r\\n     # <ul>\\r\\n     #     <li>“linear”</li>\\r\\n     #     <li>“&lt;” or “easeIn” or “ease-in”</li>\\r\\n     #     <li>“>” or “easeOut” or “ease-out”</li>\\r\\n     #     <li>“&lt;>” or “easeInOut” or “ease-in-out”</li>\\r\\n     #     <li>“backIn” or “back-in”</li>\\r\\n     #     <li>“backOut” or “back-out”</li>\\r\\n     #     <li>“elastic”</li>\\r\\n     #     <li>“bounce”</li>\\r\\n     # </ul>\\r\\n     # <p>See also <a href=\\\"http://raphaeljs.com/easing.html\\\">Easing demo</a>.</p>\\r\\n     \\\\*/\\r\\n    var ef = R.easing_formulas = {\\r\\n        linear: function (n) {\\r\\n            return n;\\r\\n        },\\r\\n        \\\"<\\\": function (n) {\\r\\n            return pow(n, 1.7);\\r\\n        },\\r\\n        \\\">\\\": function (n) {\\r\\n            return pow(n, .48);\\r\\n        },\\r\\n        \\\"<>\\\": function (n) {\\r\\n            var q = .48 - n / 1.04,\\r\\n                Q = math.sqrt(.1734 + q * q),\\r\\n                x = Q - q,\\r\\n                X = pow(abs(x), 1 / 3) * (x < 0 ? -1 : 1),\\r\\n                y = -Q - q,\\r\\n                Y = pow(abs(y), 1 / 3) * (y < 0 ? -1 : 1),\\r\\n                t = X + Y + .5;\\r\\n            return (1 - t) * 3 * t * t + t * t * t;\\r\\n        },\\r\\n        backIn: function (n) {\\r\\n            var s = 1.70158;\\r\\n            return n * n * ((s + 1) * n - s);\\r\\n        },\\r\\n        backOut: function (n) {\\r\\n            n = n - 1;\\r\\n            var s = 1.70158;\\r\\n            return n * n * ((s + 1) * n + s) + 1;\\r\\n        },\\r\\n        elastic: function (n) {\\r\\n            if (n == !!n) {\\r\\n                return n;\\r\\n            }\\r\\n            return pow(2, -10 * n) * math.sin((n - .075) * (2 * PI) / .3) + 1;\\r\\n        },\\r\\n        bounce: function (n) {\\r\\n            var s = 7.5625,\\r\\n                p = 2.75,\\r\\n                l;\\r\\n            if (n < (1 / p)) {\\r\\n                l = s * n * n;\\r\\n            } else {\\r\\n                if (n < (2 / p)) {\\r\\n                    n -= (1.5 / p);\\r\\n                    l = s * n * n + .75;\\r\\n                } else {\\r\\n                    if (n < (2.5 / p)) {\\r\\n                        n -= (2.25 / p);\\r\\n                        l = s * n * n + .9375;\\r\\n                    } else {\\r\\n                        n -= (2.625 / p);\\r\\n                        l = s * n * n + .984375;\\r\\n                    }\\r\\n                }\\r\\n            }\\r\\n            return l;\\r\\n        }\\r\\n    };\\r\\n    ef.easeIn = ef[\\\"ease-in\\\"] = ef[\\\"<\\\"];\\r\\n    ef.easeOut = ef[\\\"ease-out\\\"] = ef[\\\">\\\"];\\r\\n    ef.easeInOut = ef[\\\"ease-in-out\\\"] = ef[\\\"<>\\\"];\\r\\n    ef[\\\"back-in\\\"] = ef.backIn;\\r\\n    ef[\\\"back-out\\\"] = ef.backOut;\\r\\n\\r\\n    var animationElements = [],\\r\\n        requestAnimFrame = window.requestAnimationFrame       ||\\r\\n            window.webkitRequestAnimationFrame ||\\r\\n            window.mozRequestAnimationFrame    ||\\r\\n            window.oRequestAnimationFrame      ||\\r\\n            window.msRequestAnimationFrame     ||\\r\\n            function (callback) {\\r\\n                setTimeout(callback, 16);\\r\\n            },\\r\\n        animation = function () {\\r\\n            var Now = +new Date,\\r\\n                l = 0;\\r\\n            for (; l < animationElements.length; l++) {\\r\\n                var e = animationElements[l];\\r\\n                if (e.el.removed || e.paused) {\\r\\n                    continue;\\r\\n                }\\r\\n                var time = Now - e.start,\\r\\n                    ms = e.ms,\\r\\n                    easing = e.easing,\\r\\n                    from = e.from,\\r\\n                    diff = e.diff,\\r\\n                    to = e.to,\\r\\n                    t = e.t,\\r\\n                    that = e.el,\\r\\n                    set = {},\\r\\n                    now,\\r\\n                    init = {},\\r\\n                    key;\\r\\n                if (e.initstatus) {\\r\\n                    time = (e.initstatus * e.anim.top - e.prev) / (e.percent - e.prev) * ms;\\r\\n                    e.status = e.initstatus;\\r\\n                    delete e.initstatus;\\r\\n                    e.stop && animationElements.splice(l--, 1);\\r\\n                } else {\\r\\n                    e.status = (e.prev + (e.percent - e.prev) * (time / ms)) / e.anim.top;\\r\\n                }\\r\\n                if (time < 0) {\\r\\n                    continue;\\r\\n                }\\r\\n                if (time < ms) {\\r\\n                    var pos = easing(time / ms);\\r\\n                    for (var attr in from) if (from[has](attr)) {\\r\\n                        switch (availableAnimAttrs[attr]) {\\r\\n                            case nu:\\r\\n                                now = +from[attr] + pos * ms * diff[attr];\\r\\n                                break;\\r\\n                            case \\\"colour\\\":\\r\\n                                now = \\\"rgb(\\\" + [\\r\\n                                        upto255(round(from[attr].r + pos * ms * diff[attr].r)),\\r\\n                                        upto255(round(from[attr].g + pos * ms * diff[attr].g)),\\r\\n                                        upto255(round(from[attr].b + pos * ms * diff[attr].b))\\r\\n                                    ].join(\\\",\\\") + \\\")\\\";\\r\\n                                break;\\r\\n                            case \\\"path\\\":\\r\\n                                now = [];\\r\\n                                for (var i = 0, ii = from[attr].length; i < ii; i++) {\\r\\n                                    now[i] = [from[attr][i][0]];\\r\\n                                    for (var j = 1, jj = from[attr][i].length; j < jj; j++) {\\r\\n                                        now[i][j] = +from[attr][i][j] + pos * ms * diff[attr][i][j];\\r\\n                                    }\\r\\n                                    now[i] = now[i].join(S);\\r\\n                                }\\r\\n                                now = now.join(S);\\r\\n                                break;\\r\\n                            case \\\"transform\\\":\\r\\n                                if (diff[attr].real) {\\r\\n                                    now = [];\\r\\n                                    for (i = 0, ii = from[attr].length; i < ii; i++) {\\r\\n                                        now[i] = [from[attr][i][0]];\\r\\n                                        for (j = 1, jj = from[attr][i].length; j < jj; j++) {\\r\\n                                            now[i][j] = from[attr][i][j] + pos * ms * diff[attr][i][j];\\r\\n                                        }\\r\\n                                    }\\r\\n                                } else {\\r\\n                                    var get = function (i) {\\r\\n                                        return +from[attr][i] + pos * ms * diff[attr][i];\\r\\n                                    };\\r\\n                                    // now = [[\\\"r\\\", get(2), 0, 0], [\\\"t\\\", get(3), get(4)], [\\\"s\\\", get(0), get(1), 0, 0]];\\r\\n                                    now = [[\\\"m\\\", get(0), get(1), get(2), get(3), get(4), get(5)]];\\r\\n                                }\\r\\n                                break;\\r\\n                            case \\\"csv\\\":\\r\\n                                if (attr == \\\"clip-rect\\\") {\\r\\n                                    now = [];\\r\\n                                    i = 4;\\r\\n                                    while (i--) {\\r\\n                                        now[i] = +from[attr][i] + pos * ms * diff[attr][i];\\r\\n                                    }\\r\\n                                }\\r\\n                                break;\\r\\n                            default:\\r\\n                                var from2 = [][concat](from[attr]);\\r\\n                                now = [];\\r\\n                                i = that.paper.customAttributes[attr].length;\\r\\n                                while (i--) {\\r\\n                                    now[i] = +from2[i] + pos * ms * diff[attr][i];\\r\\n                                }\\r\\n                                break;\\r\\n                        }\\r\\n                        set[attr] = now;\\r\\n                    }\\r\\n                    that.attr(set);\\r\\n                    (function (id, that, anim) {\\r\\n                        setTimeout(function () {\\r\\n                            eve(\\\"raphael.anim.frame.\\\" + id, that, anim);\\r\\n                        });\\r\\n                    })(that.id, that, e.anim);\\r\\n                } else {\\r\\n                    (function(f, el, a) {\\r\\n                        setTimeout(function() {\\r\\n                            eve(\\\"raphael.anim.frame.\\\" + el.id, el, a);\\r\\n                            eve(\\\"raphael.anim.finish.\\\" + el.id, el, a);\\r\\n                            R.is(f, \\\"function\\\") && f.call(el);\\r\\n                        });\\r\\n                    })(e.callback, that, e.anim);\\r\\n                    that.attr(to);\\r\\n                    animationElements.splice(l--, 1);\\r\\n                    if (e.repeat > 1 && !e.next) {\\r\\n                        for (key in to) if (to[has](key)) {\\r\\n                            init[key] = e.totalOrigin[key];\\r\\n                        }\\r\\n                        e.el.attr(init);\\r\\n                        runAnimation(e.anim, e.el, e.anim.percents[0], null, e.totalOrigin, e.repeat - 1);\\r\\n                    }\\r\\n                    if (e.next && !e.stop) {\\r\\n                        runAnimation(e.anim, e.el, e.next, null, e.totalOrigin, e.repeat);\\r\\n                    }\\r\\n                }\\r\\n            }\\r\\n            animationElements.length && requestAnimFrame(animation);\\r\\n        },\\r\\n        upto255 = function (color) {\\r\\n            return color > 255 ? 255 : color < 0 ? 0 : color;\\r\\n        };\\r\\n    /*\\\\\\r\\n     * Element.animateWith\\r\\n     [ method ]\\r\\n     **\\r\\n     * Acts similar to @Element.animate, but ensure that given animation runs in sync with another given element.\\r\\n     **\\r\\n     > Parameters\\r\\n     **\\r\\n     - el (object) element to sync with\\r\\n     - anim (object) animation to sync with\\r\\n     - params (object) #optional final attributes for the element, see also @Element.attr\\r\\n     - ms (number) #optional number of milliseconds for animation to run\\r\\n     - easing (string) #optional easing type. Accept on of @Raphael.easing_formulas or CSS format: `cubic&#x2010;bezier(XX,&#160;XX,&#160;XX,&#160;XX)`\\r\\n     - callback (function) #optional callback function. Will be called at the end of animation.\\r\\n     * or\\r\\n     - element (object) element to sync with\\r\\n     - anim (object) animation to sync with\\r\\n     - animation (object) #optional animation object, see @Raphael.animation\\r\\n     **\\r\\n     = (object) original element\\r\\n     \\\\*/\\r\\n    elproto.animateWith = function (el, anim, params, ms, easing, callback) {\\r\\n        var element = this;\\r\\n        if (element.removed) {\\r\\n            callback && callback.call(element);\\r\\n            return element;\\r\\n        }\\r\\n        var a = params instanceof Animation ? params : R.animation(params, ms, easing, callback),\\r\\n            x, y;\\r\\n        runAnimation(a, element, a.percents[0], null, element.attr());\\r\\n        for (var i = 0, ii = animationElements.length; i < ii; i++) {\\r\\n            if (animationElements[i].anim == anim && animationElements[i].el == el) {\\r\\n                animationElements[ii - 1].start = animationElements[i].start;\\r\\n                break;\\r\\n            }\\r\\n        }\\r\\n        return element;\\r\\n        //\\r\\n        //\\r\\n        // var a = params ? R.animation(params, ms, easing, callback) : anim,\\r\\n        //     status = element.status(anim);\\r\\n        // return this.animate(a).status(a, status * anim.ms / a.ms);\\r\\n    };\\r\\n    function CubicBezierAtTime(t, p1x, p1y, p2x, p2y, duration) {\\r\\n        var cx = 3 * p1x,\\r\\n            bx = 3 * (p2x - p1x) - cx,\\r\\n            ax = 1 - cx - bx,\\r\\n            cy = 3 * p1y,\\r\\n            by = 3 * (p2y - p1y) - cy,\\r\\n            ay = 1 - cy - by;\\r\\n        function sampleCurveX(t) {\\r\\n            return ((ax * t + bx) * t + cx) * t;\\r\\n        }\\r\\n        function solve(x, epsilon) {\\r\\n            var t = solveCurveX(x, epsilon);\\r\\n            return ((ay * t + by) * t + cy) * t;\\r\\n        }\\r\\n        function solveCurveX(x, epsilon) {\\r\\n            var t0, t1, t2, x2, d2, i;\\r\\n            for(t2 = x, i = 0; i < 8; i++) {\\r\\n                x2 = sampleCurveX(t2) - x;\\r\\n                if (abs(x2) < epsilon) {\\r\\n                    return t2;\\r\\n                }\\r\\n                d2 = (3 * ax * t2 + 2 * bx) * t2 + cx;\\r\\n                if (abs(d2) < 1e-6) {\\r\\n                    break;\\r\\n                }\\r\\n                t2 = t2 - x2 / d2;\\r\\n            }\\r\\n            t0 = 0;\\r\\n            t1 = 1;\\r\\n            t2 = x;\\r\\n            if (t2 < t0) {\\r\\n                return t0;\\r\\n            }\\r\\n            if (t2 > t1) {\\r\\n                return t1;\\r\\n            }\\r\\n            while (t0 < t1) {\\r\\n                x2 = sampleCurveX(t2);\\r\\n                if (abs(x2 - x) < epsilon) {\\r\\n                    return t2;\\r\\n                }\\r\\n                if (x > x2) {\\r\\n                    t0 = t2;\\r\\n                } else {\\r\\n                    t1 = t2;\\r\\n                }\\r\\n                t2 = (t1 - t0) / 2 + t0;\\r\\n            }\\r\\n            return t2;\\r\\n        }\\r\\n        return solve(t, 1 / (200 * duration));\\r\\n    }\\r\\n    elproto.onAnimation = function (f) {\\r\\n        f ? eve.on(\\\"raphael.anim.frame.\\\" + this.id, f) : eve.unbind(\\\"raphael.anim.frame.\\\" + this.id);\\r\\n        return this;\\r\\n    };\\r\\n    function Animation(anim, ms) {\\r\\n        var percents = [],\\r\\n            newAnim = {};\\r\\n        this.ms = ms;\\r\\n        this.times = 1;\\r\\n        if (anim) {\\r\\n            for (var attr in anim) if (anim[has](attr)) {\\r\\n                newAnim[toFloat(attr)] = anim[attr];\\r\\n                percents.push(toFloat(attr));\\r\\n            }\\r\\n            percents.sort(sortByNumber);\\r\\n        }\\r\\n        this.anim = newAnim;\\r\\n        this.top = percents[percents.length - 1];\\r\\n        this.percents = percents;\\r\\n    }\\r\\n    /*\\\\\\r\\n     * Animation.delay\\r\\n     [ method ]\\r\\n     **\\r\\n     * Creates a copy of existing animation object with given delay.\\r\\n     **\\r\\n     > Parameters\\r\\n     **\\r\\n     - delay (number) number of ms to pass between animation start and actual animation\\r\\n     **\\r\\n     = (object) new altered Animation object\\r\\n     | var anim = Raphael.animation({cx: 10, cy: 20}, 2e3);\\r\\n     | circle1.animate(anim); // run the given animation immediately\\r\\n     | circle2.animate(anim.delay(500)); // run the given animation after 500 ms\\r\\n     \\\\*/\\r\\n    Animation.prototype.delay = function (delay) {\\r\\n        var a = new Animation(this.anim, this.ms);\\r\\n        a.times = this.times;\\r\\n        a.del = +delay || 0;\\r\\n        return a;\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Animation.repeat\\r\\n     [ method ]\\r\\n     **\\r\\n     * Creates a copy of existing animation object with given repetition.\\r\\n     **\\r\\n     > Parameters\\r\\n     **\\r\\n     - repeat (number) number iterations of animation. For infinite animation pass `Infinity`\\r\\n     **\\r\\n     = (object) new altered Animation object\\r\\n     \\\\*/\\r\\n    Animation.prototype.repeat = function (times) {\\r\\n        var a = new Animation(this.anim, this.ms);\\r\\n        a.del = this.del;\\r\\n        a.times = math.floor(mmax(times, 0)) || 1;\\r\\n        return a;\\r\\n    };\\r\\n    function runAnimation(anim, element, percent, status, totalOrigin, times) {\\r\\n        percent = toFloat(percent);\\r\\n        var params,\\r\\n            isInAnim,\\r\\n            isInAnimSet,\\r\\n            percents = [],\\r\\n            next,\\r\\n            prev,\\r\\n            timestamp,\\r\\n            ms = anim.ms,\\r\\n            from = {},\\r\\n            to = {},\\r\\n            diff = {};\\r\\n        if (status) {\\r\\n            for (i = 0, ii = animationElements.length; i < ii; i++) {\\r\\n                var e = animationElements[i];\\r\\n                if (e.el.id == element.id && e.anim == anim) {\\r\\n                    if (e.percent != percent) {\\r\\n                        animationElements.splice(i, 1);\\r\\n                        isInAnimSet = 1;\\r\\n                    } else {\\r\\n                        isInAnim = e;\\r\\n                    }\\r\\n                    element.attr(e.totalOrigin);\\r\\n                    break;\\r\\n                }\\r\\n            }\\r\\n        } else {\\r\\n            status = +to; // NaN\\r\\n        }\\r\\n        for (var i = 0, ii = anim.percents.length; i < ii; i++) {\\r\\n            if (anim.percents[i] == percent || anim.percents[i] > status * anim.top) {\\r\\n                percent = anim.percents[i];\\r\\n                prev = anim.percents[i - 1] || 0;\\r\\n                ms = ms / anim.top * (percent - prev);\\r\\n                next = anim.percents[i + 1];\\r\\n                params = anim.anim[percent];\\r\\n                break;\\r\\n            } else if (status) {\\r\\n                element.attr(anim.anim[anim.percents[i]]);\\r\\n            }\\r\\n        }\\r\\n        if (!params) {\\r\\n            return;\\r\\n        }\\r\\n        if (!isInAnim) {\\r\\n            for (var attr in params) if (params[has](attr)) {\\r\\n                if (availableAnimAttrs[has](attr) || element.paper.customAttributes[has](attr)) {\\r\\n                    from[attr] = element.attr(attr);\\r\\n                    (from[attr] == null) && (from[attr] = availableAttrs[attr]);\\r\\n                    to[attr] = params[attr];\\r\\n                    switch (availableAnimAttrs[attr]) {\\r\\n                        case nu:\\r\\n                            diff[attr] = (to[attr] - from[attr]) / ms;\\r\\n                            break;\\r\\n                        case \\\"colour\\\":\\r\\n                            from[attr] = R.getRGB(from[attr]);\\r\\n                            var toColour = R.getRGB(to[attr]);\\r\\n                            diff[attr] = {\\r\\n                                r: (toColour.r - from[attr].r) / ms,\\r\\n                                g: (toColour.g - from[attr].g) / ms,\\r\\n                                b: (toColour.b - from[attr].b) / ms\\r\\n                            };\\r\\n                            break;\\r\\n                        case \\\"path\\\":\\r\\n                            var pathes = path2curve(from[attr], to[attr]),\\r\\n                                toPath = pathes[1];\\r\\n                            from[attr] = pathes[0];\\r\\n                            diff[attr] = [];\\r\\n                            for (i = 0, ii = from[attr].length; i < ii; i++) {\\r\\n                                diff[attr][i] = [0];\\r\\n                                for (var j = 1, jj = from[attr][i].length; j < jj; j++) {\\r\\n                                    diff[attr][i][j] = (toPath[i][j] - from[attr][i][j]) / ms;\\r\\n                                }\\r\\n                            }\\r\\n                            break;\\r\\n                        case \\\"transform\\\":\\r\\n                            var _ = element._,\\r\\n                                eq = equaliseTransform(_[attr], to[attr]);\\r\\n                            if (eq) {\\r\\n                                from[attr] = eq.from;\\r\\n                                to[attr] = eq.to;\\r\\n                                diff[attr] = [];\\r\\n                                diff[attr].real = true;\\r\\n                                for (i = 0, ii = from[attr].length; i < ii; i++) {\\r\\n                                    diff[attr][i] = [from[attr][i][0]];\\r\\n                                    for (j = 1, jj = from[attr][i].length; j < jj; j++) {\\r\\n                                        diff[attr][i][j] = (to[attr][i][j] - from[attr][i][j]) / ms;\\r\\n                                    }\\r\\n                                }\\r\\n                            } else {\\r\\n                                var m = (element.matrix || new Matrix),\\r\\n                                    to2 = {\\r\\n                                        _: {transform: _.transform},\\r\\n                                        getBBox: function () {\\r\\n                                            return element.getBBox(1);\\r\\n                                        }\\r\\n                                    };\\r\\n                                from[attr] = [\\r\\n                                    m.a,\\r\\n                                    m.b,\\r\\n                                    m.c,\\r\\n                                    m.d,\\r\\n                                    m.e,\\r\\n                                    m.f\\r\\n                                ];\\r\\n                                extractTransform(to2, to[attr]);\\r\\n                                to[attr] = to2._.transform;\\r\\n                                diff[attr] = [\\r\\n                                    (to2.matrix.a - m.a) / ms,\\r\\n                                    (to2.matrix.b - m.b) / ms,\\r\\n                                    (to2.matrix.c - m.c) / ms,\\r\\n                                    (to2.matrix.d - m.d) / ms,\\r\\n                                    (to2.matrix.e - m.e) / ms,\\r\\n                                    (to2.matrix.f - m.f) / ms\\r\\n                                ];\\r\\n                                // from[attr] = [_.sx, _.sy, _.deg, _.dx, _.dy];\\r\\n                                // var to2 = {_:{}, getBBox: function () { return element.getBBox(); }};\\r\\n                                // extractTransform(to2, to[attr]);\\r\\n                                // diff[attr] = [\\r\\n                                //     (to2._.sx - _.sx) / ms,\\r\\n                                //     (to2._.sy - _.sy) / ms,\\r\\n                                //     (to2._.deg - _.deg) / ms,\\r\\n                                //     (to2._.dx - _.dx) / ms,\\r\\n                                //     (to2._.dy - _.dy) / ms\\r\\n                                // ];\\r\\n                            }\\r\\n                            break;\\r\\n                        case \\\"csv\\\":\\r\\n                            var values = Str(params[attr])[split](separator),\\r\\n                                from2 = Str(from[attr])[split](separator);\\r\\n                            if (attr == \\\"clip-rect\\\") {\\r\\n                                from[attr] = from2;\\r\\n                                diff[attr] = [];\\r\\n                                i = from2.length;\\r\\n                                while (i--) {\\r\\n                                    diff[attr][i] = (values[i] - from[attr][i]) / ms;\\r\\n                                }\\r\\n                            }\\r\\n                            to[attr] = values;\\r\\n                            break;\\r\\n                        default:\\r\\n                            values = [][concat](params[attr]);\\r\\n                            from2 = [][concat](from[attr]);\\r\\n                            diff[attr] = [];\\r\\n                            i = element.paper.customAttributes[attr].length;\\r\\n                            while (i--) {\\r\\n                                diff[attr][i] = ((values[i] || 0) - (from2[i] || 0)) / ms;\\r\\n                            }\\r\\n                            break;\\r\\n                    }\\r\\n                }\\r\\n            }\\r\\n            var easing = params.easing,\\r\\n                easyeasy = R.easing_formulas[easing];\\r\\n            if (!easyeasy) {\\r\\n                easyeasy = Str(easing).match(bezierrg);\\r\\n                if (easyeasy && easyeasy.length == 5) {\\r\\n                    var curve = easyeasy;\\r\\n                    easyeasy = function (t) {\\r\\n                        return CubicBezierAtTime(t, +curve[1], +curve[2], +curve[3], +curve[4], ms);\\r\\n                    };\\r\\n                } else {\\r\\n                    easyeasy = pipe;\\r\\n                }\\r\\n            }\\r\\n            timestamp = params.start || anim.start || +new Date;\\r\\n            e = {\\r\\n                anim: anim,\\r\\n                percent: percent,\\r\\n                timestamp: timestamp,\\r\\n                start: timestamp + (anim.del || 0),\\r\\n                status: 0,\\r\\n                initstatus: status || 0,\\r\\n                stop: false,\\r\\n                ms: ms,\\r\\n                easing: easyeasy,\\r\\n                from: from,\\r\\n                diff: diff,\\r\\n                to: to,\\r\\n                el: element,\\r\\n                callback: params.callback,\\r\\n                prev: prev,\\r\\n                next: next,\\r\\n                repeat: times || anim.times,\\r\\n                origin: element.attr(),\\r\\n                totalOrigin: totalOrigin\\r\\n            };\\r\\n            animationElements.push(e);\\r\\n            if (status && !isInAnim && !isInAnimSet) {\\r\\n                e.stop = true;\\r\\n                e.start = new Date - ms * status;\\r\\n                if (animationElements.length == 1) {\\r\\n                    return animation();\\r\\n                }\\r\\n            }\\r\\n            if (isInAnimSet) {\\r\\n                e.start = new Date - e.ms * status;\\r\\n            }\\r\\n            animationElements.length == 1 && requestAnimFrame(animation);\\r\\n        } else {\\r\\n            isInAnim.initstatus = status;\\r\\n            isInAnim.start = new Date - isInAnim.ms * status;\\r\\n        }\\r\\n        eve(\\\"raphael.anim.start.\\\" + element.id, element, anim);\\r\\n    }\\r\\n    /*\\\\\\r\\n     * Raphael.animation\\r\\n     [ method ]\\r\\n     **\\r\\n     * Creates an animation object that can be passed to the @Element.animate or @Element.animateWith methods.\\r\\n     * See also @Animation.delay and @Animation.repeat methods.\\r\\n     **\\r\\n     > Parameters\\r\\n     **\\r\\n     - params (object) final attributes for the element, see also @Element.attr\\r\\n     - ms (number) number of milliseconds for animation to run\\r\\n     - easing (string) #optional easing type. Accept one of @Raphael.easing_formulas or CSS format: `cubic&#x2010;bezier(XX,&#160;XX,&#160;XX,&#160;XX)`\\r\\n     - callback (function) #optional callback function. Will be called at the end of animation.\\r\\n     **\\r\\n     = (object) @Animation\\r\\n     \\\\*/\\r\\n    R.animation = function (params, ms, easing, callback) {\\r\\n        if (params instanceof Animation) {\\r\\n            return params;\\r\\n        }\\r\\n        if (R.is(easing, \\\"function\\\") || !easing) {\\r\\n            callback = callback || easing || null;\\r\\n            easing = null;\\r\\n        }\\r\\n        params = Object(params);\\r\\n        ms = +ms || 0;\\r\\n        var p = {},\\r\\n            json,\\r\\n            attr;\\r\\n        for (attr in params) if (params[has](attr) && toFloat(attr) != attr && toFloat(attr) + \\\"%\\\" != attr) {\\r\\n            json = true;\\r\\n            p[attr] = params[attr];\\r\\n        }\\r\\n        if (!json) {\\r\\n            // if percent-like syntax is used and end-of-all animation callback used\\r\\n            if(callback){\\r\\n                // find the last one\\r\\n                var lastKey = 0;\\r\\n                for(var i in params){\\r\\n                    var percent = toInt(i);\\r\\n                    if(params[has](i) && percent > lastKey){\\r\\n                        lastKey = percent;\\r\\n                    }\\r\\n                }\\r\\n                lastKey += '%';\\r\\n                // if already defined callback in the last keyframe, skip\\r\\n                !params[lastKey].callback && (params[lastKey].callback = callback);\\r\\n            }\\r\\n            return new Animation(params, ms);\\r\\n        } else {\\r\\n            easing && (p.easing = easing);\\r\\n            callback && (p.callback = callback);\\r\\n            return new Animation({100: p}, ms);\\r\\n        }\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Element.animate\\r\\n     [ method ]\\r\\n     **\\r\\n     * Creates and starts animation for given element.\\r\\n     **\\r\\n     > Parameters\\r\\n     **\\r\\n     - params (object) final attributes for the element, see also @Element.attr\\r\\n     - ms (number) number of milliseconds for animation to run\\r\\n     - easing (string) #optional easing type. Accept one of @Raphael.easing_formulas or CSS format: `cubic&#x2010;bezier(XX,&#160;XX,&#160;XX,&#160;XX)`\\r\\n     - callback (function) #optional callback function. Will be called at the end of animation.\\r\\n     * or\\r\\n     - animation (object) animation object, see @Raphael.animation\\r\\n     **\\r\\n     = (object) original element\\r\\n     \\\\*/\\r\\n    elproto.animate = function (params, ms, easing, callback) {\\r\\n        var element = this;\\r\\n        if (element.removed) {\\r\\n            callback && callback.call(element);\\r\\n            return element;\\r\\n        }\\r\\n        var anim = params instanceof Animation ? params : R.animation(params, ms, easing, callback);\\r\\n        runAnimation(anim, element, anim.percents[0], null, element.attr());\\r\\n        return element;\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Element.setTime\\r\\n     [ method ]\\r\\n     **\\r\\n     * Sets the status of animation of the element in milliseconds. Similar to @Element.status method.\\r\\n     **\\r\\n     > Parameters\\r\\n     **\\r\\n     - anim (object) animation object\\r\\n     - value (number) number of milliseconds from the beginning of the animation\\r\\n     **\\r\\n     = (object) original element if `value` is specified\\r\\n     * Note, that during animation following events are triggered:\\r\\n     *\\r\\n     * On each animation frame event `anim.frame.<id>`, on start `anim.start.<id>` and on end `anim.finish.<id>`.\\r\\n     \\\\*/\\r\\n    elproto.setTime = function (anim, value) {\\r\\n        if (anim && value != null) {\\r\\n            this.status(anim, mmin(value, anim.ms) / anim.ms);\\r\\n        }\\r\\n        return this;\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Element.status\\r\\n     [ method ]\\r\\n     **\\r\\n     * Gets or sets the status of animation of the element.\\r\\n     **\\r\\n     > Parameters\\r\\n     **\\r\\n     - anim (object) #optional animation object\\r\\n     - value (number) #optional 0 – 1. If specified, method works like a setter and sets the status of a given animation to the value. This will cause animation to jump to the given position.\\r\\n     **\\r\\n     = (number) status\\r\\n     * or\\r\\n     = (array) status if `anim` is not specified. Array of objects in format:\\r\\n     o {\\r\\n     o     anim: (object) animation object\\r\\n     o     status: (number) status\\r\\n     o }\\r\\n     * or\\r\\n     = (object) original element if `value` is specified\\r\\n     \\\\*/\\r\\n    elproto.status = function (anim, value) {\\r\\n        var out = [],\\r\\n            i = 0,\\r\\n            len,\\r\\n            e;\\r\\n        if (value != null) {\\r\\n            runAnimation(anim, this, -1, mmin(value, 1));\\r\\n            return this;\\r\\n        } else {\\r\\n            len = animationElements.length;\\r\\n            for (; i < len; i++) {\\r\\n                e = animationElements[i];\\r\\n                if (e.el.id == this.id && (!anim || e.anim == anim)) {\\r\\n                    if (anim) {\\r\\n                        return e.status;\\r\\n                    }\\r\\n                    out.push({\\r\\n                        anim: e.anim,\\r\\n                        status: e.status\\r\\n                    });\\r\\n                }\\r\\n            }\\r\\n            if (anim) {\\r\\n                return 0;\\r\\n            }\\r\\n            return out;\\r\\n        }\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Element.pause\\r\\n     [ method ]\\r\\n     **\\r\\n     * Stops animation of the element with ability to resume it later on.\\r\\n     **\\r\\n     > Parameters\\r\\n     **\\r\\n     - anim (object) #optional animation object\\r\\n     **\\r\\n     = (object) original element\\r\\n     \\\\*/\\r\\n    elproto.pause = function (anim) {\\r\\n        for (var i = 0; i < animationElements.length; i++) if (animationElements[i].el.id == this.id && (!anim || animationElements[i].anim == anim)) {\\r\\n            if (eve(\\\"raphael.anim.pause.\\\" + this.id, this, animationElements[i].anim) !== false) {\\r\\n                animationElements[i].paused = true;\\r\\n            }\\r\\n        }\\r\\n        return this;\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Element.resume\\r\\n     [ method ]\\r\\n     **\\r\\n     * Resumes animation if it was paused with @Element.pause method.\\r\\n     **\\r\\n     > Parameters\\r\\n     **\\r\\n     - anim (object) #optional animation object\\r\\n     **\\r\\n     = (object) original element\\r\\n     \\\\*/\\r\\n    elproto.resume = function (anim) {\\r\\n        for (var i = 0; i < animationElements.length; i++) if (animationElements[i].el.id == this.id && (!anim || animationElements[i].anim == anim)) {\\r\\n            var e = animationElements[i];\\r\\n            if (eve(\\\"raphael.anim.resume.\\\" + this.id, this, e.anim) !== false) {\\r\\n                delete e.paused;\\r\\n                this.status(e.anim, e.status);\\r\\n            }\\r\\n        }\\r\\n        return this;\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Element.stop\\r\\n     [ method ]\\r\\n     **\\r\\n     * Stops animation of the element.\\r\\n     **\\r\\n     > Parameters\\r\\n     **\\r\\n     - anim (object) #optional animation object\\r\\n     **\\r\\n     = (object) original element\\r\\n     \\\\*/\\r\\n    elproto.stop = function (anim) {\\r\\n        for (var i = 0; i < animationElements.length; i++) if (animationElements[i].el.id == this.id && (!anim || animationElements[i].anim == anim)) {\\r\\n            if (eve(\\\"raphael.anim.stop.\\\" + this.id, this, animationElements[i].anim) !== false) {\\r\\n                animationElements.splice(i--, 1);\\r\\n            }\\r\\n        }\\r\\n        return this;\\r\\n    };\\r\\n    function stopAnimation(paper) {\\r\\n        for (var i = 0; i < animationElements.length; i++) if (animationElements[i].el.paper == paper) {\\r\\n            animationElements.splice(i--, 1);\\r\\n        }\\r\\n    }\\r\\n    eve.on(\\\"raphael.remove\\\", stopAnimation);\\r\\n    eve.on(\\\"raphael.clear\\\", stopAnimation);\\r\\n    elproto.toString = function () {\\r\\n        return \\\"Rapha\\\\xebl\\\\u2019s object\\\";\\r\\n    };\\r\\n\\r\\n    // Set\\r\\n    var Set = function (items) {\\r\\n            this.items = [];\\r\\n            this.length = 0;\\r\\n            this.type = \\\"set\\\";\\r\\n            if (items) {\\r\\n                for (var i = 0, ii = items.length; i < ii; i++) {\\r\\n                    if (items[i] && (items[i].constructor == elproto.constructor || items[i].constructor == Set)) {\\r\\n                        this[this.items.length] = this.items[this.items.length] = items[i];\\r\\n                        this.length++;\\r\\n                    }\\r\\n                }\\r\\n            }\\r\\n        },\\r\\n        setproto = Set.prototype;\\r\\n    /*\\\\\\r\\n     * Set.push\\r\\n     [ method ]\\r\\n     **\\r\\n     * Adds each argument to the current set.\\r\\n     = (object) original element\\r\\n     \\\\*/\\r\\n    setproto.push = function () {\\r\\n        var item,\\r\\n            len;\\r\\n        for (var i = 0, ii = arguments.length; i < ii; i++) {\\r\\n            item = arguments[i];\\r\\n            if (item && (item.constructor == elproto.constructor || item.constructor == Set)) {\\r\\n                len = this.items.length;\\r\\n                this[len] = this.items[len] = item;\\r\\n                this.length++;\\r\\n            }\\r\\n        }\\r\\n        return this;\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Set.pop\\r\\n     [ method ]\\r\\n     **\\r\\n     * Removes last element and returns it.\\r\\n     = (object) element\\r\\n     \\\\*/\\r\\n    setproto.pop = function () {\\r\\n        this.length && delete this[this.length--];\\r\\n        return this.items.pop();\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Set.forEach\\r\\n     [ method ]\\r\\n     **\\r\\n     * Executes given function for each element in the set.\\r\\n     *\\r\\n     * If function returns `false` it will stop loop running.\\r\\n     **\\r\\n     > Parameters\\r\\n     **\\r\\n     - callback (function) function to run\\r\\n     - thisArg (object) context object for the callback\\r\\n     = (object) Set object\\r\\n     \\\\*/\\r\\n    setproto.forEach = function (callback, thisArg) {\\r\\n        for (var i = 0, ii = this.items.length; i < ii; i++) {\\r\\n            if (callback.call(thisArg, this.items[i], i) === false) {\\r\\n                return this;\\r\\n            }\\r\\n        }\\r\\n        return this;\\r\\n    };\\r\\n    for (var method in elproto) if (elproto[has](method)) {\\r\\n        setproto[method] = (function (methodname) {\\r\\n            return function () {\\r\\n                var arg = arguments;\\r\\n                return this.forEach(function (el) {\\r\\n                    el[methodname][apply](el, arg);\\r\\n                });\\r\\n            };\\r\\n        })(method);\\r\\n    }\\r\\n    setproto.attr = function (name, value) {\\r\\n        if (name && R.is(name, array) && R.is(name[0], \\\"object\\\")) {\\r\\n            for (var j = 0, jj = name.length; j < jj; j++) {\\r\\n                this.items[j].attr(name[j]);\\r\\n            }\\r\\n        } else {\\r\\n            for (var i = 0, ii = this.items.length; i < ii; i++) {\\r\\n                this.items[i].attr(name, value);\\r\\n            }\\r\\n        }\\r\\n        return this;\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Set.clear\\r\\n     [ method ]\\r\\n     **\\r\\n     * Removes all elements from the set\\r\\n     \\\\*/\\r\\n    setproto.clear = function () {\\r\\n        while (this.length) {\\r\\n            this.pop();\\r\\n        }\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Set.splice\\r\\n     [ method ]\\r\\n     **\\r\\n     * Removes given element from the set\\r\\n     **\\r\\n     > Parameters\\r\\n     **\\r\\n     - index (number) position of the deletion\\r\\n     - count (number) number of element to remove\\r\\n     - insertion… (object) #optional elements to insert\\r\\n     = (object) set elements that were deleted\\r\\n     \\\\*/\\r\\n    setproto.splice = function (index, count, insertion) {\\r\\n        index = index < 0 ? mmax(this.length + index, 0) : index;\\r\\n        count = mmax(0, mmin(this.length - index, count));\\r\\n        var tail = [],\\r\\n            todel = [],\\r\\n            args = [],\\r\\n            i;\\r\\n        for (i = 2; i < arguments.length; i++) {\\r\\n            args.push(arguments[i]);\\r\\n        }\\r\\n        for (i = 0; i < count; i++) {\\r\\n            todel.push(this[index + i]);\\r\\n        }\\r\\n        for (; i < this.length - index; i++) {\\r\\n            tail.push(this[index + i]);\\r\\n        }\\r\\n        var arglen = args.length;\\r\\n        for (i = 0; i < arglen + tail.length; i++) {\\r\\n            this.items[index + i] = this[index + i] = i < arglen ? args[i] : tail[i - arglen];\\r\\n        }\\r\\n        i = this.items.length = this.length -= count - arglen;\\r\\n        while (this[i]) {\\r\\n            delete this[i++];\\r\\n        }\\r\\n        return new Set(todel);\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Set.exclude\\r\\n     [ method ]\\r\\n     **\\r\\n     * Removes given element from the set\\r\\n     **\\r\\n     > Parameters\\r\\n     **\\r\\n     - element (object) element to remove\\r\\n     = (boolean) `true` if object was found & removed from the set\\r\\n     \\\\*/\\r\\n    setproto.exclude = function (el) {\\r\\n        for (var i = 0, ii = this.length; i < ii; i++) if (this[i] == el) {\\r\\n            this.splice(i, 1);\\r\\n            return true;\\r\\n        }\\r\\n    };\\r\\n    setproto.animate = function (params, ms, easing, callback) {\\r\\n        (R.is(easing, \\\"function\\\") || !easing) && (callback = easing || null);\\r\\n        var len = this.items.length,\\r\\n            i = len,\\r\\n            item,\\r\\n            set = this,\\r\\n            collector;\\r\\n        if (!len) {\\r\\n            return this;\\r\\n        }\\r\\n        callback && (collector = function () {\\r\\n            !--len && callback.call(set);\\r\\n        });\\r\\n        easing = R.is(easing, string) ? easing : collector;\\r\\n        var anim = R.animation(params, ms, easing, collector);\\r\\n        item = this.items[--i].animate(anim);\\r\\n        while (i--) {\\r\\n            this.items[i] && !this.items[i].removed && this.items[i].animateWith(item, anim, anim);\\r\\n            (this.items[i] && !this.items[i].removed) || len--;\\r\\n        }\\r\\n        return this;\\r\\n    };\\r\\n    setproto.insertAfter = function (el) {\\r\\n        var i = this.items.length;\\r\\n        while (i--) {\\r\\n            this.items[i].insertAfter(el);\\r\\n        }\\r\\n        return this;\\r\\n    };\\r\\n    setproto.getBBox = function () {\\r\\n        var x = [],\\r\\n            y = [],\\r\\n            x2 = [],\\r\\n            y2 = [];\\r\\n        for (var i = this.items.length; i--;) if (!this.items[i].removed) {\\r\\n            var box = this.items[i].getBBox();\\r\\n            x.push(box.x);\\r\\n            y.push(box.y);\\r\\n            x2.push(box.x + box.width);\\r\\n            y2.push(box.y + box.height);\\r\\n        }\\r\\n        x = mmin[apply](0, x);\\r\\n        y = mmin[apply](0, y);\\r\\n        x2 = mmax[apply](0, x2);\\r\\n        y2 = mmax[apply](0, y2);\\r\\n        return {\\r\\n            x: x,\\r\\n            y: y,\\r\\n            x2: x2,\\r\\n            y2: y2,\\r\\n            width: x2 - x,\\r\\n            height: y2 - y\\r\\n        };\\r\\n    };\\r\\n    setproto.clone = function (s) {\\r\\n        s = this.paper.set();\\r\\n        for (var i = 0, ii = this.items.length; i < ii; i++) {\\r\\n            s.push(this.items[i].clone());\\r\\n        }\\r\\n        return s;\\r\\n    };\\r\\n    setproto.toString = function () {\\r\\n        return \\\"Rapha\\\\xebl\\\\u2018s set\\\";\\r\\n    };\\r\\n\\r\\n    setproto.glow = function(glowConfig) {\\r\\n        var ret = this.paper.set();\\r\\n        this.forEach(function(shape, index){\\r\\n            var g = shape.glow(glowConfig);\\r\\n            if(g != null){\\r\\n                g.forEach(function(shape2, index2){\\r\\n                    ret.push(shape2);\\r\\n                });\\r\\n            }\\r\\n        });\\r\\n        return ret;\\r\\n    };\\r\\n\\r\\n\\r\\n    /*\\\\\\r\\n     * Set.isPointInside\\r\\n     [ method ]\\r\\n     **\\r\\n     * Determine if given point is inside this set’s elements\\r\\n     **\\r\\n     > Parameters\\r\\n     **\\r\\n     - x (number) x coordinate of the point\\r\\n     - y (number) y coordinate of the point\\r\\n     = (boolean) `true` if point is inside any of the set's elements\\r\\n     \\\\*/\\r\\n    setproto.isPointInside = function (x, y) {\\r\\n        var isPointInside = false;\\r\\n        this.forEach(function (el) {\\r\\n            if (el.isPointInside(x, y)) {\\r\\n                isPointInside = true;\\r\\n                return false; // stop loop\\r\\n            }\\r\\n        });\\r\\n        return isPointInside;\\r\\n    };\\r\\n\\r\\n    /*\\\\\\r\\n     * Raphael.registerFont\\r\\n     [ method ]\\r\\n     **\\r\\n     * Adds given font to the registered set of font for Raphaël. Should be used as an internal call from within Cufón’s font file.\\r\\n     * Returns original parameter, so it could be used with chaining.\\r\\n     # <a href=\\\"http://wiki.github.com/sorccu/cufon/about\\\">More about Cufón and how to convert your font form TTF, OTF, etc to JavaScript file.</a>\\r\\n     **\\r\\n     > Parameters\\r\\n     **\\r\\n     - font (object) the font to register\\r\\n     = (object) the font you passed in\\r\\n     > Usage\\r\\n     | Cufon.registerFont(Raphael.registerFont({…}));\\r\\n     \\\\*/\\r\\n    R.registerFont = function (font) {\\r\\n        if (!font.face) {\\r\\n            return font;\\r\\n        }\\r\\n        this.fonts = this.fonts || {};\\r\\n        var fontcopy = {\\r\\n                w: font.w,\\r\\n                face: {},\\r\\n                glyphs: {}\\r\\n            },\\r\\n            family = font.face[\\\"font-family\\\"];\\r\\n        for (var prop in font.face) if (font.face[has](prop)) {\\r\\n            fontcopy.face[prop] = font.face[prop];\\r\\n        }\\r\\n        if (this.fonts[family]) {\\r\\n            this.fonts[family].push(fontcopy);\\r\\n        } else {\\r\\n            this.fonts[family] = [fontcopy];\\r\\n        }\\r\\n        if (!font.svg) {\\r\\n            fontcopy.face[\\\"units-per-em\\\"] = toInt(font.face[\\\"units-per-em\\\"], 10);\\r\\n            for (var glyph in font.glyphs) if (font.glyphs[has](glyph)) {\\r\\n                var path = font.glyphs[glyph];\\r\\n                fontcopy.glyphs[glyph] = {\\r\\n                    w: path.w,\\r\\n                    k: {},\\r\\n                    d: path.d && \\\"M\\\" + path.d.replace(/[mlcxtrv]/g, function (command) {\\r\\n                        return {l: \\\"L\\\", c: \\\"C\\\", x: \\\"z\\\", t: \\\"m\\\", r: \\\"l\\\", v: \\\"c\\\"}[command] || \\\"M\\\";\\r\\n                    }) + \\\"z\\\"\\r\\n                };\\r\\n                if (path.k) {\\r\\n                    for (var k in path.k) if (path[has](k)) {\\r\\n                        fontcopy.glyphs[glyph].k[k] = path.k[k];\\r\\n                    }\\r\\n                }\\r\\n            }\\r\\n        }\\r\\n        return font;\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Paper.getFont\\r\\n     [ method ]\\r\\n     **\\r\\n     * Finds font object in the registered font by given parameters. You could specify only one word from the font name, like “Myriad” for “Myriad Pro”.\\r\\n     **\\r\\n     > Parameters\\r\\n     **\\r\\n     - family (string) font family name or any word from it\\r\\n     - weight (string) #optional font weight\\r\\n     - style (string) #optional font style\\r\\n     - stretch (string) #optional font stretch\\r\\n     = (object) the font object\\r\\n     > Usage\\r\\n     | paper.print(100, 100, \\\"Test string\\\", paper.getFont(\\\"Times\\\", 800), 30);\\r\\n     \\\\*/\\r\\n    paperproto.getFont = function (family, weight, style, stretch) {\\r\\n        stretch = stretch || \\\"normal\\\";\\r\\n        style = style || \\\"normal\\\";\\r\\n        weight = +weight || {normal: 400, bold: 700, lighter: 300, bolder: 800}[weight] || 400;\\r\\n        if (!R.fonts) {\\r\\n            return;\\r\\n        }\\r\\n        var font = R.fonts[family];\\r\\n        if (!font) {\\r\\n            var name = new RegExp(\\\"(^|\\\\\\\\s)\\\" + family.replace(/[^\\\\w\\\\d\\\\s+!~.:_-]/g, E) + \\\"(\\\\\\\\s|$)\\\", \\\"i\\\");\\r\\n            for (var fontName in R.fonts) if (R.fonts[has](fontName)) {\\r\\n                if (name.test(fontName)) {\\r\\n                    font = R.fonts[fontName];\\r\\n                    break;\\r\\n                }\\r\\n            }\\r\\n        }\\r\\n        var thefont;\\r\\n        if (font) {\\r\\n            for (var i = 0, ii = font.length; i < ii; i++) {\\r\\n                thefont = font[i];\\r\\n                if (thefont.face[\\\"font-weight\\\"] == weight && (thefont.face[\\\"font-style\\\"] == style || !thefont.face[\\\"font-style\\\"]) && thefont.face[\\\"font-stretch\\\"] == stretch) {\\r\\n                    break;\\r\\n                }\\r\\n            }\\r\\n        }\\r\\n        return thefont;\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Paper.print\\r\\n     [ method ]\\r\\n     **\\r\\n     * Creates path that represent given text written using given font at given position with given size.\\r\\n     * Result of the method is path element that contains whole text as a separate path.\\r\\n     **\\r\\n     > Parameters\\r\\n     **\\r\\n     - x (number) x position of the text\\r\\n     - y (number) y position of the text\\r\\n     - string (string) text to print\\r\\n     - font (object) font object, see @Paper.getFont\\r\\n     - size (number) #optional size of the font, default is `16`\\r\\n     - origin (string) #optional could be `\\\"baseline\\\"` or `\\\"middle\\\"`, default is `\\\"middle\\\"`\\r\\n     - letter_spacing (number) #optional number in range `-1..1`, default is `0`\\r\\n     - line_spacing (number) #optional number in range `1..3`, default is `1`\\r\\n     = (object) resulting path element, which consist of all letters\\r\\n     > Usage\\r\\n     | var txt = r.print(10, 50, \\\"print\\\", r.getFont(\\\"Museo\\\"), 30).attr({fill: \\\"#fff\\\"});\\r\\n     \\\\*/\\r\\n    paperproto.print = function (x, y, string, font, size, origin, letter_spacing, line_spacing) {\\r\\n        origin = origin || \\\"middle\\\"; // baseline|middle\\r\\n        letter_spacing = mmax(mmin(letter_spacing || 0, 1), -1);\\r\\n        line_spacing = mmax(mmin(line_spacing || 1, 3), 1);\\r\\n        var letters = Str(string)[split](E),\\r\\n            shift = 0,\\r\\n            notfirst = 0,\\r\\n            path = E,\\r\\n            scale;\\r\\n        R.is(font, \\\"string\\\") && (font = this.getFont(font));\\r\\n        if (font) {\\r\\n            scale = (size || 16) / font.face[\\\"units-per-em\\\"];\\r\\n            var bb = font.face.bbox[split](separator),\\r\\n                top = +bb[0],\\r\\n                lineHeight = bb[3] - bb[1],\\r\\n                shifty = 0,\\r\\n                height = +bb[1] + (origin == \\\"baseline\\\" ? lineHeight + (+font.face.descent) : lineHeight / 2);\\r\\n            for (var i = 0, ii = letters.length; i < ii; i++) {\\r\\n                if (letters[i] == \\\"\\\\n\\\") {\\r\\n                    shift = 0;\\r\\n                    curr = 0;\\r\\n                    notfirst = 0;\\r\\n                    shifty += lineHeight * line_spacing;\\r\\n                } else {\\r\\n                    var prev = notfirst && font.glyphs[letters[i - 1]] || {},\\r\\n                        curr = font.glyphs[letters[i]];\\r\\n                    shift += notfirst ? (prev.w || font.w) + (prev.k && prev.k[letters[i]] || 0) + (font.w * letter_spacing) : 0;\\r\\n                    notfirst = 1;\\r\\n                }\\r\\n                if (curr && curr.d) {\\r\\n                    path += R.transformPath(curr.d, [\\\"t\\\", shift * scale, shifty * scale, \\\"s\\\", scale, scale, top, height, \\\"t\\\", (x - top) / scale, (y - height) / scale]);\\r\\n                }\\r\\n            }\\r\\n        }\\r\\n        return this.path(path).attr({\\r\\n            fill: \\\"#000\\\",\\r\\n            stroke: \\\"none\\\"\\r\\n        });\\r\\n    };\\r\\n\\r\\n    /*\\\\\\r\\n     * Paper.add\\r\\n     [ method ]\\r\\n     **\\r\\n     * Imports elements in JSON array in format `{type: type, <attributes>}`\\r\\n     **\\r\\n     > Parameters\\r\\n     **\\r\\n     - json (array)\\r\\n     = (object) resulting set of imported elements\\r\\n     > Usage\\r\\n     | paper.add([\\r\\n     |     {\\r\\n     |         type: \\\"circle\\\",\\r\\n     |         cx: 10,\\r\\n     |         cy: 10,\\r\\n     |         r: 5\\r\\n     |     },\\r\\n     |     {\\r\\n     |         type: \\\"rect\\\",\\r\\n     |         x: 10,\\r\\n     |         y: 10,\\r\\n     |         width: 10,\\r\\n     |         height: 10,\\r\\n     |         fill: \\\"#fc0\\\"\\r\\n     |     }\\r\\n     | ]);\\r\\n     \\\\*/\\r\\n    paperproto.add = function (json) {\\r\\n        if (R.is(json, \\\"array\\\")) {\\r\\n            var res = this.set(),\\r\\n                i = 0,\\r\\n                ii = json.length,\\r\\n                j;\\r\\n            for (; i < ii; i++) {\\r\\n                j = json[i] || {};\\r\\n                elements[has](j.type) && res.push(this[j.type]().attr(j));\\r\\n            }\\r\\n        }\\r\\n        return res;\\r\\n    };\\r\\n\\r\\n    /*\\\\\\r\\n     * Raphael.format\\r\\n     [ method ]\\r\\n     **\\r\\n     * Simple format function. Replaces construction of type “`{<number>}`” to the corresponding argument.\\r\\n     **\\r\\n     > Parameters\\r\\n     **\\r\\n     - token (string) string to format\\r\\n     - … (string) rest of arguments will be treated as parameters for replacement\\r\\n     = (string) formated string\\r\\n     > Usage\\r\\n     | var x = 10,\\r\\n     |     y = 20,\\r\\n     |     width = 40,\\r\\n     |     height = 50;\\r\\n     | // this will draw a rectangular shape equivalent to \\\"M10,20h40v50h-40z\\\"\\r\\n     | paper.path(Raphael.format(\\\"M{0},{1}h{2}v{3}h{4}z\\\", x, y, width, height, -width));\\r\\n     \\\\*/\\r\\n    R.format = function (token, params) {\\r\\n        var args = R.is(params, array) ? [0][concat](params) : arguments;\\r\\n        token && R.is(token, string) && args.length - 1 && (token = token.replace(formatrg, function (str, i) {\\r\\n            return args[++i] == null ? E : args[i];\\r\\n        }));\\r\\n        return token || E;\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Raphael.fullfill\\r\\n     [ method ]\\r\\n     **\\r\\n     * A little bit more advanced format function than @Raphael.format. Replaces construction of type “`{<name>}`” to the corresponding argument.\\r\\n     **\\r\\n     > Parameters\\r\\n     **\\r\\n     - token (string) string to format\\r\\n     - json (object) object which properties will be used as a replacement\\r\\n     = (string) formated string\\r\\n     > Usage\\r\\n     | // this will draw a rectangular shape equivalent to \\\"M10,20h40v50h-40z\\\"\\r\\n     | paper.path(Raphael.fullfill(\\\"M{x},{y}h{dim.width}v{dim.height}h{dim['negative width']}z\\\", {\\r\\n     |     x: 10,\\r\\n     |     y: 20,\\r\\n     |     dim: {\\r\\n     |         width: 40,\\r\\n     |         height: 50,\\r\\n     |         \\\"negative width\\\": -40\\r\\n     |     }\\r\\n     | }));\\r\\n     \\\\*/\\r\\n    R.fullfill = (function () {\\r\\n        var tokenRegex = /\\\\{([^\\\\}]+)\\\\}/g,\\r\\n            objNotationRegex = /(?:(?:^|\\\\.)(.+?)(?=\\\\[|\\\\.|$|\\\\()|\\\\[('|\\\")(.+?)\\\\2\\\\])(\\\\(\\\\))?/g, // matches .xxxxx or [\\\"xxxxx\\\"] to run over object properties\\r\\n            replacer = function (all, key, obj) {\\r\\n                var res = obj;\\r\\n                key.replace(objNotationRegex, function (all, name, quote, quotedName, isFunc) {\\r\\n                    name = name || quotedName;\\r\\n                    if (res) {\\r\\n                        if (name in res) {\\r\\n                            res = res[name];\\r\\n                        }\\r\\n                        typeof res == \\\"function\\\" && isFunc && (res = res());\\r\\n                    }\\r\\n                });\\r\\n                res = (res == null || res == obj ? all : res) + \\\"\\\";\\r\\n                return res;\\r\\n            };\\r\\n        return function (str, obj) {\\r\\n            return String(str).replace(tokenRegex, function (all, key) {\\r\\n                return replacer(all, key, obj);\\r\\n            });\\r\\n        };\\r\\n    })();\\r\\n    /*\\\\\\r\\n     * Raphael.ninja\\r\\n     [ method ]\\r\\n     **\\r\\n     * If you want to leave no trace of Raphaël (Well, Raphaël creates only one global variable `Raphael`, but anyway.) You can use `ninja` method.\\r\\n     * Beware, that in this case plugins could stop working, because they are depending on global variable existence.\\r\\n     **\\r\\n     = (object) Raphael object\\r\\n     > Usage\\r\\n     | (function (local_raphael) {\\r\\n     |     var paper = local_raphael(10, 10, 320, 200);\\r\\n     |     …\\r\\n     | })(Raphael.ninja());\\r\\n     \\\\*/\\r\\n    R.ninja = function () {\\r\\n        oldRaphael.was ? (g.win.Raphael = oldRaphael.is) : delete Raphael;\\r\\n        return R;\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Raphael.st\\r\\n     [ property (object) ]\\r\\n     **\\r\\n     * You can add your own method to elements and sets. It is wise to add a set method for each element method\\r\\n     * you added, so you will be able to call the same method on sets too.\\r\\n     **\\r\\n     * See also @Raphael.el.\\r\\n     > Usage\\r\\n     | Raphael.el.red = function () {\\r\\n     |     this.attr({fill: \\\"#f00\\\"});\\r\\n     | };\\r\\n     | Raphael.st.red = function () {\\r\\n     |     this.forEach(function (el) {\\r\\n     |         el.red();\\r\\n     |     });\\r\\n     | };\\r\\n     | // then use it\\r\\n     | paper.set(paper.circle(100, 100, 20), paper.circle(110, 100, 20)).red();\\r\\n     \\\\*/\\r\\n    R.st = setproto;\\r\\n\\r\\n    eve.on(\\\"raphael.DOMload\\\", function () {\\r\\n        loaded = true;\\r\\n    });\\r\\n\\r\\n    // Firefox <3.6 fix: http://webreflection.blogspot.com/2009/11/195-chars-to-help-lazy-loading.html\\r\\n    (function (doc, loaded, f) {\\r\\n        if (doc.readyState == null && doc.addEventListener){\\r\\n            doc.addEventListener(loaded, f = function () {\\r\\n                doc.removeEventListener(loaded, f, false);\\r\\n                doc.readyState = \\\"complete\\\";\\r\\n            }, false);\\r\\n            doc.readyState = \\\"loading\\\";\\r\\n        }\\r\\n        function isLoaded() {\\r\\n            (/in/).test(doc.readyState) ? setTimeout(isLoaded, 9) : R.eve(\\\"raphael.DOMload\\\");\\r\\n        }\\r\\n        isLoaded();\\r\\n    })(document, \\\"DOMContentLoaded\\\");\\r\\n\\r\\n    return R;\\r\\n}));\\r\\n\\r\\n// ┌─────────────────────────────────────────────────────────────────────┐ \\\\\\\\\\r\\n// │ Raphaël 2.1.4 - JavaScript Vector Library                       │ \\\\\\\\\\r\\n// ├─────────────────────────────────────────────────────────────────────┤ \\\\\\\\\\r\\n// │ SVG Module                                                          │ \\\\\\\\\\r\\n// ├─────────────────────────────────────────────────────────────────────┤ \\\\\\\\\\r\\n// │ Copyright (c) 2008-2011 Dmitry Baranovskiy (http://raphaeljs.com)   │ \\\\\\\\\\r\\n// │ Copyright (c) 2008-2011 Sencha Labs (http://sencha.com)             │ \\\\\\\\\\r\\n// │ Licensed under the MIT (http://raphaeljs.com/license.html) license. │ \\\\\\\\\\r\\n// └─────────────────────────────────────────────────────────────────────┘ \\\\\\\\\\r\\n\\r\\n(function (glob, factory) {\\r\\n    if (typeof define === \\\"function\\\" && define.amd) {\\r\\n        define(\\\"raphael.svg\\\", [\\\"raphael.core\\\"], function(raphael) {\\r\\n            return factory(raphael);\\r\\n        });\\r\\n    } else if (typeof exports === \\\"object\\\") {\\r\\n        factory(require(\\\"raphael.core\\\"));\\r\\n    } else {\\r\\n        factory(glob.Raphael);\\r\\n    }\\r\\n}(this, function(R) {\\r\\n    if (R && !R.svg) {\\r\\n        return;\\r\\n    }\\r\\n\\r\\n    var has = \\\"hasOwnProperty\\\",\\r\\n        Str = String,\\r\\n        toFloat = parseFloat,\\r\\n        toInt = parseInt,\\r\\n        math = Math,\\r\\n        mmax = math.max,\\r\\n        abs = math.abs,\\r\\n        pow = math.pow,\\r\\n        separator = /[, ]+/,\\r\\n        eve = R.eve,\\r\\n        E = \\\"\\\",\\r\\n        S = \\\" \\\";\\r\\n    var xlink = \\\"http://www.w3.org/1999/xlink\\\",\\r\\n        markers = {\\r\\n            block: \\\"M5,0 0,2.5 5,5z\\\",\\r\\n            classic: \\\"M5,0 0,2.5 5,5 3.5,3 3.5,2z\\\",\\r\\n            diamond: \\\"M2.5,0 5,2.5 2.5,5 0,2.5z\\\",\\r\\n            open: \\\"M6,1 1,3.5 6,6\\\",\\r\\n            oval: \\\"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z\\\"\\r\\n        },\\r\\n        markerCounter = {};\\r\\n    R.toString = function () {\\r\\n        return  \\\"Your browser supports SVG.\\\\nYou are running Rapha\\\\xebl \\\" + this.version;\\r\\n    };\\r\\n    var $ = function (el, attr) {\\r\\n            if (attr) {\\r\\n                if (typeof el == \\\"string\\\") {\\r\\n                    el = $(el);\\r\\n                }\\r\\n                for (var key in attr) if (attr[has](key)) {\\r\\n                    if (key.substring(0, 6) == \\\"xlink:\\\") {\\r\\n                        el.setAttributeNS(xlink, key.substring(6), Str(attr[key]));\\r\\n                    } else {\\r\\n                        el.setAttribute(key, Str(attr[key]));\\r\\n                    }\\r\\n                }\\r\\n            } else {\\r\\n                el = R._g.doc.createElementNS(\\\"http://www.w3.org/2000/svg\\\", el);\\r\\n                el.style && (el.style.webkitTapHighlightColor = \\\"rgba(0,0,0,0)\\\");\\r\\n            }\\r\\n            return el;\\r\\n        },\\r\\n        addGradientFill = function (element, gradient) {\\r\\n            var type = \\\"linear\\\",\\r\\n                id = element.id + gradient,\\r\\n                fx = .5, fy = .5,\\r\\n                o = element.node,\\r\\n                SVG = element.paper,\\r\\n                s = o.style,\\r\\n                el = R._g.doc.getElementById(id);\\r\\n            if (!el) {\\r\\n                gradient = Str(gradient).replace(R._radial_gradient, function (all, _fx, _fy) {\\r\\n                    type = \\\"radial\\\";\\r\\n                    if (_fx && _fy) {\\r\\n                        fx = toFloat(_fx);\\r\\n                        fy = toFloat(_fy);\\r\\n                        var dir = ((fy > .5) * 2 - 1);\\r\\n                        pow(fx - .5, 2) + pow(fy - .5, 2) > .25 &&\\r\\n                        (fy = math.sqrt(.25 - pow(fx - .5, 2)) * dir + .5) &&\\r\\n                        fy != .5 &&\\r\\n                        (fy = fy.toFixed(5) - 1e-5 * dir);\\r\\n                    }\\r\\n                    return E;\\r\\n                });\\r\\n                gradient = gradient.split(/\\\\s*\\\\-\\\\s*/);\\r\\n                if (type == \\\"linear\\\") {\\r\\n                    var angle = gradient.shift();\\r\\n                    angle = -toFloat(angle);\\r\\n                    if (isNaN(angle)) {\\r\\n                        return null;\\r\\n                    }\\r\\n                    var vector = [0, 0, math.cos(R.rad(angle)), math.sin(R.rad(angle))],\\r\\n                        max = 1 / (mmax(abs(vector[2]), abs(vector[3])) || 1);\\r\\n                    vector[2] *= max;\\r\\n                    vector[3] *= max;\\r\\n                    if (vector[2] < 0) {\\r\\n                        vector[0] = -vector[2];\\r\\n                        vector[2] = 0;\\r\\n                    }\\r\\n                    if (vector[3] < 0) {\\r\\n                        vector[1] = -vector[3];\\r\\n                        vector[3] = 0;\\r\\n                    }\\r\\n                }\\r\\n                var dots = R._parseDots(gradient);\\r\\n                if (!dots) {\\r\\n                    return null;\\r\\n                }\\r\\n                id = id.replace(/[\\\\(\\\\)\\\\s,\\\\xb0#]/g, \\\"_\\\");\\r\\n\\r\\n                if (element.gradient && id != element.gradient.id) {\\r\\n                    SVG.defs.removeChild(element.gradient);\\r\\n                    delete element.gradient;\\r\\n                }\\r\\n\\r\\n                if (!element.gradient) {\\r\\n                    el = $(type + \\\"Gradient\\\", {id: id});\\r\\n                    element.gradient = el;\\r\\n                    $(el, type == \\\"radial\\\" ? {\\r\\n                        fx: fx,\\r\\n                        fy: fy\\r\\n                    } : {\\r\\n                        x1: vector[0],\\r\\n                        y1: vector[1],\\r\\n                        x2: vector[2],\\r\\n                        y2: vector[3],\\r\\n                        gradientTransform: element.matrix.invert()\\r\\n                    });\\r\\n                    SVG.defs.appendChild(el);\\r\\n                    for (var i = 0, ii = dots.length; i < ii; i++) {\\r\\n                        el.appendChild($(\\\"stop\\\", {\\r\\n                            offset: dots[i].offset ? dots[i].offset : i ? \\\"100%\\\" : \\\"0%\\\",\\r\\n                            \\\"stop-color\\\": dots[i].color || \\\"#fff\\\",\\r\\n                            \\\"stop-opacity\\\": isFinite(dots[i].opacity) ? dots[i].opacity : 1\\r\\n                        }));\\r\\n                    }\\r\\n                }\\r\\n            }\\r\\n            $(o, {\\r\\n                fill: \\\"url('\\\" + document.location.origin + document.location.pathname + \\\"#\\\" + id + \\\"')\\\",\\r\\n                opacity: 1,\\r\\n                \\\"fill-opacity\\\": 1\\r\\n            });\\r\\n            s.fill = E;\\r\\n            s.opacity = 1;\\r\\n            s.fillOpacity = 1;\\r\\n            return 1;\\r\\n        },\\r\\n        updatePosition = function (o) {\\r\\n            var bbox = o.getBBox(1);\\r\\n            $(o.pattern, {patternTransform: o.matrix.invert() + \\\" translate(\\\" + bbox.x + \\\",\\\" + bbox.y + \\\")\\\"});\\r\\n        },\\r\\n        addArrow = function (o, value, isEnd) {\\r\\n            if (o.type == \\\"path\\\") {\\r\\n                var values = Str(value).toLowerCase().split(\\\"-\\\"),\\r\\n                    p = o.paper,\\r\\n                    se = isEnd ? \\\"end\\\" : \\\"start\\\",\\r\\n                    node = o.node,\\r\\n                    attrs = o.attrs,\\r\\n                    stroke = attrs[\\\"stroke-width\\\"],\\r\\n                    i = values.length,\\r\\n                    type = \\\"classic\\\",\\r\\n                    from,\\r\\n                    to,\\r\\n                    dx,\\r\\n                    refX,\\r\\n                    attr,\\r\\n                    w = 3,\\r\\n                    h = 3,\\r\\n                    t = 5;\\r\\n                while (i--) {\\r\\n                    switch (values[i]) {\\r\\n                        case \\\"block\\\":\\r\\n                        case \\\"classic\\\":\\r\\n                        case \\\"oval\\\":\\r\\n                        case \\\"diamond\\\":\\r\\n                        case \\\"open\\\":\\r\\n                        case \\\"none\\\":\\r\\n                            type = values[i];\\r\\n                            break;\\r\\n                        case \\\"wide\\\": h = 5; break;\\r\\n                        case \\\"narrow\\\": h = 2; break;\\r\\n                        case \\\"long\\\": w = 5; break;\\r\\n                        case \\\"short\\\": w = 2; break;\\r\\n                    }\\r\\n                }\\r\\n                if (type == \\\"open\\\") {\\r\\n                    w += 2;\\r\\n                    h += 2;\\r\\n                    t += 2;\\r\\n                    dx = 1;\\r\\n                    refX = isEnd ? 4 : 1;\\r\\n                    attr = {\\r\\n                        fill: \\\"none\\\",\\r\\n                        stroke: attrs.stroke\\r\\n                    };\\r\\n                } else {\\r\\n                    refX = dx = w / 2;\\r\\n                    attr = {\\r\\n                        fill: attrs.stroke,\\r\\n                        stroke: \\\"none\\\"\\r\\n                    };\\r\\n                }\\r\\n                if (o._.arrows) {\\r\\n                    if (isEnd) {\\r\\n                        o._.arrows.endPath && markerCounter[o._.arrows.endPath]--;\\r\\n                        o._.arrows.endMarker && markerCounter[o._.arrows.endMarker]--;\\r\\n                    } else {\\r\\n                        o._.arrows.startPath && markerCounter[o._.arrows.startPath]--;\\r\\n                        o._.arrows.startMarker && markerCounter[o._.arrows.startMarker]--;\\r\\n                    }\\r\\n                } else {\\r\\n                    o._.arrows = {};\\r\\n                }\\r\\n                if (type != \\\"none\\\") {\\r\\n                    var pathId = \\\"raphael-marker-\\\" + type,\\r\\n                        markerId = \\\"raphael-marker-\\\" + se + type + w + h + \\\"-obj\\\" + o.id;\\r\\n                    if (!R._g.doc.getElementById(pathId)) {\\r\\n                        p.defs.appendChild($($(\\\"path\\\"), {\\r\\n                            \\\"stroke-linecap\\\": \\\"round\\\",\\r\\n                            d: markers[type],\\r\\n                            id: pathId\\r\\n                        }));\\r\\n                        markerCounter[pathId] = 1;\\r\\n                    } else {\\r\\n                        markerCounter[pathId]++;\\r\\n                    }\\r\\n                    var marker = R._g.doc.getElementById(markerId),\\r\\n                        use;\\r\\n                    if (!marker) {\\r\\n                        marker = $($(\\\"marker\\\"), {\\r\\n                            id: markerId,\\r\\n                            markerHeight: h,\\r\\n                            markerWidth: w,\\r\\n                            orient: \\\"auto\\\",\\r\\n                            refX: refX,\\r\\n                            refY: h / 2\\r\\n                        });\\r\\n                        use = $($(\\\"use\\\"), {\\r\\n                            \\\"xlink:href\\\": \\\"#\\\" + pathId,\\r\\n                            transform: (isEnd ? \\\"rotate(180 \\\" + w / 2 + \\\" \\\" + h / 2 + \\\") \\\" : E) + \\\"scale(\\\" + w / t + \\\",\\\" + h / t + \\\")\\\",\\r\\n                            \\\"stroke-width\\\": (1 / ((w / t + h / t) / 2)).toFixed(4)\\r\\n                        });\\r\\n                        marker.appendChild(use);\\r\\n                        p.defs.appendChild(marker);\\r\\n                        markerCounter[markerId] = 1;\\r\\n                    } else {\\r\\n                        markerCounter[markerId]++;\\r\\n                        use = marker.getElementsByTagName(\\\"use\\\")[0];\\r\\n                    }\\r\\n                    $(use, attr);\\r\\n                    var delta = dx * (type != \\\"diamond\\\" && type != \\\"oval\\\");\\r\\n                    if (isEnd) {\\r\\n                        from = o._.arrows.startdx * stroke || 0;\\r\\n                        to = R.getTotalLength(attrs.path) - delta * stroke;\\r\\n                    } else {\\r\\n                        from = delta * stroke;\\r\\n                        to = R.getTotalLength(attrs.path) - (o._.arrows.enddx * stroke || 0);\\r\\n                    }\\r\\n                    attr = {};\\r\\n                    attr[\\\"marker-\\\" + se] = \\\"url(#\\\" + markerId + \\\")\\\";\\r\\n                    if (to || from) {\\r\\n                        attr.d = R.getSubpath(attrs.path, from, to);\\r\\n                    }\\r\\n                    $(node, attr);\\r\\n                    o._.arrows[se + \\\"Path\\\"] = pathId;\\r\\n                    o._.arrows[se + \\\"Marker\\\"] = markerId;\\r\\n                    o._.arrows[se + \\\"dx\\\"] = delta;\\r\\n                    o._.arrows[se + \\\"Type\\\"] = type;\\r\\n                    o._.arrows[se + \\\"String\\\"] = value;\\r\\n                } else {\\r\\n                    if (isEnd) {\\r\\n                        from = o._.arrows.startdx * stroke || 0;\\r\\n                        to = R.getTotalLength(attrs.path) - from;\\r\\n                    } else {\\r\\n                        from = 0;\\r\\n                        to = R.getTotalLength(attrs.path) - (o._.arrows.enddx * stroke || 0);\\r\\n                    }\\r\\n                    o._.arrows[se + \\\"Path\\\"] && $(node, {d: R.getSubpath(attrs.path, from, to)});\\r\\n                    delete o._.arrows[se + \\\"Path\\\"];\\r\\n                    delete o._.arrows[se + \\\"Marker\\\"];\\r\\n                    delete o._.arrows[se + \\\"dx\\\"];\\r\\n                    delete o._.arrows[se + \\\"Type\\\"];\\r\\n                    delete o._.arrows[se + \\\"String\\\"];\\r\\n                }\\r\\n                for (attr in markerCounter) if (markerCounter[has](attr) && !markerCounter[attr]) {\\r\\n                    var item = R._g.doc.getElementById(attr);\\r\\n                    item && item.parentNode.removeChild(item);\\r\\n                }\\r\\n            }\\r\\n        },\\r\\n        dasharray = {\\r\\n            \\\"-\\\": [3, 1],\\r\\n            \\\".\\\": [1, 1],\\r\\n            \\\"-.\\\": [3, 1, 1, 1],\\r\\n            \\\"-..\\\": [3, 1, 1, 1, 1, 1],\\r\\n            \\\". \\\": [1, 3],\\r\\n            \\\"- \\\": [4, 3],\\r\\n            \\\"--\\\": [8, 3],\\r\\n            \\\"- .\\\": [4, 3, 1, 3],\\r\\n            \\\"--.\\\": [8, 3, 1, 3],\\r\\n            \\\"--..\\\": [8, 3, 1, 3, 1, 3]\\r\\n        },\\r\\n        addDashes = function (o, value, params) {\\r\\n            value = dasharray[Str(value).toLowerCase()];\\r\\n            if (value) {\\r\\n                var width = o.attrs[\\\"stroke-width\\\"] || \\\"1\\\",\\r\\n                    butt = {round: width, square: width, butt: 0}[o.attrs[\\\"stroke-linecap\\\"] || params[\\\"stroke-linecap\\\"]] || 0,\\r\\n                    dashes = [],\\r\\n                    i = value.length;\\r\\n                while (i--) {\\r\\n                    dashes[i] = value[i] * width + ((i % 2) ? 1 : -1) * butt;\\r\\n                }\\r\\n                $(o.node, {\\\"stroke-dasharray\\\": dashes.join(\\\",\\\")});\\r\\n            }\\r\\n            else {\\r\\n                $(o.node, {\\\"stroke-dasharray\\\": \\\"none\\\"});\\r\\n            }\\r\\n        },\\r\\n        setFillAndStroke = function (o, params) {\\r\\n            var node = o.node,\\r\\n                attrs = o.attrs,\\r\\n                vis = node.style.visibility;\\r\\n            node.style.visibility = \\\"hidden\\\";\\r\\n            for (var att in params) {\\r\\n                if (params[has](att)) {\\r\\n                    if (!R._availableAttrs[has](att)) {\\r\\n                        continue;\\r\\n                    }\\r\\n                    var value = params[att];\\r\\n                    attrs[att] = value;\\r\\n                    switch (att) {\\r\\n                        case \\\"blur\\\":\\r\\n                            o.blur(value);\\r\\n                            break;\\r\\n                        case \\\"title\\\":\\r\\n                            var title = node.getElementsByTagName(\\\"title\\\");\\r\\n\\r\\n                            // Use the existing <title>.\\r\\n                            if (title.length && (title = title[0])) {\\r\\n                                title.firstChild.nodeValue = value;\\r\\n                            } else {\\r\\n                                title = $(\\\"title\\\");\\r\\n                                var val = R._g.doc.createTextNode(value);\\r\\n                                title.appendChild(val);\\r\\n                                node.appendChild(title);\\r\\n                            }\\r\\n                            break;\\r\\n                        case \\\"href\\\":\\r\\n                        case \\\"target\\\":\\r\\n                            var pn = node.parentNode;\\r\\n                            if (pn.tagName.toLowerCase() != \\\"a\\\") {\\r\\n                                var hl = $(\\\"a\\\");\\r\\n                                pn.insertBefore(hl, node);\\r\\n                                hl.appendChild(node);\\r\\n                                pn = hl;\\r\\n                            }\\r\\n                            if (att == \\\"target\\\") {\\r\\n                                pn.setAttributeNS(xlink, \\\"show\\\", value == \\\"blank\\\" ? \\\"new\\\" : value);\\r\\n                            } else {\\r\\n                                pn.setAttributeNS(xlink, att, value);\\r\\n                            }\\r\\n                            break;\\r\\n                        case \\\"cursor\\\":\\r\\n                            node.style.cursor = value;\\r\\n                            break;\\r\\n                        case \\\"transform\\\":\\r\\n                            o.transform(value);\\r\\n                            break;\\r\\n                        case \\\"arrow-start\\\":\\r\\n                            addArrow(o, value);\\r\\n                            break;\\r\\n                        case \\\"arrow-end\\\":\\r\\n                            addArrow(o, value, 1);\\r\\n                            break;\\r\\n                        case \\\"clip-rect\\\":\\r\\n                            var rect = Str(value).split(separator);\\r\\n                            if (rect.length == 4) {\\r\\n                                o.clip && o.clip.parentNode.parentNode.removeChild(o.clip.parentNode);\\r\\n                                var el = $(\\\"clipPath\\\"),\\r\\n                                    rc = $(\\\"rect\\\");\\r\\n                                el.id = R.createUUID();\\r\\n                                $(rc, {\\r\\n                                    x: rect[0],\\r\\n                                    y: rect[1],\\r\\n                                    width: rect[2],\\r\\n                                    height: rect[3]\\r\\n                                });\\r\\n                                el.appendChild(rc);\\r\\n                                o.paper.defs.appendChild(el);\\r\\n                                $(node, {\\\"clip-path\\\": \\\"url(#\\\" + el.id + \\\")\\\"});\\r\\n                                o.clip = rc;\\r\\n                            }\\r\\n                            if (!value) {\\r\\n                                var path = node.getAttribute(\\\"clip-path\\\");\\r\\n                                if (path) {\\r\\n                                    var clip = R._g.doc.getElementById(path.replace(/(^url\\\\(#|\\\\)$)/g, E));\\r\\n                                    clip && clip.parentNode.removeChild(clip);\\r\\n                                    $(node, {\\\"clip-path\\\": E});\\r\\n                                    delete o.clip;\\r\\n                                }\\r\\n                            }\\r\\n                            break;\\r\\n                        case \\\"path\\\":\\r\\n                            if (o.type == \\\"path\\\") {\\r\\n                                $(node, {d: value ? attrs.path = R._pathToAbsolute(value) : \\\"M0,0\\\"});\\r\\n                                o._.dirty = 1;\\r\\n                                if (o._.arrows) {\\r\\n                                    \\\"startString\\\" in o._.arrows && addArrow(o, o._.arrows.startString);\\r\\n                                    \\\"endString\\\" in o._.arrows && addArrow(o, o._.arrows.endString, 1);\\r\\n                                }\\r\\n                            }\\r\\n                            break;\\r\\n                        case \\\"width\\\":\\r\\n                            node.setAttribute(att, value);\\r\\n                            o._.dirty = 1;\\r\\n                            if (attrs.fx) {\\r\\n                                att = \\\"x\\\";\\r\\n                                value = attrs.x;\\r\\n                            } else {\\r\\n                                break;\\r\\n                            }\\r\\n                        case \\\"x\\\":\\r\\n                            if (attrs.fx) {\\r\\n                                value = -attrs.x - (attrs.width || 0);\\r\\n                            }\\r\\n                        case \\\"rx\\\":\\r\\n                            if (att == \\\"rx\\\" && o.type == \\\"rect\\\") {\\r\\n                                break;\\r\\n                            }\\r\\n                        case \\\"cx\\\":\\r\\n                            node.setAttribute(att, value);\\r\\n                            o.pattern && updatePosition(o);\\r\\n                            o._.dirty = 1;\\r\\n                            break;\\r\\n                        case \\\"height\\\":\\r\\n                            node.setAttribute(att, value);\\r\\n                            o._.dirty = 1;\\r\\n                            if (attrs.fy) {\\r\\n                                att = \\\"y\\\";\\r\\n                                value = attrs.y;\\r\\n                            } else {\\r\\n                                break;\\r\\n                            }\\r\\n                        case \\\"y\\\":\\r\\n                            if (attrs.fy) {\\r\\n                                value = -attrs.y - (attrs.height || 0);\\r\\n                            }\\r\\n                        case \\\"ry\\\":\\r\\n                            if (att == \\\"ry\\\" && o.type == \\\"rect\\\") {\\r\\n                                break;\\r\\n                            }\\r\\n                        case \\\"cy\\\":\\r\\n                            node.setAttribute(att, value);\\r\\n                            o.pattern && updatePosition(o);\\r\\n                            o._.dirty = 1;\\r\\n                            break;\\r\\n                        case \\\"r\\\":\\r\\n                            if (o.type == \\\"rect\\\") {\\r\\n                                $(node, {rx: value, ry: value});\\r\\n                            } else {\\r\\n                                node.setAttribute(att, value);\\r\\n                            }\\r\\n                            o._.dirty = 1;\\r\\n                            break;\\r\\n                        case \\\"src\\\":\\r\\n                            if (o.type == \\\"image\\\") {\\r\\n                                node.setAttributeNS(xlink, \\\"href\\\", value);\\r\\n                            }\\r\\n                            break;\\r\\n                        case \\\"stroke-width\\\":\\r\\n                            if (o._.sx != 1 || o._.sy != 1) {\\r\\n                                value /= mmax(abs(o._.sx), abs(o._.sy)) || 1;\\r\\n                            }\\r\\n                            node.setAttribute(att, value);\\r\\n                            if (attrs[\\\"stroke-dasharray\\\"]) {\\r\\n                                addDashes(o, attrs[\\\"stroke-dasharray\\\"], params);\\r\\n                            }\\r\\n                            if (o._.arrows) {\\r\\n                                \\\"startString\\\" in o._.arrows && addArrow(o, o._.arrows.startString);\\r\\n                                \\\"endString\\\" in o._.arrows && addArrow(o, o._.arrows.endString, 1);\\r\\n                            }\\r\\n                            break;\\r\\n                        case \\\"stroke-dasharray\\\":\\r\\n                            addDashes(o, value, params);\\r\\n                            break;\\r\\n                        case \\\"fill\\\":\\r\\n                            var isURL = Str(value).match(R._ISURL);\\r\\n                            if (isURL) {\\r\\n                                el = $(\\\"pattern\\\");\\r\\n                                var ig = $(\\\"image\\\");\\r\\n                                el.id = R.createUUID();\\r\\n                                $(el, {x: 0, y: 0, patternUnits: \\\"userSpaceOnUse\\\", height: 1, width: 1});\\r\\n                                $(ig, {x: 0, y: 0, \\\"xlink:href\\\": isURL[1]});\\r\\n                                el.appendChild(ig);\\r\\n\\r\\n                                (function (el) {\\r\\n                                    R._preload(isURL[1], function () {\\r\\n                                        var w = this.offsetWidth,\\r\\n                                            h = this.offsetHeight;\\r\\n                                        $(el, {width: w, height: h});\\r\\n                                        $(ig, {width: w, height: h});\\r\\n                                    });\\r\\n                                })(el);\\r\\n                                o.paper.defs.appendChild(el);\\r\\n                                $(node, {fill: \\\"url(#\\\" + el.id + \\\")\\\"});\\r\\n                                o.pattern = el;\\r\\n                                o.pattern && updatePosition(o);\\r\\n                                break;\\r\\n                            }\\r\\n                            var clr = R.getRGB(value);\\r\\n                            if (!clr.error) {\\r\\n                                delete params.gradient;\\r\\n                                delete attrs.gradient;\\r\\n                                !R.is(attrs.opacity, \\\"undefined\\\") &&\\r\\n                                R.is(params.opacity, \\\"undefined\\\") &&\\r\\n                                $(node, {opacity: attrs.opacity});\\r\\n                                !R.is(attrs[\\\"fill-opacity\\\"], \\\"undefined\\\") &&\\r\\n                                R.is(params[\\\"fill-opacity\\\"], \\\"undefined\\\") &&\\r\\n                                $(node, {\\\"fill-opacity\\\": attrs[\\\"fill-opacity\\\"]});\\r\\n                            } else if ((o.type == \\\"circle\\\" || o.type == \\\"ellipse\\\" || Str(value).charAt() != \\\"r\\\") && addGradientFill(o, value)) {\\r\\n                                if (\\\"opacity\\\" in attrs || \\\"fill-opacity\\\" in attrs) {\\r\\n                                    var gradient = R._g.doc.getElementById(node.getAttribute(\\\"fill\\\").replace(/^url\\\\(#|\\\\)$/g, E));\\r\\n                                    if (gradient) {\\r\\n                                        var stops = gradient.getElementsByTagName(\\\"stop\\\");\\r\\n                                        $(stops[stops.length - 1], {\\\"stop-opacity\\\": (\\\"opacity\\\" in attrs ? attrs.opacity : 1) * (\\\"fill-opacity\\\" in attrs ? attrs[\\\"fill-opacity\\\"] : 1)});\\r\\n                                    }\\r\\n                                }\\r\\n                                attrs.gradient = value;\\r\\n                                attrs.fill = \\\"none\\\";\\r\\n                                break;\\r\\n                            }\\r\\n                            clr[has](\\\"opacity\\\") && $(node, {\\\"fill-opacity\\\": clr.opacity > 1 ? clr.opacity / 100 : clr.opacity});\\r\\n                        case \\\"stroke\\\":\\r\\n                            clr = R.getRGB(value);\\r\\n                            node.setAttribute(att, clr.hex);\\r\\n                            att == \\\"stroke\\\" && clr[has](\\\"opacity\\\") && $(node, {\\\"stroke-opacity\\\": clr.opacity > 1 ? clr.opacity / 100 : clr.opacity});\\r\\n                            if (att == \\\"stroke\\\" && o._.arrows) {\\r\\n                                \\\"startString\\\" in o._.arrows && addArrow(o, o._.arrows.startString);\\r\\n                                \\\"endString\\\" in o._.arrows && addArrow(o, o._.arrows.endString, 1);\\r\\n                            }\\r\\n                            break;\\r\\n                        case \\\"gradient\\\":\\r\\n                            (o.type == \\\"circle\\\" || o.type == \\\"ellipse\\\" || Str(value).charAt() != \\\"r\\\") && addGradientFill(o, value);\\r\\n                            break;\\r\\n                        case \\\"opacity\\\":\\r\\n                            if (attrs.gradient && !attrs[has](\\\"stroke-opacity\\\")) {\\r\\n                                $(node, {\\\"stroke-opacity\\\": value > 1 ? value / 100 : value});\\r\\n                            }\\r\\n                        // fall\\r\\n                        case \\\"fill-opacity\\\":\\r\\n                            if (attrs.gradient) {\\r\\n                                gradient = R._g.doc.getElementById(node.getAttribute(\\\"fill\\\").replace(/^url\\\\(#|\\\\)$/g, E));\\r\\n                                if (gradient) {\\r\\n                                    stops = gradient.getElementsByTagName(\\\"stop\\\");\\r\\n                                    $(stops[stops.length - 1], {\\\"stop-opacity\\\": value});\\r\\n                                }\\r\\n                                break;\\r\\n                            }\\r\\n                        default:\\r\\n                            att == \\\"font-size\\\" && (value = toInt(value, 10) + \\\"px\\\");\\r\\n                            var cssrule = att.replace(/(\\\\-.)/g, function (w) {\\r\\n                                return w.substring(1).toUpperCase();\\r\\n                            });\\r\\n                            node.style[cssrule] = value;\\r\\n                            o._.dirty = 1;\\r\\n                            node.setAttribute(att, value);\\r\\n                            break;\\r\\n                    }\\r\\n                }\\r\\n            }\\r\\n\\r\\n            tuneText(o, params);\\r\\n            node.style.visibility = vis;\\r\\n        },\\r\\n        leading = 1.2,\\r\\n        tuneText = function (el, params) {\\r\\n            if (el.type != \\\"text\\\" || !(params[has](\\\"text\\\") || params[has](\\\"font\\\") || params[has](\\\"font-size\\\") || params[has](\\\"x\\\") || params[has](\\\"y\\\"))) {\\r\\n                return;\\r\\n            }\\r\\n            var a = el.attrs,\\r\\n                node = el.node,\\r\\n                fontSize = node.firstChild ? toInt(R._g.doc.defaultView.getComputedStyle(node.firstChild, E).getPropertyValue(\\\"font-size\\\"), 10) : 10;\\r\\n\\r\\n            if (params[has](\\\"text\\\")) {\\r\\n                a.text = params.text;\\r\\n                while (node.firstChild) {\\r\\n                    node.removeChild(node.firstChild);\\r\\n                }\\r\\n                var texts = Str(params.text).split(\\\"\\\\n\\\"),\\r\\n                    tspans = [],\\r\\n                    tspan;\\r\\n                for (var i = 0, ii = texts.length; i < ii; i++) {\\r\\n                    tspan = $(\\\"tspan\\\");\\r\\n                    i && $(tspan, {dy: fontSize * leading, x: a.x});\\r\\n                    tspan.appendChild(R._g.doc.createTextNode(texts[i]));\\r\\n                    node.appendChild(tspan);\\r\\n                    tspans[i] = tspan;\\r\\n                }\\r\\n            } else {\\r\\n                tspans = node.getElementsByTagName(\\\"tspan\\\");\\r\\n                for (i = 0, ii = tspans.length; i < ii; i++) if (i) {\\r\\n                    $(tspans[i], {dy: fontSize * leading, x: a.x});\\r\\n                } else {\\r\\n                    $(tspans[0], {dy: 0});\\r\\n                }\\r\\n            }\\r\\n            $(node, {x: a.x, y: a.y});\\r\\n            el._.dirty = 1;\\r\\n            var bb = el._getBBox(),\\r\\n                dif = a.y - (bb.y + bb.height / 2);\\r\\n            dif && R.is(dif, \\\"finite\\\") && $(tspans[0], {dy: dif});\\r\\n        },\\r\\n        getRealNode = function (node) {\\r\\n            if (node.parentNode && node.parentNode.tagName.toLowerCase() === \\\"a\\\") {\\r\\n                return node.parentNode;\\r\\n            } else {\\r\\n                return node;\\r\\n            }\\r\\n        },\\r\\n        Element = function (node, svg) {\\r\\n            var X = 0,\\r\\n                Y = 0;\\r\\n            /*\\\\\\r\\n             * Element.node\\r\\n             [ property (object) ]\\r\\n             **\\r\\n             * Gives you a reference to the DOM object, so you can assign event handlers or just mess around.\\r\\n             **\\r\\n             * Note: Don’t mess with it.\\r\\n             > Usage\\r\\n             | // draw a circle at coordinate 10,10 with radius of 10\\r\\n             | var c = paper.circle(10, 10, 10);\\r\\n             | c.node.onclick = function () {\\r\\n             |     c.attr(\\\"fill\\\", \\\"red\\\");\\r\\n             | };\\r\\n             \\\\*/\\r\\n            this[0] = this.node = node;\\r\\n            /*\\\\\\r\\n             * Element.raphael\\r\\n             [ property (object) ]\\r\\n             **\\r\\n             * Internal reference to @Raphael object. In case it is not available.\\r\\n             > Usage\\r\\n             | Raphael.el.red = function () {\\r\\n             |     var hsb = this.paper.raphael.rgb2hsb(this.attr(\\\"fill\\\"));\\r\\n             |     hsb.h = 1;\\r\\n             |     this.attr({fill: this.paper.raphael.hsb2rgb(hsb).hex});\\r\\n             | }\\r\\n             \\\\*/\\r\\n            node.raphael = true;\\r\\n            /*\\\\\\r\\n             * Element.id\\r\\n             [ property (number) ]\\r\\n             **\\r\\n             * Unique id of the element. Especially useful when you want to listen to events of the element,\\r\\n             * because all events are fired in format `<module>.<action>.<id>`. Also useful for @Paper.getById method.\\r\\n             \\\\*/\\r\\n            this.id = R._oid++;\\r\\n            node.raphaelid = this.id;\\r\\n            this.matrix = R.matrix();\\r\\n            this.realPath = null;\\r\\n            /*\\\\\\r\\n             * Element.paper\\r\\n             [ property (object) ]\\r\\n             **\\r\\n             * Internal reference to “paper” where object drawn. Mainly for use in plugins and element extensions.\\r\\n             > Usage\\r\\n             | Raphael.el.cross = function () {\\r\\n             |     this.attr({fill: \\\"red\\\"});\\r\\n             |     this.paper.path(\\\"M10,10L50,50M50,10L10,50\\\")\\r\\n             |         .attr({stroke: \\\"red\\\"});\\r\\n             | }\\r\\n             \\\\*/\\r\\n            this.paper = svg;\\r\\n            this.attrs = this.attrs || {};\\r\\n            this._ = {\\r\\n                transform: [],\\r\\n                sx: 1,\\r\\n                sy: 1,\\r\\n                deg: 0,\\r\\n                dx: 0,\\r\\n                dy: 0,\\r\\n                dirty: 1\\r\\n            };\\r\\n            !svg.bottom && (svg.bottom = this);\\r\\n            /*\\\\\\r\\n             * Element.prev\\r\\n             [ property (object) ]\\r\\n             **\\r\\n             * Reference to the previous element in the hierarchy.\\r\\n             \\\\*/\\r\\n            this.prev = svg.top;\\r\\n            svg.top && (svg.top.next = this);\\r\\n            svg.top = this;\\r\\n            /*\\\\\\r\\n             * Element.next\\r\\n             [ property (object) ]\\r\\n             **\\r\\n             * Reference to the next element in the hierarchy.\\r\\n             \\\\*/\\r\\n            this.next = null;\\r\\n        },\\r\\n        elproto = R.el;\\r\\n\\r\\n    Element.prototype = elproto;\\r\\n    elproto.constructor = Element;\\r\\n\\r\\n    R._engine.path = function (pathString, SVG) {\\r\\n        var el = $(\\\"path\\\");\\r\\n        SVG.canvas && SVG.canvas.appendChild(el);\\r\\n        var p = new Element(el, SVG);\\r\\n        p.type = \\\"path\\\";\\r\\n        setFillAndStroke(p, {\\r\\n            fill: \\\"none\\\",\\r\\n            stroke: \\\"#000\\\",\\r\\n            path: pathString\\r\\n        });\\r\\n        return p;\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Element.rotate\\r\\n     [ method ]\\r\\n     **\\r\\n     * Deprecated! Use @Element.transform instead.\\r\\n     * Adds rotation by given angle around given point to the list of\\r\\n     * transformations of the element.\\r\\n     > Parameters\\r\\n     - deg (number) angle in degrees\\r\\n     - cx (number) #optional x coordinate of the centre of rotation\\r\\n     - cy (number) #optional y coordinate of the centre of rotation\\r\\n     * If cx & cy aren’t specified centre of the shape is used as a point of rotation.\\r\\n     = (object) @Element\\r\\n     \\\\*/\\r\\n    elproto.rotate = function (deg, cx, cy) {\\r\\n        if (this.removed) {\\r\\n            return this;\\r\\n        }\\r\\n        deg = Str(deg).split(separator);\\r\\n        if (deg.length - 1) {\\r\\n            cx = toFloat(deg[1]);\\r\\n            cy = toFloat(deg[2]);\\r\\n        }\\r\\n        deg = toFloat(deg[0]);\\r\\n        (cy == null) && (cx = cy);\\r\\n        if (cx == null || cy == null) {\\r\\n            var bbox = this.getBBox(1);\\r\\n            cx = bbox.x + bbox.width / 2;\\r\\n            cy = bbox.y + bbox.height / 2;\\r\\n        }\\r\\n        this.transform(this._.transform.concat([[\\\"r\\\", deg, cx, cy]]));\\r\\n        return this;\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Element.scale\\r\\n     [ method ]\\r\\n     **\\r\\n     * Deprecated! Use @Element.transform instead.\\r\\n     * Adds scale by given amount relative to given point to the list of\\r\\n     * transformations of the element.\\r\\n     > Parameters\\r\\n     - sx (number) horisontal scale amount\\r\\n     - sy (number) vertical scale amount\\r\\n     - cx (number) #optional x coordinate of the centre of scale\\r\\n     - cy (number) #optional y coordinate of the centre of scale\\r\\n     * If cx & cy aren’t specified centre of the shape is used instead.\\r\\n     = (object) @Element\\r\\n     \\\\*/\\r\\n    elproto.scale = function (sx, sy, cx, cy) {\\r\\n        if (this.removed) {\\r\\n            return this;\\r\\n        }\\r\\n        sx = Str(sx).split(separator);\\r\\n        if (sx.length - 1) {\\r\\n            sy = toFloat(sx[1]);\\r\\n            cx = toFloat(sx[2]);\\r\\n            cy = toFloat(sx[3]);\\r\\n        }\\r\\n        sx = toFloat(sx[0]);\\r\\n        (sy == null) && (sy = sx);\\r\\n        (cy == null) && (cx = cy);\\r\\n        if (cx == null || cy == null) {\\r\\n            var bbox = this.getBBox(1);\\r\\n        }\\r\\n        cx = cx == null ? bbox.x + bbox.width / 2 : cx;\\r\\n        cy = cy == null ? bbox.y + bbox.height / 2 : cy;\\r\\n        this.transform(this._.transform.concat([[\\\"s\\\", sx, sy, cx, cy]]));\\r\\n        return this;\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Element.translate\\r\\n     [ method ]\\r\\n     **\\r\\n     * Deprecated! Use @Element.transform instead.\\r\\n     * Adds translation by given amount to the list of transformations of the element.\\r\\n     > Parameters\\r\\n     - dx (number) horisontal shift\\r\\n     - dy (number) vertical shift\\r\\n     = (object) @Element\\r\\n     \\\\*/\\r\\n    elproto.translate = function (dx, dy) {\\r\\n        if (this.removed) {\\r\\n            return this;\\r\\n        }\\r\\n        dx = Str(dx).split(separator);\\r\\n        if (dx.length - 1) {\\r\\n            dy = toFloat(dx[1]);\\r\\n        }\\r\\n        dx = toFloat(dx[0]) || 0;\\r\\n        dy = +dy || 0;\\r\\n        this.transform(this._.transform.concat([[\\\"t\\\", dx, dy]]));\\r\\n        return this;\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Element.transform\\r\\n     [ method ]\\r\\n     **\\r\\n     * Adds transformation to the element which is separate to other attributes,\\r\\n     * i.e. translation doesn’t change `x` or `y` of the rectange. The format\\r\\n     * of transformation string is similar to the path string syntax:\\r\\n     | \\\"t100,100r30,100,100s2,2,100,100r45s1.5\\\"\\r\\n     * Each letter is a command. There are four commands: `t` is for translate, `r` is for rotate, `s` is for\\r\\n     * scale and `m` is for matrix.\\r\\n     *\\r\\n     * There are also alternative “absolute” translation, rotation and scale: `T`, `R` and `S`. They will not take previous transformation into account. For example, `...T100,0` will always move element 100 px horisontally, while `...t100,0` could move it vertically if there is `r90` before. Just compare results of `r90t100,0` and `r90T100,0`.\\r\\n     *\\r\\n     * So, the example line above could be read like “translate by 100, 100; rotate 30° around 100, 100; scale twice around 100, 100;\\r\\n     * rotate 45° around centre; scale 1.5 times relative to centre”. As you can see rotate and scale commands have origin\\r\\n     * coordinates as optional parameters, the default is the centre point of the element.\\r\\n     * Matrix accepts six parameters.\\r\\n     > Usage\\r\\n     | var el = paper.rect(10, 20, 300, 200);\\r\\n     | // translate 100, 100, rotate 45°, translate -100, 0\\r\\n     | el.transform(\\\"t100,100r45t-100,0\\\");\\r\\n     | // if you want you can append or prepend transformations\\r\\n     | el.transform(\\\"...t50,50\\\");\\r\\n     | el.transform(\\\"s2...\\\");\\r\\n     | // or even wrap\\r\\n     | el.transform(\\\"t50,50...t-50-50\\\");\\r\\n     | // to reset transformation call method with empty string\\r\\n     | el.transform(\\\"\\\");\\r\\n     | // to get current value call it without parameters\\r\\n     | console.log(el.transform());\\r\\n     > Parameters\\r\\n     - tstr (string) #optional transformation string\\r\\n     * If tstr isn’t specified\\r\\n     = (string) current transformation string\\r\\n     * else\\r\\n     = (object) @Element\\r\\n     \\\\*/\\r\\n    elproto.transform = function (tstr) {\\r\\n        var _ = this._;\\r\\n        if (tstr == null) {\\r\\n            return _.transform;\\r\\n        }\\r\\n        R._extractTransform(this, tstr);\\r\\n\\r\\n        this.clip && $(this.clip, {transform: this.matrix.invert()});\\r\\n        this.pattern && updatePosition(this);\\r\\n        this.node && $(this.node, {transform: this.matrix});\\r\\n\\r\\n        if (_.sx != 1 || _.sy != 1) {\\r\\n            var sw = this.attrs[has](\\\"stroke-width\\\") ? this.attrs[\\\"stroke-width\\\"] : 1;\\r\\n            this.attr({\\\"stroke-width\\\": sw});\\r\\n        }\\r\\n\\r\\n        return this;\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Element.hide\\r\\n     [ method ]\\r\\n     **\\r\\n     * Makes element invisible. See @Element.show.\\r\\n     = (object) @Element\\r\\n     \\\\*/\\r\\n    elproto.hide = function () {\\r\\n        if(!this.removed) this.node.style.display = \\\"none\\\";\\r\\n        return this;\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Element.show\\r\\n     [ method ]\\r\\n     **\\r\\n     * Makes element visible. See @Element.hide.\\r\\n     = (object) @Element\\r\\n     \\\\*/\\r\\n    elproto.show = function () {\\r\\n        if(!this.removed) this.node.style.display = \\\"\\\";\\r\\n        return this;\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Element.remove\\r\\n     [ method ]\\r\\n     **\\r\\n     * Removes element from the paper.\\r\\n     \\\\*/\\r\\n    elproto.remove = function () {\\r\\n        var node = getRealNode(this.node);\\r\\n        if (this.removed || !node.parentNode) {\\r\\n            return;\\r\\n        }\\r\\n        var paper = this.paper;\\r\\n        paper.__set__ && paper.__set__.exclude(this);\\r\\n        eve.unbind(\\\"raphael.*.*.\\\" + this.id);\\r\\n        if (this.gradient) {\\r\\n            paper.defs.removeChild(this.gradient);\\r\\n        }\\r\\n        R._tear(this, paper);\\r\\n\\r\\n        node.parentNode.removeChild(node);\\r\\n\\r\\n        // Remove custom data for element\\r\\n        this.removeData();\\r\\n\\r\\n        for (var i in this) {\\r\\n            this[i] = typeof this[i] == \\\"function\\\" ? R._removedFactory(i) : null;\\r\\n        }\\r\\n        this.removed = true;\\r\\n    };\\r\\n    elproto._getBBox = function () {\\r\\n        if (this.node.style.display == \\\"none\\\") {\\r\\n            this.show();\\r\\n            var hide = true;\\r\\n        }\\r\\n        var canvasHidden = false,\\r\\n            containerStyle;\\r\\n        if (this.paper.canvas.parentElement) {\\r\\n            containerStyle = this.paper.canvas.parentElement.style;\\r\\n        } //IE10+ can't find parentElement\\r\\n        else if (this.paper.canvas.parentNode) {\\r\\n            containerStyle = this.paper.canvas.parentNode.style;\\r\\n        }\\r\\n\\r\\n        if(containerStyle && containerStyle.display == \\\"none\\\") {\\r\\n            canvasHidden = true;\\r\\n            containerStyle.display = \\\"\\\";\\r\\n        }\\r\\n        var bbox = {};\\r\\n        try {\\r\\n            bbox = this.node.getBBox();\\r\\n        } catch(e) {\\r\\n            // Firefox 3.0.x, 25.0.1 (probably more versions affected) play badly here - possible fix\\r\\n            bbox = {\\r\\n                x: this.node.clientLeft,\\r\\n                y: this.node.clientTop,\\r\\n                width: this.node.clientWidth,\\r\\n                height: this.node.clientHeight\\r\\n            }\\r\\n        } finally {\\r\\n            bbox = bbox || {};\\r\\n            if(canvasHidden){\\r\\n                containerStyle.display = \\\"none\\\";\\r\\n            }\\r\\n        }\\r\\n        hide && this.hide();\\r\\n        return bbox;\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Element.attr\\r\\n     [ method ]\\r\\n     **\\r\\n     * Sets the attributes of the element.\\r\\n     > Parameters\\r\\n     - attrName (string) attribute’s name\\r\\n     - value (string) value\\r\\n     * or\\r\\n     - params (object) object of name/value pairs\\r\\n     * or\\r\\n     - attrName (string) attribute’s name\\r\\n     * or\\r\\n     - attrNames (array) in this case method returns array of current values for given attribute names\\r\\n     = (object) @Element if attrsName & value or params are passed in.\\r\\n     = (...) value of the attribute if only attrsName is passed in.\\r\\n     = (array) array of values of the attribute if attrsNames is passed in.\\r\\n     = (object) object of attributes if nothing is passed in.\\r\\n     > Possible parameters\\r\\n     # <p>Please refer to the <a href=\\\"http://www.w3.org/TR/SVG/\\\" title=\\\"The W3C Recommendation for the SVG language describes these properties in detail.\\\">SVG specification</a> for an explanation of these parameters.</p>\\r\\n     o arrow-end (string) arrowhead on the end of the path. The format for string is `<type>[-<width>[-<length>]]`. Possible types: `classic`, `block`, `open`, `oval`, `diamond`, `none`, width: `wide`, `narrow`, `medium`, length: `long`, `short`, `midium`.\\r\\n     o clip-rect (string) comma or space separated values: x, y, width and height\\r\\n     o cursor (string) CSS type of the cursor\\r\\n     o cx (number) the x-axis coordinate of the center of the circle, or ellipse\\r\\n     o cy (number) the y-axis coordinate of the center of the circle, or ellipse\\r\\n     o fill (string) colour, gradient or image\\r\\n     o fill-opacity (number)\\r\\n     o font (string)\\r\\n     o font-family (string)\\r\\n     o font-size (number) font size in pixels\\r\\n     o font-weight (string)\\r\\n     o height (number)\\r\\n     o href (string) URL, if specified element behaves as hyperlink\\r\\n     o opacity (number)\\r\\n     o path (string) SVG path string format\\r\\n     o r (number) radius of the circle, ellipse or rounded corner on the rect\\r\\n     o rx (number) horisontal radius of the ellipse\\r\\n     o ry (number) vertical radius of the ellipse\\r\\n     o src (string) image URL, only works for @Element.image element\\r\\n     o stroke (string) stroke colour\\r\\n     o stroke-dasharray (string) [“”, “none”, “`-`”, “`.`”, “`-.`”, “`-..`”, “`. `”, “`- `”, “`--`”, “`- .`”, “`--.`”, “`--..`”]\\r\\n     o stroke-linecap (string) [“`butt`”, “`square`”, “`round`”]\\r\\n     o stroke-linejoin (string) [“`bevel`”, “`round`”, “`miter`”]\\r\\n     o stroke-miterlimit (number)\\r\\n     o stroke-opacity (number)\\r\\n     o stroke-width (number) stroke width in pixels, default is '1'\\r\\n     o target (string) used with href\\r\\n     o text (string) contents of the text element. Use `\\\\n` for multiline text\\r\\n     o text-anchor (string) [“`start`”, “`middle`”, “`end`”], default is “`middle`”\\r\\n     o title (string) will create tooltip with a given text\\r\\n     o transform (string) see @Element.transform\\r\\n     o width (number)\\r\\n     o x (number)\\r\\n     o y (number)\\r\\n     > Gradients\\r\\n     * Linear gradient format: “`‹angle›-‹colour›[-‹colour›[:‹offset›]]*-‹colour›`”, example: “`90-#fff-#000`” – 90°\\r\\n     * gradient from white to black or “`0-#fff-#f00:20-#000`” – 0° gradient from white via red (at 20%) to black.\\r\\n     *\\r\\n     * radial gradient: “`r[(‹fx›, ‹fy›)]‹colour›[-‹colour›[:‹offset›]]*-‹colour›`”, example: “`r#fff-#000`” –\\r\\n     * gradient from white to black or “`r(0.25, 0.75)#fff-#000`” – gradient from white to black with focus point\\r\\n     * at 0.25, 0.75. Focus point coordinates are in 0..1 range. Radial gradients can only be applied to circles and ellipses.\\r\\n     > Path String\\r\\n     # <p>Please refer to <a href=\\\"http://www.w3.org/TR/SVG/paths.html#PathData\\\" title=\\\"Details of a path’s data attribute’s format are described in the SVG specification.\\\">SVG documentation regarding path string</a>. Raphaël fully supports it.</p>\\r\\n     > Colour Parsing\\r\\n     # <ul>\\r\\n     #     <li>Colour name (“<code>red</code>”, “<code>green</code>”, “<code>cornflowerblue</code>”, etc)</li>\\r\\n     #     <li>#••• — shortened HTML colour: (“<code>#000</code>”, “<code>#fc0</code>”, etc)</li>\\r\\n     #     <li>#•••••• — full length HTML colour: (“<code>#000000</code>”, “<code>#bd2300</code>”)</li>\\r\\n     #     <li>rgb(•••, •••, •••) — red, green and blue channels’ values: (“<code>rgb(200,&nbsp;100,&nbsp;0)</code>”)</li>\\r\\n     #     <li>rgb(•••%, •••%, •••%) — same as above, but in %: (“<code>rgb(100%,&nbsp;175%,&nbsp;0%)</code>”)</li>\\r\\n     #     <li>rgba(•••, •••, •••, •••) — red, green and blue channels’ values: (“<code>rgba(200,&nbsp;100,&nbsp;0, .5)</code>”)</li>\\r\\n     #     <li>rgba(•••%, •••%, •••%, •••%) — same as above, but in %: (“<code>rgba(100%,&nbsp;175%,&nbsp;0%, 50%)</code>”)</li>\\r\\n     #     <li>hsb(•••, •••, •••) — hue, saturation and brightness values: (“<code>hsb(0.5,&nbsp;0.25,&nbsp;1)</code>”)</li>\\r\\n     #     <li>hsb(•••%, •••%, •••%) — same as above, but in %</li>\\r\\n     #     <li>hsba(•••, •••, •••, •••) — same as above, but with opacity</li>\\r\\n     #     <li>hsl(•••, •••, •••) — almost the same as hsb, see <a href=\\\"http://en.wikipedia.org/wiki/HSL_and_HSV\\\" title=\\\"HSL and HSV - Wikipedia, the free encyclopedia\\\">Wikipedia page</a></li>\\r\\n     #     <li>hsl(•••%, •••%, •••%) — same as above, but in %</li>\\r\\n     #     <li>hsla(•••, •••, •••, •••) — same as above, but with opacity</li>\\r\\n     #     <li>Optionally for hsb and hsl you could specify hue as a degree: “<code>hsl(240deg,&nbsp;1,&nbsp;.5)</code>” or, if you want to go fancy, “<code>hsl(240°,&nbsp;1,&nbsp;.5)</code>”</li>\\r\\n     # </ul>\\r\\n     \\\\*/\\r\\n    elproto.attr = function (name, value) {\\r\\n        if (this.removed) {\\r\\n            return this;\\r\\n        }\\r\\n        if (name == null) {\\r\\n            var res = {};\\r\\n            for (var a in this.attrs) if (this.attrs[has](a)) {\\r\\n                res[a] = this.attrs[a];\\r\\n            }\\r\\n            res.gradient && res.fill == \\\"none\\\" && (res.fill = res.gradient) && delete res.gradient;\\r\\n            res.transform = this._.transform;\\r\\n            return res;\\r\\n        }\\r\\n        if (value == null && R.is(name, \\\"string\\\")) {\\r\\n            if (name == \\\"fill\\\" && this.attrs.fill == \\\"none\\\" && this.attrs.gradient) {\\r\\n                return this.attrs.gradient;\\r\\n            }\\r\\n            if (name == \\\"transform\\\") {\\r\\n                return this._.transform;\\r\\n            }\\r\\n            var names = name.split(separator),\\r\\n                out = {};\\r\\n            for (var i = 0, ii = names.length; i < ii; i++) {\\r\\n                name = names[i];\\r\\n                if (name in this.attrs) {\\r\\n                    out[name] = this.attrs[name];\\r\\n                } else if (R.is(this.paper.customAttributes[name], \\\"function\\\")) {\\r\\n                    out[name] = this.paper.customAttributes[name].def;\\r\\n                } else {\\r\\n                    out[name] = R._availableAttrs[name];\\r\\n                }\\r\\n            }\\r\\n            return ii - 1 ? out : out[names[0]];\\r\\n        }\\r\\n        if (value == null && R.is(name, \\\"array\\\")) {\\r\\n            out = {};\\r\\n            for (i = 0, ii = name.length; i < ii; i++) {\\r\\n                out[name[i]] = this.attr(name[i]);\\r\\n            }\\r\\n            return out;\\r\\n        }\\r\\n        if (value != null) {\\r\\n            var params = {};\\r\\n            params[name] = value;\\r\\n        } else if (name != null && R.is(name, \\\"object\\\")) {\\r\\n            params = name;\\r\\n        }\\r\\n        for (var key in params) {\\r\\n            eve(\\\"raphael.attr.\\\" + key + \\\".\\\" + this.id, this, params[key]);\\r\\n        }\\r\\n        for (key in this.paper.customAttributes) if (this.paper.customAttributes[has](key) && params[has](key) && R.is(this.paper.customAttributes[key], \\\"function\\\")) {\\r\\n            var par = this.paper.customAttributes[key].apply(this, [].concat(params[key]));\\r\\n            this.attrs[key] = params[key];\\r\\n            for (var subkey in par) if (par[has](subkey)) {\\r\\n                params[subkey] = par[subkey];\\r\\n            }\\r\\n        }\\r\\n        setFillAndStroke(this, params);\\r\\n        return this;\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Element.toFront\\r\\n     [ method ]\\r\\n     **\\r\\n     * Moves the element so it is the closest to the viewer’s eyes, on top of other elements.\\r\\n     = (object) @Element\\r\\n     \\\\*/\\r\\n    elproto.toFront = function () {\\r\\n        if (this.removed) {\\r\\n            return this;\\r\\n        }\\r\\n        var node = getRealNode(this.node);\\r\\n        node.parentNode.appendChild(node);\\r\\n        var svg = this.paper;\\r\\n        svg.top != this && R._tofront(this, svg);\\r\\n        return this;\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Element.toBack\\r\\n     [ method ]\\r\\n     **\\r\\n     * Moves the element so it is the furthest from the viewer’s eyes, behind other elements.\\r\\n     = (object) @Element\\r\\n     \\\\*/\\r\\n    elproto.toBack = function () {\\r\\n        if (this.removed) {\\r\\n            return this;\\r\\n        }\\r\\n        var node = getRealNode(this.node);\\r\\n        var parentNode = node.parentNode;\\r\\n        parentNode.insertBefore(node, parentNode.firstChild);\\r\\n        R._toback(this, this.paper);\\r\\n        var svg = this.paper;\\r\\n        return this;\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Element.insertAfter\\r\\n     [ method ]\\r\\n     **\\r\\n     * Inserts current object after the given one.\\r\\n     = (object) @Element\\r\\n     \\\\*/\\r\\n    elproto.insertAfter = function (element) {\\r\\n        if (this.removed || !element) {\\r\\n            return this;\\r\\n        }\\r\\n\\r\\n        var node = getRealNode(this.node);\\r\\n        var afterNode = getRealNode(element.node || element[element.length - 1].node);\\r\\n        if (afterNode.nextSibling) {\\r\\n            afterNode.parentNode.insertBefore(node, afterNode.nextSibling);\\r\\n        } else {\\r\\n            afterNode.parentNode.appendChild(node);\\r\\n        }\\r\\n        R._insertafter(this, element, this.paper);\\r\\n        return this;\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Element.insertBefore\\r\\n     [ method ]\\r\\n     **\\r\\n     * Inserts current object before the given one.\\r\\n     = (object) @Element\\r\\n     \\\\*/\\r\\n    elproto.insertBefore = function (element) {\\r\\n        if (this.removed || !element) {\\r\\n            return this;\\r\\n        }\\r\\n\\r\\n        var node = getRealNode(this.node);\\r\\n        var beforeNode = getRealNode(element.node || element[0].node);\\r\\n        beforeNode.parentNode.insertBefore(node, beforeNode);\\r\\n        R._insertbefore(this, element, this.paper);\\r\\n        return this;\\r\\n    };\\r\\n    elproto.blur = function (size) {\\r\\n        // Experimental. No Safari support. Use it on your own risk.\\r\\n        var t = this;\\r\\n        if (+size !== 0) {\\r\\n            var fltr = $(\\\"filter\\\"),\\r\\n                blur = $(\\\"feGaussianBlur\\\");\\r\\n            t.attrs.blur = size;\\r\\n            fltr.id = R.createUUID();\\r\\n            $(blur, {stdDeviation: +size || 1.5});\\r\\n            fltr.appendChild(blur);\\r\\n            t.paper.defs.appendChild(fltr);\\r\\n            t._blur = fltr;\\r\\n            $(t.node, {filter: \\\"url(#\\\" + fltr.id + \\\")\\\"});\\r\\n        } else {\\r\\n            if (t._blur) {\\r\\n                t._blur.parentNode.removeChild(t._blur);\\r\\n                delete t._blur;\\r\\n                delete t.attrs.blur;\\r\\n            }\\r\\n            t.node.removeAttribute(\\\"filter\\\");\\r\\n        }\\r\\n        return t;\\r\\n    };\\r\\n    R._engine.circle = function (svg, x, y, r) {\\r\\n        var el = $(\\\"circle\\\");\\r\\n        svg.canvas && svg.canvas.appendChild(el);\\r\\n        var res = new Element(el, svg);\\r\\n        res.attrs = {cx: x, cy: y, r: r, fill: \\\"none\\\", stroke: \\\"#000\\\"};\\r\\n        res.type = \\\"circle\\\";\\r\\n        $(el, res.attrs);\\r\\n        return res;\\r\\n    };\\r\\n    R._engine.rect = function (svg, x, y, w, h, r) {\\r\\n        var el = $(\\\"rect\\\");\\r\\n        svg.canvas && svg.canvas.appendChild(el);\\r\\n        var res = new Element(el, svg);\\r\\n        res.attrs = {x: x, y: y, width: w, height: h, rx: r || 0, ry: r || 0, fill: \\\"none\\\", stroke: \\\"#000\\\"};\\r\\n        res.type = \\\"rect\\\";\\r\\n        $(el, res.attrs);\\r\\n        return res;\\r\\n    };\\r\\n    R._engine.ellipse = function (svg, x, y, rx, ry) {\\r\\n        var el = $(\\\"ellipse\\\");\\r\\n        svg.canvas && svg.canvas.appendChild(el);\\r\\n        var res = new Element(el, svg);\\r\\n        res.attrs = {cx: x, cy: y, rx: rx, ry: ry, fill: \\\"none\\\", stroke: \\\"#000\\\"};\\r\\n        res.type = \\\"ellipse\\\";\\r\\n        $(el, res.attrs);\\r\\n        return res;\\r\\n    };\\r\\n    R._engine.image = function (svg, src, x, y, w, h) {\\r\\n        var el = $(\\\"image\\\");\\r\\n        $(el, {x: x, y: y, width: w, height: h, preserveAspectRatio: \\\"none\\\"});\\r\\n        el.setAttributeNS(xlink, \\\"href\\\", src);\\r\\n        svg.canvas && svg.canvas.appendChild(el);\\r\\n        var res = new Element(el, svg);\\r\\n        res.attrs = {x: x, y: y, width: w, height: h, src: src};\\r\\n        res.type = \\\"image\\\";\\r\\n        return res;\\r\\n    };\\r\\n    R._engine.text = function (svg, x, y, text) {\\r\\n        var el = $(\\\"text\\\");\\r\\n        svg.canvas && svg.canvas.appendChild(el);\\r\\n        var res = new Element(el, svg);\\r\\n        res.attrs = {\\r\\n            x: x,\\r\\n            y: y,\\r\\n            \\\"text-anchor\\\": \\\"middle\\\",\\r\\n            text: text,\\r\\n            \\\"font-family\\\": R._availableAttrs[\\\"font-family\\\"],\\r\\n            \\\"font-size\\\": R._availableAttrs[\\\"font-size\\\"],\\r\\n            stroke: \\\"none\\\",\\r\\n            fill: \\\"#000\\\"\\r\\n        };\\r\\n        res.type = \\\"text\\\";\\r\\n        setFillAndStroke(res, res.attrs);\\r\\n        return res;\\r\\n    };\\r\\n    R._engine.setSize = function (width, height) {\\r\\n        this.width = width || this.width;\\r\\n        this.height = height || this.height;\\r\\n        this.canvas.setAttribute(\\\"width\\\", this.width);\\r\\n        this.canvas.setAttribute(\\\"height\\\", this.height);\\r\\n        if (this._viewBox) {\\r\\n            this.setViewBox.apply(this, this._viewBox);\\r\\n        }\\r\\n        return this;\\r\\n    };\\r\\n    R._engine.create = function () {\\r\\n        var con = R._getContainer.apply(0, arguments),\\r\\n            container = con && con.container,\\r\\n            x = con.x,\\r\\n            y = con.y,\\r\\n            width = con.width,\\r\\n            height = con.height;\\r\\n        if (!container) {\\r\\n            throw new Error(\\\"SVG container not found.\\\");\\r\\n        }\\r\\n        var cnvs = $(\\\"svg\\\"),\\r\\n            css = \\\"overflow:hidden;\\\",\\r\\n            isFloating;\\r\\n        x = x || 0;\\r\\n        y = y || 0;\\r\\n        width = width || 512;\\r\\n        height = height || 342;\\r\\n        $(cnvs, {\\r\\n            height: height,\\r\\n            version: 1.1,\\r\\n            width: width,\\r\\n            xmlns: \\\"http://www.w3.org/2000/svg\\\",\\r\\n            \\\"xmlns:xlink\\\": \\\"http://www.w3.org/1999/xlink\\\"\\r\\n        });\\r\\n        if (container == 1) {\\r\\n            cnvs.style.cssText = css + \\\"position:absolute;left:\\\" + x + \\\"px;top:\\\" + y + \\\"px\\\";\\r\\n            R._g.doc.body.appendChild(cnvs);\\r\\n            isFloating = 1;\\r\\n        } else {\\r\\n            cnvs.style.cssText = css + \\\"position:relative\\\";\\r\\n            if (container.firstChild) {\\r\\n                container.insertBefore(cnvs, container.firstChild);\\r\\n            } else {\\r\\n                container.appendChild(cnvs);\\r\\n            }\\r\\n        }\\r\\n        container = new R._Paper;\\r\\n        container.width = width;\\r\\n        container.height = height;\\r\\n        container.canvas = cnvs;\\r\\n        container.clear();\\r\\n        container._left = container._top = 0;\\r\\n        isFloating && (container.renderfix = function () {});\\r\\n        container.renderfix();\\r\\n        return container;\\r\\n    };\\r\\n    R._engine.setViewBox = function (x, y, w, h, fit) {\\r\\n        eve(\\\"raphael.setViewBox\\\", this, this._viewBox, [x, y, w, h, fit]);\\r\\n        var paperSize = this.getSize(),\\r\\n            size = mmax(w / paperSize.width, h / paperSize.height),\\r\\n            top = this.top,\\r\\n            aspectRatio = fit ? \\\"xMidYMid meet\\\" : \\\"xMinYMin\\\",\\r\\n            vb,\\r\\n            sw;\\r\\n        if (x == null) {\\r\\n            if (this._vbSize) {\\r\\n                size = 1;\\r\\n            }\\r\\n            delete this._vbSize;\\r\\n            vb = \\\"0 0 \\\" + this.width + S + this.height;\\r\\n        } else {\\r\\n            this._vbSize = size;\\r\\n            vb = x + S + y + S + w + S + h;\\r\\n        }\\r\\n        $(this.canvas, {\\r\\n            viewBox: vb,\\r\\n            preserveAspectRatio: aspectRatio\\r\\n        });\\r\\n        while (size && top) {\\r\\n            sw = \\\"stroke-width\\\" in top.attrs ? top.attrs[\\\"stroke-width\\\"] : 1;\\r\\n            top.attr({\\\"stroke-width\\\": sw});\\r\\n            top._.dirty = 1;\\r\\n            top._.dirtyT = 1;\\r\\n            top = top.prev;\\r\\n        }\\r\\n        this._viewBox = [x, y, w, h, !!fit];\\r\\n        return this;\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Paper.renderfix\\r\\n     [ method ]\\r\\n     **\\r\\n     * Fixes the issue of Firefox and IE9 regarding subpixel rendering. If paper is dependant\\r\\n     * on other elements after reflow it could shift half pixel which cause for lines to lost their crispness.\\r\\n     * This method fixes the issue.\\r\\n     **\\r\\n     Special thanks to Mariusz Nowak (http://www.medikoo.com/) for this method.\\r\\n     \\\\*/\\r\\n    R.prototype.renderfix = function () {\\r\\n        var cnvs = this.canvas,\\r\\n            s = cnvs.style,\\r\\n            pos;\\r\\n        try {\\r\\n            pos = cnvs.getScreenCTM() || cnvs.createSVGMatrix();\\r\\n        } catch (e) {\\r\\n            pos = cnvs.createSVGMatrix();\\r\\n        }\\r\\n        var left = -pos.e % 1,\\r\\n            top = -pos.f % 1;\\r\\n        if (left || top) {\\r\\n            if (left) {\\r\\n                this._left = (this._left + left) % 1;\\r\\n                s.left = this._left + \\\"px\\\";\\r\\n            }\\r\\n            if (top) {\\r\\n                this._top = (this._top + top) % 1;\\r\\n                s.top = this._top + \\\"px\\\";\\r\\n            }\\r\\n        }\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Paper.clear\\r\\n     [ method ]\\r\\n     **\\r\\n     * Clears the paper, i.e. removes all the elements.\\r\\n     \\\\*/\\r\\n    R.prototype.clear = function () {\\r\\n        R.eve(\\\"raphael.clear\\\", this);\\r\\n        var c = this.canvas;\\r\\n        while (c.firstChild) {\\r\\n            c.removeChild(c.firstChild);\\r\\n        }\\r\\n        this.bottom = this.top = null;\\r\\n        (this.desc = $(\\\"desc\\\")).appendChild(R._g.doc.createTextNode(\\\"Created with Rapha\\\\xebl \\\" + R.version));\\r\\n        c.appendChild(this.desc);\\r\\n        c.appendChild(this.defs = $(\\\"defs\\\"));\\r\\n    };\\r\\n    /*\\\\\\r\\n     * Paper.remove\\r\\n     [ method ]\\r\\n     **\\r\\n     * Removes the paper from the DOM.\\r\\n     \\\\*/\\r\\n    R.prototype.remove = function () {\\r\\n        eve(\\\"raphael.remove\\\", this);\\r\\n        this.canvas.parentNode && this.canvas.parentNode.removeChild(this.canvas);\\r\\n        for (var i in this) {\\r\\n            this[i] = typeof this[i] == \\\"function\\\" ? R._removedFactory(i) : null;\\r\\n        }\\r\\n    };\\r\\n    var setproto = R.st;\\r\\n    for (var method in elproto) if (elproto[has](method) && !setproto[has](method)) {\\r\\n        setproto[method] = (function (methodname) {\\r\\n            return function () {\\r\\n                var arg = arguments;\\r\\n                return this.forEach(function (el) {\\r\\n                    el[methodname].apply(el, arg);\\r\\n                });\\r\\n            };\\r\\n        })(method);\\r\\n    }\\r\\n}));\\r\\n\\r\\n// ┌─────────────────────────────────────────────────────────────────────┐ \\\\\\\\\\r\\n// │ Raphaël 2.1.4 - JavaScript Vector Library                       │ \\\\\\\\\\r\\n// ├─────────────────────────────────────────────────────────────────────┤ \\\\\\\\\\r\\n// │ VML Module                                                          │ \\\\\\\\\\r\\n// ├─────────────────────────────────────────────────────────────────────┤ \\\\\\\\\\r\\n// │ Copyright (c) 2008-2011 Dmitry Baranovskiy (http://raphaeljs.com)   │ \\\\\\\\\\r\\n// │ Copyright (c) 2008-2011 Sencha Labs (http://sencha.com)             │ \\\\\\\\\\r\\n// │ Licensed under the MIT (http://raphaeljs.com/license.html) license. │ \\\\\\\\\\r\\n// └─────────────────────────────────────────────────────────────────────┘ \\\\\\\\\\r\\n\\r\\n(function (glob, factory) {\\r\\n    if (typeof define === \\\"function\\\" && define.amd) {\\r\\n        define(\\\"raphael.vml\\\", [\\\"raphael.core\\\"], function(raphael) {\\r\\n            return factory(raphael);\\r\\n        });\\r\\n    } else if (typeof exports === \\\"object\\\") {\\r\\n        factory(require(\\\"raphael\\\"));\\r\\n    } else {\\r\\n        factory(glob.Raphael);\\r\\n    }\\r\\n}(this, function(R) {\\r\\n    if (R && !R.vml) {\\r\\n        return;\\r\\n    }\\r\\n\\r\\n    var has = \\\"hasOwnProperty\\\",\\r\\n        Str = String,\\r\\n        toFloat = parseFloat,\\r\\n        math = Math,\\r\\n        round = math.round,\\r\\n        mmax = math.max,\\r\\n        mmin = math.min,\\r\\n        abs = math.abs,\\r\\n        fillString = \\\"fill\\\",\\r\\n        separator = /[, ]+/,\\r\\n        eve = R.eve,\\r\\n        ms = \\\" progid:DXImageTransform.Microsoft\\\",\\r\\n        S = \\\" \\\",\\r\\n        E = \\\"\\\",\\r\\n        map = {M: \\\"m\\\", L: \\\"l\\\", C: \\\"c\\\", Z: \\\"x\\\", m: \\\"t\\\", l: \\\"r\\\", c: \\\"v\\\", z: \\\"x\\\"},\\r\\n        bites = /([clmz]),?([^clmz]*)/gi,\\r\\n        blurregexp = / progid:\\\\S+Blur\\\\([^\\\\)]+\\\\)/g,\\r\\n        val = /-?[^,\\\\s-]+/g,\\r\\n        cssDot = \\\"position:absolute;left:0;top:0;width:1px;height:1px;behavior:url(#default#VML)\\\",\\r\\n        zoom = 21600,\\r\\n        pathTypes = {path: 1, rect: 1, image: 1},\\r\\n        ovalTypes = {circle: 1, ellipse: 1},\\r\\n        path2vml = function (path) {\\r\\n            var total =  /[ahqstv]/ig,\\r\\n                command = R._pathToAbsolute;\\r\\n            Str(path).match(total) && (command = R._path2curve);\\r\\n            total = /[clmz]/g;\\r\\n            if (command == R._pathToAbsolute && !Str(path).match(total)) {\\r\\n                var res = Str(path).replace(bites, function (all, command, args) {\\r\\n                    var vals = [],\\r\\n                        isMove = command.toLowerCase() == \\\"m\\\",\\r\\n                        res = map[command];\\r\\n                    args.replace(val, function (value) {\\r\\n                        if (isMove && vals.length == 2) {\\r\\n                            res += vals + map[command == \\\"m\\\" ? \\\"l\\\" : \\\"L\\\"];\\r\\n                            vals = [];\\r\\n                        }\\r\\n                        vals.push(round(value * zoom));\\r\\n                    });\\r\\n                    return res + vals;\\r\\n                });\\r\\n                return res;\\r\\n            }\\r\\n            var pa = command(path), p, r;\\r\\n            res = [];\\r\\n            for (var i = 0, ii = pa.length; i < ii; i++) {\\r\\n                p = pa[i];\\r\\n                r = pa[i][0].toLowerCase();\\r\\n                r == \\\"z\\\" && (r = \\\"x\\\");\\r\\n                for (var j = 1, jj = p.length; j < jj; j++) {\\r\\n                    r += round(p[j] * zoom) + (j != jj - 1 ? \\\",\\\" : E);\\r\\n                }\\r\\n                res.push(r);\\r\\n            }\\r\\n            return res.join(S);\\r\\n        },\\r\\n        compensation = function (deg, dx, dy) {\\r\\n            var m = R.matrix();\\r\\n            m.rotate(-deg, .5, .5);\\r\\n            return {\\r\\n                dx: m.x(dx, dy),\\r\\n                dy: m.y(dx, dy)\\r\\n            };\\r\\n        },\\r\\n        setCoords = function (p, sx, sy, dx, dy, deg) {\\r\\n            var _ = p._,\\r\\n                m = p.matrix,\\r\\n                fillpos = _.fillpos,\\r\\n                o = p.node,\\r\\n                s = o.style,\\r\\n                y = 1,\\r\\n                flip = \\\"\\\",\\r\\n                dxdy,\\r\\n                kx = zoom / sx,\\r\\n                ky = zoom / sy;\\r\\n            s.visibility = \\\"hidden\\\";\\r\\n            if (!sx || !sy) {\\r\\n                return;\\r\\n            }\\r\\n            o.coordsize = abs(kx) + S + abs(ky);\\r\\n            s.rotation = deg * (sx * sy < 0 ? -1 : 1);\\r\\n            if (deg) {\\r\\n                var c = compensation(deg, dx, dy);\\r\\n                dx = c.dx;\\r\\n                dy = c.dy;\\r\\n            }\\r\\n            sx < 0 && (flip += \\\"x\\\");\\r\\n            sy < 0 && (flip += \\\" y\\\") && (y = -1);\\r\\n            s.flip = flip;\\r\\n            o.coordorigin = (dx * -kx) + S + (dy * -ky);\\r\\n            if (fillpos || _.fillsize) {\\r\\n                var fill = o.getElementsByTagName(fillString);\\r\\n                fill = fill && fill[0];\\r\\n                o.removeChild(fill);\\r\\n                if (fillpos) {\\r\\n                    c = compensation(deg, m.x(fillpos[0], fillpos[1]), m.y(fillpos[0], fillpos[1]));\\r\\n                    fill.position = c.dx * y + S + c.dy * y;\\r\\n                }\\r\\n                if (_.fillsize) {\\r\\n                    fill.size = _.fillsize[0] * abs(sx) + S + _.fillsize[1] * abs(sy);\\r\\n                }\\r\\n                o.appendChild(fill);\\r\\n            }\\r\\n            s.visibility = \\\"visible\\\";\\r\\n        };\\r\\n    R.toString = function () {\\r\\n        return  \\\"Your browser doesn\\\\u2019t support SVG. Falling down to VML.\\\\nYou are running Rapha\\\\xebl \\\" + this.version;\\r\\n    };\\r\\n    var addArrow = function (o, value, isEnd) {\\r\\n            var values = Str(value).toLowerCase().split(\\\"-\\\"),\\r\\n                se = isEnd ? \\\"end\\\" : \\\"start\\\",\\r\\n                i = values.length,\\r\\n                type = \\\"classic\\\",\\r\\n                w = \\\"medium\\\",\\r\\n                h = \\\"medium\\\";\\r\\n            while (i--) {\\r\\n                switch (values[i]) {\\r\\n                    case \\\"block\\\":\\r\\n                    case \\\"classic\\\":\\r\\n                    case \\\"oval\\\":\\r\\n                    case \\\"diamond\\\":\\r\\n                    case \\\"open\\\":\\r\\n                    case \\\"none\\\":\\r\\n                        type = values[i];\\r\\n                        break;\\r\\n                    case \\\"wide\\\":\\r\\n                    case \\\"narrow\\\": h = values[i]; break;\\r\\n                    case \\\"long\\\":\\r\\n                    case \\\"short\\\": w = values[i]; break;\\r\\n                }\\r\\n            }\\r\\n            var stroke = o.node.getElementsByTagName(\\\"stroke\\\")[0];\\r\\n            stroke[se + \\\"arrow\\\"] = type;\\r\\n            stroke[se + \\\"arrowlength\\\"] = w;\\r\\n            stroke[se + \\\"arrowwidth\\\"] = h;\\r\\n        },\\r\\n        setFillAndStroke = function (o, params) {\\r\\n            // o.paper.canvas.style.display = \\\"none\\\";\\r\\n            o.attrs = o.attrs || {};\\r\\n            var node = o.node,\\r\\n                a = o.attrs,\\r\\n                s = node.style,\\r\\n                xy,\\r\\n                newpath = pathTypes[o.type] && (params.x != a.x || params.y != a.y || params.width != a.width || params.height != a.height || params.cx != a.cx || params.cy != a.cy || params.rx != a.rx || params.ry != a.ry || params.r != a.r),\\r\\n                isOval = ovalTypes[o.type] && (a.cx != params.cx || a.cy != params.cy || a.r != params.r || a.rx != params.rx || a.ry != params.ry),\\r\\n                res = o;\\r\\n\\r\\n\\r\\n            for (var par in params) if (params[has](par)) {\\r\\n                a[par] = params[par];\\r\\n            }\\r\\n            if (newpath) {\\r\\n                a.path = R._getPath[o.type](o);\\r\\n                o._.dirty = 1;\\r\\n            }\\r\\n            params.href && (node.href = params.href);\\r\\n            params.title && (node.title = params.title);\\r\\n            params.target && (node.target = params.target);\\r\\n            params.cursor && (s.cursor = params.cursor);\\r\\n            \\\"blur\\\" in params && o.blur(params.blur);\\r\\n            if (params.path && o.type == \\\"path\\\" || newpath) {\\r\\n                node.path = path2vml(~Str(a.path).toLowerCase().indexOf(\\\"r\\\") ? R._pathToAbsolute(a.path) : a.path);\\r\\n                o._.dirty = 1;\\r\\n                if (o.type == \\\"image\\\") {\\r\\n                    o._.fillpos = [a.x, a.y];\\r\\n                    o._.fillsize = [a.width, a.height];\\r\\n                    setCoords(o, 1, 1, 0, 0, 0);\\r\\n                }\\r\\n            }\\r\\n            \\\"transform\\\" in params && o.transform(params.transform);\\r\\n            if (isOval) {\\r\\n                var cx = +a.cx,\\r\\n                    cy = +a.cy,\\r\\n                    rx = +a.rx || +a.r || 0,\\r\\n                    ry = +a.ry || +a.r || 0;\\r\\n                node.path = R.format(\\\"ar{0},{1},{2},{3},{4},{1},{4},{1}x\\\", round((cx - rx) * zoom), round((cy - ry) * zoom), round((cx + rx) * zoom), round((cy + ry) * zoom), round(cx * zoom));\\r\\n                o._.dirty = 1;\\r\\n            }\\r\\n            if (\\\"clip-rect\\\" in params) {\\r\\n                var rect = Str(params[\\\"clip-rect\\\"]).split(separator);\\r\\n                if (rect.length == 4) {\\r\\n                    rect[2] = +rect[2] + (+rect[0]);\\r\\n                    rect[3] = +rect[3] + (+rect[1]);\\r\\n                    var div = node.clipRect || R._g.doc.createElement(\\\"div\\\"),\\r\\n                        dstyle = div.style;\\r\\n                    dstyle.clip = R.format(\\\"rect({1}px {2}px {3}px {0}px)\\\", rect);\\r\\n                    if (!node.clipRect) {\\r\\n                        dstyle.position = \\\"absolute\\\";\\r\\n                        dstyle.top = 0;\\r\\n                        dstyle.left = 0;\\r\\n                        dstyle.width = o.paper.width + \\\"px\\\";\\r\\n                        dstyle.height = o.paper.height + \\\"px\\\";\\r\\n                        node.parentNode.insertBefore(div, node);\\r\\n                        div.appendChild(node);\\r\\n                        node.clipRect = div;\\r\\n                    }\\r\\n                }\\r\\n                if (!params[\\\"clip-rect\\\"]) {\\r\\n                    node.clipRect && (node.clipRect.style.clip = \\\"auto\\\");\\r\\n                }\\r\\n            }\\r\\n            if (o.textpath) {\\r\\n                var textpathStyle = o.textpath.style;\\r\\n                params.font && (textpathStyle.font = params.font);\\r\\n                params[\\\"font-family\\\"] && (textpathStyle.fontFamily = '\\\"' + params[\\\"font-family\\\"].split(\\\",\\\")[0].replace(/^['\\\"]+|['\\\"]+$/g, E) + '\\\"');\\r\\n                params[\\\"font-size\\\"] && (textpathStyle.fontSize = params[\\\"font-size\\\"]);\\r\\n                params[\\\"font-weight\\\"] && (textpathStyle.fontWeight = params[\\\"font-weight\\\"]);\\r\\n                params[\\\"font-style\\\"] && (textpathStyle.fontStyle = params[\\\"font-style\\\"]);\\r\\n            }\\r\\n            if (\\\"arrow-start\\\" in params) {\\r\\n                addArrow(res, params[\\\"arrow-start\\\"]);\\r\\n            }\\r\\n            if (\\\"arrow-end\\\" in params) {\\r\\n                addArrow(res, params[\\\"arrow-end\\\"], 1);\\r\\n            }\\r\\n            if (params.opacity != null ||\\r\\n                params[\\\"stroke-width\\\"] != null ||\\r\\n                params.fill != null ||\\r\\n                params.src != null ||\\r\\n                params.stroke != null ||\\r\\n                params[\\\"stroke-width\\\"] != null ||\\r\\n                params[\\\"stroke-opacity\\\"] != null ||\\r\\n                params[\\\"fill-opacity\\\"] != null ||\\r\\n                params[\\\"stroke-dasharray\\\"] != null ||\\r\\n                params[\\\"stroke-miterlimit\\\"] != null ||\\r\\n                params[\\\"stroke-linejoin\\\"] != null ||\\r\\n                params[\\\"stroke-linecap\\\"] != null) {\\r\\n                var fill = node.getElementsByTagName(fillString),\\r\\n                    newfill = false;\\r\\n                fill = fill && fill[0];\\r\\n                !fill && (newfill = fill = createNode(fillString));\\r\\n                if (o.type == \\\"image\\\" && params.src) {\\r\\n                    fill.src = params.src;\\r\\n                }\\r\\n                params.fill && (fill.on = true);\\r\\n                if (fill.on == null || params.fill == \\\"none\\\" || params.fill === null) {\\r\\n                    fill.on = false;\\r\\n                }\\r\\n                if (fill.on && params.fill) {\\r\\n                    var isURL = Str(params.fill).match(R._ISURL);\\r\\n                    if (isURL) {\\r\\n                        fill.parentNode == node && node.removeChild(fill);\\r\\n                        fill.rotate = true;\\r\\n                        fill.src = isURL[1];\\r\\n                        fill.type = \\\"tile\\\";\\r\\n                        var bbox = o.getBBox(1);\\r\\n                        fill.position = bbox.x + S + bbox.y;\\r\\n                        o._.fillpos = [bbox.x, bbox.y];\\r\\n\\r\\n                        R._preload(isURL[1], function () {\\r\\n                            o._.fillsize = [this.offsetWidth, this.offsetHeight];\\r\\n                        });\\r\\n                    } else {\\r\\n                        fill.color = R.getRGB(params.fill).hex;\\r\\n                        fill.src = E;\\r\\n                        fill.type = \\\"solid\\\";\\r\\n                        if (R.getRGB(params.fill).error && (res.type in {circle: 1, ellipse: 1} || Str(params.fill).charAt() != \\\"r\\\") && addGradientFill(res, params.fill, fill)) {\\r\\n                            a.fill = \\\"none\\\";\\r\\n                            a.gradient = params.fill;\\r\\n                            fill.rotate = false;\\r\\n                        }\\r\\n                    }\\r\\n                }\\r\\n                if (\\\"fill-opacity\\\" in params || \\\"opacity\\\" in params) {\\r\\n                    var opacity = ((+a[\\\"fill-opacity\\\"] + 1 || 2) - 1) * ((+a.opacity + 1 || 2) - 1) * ((+R.getRGB(params.fill).o + 1 || 2) - 1);\\r\\n                    opacity = mmin(mmax(opacity, 0), 1);\\r\\n                    fill.opacity = opacity;\\r\\n                    if (fill.src) {\\r\\n                        fill.color = \\\"none\\\";\\r\\n                    }\\r\\n                }\\r\\n                node.appendChild(fill);\\r\\n                var stroke = (node.getElementsByTagName(\\\"stroke\\\") && node.getElementsByTagName(\\\"stroke\\\")[0]),\\r\\n                    newstroke = false;\\r\\n                !stroke && (newstroke = stroke = createNode(\\\"stroke\\\"));\\r\\n                if ((params.stroke && params.stroke != \\\"none\\\") ||\\r\\n                    params[\\\"stroke-width\\\"] ||\\r\\n                    params[\\\"stroke-opacity\\\"] != null ||\\r\\n                    params[\\\"stroke-dasharray\\\"] ||\\r\\n                    params[\\\"stroke-miterlimit\\\"] ||\\r\\n                    params[\\\"stroke-linejoin\\\"] ||\\r\\n                    params[\\\"stroke-linecap\\\"]) {\\r\\n                    stroke.on = true;\\r\\n                }\\r\\n                (params.stroke == \\\"none\\\" || params.stroke === null || stroke.on == null || params.stroke == 0 || params[\\\"stroke-width\\\"] == 0) && (stroke.on = false);\\r\\n                var strokeColor = R.getRGB(params.stroke);\\r\\n                stroke.on && params.stroke && (stroke.color = strokeColor.hex);\\r\\n                opacity = ((+a[\\\"stroke-opacity\\\"] + 1 || 2) - 1) * ((+a.opacity + 1 || 2) - 1) * ((+strokeColor.o + 1 || 2) - 1);\\r\\n                var width = (toFloat(params[\\\"stroke-width\\\"]) || 1) * .75;\\r\\n                opacity = mmin(mmax(opacity, 0), 1);\\r\\n                params[\\\"stroke-width\\\"] == null && (width = a[\\\"stroke-width\\\"]);\\r\\n                params[\\\"stroke-width\\\"] && (stroke.weight = width);\\r\\n                width && width < 1 && (opacity *= width) && (stroke.weight = 1);\\r\\n                stroke.opacity = opacity;\\r\\n\\r\\n                params[\\\"stroke-linejoin\\\"] && (stroke.joinstyle = params[\\\"stroke-linejoin\\\"] || \\\"miter\\\");\\r\\n                stroke.miterlimit = params[\\\"stroke-miterlimit\\\"] || 8;\\r\\n                params[\\\"stroke-linecap\\\"] && (stroke.endcap = params[\\\"stroke-linecap\\\"] == \\\"butt\\\" ? \\\"flat\\\" : params[\\\"stroke-linecap\\\"] == \\\"square\\\" ? \\\"square\\\" : \\\"round\\\");\\r\\n                if (\\\"stroke-dasharray\\\" in params) {\\r\\n                    var dasharray = {\\r\\n                        \\\"-\\\": \\\"shortdash\\\",\\r\\n                        \\\".\\\": \\\"shortdot\\\",\\r\\n                        \\\"-.\\\": \\\"shortdashdot\\\",\\r\\n                        \\\"-..\\\": \\\"shortdashdotdot\\\",\\r\\n                        \\\". \\\": \\\"dot\\\",\\r\\n                        \\\"- \\\": \\\"dash\\\",\\r\\n                        \\\"--\\\": \\\"longdash\\\",\\r\\n                        \\\"- .\\\": \\\"dashdot\\\",\\r\\n                        \\\"--.\\\": \\\"longdashdot\\\",\\r\\n                        \\\"--..\\\": \\\"longdashdotdot\\\"\\r\\n                    };\\r\\n                    stroke.dashstyle = dasharray[has](params[\\\"stroke-dasharray\\\"]) ? dasharray[params[\\\"stroke-dasharray\\\"]] : E;\\r\\n                }\\r\\n                newstroke && node.appendChild(stroke);\\r\\n            }\\r\\n            if (res.type == \\\"text\\\") {\\r\\n                res.paper.canvas.style.display = E;\\r\\n                var span = res.paper.span,\\r\\n                    m = 100,\\r\\n                    fontSize = a.font && a.font.match(/\\\\d+(?:\\\\.\\\\d*)?(?=px)/);\\r\\n                s = span.style;\\r\\n                a.font && (s.font = a.font);\\r\\n                a[\\\"font-family\\\"] && (s.fontFamily = a[\\\"font-family\\\"]);\\r\\n                a[\\\"font-weight\\\"] && (s.fontWeight = a[\\\"font-weight\\\"]);\\r\\n                a[\\\"font-style\\\"] && (s.fontStyle = a[\\\"font-style\\\"]);\\r\\n                fontSize = toFloat(a[\\\"font-size\\\"] || fontSize && fontSize[0]) || 10;\\r\\n                s.fontSize = fontSize * m + \\\"px\\\";\\r\\n                res.textpath.string && (span.innerHTML = Str(res.textpath.string).replace(/</g, \\\"&#60;\\\").replace(/&/g, \\\"&#38;\\\").replace(/\\\\n/g, \\\"<br>\\\"));\\r\\n                var brect = span.getBoundingClientRect();\\r\\n                res.W = a.w = (brect.right - brect.left) / m;\\r\\n                res.H = a.h = (brect.bottom - brect.top) / m;\\r\\n                // res.paper.canvas.style.display = \\\"none\\\";\\r\\n                res.X = a.x;\\r\\n                res.Y = a.y + res.H / 2;\\r\\n\\r\\n                (\\\"x\\\" in params || \\\"y\\\" in params) && (res.path.v = R.format(\\\"m{0},{1}l{2},{1}\\\", round(a.x * zoom), round(a.y * zoom), round(a.x * zoom) + 1));\\r\\n                var dirtyattrs = [\\\"x\\\", \\\"y\\\", \\\"text\\\", \\\"font\\\", \\\"font-family\\\", \\\"font-weight\\\", \\\"font-style\\\", \\\"font-size\\\"];\\r\\n                for (var d = 0, dd = dirtyattrs.length; d < dd; d++) if (dirtyattrs[d] in params) {\\r\\n                    res._.dirty = 1;\\r\\n                    break;\\r\\n                }\\r\\n\\r\\n                // text-anchor emulation\\r\\n                switch (a[\\\"text-anchor\\\"]) {\\r\\n                    case \\\"start\\\":\\r\\n                        res.textpath.style[\\\"v-text-align\\\"] = \\\"left\\\";\\r\\n                        res.bbx = res.W / 2;\\r\\n                        break;\\r\\n                    case \\\"end\\\":\\r\\n                        res.textpath.style[\\\"v-text-align\\\"] = \\\"right\\\";\\r\\n                        res.bbx = -res.W / 2;\\r\\n                        break;\\r\\n                    default:\\r\\n                        res.textpath.style[\\\"v-text-align\\\"] = \\\"center\\\";\\r\\n                        res.bbx = 0;\\r\\n                        break;\\r\\n                }\\r\\n                res.textpath.style[\\\"v-text-kern\\\"] = true;\\r\\n            }\\r\\n            // res.paper.canvas.style.display = E;\\r\\n        },\\r\\n        addGradientFill = function (o, gradient, fill) {\\r\\n            o.attrs = o.attrs || {};\\r\\n            var attrs = o.attrs,\\r\\n                pow = Math.pow,\\r\\n                opacity,\\r\\n                oindex,\\r\\n                type = \\\"linear\\\",\\r\\n                fxfy = \\\".5 .5\\\";\\r\\n            o.attrs.gradient = gradient;\\r\\n            gradient = Str(gradient).replace(R._radial_gradient, function (all, fx, fy) {\\r\\n                type = \\\"radial\\\";\\r\\n                if (fx && fy) {\\r\\n                    fx = toFloat(fx);\\r\\n                    fy = toFloat(fy);\\r\\n                    pow(fx - .5, 2) + pow(fy - .5, 2) > .25 && (fy = math.sqrt(.25 - pow(fx - .5, 2)) * ((fy > .5) * 2 - 1) + .5);\\r\\n                    fxfy = fx + S + fy;\\r\\n                }\\r\\n                return E;\\r\\n            });\\r\\n            gradient = gradient.split(/\\\\s*\\\\-\\\\s*/);\\r\\n            if (type == \\\"linear\\\") {\\r\\n                var angle = gradient.shift();\\r\\n                angle = -toFloat(angle);\\r\\n                if (isNaN(angle)) {\\r\\n                    return null;\\r\\n                }\\r\\n            }\\r\\n            var dots = R._parseDots(gradient);\\r\\n            if (!dots) {\\r\\n                return null;\\r\\n            }\\r\\n            o = o.shape || o.node;\\r\\n            if (dots.length) {\\r\\n                o.removeChild(fill);\\r\\n                fill.on = true;\\r\\n                fill.method = \\\"none\\\";\\r\\n                fill.color = dots[0].color;\\r\\n                fill.color2 = dots[dots.length - 1].color;\\r\\n                var clrs = [];\\r\\n                for (var i = 0, ii = dots.length; i < ii; i++) {\\r\\n                    dots[i].offset && clrs.push(dots[i].offset + S + dots[i].color);\\r\\n                }\\r\\n                fill.colors = clrs.length ? clrs.join() : \\\"0% \\\" + fill.color;\\r\\n                if (type == \\\"radial\\\") {\\r\\n                    fill.type = \\\"gradientTitle\\\";\\r\\n                    fill.focus = \\\"100%\\\";\\r\\n                    fill.focussize = \\\"0 0\\\";\\r\\n                    fill.focusposition = fxfy;\\r\\n                    fill.angle = 0;\\r\\n                } else {\\r\\n                    // fill.rotate= true;\\r\\n                    fill.type = \\\"gradient\\\";\\r\\n                    fill.angle = (270 - angle) % 360;\\r\\n                }\\r\\n                o.appendChild(fill);\\r\\n            }\\r\\n            return 1;\\r\\n        },\\r\\n        Element = function (node, vml) {\\r\\n            this[0] = this.node = node;\\r\\n            node.raphael = true;\\r\\n            this.id = R._oid++;\\r\\n            node.raphaelid = this.id;\\r\\n            this.X = 0;\\r\\n            this.Y = 0;\\r\\n            this.attrs = {};\\r\\n            this.paper = vml;\\r\\n            this.matrix = R.matrix();\\r\\n            this._ = {\\r\\n                transform: [],\\r\\n                sx: 1,\\r\\n                sy: 1,\\r\\n                dx: 0,\\r\\n                dy: 0,\\r\\n                deg: 0,\\r\\n                dirty: 1,\\r\\n                dirtyT: 1\\r\\n            };\\r\\n            !vml.bottom && (vml.bottom = this);\\r\\n            this.prev = vml.top;\\r\\n            vml.top && (vml.top.next = this);\\r\\n            vml.top = this;\\r\\n            this.next = null;\\r\\n        };\\r\\n    var elproto = R.el;\\r\\n\\r\\n    Element.prototype = elproto;\\r\\n    elproto.constructor = Element;\\r\\n    elproto.transform = function (tstr) {\\r\\n        if (tstr == null) {\\r\\n            return this._.transform;\\r\\n        }\\r\\n        var vbs = this.paper._viewBoxShift,\\r\\n            vbt = vbs ? \\\"s\\\" + [vbs.scale, vbs.scale] + \\\"-1-1t\\\" + [vbs.dx, vbs.dy] : E,\\r\\n            oldt;\\r\\n        if (vbs) {\\r\\n            oldt = tstr = Str(tstr).replace(/\\\\.{3}|\\\\u2026/g, this._.transform || E);\\r\\n        }\\r\\n        R._extractTransform(this, vbt + tstr);\\r\\n        var matrix = this.matrix.clone(),\\r\\n            skew = this.skew,\\r\\n            o = this.node,\\r\\n            split,\\r\\n            isGrad = ~Str(this.attrs.fill).indexOf(\\\"-\\\"),\\r\\n            isPatt = !Str(this.attrs.fill).indexOf(\\\"url(\\\");\\r\\n        matrix.translate(1, 1);\\r\\n        if (isPatt || isGrad || this.type == \\\"image\\\") {\\r\\n            skew.matrix = \\\"1 0 0 1\\\";\\r\\n            skew.offset = \\\"0 0\\\";\\r\\n            split = matrix.split();\\r\\n            if ((isGrad && split.noRotation) || !split.isSimple) {\\r\\n                o.style.filter = matrix.toFilter();\\r\\n                var bb = this.getBBox(),\\r\\n                    bbt = this.getBBox(1),\\r\\n                    dx = bb.x - bbt.x,\\r\\n                    dy = bb.y - bbt.y;\\r\\n                o.coordorigin = (dx * -zoom) + S + (dy * -zoom);\\r\\n                setCoords(this, 1, 1, dx, dy, 0);\\r\\n            } else {\\r\\n                o.style.filter = E;\\r\\n                setCoords(this, split.scalex, split.scaley, split.dx, split.dy, split.rotate);\\r\\n            }\\r\\n        } else {\\r\\n            o.style.filter = E;\\r\\n            skew.matrix = Str(matrix);\\r\\n            skew.offset = matrix.offset();\\r\\n        }\\r\\n        if (oldt !== null) { // empty string value is true as well\\r\\n            this._.transform = oldt;\\r\\n            R._extractTransform(this, oldt);\\r\\n        }\\r\\n        return this;\\r\\n    };\\r\\n    elproto.rotate = function (deg, cx, cy) {\\r\\n        if (this.removed) {\\r\\n            return this;\\r\\n        }\\r\\n        if (deg == null) {\\r\\n            return;\\r\\n        }\\r\\n        deg = Str(deg).split(separator);\\r\\n        if (deg.length - 1) {\\r\\n            cx = toFloat(deg[1]);\\r\\n            cy = toFloat(deg[2]);\\r\\n        }\\r\\n        deg = toFloat(deg[0]);\\r\\n        (cy == null) && (cx = cy);\\r\\n        if (cx == null || cy == null) {\\r\\n            var bbox = this.getBBox(1);\\r\\n            cx = bbox.x + bbox.width / 2;\\r\\n            cy = bbox.y + bbox.height / 2;\\r\\n        }\\r\\n        this._.dirtyT = 1;\\r\\n        this.transform(this._.transform.concat([[\\\"r\\\", deg, cx, cy]]));\\r\\n        return this;\\r\\n    };\\r\\n    elproto.translate = function (dx, dy) {\\r\\n        if (this.removed) {\\r\\n            return this;\\r\\n        }\\r\\n        dx = Str(dx).split(separator);\\r\\n        if (dx.length - 1) {\\r\\n            dy = toFloat(dx[1]);\\r\\n        }\\r\\n        dx = toFloat(dx[0]) || 0;\\r\\n        dy = +dy || 0;\\r\\n        if (this._.bbox) {\\r\\n            this._.bbox.x += dx;\\r\\n            this._.bbox.y += dy;\\r\\n        }\\r\\n        this.transform(this._.transform.concat([[\\\"t\\\", dx, dy]]));\\r\\n        return this;\\r\\n    };\\r\\n    elproto.scale = function (sx, sy, cx, cy) {\\r\\n        if (this.removed) {\\r\\n            return this;\\r\\n        }\\r\\n        sx = Str(sx).split(separator);\\r\\n        if (sx.length - 1) {\\r\\n            sy = toFloat(sx[1]);\\r\\n            cx = toFloat(sx[2]);\\r\\n            cy = toFloat(sx[3]);\\r\\n            isNaN(cx) && (cx = null);\\r\\n            isNaN(cy) && (cy = null);\\r\\n        }\\r\\n        sx = toFloat(sx[0]);\\r\\n        (sy == null) && (sy = sx);\\r\\n        (cy == null) && (cx = cy);\\r\\n        if (cx == null || cy == null) {\\r\\n            var bbox = this.getBBox(1);\\r\\n        }\\r\\n        cx = cx == null ? bbox.x + bbox.width / 2 : cx;\\r\\n        cy = cy == null ? bbox.y + bbox.height / 2 : cy;\\r\\n\\r\\n        this.transform(this._.transform.concat([[\\\"s\\\", sx, sy, cx, cy]]));\\r\\n        this._.dirtyT = 1;\\r\\n        return this;\\r\\n    };\\r\\n    elproto.hide = function () {\\r\\n        !this.removed && (this.node.style.display = \\\"none\\\");\\r\\n        return this;\\r\\n    };\\r\\n    elproto.show = function () {\\r\\n        !this.removed && (this.node.style.display = E);\\r\\n        return this;\\r\\n    };\\r\\n    // Needed to fix the vml setViewBox issues\\r\\n    elproto.auxGetBBox = R.el.getBBox;\\r\\n    elproto.getBBox = function(){\\r\\n        var b = this.auxGetBBox();\\r\\n        if (this.paper && this.paper._viewBoxShift)\\r\\n        {\\r\\n            var c = {};\\r\\n            var z = 1/this.paper._viewBoxShift.scale;\\r\\n            c.x = b.x - this.paper._viewBoxShift.dx;\\r\\n            c.x *= z;\\r\\n            c.y = b.y - this.paper._viewBoxShift.dy;\\r\\n            c.y *= z;\\r\\n            c.width  = b.width  * z;\\r\\n            c.height = b.height * z;\\r\\n            c.x2 = c.x + c.width;\\r\\n            c.y2 = c.y + c.height;\\r\\n            return c;\\r\\n        }\\r\\n        return b;\\r\\n    };\\r\\n    elproto._getBBox = function () {\\r\\n        if (this.removed) {\\r\\n            return {};\\r\\n        }\\r\\n        return {\\r\\n            x: this.X + (this.bbx || 0) - this.W / 2,\\r\\n            y: this.Y - this.H,\\r\\n            width: this.W,\\r\\n            height: this.H\\r\\n        };\\r\\n    };\\r\\n    elproto.remove = function () {\\r\\n        if (this.removed || !this.node.parentNode) {\\r\\n            return;\\r\\n        }\\r\\n        this.paper.__set__ && this.paper.__set__.exclude(this);\\r\\n        R.eve.unbind(\\\"raphael.*.*.\\\" + this.id);\\r\\n        R._tear(this, this.paper);\\r\\n        this.node.parentNode.removeChild(this.node);\\r\\n        this.shape && this.shape.parentNode.removeChild(this.shape);\\r\\n        for (var i in this) {\\r\\n            this[i] = typeof this[i] == \\\"function\\\" ? R._removedFactory(i) : null;\\r\\n        }\\r\\n        this.removed = true;\\r\\n    };\\r\\n    elproto.attr = function (name, value) {\\r\\n        if (this.removed) {\\r\\n            return this;\\r\\n        }\\r\\n        if (name == null) {\\r\\n            var res = {};\\r\\n            for (var a in this.attrs) if (this.attrs[has](a)) {\\r\\n                res[a] = this.attrs[a];\\r\\n            }\\r\\n            res.gradient && res.fill == \\\"none\\\" && (res.fill = res.gradient) && delete res.gradient;\\r\\n            res.transform = this._.transform;\\r\\n            return res;\\r\\n        }\\r\\n        if (value == null && R.is(name, \\\"string\\\")) {\\r\\n            if (name == fillString && this.attrs.fill == \\\"none\\\" && this.attrs.gradient) {\\r\\n                return this.attrs.gradient;\\r\\n            }\\r\\n            var names = name.split(separator),\\r\\n                out = {};\\r\\n            for (var i = 0, ii = names.length; i < ii; i++) {\\r\\n                name = names[i];\\r\\n                if (name in this.attrs) {\\r\\n                    out[name] = this.attrs[name];\\r\\n                } else if (R.is(this.paper.customAttributes[name], \\\"function\\\")) {\\r\\n                    out[name] = this.paper.customAttributes[name].def;\\r\\n                } else {\\r\\n                    out[name] = R._availableAttrs[name];\\r\\n                }\\r\\n            }\\r\\n            return ii - 1 ? out : out[names[0]];\\r\\n        }\\r\\n        if (this.attrs && value == null && R.is(name, \\\"array\\\")) {\\r\\n            out = {};\\r\\n            for (i = 0, ii = name.length; i < ii; i++) {\\r\\n                out[name[i]] = this.attr(name[i]);\\r\\n            }\\r\\n            return out;\\r\\n        }\\r\\n        var params;\\r\\n        if (value != null) {\\r\\n            params = {};\\r\\n            params[name] = value;\\r\\n        }\\r\\n        value == null && R.is(name, \\\"object\\\") && (params = name);\\r\\n        for (var key in params) {\\r\\n            eve(\\\"raphael.attr.\\\" + key + \\\".\\\" + this.id, this, params[key]);\\r\\n        }\\r\\n        if (params) {\\r\\n            for (key in this.paper.customAttributes) if (this.paper.customAttributes[has](key) && params[has](key) && R.is(this.paper.customAttributes[key], \\\"function\\\")) {\\r\\n                var par = this.paper.customAttributes[key].apply(this, [].concat(params[key]));\\r\\n                this.attrs[key] = params[key];\\r\\n                for (var subkey in par) if (par[has](subkey)) {\\r\\n                    params[subkey] = par[subkey];\\r\\n                }\\r\\n            }\\r\\n            // this.paper.canvas.style.display = \\\"none\\\";\\r\\n            if (params.text && this.type == \\\"text\\\") {\\r\\n                this.textpath.string = params.text;\\r\\n            }\\r\\n            setFillAndStroke(this, params);\\r\\n            // this.paper.canvas.style.display = E;\\r\\n        }\\r\\n        return this;\\r\\n    };\\r\\n    elproto.toFront = function () {\\r\\n        !this.removed && this.node.parentNode.appendChild(this.node);\\r\\n        this.paper && this.paper.top != this && R._tofront(this, this.paper);\\r\\n        return this;\\r\\n    };\\r\\n    elproto.toBack = function () {\\r\\n        if (this.removed) {\\r\\n            return this;\\r\\n        }\\r\\n        if (this.node.parentNode.firstChild != this.node) {\\r\\n            this.node.parentNode.insertBefore(this.node, this.node.parentNode.firstChild);\\r\\n            R._toback(this, this.paper);\\r\\n        }\\r\\n        return this;\\r\\n    };\\r\\n    elproto.insertAfter = function (element) {\\r\\n        if (this.removed) {\\r\\n            return this;\\r\\n        }\\r\\n        if (element.constructor == R.st.constructor) {\\r\\n            element = element[element.length - 1];\\r\\n        }\\r\\n        if (element.node.nextSibling) {\\r\\n            element.node.parentNode.insertBefore(this.node, element.node.nextSibling);\\r\\n        } else {\\r\\n            element.node.parentNode.appendChild(this.node);\\r\\n        }\\r\\n        R._insertafter(this, element, this.paper);\\r\\n        return this;\\r\\n    };\\r\\n    elproto.insertBefore = function (element) {\\r\\n        if (this.removed) {\\r\\n            return this;\\r\\n        }\\r\\n        if (element.constructor == R.st.constructor) {\\r\\n            element = element[0];\\r\\n        }\\r\\n        element.node.parentNode.insertBefore(this.node, element.node);\\r\\n        R._insertbefore(this, element, this.paper);\\r\\n        return this;\\r\\n    };\\r\\n    elproto.blur = function (size) {\\r\\n        var s = this.node.runtimeStyle,\\r\\n            f = s.filter;\\r\\n        f = f.replace(blurregexp, E);\\r\\n        if (+size !== 0) {\\r\\n            this.attrs.blur = size;\\r\\n            s.filter = f + S + ms + \\\".Blur(pixelradius=\\\" + (+size || 1.5) + \\\")\\\";\\r\\n            s.margin = R.format(\\\"-{0}px 0 0 -{0}px\\\", round(+size || 1.5));\\r\\n        } else {\\r\\n            s.filter = f;\\r\\n            s.margin = 0;\\r\\n            delete this.attrs.blur;\\r\\n        }\\r\\n        return this;\\r\\n    };\\r\\n\\r\\n    R._engine.path = function (pathString, vml) {\\r\\n        var el = createNode(\\\"shape\\\");\\r\\n        el.style.cssText = cssDot;\\r\\n        el.coordsize = zoom + S + zoom;\\r\\n        el.coordorigin = vml.coordorigin;\\r\\n        var p = new Element(el, vml),\\r\\n            attr = {fill: \\\"none\\\", stroke: \\\"#000\\\"};\\r\\n        pathString && (attr.path = pathString);\\r\\n        p.type = \\\"path\\\";\\r\\n        p.path = [];\\r\\n        p.Path = E;\\r\\n        setFillAndStroke(p, attr);\\r\\n        vml.canvas.appendChild(el);\\r\\n        var skew = createNode(\\\"skew\\\");\\r\\n        skew.on = true;\\r\\n        el.appendChild(skew);\\r\\n        p.skew = skew;\\r\\n        p.transform(E);\\r\\n        return p;\\r\\n    };\\r\\n    R._engine.rect = function (vml, x, y, w, h, r) {\\r\\n        var path = R._rectPath(x, y, w, h, r),\\r\\n            res = vml.path(path),\\r\\n            a = res.attrs;\\r\\n        res.X = a.x = x;\\r\\n        res.Y = a.y = y;\\r\\n        res.W = a.width = w;\\r\\n        res.H = a.height = h;\\r\\n        a.r = r;\\r\\n        a.path = path;\\r\\n        res.type = \\\"rect\\\";\\r\\n        return res;\\r\\n    };\\r\\n    R._engine.ellipse = function (vml, x, y, rx, ry) {\\r\\n        var res = vml.path(),\\r\\n            a = res.attrs;\\r\\n        res.X = x - rx;\\r\\n        res.Y = y - ry;\\r\\n        res.W = rx * 2;\\r\\n        res.H = ry * 2;\\r\\n        res.type = \\\"ellipse\\\";\\r\\n        setFillAndStroke(res, {\\r\\n            cx: x,\\r\\n            cy: y,\\r\\n            rx: rx,\\r\\n            ry: ry\\r\\n        });\\r\\n        return res;\\r\\n    };\\r\\n    R._engine.circle = function (vml, x, y, r) {\\r\\n        var res = vml.path(),\\r\\n            a = res.attrs;\\r\\n        res.X = x - r;\\r\\n        res.Y = y - r;\\r\\n        res.W = res.H = r * 2;\\r\\n        res.type = \\\"circle\\\";\\r\\n        setFillAndStroke(res, {\\r\\n            cx: x,\\r\\n            cy: y,\\r\\n            r: r\\r\\n        });\\r\\n        return res;\\r\\n    };\\r\\n    R._engine.image = function (vml, src, x, y, w, h) {\\r\\n        var path = R._rectPath(x, y, w, h),\\r\\n            res = vml.path(path).attr({stroke: \\\"none\\\"}),\\r\\n            a = res.attrs,\\r\\n            node = res.node,\\r\\n            fill = node.getElementsByTagName(fillString)[0];\\r\\n        a.src = src;\\r\\n        res.X = a.x = x;\\r\\n        res.Y = a.y = y;\\r\\n        res.W = a.width = w;\\r\\n        res.H = a.height = h;\\r\\n        a.path = path;\\r\\n        res.type = \\\"image\\\";\\r\\n        fill.parentNode == node && node.removeChild(fill);\\r\\n        fill.rotate = true;\\r\\n        fill.src = src;\\r\\n        fill.type = \\\"tile\\\";\\r\\n        res._.fillpos = [x, y];\\r\\n        res._.fillsize = [w, h];\\r\\n        node.appendChild(fill);\\r\\n        setCoords(res, 1, 1, 0, 0, 0);\\r\\n        return res;\\r\\n    };\\r\\n    R._engine.text = function (vml, x, y, text) {\\r\\n        var el = createNode(\\\"shape\\\"),\\r\\n            path = createNode(\\\"path\\\"),\\r\\n            o = createNode(\\\"textpath\\\");\\r\\n        x = x || 0;\\r\\n        y = y || 0;\\r\\n        text = text || \\\"\\\";\\r\\n        path.v = R.format(\\\"m{0},{1}l{2},{1}\\\", round(x * zoom), round(y * zoom), round(x * zoom) + 1);\\r\\n        path.textpathok = true;\\r\\n        o.string = Str(text);\\r\\n        o.on = true;\\r\\n        el.style.cssText = cssDot;\\r\\n        el.coordsize = zoom + S + zoom;\\r\\n        el.coordorigin = \\\"0 0\\\";\\r\\n        var p = new Element(el, vml),\\r\\n            attr = {\\r\\n                fill: \\\"#000\\\",\\r\\n                stroke: \\\"none\\\",\\r\\n                font: R._availableAttrs.font,\\r\\n                text: text\\r\\n            };\\r\\n        p.shape = el;\\r\\n        p.path = path;\\r\\n        p.textpath = o;\\r\\n        p.type = \\\"text\\\";\\r\\n        p.attrs.text = Str(text);\\r\\n        p.attrs.x = x;\\r\\n        p.attrs.y = y;\\r\\n        p.attrs.w = 1;\\r\\n        p.attrs.h = 1;\\r\\n        setFillAndStroke(p, attr);\\r\\n        el.appendChild(o);\\r\\n        el.appendChild(path);\\r\\n        vml.canvas.appendChild(el);\\r\\n        var skew = createNode(\\\"skew\\\");\\r\\n        skew.on = true;\\r\\n        el.appendChild(skew);\\r\\n        p.skew = skew;\\r\\n        p.transform(E);\\r\\n        return p;\\r\\n    };\\r\\n    R._engine.setSize = function (width, height) {\\r\\n        var cs = this.canvas.style;\\r\\n        this.width = width;\\r\\n        this.height = height;\\r\\n        width == +width && (width += \\\"px\\\");\\r\\n        height == +height && (height += \\\"px\\\");\\r\\n        cs.width = width;\\r\\n        cs.height = height;\\r\\n        cs.clip = \\\"rect(0 \\\" + width + \\\" \\\" + height + \\\" 0)\\\";\\r\\n        if (this._viewBox) {\\r\\n            R._engine.setViewBox.apply(this, this._viewBox);\\r\\n        }\\r\\n        return this;\\r\\n    };\\r\\n    R._engine.setViewBox = function (x, y, w, h, fit) {\\r\\n        R.eve(\\\"raphael.setViewBox\\\", this, this._viewBox, [x, y, w, h, fit]);\\r\\n        var paperSize = this.getSize(),\\r\\n            width = paperSize.width,\\r\\n            height = paperSize.height,\\r\\n            H, W;\\r\\n        if (fit) {\\r\\n            H = height / h;\\r\\n            W = width / w;\\r\\n            if (w * H < width) {\\r\\n                x -= (width - w * H) / 2 / H;\\r\\n            }\\r\\n            if (h * W < height) {\\r\\n                y -= (height - h * W) / 2 / W;\\r\\n            }\\r\\n        }\\r\\n        this._viewBox = [x, y, w, h, !!fit];\\r\\n        this._viewBoxShift = {\\r\\n            dx: -x,\\r\\n            dy: -y,\\r\\n            scale: paperSize\\r\\n        };\\r\\n        this.forEach(function (el) {\\r\\n            el.transform(\\\"...\\\");\\r\\n        });\\r\\n        return this;\\r\\n    };\\r\\n    var createNode;\\r\\n    R._engine.initWin = function (win) {\\r\\n        var doc = win.document;\\r\\n        if (doc.styleSheets.length < 31) {\\r\\n            doc.createStyleSheet().addRule(\\\".rvml\\\", \\\"behavior:url(#default#VML)\\\");\\r\\n        } else {\\r\\n            // no more room, add to the existing one\\r\\n            // http://msdn.microsoft.com/en-us/library/ms531194%28VS.85%29.aspx\\r\\n            doc.styleSheets[0].addRule(\\\".rvml\\\", \\\"behavior:url(#default#VML)\\\");\\r\\n        }\\r\\n        try {\\r\\n            !doc.namespaces.rvml && doc.namespaces.add(\\\"rvml\\\", \\\"urn:schemas-microsoft-com:vml\\\");\\r\\n            createNode = function (tagName) {\\r\\n                return doc.createElement('<rvml:' + tagName + ' class=\\\"rvml\\\">');\\r\\n            };\\r\\n        } catch (e) {\\r\\n            createNode = function (tagName) {\\r\\n                return doc.createElement('<' + tagName + ' xmlns=\\\"urn:schemas-microsoft.com:vml\\\" class=\\\"rvml\\\">');\\r\\n            };\\r\\n        }\\r\\n    };\\r\\n    R._engine.initWin(R._g.win);\\r\\n    R._engine.create = function () {\\r\\n        var con = R._getContainer.apply(0, arguments),\\r\\n            container = con.container,\\r\\n            height = con.height,\\r\\n            s,\\r\\n            width = con.width,\\r\\n            x = con.x,\\r\\n            y = con.y;\\r\\n        if (!container) {\\r\\n            throw new Error(\\\"VML container not found.\\\");\\r\\n        }\\r\\n        var res = new R._Paper,\\r\\n            c = res.canvas = R._g.doc.createElement(\\\"div\\\"),\\r\\n            cs = c.style;\\r\\n        x = x || 0;\\r\\n        y = y || 0;\\r\\n        width = width || 512;\\r\\n        height = height || 342;\\r\\n        res.width = width;\\r\\n        res.height = height;\\r\\n        width == +width && (width += \\\"px\\\");\\r\\n        height == +height && (height += \\\"px\\\");\\r\\n        res.coordsize = zoom * 1e3 + S + zoom * 1e3;\\r\\n        res.coordorigin = \\\"0 0\\\";\\r\\n        res.span = R._g.doc.createElement(\\\"span\\\");\\r\\n        res.span.style.cssText = \\\"position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;\\\";\\r\\n        c.appendChild(res.span);\\r\\n        cs.cssText = R.format(\\\"top:0;left:0;display:inline-block;position:absolute;clip:rect(0 {0} {1} 0);\\\", width, height);\\r\\n        if (container == 1) {\\r\\n            R._g.doc.body.appendChild(c);\\r\\n            cs.left = x + \\\"px\\\";\\r\\n            cs.top = y + \\\"px\\\";\\r\\n            cs.position = \\\"absolute\\\";\\r\\n        } else {\\r\\n            if (container.firstChild) {\\r\\n                container.insertBefore(c, container.firstChild);\\r\\n            } else {\\r\\n                container.appendChild(c);\\r\\n            }\\r\\n        }\\r\\n        res.renderfix = function () {};\\r\\n        return res;\\r\\n    };\\r\\n    R.prototype.clear = function () {\\r\\n        R.eve(\\\"raphael.clear\\\", this);\\r\\n        this.canvas.innerHTML = E;\\r\\n        this.span = R._g.doc.createElement(\\\"span\\\");\\r\\n        this.span.style.cssText = \\\"position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;\\\";\\r\\n        this.canvas.appendChild(this.span);\\r\\n        this.bottom = this.top = null;\\r\\n    };\\r\\n    R.prototype.remove = function () {\\r\\n        R.eve(\\\"raphael.remove\\\", this);\\r\\n        this.canvas.parentNode.removeChild(this.canvas);\\r\\n        for (var i in this) {\\r\\n            this[i] = typeof this[i] == \\\"function\\\" ? R._removedFactory(i) : null;\\r\\n        }\\r\\n        return true;\\r\\n    };\\r\\n\\r\\n    var setproto = R.st;\\r\\n    for (var method in elproto) if (elproto[has](method) && !setproto[has](method)) {\\r\\n        setproto[method] = (function (methodname) {\\r\\n            return function () {\\r\\n                var arg = arguments;\\r\\n                return this.forEach(function (el) {\\r\\n                    el[methodname].apply(el, arg);\\r\\n                });\\r\\n            };\\r\\n        })(method);\\r\\n    }\\r\\n}));\\r\\n\\r\\n// ┌────────────────────────────────────────────────────────────────────┐ \\\\\\\\\\r\\n// │ Raphaël 2.1.4 - JavaScript Vector Library                      │ \\\\\\\\\\r\\n// ├────────────────────────────────────────────────────────────────────┤ \\\\\\\\\\r\\n// │ Copyright © 2008-2012 Dmitry Baranovskiy (http://raphaeljs.com)    │ \\\\\\\\\\r\\n// │ Copyright © 2008-2012 Sencha Labs (http://sencha.com)              │ \\\\\\\\\\r\\n// ├────────────────────────────────────────────────────────────────────┤ \\\\\\\\\\r\\n// │ Licensed under the MIT (http://raphaeljs.com/license.html) license.│ \\\\\\\\\\r\\n// └────────────────────────────────────────────────────────────────────┘ \\\\\\\\\\r\\n\\r\\n(function (glob, factory) {\\r\\n    if (typeof define === \\\"function\\\" && define.amd) {\\r\\n        define(\\\"raphael\\\", [\\\"raphael.core\\\", \\\"raphael.svg\\\", \\\"raphael.vml\\\"], function(Raphael) {\\r\\n            return factory(Raphael);\\r\\n        });\\r\\n    } else if (typeof exports === \\\"object\\\") {\\r\\n        var raphael = require(\\\"raphael.core\\\");\\r\\n\\r\\n        require(\\\"raphael.svg\\\");\\r\\n        require(\\\"raphael.vml\\\");\\r\\n\\r\\n        module.exports = factory(raphael);\\r\\n    } else {\\r\\n        //glob.Raphael = factory(glob.Raphael);\\r\\n    }\\r\\n}(this, function (Raphael) {\\r\\n    return Raphael.ninja();\\r\\n}));\"","BI.resourceURL = \"file?path=/com/fr/web/ui/resource/\";"],"sourceRoot":""}