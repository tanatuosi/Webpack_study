{"version":3,"file":"copyright_mark.js","sourceRoot":"","sources":["../../../../src/modules/components/copyright_mark/copyright_mark.ts"],"names":[],"mappings":"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","sourcesContent":["import { shortcut } from '@engine/core';\nimport jss from 'jss';\nimport './copyright_mark.less';\n\n@shortcut()\nexport class CopyrightMark extends BI.Widget {\n    public static xtype = 'report.core.copyrightmark';\n\n    public props: {\n        renderItem(): any;\n        copyright: CopyrightMarkStyle;\n    }\n\n    public render() {\n        const { text, color, backgroundColor, alpha, fontSize, url } = this.options.copyright;\n        const copyrightMarkStyle = jss\n            .createStyleSheet(\n                {\n                    copyright: {\n                        background: backgroundColor,\n                        opacity: alpha,\n                        'font-size': `${fontSize}px`,\n                    },\n                    font: {\n                        color,\n                    },\n                },\n            )\n            .attach();\n        \n        return !url\n            ? {\n                type: BI.AbsoluteLayout.xtype,\n                cls: 'report-core-copyrightmark',\n                items: [{\n                    el: {\n                        type: BI.Label.xtype,\n                        cls: `copyright-lable copyright-unreachable ${copyrightMarkStyle.classes.copyright} ${copyrightMarkStyle.classes.font}`,\n                        text,\n                        fontSize,\n                        hgap: 10,\n                        vgap: 10,\n                    },\n                    bottom: 10,\n                    right: 10,\n                }, {\n                    el: this.options.renderItem(),\n                    top: 0,\n                    bottom: 0,\n                    left: 0,\n                    right: 0,\n                }],\n            }\n            : {\n                type: BI.AbsoluteLayout.xtype,\n                cls: 'report-core-copyrightmark',\n                items: [{\n                    el: this.options.renderItem(),\n                    top: 0,\n                    bottom: 0,\n                    left: 0,\n                    right: 0,\n                }, {\n                    el: {\n                        type: BI.VerticalAdaptLayout.xtype,\n                        cls: `copyright-lable ${copyrightMarkStyle.classes.copyright}`,\n                        items: [{\n                            type: BI.A.xtype,\n                            href: url,\n                            cls: `${copyrightMarkStyle.classes.font}`,\n                            text,\n                            fontSize,\n                        }, {\n                            type: BI.A.xtype,\n                            cls: 'copyright-link',\n                            href: 'https://help.fanruan.com/finereport/doc-view-281.html',\n                            text: BI.i18nText('Fine-Report_Trial_Mode'),\n                            fontSize,\n                        }],\n                        hgap: 10,\n                        vgap: 10,\n                    },\n                    bottom: 10,\n                    right: 10,\n                }],\n            };\n    }\n}\n\nexport function copyright() {\n    return function (_target: any, _propertyKey: string, descriptor: PropertyDescriptor) {\n        const render = descriptor.value;\n\n        descriptor.value = function(this:any, ...args: any[]) {\n            const { WidgetCopyrightMark: copyright } = this.options;\n\n            return copyright ? {\n                type: CopyrightMark.xtype,\n                copyright: {\n                    color: '#7a7e85',\n                    backgroundColor: 'rgb(238, 240, 243)',\n                    alpha: 0.7,\n                    fontSize: 12,\n                    ...copyright,\n                },\n                renderItem: () => render.apply(this, args),\n            } : render.apply(this, args);\n        };\n        \n        return descriptor;\n    };\n}\n\nexport interface CopyrightMarkStyle {\n    alpha: number;\n    backgroundColor: string;\n    color: string;\n    fontSize: string;\n    text: string;\n    url?: string;\n}\n"]}