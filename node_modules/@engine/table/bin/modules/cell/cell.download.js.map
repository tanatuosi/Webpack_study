{"version":3,"file":"cell.download.js","sourceRoot":"","sources":["../../../src/modules/cell/cell.download.ts"],"names":[],"mappings":"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","sourcesContent":["import { Cell } from '@fui/sheet/types';\nimport { DEFAUTL_LINK_TYPE, linkHandlerProvider } from '@engine/link';\nimport { CellType, XCelladvancedattr } from '../table.types';\nimport { AbstractTableCell } from './cell.abstract';\n\nexport class DownloadTableCell extends AbstractTableCell {\n    protected toFullCell(): CellType {\n        const { style, cell, celladvancedattr } = this.options;\n        const cellText = (celladvancedattr as DownloadCellAdvancedattr)?.fileName || '';\n        const {\n            contentStyle,\n            borderStyle,\n            backgroundStyle,\n            paddingLeft,\n            paddingRight,\n            spacingBefore,\n            spacingAfter,\n        } = style;\n        const hyperLinks = [linkHandlerProvider.getHandler({\n            type: DEFAUTL_LINK_TYPE.DOWNLOAD,\n            name: BI.UUID(),\n            id: cell.attach_id,\n        })];\n        if (contentStyle) {\n            contentStyle.underline = {\n                width: 1,\n                style: 'solid',\n                color: '#0000ff',\n                dash: [],\n            };\n            contentStyle.color = '#0000ff';\n        }\n        \n        \n        return {\n            type: BI.AbsoluteLayout.xtype,\n            items: [\n                {\n                    el: {\n                        type: BI.Label.xtype,\n                        style: contentStyle,\n                        listeners: [\n                            {\n                                eventName: 'CELL_CLICK',\n                                action: (e: Event, x: number, y: number, cell: Cell) => {\n                                    this.fireEvent('CELL_CLICK', { e, x, y, cell, hyperLinks, id: this.id });\n            \n                                    return true;\n                                },\n                            },\n                        ],\n                        text: cellText,\n                        autoWrapInfo: cell.autoWrapInfo,\n                    },\n                    left: paddingLeft,\n                    right: paddingRight,\n                    top: spacingBefore,\n                    bottom: spacingAfter,\n                },\n            ],\n            listeners: [\n                {\n                    eventName: 'CELL_HOVER',\n                    action: (e: Event, x: number, y: number, cell: Cell) => {\n                        this.fireEvent('CELL_HOVER', { e, x, y, cell });\n                    },\n                },\n                {\n                    eventName: 'CELL_MOUSE_LEAVE',\n                    action: (e: Event, x: number, y: number, cell: Cell) => {\n                        this.fireEvent('CELL_MOUSE_LEAVE', { e, x, y, cell });\n                    },\n                },\n                {\n                    eventName: 'CELL_MOUSE_DOWN',\n                    action: (e: Event, x: number, y: number, cell: Cell) => {\n                        this.fireEvent('CELL_MOUSE_DOWN', { e, x, y, cell });\n                    },\n                },\n            ],\n            backgroundStyle,\n            borderStyle,\n            value: cellText,\n            position: cell.position,\n            canCopy: true,\n            cursor: 'pointer',\n            valid: cell.valid,\n            title: celladvancedattr?.tooltipText,\n        };\n    }\n\n    // 不支持控件\n    public toWidget() {\n        return undefined;\n    }\n}\n\ntype DownloadCellAdvancedattr = (NonNullable<XCelladvancedattr> & {\n    fileName?: string;\n}) | undefined;\n"]}