{"version":3,"file":"cell_controller.combo.js","sourceRoot":"","sources":["../../../../../src/modules/cell/cell_controllers/combo/cell_controller.combo.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAA,OAAO,EAAE,MAAM,EAAE,kBAAkB,EAAE,KAAK,EAAE,MAAM,oBAAoB,CAAC;AACvE,OAAO,EAAc,QAAQ,EAAE,MAAM,cAAc,CAAC;AACpD,OAAO,EAAE,qCAAqC,EAAE,MAAM,6BAA6B,CAAC;AACpF,OAAO,EAAE,yBAAyB,EAAE,wBAAwB,EAAE,MAAM,yBAAyB,CAAC;AAG9F,IAAa,SAAS,GAAtB,MAAa,SAAU,SAAQ,qCAAqC;IAApE;;QAGW,UAAK,GAWR;YACA,KAAK,EAAE,KAAK;YACZ,MAAM,EAAE,MAAM;YACd,QAAQ,EAAE,EAAE;YACZ,WAAW,EAAE,CAAC;YACd,QAAQ,EAAE;gBACN,GAAG,EAAE,CAAC;gBACN,MAAM,EAAE,CAAC;aACZ;YACD,UAAU,EAAE,EAAE;YACd,OAAO,EAAE,EAAE;SACd,CAAA;IAoFL,CAAC;IAhFU,MAAM;QACT,MAAM,KAA0D,IAAI,CAAC,OAAO,EAAtE,EAAE,UAAU,EAAE,QAAQ,EAAE,WAAW,EAAE,OAAO,OAA0B,EAArB,IAAI,cAArD,oDAAuD,CAAe,CAAC;QAE7E,OAAO,gCACA,IAAI,KACP,UAAU,EAAE,IAAI,EAChB,IAAI,EAAE,kBAAkB,CAAC,KAAK,EAC9B,GAAG,EAAE,CAAC,GAAuB,EAAE,EAAE;gBAC7B,IAAI,CAAC,KAAK,GAAG,GAAG,CAAC;YACrB,CAAC,EACD,SAAS,EAAE,UAAU,EACrB,mBAAmB,EAAE,KAAK,EAC1B,kBAAkB,EAAE,yBAAyB,EAC7C,eAAe,EAAE,GAAG,EAAE;gBAClB,OAAO;oBACH,QAAQ,kCACD,QAAQ,KACX,WAAW,GACd;iBACJ,CAAC;YACN,CAAC,EACD,gBAAgB,EAAE,wBAAwB,EAC1C,YAAY,CAA2B,EAAY;gBAC/C,IAAI,CAAC,yBAAyB,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC;qBAC7C,IAAI,CAAC,GAAG,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC;YAC1B,CAAC,GACJ,CAAC;IACN,CAAC;IAED,qBAAqB;IACd,OAAO,KAAI,CAAC;IAEZ,QAAQ;QACX,OAAO,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC;IACjC,CAAC;IAEM,iBAAiB;QACpB,OAAO,IAAI,CAAC,KAAK,CAAC,iBAAiB,EAAE,CAAC;IAC1C,CAAC;IAEM,gBAAgB;QACnB,OAAO,IAAI,CAAC,KAAK,CAAC,gBAAgB,EAAE,CAAC;IACzC,CAAC;IAEM,KAAK,CAAC,kBAAkB,CAAC,CAAM,EAAE,WAGzB;QACX,MAAM,IAAI,CAAC,KAAK,CAAC,kBAAkB,CAAC,CAAC,EAAE,WAAW,CAAC,CAAC;IACxD,CAAC;IAEM,KAAK;QACR,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC;IACvB,CAAC;IAEM,oBAAoB;QACvB,OAAO,IAAI,CAAC,KAAK,CAAC,oBAAoB,EAAE,CAAC;IAC7C,CAAC;IAEM,gBAAgB,CAAC,CAAqE;QACzF,IAAI,CAAC,KAAK,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC;IACnC,CAAC;IAEM,iBAAiB;QACpB,IAAI,CAAC,KAAK,CAAC,iBAAiB,EAAE,CAAC;IACnC,CAAC;IAEM,UAAU;QACb,OAAO,IAAI,CAAC,KAAK,CAAC,UAAU,EAAE,CAAC;IACnC,CAAC;IAEM,QAAQ,KAAI,CAAC;IAEb,KAAK;QACR,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC;IACvB,CAAC;IAEM,IAAI;QACP,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;IACtB,CAAC;CACJ,CAAA;AA5GiB,eAAK,GAAG,yCAAyC,CAAC;AADvD,SAAS;IADrB,QAAQ,EAAE;GACE,SAAS,CA6GrB;SA7GY,SAAS","sourcesContent":["import { HEIGHT, ParameterComboNext, WIDTH } from '@engine/controller';\nimport { FrListener, shortcut } from '@engine/core';\nimport { AbstractParameterCellControllerWidget } from '../cell_controller.abstract';\nimport { fetchCellComboControlAttr, fetchCellWidgetViewValue } from '../cell_controller.crud';\n\n@shortcut()\nexport class CellCombo extends AbstractParameterCellControllerWidget {\n    public static xtype = 'report.main.table_cell.controller.combo';\n\n    public props: {\n        position: {\n            row: number;\n            column: number;\n        };\n        reportIndex: number;\n        xlisteners: FrListener[];\n        width: number;\n        height: number;\n        fontSize: number;\n        baseCls: string;\n    } = {\n        width: WIDTH,\n        height: HEIGHT,\n        fontSize: 12,\n        reportIndex: 0,\n        position: {\n            row: 0,\n            column: 0,\n        },\n        xlisteners: [],\n        baseCls: '',\n    }\n\n    private combo: ParameterComboNext;\n\n    public render() {\n        const { xlisteners, position, reportIndex, baseCls, ...opts } = this.options;\n\n        return <Partial<ParameterComboNext['props']>>{\n            ...opts,\n            allowCount: true,\n            type: ParameterComboNext.xtype,\n            ref: (ref: ParameterComboNext) => {\n                this.combo = ref;\n            },\n            listeners: xlisteners,\n            needCheckCustomData: false,\n            controlAttrFetcher: fetchCellComboControlAttr,\n            extraOptsGetter: () => {\n                return {\n                    location: {\n                        ...position,\n                        reportIndex,\n                    },\n                };\n            },\n            viewValueFetcher: fetchCellWidgetViewValue,\n            beforeRender(this: ParameterComboNext, cb: Function) {\n                this.updateControllAttrByValue(this.options.value)\n                    .then(() => cb());\n            },\n        };\n    }\n\n    // 复写父类不触发afterinit事件\n    public mounted() {}\n\n    public getValue() {\n        return this.combo.getValue();\n    }\n\n    public postGetValidation() {\n        return this.combo.postGetValidation();\n    }\n\n    public preGetValidation() {\n        return this.combo.preGetValidation();\n    }\n\n    public async setControllerValue(v: any, controlData?: {\n        text: string;\n        value: string | number;\n    }[] | undefined) {\n        await this.combo.setControllerValue(v, controlData);\n    }\n\n    public reset() {\n        this.combo.reset();\n    }\n\n    public postValidateAndToast() {\n        return this.combo.postValidateAndToast();\n    }\n\n    public setInteractValue(v: { data: { text: string; value: string | number; }[]; value: any; }) {\n        this.combo.setInteractValue(v);\n    }\n\n    public reloadControlAttr() {\n        this.combo.reloadControlAttr();\n    }\n\n    public getAdapter() {\n        return this.combo.getAdapter();\n    }\n\n    public setStyle() {}\n\n    public focus() {\n        this.combo.focus();\n    }\n\n    public blur() {\n        this.combo.blur();\n    }\n}\n"]}