{"version":3,"file":"handler.abstract.js","sourceRoot":"","sources":["../../../src/modules/handler/handler.abstract.ts"],"names":[],"mappings":"AAIA,MAAM,OAAgB,mBAAmB;IAuBrC,YAAmB,eAAuC;QACtD,IAAI,CAAC,eAAe,GAAG,eAAe,CAAC;IAC3C,CAAC;IAED,IAAc,SAAS;QACnB,OAAO,IAAI,CAAC,eAAe,CAAC,YAAY,EAAE,CAAC;IAC/C,CAAC;IAES,WAAW,CAAC,EAAW;QAC7B,IAAI,CAAC,EAAE;YAAE,OAAO;QAEhB,MAAM,WAAW,GAAG,IAAI,CAAC,SAAS,CAAC;QAEnC,IAAI,YAAoC,CAAC;QAEzC,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE;YAChD,IAAI,QAAQ,CAAC,EAAE,KAAK,EAAE,EAAE;gBACpB,YAAY,GAAG,QAAQ,CAAC;gBAExB,OAAO,IAAI,CAAC;aACf;YAED,OAAO,KAAK,CAAC;QACjB,CAAC,CAAC,CAAC,CAAC;QAEJ,IAAI,CAAC,YAAY,EAAE;YACf,OAAO;SACV;QAED,OAAO,YAAY,CAAC;IACxB,CAAC;CACJ","sourcesContent":["import { Cell } from '@fui/sheet/types';\nimport { PageResult } from '../table.types';\nimport { HandlerExternalContext } from './handler';\n\nexport abstract class AbstractCellHandler {\n    protected externalContext: HandlerExternalContext;\n\n    /**\n     * Handler的名称\n     */\n    abstract name: string;\n\n    /**\n     * 触发事件\n     */\n    abstract eventNames: string[];\n\n    /**\n     * 类型\n     * 'uniqe' 唯一，存在即不会再被注册;\n     * 'covered' 覆盖，新的会覆盖旧的;\n     * '' 正常注册;\n     */\n    abstract merger: string;\n\n    abstract action(args: { e?: Event; x: number; y: number; cell: Cell; [key: string]: any }): void | Promise<any>;\n\n    public constructor(externalContext: HandlerExternalContext) {\n        this.externalContext = externalContext;\n    }\n\n    protected get tableData() {\n        return this.externalContext.getTableData();\n    }\n\n    protected getCellById(id?: string) {\n        if (!id) return;\n\n        const pageResults = this.tableData;\n        \n        let pageCellData: PageResult | undefined;\n\n        pageResults.some(rowData => rowData.some(cellData => {\n            if (cellData.id === id) {\n                pageCellData = cellData;\n    \n                return true;\n            }\n    \n            return false;\n        }));\n    \n        if (!pageCellData) {\n            return;\n        }\n\n        return pageCellData;\n    }\n}\n"]}