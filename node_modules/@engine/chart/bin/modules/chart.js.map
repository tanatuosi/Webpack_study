{"version":3,"file":"chart.js","sourceRoot":"","sources":["../../src/modules/chart.ts"],"names":[],"mappings":"AAGA,OAAO,EAAE,gBAAgB,EAAE,MAAM,uBAAuB,CAAC;AACzD,OAAO,EAAE,eAAe,EAAE,MAAM,sBAAsB,CAAC;AACvD,OAAO,EAAE,gBAAgB,EAAE,MAAM,uBAAuB,CAAC;AACzD,OAAO,EAAE,gBAAgB,EAAE,MAAM,uBAAuB,CAAC;AAUzD,MAAM,OAAO,mBAAmB;IAAhC;QACI;;WAEG;QACK,SAAI,GAAkB;YAC1B,gBAAgB;YAChB,gBAAgB;YAChB,eAAe;YACf,gBAAgB;SACnB,CAAC;QAEM,UAAK,GAAgB,gBAAgB,CAAC;IA4BlD,CAAC;IA1BW,SAAS;QACb,IAAI,IAAI,CAAC,KAAK;YAAE,OAAO;QAEvB,MAAM,EAAE,OAAO,EAAE,SAAS,EAAE,GAAG,SAAS,CAAC;QAEzC,MAAM,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,EAAE,CACvC,OAAO,KAAK,OAAO;YACf,CAAC,CAAC,IAAI,IAAI,CAAC,SAAS,CAAC,IAAI,IAAI,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC;YACzD,CAAC,CAAC,OAAO,IAAI,WAAW,CAAC,OAAO,CACvC,CAAC;QAEF,IAAI,CAAC,KAAK,GAAG,KAAK,IAAI,eAAe,CAAC;IAC1C,CAAC;IAED,IAAW,KAAK;QACZ,IAAI,CAAC,SAAS,EAAE,CAAC;QAEjB,OAAO,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC;IAC5B,CAAC;IAED;;OAEG;IACI,mBAAmB;QACtB,SAAS,CAAC,mBAAmB,EAAE,CAAC;IACpC,CAAC;CACJ;AAED,MAAM,CAAC,MAAM,mBAAmB,GAAG,IAAI,mBAAmB,EAAE,CAAC","sourcesContent":["\nimport { Type } from '@engine/core';\nimport { AbstractReportChart } from './adapter/chart.abstract';\nimport { ReportChartAlpha } from './adapter/chart_alpha';\nimport { ReportChartBeta } from './adapter/chart_beta';\nimport { ReportChartDelta } from './adapter/chart_delta';\nimport { ReportChartGamma } from './adapter/chart_gamma';\n\ntype ReportChart = Type<AbstractReportChart> & {\n    xtype: string;\n\n    VERSION: string;\n\n    BUILD_TIME: string;\n}\n\nexport class ReportChartProvider {\n    /**\n     * 适配类集合，顺序从新到旧\n     */\n    private list: ReportChart[] = [\n        ReportChartDelta,\n        ReportChartGamma,\n        ReportChartBeta,\n        ReportChartAlpha,\n    ];\n\n    private chart: ReportChart = ReportChartAlpha;\n\n    private initChart() {\n        if (this.chart) return;\n\n        const { version, buildTime } = VanCharts;\n\n        const chart = this.list.find(reportChart =>\n            version === '1.0.0'\n                ? new Date(buildTime) >= new Date(reportChart.BUILD_TIME)\n                : version >= reportChart.VERSION,\n        );\n\n        this.chart = chart || ReportChartBeta;\n    }\n\n    public get xtype() {\n        this.initChart();\n\n        return this.chart.xtype;\n    }\n\n    /**\n     * 隐藏全屏图表\n     */\n    public hideFullScreenChart() {\n        VanCharts.hideFullScreenChart();\n    }\n}\n\nexport const reportChartProvider = new ReportChartProvider();\n"]}