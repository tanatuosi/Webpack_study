{"version":3,"file":"multiselectcombo.js","sourceRoot":"","sources":["../../../../src/modules/tag_combo_checkbox/multiselectcombo/multiselectcombo.ts"],"names":[],"mappings":"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","sourcesContent":["import { ParameterMultiSelectTrigger } from './multiselecttrigger';\nimport { shortcut } from '@engine/core';\nimport { ParameterMultiSelectPopup } from './multiselectpopup';\nimport { PopupMaxHeight } from '../../controller.service';\nimport { ParameterMultiSelectSwitcher } from './multiselectswitcher';\nimport { Combo, TriggerIconButton } from '@fui/core';\n\n@shortcut()\nexport class ParameterMultiSelectCombo extends BI.Widget {\n    public static EVENT_CHANGE = 'EVENT_CHANGE';\n    public static EVENT_BEFORE_POPUPVIEW = 'EVENT_BEFORE_POPUPVIEW';\n    public static EVENT_CONFIRM = 'EVENT_CONFIRM';\n    public static xtype = 'report.search_text_value_combo';\n    public static EVENT_BEFORE_EDIT = 'EVENT_BEFORE_EDIT';\n    public static EVENT_AFTER_EDIT = 'EVENT_AFTER_EDIT';\n    public static EVENT_CLICK_ITEM = 'EVENT_CLICK_ITEM';\n    public static EVENT_BLUR = 'EVENT_BLUR';\n\n    private repopulate = false;\n\n    private initialized = false;\n\n    private needResize = false;\n\n    public props = {\n        baseCls: 'bi-search-text-value-combo',\n        height: 24,\n        itemHeightGetter: () => 24,\n        text: '',\n        items: [] as { text: string, value: string }[],\n        tipType: '',\n        warningTitle: '',\n        attributes: {\n            tabIndex: 0,\n        },\n        title: '',\n        value: [] as {text: string;value: string;}[],\n        itemsCreator: BI.emptyFn as (op: any, callback: Function) => void,\n        watermark: '',\n        allowEdit: false,\n        customData: true,\n        allowCount: false,\n    }\n\n    private combo: Combo;\n    \n    private trigger: ParameterMultiSelectTrigger;\n\n    private popup: ParameterMultiSelectPopup;\n\n    private triggerBtn: TriggerIconButton;\n\n    private numberCounter: ParameterMultiSelectSwitcher;\n\n    public render() {\n        const { height, value, text, tipType, warningTitle, title, itemsCreator, watermark, allowEdit, customData, itemHeightGetter, allowCount } = this.options;\n\n        return {\n            type: BI.AbsoluteLayout.xtype,\n            scrollable: false,\n            items: [{\n                el: {\n                    type: BI.Combo.xtype,\n                    adjustLength: 2,\n                    toggle: !allowEdit,\n                    ref: (_ref: Combo) => {\n                        this.combo = _ref;\n                    },\n                    el: {\n                        type: ParameterMultiSelectTrigger.xtype,\n                        customData,\n                        watermark,\n                        allowEdit,\n                        cls: 'search-text-value-trigger bi-border-radius',\n                        ref: (_ref: ParameterMultiSelectTrigger) => {\n                            this.trigger = _ref;\n                        },\n                        height: height - 2,\n                        text,\n                        value,\n                        tipType,\n                        warningTitle,\n                        itemHeightGetter,\n                        itemsCreator,\n                        valueGetter: () => this.popup ? this.popup.getValue() : value,\n                        unmatchedValueGetter: () => this.popup ? this.popup.getUnmatchedValues() : value,\n                        title,\n                        listeners: [{\n                            eventName: ParameterMultiSelectTrigger.EVENT_CONFIRM,\n                            action: () => {\n                                this.combo.hideView();\n                                // this.fireEvent(ParameterMultiSelectCombo.EVENT_CHANGE);\n                            },\n                        }, {\n                            eventName: ParameterMultiSelectTrigger.EVENT_FOCUS,\n                            action: () => {\n                                this.showView();\n                                this.fireEvent(ParameterMultiSelectCombo.EVENT_BEFORE_EDIT);\n                            },\n                        }, {\n                            eventName: ParameterMultiSelectTrigger.EVENT_CHANGE,\n                            action: (text: string, value: string, isSelected: boolean) => {\n                                this.popup.switchState(text, value, isSelected);\n                                this.fireEvent(ParameterMultiSelectCombo.EVENT_CLICK_ITEM);\n                                this.fireEvent(ParameterMultiSelectCombo.EVENT_AFTER_EDIT);\n                            },\n                        }, {\n                            eventName: ParameterMultiSelectTrigger.EVENT_SELECT_ALL,\n                            action: (isSelected: boolean, items: {text: string; value: string}[]) => {\n                                this.popup.switchStates(items, isSelected);\n                                this.fireEvent(ParameterMultiSelectCombo.EVENT_AFTER_EDIT);\n                            },\n                        }, {\n                            eventName: ParameterMultiSelectTrigger.EVENT_CLEAR,\n                            action: () => {\n                                this.reset();\n                            },\n                        }, {\n                            eventName: ParameterMultiSelectTrigger.EVENT_SEARCHING,\n                            action: () => {\n                                this.fireEvent(ParameterMultiSelectCombo.EVENT_AFTER_EDIT);\n                            },\n                        }, {\n                            eventName: ParameterMultiSelectTrigger.EVENT_BLUR,\n                            action: () => {\n                                this.fireEvent(ParameterMultiSelectCombo.EVENT_BLUR);\n                            },\n                        }, {\n                            eventName: ParameterMultiSelectTrigger.EVENT_CLICK,\n                            action: () => {\n                                this.showView();\n                            },\n                        }],\n                    } as Partial<ParameterMultiSelectTrigger['props']>,\n                    popup: {\n                        minWidth: 135,\n                        maxHeight: PopupMaxHeight,\n                        el: {\n                            type: ParameterMultiSelectPopup.xtype,\n                            itemHeightGetter,\n                            itemsCreator,\n                            ref: (_ref: ParameterMultiSelectPopup) => {\n                                this.popup = _ref;\n                                this.trigger.setAdapter(this.popup);\n                            },\n                            repopulateGetter: () => this.repopulate,\n                            listeners: [{\n                                eventName: ParameterMultiSelectPopup.EVENT_CHANGE,\n                                action: () => {\n                                    this.setStateValue(this.popup.getValue());\n                                    this.fireEvent(ParameterMultiSelectCombo.EVENT_CLICK_ITEM);\n                                    this.fireEvent(ParameterMultiSelectCombo.EVENT_AFTER_EDIT);\n                                },\n                            }, {\n                                eventName: ParameterMultiSelectPopup.EVENT_SELECT_ALL,\n                                action: () => {\n                                    this.setValue(this.popup.getValue());\n                                    this.fireEvent(ParameterMultiSelectCombo.EVENT_AFTER_EDIT);\n                                },\n                            }, {\n                                eventName: ParameterMultiSelectPopup.EVENT_CONFIRM,\n                                action: () => {\n                                    this.combo.hideView();\n                                },\n                            }, {\n                                eventName: ParameterMultiSelectPopup.EVENT_CLEAR,\n                                action: () => {\n                                    this.reset();\n                                },\n                            }, {\n                                eventName: ParameterMultiSelectPopup.EVENT_RESIZE,\n                                action: () => {\n                                    this.numberCounter.initSwitcher();\n                                },\n                            }, {\n                                eventName: ParameterMultiSelectPopup.EVENT_SWITCH_STATE,\n                                action: () => {\n                                    this.numberCounter.updateValue();\n                                },\n                            }, {\n                                eventName: ParameterMultiSelectPopup.EVENT_LOADED,\n                                action: () => {\n                                    this.initialized = true;\n                                    BI.nextTick(() => {\n                                        // 视情况更新搜索结果弹窗高度，如果搜索请求先于获取全部字典调用，就需要手动调整\n                                        this.trigger.isSearching() && this.trigger.adjustPopupHeight(this.popup);\n                                    });\n                                },\n                            }, {\n                                eventName: ParameterMultiSelectPopup.EVENT_LOADING,\n                                action: () => {\n                                    this.initialized = false;\n                                },\n                            }],\n                        },\n                        value,\n                    },\n                    listeners: [{\n                        eventName: BI.Combo.EVENT_AFTER_HIDEVIEW,\n                        action: () => {\n                            const keyword = this.trigger.isSearching() ? this.getAdapter().getKeyword() : undefined;\n                            this.trigger.stopEditing();\n                            this.numberCounter.hideView();\n                            this.popup && this.setStateValue(this.popup.getValue());\n                            this.fireEvent(ParameterMultiSelectCombo.EVENT_CONFIRM, keyword);\n                        },\n                    }, {\n                        eventName: BI.Combo.EVENT_BEFORE_POPUPVIEW,\n                        action: () => {\n                            this.fireEvent(ParameterMultiSelectCombo.EVENT_BEFORE_POPUPVIEW);\n\n                            if (this.repopulate) {\n                                this.populate([]);\n\n                                this.repopulate = false;\n                            }\n                        },\n                    }, {\n                        eventName: BI.Combo.EVENT_AFTER_POPUPVIEW,\n                        action: () => {\n                            this.checkResize();\n                        },\n                    }],\n                    hideChecker: (e: any) => this.triggerBtn.element.find(e.target).length === 0 && this.numberCounter.element.find(e.target).length === 0,\n                },\n                left: 0,\n                right: 0,\n                bottom: 0,\n                top: 0,\n            }, {\n                el: {\n                    type: BI.TriggerIconButton.xtype,\n                    cls: 'trigger-icon-button',\n                    ref: (_ref: TriggerIconButton) => {\n                        this.triggerBtn = _ref;\n                    },\n                    width: height,\n                    height,\n                    handler: () => {\n                        this.numberCounter.hideView();\n                        if (this.combo.isViewVisible()) {\n                            this.combo.hideView();\n\n                            return;\n                        }\n\n                        this.showView();\n                        this.fireEvent(ParameterMultiSelectCombo.EVENT_BEFORE_EDIT);\n                    },\n                },\n                right: 0,\n                bottom: 0,\n                top: 0,\n            },\n            {\n                el: {\n                    type: BI.VerticalAdaptLayout.xtype,\n                    invisible: !allowCount,\n                    items: [{\n                        type: ParameterMultiSelectSwitcher.xtype,\n                        valueGetter: () => this.popup ? this.popup.getValue() : this.options.value,\n                        popupGetter: () => this.popup,\n                        itemHeightGetter,\n                        ref: (_ref: ParameterMultiSelectSwitcher) => {\n                            this.numberCounter = _ref;\n                        },\n                        listeners: [{\n                            eventName: ParameterMultiSelectSwitcher.EVENT_CHANGE,\n                            action: () => {\n                                if (!this.combo.isViewVisible()) {\n                                    this.combo.showView();\n                                }\n                            },\n                        }, {\n                            eventName: ParameterMultiSelectSwitcher.EVENT_BEFORE_POPUPVIEW,\n                            action: () => {\n                                this.numberCounter.updateValue();\n                            },\n                        }, {\n                            eventName: BI.Events.VIEW,\n                            action: (visbility: boolean) => {\n                                BI.nextTick(() => {\n                                    if (visbility) {\n                                        this.trigger.refreshPlaceHolderWidth(this.numberCounter.element.outerWidth() * 1.5);\n                                    }\n                                });\n                            },\n                        }],\n                    }],\n                },\n                height,\n                top: 0,\n                right: 24,\n            }],\n        };\n    }\n\n    public reset() {\n        this.popup && this.popup.setAllUnselected();\n        this.setValue([]);\n        this.popup && this.popup.checkAllSelected();\n    }\n\n    public showView() {\n        this.combo.showView();\n    }\n\n    private checkResize() {\n        if (this.popup && this.needResize) {\n            this.popup.resize(true);\n\n            this.needResize = false;\n        }\n    }\n\n    public populate(items: any[]) {\n        this.options.items = items;\n        this.combo.populate();\n    }\n\n    // 仅set状态（trigeer + numberCounter）\n    private setStateValue(v: {text: string, value: string}[] = []) {\n        this.options.value = v;\n        this.trigger.setValue(v);\n        this.numberCounter.setValue(v);\n    }\n\n    public setValue(v: {text: string, value: string}[] = []) {\n        this.options.value = v;\n        this.combo.setValue(v);\n        this.numberCounter.setValue(v);\n    }\n\n    public getValue() {\n        return this.popup ? this.popup.getValue() : this.options.value;\n    }\n\n    public setRepopulate(v: boolean) {\n        this.reset();\n        this.popup && this.popup.resetState();\n        // 如果初始化过，则需要重新初始化\n        if (this.popup && this.initialized) {\n            this.combo.isViewVisible() ? this.combo.populate() : this.repopulate = v;\n\n            this.needResize = true;\n        }\n    }\n\n    public focus() {\n        this.trigger.focus();\n\n        this.combo.showView();\n\n        // TODO: 需要研究下为啥事件没触发\n        this.checkResize();\n    }\n\n    public blur() {\n        this.trigger.blur();\n\n        this.combo.hideView();\n    }\n\n    public getAllButtons() {\n        return this.popup.getAllButtons();\n    }\n\n    public getAdapter() {\n        return this.trigger.getSearcher();\n    }\n\n    public setText(v: string) {\n        this.trigger.setText(v);\n    }\n\n    public addValue(text: string, value: string) {\n        this.popup.switchState(text, value);\n\n        if (!this.combo.isViewVisible()) {\n            this.needResize = true;\n        }\n    }\n\n    public setWaterMark(v: string) {\n        this.trigger.setWaterMark(v);\n    }\n}\n"]}