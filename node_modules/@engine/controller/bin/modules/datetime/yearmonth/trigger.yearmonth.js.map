{"version":3,"file":"trigger.yearmonth.js","sourceRoot":"","sources":["../../../../src/modules/datetime/yearmonth/trigger.yearmonth.ts"],"names":[],"mappings":"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","sourcesContent":["import { SignEditor } from '@fui/core';\nimport { shortcut } from '@engine/core';\nimport { MAX_DATE, MIN_DATE } from '../datetime.constants';\n\nconst constants = {\n    hgap: 4,\n    vgap: 2,\n    compareFormat: '%Y-%X',\n};\n\n@shortcut()\nexport class YearMonthTrigger extends BI.Trigger {\n    public static xtype = 'report.components.dynamic_year_month_trigger';\n\n    public props: {\n\n        /**\n         * 水印\n         */\n        watermark?: string,\n\n        /**\n         * 最小日期\n         */\n        min: string,\n\n        /**\n         * 最大日期\n         */\n        max: string,\n\n        /**\n         * 显示的日期格式化方式\n         */\n        format?: string,\n\n        /**\n         * 是否允许编辑\n         */\n        allowEdit?: true,\n\n        /**\n         * 控件值\n         */\n        value?: {\n            type: 1 | 2,\n            value: {\n                year?: number\n                month?: number\n            }\n        },\n        extraCls: string,\n        height?: number,\n    } = {\n        extraCls: 'bi-year-month-trigger',\n        min: MIN_DATE, // 最小日期\n        max: MAX_DATE, // 最大日期\n        height: 24,\n        format: '', // 显示的日期格式化方式\n        allowEdit: true, // 是否允许编辑\n    }\n\n    private storeTriggerValue: string;\n\n    private editor: SignEditor;\n\n    private storeValue?: {\n        type: 1 | 2,\n        value: {\n            year?: number\n            month?: number\n        },\n    }\n\n    public render () {\n        const { height, allowEdit, watermark } = this.options, { hgap, vgap } = constants;\n\n        this.storeTriggerValue = '';\n\n        return {\n            type: BI.AbsoluteLayout.xtype,\n            items: [{\n                el: {\n                    type: BI.SignEditor.xtype,\n                    height,\n                    validationChecker: (v: string) => {\n                        const formatStr = this.getStandardDateStr(v);\n                        const date = formatStr.match(/\\d+/g);\n                        \n                        return this.dateCheck(formatStr) && BI.checkDateLegal(formatStr) && this.checkVoid({\n                            year: <any>(date ? date[0] : undefined) | 0,\n                            month: <any>(date ? date[1] : undefined) | 0,\n                        });\n                    },\n                    quitChecker () {\n                        return false;\n                    },\n                    ref: (_ref: SignEditor) => {\n                        this.editor = _ref;\n                    },\n                    hgap,\n                    vgap,\n                    allowBlank: true,\n                    watermark: BI.isKey(watermark) ? watermark : BI.i18nText('BI-Basic_Unrestricted'),\n                    title: BI.bind(this.getFormattedTitle, this),\n                    listeners: [{\n                        eventName: 'EVENT_KEY_DOWN',\n                        action: () => {\n                            this.fireEvent('EVENT_KEY_DOWN', arguments);\n                        },\n                    }, {\n                        eventName: 'EVENT_FOCUS',\n                        action: () => {\n                            this.storeTriggerValue = this.getKey();\n                            this.fireEvent('EVENT_FOCUS');\n                        },\n                    }, {\n                        eventName: 'EVENT_BLUR',\n                        action: () => {\n                            this.fireEvent('EVENT_BLUR');\n                        },\n                    }, {\n                        eventName: 'EVENT_STOP',\n                        action: () => {\n                            this.fireEvent('EVENT_STOP');\n                        },\n                    }, {\n                        eventName: 'EVENT_VALID',\n                        action: () => {\n                            this.fireEvent('EVENT_VALID');\n                        },\n                    }, {\n                        eventName: 'EVENT_ERROR',\n                        action: () => {\n                            this.fireEvent('EVENT_ERROR');\n                        },\n                    }, {\n                        eventName: 'EVENT_CONFIRM',\n                        action: () => {\n                            const value = this.editor.getValue();\n                            if (BI.isNotNull(value)) {\n                                this.editor.setState(value);\n                            }\n\n                            if (BI.isNotEmptyString(value) && !BI.isEqual(this.storeTriggerValue, this.getKey())) {\n                                const formatStr = this.getStandardDateStr(value);\n                                const date = formatStr.match(/\\d+/g);\n                                this.storeValue = {\n                                    type: BI.DynamicDateCombo.Static,\n                                    value: {\n                                        year: <any>(date ? date[0] : undefined) | 0,\n                                        month: <any>(date ? date[1] : undefined) | 0,\n                                    },\n                                };\n                            }\n                            this.fireEvent('EVENT_CONFIRM');\n                        },\n                    }, {\n                        eventName: 'EVENT_START',\n                        action: () => {\n                            this.fireEvent('EVENT_START');\n                        },\n                    }, {\n                        eventName: 'EVENT_CHANGE',\n                        action: () => {\n                            this.fireEvent('EVENT_CHANGE');\n                        },\n                    }],\n                },\n                left: 0,\n                right: 24,\n                top: 0,\n                bottom: 0,\n            }, {\n                el: {\n                    type: BI.Layout.xtype,\n                },\n                width: 24,\n                right: 24,\n                top: 0,\n                bottom: 0,\n            }, {\n                el: {\n                    type: BI.Text.xtype,\n                    invisible: allowEdit,\n                    cls: 'show-text',\n                    title: BI.bind(this.getFormattedTitle, this),\n                    hgap: 4,\n                },\n                left: 0,\n                right: 24,\n                top: 0,\n                bottom: 0,\n            }],\n        };\n    }\n\n    public mounted () {\n        this.setValue(this.options.value);\n    }\n\n    private getFormattedTitle () {\n        const { type = BI.DynamicDateCombo.Static, value } = this.storeValue || { type: undefined, value: undefined };\n\n        switch (type) {\n            case BI.DynamicDateCombo.Dynamic:\n                // eslint-disable-next-line no-case-declarations\n                const text = this.getDisplayText(value);\n                // eslint-disable-next-line no-case-declarations\n                const dateStr = BI.print(BI.DynamicDateHelper.getCalculation(value), this.getFormatString());\n\n                return BI.isEmptyString(text) ? dateStr : `${text}:${dateStr}`;\n            case BI.DynamicDateCombo.Static:\n            default:\n                if (BI.isNull(value) || BI.isNull(value.year) || BI.isNull(value.month)) {\n                    return '';\n                }\n                \n                return BI.print(BI.getDate(value.year, value.month - 1, 1), this.getFormatString());\n        }\n    }\n\n    private getStandardDateStr (value: string) {\n        let v = value;\n        const { compareFormat } = constants;\n        let result = [0, 1];\n        const formatArray = this.getFormatString().match(/%./g);\n        BI.each(formatArray || [], (idx, v) => {\n            switch (v) {\n                case '%Y':\n                case '%y':\n                    result[0] = idx;\n                    break;\n                case '%X':\n                case '%x':\n                    result[1] = idx;\n                    break;\n                default:\n                    break;\n            }\n        });\n        // 这边不能直接用\\d+去切日期, 因为format格式可能是201906这样的没有分割符的 = =\n        // 先看一下是否是合法的, 如果合法就变成标准格式的走原来的流程, 不合法不关心\n        const date = BI.parseDateTime(v, this.getFormatString());\n        if (BI.print(date, this.getFormatString()) === v) {\n            v = BI.print(date, compareFormat);\n            result = [0, 1, 2];\n        }\n        const dateArray = v.match(/\\d+/g) || [];\n        const newArray: string[] = [];\n        BI.each(dateArray, idx => {\n            newArray[idx] = dateArray[result[idx]];\n        });\n        // 这边之所以不直接返回join结果是因为年的格式可能只有2位，所以需要format一下\n        if (newArray.length === result.length && newArray[0].length === 2) {\n            return BI.print(BI.parseDateTime(newArray.join('-'), compareFormat), compareFormat);\n        }\n        \n        // 这边format成-20-也没关系, 反正都是不合法的\n        return newArray.join('-');\n    }\n\n    private getFormatString () {\n        return this.options.format || constants.compareFormat;\n    }\n\n    private dateCheck (date: string) {\n        return BI.print(BI.parseDateTime(date, '%Y-%x'), '%Y-%x') === date ||\n            BI.print(BI.parseDateTime(date, '%Y-%X'), '%Y-%X') === date ||\n            BI.print(BI.parseDateTime(date, '%Y-%x'), '%Y-%x') === date ||\n            BI.print(BI.parseDateTime(date, '%Y-%X'), '%Y-%X') === date;\n    }\n\n    private checkVoid (obj: {\n        year: string | number,\n        month: string | number,\n    }) {\n        return !BI.checkDateVoid(obj.year, obj.month, 1, this.options.min, this.options.max)[0];\n    }\n\n    private setInnerValue (date: Date) {\n        const dateStr = BI.print(date, this.getFormatString());\n        this.editor.setState(dateStr);\n        this.editor.setValue(dateStr);\n    }\n\n    private getDisplayText (obj?: {\n        year?: number\n        month?: number\n    }) {\n        let value = '';\n        \n        if (BI.isNull(obj)) {\n            return value;\n        }\n\n        if (BI.isNotNull(obj.year) && BI.parseInt(obj.year) !== 0) {\n            value += `${Math.abs(obj.year)}${BI.i18nText('BI-Basic_Year')}${obj.year < 0 ? BI.i18nText('BI-Basic_Front') : BI.i18nText('BI-Basic_Behind')}`;\n        }\n        if (BI.isNotNull(obj.month) && BI.parseInt(obj.month) !== 0) {\n            value += `${Math.abs(obj.month)}${BI.i18nText('BI-Basic_Month')}${obj.month < 0 ? BI.i18nText('BI-Basic_Front') : BI.i18nText('BI-Basic_Behind')}`;\n        }\n        \n        return value;\n    }\n\n    public setValue (v?: {\n        type: 1 | 2,\n        value: {\n            year?: number\n            month?: number\n        }\n    }) {\n        let type: number = 0, value: {\n            year?: number\n            month?: number\n        } | undefined = undefined;\n        let date = BI.getDate();\n        this.storeValue = v;\n        if (BI.isNotNull(v)) {\n            type = v.type || BI.DynamicDateCombo.Static;\n            value = v.value;\n        }\n        switch (type) {\n            case BI.DynamicDateCombo.Dynamic:\n                date = BI.DynamicDateHelper.getCalculation(value);\n                this.setInnerValue(date);\n                break;\n            case BI.DynamicDateCombo.Static:\n            default:\n                if (BI.isNull(value) || BI.isNull(value.year) || BI.isNull(value.month)) {\n                    this.editor.setState('');\n                    this.editor.setValue('');\n                } else {\n                    const dateStr = BI.print(BI.getDate(value.year, value.month - 1, 1), this.getFormatString());\n                    this.editor.setState(dateStr);\n                    this.editor.setValue(dateStr);\n                }\n                break;\n        }\n    }\n\n    public setMinDate (minDate: string) {\n        if (BI.isNotEmptyString(this.options.min)) {\n            this.options.min = minDate;\n        }\n    }\n\n    public setMaxDate (maxDate: string) {\n        if (BI.isNotEmptyString(this.options.max)) {\n            this.options.max = maxDate;\n        }\n    }\n\n    public getKey () {\n        return this.editor.getValue();\n    }\n\n    public getValue () {\n        return this.storeValue;\n    }\n\n    public focus () {\n        this.editor.focus();\n    }\n\n    public blur () {\n        this.editor.blur();\n    }\n\n    public setWaterMark(v: string) {\n        this.editor.setWaterMark(v);\n    }\n}\n"]}