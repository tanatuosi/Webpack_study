{"version":3,"file":"combo.yearmonth.js","sourceRoot":"","sources":["../../../../src/modules/datetime/yearmonth/combo.yearmonth.ts"],"names":[],"mappings":"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","sourcesContent":["import { YearMonthTrigger } from './trigger.yearmonth';\nimport './combo.yearmonth.less';\nimport { shortcut } from '@engine/core';\nimport { Combo, DynamicYearMonthPopup, HTapeLayout, IconButton } from '@fui/core';\nimport { MAX_DATE, MIN_DATE } from '../datetime.constants';\n\nconst constants = {\n    popupHeight: 259,\n    popupWidth: 270,\n    comboAdjustHeight: 1,\n    border: 1,\n};\n\n@shortcut()\nexport class YearMonthCombo extends BI.Single {\n    public static xtype = 'report.components.dynamic_year_month_combo';\n\n    public props: {\n\n        /**\n         * 水印\n         */\n        watermark?: string,\n\n        /**\n         * 最小日期\n         */\n        minDate?: string,\n\n        /**\n         * 最大日期\n         */\n        maxDate?: string,\n\n        /**\n         * 显示的日期格式化方式\n         */\n        format?: string,\n\n        /**\n         * 是否允许编辑\n         */\n        allowEdit?: true,\n\n        /**\n         * 承载popup的容器\n         */\n        container?: string,\n\n        /**\n         * 是否支持动态时间\n         */\n        supportDynamic?: boolean,\n\n        /**\n         * 行为\n         */\n        behaviors?: {\n            redmark?: Function,\n            highlight?: Function\n        },\n\n        /**\n         * 控件值\n         */\n        value?: {\n            type: 1 | 2,\n            value: {\n                year?: number\n                month?: number\n            }\n        },\n        baseCls: string,\n        width: number,\n        height: number,\n        isNeedAdjustWidth: boolean,\n    } = {\n        baseCls: 'bi-dynamic-year-month-combo',\n        width: 80,\n        height: 21,\n        minDate: MIN_DATE,\n        maxDate: MAX_DATE,\n        format: '',\n        allowEdit: true,\n        isNeedAdjustWidth: true,\n    }\n\n    private storeTriggerValue: string;\n\n    private storeValue?: {\n        type: 1 | 2,\n        value: {\n            year?: number\n            month?: number\n        }\n    };\n\n    private changeIcon: IconButton;\n\n    private combo: Combo;\n\n    private trigger: YearMonthTrigger;\n\n    private popup: DynamicYearMonthPopup;\n\n    private comboWrapper: HTapeLayout;\n\n    private triggerBtn: IconButton;\n\n    public render () {\n        const { width, height: initialHeight, container, value, minDate, maxDate, format, allowEdit, behaviors, watermark, isNeedAdjustWidth } = this.options,\n            { comboAdjustHeight } = constants;\n        this.storeTriggerValue = '';\n\n        const date = BI.getDate();\n\n        this.storeValue = value;\n\n        const height = initialHeight;\n        \n        return {\n            type: BI.HTapeLayout.xtype,\n            width,\n            height,\n            cls: 'bi-focus-shadow',\n            items: [{\n                el: {\n                    type: BI.IconButton.xtype,\n                    cls: 'bi-trigger-icon-button date-change-h-font',\n                    width: height,\n                    height,\n                    ref: (_ref: IconButton) => {\n                        this.changeIcon = _ref;\n                    },\n                },\n                width: height,\n            }, {\n                type: BI.AbsoluteLayout.xtype,\n                items: [{\n                    // REPORT-67192 调整层级结构，不需要再对iconButton的点击做处理\n                    el: {\n                        type: BI.IconButton.xtype,\n                        cls: 'bi-trigger-icon-button date-font',\n                        width: height,\n                        height,\n                        ref: (_ref: IconButton) => {\n                            this.triggerBtn = _ref;\n                        },\n                    },\n                    top: 0,\n                    right: 0,\n                }, {\n                    el: {\n                        type: BI.Combo.xtype,\n                        cls: 'bi-border bi-border-radius',\n                        destroyWhenHide: true,\n                        container,\n                        ref: (_ref: Combo) => {\n                            this.combo = _ref;\n                        },\n                        toggle: false,\n                        isNeedAdjustHeight: false,\n                        isNeedAdjustWidth,\n                        el: {\n                            type: YearMonthTrigger.xtype,\n                            min: minDate,\n                            max: maxDate,\n                            watermark,\n                            format,\n                            allowEdit,\n                            height: height - 2,\n                            value,\n                            ref: (_ref: any) => {\n                                this.trigger = _ref;\n                            },\n                            listeners: [{\n                                eventName: 'EVENT_KEY_DOWN',\n                                action: () => {\n                                    if (this.combo.isViewVisible()) {\n                                        this.combo.hideView();\n                                    }\n                                    this.fireEvent('EVENT_KEY_DOWN', arguments);\n                                },\n                            }, {\n                                eventName: 'EVENT_STOP',\n                                action: () => {\n                                    if (!this.combo.isViewVisible()) {\n                                        this.combo.showView();\n                                    }\n                                },\n                            }, {\n                                eventName: 'EVENT_FOCUS',\n                                action: () => {\n                                    this.storeTriggerValue = this.trigger.getKey();\n                                    if (!this.combo.isViewVisible()) {\n                                        this.combo.showView();\n                                    }\n                                    this.fireEvent('EVENT_FOCUS');\n                                },\n                            }, {\n                                eventName: 'EVENT_BLUR',\n                                action: () => {\n                                    this.fireEvent('EVENT_BLUR');\n                                },\n                            }, {\n                                eventName: 'EVENT_ERROR',\n                                action: () => {\n                                    this.storeValue = {\n                                        type: BI.DynamicDateCombo.Static,\n                                        value: {\n                                            year: date.getFullYear(),\n                                            month: date.getMonth() + 1,\n                                        },\n                                    };\n                                    this.fireEvent('EVENT_ERROR');\n                                },\n                            }, {\n                                eventName: 'EVENT_VALID',\n                                action: () => {\n                                    this.fireEvent('EVENT_VALID');\n                                },\n                            }, {\n                                eventName: 'EVENT_CHANGE',\n                                action: () => {\n                                    this.fireEvent('EVENT_CHANGE');\n                                },\n                            }, {\n                                eventName: 'EVENT_CONFIRM',\n                                action: () => {\n                                    if (this.combo.isViewVisible()) {\n                                        return;\n                                    }\n                                    const dateStore = this.storeTriggerValue;\n                                    const dateObj = this.trigger.getKey();\n                                    if (BI.isNotEmptyString(dateObj) && !BI.isEqual(dateObj, dateStore)) {\n                                        this.storeValue = this.trigger.getValue();\n                                        this.setValue(this.trigger.getValue());\n                                    } else if (BI.isEmptyString(dateObj)) {\n                                        this.storeValue = undefined;\n\n                                        this.trigger.setValue();\n                                    }\n                                    this.checkDynamicValue(this.storeValue);\n                                    this.fireEvent('EVENT_CONFIRM');\n                                },\n                            }],\n                        },\n                        adjustLength: comboAdjustHeight,\n                        popup: {\n                            el: {\n                                type: BI.DynamicYearMonthPopup.xtype,\n                                width: isNeedAdjustWidth ? width : undefined,\n                                behaviors,\n                                supportDynamic: this.options.supportDynamic,\n                                min: minDate,\n                                max: maxDate,\n                                ref: (_ref: DynamicYearMonthPopup) => {\n                                    this.popup = _ref;\n                                },\n                                listeners: [{\n                                    eventName: 'EVENT_CHANGE',\n                                    action: () => {\n                                        this.setValue(this.popup.getValue());\n                                        this.combo.hideView();\n                                        this.fireEvent('EVENT_CONFIRM');\n                                    },\n                                }, {\n                                    eventName: 'BUTTON_CLEAR_EVENT_CHANGE',\n                                    action: () => {\n                                        this.setValue();\n                                        this.combo.hideView();\n                                        this.fireEvent('EVENT_CONFIRM');\n                                    },\n                                }, {\n                                    eventName: 'BUTTON_lABEL_EVENT_CHANGE',\n                                    action: () => {\n                                        const date = BI.getDate();\n                                        this.setValue({ type: BI.DynamicDateCombo.Static, value: { year: date.getFullYear(), month: date.getMonth() + 1 } });\n                                        this.combo.hideView();\n                                        this.fireEvent('EVENT_CONFIRM');\n                                    },\n                                }, {\n                                    eventName: 'BUTTON_OK_EVENT_CHANGE',\n                                    action: () => {\n                                        this.setValue(this.popup.getValue());\n                                        this.combo.hideView();\n                                        this.fireEvent('EVENT_CONFIRM');\n                                    },\n                                }],\n                            },\n                            value,\n                            stopPropagation: false,\n                        },\n                        // DEC-4250 和复选下拉一样，点击triggerBtn不默认收起\n                        hideChecker: (e: any) => this.triggerBtn.element.find(e.target).length === 0,\n                        listeners: [{\n                            eventName: BI.Combo.EVENT_BEFORE_POPUPVIEW,\n                            action: () => {\n                                if (!this.combo.isViewVisible()) {\n                                    this.popup.setValue(this.storeValue);\n                                    this.popup.setMinDate(this.options.minDate);\n                                    this.popup.setMaxDate(this.options.maxDate);\n                                    this.fireEvent('EVENT_BEFORE_POPUPVIEW');\n                                }\n                            },\n                        }],\n                    },\n                    top: 0,\n                    left: 0,\n                    right: 0,\n                    bottom: 0,\n                }],\n            }],\n            ref: (_ref: HTapeLayout) => {\n                this.comboWrapper = _ref;\n            },\n        };\n    }\n\n    public mounted () {\n        this.checkDynamicValue(this.storeValue);\n    }\n\n    private checkDynamicValue (v?: {\n        type: 1 | 2,\n        value: {\n            year?: number\n            month?: number\n        }\n    }) {\n        const o = this.options;\n        let type = undefined;\n        if (BI.isNotNull(v)) {\n            type = v.type;\n        }\n        switch (type) {\n            case BI.DynamicDateCombo.Dynamic:\n                this.changeIcon.setVisible(true);\n                this.comboWrapper.attr('items')[0].width = o.height;\n                this.comboWrapper.resize();\n                break;\n            default:\n                this.comboWrapper.attr('items')[0].width = 0;\n                this.comboWrapper.resize();\n                this.changeIcon.setVisible(false);\n                break;\n        }\n    }\n\n    public setMinDate(minDate: string) {\n        this.options.minDate = minDate;\n        this.trigger.setMinDate(minDate);\n        this.popup && this.popup.setMinDate(minDate);\n    }\n\n    public setMaxDate(maxDate: string) {\n        this.options.maxDate = maxDate;\n        this.trigger.setMaxDate(maxDate);\n        this.popup && this.popup.setMaxDate(maxDate);\n    }\n\n    public setValue (v?: {\n        type: 1 | 2,\n        value: {\n            year?: number\n            month?: number\n        }\n    }) {\n        this.storeValue = v;\n        this.trigger.setValue(v);\n        this.checkDynamicValue(v);\n    }\n\n    public getValue () {\n        return this.storeValue;\n    }\n\n    public getKey () {\n        return this.trigger.getKey();\n    }\n\n    public hidePopupView () {\n        this.combo.hideView();\n    }\n\n    public focus () {\n        this.trigger.focus();\n    }\n\n    public blur () {\n        this.trigger.blur();\n    }\n\n    public setWaterMark(v: string) {\n        this.trigger.setWaterMark(v);\n    }\n}\n"]}