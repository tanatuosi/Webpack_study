{"version":3,"file":"multifile.progress_bar.js","sourceRoot":"","sources":["../../../../src/modules/multifile/progress_bar/multifile.progress_bar.ts"],"names":[],"mappings":";;;;;;AACA,OAAO,EAAE,QAAQ,EAAE,MAAM,cAAc,CAAC;AACxC,OAAO,+BAA+B,CAAC;AAGvC,IAAa,6BAA6B,GAA1C,MAAa,6BAA8B,SAAQ,EAAE,CAAC,MAAM;IAA5D;;QAGW,UAAK,GAAG;YACX,OAAO,EAAE,mEAAmE;YAC5E,KAAK,EAAE,GAAG;YACV,MAAM,EAAE,EAAE;YACV,KAAK,EAAE,CAAC;SACX,CAAC;IAyDN,CAAC;IAnDU,MAAM;QACT,MAAM,EAAE,KAAK,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC;QAE/B,OAAO;YACH,IAAI,EAAE,EAAE,CAAC,cAAc,CAAC,KAAK;YAC7B,GAAG,EAAE,CAAC,GAAmB,EAAE,EAAE;gBACzB,IAAI,CAAC,KAAK,GAAG,GAAG,CAAC;YACrB,CAAC;YACD,KAAK,EAAE;gBACH;oBACI,EAAE,EAAE;wBACA,IAAI,EAAE,EAAE,CAAC,MAAM,CAAC,KAAK;wBACrB,GAAG,EAAE,sBAAsB;qBAC9B;oBACD,GAAG,EAAE,CAAC;oBACN,IAAI,EAAE,CAAC;oBACP,KAAK,EAAE,IAAI,CAAC,4BAA4B,CAAC,KAAK,CAAC;oBAC/C,MAAM,EAAE,CAAC;iBACZ;gBACD;oBACI,EAAE,EAAE;wBACA,IAAI,EAAE,EAAE,CAAC,KAAK,CAAC,KAAK;wBACpB,GAAG,EAAE,CAAC,GAAU,EAAE,EAAE;4BAChB,IAAI,CAAC,IAAI,GAAG,GAAG,CAAC;wBACpB,CAAC;wBACD,IAAI,EAAE,IAAI,CAAC,4BAA4B,CAAC,KAAK,CAAC;qBACjD;oBACD,GAAG,EAAE,CAAC;oBACN,IAAI,EAAE,CAAC;oBACP,KAAK,EAAE,CAAC;oBACR,MAAM,EAAE,CAAC;iBACZ;aACJ;SACJ,CAAC;IACN,CAAC;IAEM,QAAQ,CAAC,QAAgB;QAC5B,IAAI,CAAC,OAAO,CAAC,KAAK,GAAG,QAAQ,CAAC;QAE9B,MAAM,UAAU,GAAG,IAAI,CAAC,4BAA4B,CAAC,QAAQ,CAAC,CAAC;QAE/D,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC;QAE/B,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,UAAU,CAAC;QAE/C,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC;IACxB,CAAC;IAEO,4BAA4B,CAAC,QAAgB;QACjD,OAAO,GAAG,CAAC,QAAQ,GAAG,GAAG,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC;IAC7C,CAAC;CACJ,CAAA;AAhEiB,mCAAK,GAAG,mEAAmE,CAAC;AADjF,6BAA6B;IADzC,QAAQ,EAAE;GACE,6BAA6B,CAiEzC;SAjEY,6BAA6B","sourcesContent":["import { AbsoluteLayout, Label } from '@fui/core';\nimport { shortcut } from '@engine/core';\nimport './multifile.progress_bar.less';\n\n@shortcut()\nexport class ParameterMultifileProgressBar extends BI.Widget {\n    public static xtype = 'report.main.parameter_container.controller.multifile.progress_bar';\n\n    public props = {\n        baseCls: 'report-main-parameter-container-controller-multifile-progress-bar',\n        width: 280,\n        height: 16,\n        value: 0,\n    };\n\n    private text: Label;\n\n    private layer: AbsoluteLayout;\n\n    public render() {\n        const { value } = this.options;\n\n        return {\n            type: BI.AbsoluteLayout.xtype,\n            ref: (ref: AbsoluteLayout) => {\n                this.layer = ref;\n            },\n            items: [\n                {\n                    el: {\n                        type: BI.Layout.xtype,\n                        cls: 'progress-bar-current',\n                    },\n                    top: 0,\n                    left: 0,\n                    width: this.transformProgress2Percentage(value),\n                    bottom: 0,\n                },\n                {\n                    el: {\n                        type: BI.Label.xtype,\n                        ref: (ref: Label) => {\n                            this.text = ref;\n                        },\n                        text: this.transformProgress2Percentage(value),\n                    },\n                    top: 0,\n                    left: 0,\n                    right: 0,\n                    bottom: 0,\n                },\n            ],\n        };\n    }\n\n    public setValue(progress: number) {\n        this.options.value = progress;\n\n        const percentage = this.transformProgress2Percentage(progress);\n\n        this.text.setValue(percentage);\n\n        this.layer.attr('items')[0].width = percentage;\n\n        this.layer.resize();\n    }\n\n    private transformProgress2Percentage(progress: number) {\n        return `${(progress * 100).toFixed(0)}%`;\n    }\n}\n"]}