{"version":3,"file":"multifile.progress_pane.js","sourceRoot":"","sources":["../../../../src/modules/multifile/progress_pane/multifile.progress_pane.ts"],"names":[],"mappings":"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","sourcesContent":["import { Label } from '@fui/core';\nimport { shortcut } from '@engine/core';\nimport { ParameterMultifileProgressBar } from '../progress_bar/multifile.progress_bar';\nimport './multifile.progress_pane.less';\n\n@shortcut()\nexport class ParameterMultifileProgressPane extends BI.Widget {\n    public static xtype = 'report.main.parameter_container.controller.multifile.progress_pane';\n\n    private statusText: Label;\n\n    private totalProgressBar: ParameterMultifileProgressBar;\n\n    private currentProgressBar: ParameterMultifileProgressBar;\n\n    public props = {\n        baseCls: 'report-main-parameter-container-controller-multifile-progress-pane',\n        queueGetter: () => [] as string[],\n        uploadedGetter: () => [] as string[],\n        value: 0,\n    };\n\n    public render() {\n        const { queueGetter, value } = this.options;\n\n        const { text: statusText, value: totalValue } = this.getTotalStatus();\n\n        return {\n            type: BI.VerticalLayout.xtype,\n            tgap: 2,\n            hgap: 2,\n            bgap: 5,\n            items: [\n                {\n                    type: BI.Label.xtype,\n                    cls: 'pane-title',\n                    textAlign: 'left',\n                    text: BI.i18nText('Fine-Report_Upload_Progress'),\n                    height: 24,\n                },\n                {\n                    type: BI.Label.xtype,\n                    ref: (ref: Label) => {\n                        this.statusText = ref;\n                    },\n                    textAlign: 'left',\n                    text: statusText,\n                },\n                {\n                    type: BI.Label.xtype,\n                    textAlign: 'left',\n                    text: BI.i18nText('Fine-Report_Overall_Uploading_Progress'),\n                },\n                {\n                    type: ParameterMultifileProgressBar.xtype,\n                    ref: (ref: ParameterMultifileProgressBar) => {\n                        this.totalProgressBar = ref;\n                    },\n                    value,\n                },\n                {\n                    type: BI.Label.xtype,\n                    textAlign: 'left',\n                    text: BI.i18nText('Fine-Report_Current_Uploading_Progress'),\n                },\n                {\n                    type: ParameterMultifileProgressBar.xtype,\n                    ref: (ref: ParameterMultifileProgressBar) => {\n                        this.currentProgressBar = ref;\n                    },\n                    value: totalValue,\n                },\n                {\n                    type: BI.Label.xtype,\n                    textAlign: 'left',\n                    text: queueGetter().join('\\n'),\n                },\n            ],\n        };\n    }\n\n    public setValue(progress: number) {\n        this.options.value = progress;\n\n        const { text: statusText, value: totalValue } = this.getTotalStatus();\n\n        this.statusText.setValue(statusText);\n\n        this.totalProgressBar.setValue(totalValue);\n\n        this.currentProgressBar.setValue(progress);\n    }\n\n    private getTotalStatus() {\n        const { queueGetter, uploadedGetter, value } = this.options;\n\n        const total = BI.size(queueGetter());\n\n        const loaded = BI.size(uploadedGetter());\n\n        const progress = value / total + loaded / total;\n\n        return {\n            text: BI.i18nText(progress !== 1 ? 'Fine-Report_Parepare_For_Uploading' : 'Fine-Report_Upload_Complete'),\n            value: progress,\n        };\n    }\n}\n"]}